{"version":3,"file":"vue-mathlive.mjs","sources":["../src/vue-mathlive.js"],"sourcesContent":["export default {\n  name: 'mathlive-mathfield',\n  template: '<div class=\"mathfield\" :id=\"id\"><slot></slot></div>',\n  props: {\n    id: {\n      type: String,\n      default: '',\n    },\n    value: {\n      type: String,\n      default: '',\n    },\n    options: {\n      type: Object,\n      default: () => ({}),\n    },\n    onKeystroke: {\n      type: Function,\n      default(_keystroke, _ev) {\n        return true;\n      },\n    },\n    onMoveOutOf: {\n      type: Function,\n      default(_direction) {\n        return true;\n      },\n    },\n    onTabOutOf: {\n      type: Function,\n      default(_direction) {\n        return true;\n      },\n    },\n  },\n  /*\n   * To register this component, call:\n   * ```\n   *     import * as MathLive from './mathlive.mjs';\n   *     import MathfieldComponent from './vue-mathlive.mjs';\n   *     Vue.use(MathfieldComponent, MathLive);\n   * ```\n   *\n   * The HTML tag for this component is `<mathlive-mathfield>`\n   *\n   * @param {object} vue - This module, as returned from an import statement\n   * @param {object} mathlive - The MathLive module, as returned from an import\n   * statement\n   */\n  install(vue, mathlive) {\n    // When the component is installed (with Vue.use()), the first argument\n    // should be the component (as received from import) and the second\n    // should be the MathLive module (also as received from import).\n    // The MathLive module then gets stashed as a property of the Vue\n    // object to be accessed later by the component implementation.\n    // This allows the user of the component to control which version of\n    // the MathLive module gets used.\n    Object.defineProperty(vue.prototype, '$mathlive', { value: mathlive });\n    vue.component('mathlive-mathfield', this);\n  },\n  watch: {\n    value(newValue, _oldValue) {\n      // When the `value` prop (from the model) is modified\n      // update the mathfield to stay in sync, but don't send back content\n      // change notifications, to avoid infinite loops.\n      const oldMathfieldValue = this.$el.mathfield.getValue();\n      if (newValue !== oldMathfieldValue) {\n        this.$el.mathfield.setValue(newValue, {\n          suppressChangeNotifications: true,\n        });\n      }\n    },\n    options: {\n      deep: true,\n      handler(newValue, oldValue) {\n        if (JSON.stringify(newValue) !== JSON.stringify(oldValue)) {\n          this.$el.mathfield.setOptions(newValue);\n        }\n      },\n    },\n  },\n  mounted() {\n    // A new instance is being created\n    // Wait until the DOM has been constructed...\n    this.$nextTick(() => {\n      // ... then make the Mathfield\n      this.$mathlive.makeMathField(this.$el, {\n        ...this.options,\n        // To support the 'model' directive, this handler will connect\n        // the content of the mathfield to the ViewModel\n        onContentDidChange: (_) => {\n          // When the mathfield is updated, notify the model.\n          // The initial input value is generated from the <slot>\n          // content, so it may need to be updated.\n          this.$emit('input', this.$el.mathfield.getValue());\n        },\n        // Those asynchronous notification handlers are translated to events\n        onFocus: (_) => {\n          this.$emit('focus');\n        },\n        onBlur: (_) => {\n          this.$emit('blur');\n        },\n        onUndoStateDidChange: (_, command) => {\n          this.$emit('undo-state-did-change', command);\n        },\n        onReadAloudStatus: (_, status) => {\n          this.$emit('read-aloud-status-change', status);\n        },\n\n        // Those notification handlers expect an answer back, so translate\n        // them to callbacks via props\n        onKeystroke: (_, keystroke, ev) => {\n          return this.onKeystroke(keystroke, ev);\n        },\n        onMoveOutOf: (_, direction) => {\n          return this.onMoveOutOf(direction);\n        },\n        onTabOutOf: (_, direction) => {\n          return this.onTabOutOf(direction);\n        },\n      });\n    });\n  },\n  methods: {\n    /*\n     *\n     * @param {string} selector\n     */\n    executeCommand(selector) {\n      this.$el.mathfield.executeCommand(selector);\n    },\n    /*\n     * @return {boolean}\n     */\n    hasFocus() {\n      return this.$el.mathfield.hasFocus();\n    },\n    focus() {\n      this.$el.mathfield.focus();\n    },\n    blur() {\n      this.$el.mathfield.blur();\n    },\n    getValue(format) {\n      return this.$el.mathfield.getValue(format);\n    },\n    /** @deprecated */\n    selectedText(format) {\n      return this.$el.mathfield.$selectedText(format);\n    },\n    insert(text, options) {\n      this.$el.mathfield.insert(text, options);\n    },\n    select() {\n      this.$el.mathfield.select();\n    },\n  },\n};\n"],"names":[],"mappings":"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"}