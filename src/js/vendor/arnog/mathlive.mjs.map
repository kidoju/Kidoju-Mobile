{"version":3,"file":"mathlive.mjs","sources":["../src/common/types.ts","../src/core/font-metrics-data.ts","../src/core/font-metrics.ts","../src/core/mathstyle.ts","../src/core/context.ts","../src/core/svg-span.ts","../src/core/modes-utils.ts","../src/core/span.ts","../src/core/grapheme-splitter.ts","../src/core/tokenizer.ts","../src/core-definitions/definitions-utils.ts","../src/core/atom-class.ts","../src/core/color.ts","../src/core-atoms/group.ts","../src/core-atoms/spacing.ts","../src/core/delimiters.ts","../src/core-atoms/leftright.ts","../src/core-atoms/subsup.ts","../src/core-atoms/placeholder.ts","../src/core-atoms/error.ts","../src/core-atoms/macro.ts","../src/core-atoms/text.ts","../src/core/parser.ts","../src/core-atoms/accent.ts","../src/core-atoms/overunder.ts","../src/core-definitions/accents.ts","../src/core-atoms/enclose.ts","../src/core-definitions/enclose.ts","../src/core-atoms/array.ts","../src/core-definitions/environments.ts","../src/core-definitions/extensible-symbols.ts","../src/core-atoms/operator.ts","../src/core-atoms/surd.ts","../src/core-atoms/genfrac.ts","../src/core-atoms/delim.ts","../src/core-definitions/functions.ts","../src/core-definitions/mhchem.ts","../src/core-atoms/box.ts","../src/core-atoms/phantom.ts","../src/core-atoms/line.ts","../src/core-atoms/overlap.ts","../src/core-atoms/rule.ts","../src/core-definitions/styling.ts","../src/core-definitions/symbols.ts","../src/common/script-url.ts","../src/core/fonts.ts","../src/common/hash-code.ts","../src/common/stylesheet.ts","../src/editor-model/utils.ts","../src/addons/math-json.ts","../src/addons/math-ml.ts","../src/editor/atom-to-ascii-math.ts","../src/editor/atom-to-speakable-text.ts","../src/editor-model/listeners.ts","../src/editor-model/selection-utils.ts","../src/editor-model/model-private.ts","../src/editor-mathfield/utils.ts","../src/core/modes-math.ts","../src/core/modes-text.ts","../src/core-atoms/latex.ts","../src/core/modes-latex.ts","../src/editor/keyboard-layout.ts","../src/editor/keybindings-definitions.ts","../src/editor/keybindings.ts","../src/editor-mathfield/buttons.ts","../src/editor/popover.ts","../src/editor-mathfield/render.ts","../src/editor-mathfield/mode-editor.ts","../src/editor-mathfield/mode-editor-latex.ts","../src/editor-mathfield/autocomplete.ts","../src/editor/commands.ts","../src/editor-model/array.ts","../src/editor-model/delete.ts","../src/core-atoms/composition.ts","../src/editor-model/composition.ts","../src/editor-model/selection.ts","../src/editor-model/styling.ts","../src/editor-model/commands.ts","../src/editor-model/commands-delete.ts","../src/editor-model/commands-move.ts","../src/editor-model/commands-select.ts","../src/editor/keyboard.ts","../src/editor/undo.ts","../src/editor/l10n-strings.ts","../src/editor/l10n.ts","../src/editor-model/find.ts","../src/editor/speech.ts","../src/editor/a11y.ts","../src/editor/shortcuts-definitions.ts","../src/editor/options.ts","../src/editor/shortcuts.ts","../src/editor-mathfield/smartmode.ts","../src/editor/parse-math-string.ts","../src/editor-mathfield/mode-editor-math.ts","../src/editor-mathfield/keyboard-input.ts","../src/editor-mathfield/commands.ts","../src/editor-mathfield/styling.ts","../src/editor-mathfield/pointer-input.ts","../src/editor/virtual-keyboard-utils.ts","../src/editor/virtual-keyboard-commands.ts","../src/editor-mathfield/mode-editor-text.ts","../src/editor-mathfield/remote-virtual-keyboard.ts","../src/editor-mathfield/mathfield-private.ts","../src/addons/auto-render.ts","../src/addons/debug.ts","../src/editor/speech-read-aloud.ts","../src/addons/definitions-metadata.ts","../src/public/mathfield-element.ts","../src/mathlive.ts"],"sourcesContent":["export function isArray<T = any>(x: unknown): x is T[] {\n  return Array.isArray(x);\n}\n\nexport function isString(x: unknown): x is string {\n  return typeof x === 'string';\n}\n\nexport function isNumber(x: unknown): x is number {\n  return typeof x === 'number' && !Number.isNaN(x);\n}\n\nexport function isFunction(x: unknown): x is (...args: any[]) => void {\n  return typeof x === 'function';\n}\n","export default {\n  'AMS-Regular': {\n    '65': [0, 0.68889, 0, 0],\n    '66': [0, 0.68889, 0, 0],\n    '67': [0, 0.68889, 0, 0],\n    '68': [0, 0.68889, 0, 0],\n    '69': [0, 0.68889, 0, 0],\n    '70': [0, 0.68889, 0, 0],\n    '71': [0, 0.68889, 0, 0],\n    '72': [0, 0.68889, 0, 0],\n    '73': [0, 0.68889, 0, 0],\n    '74': [0.16667, 0.68889, 0, 0],\n    '75': [0, 0.68889, 0, 0],\n    '76': [0, 0.68889, 0, 0],\n    '77': [0, 0.68889, 0, 0],\n    '78': [0, 0.68889, 0, 0],\n    '79': [0.16667, 0.68889, 0, 0],\n    '80': [0, 0.68889, 0, 0],\n    '81': [0.16667, 0.68889, 0, 0],\n    '82': [0, 0.68889, 0, 0],\n    '83': [0, 0.68889, 0, 0],\n    '84': [0, 0.68889, 0, 0],\n    '85': [0, 0.68889, 0, 0],\n    '86': [0, 0.68889, 0, 0],\n    '87': [0, 0.68889, 0, 0],\n    '88': [0, 0.68889, 0, 0],\n    '89': [0, 0.68889, 0, 0],\n    '90': [0, 0.68889, 0, 0],\n    '107': [0, 0.68889, 0, 0],\n    '165': [0, 0.675, 0.025, 0],\n    '174': [0.15559, 0.69224, 0, 0],\n    '240': [0, 0.68889, 0, 0],\n    '295': [0, 0.68889, 0, 0],\n    '710': [0, 0.825, 0, 0],\n    '732': [0, 0.9, 0, 0],\n    '770': [0, 0.825, 0, 0],\n    '771': [0, 0.9, 0, 0],\n    '989': [0.08167, 0.58167, 0, 0],\n    '1008': [0, 0.43056, 0.04028, 0],\n    '8245': [0, 0.54986, 0, 0],\n    '8463': [0, 0.68889, 0, 0],\n    '8487': [0, 0.68889, 0, 0],\n    '8498': [0, 0.68889, 0, 0],\n    '8502': [0, 0.68889, 0, 0],\n    '8503': [0, 0.68889, 0, 0],\n    '8504': [0, 0.68889, 0, 0],\n    '8513': [0, 0.68889, 0, 0],\n    '8592': [-0.03598, 0.46402, 0, 0],\n    '8594': [-0.03598, 0.46402, 0, 0],\n    '8602': [-0.13313, 0.36687, 0, 0],\n    '8603': [-0.13313, 0.36687, 0, 0],\n    '8606': [0.01354, 0.52239, 0, 0],\n    '8608': [0.01354, 0.52239, 0, 0],\n    '8610': [0.01354, 0.52239, 0, 0],\n    '8611': [0.01354, 0.52239, 0, 0],\n    '8619': [0, 0.54986, 0, 0],\n    '8620': [0, 0.54986, 0, 0],\n    '8621': [-0.13313, 0.37788, 0, 0],\n    '8622': [-0.13313, 0.36687, 0, 0],\n    '8624': [0, 0.69224, 0, 0],\n    '8625': [0, 0.69224, 0, 0],\n    '8630': [0, 0.43056, 0, 0],\n    '8631': [0, 0.43056, 0, 0],\n    '8634': [0.08198, 0.58198, 0, 0],\n    '8635': [0.08198, 0.58198, 0, 0],\n    '8638': [0.19444, 0.69224, 0, 0],\n    '8639': [0.19444, 0.69224, 0, 0],\n    '8642': [0.19444, 0.69224, 0, 0],\n    '8643': [0.19444, 0.69224, 0, 0],\n    '8644': [0.1808, 0.675, 0, 0],\n    '8646': [0.1808, 0.675, 0, 0],\n    '8647': [0.1808, 0.675, 0, 0],\n    '8648': [0.19444, 0.69224, 0, 0],\n    '8649': [0.1808, 0.675, 0, 0],\n    '8650': [0.19444, 0.69224, 0, 0],\n    '8651': [0.01354, 0.52239, 0, 0],\n    '8652': [0.01354, 0.52239, 0, 0],\n    '8653': [-0.13313, 0.36687, 0, 0],\n    '8654': [-0.13313, 0.36687, 0, 0],\n    '8655': [-0.13313, 0.36687, 0, 0],\n    '8666': [0.13667, 0.63667, 0, 0],\n    '8667': [0.13667, 0.63667, 0, 0],\n    '8669': [-0.13313, 0.37788, 0, 0],\n    '8672': [-0.064, 0.437, 0, 0],\n    '8674': [-0.064, 0.437, 0, 0],\n    '8705': [0, 0.825, 0, 0],\n    '8708': [0, 0.68889, 0, 0],\n    '8709': [0.08167, 0.58167, 0, 0],\n    '8717': [0, 0.43056, 0, 0],\n    '8722': [-0.03598, 0.46402, 0, 0],\n    '8724': [0.08198, 0.69224, 0, 0],\n    '8726': [0.08167, 0.58167, 0, 0],\n    '8733': [0, 0.69224, 0, 0],\n    '8736': [0, 0.69224, 0, 0],\n    '8737': [0, 0.69224, 0, 0],\n    '8738': [0.03517, 0.52239, 0, 0],\n    '8739': [0.08167, 0.58167, 0, 0],\n    '8740': [0.25142, 0.74111, 0, 0],\n    '8741': [0.08167, 0.58167, 0, 0],\n    '8742': [0.25142, 0.74111, 0, 0],\n    '8756': [0, 0.69224, 0, 0],\n    '8757': [0, 0.69224, 0, 0],\n    '8764': [-0.13313, 0.36687, 0, 0],\n    '8765': [-0.13313, 0.37788, 0, 0],\n    '8769': [-0.13313, 0.36687, 0, 0],\n    '8770': [-0.03625, 0.46375, 0, 0],\n    '8774': [0.30274, 0.79383, 0, 0],\n    '8776': [-0.01688, 0.48312, 0, 0],\n    '8778': [0.08167, 0.58167, 0, 0],\n    '8782': [0.06062, 0.54986, 0, 0],\n    '8783': [0.06062, 0.54986, 0, 0],\n    '8785': [0.08198, 0.58198, 0, 0],\n    '8786': [0.08198, 0.58198, 0, 0],\n    '8787': [0.08198, 0.58198, 0, 0],\n    '8790': [0, 0.69224, 0, 0],\n    '8791': [0.22958, 0.72958, 0, 0],\n    '8796': [0.08198, 0.91667, 0, 0],\n    '8806': [0.25583, 0.75583, 0, 0],\n    '8807': [0.25583, 0.75583, 0, 0],\n    '8808': [0.25142, 0.75726, 0, 0],\n    '8809': [0.25142, 0.75726, 0, 0],\n    '8812': [0.25583, 0.75583, 0, 0],\n    '8814': [0.20576, 0.70576, 0, 0],\n    '8815': [0.20576, 0.70576, 0, 0],\n    '8816': [0.30274, 0.79383, 0, 0],\n    '8817': [0.30274, 0.79383, 0, 0],\n    '8818': [0.22958, 0.72958, 0, 0],\n    '8819': [0.22958, 0.72958, 0, 0],\n    '8822': [0.1808, 0.675, 0, 0],\n    '8823': [0.1808, 0.675, 0, 0],\n    '8828': [0.13667, 0.63667, 0, 0],\n    '8829': [0.13667, 0.63667, 0, 0],\n    '8830': [0.22958, 0.72958, 0, 0],\n    '8831': [0.22958, 0.72958, 0, 0],\n    '8832': [0.20576, 0.70576, 0, 0],\n    '8833': [0.20576, 0.70576, 0, 0],\n    '8840': [0.30274, 0.79383, 0, 0],\n    '8841': [0.30274, 0.79383, 0, 0],\n    '8842': [0.13597, 0.63597, 0, 0],\n    '8843': [0.13597, 0.63597, 0, 0],\n    '8847': [0.03517, 0.54986, 0, 0],\n    '8848': [0.03517, 0.54986, 0, 0],\n    '8858': [0.08198, 0.58198, 0, 0],\n    '8859': [0.08198, 0.58198, 0, 0],\n    '8861': [0.08198, 0.58198, 0, 0],\n    '8862': [0, 0.675, 0, 0],\n    '8863': [0, 0.675, 0, 0],\n    '8864': [0, 0.675, 0, 0],\n    '8865': [0, 0.675, 0, 0],\n    '8872': [0, 0.69224, 0, 0],\n    '8873': [0, 0.69224, 0, 0],\n    '8874': [0, 0.69224, 0, 0],\n    '8876': [0, 0.68889, 0, 0],\n    '8877': [0, 0.68889, 0, 0],\n    '8878': [0, 0.68889, 0, 0],\n    '8879': [0, 0.68889, 0, 0],\n    '8882': [0.03517, 0.54986, 0, 0],\n    '8883': [0.03517, 0.54986, 0, 0],\n    '8884': [0.13667, 0.63667, 0, 0],\n    '8885': [0.13667, 0.63667, 0, 0],\n    '8888': [0, 0.54986, 0, 0],\n    '8890': [0.19444, 0.43056, 0, 0],\n    '8891': [0.19444, 0.69224, 0, 0],\n    '8892': [0.19444, 0.69224, 0, 0],\n    '8901': [0, 0.54986, 0, 0],\n    '8903': [0.08167, 0.58167, 0, 0],\n    '8905': [0.08167, 0.58167, 0, 0],\n    '8906': [0.08167, 0.58167, 0, 0],\n    '8907': [0, 0.69224, 0, 0],\n    '8908': [0, 0.69224, 0, 0],\n    '8909': [-0.03598, 0.46402, 0, 0],\n    '8910': [0, 0.54986, 0, 0],\n    '8911': [0, 0.54986, 0, 0],\n    '8912': [0.03517, 0.54986, 0, 0],\n    '8913': [0.03517, 0.54986, 0, 0],\n    '8914': [0, 0.54986, 0, 0],\n    '8915': [0, 0.54986, 0, 0],\n    '8916': [0, 0.69224, 0, 0],\n    '8918': [0.0391, 0.5391, 0, 0],\n    '8919': [0.0391, 0.5391, 0, 0],\n    '8920': [0.03517, 0.54986, 0, 0],\n    '8921': [0.03517, 0.54986, 0, 0],\n    '8922': [0.38569, 0.88569, 0, 0],\n    '8923': [0.38569, 0.88569, 0, 0],\n    '8926': [0.13667, 0.63667, 0, 0],\n    '8927': [0.13667, 0.63667, 0, 0],\n    '8928': [0.30274, 0.79383, 0, 0],\n    '8929': [0.30274, 0.79383, 0, 0],\n    '8934': [0.23222, 0.74111, 0, 0],\n    '8935': [0.23222, 0.74111, 0, 0],\n    '8936': [0.23222, 0.74111, 0, 0],\n    '8937': [0.23222, 0.74111, 0, 0],\n    '8938': [0.20576, 0.70576, 0, 0],\n    '8939': [0.20576, 0.70576, 0, 0],\n    '8940': [0.30274, 0.79383, 0, 0],\n    '8941': [0.30274, 0.79383, 0, 0],\n    '8994': [0.19444, 0.69224, 0, 0],\n    '8995': [0.19444, 0.69224, 0, 0],\n    '9416': [0.15559, 0.69224, 0, 0],\n    '9484': [0, 0.69224, 0, 0],\n    '9488': [0, 0.69224, 0, 0],\n    '9492': [0, 0.37788, 0, 0],\n    '9496': [0, 0.37788, 0, 0],\n    '9585': [0.19444, 0.68889, 0, 0],\n    '9586': [0.19444, 0.74111, 0, 0],\n    '9632': [0, 0.675, 0, 0],\n    '9633': [0, 0.675, 0, 0],\n    '9650': [0, 0.54986, 0, 0],\n    '9651': [0, 0.54986, 0, 0],\n    '9654': [0.03517, 0.54986, 0, 0],\n    '9660': [0, 0.54986, 0, 0],\n    '9661': [0, 0.54986, 0, 0],\n    '9664': [0.03517, 0.54986, 0, 0],\n    '9674': [0.11111, 0.69224, 0, 0],\n    '9733': [0.19444, 0.69224, 0, 0],\n    '10003': [0, 0.69224, 0, 0],\n    '10016': [0, 0.69224, 0, 0],\n    '10731': [0.11111, 0.69224, 0, 0],\n    '10846': [0.19444, 0.75583, 0, 0],\n    '10877': [0.13667, 0.63667, 0, 0],\n    '10878': [0.13667, 0.63667, 0, 0],\n    '10885': [0.25583, 0.75583, 0, 0],\n    '10886': [0.25583, 0.75583, 0, 0],\n    '10887': [0.13597, 0.63597, 0, 0],\n    '10888': [0.13597, 0.63597, 0, 0],\n    '10889': [0.26167, 0.75726, 0, 0],\n    '10890': [0.26167, 0.75726, 0, 0],\n    '10891': [0.48256, 0.98256, 0, 0],\n    '10892': [0.48256, 0.98256, 0, 0],\n    '10901': [0.13667, 0.63667, 0, 0],\n    '10902': [0.13667, 0.63667, 0, 0],\n    '10933': [0.25142, 0.75726, 0, 0],\n    '10934': [0.25142, 0.75726, 0, 0],\n    '10935': [0.26167, 0.75726, 0, 0],\n    '10936': [0.26167, 0.75726, 0, 0],\n    '10937': [0.26167, 0.75726, 0, 0],\n    '10938': [0.26167, 0.75726, 0, 0],\n    '10949': [0.25583, 0.75583, 0, 0],\n    '10950': [0.25583, 0.75583, 0, 0],\n    '10955': [0.28481, 0.79383, 0, 0],\n    '10956': [0.28481, 0.79383, 0, 0],\n    '57350': [0.08167, 0.58167, 0, 0],\n    '57351': [0.08167, 0.58167, 0, 0],\n    '57352': [0.08167, 0.58167, 0, 0],\n    '57353': [0, 0.43056, 0.04028, 0],\n    '57356': [0.25142, 0.75726, 0, 0],\n    '57357': [0.25142, 0.75726, 0, 0],\n    '57358': [0.41951, 0.91951, 0, 0],\n    '57359': [0.30274, 0.79383, 0, 0],\n    '57360': [0.30274, 0.79383, 0, 0],\n    '57361': [0.41951, 0.91951, 0, 0],\n    '57366': [0.25142, 0.75726, 0, 0],\n    '57367': [0.25142, 0.75726, 0, 0],\n    '57368': [0.25142, 0.75726, 0, 0],\n    '57369': [0.25142, 0.75726, 0, 0],\n    '57370': [0.13597, 0.63597, 0, 0],\n    '57371': [0.13597, 0.63597, 0, 0],\n  },\n  'Caligraphic-Regular': {\n    '48': [0, 0.43056, 0, 0],\n    '49': [0, 0.43056, 0, 0],\n    '50': [0, 0.43056, 0, 0],\n    '51': [0.19444, 0.43056, 0, 0],\n    '52': [0.19444, 0.43056, 0, 0],\n    '53': [0.19444, 0.43056, 0, 0],\n    '54': [0, 0.64444, 0, 0],\n    '55': [0.19444, 0.43056, 0, 0],\n    '56': [0, 0.64444, 0, 0],\n    '57': [0.19444, 0.43056, 0, 0],\n    '65': [0, 0.68333, 0, 0.19445],\n    '66': [0, 0.68333, 0.03041, 0.13889],\n    '67': [0, 0.68333, 0.05834, 0.13889],\n    '68': [0, 0.68333, 0.02778, 0.08334],\n    '69': [0, 0.68333, 0.08944, 0.11111],\n    '70': [0, 0.68333, 0.09931, 0.11111],\n    '71': [0.09722, 0.68333, 0.0593, 0.11111],\n    '72': [0, 0.68333, 0.00965, 0.11111],\n    '73': [0, 0.68333, 0.07382, 0],\n    '74': [0.09722, 0.68333, 0.18472, 0.16667],\n    '75': [0, 0.68333, 0.01445, 0.05556],\n    '76': [0, 0.68333, 0, 0.13889],\n    '77': [0, 0.68333, 0, 0.13889],\n    '78': [0, 0.68333, 0.14736, 0.08334],\n    '79': [0, 0.68333, 0.02778, 0.11111],\n    '80': [0, 0.68333, 0.08222, 0.08334],\n    '81': [0.09722, 0.68333, 0, 0.11111],\n    '82': [0, 0.68333, 0, 0.08334],\n    '83': [0, 0.68333, 0.075, 0.13889],\n    '84': [0, 0.68333, 0.25417, 0],\n    '85': [0, 0.68333, 0.09931, 0.08334],\n    '86': [0, 0.68333, 0.08222, 0],\n    '87': [0, 0.68333, 0.08222, 0.08334],\n    '88': [0, 0.68333, 0.14643, 0.13889],\n    '89': [0.09722, 0.68333, 0.08222, 0.08334],\n    '90': [0, 0.68333, 0.07944, 0.13889],\n  },\n  'Fraktur-Regular': {\n    '33': [0, 0.69141, 0, 0],\n    '34': [0, 0.69141, 0, 0],\n    '38': [0, 0.69141, 0, 0],\n    '39': [0, 0.69141, 0, 0],\n    '40': [0.24982, 0.74947, 0, 0],\n    '41': [0.24982, 0.74947, 0, 0],\n    '42': [0, 0.62119, 0, 0],\n    '43': [0.08319, 0.58283, 0, 0],\n    '44': [0, 0.10803, 0, 0],\n    '45': [0.08319, 0.58283, 0, 0],\n    '46': [0, 0.10803, 0, 0],\n    '47': [0.24982, 0.74947, 0, 0],\n    '48': [0, 0.47534, 0, 0],\n    '49': [0, 0.47534, 0, 0],\n    '50': [0, 0.47534, 0, 0],\n    '51': [0.18906, 0.47534, 0, 0],\n    '52': [0.18906, 0.47534, 0, 0],\n    '53': [0.18906, 0.47534, 0, 0],\n    '54': [0, 0.69141, 0, 0],\n    '55': [0.18906, 0.47534, 0, 0],\n    '56': [0, 0.69141, 0, 0],\n    '57': [0.18906, 0.47534, 0, 0],\n    '58': [0, 0.47534, 0, 0],\n    '59': [0.12604, 0.47534, 0, 0],\n    '61': [-0.13099, 0.36866, 0, 0],\n    '63': [0, 0.69141, 0, 0],\n    '65': [0, 0.69141, 0, 0],\n    '66': [0, 0.69141, 0, 0],\n    '67': [0, 0.69141, 0, 0],\n    '68': [0, 0.69141, 0, 0],\n    '69': [0, 0.69141, 0, 0],\n    '70': [0.12604, 0.69141, 0, 0],\n    '71': [0, 0.69141, 0, 0],\n    '72': [0.06302, 0.69141, 0, 0],\n    '73': [0, 0.69141, 0, 0],\n    '74': [0.12604, 0.69141, 0, 0],\n    '75': [0, 0.69141, 0, 0],\n    '76': [0, 0.69141, 0, 0],\n    '77': [0, 0.69141, 0, 0],\n    '78': [0, 0.69141, 0, 0],\n    '79': [0, 0.69141, 0, 0],\n    '80': [0.18906, 0.69141, 0, 0],\n    '81': [0.03781, 0.69141, 0, 0],\n    '82': [0, 0.69141, 0, 0],\n    '83': [0, 0.69141, 0, 0],\n    '84': [0, 0.69141, 0, 0],\n    '85': [0, 0.69141, 0, 0],\n    '86': [0, 0.69141, 0, 0],\n    '87': [0, 0.69141, 0, 0],\n    '88': [0, 0.69141, 0, 0],\n    '89': [0.18906, 0.69141, 0, 0],\n    '90': [0.12604, 0.69141, 0, 0],\n    '91': [0.24982, 0.74947, 0, 0],\n    '93': [0.24982, 0.74947, 0, 0],\n    '94': [0, 0.69141, 0, 0],\n    '97': [0, 0.47534, 0, 0],\n    '98': [0, 0.69141, 0, 0],\n    '99': [0, 0.47534, 0, 0],\n    '100': [0, 0.62119, 0, 0],\n    '101': [0, 0.47534, 0, 0],\n    '102': [0.18906, 0.69141, 0, 0],\n    '103': [0.18906, 0.47534, 0, 0],\n    '104': [0.18906, 0.69141, 0, 0],\n    '105': [0, 0.69141, 0, 0],\n    '106': [0, 0.69141, 0, 0],\n    '107': [0, 0.69141, 0, 0],\n    '108': [0, 0.69141, 0, 0],\n    '109': [0, 0.47534, 0, 0],\n    '110': [0, 0.47534, 0, 0],\n    '111': [0, 0.47534, 0, 0],\n    '112': [0.18906, 0.52396, 0, 0],\n    '113': [0.18906, 0.47534, 0, 0],\n    '114': [0, 0.47534, 0, 0],\n    '115': [0, 0.47534, 0, 0],\n    '116': [0, 0.62119, 0, 0],\n    '117': [0, 0.47534, 0, 0],\n    '118': [0, 0.52396, 0, 0],\n    '119': [0, 0.52396, 0, 0],\n    '120': [0.18906, 0.47534, 0, 0],\n    '121': [0.18906, 0.47534, 0, 0],\n    '122': [0.18906, 0.47534, 0, 0],\n    '8216': [0, 0.69141, 0, 0],\n    '8217': [0, 0.69141, 0, 0],\n    '58112': [0, 0.62119, 0, 0],\n    '58113': [0, 0.62119, 0, 0],\n    '58114': [0.18906, 0.69141, 0, 0],\n    '58115': [0.18906, 0.69141, 0, 0],\n    '58116': [0.18906, 0.47534, 0, 0],\n    '58117': [0, 0.69141, 0, 0],\n    '58118': [0, 0.62119, 0, 0],\n    '58119': [0, 0.47534, 0, 0],\n  },\n  'Main-Bold': {\n    '33': [0, 0.69444, 0, 0],\n    '34': [0, 0.69444, 0, 0],\n    '35': [0.19444, 0.69444, 0, 0],\n    '36': [0.05556, 0.75, 0, 0],\n    '37': [0.05556, 0.75, 0, 0],\n    '38': [0, 0.69444, 0, 0],\n    '39': [0, 0.69444, 0, 0],\n    '40': [0.25, 0.75, 0, 0],\n    '41': [0.25, 0.75, 0, 0],\n    '42': [0, 0.75, 0, 0],\n    '43': [0.13333, 0.63333, 0, 0],\n    '44': [0.19444, 0.15556, 0, 0],\n    '45': [0, 0.44444, 0, 0],\n    '46': [0, 0.15556, 0, 0],\n    '47': [0.25, 0.75, 0, 0],\n    '48': [0, 0.64444, 0, 0],\n    '49': [0, 0.64444, 0, 0],\n    '50': [0, 0.64444, 0, 0],\n    '51': [0, 0.64444, 0, 0],\n    '52': [0, 0.64444, 0, 0],\n    '53': [0, 0.64444, 0, 0],\n    '54': [0, 0.64444, 0, 0],\n    '55': [0, 0.64444, 0, 0],\n    '56': [0, 0.64444, 0, 0],\n    '57': [0, 0.64444, 0, 0],\n    '58': [0, 0.44444, 0, 0],\n    '59': [0.19444, 0.44444, 0, 0],\n    '60': [0.08556, 0.58556, 0, 0],\n    '61': [-0.10889, 0.39111, 0, 0],\n    '62': [0.08556, 0.58556, 0, 0],\n    '63': [0, 0.69444, 0, 0],\n    '64': [0, 0.69444, 0, 0],\n    '65': [0, 0.68611, 0, 0],\n    '66': [0, 0.68611, 0, 0],\n    '67': [0, 0.68611, 0, 0],\n    '68': [0, 0.68611, 0, 0],\n    '69': [0, 0.68611, 0, 0],\n    '70': [0, 0.68611, 0, 0],\n    '71': [0, 0.68611, 0, 0],\n    '72': [0, 0.68611, 0, 0],\n    '73': [0, 0.68611, 0, 0],\n    '74': [0, 0.68611, 0, 0],\n    '75': [0, 0.68611, 0, 0],\n    '76': [0, 0.68611, 0, 0],\n    '77': [0, 0.68611, 0, 0],\n    '78': [0, 0.68611, 0, 0],\n    '79': [0, 0.68611, 0, 0],\n    '80': [0, 0.68611, 0, 0],\n    '81': [0.19444, 0.68611, 0, 0],\n    '82': [0, 0.68611, 0, 0],\n    '83': [0, 0.68611, 0, 0],\n    '84': [0, 0.68611, 0, 0],\n    '85': [0, 0.68611, 0, 0],\n    '86': [0, 0.68611, 0.01597, 0],\n    '87': [0, 0.68611, 0.01597, 0],\n    '88': [0, 0.68611, 0, 0],\n    '89': [0, 0.68611, 0.02875, 0],\n    '90': [0, 0.68611, 0, 0],\n    '91': [0.25, 0.75, 0, 0],\n    '92': [0.25, 0.75, 0, 0],\n    '93': [0.25, 0.75, 0, 0],\n    '94': [0, 0.69444, 0, 0],\n    '95': [0.31, 0.13444, 0.03194, 0],\n    '97': [0, 0.44444, 0, 0],\n    '98': [0, 0.69444, 0, 0],\n    '99': [0, 0.44444, 0, 0],\n    '100': [0, 0.69444, 0, 0],\n    '101': [0, 0.44444, 0, 0],\n    '102': [0, 0.69444, 0.10903, 0],\n    '103': [0.19444, 0.44444, 0.01597, 0],\n    '104': [0, 0.69444, 0, 0],\n    '105': [0, 0.69444, 0, 0],\n    '106': [0.19444, 0.69444, 0, 0],\n    '107': [0, 0.69444, 0, 0],\n    '108': [0, 0.69444, 0, 0],\n    '109': [0, 0.44444, 0, 0],\n    '110': [0, 0.44444, 0, 0],\n    '111': [0, 0.44444, 0, 0],\n    '112': [0.19444, 0.44444, 0, 0],\n    '113': [0.19444, 0.44444, 0, 0],\n    '114': [0, 0.44444, 0, 0],\n    '115': [0, 0.44444, 0, 0],\n    '116': [0, 0.63492, 0, 0],\n    '117': [0, 0.44444, 0, 0],\n    '118': [0, 0.44444, 0.01597, 0],\n    '119': [0, 0.44444, 0.01597, 0],\n    '120': [0, 0.44444, 0, 0],\n    '121': [0.19444, 0.44444, 0.01597, 0],\n    '122': [0, 0.44444, 0, 0],\n    '123': [0.25, 0.75, 0, 0],\n    '124': [0.25, 0.75, 0, 0],\n    '125': [0.25, 0.75, 0, 0],\n    '126': [0.35, 0.34444, 0, 0],\n    '168': [0, 0.69444, 0, 0],\n    '172': [0, 0.44444, 0, 0],\n    '176': [0, 0.69444, 0, 0],\n    '177': [0.13333, 0.63333, 0, 0],\n    '184': [0.17014, 0, 0, 0],\n    '198': [0, 0.68611, 0, 0],\n    '215': [0.13333, 0.63333, 0, 0],\n    '216': [0.04861, 0.73472, 0, 0],\n    '223': [0, 0.69444, 0, 0],\n    '230': [0, 0.44444, 0, 0],\n    '247': [0.13333, 0.63333, 0, 0],\n    '248': [0.09722, 0.54167, 0, 0],\n    '305': [0, 0.44444, 0, 0],\n    '338': [0, 0.68611, 0, 0],\n    '339': [0, 0.44444, 0, 0],\n    '567': [0.19444, 0.44444, 0, 0],\n    '710': [0, 0.69444, 0, 0],\n    '711': [0, 0.63194, 0, 0],\n    '713': [0, 0.59611, 0, 0],\n    '714': [0, 0.69444, 0, 0],\n    '715': [0, 0.69444, 0, 0],\n    '728': [0, 0.69444, 0, 0],\n    '729': [0, 0.69444, 0, 0],\n    '730': [0, 0.69444, 0, 0],\n    '732': [0, 0.69444, 0, 0],\n    '733': [0, 0.69444, 0, 0],\n    '915': [0, 0.68611, 0, 0],\n    '916': [0, 0.68611, 0, 0],\n    '920': [0, 0.68611, 0, 0],\n    '923': [0, 0.68611, 0, 0],\n    '926': [0, 0.68611, 0, 0],\n    '928': [0, 0.68611, 0, 0],\n    '931': [0, 0.68611, 0, 0],\n    '933': [0, 0.68611, 0, 0],\n    '934': [0, 0.68611, 0, 0],\n    '936': [0, 0.68611, 0, 0],\n    '937': [0, 0.68611, 0, 0],\n    '8211': [0, 0.44444, 0.03194, 0],\n    '8212': [0, 0.44444, 0.03194, 0],\n    '8216': [0, 0.69444, 0, 0],\n    '8217': [0, 0.69444, 0, 0],\n    '8220': [0, 0.69444, 0, 0],\n    '8221': [0, 0.69444, 0, 0],\n    '8224': [0.19444, 0.69444, 0, 0],\n    '8225': [0.19444, 0.69444, 0, 0],\n    '8242': [0, 0.55556, 0, 0],\n    '8407': [0, 0.72444, 0.15486, 0],\n    '8463': [0, 0.69444, 0, 0],\n    '8465': [0, 0.69444, 0, 0],\n    '8467': [0, 0.69444, 0, 0],\n    '8472': [0.19444, 0.44444, 0, 0],\n    '8476': [0, 0.69444, 0, 0],\n    '8501': [0, 0.69444, 0, 0],\n    '8592': [-0.10889, 0.39111, 0, 0],\n    '8593': [0.19444, 0.69444, 0, 0],\n    '8594': [-0.10889, 0.39111, 0, 0],\n    '8595': [0.19444, 0.69444, 0, 0],\n    '8596': [-0.10889, 0.39111, 0, 0],\n    '8597': [0.25, 0.75, 0, 0],\n    '8598': [0.19444, 0.69444, 0, 0],\n    '8599': [0.19444, 0.69444, 0, 0],\n    '8600': [0.19444, 0.69444, 0, 0],\n    '8601': [0.19444, 0.69444, 0, 0],\n    '8636': [-0.10889, 0.39111, 0, 0],\n    '8637': [-0.10889, 0.39111, 0, 0],\n    '8640': [-0.10889, 0.39111, 0, 0],\n    '8641': [-0.10889, 0.39111, 0, 0],\n    '8656': [-0.10889, 0.39111, 0, 0],\n    '8657': [0.19444, 0.69444, 0, 0],\n    '8658': [-0.10889, 0.39111, 0, 0],\n    '8659': [0.19444, 0.69444, 0, 0],\n    '8660': [-0.10889, 0.39111, 0, 0],\n    '8661': [0.25, 0.75, 0, 0],\n    '8704': [0, 0.69444, 0, 0],\n    '8706': [0, 0.69444, 0.06389, 0],\n    '8707': [0, 0.69444, 0, 0],\n    '8709': [0.05556, 0.75, 0, 0],\n    '8711': [0, 0.68611, 0, 0],\n    '8712': [0.08556, 0.58556, 0, 0],\n    '8715': [0.08556, 0.58556, 0, 0],\n    '8722': [0.13333, 0.63333, 0, 0],\n    '8723': [0.13333, 0.63333, 0, 0],\n    '8725': [0.25, 0.75, 0, 0],\n    '8726': [0.25, 0.75, 0, 0],\n    '8727': [-0.02778, 0.47222, 0, 0],\n    '8728': [-0.02639, 0.47361, 0, 0],\n    '8729': [-0.02639, 0.47361, 0, 0],\n    '8730': [0.18, 0.82, 0, 0],\n    '8733': [0, 0.44444, 0, 0],\n    '8734': [0, 0.44444, 0, 0],\n    '8736': [0, 0.69224, 0, 0],\n    '8739': [0.25, 0.75, 0, 0],\n    '8741': [0.25, 0.75, 0, 0],\n    '8743': [0, 0.55556, 0, 0],\n    '8744': [0, 0.55556, 0, 0],\n    '8745': [0, 0.55556, 0, 0],\n    '8746': [0, 0.55556, 0, 0],\n    '8747': [0.19444, 0.69444, 0.12778, 0],\n    '8764': [-0.10889, 0.39111, 0, 0],\n    '8768': [0.19444, 0.69444, 0, 0],\n    '8771': [0.00222, 0.50222, 0, 0],\n    '8776': [0.02444, 0.52444, 0, 0],\n    '8781': [0.00222, 0.50222, 0, 0],\n    '8801': [0.00222, 0.50222, 0, 0],\n    '8804': [0.19667, 0.69667, 0, 0],\n    '8805': [0.19667, 0.69667, 0, 0],\n    '8810': [0.08556, 0.58556, 0, 0],\n    '8811': [0.08556, 0.58556, 0, 0],\n    '8826': [0.08556, 0.58556, 0, 0],\n    '8827': [0.08556, 0.58556, 0, 0],\n    '8834': [0.08556, 0.58556, 0, 0],\n    '8835': [0.08556, 0.58556, 0, 0],\n    '8838': [0.19667, 0.69667, 0, 0],\n    '8839': [0.19667, 0.69667, 0, 0],\n    '8846': [0, 0.55556, 0, 0],\n    '8849': [0.19667, 0.69667, 0, 0],\n    '8850': [0.19667, 0.69667, 0, 0],\n    '8851': [0, 0.55556, 0, 0],\n    '8852': [0, 0.55556, 0, 0],\n    '8853': [0.13333, 0.63333, 0, 0],\n    '8854': [0.13333, 0.63333, 0, 0],\n    '8855': [0.13333, 0.63333, 0, 0],\n    '8856': [0.13333, 0.63333, 0, 0],\n    '8857': [0.13333, 0.63333, 0, 0],\n    '8866': [0, 0.69444, 0, 0],\n    '8867': [0, 0.69444, 0, 0],\n    '8868': [0, 0.69444, 0, 0],\n    '8869': [0, 0.69444, 0, 0],\n    '8900': [-0.02639, 0.47361, 0, 0],\n    '8901': [-0.02639, 0.47361, 0, 0],\n    '8902': [-0.02778, 0.47222, 0, 0],\n    '8968': [0.25, 0.75, 0, 0],\n    '8969': [0.25, 0.75, 0, 0],\n    '8970': [0.25, 0.75, 0, 0],\n    '8971': [0.25, 0.75, 0, 0],\n    '8994': [-0.13889, 0.36111, 0, 0],\n    '8995': [-0.13889, 0.36111, 0, 0],\n    '9651': [0.19444, 0.69444, 0, 0],\n    '9657': [-0.02778, 0.47222, 0, 0],\n    '9661': [0.19444, 0.69444, 0, 0],\n    '9667': [-0.02778, 0.47222, 0, 0],\n    '9711': [0.19444, 0.69444, 0, 0],\n    '9824': [0.12963, 0.69444, 0, 0],\n    '9825': [0.12963, 0.69444, 0, 0],\n    '9826': [0.12963, 0.69444, 0, 0],\n    '9827': [0.12963, 0.69444, 0, 0],\n    '9837': [0, 0.75, 0, 0],\n    '9838': [0.19444, 0.69444, 0, 0],\n    '9839': [0.19444, 0.69444, 0, 0],\n    '10216': [0.25, 0.75, 0, 0],\n    '10217': [0.25, 0.75, 0, 0],\n    '10815': [0, 0.68611, 0, 0],\n    '10927': [0.19667, 0.69667, 0, 0],\n    '10928': [0.19667, 0.69667, 0, 0],\n    '57376': [0.19444, 0.69444, 0, 0],\n  },\n  'Main-BoldItalic': {\n    '33': [0, 0.69444, 0.11417, 0],\n    '34': [0, 0.69444, 0.07939, 0],\n    '35': [0.19444, 0.69444, 0.06833, 0],\n    '37': [0.05556, 0.75, 0.12861, 0],\n    '38': [0, 0.69444, 0.08528, 0],\n    '39': [0, 0.69444, 0.12945, 0],\n    '40': [0.25, 0.75, 0.15806, 0],\n    '41': [0.25, 0.75, 0.03306, 0],\n    '42': [0, 0.75, 0.14333, 0],\n    '43': [0.10333, 0.60333, 0.03306, 0],\n    '44': [0.19444, 0.14722, 0, 0],\n    '45': [0, 0.44444, 0.02611, 0],\n    '46': [0, 0.14722, 0, 0],\n    '47': [0.25, 0.75, 0.15806, 0],\n    '48': [0, 0.64444, 0.13167, 0],\n    '49': [0, 0.64444, 0.13167, 0],\n    '50': [0, 0.64444, 0.13167, 0],\n    '51': [0, 0.64444, 0.13167, 0],\n    '52': [0.19444, 0.64444, 0.13167, 0],\n    '53': [0, 0.64444, 0.13167, 0],\n    '54': [0, 0.64444, 0.13167, 0],\n    '55': [0.19444, 0.64444, 0.13167, 0],\n    '56': [0, 0.64444, 0.13167, 0],\n    '57': [0, 0.64444, 0.13167, 0],\n    '58': [0, 0.44444, 0.06695, 0],\n    '59': [0.19444, 0.44444, 0.06695, 0],\n    '61': [-0.10889, 0.39111, 0.06833, 0],\n    '63': [0, 0.69444, 0.11472, 0],\n    '64': [0, 0.69444, 0.09208, 0],\n    '65': [0, 0.68611, 0, 0],\n    '66': [0, 0.68611, 0.0992, 0],\n    '67': [0, 0.68611, 0.14208, 0],\n    '68': [0, 0.68611, 0.09062, 0],\n    '69': [0, 0.68611, 0.11431, 0],\n    '70': [0, 0.68611, 0.12903, 0],\n    '71': [0, 0.68611, 0.07347, 0],\n    '72': [0, 0.68611, 0.17208, 0],\n    '73': [0, 0.68611, 0.15681, 0],\n    '74': [0, 0.68611, 0.145, 0],\n    '75': [0, 0.68611, 0.14208, 0],\n    '76': [0, 0.68611, 0, 0],\n    '77': [0, 0.68611, 0.17208, 0],\n    '78': [0, 0.68611, 0.17208, 0],\n    '79': [0, 0.68611, 0.09062, 0],\n    '80': [0, 0.68611, 0.0992, 0],\n    '81': [0.19444, 0.68611, 0.09062, 0],\n    '82': [0, 0.68611, 0.02559, 0],\n    '83': [0, 0.68611, 0.11264, 0],\n    '84': [0, 0.68611, 0.12903, 0],\n    '85': [0, 0.68611, 0.17208, 0],\n    '86': [0, 0.68611, 0.18625, 0],\n    '87': [0, 0.68611, 0.18625, 0],\n    '88': [0, 0.68611, 0.15681, 0],\n    '89': [0, 0.68611, 0.19803, 0],\n    '90': [0, 0.68611, 0.14208, 0],\n    '91': [0.25, 0.75, 0.1875, 0],\n    '93': [0.25, 0.75, 0.09972, 0],\n    '94': [0, 0.69444, 0.06709, 0],\n    '95': [0.31, 0.13444, 0.09811, 0],\n    '97': [0, 0.44444, 0.09426, 0],\n    '98': [0, 0.69444, 0.07861, 0],\n    '99': [0, 0.44444, 0.05222, 0],\n    '100': [0, 0.69444, 0.10861, 0],\n    '101': [0, 0.44444, 0.085, 0],\n    '102': [0.19444, 0.69444, 0.21778, 0],\n    '103': [0.19444, 0.44444, 0.105, 0],\n    '104': [0, 0.69444, 0.09426, 0],\n    '105': [0, 0.69326, 0.11387, 0],\n    '106': [0.19444, 0.69326, 0.1672, 0],\n    '107': [0, 0.69444, 0.11111, 0],\n    '108': [0, 0.69444, 0.10861, 0],\n    '109': [0, 0.44444, 0.09426, 0],\n    '110': [0, 0.44444, 0.09426, 0],\n    '111': [0, 0.44444, 0.07861, 0],\n    '112': [0.19444, 0.44444, 0.07861, 0],\n    '113': [0.19444, 0.44444, 0.105, 0],\n    '114': [0, 0.44444, 0.11111, 0],\n    '115': [0, 0.44444, 0.08167, 0],\n    '116': [0, 0.63492, 0.09639, 0],\n    '117': [0, 0.44444, 0.09426, 0],\n    '118': [0, 0.44444, 0.11111, 0],\n    '119': [0, 0.44444, 0.11111, 0],\n    '120': [0, 0.44444, 0.12583, 0],\n    '121': [0.19444, 0.44444, 0.105, 0],\n    '122': [0, 0.44444, 0.13889, 0],\n    '126': [0.35, 0.34444, 0.11472, 0],\n    '163': [0, 0.69444, 0, 0],\n    '168': [0, 0.69444, 0.11473, 0],\n    '176': [0, 0.69444, 0, 0],\n    '184': [0.17014, 0, 0, 0],\n    '198': [0, 0.68611, 0.11431, 0],\n    '216': [0.04861, 0.73472, 0.09062, 0],\n    '223': [0.19444, 0.69444, 0.09736, 0],\n    '230': [0, 0.44444, 0.085, 0],\n    '248': [0.09722, 0.54167, 0.09458, 0],\n    '305': [0, 0.44444, 0.09426, 0],\n    '338': [0, 0.68611, 0.11431, 0],\n    '339': [0, 0.44444, 0.085, 0],\n    '567': [0.19444, 0.44444, 0.04611, 0],\n    '710': [0, 0.69444, 0.06709, 0],\n    '711': [0, 0.63194, 0.08271, 0],\n    '713': [0, 0.59444, 0.10444, 0],\n    '714': [0, 0.69444, 0.08528, 0],\n    '715': [0, 0.69444, 0, 0],\n    '728': [0, 0.69444, 0.10333, 0],\n    '729': [0, 0.69444, 0.12945, 0],\n    '730': [0, 0.69444, 0, 0],\n    '732': [0, 0.69444, 0.11472, 0],\n    '733': [0, 0.69444, 0.11472, 0],\n    '915': [0, 0.68611, 0.12903, 0],\n    '916': [0, 0.68611, 0, 0],\n    '920': [0, 0.68611, 0.09062, 0],\n    '923': [0, 0.68611, 0, 0],\n    '926': [0, 0.68611, 0.15092, 0],\n    '928': [0, 0.68611, 0.17208, 0],\n    '931': [0, 0.68611, 0.11431, 0],\n    '933': [0, 0.68611, 0.10778, 0],\n    '934': [0, 0.68611, 0.05632, 0],\n    '936': [0, 0.68611, 0.10778, 0],\n    '937': [0, 0.68611, 0.0992, 0],\n    '8211': [0, 0.44444, 0.09811, 0],\n    '8212': [0, 0.44444, 0.09811, 0],\n    '8216': [0, 0.69444, 0.12945, 0],\n    '8217': [0, 0.69444, 0.12945, 0],\n    '8220': [0, 0.69444, 0.16772, 0],\n    '8221': [0, 0.69444, 0.07939, 0],\n  },\n  'Main-Italic': {\n    '33': [0, 0.69444, 0.12417, 0],\n    '34': [0, 0.69444, 0.06961, 0],\n    '35': [0.19444, 0.69444, 0.06616, 0],\n    '37': [0.05556, 0.75, 0.13639, 0],\n    '38': [0, 0.69444, 0.09694, 0],\n    '39': [0, 0.69444, 0.12417, 0],\n    '40': [0.25, 0.75, 0.16194, 0],\n    '41': [0.25, 0.75, 0.03694, 0],\n    '42': [0, 0.75, 0.14917, 0],\n    '43': [0.05667, 0.56167, 0.03694, 0],\n    '44': [0.19444, 0.10556, 0, 0],\n    '45': [0, 0.43056, 0.02826, 0],\n    '46': [0, 0.10556, 0, 0],\n    '47': [0.25, 0.75, 0.16194, 0],\n    '48': [0, 0.64444, 0.13556, 0],\n    '49': [0, 0.64444, 0.13556, 0],\n    '50': [0, 0.64444, 0.13556, 0],\n    '51': [0, 0.64444, 0.13556, 0],\n    '52': [0.19444, 0.64444, 0.13556, 0],\n    '53': [0, 0.64444, 0.13556, 0],\n    '54': [0, 0.64444, 0.13556, 0],\n    '55': [0.19444, 0.64444, 0.13556, 0],\n    '56': [0, 0.64444, 0.13556, 0],\n    '57': [0, 0.64444, 0.13556, 0],\n    '58': [0, 0.43056, 0.0582, 0],\n    '59': [0.19444, 0.43056, 0.0582, 0],\n    '61': [-0.13313, 0.36687, 0.06616, 0],\n    '63': [0, 0.69444, 0.1225, 0],\n    '64': [0, 0.69444, 0.09597, 0],\n    '65': [0, 0.68333, 0, 0],\n    '66': [0, 0.68333, 0.10257, 0],\n    '67': [0, 0.68333, 0.14528, 0],\n    '68': [0, 0.68333, 0.09403, 0],\n    '69': [0, 0.68333, 0.12028, 0],\n    '70': [0, 0.68333, 0.13305, 0],\n    '71': [0, 0.68333, 0.08722, 0],\n    '72': [0, 0.68333, 0.16389, 0],\n    '73': [0, 0.68333, 0.15806, 0],\n    '74': [0, 0.68333, 0.14028, 0],\n    '75': [0, 0.68333, 0.14528, 0],\n    '76': [0, 0.68333, 0, 0],\n    '77': [0, 0.68333, 0.16389, 0],\n    '78': [0, 0.68333, 0.16389, 0],\n    '79': [0, 0.68333, 0.09403, 0],\n    '80': [0, 0.68333, 0.10257, 0],\n    '81': [0.19444, 0.68333, 0.09403, 0],\n    '82': [0, 0.68333, 0.03868, 0],\n    '83': [0, 0.68333, 0.11972, 0],\n    '84': [0, 0.68333, 0.13305, 0],\n    '85': [0, 0.68333, 0.16389, 0],\n    '86': [0, 0.68333, 0.18361, 0],\n    '87': [0, 0.68333, 0.18361, 0],\n    '88': [0, 0.68333, 0.15806, 0],\n    '89': [0, 0.68333, 0.19383, 0],\n    '90': [0, 0.68333, 0.14528, 0],\n    '91': [0.25, 0.75, 0.1875, 0],\n    '93': [0.25, 0.75, 0.10528, 0],\n    '94': [0, 0.69444, 0.06646, 0],\n    '95': [0.31, 0.12056, 0.09208, 0],\n    '97': [0, 0.43056, 0.07671, 0],\n    '98': [0, 0.69444, 0.06312, 0],\n    '99': [0, 0.43056, 0.05653, 0],\n    '100': [0, 0.69444, 0.10333, 0],\n    '101': [0, 0.43056, 0.07514, 0],\n    '102': [0.19444, 0.69444, 0.21194, 0],\n    '103': [0.19444, 0.43056, 0.08847, 0],\n    '104': [0, 0.69444, 0.07671, 0],\n    '105': [0, 0.65536, 0.1019, 0],\n    '106': [0.19444, 0.65536, 0.14467, 0],\n    '107': [0, 0.69444, 0.10764, 0],\n    '108': [0, 0.69444, 0.10333, 0],\n    '109': [0, 0.43056, 0.07671, 0],\n    '110': [0, 0.43056, 0.07671, 0],\n    '111': [0, 0.43056, 0.06312, 0],\n    '112': [0.19444, 0.43056, 0.06312, 0],\n    '113': [0.19444, 0.43056, 0.08847, 0],\n    '114': [0, 0.43056, 0.10764, 0],\n    '115': [0, 0.43056, 0.08208, 0],\n    '116': [0, 0.61508, 0.09486, 0],\n    '117': [0, 0.43056, 0.07671, 0],\n    '118': [0, 0.43056, 0.10764, 0],\n    '119': [0, 0.43056, 0.10764, 0],\n    '120': [0, 0.43056, 0.12042, 0],\n    '121': [0.19444, 0.43056, 0.08847, 0],\n    '122': [0, 0.43056, 0.12292, 0],\n    '126': [0.35, 0.31786, 0.11585, 0],\n    '163': [0, 0.69444, 0, 0],\n    '168': [0, 0.66786, 0.10474, 0],\n    '176': [0, 0.69444, 0, 0],\n    '184': [0.17014, 0, 0, 0],\n    '198': [0, 0.68333, 0.12028, 0],\n    '216': [0.04861, 0.73194, 0.09403, 0],\n    '223': [0.19444, 0.69444, 0.10514, 0],\n    '230': [0, 0.43056, 0.07514, 0],\n    '248': [0.09722, 0.52778, 0.09194, 0],\n    '305': [0, 0.43056, 0, 0.02778],\n    '338': [0, 0.68333, 0.12028, 0],\n    '339': [0, 0.43056, 0.07514, 0],\n    '567': [0.19444, 0.43056, 0, 0.08334],\n    '710': [0, 0.69444, 0.06646, 0],\n    '711': [0, 0.62847, 0.08295, 0],\n    '713': [0, 0.56167, 0.10333, 0],\n    '714': [0, 0.69444, 0.09694, 0],\n    '715': [0, 0.69444, 0, 0],\n    '728': [0, 0.69444, 0.10806, 0],\n    '729': [0, 0.66786, 0.11752, 0],\n    '730': [0, 0.69444, 0, 0],\n    '732': [0, 0.66786, 0.11585, 0],\n    '733': [0, 0.69444, 0.1225, 0],\n    '915': [0, 0.68333, 0.13305, 0],\n    '916': [0, 0.68333, 0, 0],\n    '920': [0, 0.68333, 0.09403, 0],\n    '923': [0, 0.68333, 0, 0],\n    '926': [0, 0.68333, 0.15294, 0],\n    '928': [0, 0.68333, 0.16389, 0],\n    '931': [0, 0.68333, 0.12028, 0],\n    '933': [0, 0.68333, 0.11111, 0],\n    '934': [0, 0.68333, 0.05986, 0],\n    '936': [0, 0.68333, 0.11111, 0],\n    '937': [0, 0.68333, 0.10257, 0],\n    '8211': [0, 0.43056, 0.09208, 0],\n    '8212': [0, 0.43056, 0.09208, 0],\n    '8216': [0, 0.69444, 0.12417, 0],\n    '8217': [0, 0.69444, 0.12417, 0],\n    '8220': [0, 0.69444, 0.1685, 0],\n    '8221': [0, 0.69444, 0.06961, 0],\n    '8463': [0, 0.68889, 0, 0],\n  },\n  'Main-Regular': {\n    '32': [0, 0, 0, 0],\n    '33': [0, 0.69444, 0, 0],\n    '34': [0, 0.69444, 0, 0],\n    '35': [0.19444, 0.69444, 0, 0],\n    '36': [0.05556, 0.75, 0, 0],\n    '37': [0.05556, 0.75, 0, 0],\n    '38': [0, 0.69444, 0, 0],\n    '39': [0, 0.69444, 0, 0],\n    '40': [0.25, 0.75, 0, 0],\n    '41': [0.25, 0.75, 0, 0],\n    '42': [0, 0.75, 0, 0],\n    '43': [0.08333, 0.58333, 0, 0],\n    '44': [0.19444, 0.10556, 0, 0],\n    '45': [0, 0.43056, 0, 0],\n    '46': [0, 0.10556, 0, 0],\n    '47': [0.25, 0.75, 0, 0],\n    '48': [0, 0.64444, 0, 0],\n    '49': [0, 0.64444, 0, 0],\n    '50': [0, 0.64444, 0, 0],\n    '51': [0, 0.64444, 0, 0],\n    '52': [0, 0.64444, 0, 0],\n    '53': [0, 0.64444, 0, 0],\n    '54': [0, 0.64444, 0, 0],\n    '55': [0, 0.64444, 0, 0],\n    '56': [0, 0.64444, 0, 0],\n    '57': [0, 0.64444, 0, 0],\n    '58': [0, 0.43056, 0, 0],\n    '59': [0.19444, 0.43056, 0, 0],\n    '60': [0.0391, 0.5391, 0, 0],\n    '61': [-0.13313, 0.36687, 0, 0],\n    '62': [0.0391, 0.5391, 0, 0],\n    '63': [0, 0.69444, 0, 0],\n    '64': [0, 0.69444, 0, 0],\n    '65': [0, 0.68333, 0, 0],\n    '66': [0, 0.68333, 0, 0],\n    '67': [0, 0.68333, 0, 0],\n    '68': [0, 0.68333, 0, 0],\n    '69': [0, 0.68333, 0, 0],\n    '70': [0, 0.68333, 0, 0],\n    '71': [0, 0.68333, 0, 0],\n    '72': [0, 0.68333, 0, 0],\n    '73': [0, 0.68333, 0, 0],\n    '74': [0, 0.68333, 0, 0],\n    '75': [0, 0.68333, 0, 0],\n    '76': [0, 0.68333, 0, 0],\n    '77': [0, 0.68333, 0, 0],\n    '78': [0, 0.68333, 0, 0],\n    '79': [0, 0.68333, 0, 0],\n    '80': [0, 0.68333, 0, 0],\n    '81': [0.19444, 0.68333, 0, 0],\n    '82': [0, 0.68333, 0, 0],\n    '83': [0, 0.68333, 0, 0],\n    '84': [0, 0.68333, 0, 0],\n    '85': [0, 0.68333, 0, 0],\n    '86': [0, 0.68333, 0.01389, 0],\n    '87': [0, 0.68333, 0.01389, 0],\n    '88': [0, 0.68333, 0, 0],\n    '89': [0, 0.68333, 0.025, 0],\n    '90': [0, 0.68333, 0, 0],\n    '91': [0.25, 0.75, 0, 0],\n    '92': [0.25, 0.75, 0, 0],\n    '93': [0.25, 0.75, 0, 0],\n    '94': [0, 0.69444, 0, 0],\n    '95': [0.31, 0.12056, 0.02778, 0],\n    '97': [0, 0.43056, 0, 0],\n    '98': [0, 0.69444, 0, 0],\n    '99': [0, 0.43056, 0, 0],\n    '100': [0, 0.69444, 0, 0],\n    '101': [0, 0.43056, 0, 0],\n    '102': [0, 0.69444, 0.07778, 0],\n    '103': [0.19444, 0.43056, 0.01389, 0],\n    '104': [0, 0.69444, 0, 0],\n    '105': [0, 0.66786, 0, 0],\n    '106': [0.19444, 0.66786, 0, 0],\n    '107': [0, 0.69444, 0, 0],\n    '108': [0, 0.69444, 0, 0],\n    '109': [0, 0.43056, 0, 0],\n    '110': [0, 0.43056, 0, 0],\n    '111': [0, 0.43056, 0, 0],\n    '112': [0.19444, 0.43056, 0, 0],\n    '113': [0.19444, 0.43056, 0, 0],\n    '114': [0, 0.43056, 0, 0],\n    '115': [0, 0.43056, 0, 0],\n    '116': [0, 0.61508, 0, 0],\n    '117': [0, 0.43056, 0, 0],\n    '118': [0, 0.43056, 0.01389, 0],\n    '119': [0, 0.43056, 0.01389, 0],\n    '120': [0, 0.43056, 0, 0],\n    '121': [0.19444, 0.43056, 0.01389, 0],\n    '122': [0, 0.43056, 0, 0],\n    '123': [0.25, 0.75, 0, 0],\n    '124': [0.25, 0.75, 0, 0],\n    '125': [0.25, 0.75, 0, 0],\n    '126': [0.35, 0.31786, 0, 0],\n    '160': [0, 0, 0, 0],\n    '167': [0.19444, 0.69444, 0, 0],\n    '168': [0, 0.66786, 0, 0],\n    '172': [0, 0.43056, 0, 0],\n    '176': [0, 0.69444, 0, 0],\n    '177': [0.08333, 0.58333, 0, 0],\n    '182': [0.19444, 0.69444, 0, 0],\n    '184': [0.17014, 0, 0, 0],\n    '198': [0, 0.68333, 0, 0],\n    '215': [0.08333, 0.58333, 0, 0],\n    '216': [0.04861, 0.73194, 0, 0],\n    '223': [0, 0.69444, 0, 0],\n    '230': [0, 0.43056, 0, 0],\n    '247': [0.08333, 0.58333, 0, 0],\n    '248': [0.09722, 0.52778, 0, 0],\n    '305': [0, 0.43056, 0, 0],\n    '338': [0, 0.68333, 0, 0],\n    '339': [0, 0.43056, 0, 0],\n    '567': [0.19444, 0.43056, 0, 0],\n    '710': [0, 0.69444, 0, 0],\n    '711': [0, 0.62847, 0, 0],\n    '713': [0, 0.56778, 0, 0],\n    '714': [0, 0.69444, 0, 0],\n    '715': [0, 0.69444, 0, 0],\n    '728': [0, 0.69444, 0, 0],\n    '729': [0, 0.66786, 0, 0],\n    '730': [0, 0.69444, 0, 0],\n    '732': [0, 0.66786, 0, 0],\n    '733': [0, 0.69444, 0, 0],\n    '915': [0, 0.68333, 0, 0],\n    '916': [0, 0.68333, 0, 0],\n    '920': [0, 0.68333, 0, 0],\n    '923': [0, 0.68333, 0, 0],\n    '926': [0, 0.68333, 0, 0],\n    '928': [0, 0.68333, 0, 0],\n    '931': [0, 0.68333, 0, 0],\n    '933': [0, 0.68333, 0, 0],\n    '934': [0, 0.68333, 0, 0],\n    '936': [0, 0.68333, 0, 0],\n    '937': [0, 0.68333, 0, 0],\n    '8211': [0, 0.43056, 0.02778, 0],\n    '8212': [0, 0.43056, 0.02778, 0],\n    '8216': [0, 0.69444, 0, 0],\n    '8217': [0, 0.69444, 0, 0],\n    '8220': [0, 0.69444, 0, 0],\n    '8221': [0, 0.69444, 0, 0],\n    '8224': [0.19444, 0.69444, 0, 0],\n    '8225': [0.19444, 0.69444, 0, 0],\n    '8230': [0, 0.12, 0, 0],\n    '8242': [0, 0.55556, 0, 0],\n    '8407': [0, 0.71444, 0.15382, 0],\n    '8463': [0, 0.68889, 0, 0],\n    '8465': [0, 0.69444, 0, 0],\n    '8467': [0, 0.69444, 0, 0.11111],\n    '8472': [0.19444, 0.43056, 0, 0.11111],\n    '8476': [0, 0.69444, 0, 0],\n    '8501': [0, 0.69444, 0, 0],\n    '8592': [-0.13313, 0.36687, 0, 0],\n    '8593': [0.19444, 0.69444, 0, 0],\n    '8594': [-0.13313, 0.36687, 0, 0],\n    '8595': [0.19444, 0.69444, 0, 0],\n    '8596': [-0.13313, 0.36687, 0, 0],\n    '8597': [0.25, 0.75, 0, 0],\n    '8598': [0.19444, 0.69444, 0, 0],\n    '8599': [0.19444, 0.69444, 0, 0],\n    '8600': [0.19444, 0.69444, 0, 0],\n    '8601': [0.19444, 0.69444, 0, 0],\n    '8614': [0.011, 0.511, 0, 0],\n    '8617': [0.011, 0.511, 0, 0],\n    '8618': [0.011, 0.511, 0, 0],\n    '8636': [-0.13313, 0.36687, 0, 0],\n    '8637': [-0.13313, 0.36687, 0, 0],\n    '8640': [-0.13313, 0.36687, 0, 0],\n    '8641': [-0.13313, 0.36687, 0, 0],\n    '8652': [0.011, 0.671, 0, 0],\n    '8656': [-0.13313, 0.36687, 0, 0],\n    '8657': [0.19444, 0.69444, 0, 0],\n    '8658': [-0.13313, 0.36687, 0, 0],\n    '8659': [0.19444, 0.69444, 0, 0],\n    '8660': [-0.13313, 0.36687, 0, 0],\n    '8661': [0.25, 0.75, 0, 0],\n    '8704': [0, 0.69444, 0, 0],\n    '8706': [0, 0.69444, 0.05556, 0.08334],\n    '8707': [0, 0.69444, 0, 0],\n    '8709': [0.05556, 0.75, 0, 0],\n    '8711': [0, 0.68333, 0, 0],\n    '8712': [0.0391, 0.5391, 0, 0],\n    '8715': [0.0391, 0.5391, 0, 0],\n    '8722': [0.08333, 0.58333, 0, 0],\n    '8723': [0.08333, 0.58333, 0, 0],\n    '8725': [0.25, 0.75, 0, 0],\n    '8726': [0.25, 0.75, 0, 0],\n    '8727': [-0.03472, 0.46528, 0, 0],\n    '8728': [-0.05555, 0.44445, 0, 0],\n    '8729': [-0.05555, 0.44445, 0, 0],\n    '8730': [0.2, 0.8, 0, 0],\n    '8733': [0, 0.43056, 0, 0],\n    '8734': [0, 0.43056, 0, 0],\n    '8736': [0, 0.69224, 0, 0],\n    '8739': [0.25, 0.75, 0, 0],\n    '8741': [0.25, 0.75, 0, 0],\n    '8743': [0, 0.55556, 0, 0],\n    '8744': [0, 0.55556, 0, 0],\n    '8745': [0, 0.55556, 0, 0],\n    '8746': [0, 0.55556, 0, 0],\n    '8747': [0.19444, 0.69444, 0.11111, 0],\n    '8764': [-0.13313, 0.36687, 0, 0],\n    '8768': [0.19444, 0.69444, 0, 0],\n    '8771': [-0.03625, 0.46375, 0, 0],\n    '8773': [-0.022, 0.589, 0, 0],\n    '8776': [-0.01688, 0.48312, 0, 0],\n    '8781': [-0.03625, 0.46375, 0, 0],\n    '8784': [-0.133, 0.67, 0, 0],\n    '8801': [-0.03625, 0.46375, 0, 0],\n    '8804': [0.13597, 0.63597, 0, 0],\n    '8805': [0.13597, 0.63597, 0, 0],\n    '8810': [0.0391, 0.5391, 0, 0],\n    '8811': [0.0391, 0.5391, 0, 0],\n    '8826': [0.0391, 0.5391, 0, 0],\n    '8827': [0.0391, 0.5391, 0, 0],\n    '8834': [0.0391, 0.5391, 0, 0],\n    '8835': [0.0391, 0.5391, 0, 0],\n    '8838': [0.13597, 0.63597, 0, 0],\n    '8839': [0.13597, 0.63597, 0, 0],\n    '8846': [0, 0.55556, 0, 0],\n    '8849': [0.13597, 0.63597, 0, 0],\n    '8850': [0.13597, 0.63597, 0, 0],\n    '8851': [0, 0.55556, 0, 0],\n    '8852': [0, 0.55556, 0, 0],\n    '8853': [0.08333, 0.58333, 0, 0],\n    '8854': [0.08333, 0.58333, 0, 0],\n    '8855': [0.08333, 0.58333, 0, 0],\n    '8856': [0.08333, 0.58333, 0, 0],\n    '8857': [0.08333, 0.58333, 0, 0],\n    '8866': [0, 0.69444, 0, 0],\n    '8867': [0, 0.69444, 0, 0],\n    '8868': [0, 0.69444, 0, 0],\n    '8869': [0, 0.69444, 0, 0],\n    '8872': [0.249, 0.75, 0, 0],\n    '8900': [-0.05555, 0.44445, 0, 0],\n    '8901': [-0.05555, 0.44445, 0, 0],\n    '8902': [-0.03472, 0.46528, 0, 0],\n    '8904': [0.005, 0.505, 0, 0],\n    '8942': [0.03, 0.9, 0, 0],\n    '8943': [-0.19, 0.31, 0, 0],\n    '8945': [-0.1, 0.82, 0, 0],\n    '8968': [0.25, 0.75, 0, 0],\n    '8969': [0.25, 0.75, 0, 0],\n    '8970': [0.25, 0.75, 0, 0],\n    '8971': [0.25, 0.75, 0, 0],\n    '8994': [-0.14236, 0.35764, 0, 0],\n    '8995': [-0.14236, 0.35764, 0, 0],\n    '9136': [0.244, 0.744, 0, 0],\n    '9137': [0.244, 0.744, 0, 0],\n    '9651': [0.19444, 0.69444, 0, 0],\n    '9657': [-0.03472, 0.46528, 0, 0],\n    '9661': [0.19444, 0.69444, 0, 0],\n    '9667': [-0.03472, 0.46528, 0, 0],\n    '9711': [0.19444, 0.69444, 0, 0],\n    '9824': [0.12963, 0.69444, 0, 0],\n    '9825': [0.12963, 0.69444, 0, 0],\n    '9826': [0.12963, 0.69444, 0, 0],\n    '9827': [0.12963, 0.69444, 0, 0],\n    '9837': [0, 0.75, 0, 0],\n    '9838': [0.19444, 0.69444, 0, 0],\n    '9839': [0.19444, 0.69444, 0, 0],\n    '10216': [0.25, 0.75, 0, 0],\n    '10217': [0.25, 0.75, 0, 0],\n    '10222': [0.244, 0.744, 0, 0],\n    '10223': [0.244, 0.744, 0, 0],\n    '10229': [0.011, 0.511, 0, 0],\n    '10230': [0.011, 0.511, 0, 0],\n    '10231': [0.011, 0.511, 0, 0],\n    '10232': [0.024, 0.525, 0, 0],\n    '10233': [0.024, 0.525, 0, 0],\n    '10234': [0.024, 0.525, 0, 0],\n    '10236': [0.011, 0.511, 0, 0],\n    '10815': [0, 0.68333, 0, 0],\n    '10927': [0.13597, 0.63597, 0, 0],\n    '10928': [0.13597, 0.63597, 0, 0],\n    '57376': [0.19444, 0.69444, 0, 0],\n  },\n  'Math-BoldItalic': {\n    '65': [0, 0.68611, 0, 0],\n    '66': [0, 0.68611, 0.04835, 0],\n    '67': [0, 0.68611, 0.06979, 0],\n    '68': [0, 0.68611, 0.03194, 0],\n    '69': [0, 0.68611, 0.05451, 0],\n    '70': [0, 0.68611, 0.15972, 0],\n    '71': [0, 0.68611, 0, 0],\n    '72': [0, 0.68611, 0.08229, 0],\n    '73': [0, 0.68611, 0.07778, 0],\n    '74': [0, 0.68611, 0.10069, 0],\n    '75': [0, 0.68611, 0.06979, 0],\n    '76': [0, 0.68611, 0, 0],\n    '77': [0, 0.68611, 0.11424, 0],\n    '78': [0, 0.68611, 0.11424, 0],\n    '79': [0, 0.68611, 0.03194, 0],\n    '80': [0, 0.68611, 0.15972, 0],\n    '81': [0.19444, 0.68611, 0, 0],\n    '82': [0, 0.68611, 0.00421, 0],\n    '83': [0, 0.68611, 0.05382, 0],\n    '84': [0, 0.68611, 0.15972, 0],\n    '85': [0, 0.68611, 0.11424, 0],\n    '86': [0, 0.68611, 0.25555, 0],\n    '87': [0, 0.68611, 0.15972, 0],\n    '88': [0, 0.68611, 0.07778, 0],\n    '89': [0, 0.68611, 0.25555, 0],\n    '90': [0, 0.68611, 0.06979, 0],\n    '97': [0, 0.44444, 0, 0],\n    '98': [0, 0.69444, 0, 0],\n    '99': [0, 0.44444, 0, 0],\n    '100': [0, 0.69444, 0, 0],\n    '101': [0, 0.44444, 0, 0],\n    '102': [0.19444, 0.69444, 0.11042, 0],\n    '103': [0.19444, 0.44444, 0.03704, 0],\n    '104': [0, 0.69444, 0, 0],\n    '105': [0, 0.69326, 0, 0],\n    '106': [0.19444, 0.69326, 0.0622, 0],\n    '107': [0, 0.69444, 0.01852, 0],\n    '108': [0, 0.69444, 0.0088, 0],\n    '109': [0, 0.44444, 0, 0],\n    '110': [0, 0.44444, 0, 0],\n    '111': [0, 0.44444, 0, 0],\n    '112': [0.19444, 0.44444, 0, 0],\n    '113': [0.19444, 0.44444, 0.03704, 0],\n    '114': [0, 0.44444, 0.03194, 0],\n    '115': [0, 0.44444, 0, 0],\n    '116': [0, 0.63492, 0, 0],\n    '117': [0, 0.44444, 0, 0],\n    '118': [0, 0.44444, 0.03704, 0],\n    '119': [0, 0.44444, 0.02778, 0],\n    '120': [0, 0.44444, 0, 0],\n    '121': [0.19444, 0.44444, 0.03704, 0],\n    '122': [0, 0.44444, 0.04213, 0],\n    '915': [0, 0.68611, 0.15972, 0],\n    '916': [0, 0.68611, 0, 0],\n    '920': [0, 0.68611, 0.03194, 0],\n    '923': [0, 0.68611, 0, 0],\n    '926': [0, 0.68611, 0.07458, 0],\n    '928': [0, 0.68611, 0.08229, 0],\n    '931': [0, 0.68611, 0.05451, 0],\n    '933': [0, 0.68611, 0.15972, 0],\n    '934': [0, 0.68611, 0, 0],\n    '936': [0, 0.68611, 0.11653, 0],\n    '937': [0, 0.68611, 0.04835, 0],\n    '945': [0, 0.44444, 0, 0],\n    '946': [0.19444, 0.69444, 0.03403, 0],\n    '947': [0.19444, 0.44444, 0.06389, 0],\n    '948': [0, 0.69444, 0.03819, 0],\n    '949': [0, 0.44444, 0, 0],\n    '950': [0.19444, 0.69444, 0.06215, 0],\n    '951': [0.19444, 0.44444, 0.03704, 0],\n    '952': [0, 0.69444, 0.03194, 0],\n    '953': [0, 0.44444, 0, 0],\n    '954': [0, 0.44444, 0, 0],\n    '955': [0, 0.69444, 0, 0],\n    '956': [0.19444, 0.44444, 0, 0],\n    '957': [0, 0.44444, 0.06898, 0],\n    '958': [0.19444, 0.69444, 0.03021, 0],\n    '959': [0, 0.44444, 0, 0],\n    '960': [0, 0.44444, 0.03704, 0],\n    '961': [0.19444, 0.44444, 0, 0],\n    '962': [0.09722, 0.44444, 0.07917, 0],\n    '963': [0, 0.44444, 0.03704, 0],\n    '964': [0, 0.44444, 0.13472, 0],\n    '965': [0, 0.44444, 0.03704, 0],\n    '966': [0.19444, 0.44444, 0, 0],\n    '967': [0.19444, 0.44444, 0, 0],\n    '968': [0.19444, 0.69444, 0.03704, 0],\n    '969': [0, 0.44444, 0.03704, 0],\n    '977': [0, 0.69444, 0, 0],\n    '981': [0.19444, 0.69444, 0, 0],\n    '982': [0, 0.44444, 0.03194, 0],\n    '1009': [0.19444, 0.44444, 0, 0],\n    '1013': [0, 0.44444, 0, 0],\n  },\n  'Math-Italic': {\n    '65': [0, 0.68333, 0, 0.13889],\n    '66': [0, 0.68333, 0.05017, 0.08334],\n    '67': [0, 0.68333, 0.07153, 0.08334],\n    '68': [0, 0.68333, 0.02778, 0.05556],\n    '69': [0, 0.68333, 0.05764, 0.08334],\n    '70': [0, 0.68333, 0.13889, 0.08334],\n    '71': [0, 0.68333, 0, 0.08334],\n    '72': [0, 0.68333, 0.08125, 0.05556],\n    '73': [0, 0.68333, 0.07847, 0.11111],\n    '74': [0, 0.68333, 0.09618, 0.16667],\n    '75': [0, 0.68333, 0.07153, 0.05556],\n    '76': [0, 0.68333, 0, 0.02778],\n    '77': [0, 0.68333, 0.10903, 0.08334],\n    '78': [0, 0.68333, 0.10903, 0.08334],\n    '79': [0, 0.68333, 0.02778, 0.08334],\n    '80': [0, 0.68333, 0.13889, 0.08334],\n    '81': [0.19444, 0.68333, 0, 0.08334],\n    '82': [0, 0.68333, 0.00773, 0.08334],\n    '83': [0, 0.68333, 0.05764, 0.08334],\n    '84': [0, 0.68333, 0.13889, 0.08334],\n    '85': [0, 0.68333, 0.10903, 0.02778],\n    '86': [0, 0.68333, 0.22222, 0],\n    '87': [0, 0.68333, 0.13889, 0],\n    '88': [0, 0.68333, 0.07847, 0.08334],\n    '89': [0, 0.68333, 0.22222, 0],\n    '90': [0, 0.68333, 0.07153, 0.08334],\n    '97': [0, 0.43056, 0, 0],\n    '98': [0, 0.69444, 0, 0],\n    '99': [0, 0.43056, 0, 0.05556],\n    '100': [0, 0.69444, 0, 0.16667],\n    '101': [0, 0.43056, 0, 0.05556],\n    '102': [0.19444, 0.69444, 0.10764, 0.16667],\n    '103': [0.19444, 0.43056, 0.03588, 0.02778],\n    '104': [0, 0.69444, 0, 0],\n    '105': [0, 0.65952, 0, 0],\n    '106': [0.19444, 0.65952, 0.05724, 0],\n    '107': [0, 0.69444, 0.03148, 0],\n    '108': [0, 0.69444, 0.01968, 0.08334],\n    '109': [0, 0.43056, 0, 0],\n    '110': [0, 0.43056, 0, 0],\n    '111': [0, 0.43056, 0, 0.05556],\n    '112': [0.19444, 0.43056, 0, 0.08334],\n    '113': [0.19444, 0.43056, 0.03588, 0.08334],\n    '114': [0, 0.43056, 0.02778, 0.05556],\n    '115': [0, 0.43056, 0, 0.05556],\n    '116': [0, 0.61508, 0, 0.08334],\n    '117': [0, 0.43056, 0, 0.02778],\n    '118': [0, 0.43056, 0.03588, 0.02778],\n    '119': [0, 0.43056, 0.02691, 0.08334],\n    '120': [0, 0.43056, 0, 0.02778],\n    '121': [0.19444, 0.43056, 0.03588, 0.05556],\n    '122': [0, 0.43056, 0.04398, 0.05556],\n    '915': [0, 0.68333, 0.13889, 0.08334],\n    '916': [0, 0.68333, 0, 0.16667],\n    '920': [0, 0.68333, 0.02778, 0.08334],\n    '923': [0, 0.68333, 0, 0.16667],\n    '926': [0, 0.68333, 0.07569, 0.08334],\n    '928': [0, 0.68333, 0.08125, 0.05556],\n    '931': [0, 0.68333, 0.05764, 0.08334],\n    '933': [0, 0.68333, 0.13889, 0.05556],\n    '934': [0, 0.68333, 0, 0.08334],\n    '936': [0, 0.68333, 0.11, 0.05556],\n    '937': [0, 0.68333, 0.05017, 0.08334],\n    '945': [0, 0.43056, 0.0037, 0.02778],\n    '946': [0.19444, 0.69444, 0.05278, 0.08334],\n    '947': [0.19444, 0.43056, 0.05556, 0],\n    '948': [0, 0.69444, 0.03785, 0.05556],\n    '949': [0, 0.43056, 0, 0.08334],\n    '950': [0.19444, 0.69444, 0.07378, 0.08334],\n    '951': [0.19444, 0.43056, 0.03588, 0.05556],\n    '952': [0, 0.69444, 0.02778, 0.08334],\n    '953': [0, 0.43056, 0, 0.05556],\n    '954': [0, 0.43056, 0, 0],\n    '955': [0, 0.69444, 0, 0],\n    '956': [0.19444, 0.43056, 0, 0.02778],\n    '957': [0, 0.43056, 0.06366, 0.02778],\n    '958': [0.19444, 0.69444, 0.04601, 0.11111],\n    '959': [0, 0.43056, 0, 0.05556],\n    '960': [0, 0.43056, 0.03588, 0],\n    '961': [0.19444, 0.43056, 0, 0.08334],\n    '962': [0.09722, 0.43056, 0.07986, 0.08334],\n    '963': [0, 0.43056, 0.03588, 0],\n    '964': [0, 0.43056, 0.1132, 0.02778],\n    '965': [0, 0.43056, 0.03588, 0.02778],\n    '966': [0.19444, 0.43056, 0, 0.08334],\n    '967': [0.19444, 0.43056, 0, 0.05556],\n    '968': [0.19444, 0.69444, 0.03588, 0.11111],\n    '969': [0, 0.43056, 0.03588, 0],\n    '977': [0, 0.69444, 0, 0.08334],\n    '981': [0.19444, 0.69444, 0, 0.08334],\n    '982': [0, 0.43056, 0.02778, 0],\n    '1009': [0.19444, 0.43056, 0, 0.08334],\n    '1013': [0, 0.43056, 0, 0.05556],\n  },\n  'SansSerif-Bold': {\n    '33': [0, 0.69444, 0, 0],\n    '34': [0, 0.69444, 0, 0],\n    '35': [0.19444, 0.69444, 0, 0],\n    '36': [0.05556, 0.75, 0, 0],\n    '37': [0.05556, 0.75, 0, 0],\n    '38': [0, 0.69444, 0, 0],\n    '39': [0, 0.69444, 0, 0],\n    '40': [0.25, 0.75, 0, 0],\n    '41': [0.25, 0.75, 0, 0],\n    '42': [0, 0.75, 0, 0],\n    '43': [0.11667, 0.61667, 0, 0],\n    '44': [0.10556, 0.13056, 0, 0],\n    '45': [0, 0.45833, 0, 0],\n    '46': [0, 0.13056, 0, 0],\n    '47': [0.25, 0.75, 0, 0],\n    '48': [0, 0.69444, 0, 0],\n    '49': [0, 0.69444, 0, 0],\n    '50': [0, 0.69444, 0, 0],\n    '51': [0, 0.69444, 0, 0],\n    '52': [0, 0.69444, 0, 0],\n    '53': [0, 0.69444, 0, 0],\n    '54': [0, 0.69444, 0, 0],\n    '55': [0, 0.69444, 0, 0],\n    '56': [0, 0.69444, 0, 0],\n    '57': [0, 0.69444, 0, 0],\n    '58': [0, 0.45833, 0, 0],\n    '59': [0.10556, 0.45833, 0, 0],\n    '61': [-0.09375, 0.40625, 0, 0],\n    '63': [0, 0.69444, 0, 0],\n    '64': [0, 0.69444, 0, 0],\n    '65': [0, 0.69444, 0, 0],\n    '66': [0, 0.69444, 0, 0],\n    '67': [0, 0.69444, 0, 0],\n    '68': [0, 0.69444, 0, 0],\n    '69': [0, 0.69444, 0, 0],\n    '70': [0, 0.69444, 0, 0],\n    '71': [0, 0.69444, 0, 0],\n    '72': [0, 0.69444, 0, 0],\n    '73': [0, 0.69444, 0, 0],\n    '74': [0, 0.69444, 0, 0],\n    '75': [0, 0.69444, 0, 0],\n    '76': [0, 0.69444, 0, 0],\n    '77': [0, 0.69444, 0, 0],\n    '78': [0, 0.69444, 0, 0],\n    '79': [0, 0.69444, 0, 0],\n    '80': [0, 0.69444, 0, 0],\n    '81': [0.10556, 0.69444, 0, 0],\n    '82': [0, 0.69444, 0, 0],\n    '83': [0, 0.69444, 0, 0],\n    '84': [0, 0.69444, 0, 0],\n    '85': [0, 0.69444, 0, 0],\n    '86': [0, 0.69444, 0.01528, 0],\n    '87': [0, 0.69444, 0.01528, 0],\n    '88': [0, 0.69444, 0, 0],\n    '89': [0, 0.69444, 0.0275, 0],\n    '90': [0, 0.69444, 0, 0],\n    '91': [0.25, 0.75, 0, 0],\n    '93': [0.25, 0.75, 0, 0],\n    '94': [0, 0.69444, 0, 0],\n    '95': [0.35, 0.10833, 0.03056, 0],\n    '97': [0, 0.45833, 0, 0],\n    '98': [0, 0.69444, 0, 0],\n    '99': [0, 0.45833, 0, 0],\n    '100': [0, 0.69444, 0, 0],\n    '101': [0, 0.45833, 0, 0],\n    '102': [0, 0.69444, 0.07639, 0],\n    '103': [0.19444, 0.45833, 0.01528, 0],\n    '104': [0, 0.69444, 0, 0],\n    '105': [0, 0.69444, 0, 0],\n    '106': [0.19444, 0.69444, 0, 0],\n    '107': [0, 0.69444, 0, 0],\n    '108': [0, 0.69444, 0, 0],\n    '109': [0, 0.45833, 0, 0],\n    '110': [0, 0.45833, 0, 0],\n    '111': [0, 0.45833, 0, 0],\n    '112': [0.19444, 0.45833, 0, 0],\n    '113': [0.19444, 0.45833, 0, 0],\n    '114': [0, 0.45833, 0.01528, 0],\n    '115': [0, 0.45833, 0, 0],\n    '116': [0, 0.58929, 0, 0],\n    '117': [0, 0.45833, 0, 0],\n    '118': [0, 0.45833, 0.01528, 0],\n    '119': [0, 0.45833, 0.01528, 0],\n    '120': [0, 0.45833, 0, 0],\n    '121': [0.19444, 0.45833, 0.01528, 0],\n    '122': [0, 0.45833, 0, 0],\n    '126': [0.35, 0.34444, 0, 0],\n    '168': [0, 0.69444, 0, 0],\n    '176': [0, 0.69444, 0, 0],\n    '180': [0, 0.69444, 0, 0],\n    '184': [0.17014, 0, 0, 0],\n    '305': [0, 0.45833, 0, 0],\n    '567': [0.19444, 0.45833, 0, 0],\n    '710': [0, 0.69444, 0, 0],\n    '711': [0, 0.63542, 0, 0],\n    '713': [0, 0.63778, 0, 0],\n    '728': [0, 0.69444, 0, 0],\n    '729': [0, 0.69444, 0, 0],\n    '730': [0, 0.69444, 0, 0],\n    '732': [0, 0.69444, 0, 0],\n    '733': [0, 0.69444, 0, 0],\n    '915': [0, 0.69444, 0, 0],\n    '916': [0, 0.69444, 0, 0],\n    '920': [0, 0.69444, 0, 0],\n    '923': [0, 0.69444, 0, 0],\n    '926': [0, 0.69444, 0, 0],\n    '928': [0, 0.69444, 0, 0],\n    '931': [0, 0.69444, 0, 0],\n    '933': [0, 0.69444, 0, 0],\n    '934': [0, 0.69444, 0, 0],\n    '936': [0, 0.69444, 0, 0],\n    '937': [0, 0.69444, 0, 0],\n    '8211': [0, 0.45833, 0.03056, 0],\n    '8212': [0, 0.45833, 0.03056, 0],\n    '8216': [0, 0.69444, 0, 0],\n    '8217': [0, 0.69444, 0, 0],\n    '8220': [0, 0.69444, 0, 0],\n    '8221': [0, 0.69444, 0, 0],\n  },\n  'SansSerif-Italic': {\n    '33': [0, 0.69444, 0.05733, 0],\n    '34': [0, 0.69444, 0.00316, 0],\n    '35': [0.19444, 0.69444, 0.05087, 0],\n    '36': [0.05556, 0.75, 0.11156, 0],\n    '37': [0.05556, 0.75, 0.03126, 0],\n    '38': [0, 0.69444, 0.03058, 0],\n    '39': [0, 0.69444, 0.07816, 0],\n    '40': [0.25, 0.75, 0.13164, 0],\n    '41': [0.25, 0.75, 0.02536, 0],\n    '42': [0, 0.75, 0.11775, 0],\n    '43': [0.08333, 0.58333, 0.02536, 0],\n    '44': [0.125, 0.08333, 0, 0],\n    '45': [0, 0.44444, 0.01946, 0],\n    '46': [0, 0.08333, 0, 0],\n    '47': [0.25, 0.75, 0.13164, 0],\n    '48': [0, 0.65556, 0.11156, 0],\n    '49': [0, 0.65556, 0.11156, 0],\n    '50': [0, 0.65556, 0.11156, 0],\n    '51': [0, 0.65556, 0.11156, 0],\n    '52': [0, 0.65556, 0.11156, 0],\n    '53': [0, 0.65556, 0.11156, 0],\n    '54': [0, 0.65556, 0.11156, 0],\n    '55': [0, 0.65556, 0.11156, 0],\n    '56': [0, 0.65556, 0.11156, 0],\n    '57': [0, 0.65556, 0.11156, 0],\n    '58': [0, 0.44444, 0.02502, 0],\n    '59': [0.125, 0.44444, 0.02502, 0],\n    '61': [-0.13, 0.37, 0.05087, 0],\n    '63': [0, 0.69444, 0.11809, 0],\n    '64': [0, 0.69444, 0.07555, 0],\n    '65': [0, 0.69444, 0, 0],\n    '66': [0, 0.69444, 0.08293, 0],\n    '67': [0, 0.69444, 0.11983, 0],\n    '68': [0, 0.69444, 0.07555, 0],\n    '69': [0, 0.69444, 0.11983, 0],\n    '70': [0, 0.69444, 0.13372, 0],\n    '71': [0, 0.69444, 0.11983, 0],\n    '72': [0, 0.69444, 0.08094, 0],\n    '73': [0, 0.69444, 0.13372, 0],\n    '74': [0, 0.69444, 0.08094, 0],\n    '75': [0, 0.69444, 0.11983, 0],\n    '76': [0, 0.69444, 0, 0],\n    '77': [0, 0.69444, 0.08094, 0],\n    '78': [0, 0.69444, 0.08094, 0],\n    '79': [0, 0.69444, 0.07555, 0],\n    '80': [0, 0.69444, 0.08293, 0],\n    '81': [0.125, 0.69444, 0.07555, 0],\n    '82': [0, 0.69444, 0.08293, 0],\n    '83': [0, 0.69444, 0.09205, 0],\n    '84': [0, 0.69444, 0.13372, 0],\n    '85': [0, 0.69444, 0.08094, 0],\n    '86': [0, 0.69444, 0.1615, 0],\n    '87': [0, 0.69444, 0.1615, 0],\n    '88': [0, 0.69444, 0.13372, 0],\n    '89': [0, 0.69444, 0.17261, 0],\n    '90': [0, 0.69444, 0.11983, 0],\n    '91': [0.25, 0.75, 0.15942, 0],\n    '93': [0.25, 0.75, 0.08719, 0],\n    '94': [0, 0.69444, 0.0799, 0],\n    '95': [0.35, 0.09444, 0.08616, 0],\n    '97': [0, 0.44444, 0.00981, 0],\n    '98': [0, 0.69444, 0.03057, 0],\n    '99': [0, 0.44444, 0.08336, 0],\n    '100': [0, 0.69444, 0.09483, 0],\n    '101': [0, 0.44444, 0.06778, 0],\n    '102': [0, 0.69444, 0.21705, 0],\n    '103': [0.19444, 0.44444, 0.10836, 0],\n    '104': [0, 0.69444, 0.01778, 0],\n    '105': [0, 0.67937, 0.09718, 0],\n    '106': [0.19444, 0.67937, 0.09162, 0],\n    '107': [0, 0.69444, 0.08336, 0],\n    '108': [0, 0.69444, 0.09483, 0],\n    '109': [0, 0.44444, 0.01778, 0],\n    '110': [0, 0.44444, 0.01778, 0],\n    '111': [0, 0.44444, 0.06613, 0],\n    '112': [0.19444, 0.44444, 0.0389, 0],\n    '113': [0.19444, 0.44444, 0.04169, 0],\n    '114': [0, 0.44444, 0.10836, 0],\n    '115': [0, 0.44444, 0.0778, 0],\n    '116': [0, 0.57143, 0.07225, 0],\n    '117': [0, 0.44444, 0.04169, 0],\n    '118': [0, 0.44444, 0.10836, 0],\n    '119': [0, 0.44444, 0.10836, 0],\n    '120': [0, 0.44444, 0.09169, 0],\n    '121': [0.19444, 0.44444, 0.10836, 0],\n    '122': [0, 0.44444, 0.08752, 0],\n    '126': [0.35, 0.32659, 0.08826, 0],\n    '168': [0, 0.67937, 0.06385, 0],\n    '176': [0, 0.69444, 0, 0],\n    '184': [0.17014, 0, 0, 0],\n    '305': [0, 0.44444, 0.04169, 0],\n    '567': [0.19444, 0.44444, 0.04169, 0],\n    '710': [0, 0.69444, 0.0799, 0],\n    '711': [0, 0.63194, 0.08432, 0],\n    '713': [0, 0.60889, 0.08776, 0],\n    '714': [0, 0.69444, 0.09205, 0],\n    '715': [0, 0.69444, 0, 0],\n    '728': [0, 0.69444, 0.09483, 0],\n    '729': [0, 0.67937, 0.07774, 0],\n    '730': [0, 0.69444, 0, 0],\n    '732': [0, 0.67659, 0.08826, 0],\n    '733': [0, 0.69444, 0.09205, 0],\n    '915': [0, 0.69444, 0.13372, 0],\n    '916': [0, 0.69444, 0, 0],\n    '920': [0, 0.69444, 0.07555, 0],\n    '923': [0, 0.69444, 0, 0],\n    '926': [0, 0.69444, 0.12816, 0],\n    '928': [0, 0.69444, 0.08094, 0],\n    '931': [0, 0.69444, 0.11983, 0],\n    '933': [0, 0.69444, 0.09031, 0],\n    '934': [0, 0.69444, 0.04603, 0],\n    '936': [0, 0.69444, 0.09031, 0],\n    '937': [0, 0.69444, 0.08293, 0],\n    '8211': [0, 0.44444, 0.08616, 0],\n    '8212': [0, 0.44444, 0.08616, 0],\n    '8216': [0, 0.69444, 0.07816, 0],\n    '8217': [0, 0.69444, 0.07816, 0],\n    '8220': [0, 0.69444, 0.14205, 0],\n    '8221': [0, 0.69444, 0.00316, 0],\n  },\n  'SansSerif-Regular': {\n    '33': [0, 0.69444, 0, 0],\n    '34': [0, 0.69444, 0, 0],\n    '35': [0.19444, 0.69444, 0, 0],\n    '36': [0.05556, 0.75, 0, 0],\n    '37': [0.05556, 0.75, 0, 0],\n    '38': [0, 0.69444, 0, 0],\n    '39': [0, 0.69444, 0, 0],\n    '40': [0.25, 0.75, 0, 0],\n    '41': [0.25, 0.75, 0, 0],\n    '42': [0, 0.75, 0, 0],\n    '43': [0.08333, 0.58333, 0, 0],\n    '44': [0.125, 0.08333, 0, 0],\n    '45': [0, 0.44444, 0, 0],\n    '46': [0, 0.08333, 0, 0],\n    '47': [0.25, 0.75, 0, 0],\n    '48': [0, 0.65556, 0, 0],\n    '49': [0, 0.65556, 0, 0],\n    '50': [0, 0.65556, 0, 0],\n    '51': [0, 0.65556, 0, 0],\n    '52': [0, 0.65556, 0, 0],\n    '53': [0, 0.65556, 0, 0],\n    '54': [0, 0.65556, 0, 0],\n    '55': [0, 0.65556, 0, 0],\n    '56': [0, 0.65556, 0, 0],\n    '57': [0, 0.65556, 0, 0],\n    '58': [0, 0.44444, 0, 0],\n    '59': [0.125, 0.44444, 0, 0],\n    '61': [-0.13, 0.37, 0, 0],\n    '63': [0, 0.69444, 0, 0],\n    '64': [0, 0.69444, 0, 0],\n    '65': [0, 0.69444, 0, 0],\n    '66': [0, 0.69444, 0, 0],\n    '67': [0, 0.69444, 0, 0],\n    '68': [0, 0.69444, 0, 0],\n    '69': [0, 0.69444, 0, 0],\n    '70': [0, 0.69444, 0, 0],\n    '71': [0, 0.69444, 0, 0],\n    '72': [0, 0.69444, 0, 0],\n    '73': [0, 0.69444, 0, 0],\n    '74': [0, 0.69444, 0, 0],\n    '75': [0, 0.69444, 0, 0],\n    '76': [0, 0.69444, 0, 0],\n    '77': [0, 0.69444, 0, 0],\n    '78': [0, 0.69444, 0, 0],\n    '79': [0, 0.69444, 0, 0],\n    '80': [0, 0.69444, 0, 0],\n    '81': [0.125, 0.69444, 0, 0],\n    '82': [0, 0.69444, 0, 0],\n    '83': [0, 0.69444, 0, 0],\n    '84': [0, 0.69444, 0, 0],\n    '85': [0, 0.69444, 0, 0],\n    '86': [0, 0.69444, 0.01389, 0],\n    '87': [0, 0.69444, 0.01389, 0],\n    '88': [0, 0.69444, 0, 0],\n    '89': [0, 0.69444, 0.025, 0],\n    '90': [0, 0.69444, 0, 0],\n    '91': [0.25, 0.75, 0, 0],\n    '93': [0.25, 0.75, 0, 0],\n    '94': [0, 0.69444, 0, 0],\n    '95': [0.35, 0.09444, 0.02778, 0],\n    '97': [0, 0.44444, 0, 0],\n    '98': [0, 0.69444, 0, 0],\n    '99': [0, 0.44444, 0, 0],\n    '100': [0, 0.69444, 0, 0],\n    '101': [0, 0.44444, 0, 0],\n    '102': [0, 0.69444, 0.06944, 0],\n    '103': [0.19444, 0.44444, 0.01389, 0],\n    '104': [0, 0.69444, 0, 0],\n    '105': [0, 0.67937, 0, 0],\n    '106': [0.19444, 0.67937, 0, 0],\n    '107': [0, 0.69444, 0, 0],\n    '108': [0, 0.69444, 0, 0],\n    '109': [0, 0.44444, 0, 0],\n    '110': [0, 0.44444, 0, 0],\n    '111': [0, 0.44444, 0, 0],\n    '112': [0.19444, 0.44444, 0, 0],\n    '113': [0.19444, 0.44444, 0, 0],\n    '114': [0, 0.44444, 0.01389, 0],\n    '115': [0, 0.44444, 0, 0],\n    '116': [0, 0.57143, 0, 0],\n    '117': [0, 0.44444, 0, 0],\n    '118': [0, 0.44444, 0.01389, 0],\n    '119': [0, 0.44444, 0.01389, 0],\n    '120': [0, 0.44444, 0, 0],\n    '121': [0.19444, 0.44444, 0.01389, 0],\n    '122': [0, 0.44444, 0, 0],\n    '126': [0.35, 0.32659, 0, 0],\n    '168': [0, 0.67937, 0, 0],\n    '176': [0, 0.69444, 0, 0],\n    '184': [0.17014, 0, 0, 0],\n    '305': [0, 0.44444, 0, 0],\n    '567': [0.19444, 0.44444, 0, 0],\n    '710': [0, 0.69444, 0, 0],\n    '711': [0, 0.63194, 0, 0],\n    '713': [0, 0.60889, 0, 0],\n    '714': [0, 0.69444, 0, 0],\n    '715': [0, 0.69444, 0, 0],\n    '728': [0, 0.69444, 0, 0],\n    '729': [0, 0.67937, 0, 0],\n    '730': [0, 0.69444, 0, 0],\n    '732': [0, 0.67659, 0, 0],\n    '733': [0, 0.69444, 0, 0],\n    '915': [0, 0.69444, 0, 0],\n    '916': [0, 0.69444, 0, 0],\n    '920': [0, 0.69444, 0, 0],\n    '923': [0, 0.69444, 0, 0],\n    '926': [0, 0.69444, 0, 0],\n    '928': [0, 0.69444, 0, 0],\n    '931': [0, 0.69444, 0, 0],\n    '933': [0, 0.69444, 0, 0],\n    '934': [0, 0.69444, 0, 0],\n    '936': [0, 0.69444, 0, 0],\n    '937': [0, 0.69444, 0, 0],\n    '8211': [0, 0.44444, 0.02778, 0],\n    '8212': [0, 0.44444, 0.02778, 0],\n    '8216': [0, 0.69444, 0, 0],\n    '8217': [0, 0.69444, 0, 0],\n    '8220': [0, 0.69444, 0, 0],\n    '8221': [0, 0.69444, 0, 0],\n  },\n  'Script-Regular': {\n    '65': [0, 0.7, 0.22925, 0],\n    '66': [0, 0.7, 0.04087, 0],\n    '67': [0, 0.7, 0.1689, 0],\n    '68': [0, 0.7, 0.09371, 0],\n    '69': [0, 0.7, 0.18583, 0],\n    '70': [0, 0.7, 0.13634, 0],\n    '71': [0, 0.7, 0.17322, 0],\n    '72': [0, 0.7, 0.29694, 0],\n    '73': [0, 0.7, 0.19189, 0],\n    '74': [0.27778, 0.7, 0.19189, 0],\n    '75': [0, 0.7, 0.31259, 0],\n    '76': [0, 0.7, 0.19189, 0],\n    '77': [0, 0.7, 0.15981, 0],\n    '78': [0, 0.7, 0.3525, 0],\n    '79': [0, 0.7, 0.08078, 0],\n    '80': [0, 0.7, 0.08078, 0],\n    '81': [0, 0.7, 0.03305, 0],\n    '82': [0, 0.7, 0.06259, 0],\n    '83': [0, 0.7, 0.19189, 0],\n    '84': [0, 0.7, 0.29087, 0],\n    '85': [0, 0.7, 0.25815, 0],\n    '86': [0, 0.7, 0.27523, 0],\n    '87': [0, 0.7, 0.27523, 0],\n    '88': [0, 0.7, 0.26006, 0],\n    '89': [0, 0.7, 0.2939, 0],\n    '90': [0, 0.7, 0.24037, 0],\n  },\n  'Size1-Regular': {\n    '40': [0.35001, 0.85, 0, 0],\n    '41': [0.35001, 0.85, 0, 0],\n    '47': [0.35001, 0.85, 0, 0],\n    '91': [0.35001, 0.85, 0, 0],\n    '92': [0.35001, 0.85, 0, 0],\n    '93': [0.35001, 0.85, 0, 0],\n    '123': [0.35001, 0.85, 0, 0],\n    '125': [0.35001, 0.85, 0, 0],\n    '710': [0, 0.72222, 0, 0],\n    '732': [0, 0.72222, 0, 0],\n    '770': [0, 0.72222, 0, 0],\n    '771': [0, 0.72222, 0, 0],\n    '8214': [-0.00099, 0.601, 0, 0],\n    '8593': [1e-5, 0.6, 0, 0],\n    '8595': [1e-5, 0.6, 0, 0],\n    '8657': [1e-5, 0.6, 0, 0],\n    '8659': [1e-5, 0.6, 0, 0],\n    '8719': [0.25001, 0.75, 0, 0],\n    '8720': [0.25001, 0.75, 0, 0],\n    '8721': [0.25001, 0.75, 0, 0],\n    '8730': [0.35001, 0.85, 0, 0],\n    '8739': [-0.00599, 0.606, 0, 0],\n    '8741': [-0.00599, 0.606, 0, 0],\n    '8747': [0.30612, 0.805, 0.19445, 0],\n    '8748': [0.306, 0.805, 0.19445, 0],\n    '8749': [0.306, 0.805, 0.19445, 0],\n    '8750': [0.30612, 0.805, 0.19445, 0],\n    '8896': [0.25001, 0.75, 0, 0],\n    '8897': [0.25001, 0.75, 0, 0],\n    '8898': [0.25001, 0.75, 0, 0],\n    '8899': [0.25001, 0.75, 0, 0],\n    '8968': [0.35001, 0.85, 0, 0],\n    '8969': [0.35001, 0.85, 0, 0],\n    '8970': [0.35001, 0.85, 0, 0],\n    '8971': [0.35001, 0.85, 0, 0],\n    '9168': [-0.00099, 0.601, 0, 0],\n    '10216': [0.35001, 0.85, 0, 0],\n    '10217': [0.35001, 0.85, 0, 0],\n    '10752': [0.25001, 0.75, 0, 0],\n    '10753': [0.25001, 0.75, 0, 0],\n    '10754': [0.25001, 0.75, 0, 0],\n    '10756': [0.25001, 0.75, 0, 0],\n    '10758': [0.25001, 0.75, 0, 0],\n  },\n  'Size2-Regular': {\n    '40': [0.65002, 1.15, 0, 0],\n    '41': [0.65002, 1.15, 0, 0],\n    '47': [0.65002, 1.15, 0, 0],\n    '91': [0.65002, 1.15, 0, 0],\n    '92': [0.65002, 1.15, 0, 0],\n    '93': [0.65002, 1.15, 0, 0],\n    '123': [0.65002, 1.15, 0, 0],\n    '125': [0.65002, 1.15, 0, 0],\n    '710': [0, 0.75, 0, 0],\n    '732': [0, 0.75, 0, 0],\n    '770': [0, 0.75, 0, 0],\n    '771': [0, 0.75, 0, 0],\n    '8719': [0.55001, 1.05, 0, 0],\n    '8720': [0.55001, 1.05, 0, 0],\n    '8721': [0.55001, 1.05, 0, 0],\n    '8730': [0.65002, 1.15, 0, 0],\n    '8747': [0.86225, 1.36, 0.44445, 0],\n    '8748': [0.862, 1.36, 0.44445, 0],\n    '8749': [0.862, 1.36, 0.44445, 0],\n    '8750': [0.86225, 1.36, 0.44445, 0],\n    '8896': [0.55001, 1.05, 0, 0],\n    '8897': [0.55001, 1.05, 0, 0],\n    '8898': [0.55001, 1.05, 0, 0],\n    '8899': [0.55001, 1.05, 0, 0],\n    '8968': [0.65002, 1.15, 0, 0],\n    '8969': [0.65002, 1.15, 0, 0],\n    '8970': [0.65002, 1.15, 0, 0],\n    '8971': [0.65002, 1.15, 0, 0],\n    '10216': [0.65002, 1.15, 0, 0],\n    '10217': [0.65002, 1.15, 0, 0],\n    '10752': [0.55001, 1.05, 0, 0],\n    '10753': [0.55001, 1.05, 0, 0],\n    '10754': [0.55001, 1.05, 0, 0],\n    '10756': [0.55001, 1.05, 0, 0],\n    '10758': [0.55001, 1.05, 0, 0],\n  },\n  'Size3-Regular': {\n    '40': [0.95003, 1.45, 0, 0],\n    '41': [0.95003, 1.45, 0, 0],\n    '47': [0.95003, 1.45, 0, 0],\n    '91': [0.95003, 1.45, 0, 0],\n    '92': [0.95003, 1.45, 0, 0],\n    '93': [0.95003, 1.45, 0, 0],\n    '123': [0.95003, 1.45, 0, 0],\n    '125': [0.95003, 1.45, 0, 0],\n    '710': [0, 0.75, 0, 0],\n    '732': [0, 0.75, 0, 0],\n    '770': [0, 0.75, 0, 0],\n    '771': [0, 0.75, 0, 0],\n    '8730': [0.95003, 1.45, 0, 0],\n    '8968': [0.95003, 1.45, 0, 0],\n    '8969': [0.95003, 1.45, 0, 0],\n    '8970': [0.95003, 1.45, 0, 0],\n    '8971': [0.95003, 1.45, 0, 0],\n    '10216': [0.95003, 1.45, 0, 0],\n    '10217': [0.95003, 1.45, 0, 0],\n  },\n  'Size4-Regular': {\n    '40': [1.25003, 1.75, 0, 0],\n    '41': [1.25003, 1.75, 0, 0],\n    '47': [1.25003, 1.75, 0, 0],\n    '91': [1.25003, 1.75, 0, 0],\n    '92': [1.25003, 1.75, 0, 0],\n    '93': [1.25003, 1.75, 0, 0],\n    '123': [1.25003, 1.75, 0, 0],\n    '125': [1.25003, 1.75, 0, 0],\n    '710': [0, 0.825, 0, 0],\n    '732': [0, 0.825, 0, 0],\n    '770': [0, 0.825, 0, 0],\n    '771': [0, 0.825, 0, 0],\n    '8730': [1.25003, 1.75, 0, 0],\n    '8968': [1.25003, 1.75, 0, 0],\n    '8969': [1.25003, 1.75, 0, 0],\n    '8970': [1.25003, 1.75, 0, 0],\n    '8971': [1.25003, 1.75, 0, 0],\n    '9115': [0.64502, 1.155, 0, 0],\n    '9116': [1e-5, 0.6, 0, 0],\n    '9117': [0.64502, 1.155, 0, 0],\n    '9118': [0.64502, 1.155, 0, 0],\n    '9119': [1e-5, 0.6, 0, 0],\n    '9120': [0.64502, 1.155, 0, 0],\n    '9121': [0.64502, 1.155, 0, 0],\n    '9122': [-0.00099, 0.601, 0, 0],\n    '9123': [0.64502, 1.155, 0, 0],\n    '9124': [0.64502, 1.155, 0, 0],\n    '9125': [-0.00099, 0.601, 0, 0],\n    '9126': [0.64502, 1.155, 0, 0],\n    '9127': [1e-5, 0.9, 0, 0],\n    '9128': [0.65002, 1.15, 0, 0],\n    '9129': [0.90001, 0, 0, 0],\n    '9130': [0, 0.3, 0, 0],\n    '9131': [1e-5, 0.9, 0, 0],\n    '9132': [0.65002, 1.15, 0, 0],\n    '9133': [0.90001, 0, 0, 0],\n    '9143': [0.88502, 0.915, 0, 0],\n    '10216': [1.25003, 1.75, 0, 0],\n    '10217': [1.25003, 1.75, 0, 0],\n    '57344': [-0.00499, 0.605, 0, 0],\n    '57345': [-0.00499, 0.605, 0, 0],\n    '57680': [0, 0.12, 0, 0],\n    '57681': [0, 0.12, 0, 0],\n    '57682': [0, 0.12, 0, 0],\n    '57683': [0, 0.12, 0, 0],\n  },\n  'Typewriter-Regular': {\n    '32': [0, 0, 0, 0],\n    '33': [0, 0.61111, 0, 0],\n    '34': [0, 0.61111, 0, 0],\n    '35': [0, 0.61111, 0, 0],\n    '36': [0.08333, 0.69444, 0, 0],\n    '37': [0.08333, 0.69444, 0, 0],\n    '38': [0, 0.61111, 0, 0],\n    '39': [0, 0.61111, 0, 0],\n    '40': [0.08333, 0.69444, 0, 0],\n    '41': [0.08333, 0.69444, 0, 0],\n    '42': [0, 0.52083, 0, 0],\n    '43': [-0.08056, 0.53055, 0, 0],\n    '44': [0.13889, 0.125, 0, 0],\n    '45': [-0.08056, 0.53055, 0, 0],\n    '46': [0, 0.125, 0, 0],\n    '47': [0.08333, 0.69444, 0, 0],\n    '48': [0, 0.61111, 0, 0],\n    '49': [0, 0.61111, 0, 0],\n    '50': [0, 0.61111, 0, 0],\n    '51': [0, 0.61111, 0, 0],\n    '52': [0, 0.61111, 0, 0],\n    '53': [0, 0.61111, 0, 0],\n    '54': [0, 0.61111, 0, 0],\n    '55': [0, 0.61111, 0, 0],\n    '56': [0, 0.61111, 0, 0],\n    '57': [0, 0.61111, 0, 0],\n    '58': [0, 0.43056, 0, 0],\n    '59': [0.13889, 0.43056, 0, 0],\n    '60': [-0.05556, 0.55556, 0, 0],\n    '61': [-0.19549, 0.41562, 0, 0],\n    '62': [-0.05556, 0.55556, 0, 0],\n    '63': [0, 0.61111, 0, 0],\n    '64': [0, 0.61111, 0, 0],\n    '65': [0, 0.61111, 0, 0],\n    '66': [0, 0.61111, 0, 0],\n    '67': [0, 0.61111, 0, 0],\n    '68': [0, 0.61111, 0, 0],\n    '69': [0, 0.61111, 0, 0],\n    '70': [0, 0.61111, 0, 0],\n    '71': [0, 0.61111, 0, 0],\n    '72': [0, 0.61111, 0, 0],\n    '73': [0, 0.61111, 0, 0],\n    '74': [0, 0.61111, 0, 0],\n    '75': [0, 0.61111, 0, 0],\n    '76': [0, 0.61111, 0, 0],\n    '77': [0, 0.61111, 0, 0],\n    '78': [0, 0.61111, 0, 0],\n    '79': [0, 0.61111, 0, 0],\n    '80': [0, 0.61111, 0, 0],\n    '81': [0.13889, 0.61111, 0, 0],\n    '82': [0, 0.61111, 0, 0],\n    '83': [0, 0.61111, 0, 0],\n    '84': [0, 0.61111, 0, 0],\n    '85': [0, 0.61111, 0, 0],\n    '86': [0, 0.61111, 0, 0],\n    '87': [0, 0.61111, 0, 0],\n    '88': [0, 0.61111, 0, 0],\n    '89': [0, 0.61111, 0, 0],\n    '90': [0, 0.61111, 0, 0],\n    '91': [0.08333, 0.69444, 0, 0],\n    '92': [0.08333, 0.69444, 0, 0],\n    '93': [0.08333, 0.69444, 0, 0],\n    '94': [0, 0.61111, 0, 0],\n    '95': [0.09514, 0, 0, 0],\n    '96': [0, 0.61111, 0, 0],\n    '97': [0, 0.43056, 0, 0],\n    '98': [0, 0.61111, 0, 0],\n    '99': [0, 0.43056, 0, 0],\n    '100': [0, 0.61111, 0, 0],\n    '101': [0, 0.43056, 0, 0],\n    '102': [0, 0.61111, 0, 0],\n    '103': [0.22222, 0.43056, 0, 0],\n    '104': [0, 0.61111, 0, 0],\n    '105': [0, 0.61111, 0, 0],\n    '106': [0.22222, 0.61111, 0, 0],\n    '107': [0, 0.61111, 0, 0],\n    '108': [0, 0.61111, 0, 0],\n    '109': [0, 0.43056, 0, 0],\n    '110': [0, 0.43056, 0, 0],\n    '111': [0, 0.43056, 0, 0],\n    '112': [0.22222, 0.43056, 0, 0],\n    '113': [0.22222, 0.43056, 0, 0],\n    '114': [0, 0.43056, 0, 0],\n    '115': [0, 0.43056, 0, 0],\n    '116': [0, 0.55358, 0, 0],\n    '117': [0, 0.43056, 0, 0],\n    '118': [0, 0.43056, 0, 0],\n    '119': [0, 0.43056, 0, 0],\n    '120': [0, 0.43056, 0, 0],\n    '121': [0.22222, 0.43056, 0, 0],\n    '122': [0, 0.43056, 0, 0],\n    '123': [0.08333, 0.69444, 0, 0],\n    '124': [0.08333, 0.69444, 0, 0],\n    '125': [0.08333, 0.69444, 0, 0],\n    '126': [0, 0.61111, 0, 0],\n    '127': [0, 0.61111, 0, 0],\n    '160': [0, 0, 0, 0],\n    '176': [0, 0.61111, 0, 0],\n    '184': [0.19445, 0, 0, 0],\n    '305': [0, 0.43056, 0, 0],\n    '567': [0.22222, 0.43056, 0, 0],\n    '711': [0, 0.56597, 0, 0],\n    '713': [0, 0.56555, 0, 0],\n    '714': [0, 0.61111, 0, 0],\n    '715': [0, 0.61111, 0, 0],\n    '728': [0, 0.61111, 0, 0],\n    '730': [0, 0.61111, 0, 0],\n    '770': [0, 0.61111, 0, 0],\n    '771': [0, 0.61111, 0, 0],\n    '776': [0, 0.61111, 0, 0],\n    '915': [0, 0.61111, 0, 0],\n    '916': [0, 0.61111, 0, 0],\n    '920': [0, 0.61111, 0, 0],\n    '923': [0, 0.61111, 0, 0],\n    '926': [0, 0.61111, 0, 0],\n    '928': [0, 0.61111, 0, 0],\n    '931': [0, 0.61111, 0, 0],\n    '933': [0, 0.61111, 0, 0],\n    '934': [0, 0.61111, 0, 0],\n    '936': [0, 0.61111, 0, 0],\n    '937': [0, 0.61111, 0, 0],\n    '8216': [0, 0.61111, 0, 0],\n    '8217': [0, 0.61111, 0, 0],\n    '8242': [0, 0.61111, 0, 0],\n    '9251': [0.11111, 0.21944, 0, 0],\n  },\n};\n","/**\n * This module contains metrics regarding fonts and individual symbols. The sigma\n * and xi variables, as well as the METRICS_MAP map contain data extracted from\n * TeX, TeX font metrics, and the TTF files. These data are then exposed via the\n * `metrics` variable and the getCharacterMetrics function.\n */\nimport METRICS_MAP from './font-metrics-data';\n\n// This METRICS_MAP contains a mapping from font name and character code to character\n// metrics, including height, depth, italic correction, and skew (kern from the\n// character to the corresponding \\skewchar)\n// This map is generated via `make metrics`. It should not be changed manually.\n\ninterface CharacterMetrics {\n  defaultMetrics: boolean;\n  depth: number;\n  height: number;\n  italic: number;\n  skew: number;\n}\n// Const hangulRegex = /[\\uAC00-\\uD7AF]/;\n\n// This regex combines\n// - Hiragana: [\\u3040-\\u309F]\n// - Katakana: [\\u30A0-\\u30FF]\n// - CJK ideograms: [\\u4E00-\\u9FAF]\n// - Hangul syllables: [\\uAC00-\\uD7AF]\n// Notably missing are half width Katakana and Romaji glyphs.\nconst cjkRegex = /[\\u3040-\\u309F]|[\\u30A0-\\u30FF]|[\\u4E00-\\u9FAF]|[\\uAC00-\\uD7AF]/;\n\n/*\n *\n * In TeX, there are actually three sets of dimensions, one for each of\n * textstyle, scriptstyle, and scriptscriptstyle.  These are provided in the\n * the arrays below, in that order.\n *\n * The font metrics are stored in fonts cmsy10, cmsy7, and cmsy5 respectively.\n * This was determined by running the following script:\n *``` bash\n      latex -interaction=nonstopmode \\\n      '\\documentclass{article}\\usepackage{amsmath}\\begin{document}' \\\n      '$a$ \\expandafter\\show\\the\\textfont2' \\\n      '\\expandafter\\show\\the\\scriptfont2' \\\n      '\\expandafter\\show\\the\\scriptscriptfont2' \\\n      '\\stop'\n  ```\n * The metrics themselves were retrieved using the following commands:\n * ``` bash\n      tftopl cmsy10\n      tftopl cmsy7\n      tftopl cmsy5\n    ```\n *\n * The output of each of these commands is quite lengthy.  The only part we\n * care about is the FONTDIMEN section. Each value is measured in EMs.\n * @memberof module:fontMetrics\n */\nexport const SIGMAS = {\n  slant: [0.25, 0.25, 0.25], // Sigma1\n  space: [0, 0, 0], // Sigma2\n  stretch: [0, 0, 0], // Sigma3\n  shrink: [0, 0, 0], // Sigma4\n  xHeight: [0.431, 0.431, 0.431], // Sigma5\n  quad: [1, 1.171, 1.472], // Sigma6\n  extraSpace: [0, 0, 0], // Sigma7\n  num1: [0.677, 0.732, 0.925], // Sigma8\n  num2: [0.394, 0.384, 0.387], // Sigma9\n  num3: [0.444, 0.471, 0.504], // Sigma10\n  denom1: [0.686, 0.752, 1.025], // Sigma11\n  denom2: [0.345, 0.344, 0.532], // Sigma12\n  sup1: [0.413, 0.503, 0.504], // Sigma13\n  sup2: [0.363, 0.431, 0.404], // Sigma14\n  sup3: [0.289, 0.286, 0.294], // Sigma15\n  sub1: [0.15, 0.143, 0.2], // Sigma16\n  sub2: [0.247, 0.286, 0.4], // Sigma17\n  supDrop: [0.386, 0.353, 0.494], // Sigma18\n  subDrop: [0.05, 0.071, 0.1], // Sigma19\n  delim1: [2.39, 1.7, 1.98], // Sigma20\n  delim2: [1.01, 1.157, 1.42], // Sigma21\n  axisHeight: [0.25, 0.25, 0.25], // Sigma22\n};\n\n// These font metrics are extracted from TeX by using\n// \\font\\a=cmex10\n// \\showthe\\fontdimenX\\a\n// where X is the corresponding variable number. These correspond to the font\n// parameters of the extension fonts (family 3). See the TeXbook, page 433\n// const xi1 = 0; // Slant per pt\n// const xi2 = 0; // Interword space\n// const xi3 = 0; // Interword stretch\n// const xi4 = 0; // Interword shrink\n// const xi5 = 0.431; // x-height\n// const xi6 = 1; // Quad width\n// const xi7 = 0; // Extra space\nconst xi8 = 0.04; // Default rule thickness, TexBook p.390\nconst xi9 = 0.111;\nconst xi10 = 0.166;\nconst xi11 = 0.2;\nconst xi12 = 0.6;\nexport const xi13 = 0.1;\n// Note: xi14: offset from baseline for superscript TexBook p. 179\n// Note: xi16: offset from baseline for subscript\n\n// This value determines how large a pt is, for metrics which are defined in\n// terms of pts.\n// This value is also used in katex.less; if you change it make sure the values\n// match.\nconst ptPerEm = 10;\n\n// A table of size -> font size for the different sizing functions\nexport const SIZING_MULTIPLIER = {\n  size1: 0.5,\n  size2: 0.7,\n  size3: 0.8,\n  size4: 0.9,\n  size5: 1.0,\n  size6: 1.2,\n  size7: 1.44,\n  size8: 1.728,\n  size9: 2.074,\n  size10: 2.488,\n};\n\n/*\n * This is just a mapping from common names to real metrics\n */\nexport const METRICS = {\n  defaultRuleThickness: xi8,\n  bigOpSpacing1: xi9,\n  bigOpSpacing2: xi10,\n  bigOpSpacing3: xi11,\n  bigOpSpacing4: xi12,\n  bigOpSpacing5: xi13,\n  ptPerEm,\n  pxPerEm: (ptPerEm * 4) / 3, // A CSS pt is fixed at 1.333px\n  // The space between adjacent `|` columns in an array definition. From\n  // article.cls.txt:455\n  doubleRuleSep: 2 / ptPerEm,\n  arraycolsep: 5 / ptPerEm,\n  baselineskip: 12 / ptPerEm,\n  arrayrulewidth: 0.4 / ptPerEm,\n  fboxsep: 3 / ptPerEm, // From letter.dtx:1626\n  fboxrule: 0.4 / ptPerEm, // From letter.dtx:1627\n};\n\n// These are very rough approximations.  We default to Times New Roman which\n// should have Latin-1 and Cyrillic characters, but may not depending on the\n// operating system.  The metrics do not account for extra height from the\n// accents.  In the case of Cyrillic characters which have both ascenders and\n// descenders we prefer approximations with ascenders, primarily to prevent\n// the fraction bar or root line from intersecting the glyph.\n// TODO(kevinb) allow union of multiple glyph metrics for better accuracy.\nconst extraCharacterMap = {\n  '\\u00A0': '\\u0020', // NON-BREAKING SPACE is like space\n  '\\u200B': '\\u0020', // ZERO WIDTH SPACE is like space\n  // Latin-1\n  'Å': 'A',\n  'Ç': 'C',\n  'Ð': 'D',\n  'Þ': 'o',\n  'å': 'a',\n  'ç': 'c',\n  'ð': 'd',\n  'þ': 'o',\n\n  // Cyrillic\n  'А': 'A',\n  'Б': 'B',\n  'В': 'B',\n  'Г': 'F',\n  'Д': 'A',\n  'Е': 'E',\n  'Ж': 'K',\n  'З': '3',\n  'И': 'N',\n  'Й': 'N',\n  'К': 'K',\n  'Л': 'N',\n  'М': 'M',\n  'Н': 'H',\n  'О': 'O',\n  'П': 'N',\n  'Р': 'P',\n  'С': 'C',\n  'Т': 'T',\n  'У': 'y',\n  'Ф': 'O',\n  'Х': 'X',\n  'Ц': 'U',\n  'Ч': 'h',\n  'Ш': 'W',\n  'Щ': 'W',\n  'Ъ': 'B',\n  'Ы': 'X',\n  'Ь': 'B',\n  'Э': '3',\n  'Ю': 'X',\n  'Я': 'R',\n  'а': 'a',\n  'б': 'b',\n  'в': 'a',\n  'г': 'r',\n  'д': 'y',\n  'е': 'e',\n  'ж': 'm',\n  'з': 'e',\n  'и': 'n',\n  'й': 'n',\n  'к': 'n',\n  'л': 'n',\n  'м': 'm',\n  'н': 'n',\n  'о': 'o',\n  'п': 'n',\n  'р': 'p',\n  'с': 'c',\n  'т': 'o',\n  'у': 'y',\n  'ф': 'b',\n  'х': 'x',\n  'ц': 'n',\n  'ч': 'n',\n  'ш': 'w',\n  'щ': 'w',\n  'ъ': 'a',\n  'ы': 'm',\n  'ь': 'a',\n  'э': 'e',\n  'ю': 'm',\n  'я': 'r',\n};\n\n/**\n * This function is a convenience function for looking up information in the\n * METRICS_MAP table. It takes a character as a string, and a font name.\n *\n * Note: the `width` property may be undefined if fontMetricsData.js wasn't\n * built using `Make extended_metrics`.\n * @param fontName e.g. 'Main-Regular', 'Typewriter-Regular', etc...\n */\nexport function getCharacterMetrics(\n  codepoint: number,\n  fontName: string\n): CharacterMetrics {\n  // Console.assert(character.length === 1);\n  console.assert(METRICS_MAP[fontName], 'Unknown font \"' + fontName + '\"');\n\n  const metrics = METRICS_MAP[fontName][codepoint];\n\n  if (metrics) {\n    return {\n      defaultMetrics: false,\n      depth: metrics[0],\n      height: metrics[1],\n      italic: metrics[2],\n      skew: metrics[3],\n    };\n  }\n\n  if (codepoint === 11034) {\n    // Placeholder character\n    return {\n      defaultMetrics: true,\n      depth: 0.2,\n      height: 0.8,\n      italic: 0,\n      skew: 0,\n    };\n  }\n\n  const char = String.fromCodePoint(codepoint);\n\n  if (char in extraCharacterMap) {\n    codepoint = extraCharacterMap[char].codePointAt(0);\n  } else if (cjkRegex.test(codepoint[0])) {\n    codepoint = 77; // 'M'.codepointAt(0);\n    return {\n      defaultMetrics: true,\n      depth: 0.2,\n      height: 0.9,\n      italic: 0,\n      skew: 0,\n    };\n  }\n  // Console.warn(\n  //     'No metrics for ' +\n  //     '\"' + character + '\" (U+' + ('000000' + ch.toString(16)).substr(-6) + ')' +\n  //     ' in font \"' + fontName + '\"');\n  // Assume default values.\n  // depth + height should be less than 1.0 em\n\n  return {\n    defaultMetrics: true,\n    depth: 0.2,\n    height: 0.7,\n    italic: 0,\n    skew: 0,\n  };\n}\n\n/**\n *\n * @param value If value is a string, it may be suffixed\n * with a unit, which will override the `unit` paramter\n */\nexport function convertDimenToEm(\n  value: number | string,\n  unit: string,\n  precision = Number.NaN\n): number {\n  if (typeof value === 'string') {\n    const m = value.match(/([-+]?[\\d.]*)\\s*([a-zA-Z]+)/);\n    if (!m) {\n      value = Number.parseFloat(value);\n    } else {\n      value = Number.parseFloat(m[1]);\n      unit = m[2].toLowerCase();\n    }\n  }\n\n  // If the units are missing, TeX assumes 'pt'\n  const f =\n    {\n      pt: 1,\n      mm: 7227 / 2540,\n      cm: 7227 / 254,\n      ex: 35271 / 8192,\n      px: 3 / 4,\n      em: METRICS.ptPerEm,\n      bp: 803 / 800,\n      dd: 1238 / 1157,\n      pc: 12,\n      in: 72.27,\n      mu: 10 / 18,\n    }[unit] || 1;\n\n  if (Number.isFinite(precision)) {\n    const factor = 10 ** precision;\n    return Math.round((value / METRICS.ptPerEm) * f * factor) / factor;\n  }\n\n  return (value / METRICS.ptPerEm) * f;\n}\n\nexport function convertDimenToPx(value: string | number, unit: string): number {\n  return convertDimenToEm(value, unit) * (4 / 3) * METRICS.ptPerEm;\n}\n","/**\n * This file contains information and classes for the 'math styles' used by TeX,\n * which are specific layout\n * algorithms for math. They get progressively smaller and tighter:\n * - displaystyle is used for expressions laid out on their own (in a block)\n * - textstyle is for expressions displayed on a line (usually wiht some text\n * around)\n * - scriptstyle is for expressions displayed as a superscript for example\n * - scriptscriptstyle is for expressions displayed as a superscript of a superscript\n * - the 'cramped' variations are used in various places, for examples a subscript\n * is using the 'scriptstyle', but cramped (so it's a bit more tight than a\n * superscript which is just using the 'scriptstyle')\n *\n * See Texbook, p.441:\n *\n * A math list is a sequence of items of the various kinds listed in Chapter 17,\n * and TEX typesets a formula by converting a math list to a horizontal list.\n * When such typesetting begins, TEX has two other pieces of information in\n * addition to the math list itself. (a) The starting style tells what style\n * should be used for the math list, unless another style is specified by a\n * style item. For example, the starting style for a displayed formula is D,\n * but for an equation in the text or an equation number it is T; and for a\n * subformula it can be any one of the eight styles defined in Chapter 17.\n *\n * We shall use C to stand for the current style, and we shall say that the\n * math list is being typeset in style C. (b) The typesetting is done either\n * with or without penalties. Formulas in the text of a paragraph are converted\n * to horizontal lists in which additional penalty items are inserted after\n * binary operations and relations, in order to aid in line breaking. Such\n * penalties are not inserted in other cases, because they would serve no\n * useful function.\n *\n * The eight styles are considered to be D > D′ > T > T′ > S > S′ > SS > SS′,\n * in decreasing order. Thus, C ≤ S means that the current style is S, S , SS,\n * or SS . Style C′ means the current style with a prime added if one isn’t\n * there; for example, we have C =T if and only if C = T or C = T'.\n * Style C↑ is the superscript style for C; this means style S if C is D or T,\n * style S′ if C is D′ or T′, style SS if C is S or SS,\n * and style SS if C is S or SS.\n * Finally, style C↓ is the subscript style, which is (C↑) .\n */\n\nimport { SIGMAS } from './font-metrics';\ninterface Metrics {\n  slant: number;\n  space: number;\n  stretch: number;\n  shrink: number;\n  xHeight: number;\n  quad: number;\n  extraSpace: number;\n  num1: number; // 8\n  num2: number; // 9\n  num3: number; // 10\n  denom1: number; // 11\n  denom2: number; // 12\n  sup1: number;\n  sup2: number;\n  sup3: number;\n  sub1: number;\n  sub2: number;\n  supDrop: number;\n  subDrop: number;\n  delim1: number;\n  delim2: number;\n  axisHeight: number;\n} // @revisit: belongs in ./font-metrics\n\n// IDs of the different MATHSTYLES\nconst D = 0; // Displaystyle\nconst Dc = 1; // Displaystyle, cramped\nconst T = 2; // Textstyle\nconst Tc = 3;\nconst S = 4; // Scriptstyle\nconst Sc = 5;\nconst SS = 6; // Scriptscriptstyle\nconst SSc = 7;\n\n/**\n * @property {number} id unique id for the style\n * @property {number} size (which is the same for cramped and uncramped version\n * of a style)\n * @property {number}  sizeMultiplier, size multiplier which gives the size difference between\n * a style and textstyle.\n * @property {boolean}  cramped flag\n */\nexport class Mathstyle {\n  id: 0 | 1 | 2 | 3 | 4 | 5 | 6 | 7;\n  size: 0 | 1 | 2 | 3;\n  cramped: boolean;\n  sizeMultiplier: number;\n  metrics: Metrics;\n\n  constructor(\n    id: 0 | 1 | 2 | 3 | 4 | 5 | 6 | 7,\n    size: 0 | 1 | 2 | 3,\n    cramped: boolean\n  ) {\n    this.id = id;\n    this.size = size;\n    this.sizeMultiplier = [1, 1, 0.7, 0.5][size];\n    this.cramped = cramped;\n    const sizeIndex = size === 0 ? 0 : size - 1;\n    this.metrics = Object.keys(SIGMAS).reduce((acc, x) => {\n      return { ...acc, [x]: SIGMAS[x][sizeIndex] };\n    }, {}) as Metrics;\n  }\n\n  /**\n   * Get the style of a superscript given a base in the current style.\n   */\n  sup(): Mathstyle {\n    return MATHSTYLES[[S, Sc, S, Sc, SS, SSc, SS, SSc][this.id]];\n  }\n\n  /**\n   * Get the style of a subscript given a base in the current style.\n   */\n  sub(): Mathstyle {\n    return MATHSTYLES[[Sc, Sc, Sc, Sc, SSc, SSc, SSc, SSc][this.id]];\n  }\n\n  /**\n   * Get the style of a fraction numerator given the fraction in the current\n   * style.\n   */\n  fracNum(): Mathstyle {\n    return MATHSTYLES[[T, Tc, S, Sc, SS, SSc, SS, SSc][this.id]];\n  }\n\n  /**\n   * Get the style of a fraction denominator given the fraction in the current\n   * style.\n   */\n  fracDen(): Mathstyle {\n    return MATHSTYLES[[Tc, Tc, Sc, Sc, SSc, SSc, SSc, SSc][this.id]];\n  }\n\n  /**\n   * Get the cramped version of a style (in particular, cramping a cramped style\n   * doesn't change the style).\n   */\n  cramp(): Mathstyle {\n    return MATHSTYLES[[Dc, Dc, Tc, Tc, Sc, Sc, SSc, SSc][this.id]];\n  }\n\n  /**\n   * CSS class name, for example `displaystyle cramped`\n   */\n  cls(): string {\n    return ['displaystyle', 'textstyle', 'scriptstyle', 'scriptscriptstyle'][\n      this.size\n    ]; // @revisit: use this.id to include 'cramped' variants\n  }\n\n  /**\n   * CSS class name to adjust from one style (size) to another.\n   * See TexBook pg. 441\n   */\n  adjustTo(newStyle: Mathstyle): string {\n    const result = [\n      ['', '', 'sz-10-7', 'sz-10-5'],\n      ['', '', 'sz-10-7', 'sz-10-5'],\n      ['sz-7-10', 'sz-7-10', '', 'sz-7-5'],\n      ['sz-5-10', 'sz-5-10', 'sz-5-7', ''],\n    ][this.size][newStyle.size];\n    if (result.length === 0) return '';\n    return ' ' + result;\n  }\n\n  /**\n   * Return if this style is tightly spaced (scriptstyle/scriptscriptstyle)\n   */\n  isTight(): boolean {\n    return this.size >= 2;\n  }\n}\n\nexport const MATHSTYLES: {\n  [key: number]: Mathstyle;\n  displaystyle?: Mathstyle;\n  textstyle?: Mathstyle;\n  scriptstyle?: Mathstyle;\n  scriptscriptstyle?: Mathstyle;\n} = {\n  0: new Mathstyle(D, 0, false),\n  1: new Mathstyle(Dc, 0, true),\n  2: new Mathstyle(T, 1, false),\n  3: new Mathstyle(Tc, 1, true),\n  4: new Mathstyle(S, 2, false),\n  5: new Mathstyle(Sc, 2, true),\n  6: new Mathstyle(SS, 3, false),\n  7: new Mathstyle(SSc, 3, true),\n};\n\n// Aliases\nMATHSTYLES.displaystyle = MATHSTYLES[0];\nMATHSTYLES.textstyle = MATHSTYLES[2];\nMATHSTYLES.scriptstyle = MATHSTYLES[4];\nMATHSTYLES.scriptscriptstyle = MATHSTYLES[6];\n\nexport type MathStyleName =\n  | 'displaystyle'\n  | 'textstyle'\n  | 'scriptstyle'\n  | 'scriptscriptstyle';\n","import { FontSize, MacroDictionary, ParseMode } from '../public/core';\nimport { Mathstyle, MATHSTYLES } from './mathstyle';\nimport { Span } from './span';\n\nexport type ArgumentType =\n  | ParseMode\n  | (\n      | 'auto'\n      | 'bbox'\n      | 'color' // Color name, hex value: `'#fff'`, `'#a0a0a0'`\n      | 'colspec' // Formating of a column in tabular environment, e.g. `'r@{.}l'`\n      | 'delim'\n      | 'dimen' // `'25mu'`, `'2pt'`\n      | 'number' // `+/-12.56`\n      | 'rest' // `{\\foo \\textsize ...}` to capture \"...\"\n      | 'skip' // `'25mu plus 2em minus fiLll'`, `'2pt'`\n      | 'string' // Delimiter is a non-literal token (e.g. `<}>` `<$>`, etc\n      | 'balanced-string' // Delimiter is a balanced closing brace\n    );\n\nexport interface ContextInterface {\n  macros?: MacroDictionary;\n  atomIdsSettings?: {\n    overrideID?: string;\n    groupNumbers: boolean;\n    seed: string | number;\n  };\n  mathstyle?: Mathstyle;\n  renderPlaceholder?: (context: Context) => Span;\n  parentMathstyle?: Mathstyle;\n  size?: FontSize | 'auto';\n  parentSize?: FontSize;\n  letterShapeStyle?: 'tex' | 'french' | 'iso' | 'upright' | 'auto';\n  opacity?: number;\n  color?: string;\n  smartFence?: boolean;\n  phantomBase?: Span[];\n}\n\n/**\n * This structure contains the rendering context of the current parse level.\n *\n * It also holds information about the parent context to handle scaling\n * adjustments.\n *\n * When a new scope is entered, a clone of the context is created with `.clone()`\n * so that any further changes remain local to the scope.\n *\n * A scope is defined for example by:\n * - an explicit group enclosed in braces `{...}`\n * - a semi-simple group enclosed in `\\bgroup...\\endgroup`\n * - an environment delimited by `\\begin{<envname>}...\\end{<envname>}`\n *\n * @property {Mathstyle} mathstyle\n * @property {number} opacity\n * @property {number} size\n * @property {object} atomIdsSettings - If not undefined, unique IDs should be\n * generated for each span so they can be mapped back to an atom.\n * The `seed` field should be a number to generate a specific range of\n * IDs or the string \"random\" to generate a random number.\n * Optionally, if a `groupNumbers` property is set to true, an additional\n * span will enclose strings of digits. This is used by read aloud to properly\n * pronounce (and highlight) numbers in expressions.\n * @property {Mathstyle} parentMathstyle\n * @property {number} parentSize\n * @property {object} macros A macros dictionary\n * @property {string} color\n */\nexport class Context implements ContextInterface {\n  macros: MacroDictionary;\n  atomIdsSettings?: {\n    overrideID?: string;\n    groupNumbers: boolean;\n    seed: string | number;\n  };\n\n  mathstyle: Mathstyle;\n  parentMathstyle?: Mathstyle;\n  size?: FontSize;\n  parentSize?: FontSize;\n  letterShapeStyle: 'tex' | 'french' | 'iso' | 'upright' | 'auto';\n  opacity?: number;\n  color?: string;\n  renderPlaceholder?: (context: Context) => Span;\n  smartFence?: boolean;\n  phantomBase?: Span[]; // The spans to use to calculate the placement of the sup/sub\n  // Used by 'msubsup' scaffolding atoms\n\n  constructor(from: ContextInterface) {\n    this.macros = from.macros ?? {};\n    this.atomIdsSettings = from.atomIdsSettings;\n\n    this.mathstyle = from.mathstyle ?? MATHSTYLES.displaystyle;\n\n    this.letterShapeStyle = from.letterShapeStyle ?? 'tex';\n\n    if (from.size === 'auto') {\n      this.size = 'size5';\n    } else {\n      this.size = from.size ?? 'size5'; // Medium size\n    }\n\n    this.parentMathstyle = from.parentMathstyle ?? this.mathstyle;\n    this.renderPlaceholder = from.renderPlaceholder;\n    this.parentSize = from.parentSize ?? this.size;\n\n    this.opacity = from.opacity;\n    this.smartFence = from.smartFence;\n    this.phantomBase = from.phantomBase;\n  }\n\n  makeID(): string {\n    let result: string;\n    if (this.atomIdsSettings) {\n      if (typeof this.atomIdsSettings.seed === 'number') {\n        result = this.atomIdsSettings.overrideID\n          ? this.atomIdsSettings.overrideID\n          : this.atomIdsSettings.seed.toString(36);\n        this.atomIdsSettings.seed += 1;\n      } else {\n        result =\n          Date.now().toString(36).slice(-2) +\n          Math.floor(Math.random() * 0x186a0).toString(36);\n      }\n    }\n\n    return result;\n  }\n\n  /**\n   * Returns a new context with the same properties as 'this',\n   * except for the ones provided in `override`\n   */\n  clone(override: ContextInterface = {}): Context {\n    const result = new Context(this);\n    if (override !== undefined) {\n      // `'auto'` (or undefined) to indicate that the mathstyle should in\n      // fact not be changed. This is used when specifying the mathstyle\n      // for some environments.\n      const previousMathstyle = this.mathstyle;\n      Object.assign(result, override);\n      if (!override.mathstyle) {\n        result.mathstyle = previousMathstyle;\n      } else {\n        result.parentMathstyle = previousMathstyle;\n        if (typeof override.mathstyle === 'string') {\n          result.mathstyle = MATHSTYLES[override.mathstyle];\n        }\n      }\n    }\n\n    return result;\n  }\n\n  /**\n   * Change the mathstyle of this context\n   * @param value - `'auto'` to indicate that the mathstyle should in\n   * fact not be changed. This is used when specifying the mathstyle for some\n   * environments.\n   */\n  setMathstyle(value: string): void {\n    if (value && value !== 'auto') {\n      this.mathstyle = MATHSTYLES[value];\n    }\n  }\n\n  withFontsize(size: FontSize | 'auto'): Context {\n    return this.clone({ size: size === 'auto' ? 'size5' : size });\n  }\n\n  cramp(): Context {\n    return this.clone({ mathstyle: this.mathstyle.cramp() });\n  }\n\n  sup(): Context {\n    return this.clone({ mathstyle: this.mathstyle.sup() });\n  }\n\n  sub(): Context {\n    return this.clone({ mathstyle: this.mathstyle.sub() });\n  }\n}\n","const SVG_BODY: Record<\n  string,\n  [\n    name: string[],\n    minWidth: number,\n    viewBoxHeight: number,\n    align?: 'xMaxYMin' | 'xMinYMin'\n  ]\n> = {\n  // Adapted from https://github.com/KaTeX/KaTeX/blob/master/src/stretchy.js\n\n  overrightarrow: [['rightarrow'], 0.888, 522, 'xMaxYMin'],\n  overleftarrow: [['leftarrow'], 0.888, 522, 'xMinYMin'],\n  underrightarrow: [['rightarrow'], 0.888, 522, 'xMaxYMin'],\n  underleftarrow: [['leftarrow'], 0.888, 522, 'xMinYMin'],\n  xrightarrow: [['rightarrow'], 1.469, 522, 'xMaxYMin'],\n  xleftarrow: [['leftarrow'], 1.469, 522, 'xMinYMin'],\n  Overrightarrow: [['doublerightarrow'], 0.888, 560, 'xMaxYMin'],\n  xRightarrow: [['doublerightarrow'], 1.526, 560, 'xMaxYMin'],\n  xLeftarrow: [['doubleleftarrow'], 1.526, 560, 'xMinYMin'],\n  overleftharpoon: [['leftharpoon'], 0.888, 522, 'xMinYMin'],\n  xleftharpoonup: [['leftharpoon'], 0.888, 522, 'xMinYMin'],\n  xleftharpoondown: [['leftharpoondown'], 0.888, 522, 'xMinYMin'],\n  overrightharpoon: [['rightharpoon'], 0.888, 522, 'xMaxYMin'],\n  xrightharpoonup: [['rightharpoon'], 0.888, 522, 'xMaxYMin'],\n  xrightharpoondown: [['rightharpoondown'], 0.888, 522, 'xMaxYMin'],\n  xlongequal: [['longequal'], 0.888, 334, 'xMinYMin'],\n  xtwoheadleftarrow: [['twoheadleftarrow'], 0.888, 334, 'xMinYMin'],\n  xtwoheadrightarrow: [['twoheadrightarrow'], 0.888, 334, 'xMaxYMin'],\n\n  overleftrightarrow: [['leftarrow', 'rightarrow'], 0.888, 522],\n  overbrace: [['leftbrace', 'midbrace', 'rightbrace'], 1.6, 548],\n  underbrace: [\n    ['leftbraceunder', 'midbraceunder', 'rightbraceunder'],\n    1.6,\n    548,\n  ],\n  underleftrightarrow: [['leftarrow', 'rightarrow'], 0.888, 522],\n  xleftrightarrow: [['leftarrow', 'rightarrow'], 1.75, 522],\n  xLeftrightarrow: [['doubleleftarrow', 'doublerightarrow'], 1.75, 560],\n  xrightleftharpoons: [['leftharpoondownplus', 'rightharpoonplus'], 1.75, 716],\n  xleftrightharpoons: [['leftharpoonplus', 'rightharpoondownplus'], 1.75, 716],\n  xhookleftarrow: [['leftarrow', 'righthook'], 1.08, 522],\n  xhookrightarrow: [['lefthook', 'rightarrow'], 1.08, 522],\n  overlinesegment: [['leftlinesegment', 'rightlinesegment'], 0.888, 522],\n  underlinesegment: [['leftlinesegment', 'rightlinesegment'], 0.888, 522],\n  overgroup: [['leftgroup', 'rightgroup'], 0.888, 342],\n  undergroup: [['leftgroupunder', 'rightgroupunder'], 0.888, 342],\n  xmapsto: [['leftmapsto', 'rightarrow'], 1.5, 522],\n  xtofrom: [['leftToFrom', 'rightToFrom'], 1.75, 528],\n\n  // The next three arrows are from the mhchem package.\n  // In mhchem.sty, min-length is 2.0em. But these arrows might appear in the\n  // document as \\xrightarrow or \\xrightleftharpoons. Those have\n  // min-length = 1.75em, so we set min-length on these next three to match.\n  xrightleftarrows: [['baraboveleftarrow', 'rightarrowabovebar'], 1.75, 901],\n  xrightequilibrium: [\n    ['baraboveshortleftharpoon', 'rightharpoonaboveshortbar'],\n    1.75,\n    716,\n  ],\n  xleftequilibrium: [\n    ['shortbaraboveleftharpoon', 'shortrightharpoonabovebar'],\n    1.75,\n    716,\n  ],\n};\n\n// While the images above are sliced, \"accents\" are stretched\n// The variants (xxx1, xxx2, etc...) are used depending on the length\n// (in number of characters) of the base.\nconst SVG_ACCENTS: Record<string, [number, number, number]> = {\n  // ViewBoxWidth, viewBoxHeight, height\n  widehat1: [1062, 239, 0.24],\n  widehat2: [2364, 300, 0.3],\n  widehat3: [2364, 360, 0.36],\n  widehat4: [2364, 420, 0.42],\n  widecheck1: [1062, 239, 0.24],\n  widecheck2: [2364, 300, 0.3],\n  widecheck3: [2364, 360, 0.36],\n  widecheck4: [2364, 420, 0.42],\n  widetilde1: [600, 260, 0.26],\n  widetilde2: [1033, 286, 0.286],\n  widetilde3: [2339, 306, 0.306],\n  widetilde4: [2340, 312, 0.34],\n};\n\n// From https://github.com/KaTeX/KaTeX/blob/master/src/svgGeometry.js\n\nconst PATHS: Record<string, string> = {\n  // The doubleleftarrow geometry is from glyph U+21D0 in the font KaTeX Main\n  doubleleftarrow: `M262 157\nl10-10c34-36 62.7-77 86-123 3.3-8 5-13.3 5-16 0-5.3-6.7-8-20-8-7.3\n 0-12.2.5-14.5 1.5-2.3 1-4.8 4.5-7.5 10.5-49.3 97.3-121.7 169.3-217 216-28\n 14-57.3 25-88 33-6.7 2-11 3.8-13 5.5-2 1.7-3 4.2-3 7.5s1 5.8 3 7.5\nc2 1.7 6.3 3.5 13 5.5 68 17.3 128.2 47.8 180.5 91.5 52.3 43.7 93.8 96.2 124.5\n 157.5 9.3 8 15.3 12.3 18 13h6c12-.7 18-4 18-10 0-2-1.7-7-5-15-23.3-46-52-87\n-86-123l-10-10h399738v-40H218c328 0 0 0 0 0l-10-8c-26.7-20-65.7-43-117-69 2.7\n-2 6-3.7 10-5 36.7-16 72.3-37.3 107-64l10-8h399782v-40z\nm8 0v40h399730v-40zm0 194v40h399730v-40z`,\n\n  // Doublerightarrow is from glyph U+21D2 in font KaTeX Main\n  doublerightarrow: `M399738 392l\n-10 10c-34 36-62.7 77-86 123-3.3 8-5 13.3-5 16 0 5.3 6.7 8 20 8 7.3 0 12.2-.5\n 14.5-1.5 2.3-1 4.8-4.5 7.5-10.5 49.3-97.3 121.7-169.3 217-216 28-14 57.3-25 88\n-33 6.7-2 11-3.8 13-5.5 2-1.7 3-4.2 3-7.5s-1-5.8-3-7.5c-2-1.7-6.3-3.5-13-5.5-68\n-17.3-128.2-47.8-180.5-91.5-52.3-43.7-93.8-96.2-124.5-157.5-9.3-8-15.3-12.3-18\n-13h-6c-12 .7-18 4-18 10 0 2 1.7 7 5 15 23.3 46 52 87 86 123l10 10H0v40h399782\nc-328 0 0 0 0 0l10 8c26.7 20 65.7 43 117 69-2.7 2-6 3.7-10 5-36.7 16-72.3 37.3\n-107 64l-10 8H0v40zM0 157v40h399730v-40zm0 194v40h399730v-40z`,\n\n  // Leftarrow is from glyph U+2190 in font KaTeX Main\n  leftarrow: `M400000 241H110l3-3c68.7-52.7 113.7-120\n 135-202 4-14.7 6-23 6-25 0-7.3-7-11-21-11-8 0-13.2.8-15.5 2.5-2.3 1.7-4.2 5.8\n-5.5 12.5-1.3 4.7-2.7 10.3-4 17-12 48.7-34.8 92-68.5 130S65.3 228.3 18 247\nc-10 4-16 7.7-18 11 0 8.7 6 14.3 18 17 47.3 18.7 87.8 47 121.5 85S196 441.3 208\n 490c.7 2 1.3 5 2 9s1.2 6.7 1.5 8c.3 1.3 1 3.3 2 6s2.2 4.5 3.5 5.5c1.3 1 3.3\n 1.8 6 2.5s6 1 10 1c14 0 21-3.7 21-11 0-2-2-10.3-6-25-20-79.3-65-146.7-135-202\n l-3-3h399890zM100 241v40h399900v-40z`,\n\n  // Overbrace is from glyphs U+23A9/23A8/23A7 in font KaTeX_Size4-Regular\n  leftbrace: `M6 548l-6-6v-35l6-11c56-104 135.3-181.3 238-232 57.3-28.7 117\n-45 179-50h399577v120H403c-43.3 7-81 15-113 26-100.7 33-179.7 91-237 174-2.7\n 5-6 9-10 13-.7 1-7.3 1-20 1H6z`,\n\n  leftbraceunder: `M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13\n 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688\n 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7\n-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z`,\n\n  // Overgroup is from the MnSymbol package (public domain)\n  leftgroup: `M400000 80\nH435C64 80 168.3 229.4 21 260c-5.9 1.2-18 0-18 0-2 0-3-1-3-3v-38C76 61 257 0\n 435 0h399565z`,\n\n  leftgroupunder: `M400000 262\nH435C64 262 168.3 112.6 21 82c-5.9-1.2-18 0-18 0-2 0-3 1-3 3v38c76 158 257 219\n 435 219h399565z`,\n\n  // Harpoons are from glyph U+21BD in font KaTeX Main\n  leftharpoon: `M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3\n-3.3 10.2-9.5 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5\n-18.3 3-21-1.3-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7\n-196 228-6.7 4.7-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40z`,\n\n  leftharpoonplus: `M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3-3.3 10.2-9.5\n 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5-18.3 3-21-1.3\n-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7-196 228-6.7 4.7\n-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40zM0 435v40h400000v-40z\nm0 0v40h400000v-40z`,\n\n  leftharpoondown: `M7 241c-4 4-6.333 8.667-7 14 0 5.333.667 9 2 11s5.333\n 5.333 12 10c90.667 54 156 130 196 228 3.333 10.667 6.333 16.333 9 17 2 .667 5\n 1 9 1h5c10.667 0 16.667-2 18-6 2-2.667 1-9.667-3-21-32-87.333-82.667-157.667\n-152-211l-3-3h399907v-40zM93 281 H400000 v-40L7 241z`,\n\n  leftharpoondownplus: `M7 435c-4 4-6.3 8.7-7 14 0 5.3.7 9 2 11s5.3 5.3 12\n 10c90.7 54 156 130 196 228 3.3 10.7 6.3 16.3 9 17 2 .7 5 1 9 1h5c10.7 0 16.7\n-2 18-6 2-2.7 1-9.7-3-21-32-87.3-82.7-157.7-152-211l-3-3h399907v-40H7zm93 0\nv40h399900v-40zM0 241v40h399900v-40zm0 0v40h399900v-40z`,\n\n  // Hook is from glyph U+21A9 in font KaTeX Main\n  lefthook: `M400000 281 H103s-33-11.2-61-33.5S0 197.3 0 164s14.2-61.2 42.5\n-83.5C70.8 58.2 104 47 142 47 c16.7 0 25 6.7 25 20 0 12-8.7 18.7-26 20-40 3.3\n-68.7 15.7-86 37-10 12-15 25.3-15 40 0 22.7 9.8 40.7 29.5 54 19.7 13.3 43.5 21\n 71.5 23h399859zM103 281v-40h399897v40z`,\n\n  leftlinesegment: `M40 281 V428 H0 V94 H40 V241 H400000 v40z\nM40 281 V428 H0 V94 H40 V241 H400000 v40z`,\n\n  leftmapsto: `M40 281 V448H0V74H40V241H400000v40z\nM40 281 V448H0V74H40V241H400000v40z`,\n\n  // Tofrom is from glyph U+21C4 in font KaTeX AMS Regular\n  leftToFrom: `M0 147h400000v40H0zm0 214c68 40 115.7 95.7 143 167h22c15.3 0 23\n-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69-70-101l-7-8h399905v-40H95l7-8\nc28.7-32 52-65.7 70-101 10.7-23.3 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 265.3\n 68 321 0 361zm0-174v-40h399900v40zm100 154v40h399900v-40z`,\n\n  longequal: `M0 50 h400000 v40H0z m0 194h40000v40H0z\nM0 50 h400000 v40H0z m0 194h40000v40H0z`,\n\n  midbrace: `M200428 334\nc-100.7-8.3-195.3-44-280-108-55.3-42-101.7-93-139-153l-9-14c-2.7 4-5.7 8.7-9 14\n-53.3 86.7-123.7 153-211 199-66.7 36-137.3 56.3-212 62H0V214h199568c178.3-11.7\n 311.7-78.3 403-201 6-8 9.7-12 11-12 .7-.7 6.7-1 18-1s17.3.3 18 1c1.3 0 5 4 11\n 12 44.7 59.3 101.3 106.3 170 141s145.3 54.3 229 60h199572v120z`,\n\n  midbraceunder: `M199572 214\nc100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14\n 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3\n 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0\n-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z`,\n\n  oiintSize1: `M512.6 71.6c272.6 0 320.3 106.8 320.3 178.2 0 70.8-47.7 177.6\n-320.3 177.6S193.1 320.6 193.1 249.8c0-71.4 46.9-178.2 319.5-178.2z\nm368.1 178.2c0-86.4-60.9-215.4-368.1-215.4-306.4 0-367.3 129-367.3 215.4 0 85.8\n60.9 214.8 367.3 214.8 307.2 0 368.1-129 368.1-214.8z`,\n\n  oiintSize2: `M757.8 100.1c384.7 0 451.1 137.6 451.1 230 0 91.3-66.4 228.8\n-451.1 228.8-386.3 0-452.7-137.5-452.7-228.8 0-92.4 66.4-230 452.7-230z\nm502.4 230c0-111.2-82.4-277.2-502.4-277.2s-504 166-504 277.2\nc0 110 84 276 504 276s502.4-166 502.4-276z`,\n\n  oiiintSize1: `M681.4 71.6c408.9 0 480.5 106.8 480.5 178.2 0 70.8-71.6 177.6\n-480.5 177.6S202.1 320.6 202.1 249.8c0-71.4 70.5-178.2 479.3-178.2z\nm525.8 178.2c0-86.4-86.8-215.4-525.7-215.4-437.9 0-524.7 129-524.7 215.4 0\n85.8 86.8 214.8 524.7 214.8 438.9 0 525.7-129 525.7-214.8z`,\n\n  oiiintSize2: `M1021.2 53c603.6 0 707.8 165.8 707.8 277.2 0 110-104.2 275.8\n-707.8 275.8-606 0-710.2-165.8-710.2-275.8C311 218.8 415.2 53 1021.2 53z\nm770.4 277.1c0-131.2-126.4-327.6-770.5-327.6S248.4 198.9 248.4 330.1\nc0 130 128.8 326.4 772.7 326.4s770.5-196.4 770.5-326.4z`,\n\n  rightarrow: `M0 241v40h399891c-47.3 35.3-84 78-110 128\n-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20\n 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7\n 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85\n-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5\n-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67\n 151.7 139 205zm0 0v40h399900v-40z`,\n\n  rightbrace: `M400000 542l\n-6 6h-17c-12.7 0-19.3-.3-20-1-4-4-7.3-8.3-10-13-35.3-51.3-80.8-93.8-136.5-127.5\ns-117.2-55.8-184.5-66.5c-.7 0-2-.3-4-1-18.7-2.7-76-4.3-172-5H0V214h399571l6 1\nc124.7 8 235 61.7 331 161 31.3 33.3 59.7 72.7 85 118l7 13v35z`,\n\n  rightbraceunder: `M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3\n 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237\n-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z`,\n\n  rightgroup: `M0 80h399565c371 0 266.7 149.4 414 180 5.9 1.2 18 0 18 0 2 0\n 3-1 3-3v-38c-76-158-257-219-435-219H0z`,\n\n  rightgroupunder: `M0 262h399565c371 0 266.7-149.4 414-180 5.9-1.2 18 0 18\n 0 2 0 3 1 3 3v38c-76 158-257 219-435 219H0z`,\n\n  rightharpoon: `M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3\n-3.7-15.3-11-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2\n-10.7 0-16.7 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58\n 69.2 92 94.5zm0 0v40h399900v-40z`,\n\n  rightharpoonplus: `M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3-3.7-15.3-11\n-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2-10.7 0-16.7\n 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58 69.2 92 94.5z\nm0 0v40h399900v-40z m100 194v40h399900v-40zm0 0v40h399900v-40z`,\n\n  rightharpoondown: `M399747 511c0 7.3 6.7 11 20 11 8 0 13-.8 15-2.5s4.7-6.8\n 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3 8.5-5.8 9.5\n-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3-64.7 57-92 95\n-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 241v40h399900v-40z`,\n\n  rightharpoondownplus: `M399747 705c0 7.3 6.7 11 20 11 8 0 13-.8\n 15-2.5s4.7-6.8 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3\n 8.5-5.8 9.5-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3\n-64.7 57-92 95-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 435v40h399900v-40z\nm0-194v40h400000v-40zm0 0v40h400000v-40z`,\n\n  righthook: `M399859 241c-764 0 0 0 0 0 40-3.3 68.7-15.7 86-37 10-12 15-25.3\n 15-40 0-22.7-9.8-40.7-29.5-54-19.7-13.3-43.5-21-71.5-23-17.3-1.3-26-8-26-20 0\n-13.3 8.7-20 26-20 38 0 71 11.2 99 33.5 0 0 7 5.6 21 16.7 14 11.2 21 33.5 21\n 66.8s-14 61.2-42 83.5c-28 22.3-61 33.5-99 33.5L0 241z M0 281v-40h399859v40z`,\n\n  rightlinesegment: `M399960 241 V94 h40 V428 h-40 V281 H0 v-40z\nM399960 241 V94 h40 V428 h-40 V281 H0 v-40z`,\n\n  rightToFrom: `M400000 167c-70.7-42-118-97.7-142-167h-23c-15.3 0-23 .3-23\n 1 0 1.3 5.3 13.7 16 37 18 35.3 41.3 69 70 101l7 8H0v40h399905l-7 8c-28.7 32\n-52 65.7-70 101-10.7 23.3-16 35.7-16 37 0 .7 7.7 1 23 1h23c24-69.3 71.3-125 142\n-167z M100 147v40h399900v-40zM0 341v40h399900v-40z`,\n\n  // Twoheadleftarrow is from glyph U+219E in font KaTeX AMS Regular\n  twoheadleftarrow: `M0 167c68 40\n 115.7 95.7 143 167h22c15.3 0 23-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69\n-70-101l-7-8h125l9 7c50.7 39.3 85 86 103 140h46c0-4.7-6.3-18.7-19-42-18-35.3\n-40-67.3-66-96l-9-9h399716v-40H284l9-9c26-28.7 48-60.7 66-96 12.7-23.333 19\n-37.333 19-42h-46c-18 54-52.3 100.7-103 140l-9 7H95l7-8c28.7-32 52-65.7 70-101\n 10.7-23.333 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 71.3 68 127 0 167z`,\n\n  twoheadrightarrow: `M400000 167\nc-68-40-115.7-95.7-143-167h-22c-15.3 0-23 .3-23 1 0 1.3 5.3 13.7 16 37 18 35.3\n 41.3 69 70 101l7 8h-125l-9-7c-50.7-39.3-85-86-103-140h-46c0 4.7 6.3 18.7 19 42\n 18 35.3 40 67.3 66 96l9 9H0v40h399716l-9 9c-26 28.7-48 60.7-66 96-12.7 23.333\n-19 37.333-19 42h46c18-54 52.3-100.7 103-140l9-7h125l-7 8c-28.7 32-52 65.7-70\n 101-10.7 23.333-16 35.7-16 37 0 .7 7.7 1 23 1h22c27.3-71.3 75-127 143-167z`,\n\n  // Tilde1 is a modified version of a glyph from the MnSymbol package\n  widetilde1: `M200 55.538c-77 0-168 73.953-177 73.953-3 0-7\n-2.175-9-5.437L2 97c-1-2-2-4-2-6 0-4 2-7 5-9l20-12C116 12 171 0 207 0c86 0\n 114 68 191 68 78 0 168-68 177-68 4 0 7 2 9 5l12 19c1 2.175 2 4.35 2 6.525 0\n 4.35-2 7.613-5 9.788l-19 13.05c-92 63.077-116.937 75.308-183 76.128\n-68.267.847-113-73.952-191-73.952z`,\n\n  // Ditto tilde2, tilde3, & tilde4\n  widetilde2: `M344 55.266c-142 0-300.638 81.316-311.5 86.418\n-8.01 3.762-22.5 10.91-23.5 5.562L1 120c-1-2-1-3-1-4 0-5 3-9 8-10l18.4-9C160.9\n 31.9 283 0 358 0c148 0 188 122 331 122s314-97 326-97c4 0 8 2 10 7l7 21.114\nc1 2.14 1 3.21 1 4.28 0 5.347-3 9.626-7 10.696l-22.3 12.622C852.6 158.372 751\n 181.476 676 181.476c-149 0-189-126.21-332-126.21z`,\n\n  widetilde3: `M786 59C457 59 32 175.242 13 175.242c-6 0-10-3.457\n-11-10.37L.15 138c-1-7 3-12 10-13l19.2-6.4C378.4 40.7 634.3 0 804.3 0c337 0\n 411.8 157 746.8 157 328 0 754-112 773-112 5 0 10 3 11 9l1 14.075c1 8.066-.697\n 16.595-6.697 17.492l-21.052 7.31c-367.9 98.146-609.15 122.696-778.15 122.696\n -338 0-409-156.573-744-156.573z`,\n\n  widetilde4: `M786 58C457 58 32 177.487 13 177.487c-6 0-10-3.345\n-11-10.035L.15 143c-1-7 3-12 10-13l22-6.7C381.2 35 637.15 0 807.15 0c337 0 409\n 177 744 177 328 0 754-127 773-127 5 0 10 3 11 9l1 14.794c1 7.805-3 13.38-9\n 14.495l-20.7 5.574c-366.85 99.79-607.3 139.372-776.3 139.372-338 0-409\n -175.236-744-175.236z`,\n\n  // Vec is from glyph U+20D7 in font KaTeX Main\n  vec: `M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5\n3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11\n10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63\n-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1\n-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59\nH213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359\nc-16-25.333-24-45-24-59z`,\n\n  // Widehat1 is a modified version of a glyph from the MnSymbol package\n  widehat1: `M529 0h5l519 115c5 1 9 5 9 10 0 1-1 2-1 3l-4 22\nc-1 5-5 9-11 9h-2L532 67 19 159h-2c-5 0-9-4-11-9l-5-22c-1-6 2-12 8-13z`,\n\n  // Ditto widehat2, widehat3, & widehat4\n  widehat2: `M1181 0h2l1171 176c6 0 10 5 10 11l-2 23c-1 6-5 10\n-11 10h-1L1182 67 15 220h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,\n\n  widehat3: `M1181 0h2l1171 236c6 0 10 5 10 11l-2 23c-1 6-5 10\n-11 10h-1L1182 67 15 280h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,\n\n  widehat4: `M1181 0h2l1171 296c6 0 10 5 10 11l-2 23c-1 6-5 10\n-11 10h-1L1182 67 15 340h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,\n\n  // Widecheck paths are all inverted versions of widehat\n  widecheck1: `M529,159h5l519,-115c5,-1,9,-5,9,-10c0,-1,-1,-2,-1,-3l-4,-22c-1,\n-5,-5,-9,-11,-9h-2l-512,92l-513,-92h-2c-5,0,-9,4,-11,9l-5,22c-1,6,2,12,8,13z`,\n\n  widecheck2: `M1181,220h2l1171,-176c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,\n-11,-10h-1l-1168,153l-1167,-153h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,\n\n  widecheck3: `M1181,280h2l1171,-236c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,\n-11,-10h-1l-1168,213l-1167,-213h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,\n\n  widecheck4: `M1181,340h2l1171,-296c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,\n-11,-10h-1l-1168,273l-1167,-273h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,\n\n  // The next ten paths support reaction arrows from the mhchem package.\n\n  // Arrows for \\ce{<-->} are offset from xAxis by 0.22ex, per mhchem in LaTeX\n  // baraboveleftarrow is mostly from from glyph U+2190 in font KaTeX Main\n  baraboveleftarrow: `M400000 620h-399890l3 -3c68.7 -52.7 113.7 -120 135 -202\nc4 -14.7 6 -23 6 -25c0 -7.3 -7 -11 -21 -11c-8 0 -13.2 0.8 -15.5 2.5\nc-2.3 1.7 -4.2 5.8 -5.5 12.5c-1.3 4.7 -2.7 10.3 -4 17c-12 48.7 -34.8 92 -68.5 130\ns-74.2 66.3 -121.5 85c-10 4 -16 7.7 -18 11c0 8.7 6 14.3 18 17c47.3 18.7 87.8 47\n121.5 85s56.5 81.3 68.5 130c0.7 2 1.3 5 2 9s1.2 6.7 1.5 8c0.3 1.3 1 3.3 2 6\ns2.2 4.5 3.5 5.5c1.3 1 3.3 1.8 6 2.5s6 1 10 1c14 0 21 -3.7 21 -11\nc0 -2 -2 -10.3 -6 -25c-20 -79.3 -65 -146.7 -135 -202l-3 -3h399890z\nM100 620v40h399900v-40z M0 241v40h399900v-40zM0 241v40h399900v-40z`,\n\n  // Rightarrowabovebar is mostly from glyph U+2192, KaTeX Main\n  rightarrowabovebar: `M0 241v40h399891c-47.3 35.3-84 78-110 128-16.7 32\n-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20 11 8 0\n13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7 39\n-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85-40.5\n-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5\n-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67\n151.7 139 205zm96 379h399894v40H0zm0 0h399904v40H0z`,\n\n  // The short left harpoon has 0.5em (i.e. 500 units) kern on the left end.\n  // Ref from mhchem.sty: \\rlap{\\raisebox{-.22ex}{$\\kern0.5em\n  baraboveshortleftharpoon: `M507,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11\nc1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17\nc2,0.7,5,1,9,1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21\nc-32,-87.3,-82.7,-157.7,-152,-211c0,0,-3,-3,-3,-3l399351,0l0,-40\nc-398570,0,-399437,0,-399437,0z M593 435 v40 H399500 v-40z\nM0 281 v-40 H399908 v40z M0 281 v-40 H399908 v40z`,\n\n  rightharpoonaboveshortbar: `M0,241 l0,40c399126,0,399993,0,399993,0\nc4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,\n-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6\nc-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z\nM0 241 v40 H399908 v-40z M0 475 v-40 H399500 v40z M0 475 v-40 H399500 v40z`,\n\n  shortbaraboveleftharpoon: `M7,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11\nc1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17c2,0.7,5,1,9,\n1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21c-32,-87.3,-82.7,-157.7,\n-152,-211c0,0,-3,-3,-3,-3l399907,0l0,-40c-399126,0,-399993,0,-399993,0z\nM93 435 v40 H400000 v-40z M500 241 v40 H400000 v-40z M500 241 v40 H400000 v-40z`,\n\n  shortrightharpoonabovebar: `M53,241l0,40c398570,0,399437,0,399437,0\nc4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,\n-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6\nc-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z\nM500 241 v40 H399408 v-40z M500 435 v40 H400000 v-40z`,\n};\n\n/**\n * Generate the HTML markup to represent a SVG span.\n *\n */\nexport function svgBodyToMarkup(svgBodyName: string): string {\n  if (SVG_ACCENTS[svgBodyName]) {\n    const height = SVG_ACCENTS[svgBodyName][2];\n    const result =\n      `<span class=\"stretchy\" style=\"height:${height}em\">` +\n      `<svg width=\"100%\" height=\"${height}em\"` +\n      `viewBox=\"0 0 ${SVG_ACCENTS[svgBodyName][0]} ${SVG_ACCENTS[svgBodyName][1]}\"` +\n      `preserveAspectRatio=\"none\">` +\n      `<path d=\"${PATHS[svgBodyName]}\"></path>` +\n      `</svg></span>`;\n    return `<span style=\"height:${height}em;min-width:0\">${result}</span>`;\n  }\n\n  const [paths, minWidth, viewBoxHeight, align] = SVG_BODY[svgBodyName];\n  let widthClasses: string[];\n  let aligns: string[];\n  const height = viewBoxHeight / 1000;\n  if (paths.length === 3) {\n    widthClasses = ['slice-1-of-3', 'slice-2-of-3', 'slice-3-of-3'];\n    aligns = ['xMinYMin', 'xMidYMin', 'xMaxYMin'];\n  } else if (paths.length === 2) {\n    widthClasses = ['slice-1-of-2', 'slice-2-of-2'];\n    aligns = ['xMinYMin', 'xMaxYMin'];\n  } else {\n    widthClasses = ['slice-1-of-1'];\n    aligns = [align];\n  }\n\n  const body = paths\n    .map(\n      (path: string | number, i: string | number) =>\n        `<span class=\"${widthClasses[i] as string}\" style=height:${height}em>` +\n        `<svg width=400em height=${height}em ` +\n        `viewBox=\"0 0 400000 ${viewBoxHeight}\" ` +\n        `preserveAspectRatio=\"${aligns[i]} slice\">` +\n        `<path d=\"${PATHS[path]}\"></path>` +\n        `</svg></span>`\n    )\n    .join('');\n  return `<span style=\"display:inline-block;height:${height}em;min-width:${minWidth}em;\">${body}</span>`;\n}\n\nexport function svgBodyHeight(svgBodyName: string): number {\n  if (SVG_BODY[svgBodyName]) {\n    return SVG_BODY[svgBodyName][2] / 1000;\n  }\n\n  return SVG_ACCENTS[svgBodyName][2];\n}\n","import {\n  ErrorListener,\n  Style,\n  MacroDictionary,\n  ParserErrorCode,\n  ParseMode,\n} from '../public/core';\n\nimport type { Span } from './span';\nimport type { Token } from './tokenizer';\nimport type { ArgumentType } from './context';\nimport type { GroupAtom } from '../core-atoms/group';\nimport { Atom, ToLatexOptions } from './atom';\n\nexport interface ParseTokensOptions {\n  args: (string | Atom[])[];\n  macros: MacroDictionary;\n  smartFence: boolean;\n  style: Style;\n  parse: (\n    mode: ArgumentType,\n    tokens: Token[],\n    options: ParseTokensOptions\n  ) => [Atom[], Token[]];\n}\n\nexport class Mode {\n  static _registry: Record<string, Mode> = {};\n  constructor(name: string) {\n    Mode._registry[name] = this;\n  }\n\n  static createAtom(mode: ParseMode, command: string, style: Style): Atom {\n    return Mode._registry[mode].createAtom(command, style);\n  }\n\n  static parseTokens(\n    mode: ParseMode,\n    tokens: Token[],\n    onError: ErrorListener<ParserErrorCode>,\n    options: ParseTokensOptions\n  ): Atom[] {\n    return Mode._registry[mode].parseTokens(tokens, onError, options);\n  }\n\n  // `run` should be a run (sequence) of atoms all with the same\n  // mode\n  static toLatex(run: Atom[], options: ToLatexOptions): string {\n    console.assert(run.length > 0);\n    const mode = Mode._registry[run[0].mode];\n    return mode.toLatex(run, options);\n  }\n\n  static applyStyle(mode: ParseMode, span: Span, style: Style): string {\n    return Mode._registry[mode].applyStyle(span, style);\n  }\n\n  createAtom(_command: string, _style: Style): Atom | null {\n    return null;\n  }\n\n  parseTokens(\n    _tokens: Token[],\n    _onError: ErrorListener<ParserErrorCode>,\n    _options: ParseTokensOptions\n  ): Atom[] | null {\n    return null;\n  }\n\n  toLatex(_run: Atom[], _options: ToLatexOptions): string {\n    return '';\n  }\n\n  /*\n   * Apply the styling (bold, italic, etc..) as classes to the span, and return\n   * the effective font name to be used for metrics\n   * ('Main-Regular', 'Caligraphic-Regualr' etc...)\n   */\n  applyStyle(_span: Span, _style: Style): string {\n    return '';\n  }\n}\n\n/*\n * Return an array of runs with the same mode\n */\nexport function getModeRuns(atoms: Atom[]): Atom[][] {\n  const result = [];\n  let run = [];\n  let currentMode = 'NONE';\n  for (const atom of atoms) {\n    if (atom.type !== 'first') {\n      if (atom.mode !== currentMode) {\n        if (run.length > 0) result.push(run);\n        run = [atom];\n        currentMode = atom.mode;\n      } else {\n        run.push(atom);\n      }\n    }\n  }\n  // Push whatever is left\n  if (run.length > 0) result.push(run);\n  return result;\n}\n\n/*\n * Return an array of runs (array of atoms with the same value\n *   for the specified property)\n */\nexport function getPropertyRuns(atoms: Atom[], property: string): Atom[][] {\n  const result = [];\n  let run = [];\n  let currentValue: string;\n  for (const atom of atoms) {\n    if (atom.type !== 'first') {\n      let value: string;\n      if (property === 'variant') {\n        value = atom.style.variant;\n        if (atom.style.variantStyle && atom.style.variantStyle !== 'up') {\n          value += '-' + atom.style.variantStyle;\n        }\n      } else if (property === 'cssClass') {\n        if (atom.type === 'group') {\n          value = (atom as GroupAtom).customClass;\n        }\n      } else {\n        value = atom.style[property];\n      }\n\n      if (value === currentValue) {\n        // Same value, add it to the current run\n        run.push(atom);\n      } else {\n        // The value of property for this atom is different from the\n        // current value, start a new run\n        if (run.length > 0) result.push(run);\n        run = [atom];\n        currentValue = value;\n      }\n    }\n  }\n\n  // Push whatever is left\n  if (run.length > 0) result.push(run);\n  return result;\n}\n","import { isArray } from '../common/types';\n\nimport { Style, ParseMode } from '../public/core';\nimport { getCharacterMetrics, METRICS } from './font-metrics';\nimport { svgBodyToMarkup, svgBodyHeight } from './svg-span';\nimport { Mode } from './modes-utils';\nimport { Context } from './context';\n\n/*\n * See https://tex.stackexchange.com/questions/81752/\n * for a thorough description of the TeXt atom type and their relevance to\n * proper kerning.\n */\n\nconst SPAN_TYPE = [\n  '',\n  'chem',\n  'mord',\n  'mbin',\n  'mop',\n  'mrel',\n  'mopen',\n  'mclose',\n  'mpunct',\n  'minner',\n  'spacing',\n  'first',\n  'latex',\n  'composition',\n  'error',\n  'placeholder',\n  'supsub',\n  'none',\n] as const; // The const assertion prevents widening to string[]\nexport type SpanType = typeof SPAN_TYPE[number];\n\nexport function isSpanType(type: string): type is SpanType {\n  return ((SPAN_TYPE as unknown) as string[]).includes(type);\n}\n\n/*\n * See http://www.tug.org/TUGboat/tb30-3/tb96vieth.pdf for\n * typesetting conventions for mathematical physics (units, etc...)\n */\n\nconst INTER_ATOM_SPACING = {\n  'mord+mop': 3,\n  'mord+mbin': 4,\n  'mord+mrel': 5,\n  'mord+minner': 3,\n\n  'mop+mord': 3,\n  'mop+mop': 3,\n  'mop+mbin': 5,\n  'mop+minner': 3,\n\n  'mbin+mord': 4,\n  'mbin+mop': 4,\n  'mbin+mopen': 4,\n  'mbin+minner': 4,\n\n  'mrel+mord': 5,\n  'mrel+mop': 5,\n  'mrel+mopen': 5,\n  'mrel+minner': 5,\n\n  'mclose+mop': 3,\n  'mclose+mbin': 4,\n  'mclose+mrel': 5,\n  'mclose+minner': 3,\n\n  'mpunct+mord': 3,\n  'mpunct+mop': 3,\n  'mpunct+mbin': 4,\n  'mpunct+mrel': 5,\n  'mpunct+mopen': 3,\n  'mpunct+mpunct': 3,\n  'mpunct+minner': 3,\n};\n\nconst INTER_ATOM_TIGHT_SPACING = {\n  'mord+mop': 3,\n  'mop+mord': 3,\n  'mop+mop': 3,\n  'mclose+mop': 3,\n  'minner+mop': 3,\n};\n\n/**\n * Return a string made up of the concatenated arguments.\n * Each arguments can be either a string, which is unchanged,\n * or a number, which is converted to a string with at most 2 fractional digits.\n *\n */\nfunction toString(arg: (string | number)[] | string | number): string {\n  if (typeof arg === 'string') {\n    return arg;\n  }\n\n  if (typeof arg === 'number') {\n    return Number(Math.ceil(1e2 * arg) / 1e2).toString();\n  }\n\n  if (arg === undefined) {\n    return '';\n  }\n\n  if (isArray<string | number>(arg)) {\n    let result = '';\n    for (const element of arg) {\n      result += toString(element);\n    }\n\n    return result;\n    // } else if (arg) {\n    //     result += (arg as number).toString();\n  }\n\n  console.error('Span.toStringUnexpected argument type');\n  return '';\n}\n\n//----------------------------------------------------------------------------\n// SPAN\n//----------------------------------------------------------------------------\n/**\n * A span is the most elementary element that can be rendered.\n * It is composed of an optional body of text and an optional list\n * of children (other spans). Each span can be decorated with\n * CSS classes and style attributes.\n *\n * @param content the items 'contained' by this node\n * @param classes list of classes attributes associated with this node\n\n\n * @property  type - For example, `'latex'`, `'mrel'`, etc...\n * @property classes - A string of space separated CSS classes\n * associated with this element\n * @property cssId - A CSS ID assigned to this span (optional)\n * @property htmlData - data fields assigned to this span (optional)\n * @property children - An array, potentially empty, of spans which\n * this span encloses\n * @property body - Content of this span. Can be empty.\n * @property cssProperties - A set of key/value pairs specifying CSS properties\n * associated with this element.\n * @property height - The measurement from baseline to top, in em.\n * @property depth - The measurement from baseline to bottom, in em.\n * @property width\n */\nexport class Span {\n  type: SpanType;\n\n  children?: Span[];\n  value: string;\n\n  classes: string;\n  delim?: string; // @revisit\n\n  caret: ParseMode;\n  isSelected: boolean;\n\n  height?: number;\n  depth?: number;\n  skew?: number;\n  italic?: number;\n  maxFontSize: number;\n\n  isTight?: boolean;\n\n  cssId?: string;\n  htmlData?: string;\n\n  svgBody?: string;\n  svgOverlay?: string;\n  svgStyle?: string;\n\n  private cssProperties: Record<string, string>;\n  attributes?: Record<string, string>; // HTML attributes, for example 'data-atom-id'\n\n  /**\n   * If a `style` option is provided, a `mode` must also be provided.\n   */\n  constructor(\n    content: null | string | Span | (Span | null)[],\n    options?: {\n      classes?: string;\n      type?: SpanType;\n      mode?: ParseMode;\n      style?: Style;\n    }\n  ) {\n    if (typeof content === 'string') {\n      this.value = content;\n    } else if (isArray<Span | null>(content)) {\n      this.children = content.filter((x) => x !== null);\n      // if (this.children.length === 0) this.children = undefined;\n    } else if (content && content instanceof Span) {\n      this.children = [content];\n    }\n\n    this.type = options?.type;\n    this.isSelected = false;\n    this.maxFontSize = 0;\n\n    // CSS style, as a set of key value pairs.\n    // Use `Span.setStyle()` to modify it.\n    this.cssProperties = null;\n\n    // Apply color\n    if (options?.style?.color) {\n      if (options.style.color === 'none') {\n        this.setStyle('color', '');\n      } else {\n        this.setStyle('color', options.style.color);\n      }\n    }\n\n    if (options?.style?.backgroundColor) {\n      if (options.style.backgroundColor === 'none') {\n        this.setStyle('background-color', '');\n      } else {\n        this.setStyle('background-color', options.style.backgroundColor);\n      }\n    }\n\n    // Set initial classes\n    this.classes = options?.classes ?? '';\n\n    let fontName = 'Main-Regular';\n    if (options?.style && this.value) {\n      console.assert(\n        typeof options.mode === 'string' && options.mode.length > 1\n      );\n      fontName = Mode.applyStyle(options.mode, this, options.style);\n    }\n\n    // Calculate the dimensions of this span based on its children\n    // assuming they are laid out horizontally\n    if (this.type === 'latex') {\n      this.height = 0.8;\n      this.depth = 0.2;\n    } else if (this.children) {\n      let height = -Infinity;\n      let depth = -Infinity;\n      let maxFontSize = -Infinity;\n      for (const child of this.children) {\n        if (child.height > height) height = child.height;\n        if (child.depth > depth) depth = child.depth;\n        if (child.maxFontSize > maxFontSize) maxFontSize = child.maxFontSize;\n      }\n      this.height = height;\n      this.depth = depth;\n      this.maxFontSize = maxFontSize;\n    } else if (this.value && this.value.length > 0) {\n      // Get the metrics information\n      this.maxFontSize =\n        {\n          size1: 0.5,\n          size2: 0.7,\n          size3: 0.8,\n          size4: 0.9,\n          size5: 1,\n          size6: 1.2,\n          size7: 1.44,\n          size8: 1.73,\n          size9: 2.07,\n          size10: 2.49,\n        }[options?.style?.fontSize] ?? 1;\n      this.height = 0;\n      this.depth = 0;\n      this.skew = 0;\n      this.italic = 0;\n      for (let i = 0; i < this.value.length; i++) {\n        const metrics = getCharacterMetrics(\n          this.value.codePointAt(i),\n          fontName ?? 'Main-Regular'\n        );\n        // If we were able to get metrics info for this character, store it.\n        if (metrics) {\n          this.height = metrics.height;\n          this.depth = metrics.depth;\n          this.skew = metrics.skew;\n          this.italic = metrics.italic;\n        }\n      }\n    } else if (this.value) {\n      this.height = METRICS.baselineskip;\n      this.depth = 0;\n    } else {\n      this.height = 0;\n      this.depth = 0;\n    }\n  }\n\n  selected(isSelected: boolean): void {\n    this.isSelected = isSelected;\n    if (this.children) {\n      for (const child of this.children) {\n        child.selected(isSelected);\n      }\n    }\n  }\n\n  /**\n   * Set the value of a CSS property associated with this span.\n   * For example, setStyle('border-right', 5.6, 'em');\n   *\n   * @param prop the CSS property to set\n   * @param value a series of strings and numbers that will be concatenated.\n   */\n  setStyle(prop: string, ...value: (string | number)[]): void {\n    const v = toString(value);\n    if (v.length > 0) {\n      if (!this.cssProperties) this.cssProperties = {};\n      this.cssProperties[prop] = v;\n    }\n  }\n\n  setTop(top: number): void {\n    if (Number.isFinite(top) && Math.abs(top) > 1e-2) {\n      if (!this.cssProperties) this.cssProperties = {};\n      this.cssProperties.top = toString(top) + 'em';\n      this.height -= top;\n      this.depth += top;\n    }\n  }\n\n  get left(): number {\n    if (this.cssProperties?.['margin-left']) {\n      return Number.parseFloat(this.cssProperties['margin-left']);\n    }\n\n    return 0;\n  }\n\n  set left(value: number) {\n    if (!Number.isFinite(value)) return;\n    if (!this.cssProperties) this.cssProperties = {};\n    if (value === 0) {\n      delete this.cssProperties['margin-left'];\n    } else {\n      this.cssProperties['margin-left'] = toString(value) + 'em';\n    }\n  }\n\n  set right(value: number) {\n    if (!Number.isFinite(value)) return;\n    if (!this.cssProperties) this.cssProperties = {};\n    if (value === 0) {\n      delete this.cssProperties['margin-right'];\n    } else {\n      this.cssProperties['margin-right'] = toString(value) + 'em';\n    }\n  }\n\n  set width(value: number) {\n    if (!this.cssProperties) this.cssProperties = {};\n    this.cssProperties.width = toString(value) + 'em';\n  }\n\n  /**\n   * Generate the HTML markup to represent this span.\n   *\n   * @param hskip - Space (in mu, 1/18em) to leave on the left side\n   * of the span.\n   * This is used to adjust the inter-spacing between spans of different types,\n   * e.g. 'bin' and 'rel', according to the TeX rules (TexBook p.170)\n   *\n   * @param hscale - If a value is provided, the margins are scaled by\n   * this factor.\n   *\n   * @return HTML markup\n   */\n\n  toMarkup(\n    options: { hskip?: number; hscale?: number } = {\n      hskip: 0,\n      hscale: 1,\n    }\n  ): string {\n    let result = '';\n    let body = this.value ?? '';\n\n    //\n    // 1. Calculate the spacing between spans, based on their type\n    // (`mord`, `mbin`, `mrel`, etc...)\n    //\n    if (this.children) {\n      let previousType: SpanType = 'none';\n      for (let i = 0; i < this.children.length; i++) {\n        const child = this.children[i];\n        let spacing = 0;\n        const type = getEffectiveType(this.children, i);\n        const combinedType = `${previousType}+${type}`;\n        spacing = child.isTight\n          ? INTER_ATOM_TIGHT_SPACING[combinedType] ?? 0\n          : INTER_ATOM_SPACING[combinedType] ?? 0;\n        body += child.toMarkup({\n          hskip: spacing,\n          hscale: options.hscale,\n        });\n        if (type !== 'supsub') previousType = type;\n      }\n    }\n\n    if (\n      (body === '\\u200B' || (!body && !this.svgBody)) &&\n      !this.classes &&\n      !this.cssId &&\n      !this.htmlData &&\n      !this.cssProperties &&\n      !this.svgOverlay\n    ) {\n      // 2a. Collapse 'empty' spans\n      result = '';\n    } else {\n      // Note: We can't omit the tag, even if it has no class and no style,\n      // as some layouts (vlist) depends on the presence of the tag to function\n      result = '<span';\n\n      if (this.cssId) {\n        // A (HTML5) CSS id may not contain a space\n        result += ` id=${this.cssId.replace(/ /g, '-')} `;\n      }\n\n      if (this.htmlData) {\n        const entries = this.htmlData.split(',');\n        for (const entry of entries) {\n          const matched = entry.match(/([^=]+)=(.+$)/);\n          if (matched) {\n            const key = matched[1].trim().replace(/ /g, '-');\n            if (key) {\n              result += ` data-${key}=${matched[2]} `;\n            }\n          } else {\n            const key = entry.trim().replace(/ /g, '-');\n            if (key) {\n              result += ` data-${key} `;\n            }\n          }\n        }\n      }\n\n      if (this.attributes) {\n        result +=\n          ' ' +\n          Object.keys(this.attributes)\n            .map((x) => `${x}=\"${this.attributes[x]}\"`)\n            .join(' ');\n      }\n\n      const classes = this.classes.split(' ');\n\n      // Add the type (mbin, mrel, etc...) if specified\n      classes.push(\n        {\n          latex: 'ML__latex',\n          placeholder: 'ML__placeholder',\n          error: 'ML__error',\n        }[this.type] ?? ''\n      );\n      if (this.caret === 'latex') {\n        classes.push('ML__latex-caret');\n      }\n\n      // Remove duplicate and empty classes\n      let classList = '';\n      classList =\n        classes.length > 1\n          ? classes\n              .filter((x, e, a) => {\n                return x.length > 0 && a.indexOf(x) === e;\n              })\n              .join(' ')\n          : classes[0];\n\n      if (classList.length > 0) {\n        result += ` class=\"${classList}\"`;\n      }\n\n      // If a `hskip` value was provided, add it to the margin-left\n      if (options.hskip) {\n        this.left += options.hskip / 18;\n      }\n\n      if (this.cssProperties) {\n        const styleString = Object.keys(this.cssProperties)\n          .map((x) => {\n            // Render the style property, except the background\n            // of selected spans\n            if (x === 'background-color' && this.isSelected) {\n              return '';\n            }\n\n            return x + ':' + this.cssProperties[x];\n          })\n          .join(';');\n\n        if (styleString.length > 0) {\n          result += ' style=\"' + styleString + '\"';\n        }\n      }\n\n      result += '>';\n\n      // If there is some SVG markup associated with this span,\n      // include it now\n      if (this.svgBody) {\n        result += svgBodyToMarkup(this.svgBody);\n      } else if (this.svgOverlay) {\n        result += '<span style=\"';\n        result += 'display: inline-block;';\n        result += `height:${this.height + this.depth}em;`;\n        result += `vertical-align:${this.depth}em;`;\n        result += '\">';\n        result += body;\n        result += '</span>';\n        result += '<svg ';\n        result += 'style=\"position:absolute;';\n        result += 'overflow:overlay;';\n        result += `height:${this.height + this.depth}em;`;\n        if (this.cssProperties?.padding) {\n          result += `top:${this.cssProperties.padding};`;\n          result += `left:{this.style.padding};`;\n          result += `width:calc(100% - 2 * ${this.cssProperties.padding} );`;\n        } else {\n          result += 'top:0;';\n          result += 'left:0;';\n          result += 'width:100%;';\n        }\n\n        result += 'z-index:2;';\n        result += '\"';\n        if (this.svgStyle) {\n          result += ' style=\"' + this.svgStyle + '\"';\n        }\n\n        result += '>';\n        result += this.svgOverlay;\n        result += '</svg>';\n      } else {\n        result += body;\n      }\n\n      result += '</span>';\n    }\n\n    //\n    // Add markup for the caret\n    //\n    if (this.caret === 'text') {\n      result += '<span class=\"ML__text-caret\"></span>';\n    } else if (this.caret === 'math') {\n      result += '<span class=\"ML__caret\"></span>';\n    }\n\n    return result;\n  }\n\n  /**\n   * Can this span be coalesced with 'span'?\n   * This is used to 'coalesce' (i.e. group together) a series of spans that are\n   * identical except for their value, and to avoid generating redundant spans.\n   * That is: '12' ->\n   *      \"<span class='mord mathrm'>12</span>\"\n   * rather than:\n   *      \"<span class='mord mathrm'>1</span><span class='mord mathrm'>2</span>\"\n   */\n  tryCoalesceWith(span: Span): boolean {\n    // Don't coalesce if the types are different\n    if (this.type !== span.type) return false;\n\n    // Don't coalesce consecutive errors, placeholders or raw latex\n    if (\n      this.type === 'error' ||\n      this.type === 'placeholder' ||\n      this.type === 'latex'\n    ) {\n      return false;\n    }\n\n    // Don't coalesce if some of the content is SVG\n    if (this.svgBody || !this.value) return false;\n    if (span.svgBody || !span.value) return false;\n\n    // If this span or the candidate span have children, we can't\n    // coalesce them, but we'll try to coalesce their children\n    const hasChildren = this.children && this.children.length > 0;\n    const spanHasChildren = span.children && span.children.length > 0;\n    if (hasChildren || spanHasChildren) return false;\n\n    // If they have a different number of styles, can't coalesce\n    const thisStyleCount = this.cssProperties ? this.cssProperties.length : 0;\n    const spanStyleCount = span.cssProperties ? span.cssProperties.length : 0;\n    if (thisStyleCount !== spanStyleCount) return false;\n\n    // For the purpose of our comparison,\n    // any 'empty' classes (whitespace)\n    const classes = this.classes.trim().replace(/\\s+/g, ' ').split(' ');\n    const spanClasses = span.classes.trim().replace(/\\s+/g, ' ').split(' ');\n\n    // If they have a different number of classes, can't coalesce\n    if (classes.length !== spanClasses.length) return false;\n\n    // OK, let's do the more expensive comparison now.\n    // If they have different classes, can't coalesce\n    classes.sort();\n    spanClasses.sort();\n    for (const [i, class_] of classes.entries()) {\n      // Don't coalesce vertical separators\n      // (used in column formating with {l||r} for example\n      if (class_ === 'vertical-separator') return false;\n      if (class_ !== spanClasses[i]) return false;\n    }\n\n    // If the styles are different, can't coalesce\n    if (this.cssProperties && span.cssProperties) {\n      for (const style in this.cssProperties) {\n        if (\n          Object.prototype.hasOwnProperty.call(this.cssProperties, style) &&\n          Object.prototype.hasOwnProperty.call(span.cssProperties, style)\n        ) {\n          if (this.cssProperties[style] !== span.cssProperties[style]) {\n            return false;\n          }\n        }\n      }\n    }\n\n    // OK, the attributes of those spans are compatible.\n    // Merge span into this\n    this.value += span.value;\n    this.height = Math.max(this.height, span.height);\n    this.depth = Math.max(this.depth, span.depth);\n    this.maxFontSize = Math.max(this.maxFontSize, span.maxFontSize);\n    // The italic correction for the coalesced spans is the\n    // italic correction of the last span.\n    this.italic = span.italic;\n    return true;\n  }\n}\n\nfunction getEffectiveType(xs: Span[], i: number): SpanType {\n  if (i < 0 || i >= xs.length) return 'none';\n\n  let result: SpanType = xs[i].type ?? 'none';\n\n  // The effective type of a 'supsub' span is 'supsub':\n  // it attaches directly to its left sibling\n  if (result === 'supsub') return 'supsub';\n\n  if (result === 'first') return 'none';\n\n  if (result === 'mbin') {\n    const previousType: SpanType = xs[i - 1]?.type ?? 'none';\n    const nextType = xs[i + 1]?.type ?? 'none';\n\n    // If a `mbin` span, i.e. \"+\" is after or before spans\n    // of a certain type, consider it to be a `mord` instead.\n    // This is to handle proper spacing of, e.g. \"-4\" vs \"1-4\"\n    if (\n      /first|none|mrel|mpunct|mopen|mbin|mop/.test(previousType) ||\n      /none|mrel|mpunct|mclose/.test(nextType)\n    ) {\n      result = 'mord';\n    }\n  }\n\n  return result;\n}\n\n/**\n * Attempts to coalesce (merge) spans, for example consecutive text spans.\n * Return a new tree with coalesced spans.\n *\n */\nfunction coalesceRecursive(spans: Span[]): Span[] {\n  if (!spans || spans.length === 0) return [];\n\n  spans[0].children = coalesceRecursive(spans[0].children);\n  const result = [spans[0]];\n\n  for (let i = 1; i < spans.length; i++) {\n    if (!result[result.length - 1].tryCoalesceWith(spans[i])) {\n      spans[i].children = coalesceRecursive(spans[i].children);\n      result.push(spans[i]);\n    }\n  }\n\n  return result;\n}\n\nexport function coalesce(span: Span): Span {\n  if (span.children) span.children = coalesceRecursive(span.children);\n  return span;\n}\n\n//----------------------------------------------------------------------------\n// UTILITY FUNCTIONS\n//----------------------------------------------------------------------------\n\nexport function height(spans: Span[]): number {\n  return spans.reduce((acc: number, x: Span) => Math.max(acc, x.height), 0);\n}\n\nexport function depth(spans: Span[]): number {\n  return spans.reduce((acc: number, x: Span) => Math.max(acc, x.depth), 0);\n}\n\nexport function skew(spans: Span | Span[]): number {\n  if (!spans) return 0;\n  if (isArray<Span>(spans)) {\n    let result = 0;\n    for (const span of spans) {\n      result += span.skew || 0;\n    }\n\n    return result;\n  }\n\n  return spans.skew;\n}\n\nexport function italic(spans: Span | Span[]): number {\n  if (!spans) return 0;\n  if (isArray<Span>(spans)) {\n    return spans[spans.length - 1].italic ?? 0;\n  }\n\n  return spans.italic ?? 0;\n}\n\nexport function makeSymbol(\n  fontFamily: string,\n  symbol: number,\n  options?: {\n    classes?: string;\n    type?: SpanType;\n  }\n): Span {\n  const base = new Span(String.fromCodePoint(symbol), options);\n\n  const metrics = getCharacterMetrics(symbol, fontFamily);\n  base.height = metrics.height;\n  base.depth = metrics.depth;\n  base.skew = metrics.skew;\n  base.italic = metrics.italic;\n  base.right = metrics.italic;\n  // // Wrap the result symbol:\n  // // This allow us to account for the italic correction in the bounding box\n  // // e.g. for `\\int`\n  // const result = new Span(base, options);\n  // result.height = metrics.height;\n  // result.depth = metrics.depth;\n  // result.skew = metrics.skew;\n  // result.italic = metrics.italic;\n  // result.right = metrics.italic;\n  return base;\n}\n\n/**\n * Makes an element placed in each of the vlist elements to ensure that each\n * element has the same max font size. To do this, we create a zero-width space\n * with the correct font size.\n//  * Note: without this, even when fontSize = 0, the fraction bar is no\n//  * longer positioned correctly\n */\nfunction makeFontSizer(context: Context, fontSize: number): Span | null {\n  const fontSizeAdjustment = fontSize\n    ? fontSize / context.mathstyle.sizeMultiplier\n    : 0;\n  const fontSizeInner = new Span('\\u200B'); // ZERO WIDTH SPACE\n  fontSizeInner.depth = 0;\n  fontSizeInner.height = 0;\n  if (fontSizeAdjustment !== 1) {\n    fontSizeInner.setStyle(\n      'font-size',\n      fontSizeAdjustment,\n      fontSizeAdjustment > 0 ? 'em' : ''\n    );\n    fontSizeInner.attributes = {\n      'aria-hidden': 'true',\n    };\n  }\n\n  if (context.size !== 'size5') {\n    return new Span(fontSizeInner, {\n      classes: 'sz-set reset-' + context.size + ' size5',\n    });\n  }\n\n  return fontSizeAdjustment !== 0 ? fontSizeInner : null;\n}\n\nexport function makeStruts(\n  content: Span,\n  options: {\n    classes: string;\n    type?: SpanType;\n  }\n): Span {\n  const topStrut = new Span(null, { classes: 'ML__strut' });\n  topStrut.setStyle('height', Math.max(0, content.height), 'em');\n  const struts = [topStrut];\n\n  if (content.depth !== 0) {\n    const bottomStrut = new Span(null, { classes: 'ML__strut--bottom' });\n    bottomStrut.setStyle('height', content.height + content.depth, 'em');\n    bottomStrut.setStyle('vertical-align', -content.depth, 'em');\n    struts.push(bottomStrut);\n  }\n\n  struts.push(content);\n  return new Span(struts, options);\n}\n\n/**\n * Add some SVG markup to be overlaid on top of the span\n */\nexport function addSVGOverlay(\n  body: Span,\n  svgMarkup: string,\n  svgStyle: string\n): Span {\n  body.svgOverlay = svgMarkup;\n  body.svgStyle = svgStyle;\n  return body;\n}\n\nexport function makeHlist(\n  spans: Span | Span[],\n  options?: {\n    classes?: string;\n    type?: SpanType;\n    mode?: ParseMode;\n    style?: Style;\n  }\n): Span {\n  // Note: do not try to optimize and avoid creating the span below\n  // Some layouts, e.g. vlist, depend on that span being there.\n\n  const result = new Span(spans, options);\n\n  // Apply the scaling factor to the height/depth\n  let factor = 0;\n  factor =\n    spans instanceof Span\n      ? spans.maxFontSize\n      : result.children.reduce(\n          (acc, x) => Math.max(acc, x.maxFontSize),\n          factor\n        );\n  result.height *= factor;\n  result.depth *= factor;\n\n  return result;\n}\n\n// function normalizeVlist(\n//   posMethod: 'shift' | 'top' | 'bottom' | 'individualShift' = 'shift',\n//   elements: (number | Span)[]\n// ): [(number | Span)[], number] {\n//   if (posMethod === 'individualShift') {\n//     const oldChildren = elements;\n//     const children: (number | Span)[] = [oldChildren[0]];\n\n//     // Add in kerns to the list of params.children to get each element to be\n//     // shifted to the correct specified shift\n//     const depth = -oldChildren[0].shift - oldChildren[0].elem.depth;\n//     let currPos = depth;\n//     for (let i = 1; i < oldChildren.length; i++) {\n//       const diff = -oldChildren[i].shift - currPos - oldChildren[i].elem.depth;\n//       const size =\n//         diff - (oldChildren[i - 1].elem.height + oldChildren[i - 1].elem.depth);\n\n//       currPos = currPos + diff;\n\n//       children.push({ type: 'kern', size });\n//       children.push(oldChildren[i]);\n//     }\n\n//     return [children, depth];\n//   }\n\n//   let depth;\n//   if (posMethod === 'top') {\n//     // We always start at the bottom, so calculate the bottom by adding up\n//     // all the sizes\n//     let bottom = params.positionData;\n//     for (let i = 0; i < params.children.length; i++) {\n//       const child = params.children[i];\n//       bottom -=\n//         child.type === 'kern'\n//           ? child.size\n//           : child.elem.height + child.elem.depth;\n//     }\n//     depth = bottom;\n//   } else if (posMethod === 'bottom') {\n//     depth = -params.positionData;\n//   } else {\n//     const firstChild = params.children[0];\n//     console.assert(firstChild.type === 'elem');\n//     if (posMethod === 'shift') {\n//       depth = -firstChild.elem.depth - params.positionData;\n//     } else if (posMethod === 'firstBaseline') {\n//       depth = -firstChild.elem.depth;\n//     }\n//   }\n//   return [elements, depth];\n// }\n\n/**\n * Create a new span of type `vlist`, a set of vertically stacked items\n * @param elements  An array of Span and integer. The integer can be either some kerning information\n * or the value of an individual shift of the preceding child if in 'individualShift' mode\n * @param posMethod The method that will be used to position the elements in the vlist.\n *\n * One of:\n * - `\"individualShift\"`: each child must be followed by a number indicating how much to shift it (i.e. moved downwards)\n * - `\"top\"`: posData specifies the topmost point of the vlist (>0 move up)\n * - `\"bottom\"`: posData specifies the bottommost point of the vlist (>0 move down)\n * - `\"shift\"`: the baseline of the vlist will be positioned posData away from the baseline\n * of the first child. (>0 moves down)\n */\nexport function makeVlist(\n  context: Context,\n  elements: ([Span, number] | number | Span)[],\n  posMethod: 'shift' | 'top' | 'bottom' | 'individualShift' = 'shift',\n  options?: {\n    initialPos?: number;\n    classes?: string;\n  }\n): Span {\n  let minPos = 0; // <0 if below the baseline\n  let pos = 0;\n  const initialPos = options?.initialPos ?? 0;\n\n  if (posMethod === 'shift') {\n    if (elements[0] instanceof Span) {\n      minPos = -elements[0].depth - initialPos;\n    } else {\n      minPos = -initialPos;\n    }\n  } else if (posMethod === 'bottom') {\n    minPos = -initialPos;\n  } else if (posMethod === 'top') {\n    let bottom = initialPos;\n    for (const element of elements) {\n      if (element instanceof Span) {\n        // It's a Span, use the dimension data\n        bottom -= element.height + element.depth;\n      } else if (typeof element === 'number') {\n        // It's a kern adjustment\n        bottom -= element;\n      }\n    }\n\n    minPos = bottom;\n  } else if (posMethod === 'individualShift') {\n    // Individual adjustment to each elements.\n    // The elements list is made up of a Span followed\n    // by a shift adjustment as an integer\n    const originalElements: [Span, number][] = elements as [Span, number][];\n    console.assert(originalElements[0][0] instanceof Span);\n    elements = [originalElements[0][0]];\n\n    // Add in kerns to the list of elements to get each element to be\n    // shifted to the correct specified shift\n    minPos = -originalElements[0][1] - originalElements[0][0].depth;\n    pos = minPos;\n    for (let i = 1; i < originalElements.length; i += 1) {\n      const diff = -originalElements[i][1] - pos - originalElements[i][0].depth;\n      pos += diff;\n\n      const kern =\n        diff -\n        (originalElements[i - 1][0].height + originalElements[i - 1][0].depth);\n\n      elements.push(kern);\n      elements.push(originalElements[i][0]);\n    }\n  }\n\n  // Make the fontSizer\n  let maxFontSize = 0;\n  for (const element of elements) {\n    if (element instanceof Span) {\n      maxFontSize = Math.max(maxFontSize, element.maxFontSize);\n    }\n  }\n\n  const fontSizer = makeFontSizer(context, maxFontSize);\n\n  const newElements: Span[] = [];\n  pos = minPos;\n  let maxPos = pos;\n  for (const element of elements) {\n    if (typeof element === 'number') {\n      // It's a kern adjustment\n      pos += element;\n    } else if (element instanceof Span) {\n      const wrap = new Span([fontSizer, element]);\n      wrap.setTop(-element.depth - pos);\n      newElements.push(wrap);\n      pos += element.height + element.depth;\n    }\n    maxPos = Math.max(maxPos, pos);\n  }\n\n  const result = new Span(newElements, {\n    classes: 'vlist ' + (options?.classes ?? ''),\n  });\n\n  // Fix the final height and depth\n  result.depth = Math.max(-minPos, result.depth ?? 0);\n  result.height = Math.max(pos, result.height ?? 0);\n\n  return result;\n}\n\n/**\n * Create a span that consist of a (stretchy) SVG element\n */\nexport function makeSVGSpan(svgBodyName: string): Span {\n  const span = new Span(null);\n  span.svgBody = svgBodyName;\n  span.height = svgBodyHeight(svgBodyName) / 2;\n  span.depth = span.height;\n  return span;\n}\n","export function stringToCodepoints(string: string): number[] {\n  const result: number[] = [];\n  for (let i = 0; i < string.length; i++) {\n    let code = string.charCodeAt(i);\n    if (code === 0x0d && string.charCodeAt(i + 1) === 0x0a) {\n      code = 0x0a;\n      i++;\n    }\n\n    if (code === 0x0d || code === 0x0c) code = 0x0a;\n    if (code === 0x00) code = 0xfffd;\n\n    // Decode a surrogate pair into an astral codepoint.\n    if (code >= 0xd800 && code <= 0xdbff) {\n      const nextCode = string.charCodeAt(i + 1);\n      if (nextCode >= 0xdc00 && nextCode <= 0xdfff) {\n        const lead = code - 0xd800;\n        const trail = nextCode - 0xdc00;\n        code = 2 ** 16 + lead * 2 ** 10 + trail;\n        // N = ((H - 0xD800) * 0x400) + (L - 0xDC00) + 0x10000;\n        i++;\n      }\n    }\n\n    result.push(code);\n  }\n\n  return result;\n}\n\nconst ZWJ = 0x200d; // Zero-width joiner\n\n// const ZWSP = 0x200b; // Zero-width space\n\n/* The following codepoints should combine with the previous ones */\nconst EMOJI_COMBINATOR = [\n  [ZWJ, 1],\n  [0xfe0e, 2], // VS-15: text presentation, VS-16: Emoji presentation\n  [0x1f3fb, 5], // EMOJI_MODIFIER_FITZPATRICK_TYPE 1-6\n  [0x1f9b0, 4], // Red hair..white hair\n  [0xe0020, 96], // EMOJI_TAG\n];\nlet emojiCombinator: Record<number, boolean>;\n\n// Regional indicator: a pair of codepoints indicating some flags\nconst REGIONAL_INDICATOR = [0x1f1e6, 0x1f1ff];\n\nfunction isEmojiCombinator(code: number): boolean {\n  if (emojiCombinator === undefined) {\n    emojiCombinator = {};\n    for (const x of EMOJI_COMBINATOR) {\n      for (let i = x[0]; i <= x[0] + x[1] - 1; i++) {\n        emojiCombinator[i] = true;\n      }\n    }\n  }\n\n  return emojiCombinator[code] ?? false;\n}\n\nfunction isRegionalIndicator(code: number): boolean {\n  return code >= REGIONAL_INDICATOR[0] && code <= REGIONAL_INDICATOR[1];\n}\n\n/**\n * Return a string or an array of graphemes.\n * This includes:\n * - emoji with skin and hair modifiers\n * - emoji combination (for example \"female pilot\")\n * - text emoji with an emoji presentation style modifier\n *      - U+1F512 U+FE0E 🔒︎\n *      - U+1F512 U+FE0F 🔒️\n * - flags represented as two regional indicator codepoints\n * - flags represented as a flag emoji + zwj + an emoji tag\n * - other combinations (for example, rainbow flag)\n */\n\nexport function splitGraphemes(string: string): string | string[] {\n  // If it's all ASCII, short-circuit the grapheme splitting...\n  if (/^[\\u0020-\\u00FF]*$/.test(string)) return string;\n\n  const result: string[] = [];\n\n  const codePoints = stringToCodepoints(string);\n  let index = 0;\n  while (index < codePoints.length) {\n    const code = codePoints[index++];\n\n    const next = codePoints[index];\n    // Combine sequences\n    if (next === ZWJ) {\n      // Zero-width joiner sequences are:\n      // ZWJ_SEQUENCE := (CHAR + ZWJ)+\n      const baseIndex = index - 1;\n      index += 2;\n      while (codePoints[index] === ZWJ) {\n        index += 2;\n      }\n\n      result.push(\n        String.fromCodePoint(\n          ...codePoints.slice(baseIndex, index - baseIndex + 1)\n        )\n      );\n    } else if (isEmojiCombinator(next)) {\n      // Combine emoji sequences\n      // See http://unicode.org/reports/tr51/#def_emoji_tag_sequence\n      const baseIndex = index - 1; // The previous character is the 'base'\n      while (isEmojiCombinator(codePoints[index])) {\n        index += codePoints[index] === ZWJ ? 2 : 1;\n      }\n\n      result.push(\n        String.fromCodePoint(...codePoints.slice(baseIndex, index - baseIndex))\n      );\n    } else if (isRegionalIndicator(code)) {\n      // Some (but not all) flags are represented by a sequence of two\n      // \"regional indicators\" codepoints.\n      index += 1;\n      result.push(String.fromCodePoint(...codePoints.slice(index - 2, 2)));\n    } else {\n      result.push(String.fromCodePoint(code));\n    }\n  }\n\n  return result;\n}\n","/**\n * ## Reference\n * TeX source code:\n * {@link  http://tug.org/texlive/devsrc/Build/source/texk/web2c/tex.web | Tex.web}\n *\n */\n\nimport { splitGraphemes } from './grapheme-splitter';\n\n// The 'special' tokens must be of length > 1 to distinguish\n// them from literals.\n// '<space>': whitespace\n// '<$$>'   : display mode shift\n// '<$>'    : inline mode shift\n// '<{>'    : begin group\n// '<}>'    : end group\n// '#0'-'#9': argument\n// '#?'     : placeholder\n// '\\' + ([a-zA-Z*]+)|([^a-zAz*])  : command\n// other (length = 1)   : literal\n//  See: [TeX:289](http://tug.org/texlive/devsrc/Build/source/texk/web2c/tex.web)\nexport type Token = string;\n\n/**\n * Given a LaTeX expression represented as a character string,\n * the Lexer class will scan and return Tokens for the lexical\n * units in the string.\n *\n * @param s A string of LaTeX\n */\nclass Tokenizer {\n  obeyspaces: boolean;\n  private readonly s: string | string[];\n  private pos: number;\n\n  constructor(s: string) {\n    this.s = splitGraphemes(s);\n    this.pos = 0;\n    this.obeyspaces = false;\n  }\n\n  /**\n   * @return True if we reached the end of the stream\n   */\n  end(): boolean {\n    return this.pos >= this.s.length;\n  }\n\n  /**\n   * Return the next char and advance\n   */\n  get(): string {\n    return this.pos < this.s.length ? this.s[this.pos++] : '';\n  }\n\n  /**\n   * Return the next char, but do not advance\n   */\n  peek(): string {\n    return this.s[this.pos];\n  }\n\n  /**\n   * Return the next substring matching regEx and advance.\n   */\n  match(regEx: RegExp): string {\n    // This.s can either be a string, if it's made up only of ASCII chars\n    // or an array of graphemes, if it's more complicated.\n    const execResult: (string | null)[] | null =\n      typeof this.s === 'string'\n        ? regEx.exec(this.s.slice(this.pos))\n        : regEx.exec(this.s.slice(this.pos).join(''));\n    if (execResult?.[0]) {\n      this.pos += execResult[0].length;\n      return execResult[0];\n    }\n\n    return null;\n  }\n\n  /**\n   * Return the next token, or null.\n   */\n  next(): Token | null {\n    // If we've reached the end, exit\n    if (this.end()) return null;\n    // Handle white space\n    // In text mode, spaces are significant,\n    // however they are coalesced unless \\obeyspaces\n    if (!this.obeyspaces && this.match(/^[ \\f\\n\\r\\t\\v\\u00A0\\u2028\\u2029]+/)) {\n      // Note that browsers are inconsistent in their definitions of the\n      // `\\s` metacharacter, so we use an explicit pattern instead.\n\n      // - IE:          `[ \\f\\n\\r\\t\\v]`\n      // - Chrome:      `[ \\f\\n\\r\\t\\v\\u00A0]`\n      // - Firefox:     `[ \\f\\n\\r\\t\\v\\u00A0\\u2028\\u2029]`\n      // - \\f \\u000C: form feed (FORM FEED)\n      // - \\n \\u000A: linefeed (LINE FEED)\n      // - \\r \\u000D: carriage return\n      // - \\t \\u0009: tab (CHARACTER TABULATION)\n      // - \\v \\u000B: vertical tab (LINE TABULATION)\n      // - \\u00A0: NON-BREAKING SPACE\n      // - \\u2028: LINE SEPARATOR\n      // - \\u2029: PARAGRAPH SEPARATOR\n      return '<space>';\n    }\n\n    if (this.obeyspaces && this.match(/^[ \\f\\n\\r\\t\\v\\u00A0\\u2028\\u2029]/)) {\n      // Don't coalesce when this.obeyspaces is true (different regex from above)\n      return '<space>';\n    }\n\n    const next = this.get();\n    // Is it a command?\n    if (next === '\\\\') {\n      if (!this.end()) {\n        // A command is either a string of letters and asterisks...\n        let command = this.match(/^[a-zA-Z*]+/);\n        if (command) {\n          // Spaces after a 'control word' are ignored\n          // (but not after a 'control symbol' (single char)\n          this.match(/^[ \\f\\n\\r\\t\\v\\u00A0\\u2028\\u2029]*/);\n        } else {\n          // ... or a single non-letter character\n          command = this.get();\n          if (command === ' ') {\n            // The `\\ ` command is equivalent to a single space\n            return '<space>';\n          }\n        }\n\n        return '\\\\' + command;\n      }\n    } else if (next === '{') {\n      // This is a group start\n      return '<{>';\n    } else if (next === '}') {\n      // This is a group end\n      return '<}>';\n    } else if (next === '^') {\n      if (this.peek() === '^') {\n        // It might be a ^^ command (inline hex character)\n        this.get();\n        // There can be zero to six carets with the same number of hex digits\n        const hex = this.match(\n          /^(\\^(\\^(\\^(\\^[\\da-f])?[\\da-f])?[\\da-f])?[\\da-f])?[\\da-f]{2}/\n        );\n        if (hex) {\n          return String.fromCodePoint(\n            Number.parseInt(hex.slice(hex.lastIndexOf('^') + 1), 16)\n          );\n        }\n      }\n\n      return next;\n    } else if (next === '#') {\n      // This could be either a param token, or a literal # (used for\n      // colorspecs, for example). A param token is a '#' followed by\n      // - a digit 0-9 followed by a non-alpha, non-digit\n      // - or '?' (to indicate a placeholder)\n      // - or '@' (to indicate an implicit, optional, argument)\n      // Otherwise, it's a literal '#'.\n      if (!this.end()) {\n        let isParameter = false;\n        if (/[\\d?@]/.test(this.peek())) {\n          // Could be a param\n          isParameter = true;\n          // Need to look ahead to the following char\n          // (to exclude, e.g. '#1c1b2d': it's not a '#' token, it's a color)\n          if (this.pos + 1 < this.s.length) {\n            const after = this.s[this.pos + 1];\n            isParameter = /[^\\dA-Za-z]/.test(after);\n          }\n        }\n\n        if (isParameter) {\n          return '#' + this.get();\n        }\n\n        return '#';\n      }\n    } else if (next === '$') {\n      // Mode switch\n      if (this.peek() === '$') {\n        // $$\n        this.get();\n        return '<$$>';\n      }\n\n      // $\n      return '<$>';\n    }\n\n    return next;\n  }\n}\n\n// Some primitive commands need to be handled in the expansion phase\n// (the 'gullet')\nfunction expand(lex: Tokenizer, args: string[]): Token[] {\n  let result: Token[] = [];\n  let token = lex.next();\n  if (token) {\n    if (token === '\\\\relax') {\n      // Do nothing\n    } else if (token === '\\\\noexpand') {\n      // Do not expand the next token\n      token = lex.next();\n      if (token) {\n        result.push(token);\n      }\n    } else if (token === '\\\\obeyspaces') {\n      lex.obeyspaces = true;\n    } else if (token === '\\\\space' || token === '~') {\n      // The `\\space` command is equivalent to a single space\n      // The ~ is an 'active character' (a single character macro)\n      // that maps to <space>\n      result.push('<space>');\n    } else if (token === '\\\\bgroup') {\n      // Begin group, synonym for opening brace\n      result.push('<{>');\n    } else if (token === '\\\\egroup') {\n      // End group, synonym for closing brace\n      result.push('<}>');\n    } else if (token === '\\\\string') {\n      // Turn the next token into a string\n      token = lex.next();\n      if (token) {\n        if (token.startsWith('\\\\')) {\n          for (const x of token) {\n            result.push(x === '\\\\' ? '\\\\backslash' : x);\n          }\n        } else if (token === '<{>') {\n          result.push('\\\\{');\n        } else if (token === '<space>') {\n          result.push('~');\n        } else if (token === '<}>') {\n          result.push('\\\\}');\n        }\n      }\n    } else if (token === '\\\\csname') {\n      // Turn the next tokens, until `\\endcsname`, into a command\n      while (lex.peek() === '<space>') {\n        lex.next();\n      }\n\n      let command = '';\n      let done = false;\n      let tokens = [];\n      do {\n        if (tokens.length === 0) {\n          // We're out of tokens to look at, get some more\n          if (/^#[\\d?@]$/.test(lex.peek())) {\n            // Expand parameters (but not commands)\n            const parameter = lex.get().slice(1);\n            tokens = tokenize(\n              args?.[parameter] ?? args?.['?'] ?? '\\\\placeholder{}',\n              args\n            );\n            token = tokens[0];\n          } else {\n            token = lex.next();\n            tokens = token ? [token] : [];\n          }\n        }\n\n        done = tokens.length === 0;\n        if (!done && token === '\\\\endcsname') {\n          done = true;\n          tokens.shift();\n        }\n\n        if (!done) {\n          done =\n            token === '<$>' ||\n            token === '<$$>' ||\n            token === '<{>' ||\n            token === '<}>' ||\n            (token.length > 1 && token.startsWith('\\\\'));\n        }\n\n        if (!done) {\n          command += tokens.shift();\n        }\n      } while (!done);\n\n      if (command) {\n        result.push('\\\\' + command);\n      }\n\n      result = result.concat(tokens);\n    } else if (token === '\\\\endcsname') {\n      // Unexpected \\endcsname are ignored\n    } else if (token.length > 1 && token.startsWith('#')) {\n      // It's a parameter to expand\n      const parameter = token.slice(1);\n      result = result.concat(\n        tokenize(args?.[parameter] ?? args?.['?'] ?? '\\\\placeholder{}', args)\n      );\n    } else {\n      result.push(token);\n    }\n  }\n\n  return result;\n}\n\n/**\n * Create Tokens from a stream of LaTeX\n *\n * @param s - A string of LaTeX. It can include comments (with the `%`\n * marker) and multiple lines.\n */\nexport function tokenize(s: string, args: string[]): Token[] {\n  // Merge multiple lines into one, and remove comments\n  const lines = s.toString().split(/\\r?\\n/);\n  let stream = '';\n  let sep = '';\n  for (const line of lines) {\n    stream += sep;\n    sep = ' ';\n    // Remove everything after a % (comment marker)\n    // (but \\% should be preserved...)\n    const m = line.match(/((?:\\\\%)|[^%])*/);\n    if (m !== null) stream += m[0];\n  }\n\n  const tokenizer = new Tokenizer(stream);\n  let result: Token[] = [];\n  do {\n    result = result.concat(expand(tokenizer, args));\n  } while (!tokenizer.end());\n\n  return result;\n}\n\nexport function joinLatex(segments: string[]): string {\n  let sep = '';\n  let result = '';\n  for (const segment of segments) {\n    if (segment) {\n      if (/[a-zA-Z*]/.test(segment[0])) {\n        // If the segment begins with a char that *could* be in a command\n        // name... insert a separator (if one was needed for the previous segment)\n        result += sep;\n      }\n\n      // If the segment ends in a command...\n      sep = /\\\\[a-zA-Z]+\\*?$/.test(segment) ? ' ' : '';\n      result += segment;\n    }\n  }\n\n  return result;\n}\n\nexport function tokensToString(tokens: Token[]): string {\n  const result = joinLatex(\n    tokens.map((token) => {\n      return (\n        {\n          '<space>': ' ',\n          '<$$>': '$$',\n          '<$>': '$',\n          '<{>': '{',\n          '<}>': '}',\n        }[token] ?? token\n      );\n    })\n  );\n  return result;\n}\n","import type { ArgumentType } from '../core/context';\nimport type { Atom, AtomType, BBoxParameter } from '../core/atom-class';\nimport type { Colspec } from '../core-atoms/array';\nimport type {\n  Variant,\n  // VariantStyle,\n  MacroDictionary,\n  Style,\n  ParseMode,\n  VariantStyle,\n} from '../public/core';\n\nexport type FunctionArgumentDefiniton = {\n  isOptional: boolean;\n  type: ArgumentType;\n};\n\nexport type Argument = string | number | BBoxParameter | Colspec[] | Atom[];\n\nexport type FunctionDefinition = {\n  params: FunctionArgumentDefiniton[];\n  infix: boolean;\n  isFunction: boolean;\n  ifMode: ParseMode;\n  applyMode: ParseMode;\n  createAtom: (command: string, args: Argument[], style: Style) => Atom;\n  applyStyle: (command: string, args: Argument[]) => Style;\n\n  frequency?: number;\n  category?: string;\n  template?: string;\n};\n\ntype EnvironmentDefinition = {\n  /* If true, the 'content' of the environment is parsed in tabular mode,\n        i.e. wiht '&' creating a new column and '\\\\' creating a new row */\n  tabular: boolean;\n  params: FunctionArgumentDefiniton[];\n  createAtom: EnvironmentConstructor;\n};\n\nexport type SymbolDefinition = {\n  type: AtomType;\n  value: string;\n  variant: Variant;\n  // VariantStyle: VariantStyle;\n\n  frequency?: number;\n  category?: string;\n  template?: string;\n};\n\nexport const MATH_SYMBOLS: Record<string, SymbolDefinition> = {};\n// Map a character to some corresponding Latex\n// This is used for some characters such as ² SUPERSCRIPT TWO.\n// This is also an opportunity to specify the prefered form when\n// a unicode character is encountered that maps to multiple commands,\n// for example ≠ could map either to \\ne or \\neq\n// The table will also be populated by any registered symbol\n// from MATH_SYMBOLS\n// prettier-ignore\nexport const REVERSE_MATH_SYMBOLS = {\n    '<': '<',   // Also \\lt\n    '>': '>',   // Also \\gt\n    'o': 'o',    // Also \\omicron\n    '&': '\\\\&',  // Also \\And\n    '{': '\\\\{',  // Also \\lbrace\n    '}': '\\\\}',  // Also \\rbrace\n    '[': '\\\\lbrack',\n    ']': '\\\\rbrack',\n    ':': '\\\\colon', // Also :\n    \n    '\\u00A0': '~', // Also \\space\n    '\\u00AC': '\\\\neg',  // Also \\lnot\n\n    '\\u00B7': '\\\\cdot',\n    '\\u00BC': '\\\\frac{1}{4}',\n    '\\u00BD': '\\\\frac{1}{2}',\n    '\\u00BE': '\\\\frac{3}{4}',\n    '\\u2070': '^{0}',\n    '\\u2071': '^{i}',\n    '\\u00B9': '^{1}',\n    '\\u00B2': '^{2}',\n    '\\u00B3': '^{3}',\n\n    '\\u2020': '\\\\dagger', // Also \\dag\n    '\\u2021': '\\\\ddagger', // Also \\ddag\n    '\\u2026': '\\\\ldots',    // Also \\mathellipsis\n\n    '\\u2074': '^{4}',\n    '\\u2075': '^{5}',\n    '\\u2076': '^{6}',\n    '\\u2077': '^{7}',\n    '\\u2078': '^{8}',\n    '\\u2079': '^{9}',\n    '\\u207A': '^{+}',\n    '\\u207B': '^{-}',\n    '\\u207C': '^{=}',\n    '\\u207F': '^{n}',\n    '\\u2080': '_{0}',\n    '\\u2081': '_{1}',\n    '\\u2082': '_{2}',\n    '\\u2083': '_{3}',\n    '\\u2084': '_{4}',\n    '\\u2085': '_{5}',\n    '\\u2086': '_{6}',\n    '\\u2087': '_{7}',\n    '\\u2088': '_{8}',\n    '\\u2089': '_{9}',\n    '\\u208A': '_{+}',\n    '\\u208B': '_{-}',\n    '\\u208C': '_{=}',\n    '\\u2090': '_{a}',\n    '\\u2091': '_{e}',\n    '\\u2092': '_{o}',\n    '\\u2093': '_{x}',\n\n    '\\u2032': '\\\\prime',\n    '\\'': '\\\\prime',\n\n    '\\u2190': '\\\\gets', // Also \\leftarrow\n    '\\u2192': '\\\\to',   // Also \\rightarrow\n\n    '\\u25B3': '\\\\triangle', // Also \\bigtriangleup, \\vartriangle\n    '\\u25BD': '\\\\triangledown',\n\n    '\\u220B': '\\\\owns', // Also \\ni\n    '\\u2217': '\\\\ast',  // Also *\n    '\\u2223': '\\\\vert',  // Also |, \\mvert, \\lvert, \\rvert\n    '\\u2225': '\\\\Vert',  // Also \\parallel \\shortparallel\n\n    '\\u2227': '\\\\land', // Also \\wedge\n    '\\u2228': '\\\\lor', // Also \\vee\n\n    '\\u22C5': '\\\\cdot', // Also \\centerdot, \\cdotp\n    '\\u22C8': '\\\\bowtie', // Also \\Joint\n\n    '\\u2260': '\\\\ne',   // Also \\neq\n    '\\u2264': '\\\\le',   // Also \\leq\n    '\\u2265': '\\\\ge',   // Also \\geq\n    '\\u22A5': '\\\\bot', // Also \\perp\n\n    '\\u27F7': '\\\\biconditional',    // Also longleftrightarrow\n    '\\u27F8': '\\\\impliedby', // Also \\Longleftarrow\n    '\\u27F9': '\\\\implies', // Also \\Longrightarrow\n\n    '\\u2102': '\\\\C',    // Also \\doubleStruckCapitalC\n    '\\u2115': '\\\\N',    // Also \\doubleStruckCapitalN\n    '\\u2119': '\\\\P',    // Also \\doubleStruckCapitalP\n    '\\u211A': '\\\\Q',    // Also \\doubleStruckCapitalQ\n    '\\u211D': '\\\\R',    // Also \\doubleStruckCapitalR\n    '\\u2124': '\\\\Z',    // Also \\doubleStruckCapitalZ\n};\nexport const FUNCTIONS: Record<string, FunctionDefinition> = {};\n\nexport const ENVIRONMENTS: Record<string, EnvironmentDefinition> = {};\n\ntype EnvironmentConstructor = (\n  name: string,\n  array: Atom[][][],\n  rowGaps: number[],\n  args: Argument[]\n) => Atom;\n\nexport const MACROS: MacroDictionary = {\n  iff: '\\\\;\\u27FA\\\\;', // >2,000 Note: additional spaces around the arrows\n  nicefrac: '^{#1}\\\\!\\\\!/\\\\!_{#2}',\n\n  // From bracket.sty, Dirac notation\n  bra: '\\\\mathinner{\\\\langle{#1}|}',\n  ket: '\\\\mathinner{|{#1}\\\\rangle}',\n  braket: '\\\\mathinner{\\\\langle{#1}\\\\rangle}',\n  set: '\\\\mathinner{\\\\lbrace #1 \\\\rbrace}',\n  Bra: '\\\\left\\\\langle #1\\\\right|',\n  Ket: '\\\\left|#1\\\\right\\\\rangle',\n  Braket: '\\\\left\\\\langle{#1}\\\\right\\\\rangle',\n  Set: '\\\\left\\\\lbrace #1 \\\\right\\\\rbrace',\n\n  // Proof Wiki\n  rd: '\\\\mathrm{d}',\n  rD: '\\\\mathrm{D}',\n\n  // From Wolfram Alpha\n  doubleStruckCapitalN: '\\\\mathbb{N}',\n  doubleStruckCapitalR: '\\\\mathbb{R}',\n  doubleStruckCapitalQ: '\\\\mathbb{Q}',\n  doubleStruckCapitalZ: '\\\\mathbb{Z}',\n  doubleStruckCapitalP: '\\\\mathbb{P}',\n\n  scriptCapitalE: '\\\\mathscr{E}',\n  scriptCapitalH: '\\\\mathscr{H}',\n  scriptCapitalL: '\\\\mathscr{L}',\n  gothicCapitalC: '\\\\mathfrak{C}',\n  gothicCapitalH: '\\\\mathfrak{H}',\n  gothicCapitalI: '\\\\mathfrak{I}',\n  gothicCapitalR: '\\\\mathfrak{R}',\n\n  imaginaryI: '\\\\mathrm{i}', // NOTE: set in main (upright) as per ISO 80000-2:2009.\n  imaginaryJ: '\\\\mathrm{j}', // NOTE: set in main (upright) as per ISO 80000-2:2009.\n\n  exponentialE: '\\\\mathrm{e}', // NOTE: set in main (upright) as per ISO 80000-2:2009.\n  differentialD: '\\\\mathrm{d}', // NOTE: set in main (upright) as per ISO 80000-2:2009.\n  capitalDifferentialD: '\\\\mathrm{D}', // NOTE: set in main (upright) as per ISO 80000-2:2009.\n};\n\n// Body-text symbols\n// See http://ctan.mirrors.hoobly.com/info/symbols/comprehensive/symbols-a4.pdf, p14\n\nexport const TEXT_SYMBOLS = {\n  ' ': ' ',\n  '\\\\#': '\\u0023',\n  '\\\\&': '\\u0026',\n  '\\\\$': '$',\n  '\\\\%': '%',\n  '\\\\_': '_',\n  '\\\\euro': '\\u20AC',\n  '\\\\maltese': '\\u2720',\n  '\\\\{': '{',\n  '\\\\}': '}',\n  '\\\\nobreakspace': '\\u00A0',\n  '\\\\ldots': '\\u2026',\n  '\\\\textellipsis': '\\u2026',\n  '\\\\backslash': '\\\\',\n  '`': '\\u2018',\n  \"'\": '\\u2019',\n  '``': '\\u201C',\n  \"''\": '\\u201D',\n  '\\\\degree': '\\u00B0',\n  '\\\\textasciicircum': '^',\n  '\\\\textasciitilde': '~',\n  '\\\\textasteriskcentered': '*',\n  '\\\\textbackslash': '\\\\',\n  '\\\\textbraceleft': '{',\n  '\\\\textbraceright': '}',\n  '\\\\textbullet': '•',\n  '\\\\textdollar': '$',\n  '\\\\textsterling': '£',\n  '\\\\textdagger': '\\u2020',\n  '\\\\textdaggerdbl': '\\u2021',\n\n  '–': '\\u2013', // EN DASH\n  '—': '\\u2014', // EM DASH\n  '‘': '\\u2018', // LEFT SINGLE QUOTATION MARK\n  '’': '\\u2019', // RIGHT SINGLE QUOTATION MARK\n  '“': '\\u201C', // LEFT DOUBLE QUOTATION MARK\n  '”': '\\u201D', // RIGHT DOUBLE QUOTATION MARK\n  '\"': '\\u201D', // DOUBLE PRIME\n  '\\\\ss': '\\u00DF', // LATIN SMALL LETTER SHARP S\n  '\\\\ae': '\\u00E6', // LATIN SMALL LETTER AE\n  '\\\\oe': '\\u0153', // LATIN SMALL LIGATURE OE\n  '\\\\AE': '\\u00C6', // LATIN CAPITAL LETTER AE\n  '\\\\OE': '\\u0152', // LATIN CAPITAL LIGATURE OE\n  '\\\\O': '\\u00D8', // LATIN CAPITAL LETTER O WITH STROKE\n  '\\\\i': '\\u0131', // LATIN SMALL LETTER DOTLESS I\n  '\\\\j': '\\u0237', // LATIN SMALL LETTER DOTLESS J\n  '\\\\aa': '\\u00E5', // LATIN SMALL LETTER A WITH RING ABOVE\n  '\\\\AA': '\\u00C5', // LATIN CAPITAL LETTER A WITH RING ABOVE\n};\n\nexport const COMMAND_MODE_CHARACTERS = /[\\w!@*()-=+{}[\\]\\\\';:?/.,~<>`|$%#&^\" ]/;\n\n// Word boundaries for Cyrillic, Polish, French, German, Italian\n// and Spanish. We use \\p{L} (Unicode property escapes: \"Letter\")\n// but Firefox doesn't support it\n// (https://bugzilla.mozilla.org/show_bug.cgi?id=1361876). Booo...\n// See also https://stackoverflow.com/questions/26133593/using-regex-to-match-international-unicode-alphanumeric-characters-in-javascript\nexport const LETTER =\n  navigator !== undefined && /firefox|edge|trident/i.test(navigator.userAgent)\n    ? /[a-zA-ZаАбБвВгГдДеЕёЁжЖзЗиИйЙкКлЛмМнНоОпПрРсСтТуУфФхХцЦчЧшШщЩъЪыЫьЬэЭюЮяĄąĆćĘęŁłŃńÓóŚśŹźŻżàâäôéèëêïîçùûüÿæœÀÂÄÔÉÈËÊÏÎŸÇÙÛÜÆŒößÖẞìíòúÌÍÒÚáñÁÑ]/\n    : /* eslint-disable-next-line prefer-regex-literals */\n      new RegExp('\\\\p{Letter}', 'u');\n\nexport const LETTER_AND_DIGITS =\n  navigator !== undefined && /firefox|edge|trident/i.test(navigator.userAgent)\n    ? /[\\da-zA-ZаАбБвВгГдДеЕёЁжЖзЗиИйЙкКлЛмМнНоОпПрРсСтТуУфФхХцЦчЧшШщЩъЪыЫьЬэЭюЮяĄąĆćĘęŁłŃńÓóŚśŹźŻżàâäôéèëêïîçùûüÿæœÀÂÄÔÉÈËÊÏÎŸÇÙÛÜÆŒößÖẞìíòúÌÍÒÚáñÁÑ]/\n    : /* eslint-disable-next-line prefer-regex-literals */\n      new RegExp('[0-9\\\\p{Letter}]', 'u');\n\n/**\n * @param symbol    The LaTeX command for this symbol, for\n * example `\\alpha` or `+`\n */\nexport function defineSymbol(\n  symbol: string,\n  value: string,\n  type: AtomType = 'mord',\n  variant?: Variant\n): void {\n  MATH_SYMBOLS[symbol] = {\n    type,\n    variant,\n    value,\n  };\n  if (!REVERSE_MATH_SYMBOLS[value] && !variant) {\n    REVERSE_MATH_SYMBOLS[value] = symbol;\n  }\n\n  // We accept all math symbols in text mode as well\n  // which is a bit more permissive than TeX\n  TEXT_SYMBOLS[symbol] = value;\n}\n\n/**\n * Define a set of single-character symbols as 'mord' symbols.\n * @param string a string of single character symbols\n */\nexport function defineSymbols(string: string): void {\n  for (let i = 0; i < string.length; i++) {\n    const ch = string.charAt(i);\n    defineSymbol(ch, ch);\n  }\n}\n\n/**\n * Define a set of single-character symbols as a range of Unicode codepoints\n * @param from First Unicode codepoint\n * @param to Last Unicode codepoint\n */\nexport function defineSymbolRange(from: number, to: number): void {\n  for (let i = from; i <= to; i++) {\n    const ch = String.fromCodePoint(i);\n    defineSymbol(ch, ch);\n  }\n}\n\n/**\n * Given a character, return a LaTeX expression matching its Unicode codepoint.\n * If there is a matching symbol (e.g. \\alpha) it is returned.\n */\nexport function charToLatex(parseMode: ArgumentType, s: string): string {\n  if (parseMode === 'math') {\n    return REVERSE_MATH_SYMBOLS[s] || s;\n  }\n\n  if (parseMode === 'text') {\n    let textSymbol = Object.keys(TEXT_SYMBOLS).find(\n      (x) => TEXT_SYMBOLS[x] === s\n    );\n    if (!textSymbol) {\n      const hex = s.codePointAt(0).toString(16);\n      textSymbol = '^'.repeat(hex.length) + hex;\n    }\n\n    return textSymbol;\n  }\n\n  return s;\n}\n\n/* Some symbols in the MATHEMATICAL ALPHANUMERICAL SYMBOLS block had\n   been previously defined in other blocks. Remap them */\nconst MATH_LETTER_EXCEPTIONS = {\n  0x1d455: 0x0210e,\n  0x1d49d: 0x0212c,\n  0x1d4a0: 0x02130,\n  0x1d4a1: 0x02131,\n  0x1d4a3: 0x0210b,\n  0x1d4a4: 0x02110,\n  0x1d4a7: 0x02112,\n  0x1d4a8: 0x02133,\n  0x1d4ad: 0x0211b,\n  0x1d4ba: 0x0212f,\n  0x1d4bc: 0x0210a,\n  0x1d4c4: 0x02134,\n  0x1d506: 0x0212d,\n  0x1d50b: 0x0210c,\n  0x1d50c: 0x02111,\n  0x1d515: 0x0211c,\n  0x1d51d: 0x02128,\n  0x1d53a: 0x02102,\n  0x1d53f: 0x0210d,\n  0x1d545: 0x02115,\n  0x1d547: 0x02119,\n  0x1d548: 0x0211a,\n  0x1d549: 0x0211d,\n  0x1d551: 0x02124,\n};\n\nconst MATH_UNICODE_BLOCKS: {\n  start: number;\n  len: number;\n  offset: number;\n  style?: VariantStyle;\n  variant?: Variant;\n}[] = [\n  { start: 0x1d400, len: 26, offset: 65, style: 'bold' },\n  { start: 0x1d41a, len: 26, offset: 97, style: 'bold' },\n  { start: 0x1d434, len: 26, offset: 65, style: 'italic' },\n  { start: 0x1d44e, len: 26, offset: 97, style: 'italic' },\n  { start: 0x1d468, len: 26, offset: 65, style: 'bolditalic' },\n  { start: 0x1d482, len: 26, offset: 97, style: 'bolditalic' },\n\n  { start: 0x1d49c, len: 26, offset: 65, variant: 'script' },\n  { start: 0x1d4b6, len: 26, offset: 97, variant: 'script' },\n  { start: 0x1d4d0, len: 26, offset: 65, variant: 'script', style: 'bold' },\n  { start: 0x1d4ea, len: 26, offset: 97, variant: 'script', style: 'bold' },\n\n  { start: 0x1d504, len: 26, offset: 65, variant: 'fraktur' },\n  { start: 0x1d51e, len: 26, offset: 97, variant: 'fraktur' },\n  { start: 0x1d56c, len: 26, offset: 65, variant: 'fraktur', style: 'bold' },\n  { start: 0x1d586, len: 26, offset: 97, variant: 'fraktur', style: 'bold' },\n\n  { start: 0x1d538, len: 26, offset: 65, variant: 'double-struck' },\n  { start: 0x1d552, len: 26, offset: 97, variant: 'double-struck' },\n\n  { start: 0x1d5a0, len: 26, offset: 65, variant: 'sans-serif' },\n  { start: 0x1d5ba, len: 26, offset: 97, variant: 'sans-serif' },\n  {\n    start: 0x1d5d4,\n    len: 26,\n    offset: 65,\n    variant: 'sans-serif',\n    style: 'bold',\n  },\n  {\n    start: 0x1d5ee,\n    len: 26,\n    offset: 97,\n    variant: 'sans-serif',\n    style: 'bold',\n  },\n  {\n    start: 0x1d608,\n    len: 26,\n    offset: 65,\n    variant: 'sans-serif',\n    style: 'italic',\n  },\n  {\n    start: 0x1d622,\n    len: 26,\n    offset: 97,\n    variant: 'sans-serif',\n    style: 'italic',\n  },\n  {\n    start: 0x1d63c,\n    len: 26,\n    offset: 65,\n    variant: 'sans-serif',\n    style: 'bolditalic',\n  },\n  {\n    start: 0x1d656,\n    len: 26,\n    offset: 97,\n    variant: 'sans-serif',\n    style: 'bolditalic',\n  },\n\n  { start: 0x1d670, len: 26, offset: 65, variant: 'monospace' },\n  { start: 0x1d68a, len: 26, offset: 97, variant: 'monospace' },\n\n  { start: 0x1d6a8, len: 25, offset: 0x391, style: 'bold' },\n  { start: 0x1d6c2, len: 25, offset: 0x3b1, style: 'bold' },\n  { start: 0x1d6e2, len: 25, offset: 0x391, style: 'italic' },\n  { start: 0x1d6fc, len: 25, offset: 0x3b1, style: 'italic' },\n  { start: 0x1d71c, len: 25, offset: 0x391, style: 'bolditalic' },\n  { start: 0x1d736, len: 25, offset: 0x3b1, style: 'bolditalic' },\n  {\n    start: 0x1d756,\n    len: 25,\n    offset: 0x391,\n    variant: 'sans-serif',\n    style: 'bold',\n  },\n  {\n    start: 0x1d770,\n    len: 25,\n    offset: 0x3b1,\n    variant: 'sans-serif',\n    style: 'bold',\n  },\n  {\n    start: 0x1d790,\n    len: 25,\n    offset: 0x391,\n    variant: 'sans-serif',\n    style: 'bolditalic',\n  },\n  {\n    start: 0x1d7aa,\n    len: 25,\n    offset: 0x3b1,\n    variant: 'sans-serif',\n    style: 'bolditalic',\n  },\n\n  { start: 0x1d7ce, len: 10, offset: 48, variant: 'main', style: 'bold' },\n  { start: 0x1d7d8, len: 10, offset: 48, variant: 'double-struck' },\n  { start: 0x1d7e3, len: 10, offset: 48, variant: 'sans-serif' },\n  {\n    start: 0x1d7ec,\n    len: 10,\n    offset: 48,\n    variant: 'sans-serif',\n    style: 'bold',\n  },\n  { start: 0x1d7f6, len: 10, offset: 48, variant: 'monospace' },\n];\n\nfunction unicodeToMathVariant(\n  codepoint: number\n): { char: string; variant?: Variant; style?: string } {\n  if (\n    (codepoint < 0x1d400 || codepoint > 0x1d7ff) &&\n    (codepoint < 0x2100 || codepoint > 0x214f)\n  ) {\n    return { char: String.fromCodePoint(codepoint) };\n  }\n\n  // Handle the 'gap' letters by converting them back into their logical range\n  for (const c in MATH_LETTER_EXCEPTIONS) {\n    if (MATH_LETTER_EXCEPTIONS[c] === codepoint) {\n      codepoint = c.codePointAt(0) ?? 0;\n      break;\n    }\n  }\n\n  for (const MATH_UNICODE_BLOCK of MATH_UNICODE_BLOCKS) {\n    if (\n      codepoint >= MATH_UNICODE_BLOCK.start &&\n      codepoint < MATH_UNICODE_BLOCK.start + MATH_UNICODE_BLOCK.len\n    ) {\n      return {\n        char: String.fromCodePoint(\n          codepoint - MATH_UNICODE_BLOCK.start + MATH_UNICODE_BLOCK.offset\n        ),\n        variant: MATH_UNICODE_BLOCK.variant,\n        style: MATH_UNICODE_BLOCK.style,\n      };\n    }\n  }\n\n  return { char: String.fromCodePoint(codepoint) };\n}\n\n/**\n * Given a character and variant ('double-struck', 'fraktur', etc...)\n * return the corresponding unicode character (a string)\n */\nexport function mathVariantToUnicode(\n  char: string,\n  variant: string,\n  style: string\n): string {\n  if (!/[A-Za-z\\d]/.test(char)) return char;\n  if (!variant && !style) return char;\n\n  const codepoint = char.codePointAt(0);\n\n  for (const MATH_UNICODE_BLOCK of MATH_UNICODE_BLOCKS) {\n    if (!variant || MATH_UNICODE_BLOCK.variant === variant) {\n      if (!style || MATH_UNICODE_BLOCK.style === style) {\n        if (\n          codepoint >= MATH_UNICODE_BLOCK.offset &&\n          codepoint < MATH_UNICODE_BLOCK.offset + MATH_UNICODE_BLOCK.len\n        ) {\n          const result =\n            MATH_UNICODE_BLOCK.start + codepoint - MATH_UNICODE_BLOCK.offset;\n          return String.fromCodePoint(MATH_LETTER_EXCEPTIONS[result] || result);\n        }\n      }\n    }\n  }\n\n  return char;\n}\n\nexport function unicodeCharToLatex(\n  parseMode: ArgumentType,\n  char: string\n): string {\n  if (parseMode === 'text') {\n    return charToLatex(parseMode, char) || char;\n  }\n\n  let result: string;\n  // Codepoint shortcuts have priority over variants\n  // That is, \"\\N\" vs \"\\mathbb{N}\"\n  // if (CODEPOINT_SHORTCUTS[cp]) return CODEPOINT_SHORTCUTS[cp];\n  result = charToLatex(parseMode, char);\n  if (result) return result;\n\n  const cp = char.codePointAt(0);\n  const v = unicodeToMathVariant(cp);\n  if (!v.style && !v.variant) return '';\n\n  result = v.char;\n  if (v.variant) {\n    result = '\\\\' + v.variant + '{' + result + '}';\n  }\n\n  if (v.style === 'bold') {\n    result = '\\\\mathbf{' + result + '}';\n  } else if (v.style === 'italic') {\n    result = '\\\\mathit{' + result + '}';\n  } else if (v.style === 'bolditalic') {\n    result = '\\\\mathbfit{' + result + '}';\n  }\n\n  return '\\\\mathord{' + result + '}';\n}\n\nexport function unicodeStringToLatex(\n  parseMode: ArgumentType,\n  s: string\n): string {\n  let result = '';\n  let needSpace = false;\n  for (const c of s) {\n    if (needSpace) {\n      result += parseMode === 'text' ? '{}' : ' ';\n    }\n\n    needSpace = false;\n    const latex = unicodeCharToLatex(parseMode, c);\n    if (latex) {\n      result += latex;\n      needSpace = /\\\\[a-zA-Z\\d]+\\*?$/.test(latex);\n    } else {\n      result += c;\n    }\n  }\n\n  return result;\n}\n\n/**\n * Gets the value of a symbol in math mode\n */\n// export function getSymbolValue(symbol: string): string {\n//     return MATH_SYMBOLS[symbol]?.value ?? symbol;\n// }\n\nexport function getEnvironmentDefinition(name: string): EnvironmentDefinition {\n  return ENVIRONMENTS[name] ?? null;\n}\n\n/**\n * @param symbol    A command (e.g. '\\alpha') or a character (e.g. 'a')\n * @param parseMode One of 'math' or 'text'\n * @param macros A macros dictionary\n * @return {object} An info structure about the symbol, or null\n */\nexport function getInfo(\n  symbol: string,\n  parseMode: ArgumentType,\n  macros?: MacroDictionary\n): FunctionDefinition & SymbolDefinition {\n  if (!symbol || symbol.length === 0) return null;\n\n  let info = null;\n\n  if (symbol.startsWith('\\\\')) {\n    // This could be a function or a symbol\n    info = FUNCTIONS[symbol];\n    if (info) {\n      // We've got a match\n      return info;\n    }\n\n    // It wasn't a function, maybe it's a symbol?\n    if (parseMode === 'math') {\n      info = MATH_SYMBOLS[symbol];\n    } else if (TEXT_SYMBOLS[symbol]) {\n      info = { value: TEXT_SYMBOLS[symbol] };\n    }\n\n    if (!info) {\n      // Maybe it's a macro\n      const command = symbol.slice(1);\n      if (macros?.[command]) {\n        let def = macros[command];\n        if (typeof def === 'object') {\n          def = def.def;\n        }\n\n        let argCount = 0;\n        // Let's see if there are arguments in the definition.\n        if (/(^|[^\\\\])#1/.test(def)) argCount = 1;\n        if (/(^|[^\\\\])#2/.test(def)) argCount = 2;\n        if (/(^|[^\\\\])#3/.test(def)) argCount = 3;\n        if (/(^|[^\\\\])#4/.test(def)) argCount = 4;\n        if (/(^|[^\\\\])#5/.test(def)) argCount = 5;\n        if (/(^|[^\\\\])#6/.test(def)) argCount = 6;\n        if (/(^|[^\\\\])#7/.test(def)) argCount = 7;\n        if (/(^|[^\\\\])#8/.test(def)) argCount = 8;\n        if (/(^|[^\\\\])#9/.test(def)) argCount = 9;\n        info = {\n          type: 'group',\n          mode: 'math',\n          params: [],\n          infix: false,\n        };\n        while (argCount >= 1) {\n          info.params.push({\n            isOptional: false,\n            type: 'math',\n          });\n          argCount -= 1;\n        }\n      }\n    }\n  } else if (parseMode === 'math') {\n    info = MATH_SYMBOLS[symbol];\n  } else if (TEXT_SYMBOLS[symbol]) {\n    info = { value: TEXT_SYMBOLS[symbol] };\n  } else if (parseMode === 'text') {\n    info = { value: symbol };\n  }\n\n  // Special case `f`, `g` and `h` are recognized as functions.\n  if (\n    info &&\n    info.type === 'mord' &&\n    (info.value === 'f' || info.value === 'g' || info.value === 'h')\n  ) {\n    info.isFunction = true;\n  }\n\n  return info;\n}\n\n/**\n * Return an array of suggestion for completing string 's'.\n * For example, for 'si', it could return ['sin', 'sinh', 'sim', 'simeq', 'sigma']\n * Infix operators are excluded, since they are deprecated commands.\n */\nexport function suggest(s: string): { match: string; frequency: number }[] {\n  const result = [];\n\n  // Iterate over items in the dictionary\n  for (const p in FUNCTIONS) {\n    if (p.startsWith(s) && !FUNCTIONS[p].infix) {\n      result.push({ match: p, frequency: FUNCTIONS[p].frequency });\n    }\n  }\n\n  for (const p in MATH_SYMBOLS) {\n    if (p.startsWith(s)) {\n      result.push({ match: p, frequency: MATH_SYMBOLS[p].frequency });\n    }\n  }\n\n  result.sort((a, b) => {\n    if (a.frequency === b.frequency) {\n      if (a.match.length === b.match.length) {\n        return a.match.localeCompare(b.match);\n      }\n\n      return a.match.length - b.match.length;\n    }\n\n    return (b.frequency ?? 0) - (a.frequency ?? 0);\n  });\n\n  return result;\n}\n\n/**\n * An argument template has the following syntax:\n *\n * <placeholder>:<type>\n *\n * where\n * - <placeholder> is a string whose value is displayed when the argument\n *   is missing\n * - <type> is one of 'string', 'color', 'dimen', 'auto', 'text', 'math'\n *\n */\nfunction parseParameterTemplateArgument(argTemplate: string): ArgumentType {\n  let type: ArgumentType = 'auto';\n\n  // Parse the type (:type)\n  const r = argTemplate.match(/:([^=]+)/);\n  if (r) type = r[1].trim() as ArgumentType;\n\n  return type;\n}\n\nfunction parseParameterTemplate(\n  parameterTemplate: string\n): FunctionArgumentDefiniton[] {\n  if (!parameterTemplate) return [];\n\n  let result = [];\n  let parameters = parameterTemplate.split(']');\n  if (parameters[0].startsWith('[')) {\n    // We found at least one optional parameter.\n    result.push({\n      isOptional: true,\n      type: parseParameterTemplateArgument(parameters[0].slice(1)),\n    });\n    // Parse the rest\n    for (let i = 1; i <= parameters.length; i++) {\n      result = result.concat(parseParameterTemplate(parameters[i]));\n    }\n  } else {\n    parameters = parameterTemplate.split('}');\n    if (parameters[0].startsWith('{')) {\n      // We found a required parameter\n      result.push({\n        isOptional: false,\n        type: parseParameterTemplateArgument(parameters[0].slice(1)),\n      });\n      // Parse the rest\n      for (let i = 1; i <= parameters.length; i++) {\n        result = result.concat(parseParameterTemplate(parameters[i]));\n      }\n    }\n  }\n\n  return result;\n}\n\n/**\n * If possible, i.e. if they are all simple atoms, return a string made up of\n * their body\n */\nexport function parseArgAsString(atoms: Atom[]): string {\n  if (!atoms) return '';\n  let result = '';\n  let success = true;\n  for (const atom of atoms) {\n    if (typeof atom.value === 'string') {\n      result += atom.value;\n    } else {\n      success = false;\n    }\n  }\n  return success ? result : '';\n}\n\n/**\n * Define one or more environments to be used with\n *         \\begin{<env-name>}...\\end{<env-name>}.\n *\n * @param params The number and type of required and optional parameters.\n */\nexport function defineEnvironment(\n  names: string | string[],\n  parameters: string,\n  parser: EnvironmentConstructor,\n  isTabular = false\n): void {\n  if (typeof names === 'string') {\n    names = [names];\n  }\n\n  const parsedParameters = parseParameterTemplate(parameters);\n\n  // Set default values of functions\n  const data: EnvironmentDefinition = {\n    tabular: isTabular,\n    // Params: the parameters for this function, an array of\n    // {optional, type}\n    params: parsedParameters,\n\n    // Callback to create an atom\n    createAtom: parser,\n  };\n  for (const name of names) {\n    ENVIRONMENTS[name] = data;\n  }\n}\n\n/**\n * Like defineEnvironment, but for a tabular environment, i.e.\n * one whose content is in tabular mode, where '&' indicata a new column\n * and '\\\\' indicate a new row.\n */\nexport function defineTabularEnvironment(\n  names: string | string[],\n  parameters: string,\n  parser: EnvironmentConstructor\n): void {\n  defineEnvironment(names, parameters, parser, true);\n}\n\n/**\n * Define one of more functions.\n *\n * @param names\n * @param params The number and type of required and optional parameters.\n * For example: '{}' defines a single mandatory parameter\n * '[string]{auto}' defines two params, one optional, one required\n */\nexport function defineFunction(\n  names: string | string[],\n  parameters: string,\n  options: {\n    ifMode?: ParseMode;\n    applyMode?: ParseMode;\n    infix?: boolean;\n    isFunction?: boolean;\n    createAtom?: (name: string, args: Argument[], style: Style) => Atom;\n    applyStyle?: (name: string, args: Argument[]) => Style;\n  }\n): void {\n  if (typeof names === 'string') {\n    names = [names];\n  }\n\n  if (!options) options = {};\n\n  // Set default values of functions\n  const data: FunctionDefinition = {\n    // The parameters for this function, an array of\n    // {optional, type}\n    params: parseParameterTemplate(parameters),\n\n    ifMode: options.ifMode,\n    isFunction: options.isFunction ?? false,\n    applyMode: options.applyMode,\n    infix: options.infix ?? false,\n    createAtom: options.createAtom,\n    applyStyle: options.applyStyle,\n  };\n  for (const name of names) FUNCTIONS['\\\\' + name] = data;\n}\n","import { isArray } from '../common/types';\n\nimport { Context, ContextInterface } from './context';\nimport { Style, ParseMode } from '../public/core';\nimport { MATHSTYLES } from './mathstyle';\nimport { METRICS as FONTMETRICS, SIZING_MULTIPLIER } from './font-metrics';\nimport { makeVlist, SpanType, isSpanType, Span } from './span';\nimport { joinLatex } from './tokenizer';\nimport { getModeRuns, getPropertyRuns, Mode } from './modes-utils';\nimport { unicodeCharToLatex } from '../core-definitions/definitions-utils';\n\nexport const ATOM_REGISTRY = {};\n\nexport type BranchName =\n  | 'above'\n  | 'body'\n  | 'below'\n  | 'superscript'\n  | 'subscript';\nexport type Branch = BranchName | [row: number, col: number];\n/**\n * The order of these branches specify the keyboard navigation order\n */\nconst NAMED_BRANCHES: BranchName[] = [\n  'above',\n  'body',\n  'below',\n  'superscript',\n  'subscript',\n];\n\n/**\n * A _branch_ is a set of children of an atom.\n *\n * There are two kind of branches:\n * - **colRow** branches are adressed with a column and row number and are\n * used with ArrayAtom\n * - **named branches** used with other kind of atoms. There is a fixed set of\n * possible named branches.\n */\nexport function isNamedBranch(branch: Branch): branch is BranchName {\n  return typeof branch === 'string' && NAMED_BRANCHES.includes(branch);\n}\n\nexport function isColRowBranch(branch: Branch): branch is [number, number] {\n  return Array.isArray(branch) && branch.length === 2;\n}\n\nexport type Branches = {\n  [branch in BranchName]?: Atom[];\n};\n\nexport type ToLatexOptions = {\n  expandMacro?: boolean;\n  // If true, don't emit a mode command such as `\\text`\n  skipModeCommand?: boolean;\n};\n\nexport type AtomType =\n  | 'accent'\n  | 'array' // A group, which has children arranged in rows. Used\n  // by environments such as `matrix`, `cases`, etc...\n  | 'box' // A border drawn around an expression and change its background color\n  | 'chem' // A chemical formula (mhchem)\n  | 'composition' // IME composition area\n  | 'delim'\n  | 'enclose'\n  | 'error' //  An unknown command, for example `\\xyzy`. The text  is displayed with a wavy red underline in the editor.\n  | 'first' // A special, empty, atom put as the first atom in math lists in\n  // order to be able to position the caret before the first element. Aside from\n  // the caret, they display nothing.\n  | 'genfrac' // A generalized fraction: a numerator and denominator, separated\n  // by an optional line, and surrounded by optional fences\n  | 'group' // A simple group of atoms, for example from a `{...}`\n  | 'latex' // A raw latex atom\n  | 'leftright' // Used by the `\\left` and `\\right` commands\n  | 'line' // Used by `\\overline` and `\\underline`\n  | 'macro'\n  | 'mbin' // Binary operator: `+`, `*`, etc...\n  | 'mclose' // Closing fence: `)`, `\\rangle`, etc...\n  | 'minner' // Special layout cases, overlap, `\\left...\\right`\n  | 'mop' // `mop`: operators, including special functions, `\\sin`, `\\sum`, `\\cap`.\n  | 'mopen' // Opening fence: `(`, `\\langle`, etc...\n  | 'mord' // Ordinary symbol, e.g. `x`, `\\alpha`\n  | 'mpunct' // Punctuation: `,`, `:`, etc...\n  | 'mrel' // Relational operator: `=`, `\\ne`, etc...\n  | 'msubsup' // A carrier for a superscript/subscript\n  | 'overlap' // Display a symbol _over_ another\n  | 'overunder' // Displays an annotation above or below a symbol\n  | 'placeholder' // A temporary item. Placeholders are displayed as a dashed square in the editor.\n  | 'phantom'\n  | 'root' // A group, which has no parent (only one per formula)\n  | 'rule' // Draw a line, for the `\\rule` command\n  | 'sizeddelim' // A delimiter that can grow\n  | 'space'\n  | 'spacing'\n  | 'surd' // Aka square root, nth root\n  | 'text'; // Text mode atom;\n\nexport type BBoxParameter = {\n  backgroundcolor?: string;\n  padding?: number;\n  border?: string;\n};\n\n/**\n * An atom is an object encapsulating an elementary mathematical unit,\n * independent of its graphical representation.\n *\n * It keeps track of the content, while the dimensions, position and style\n * are tracked by Span objects which are created by the `decompose()` functions.\n */\nexport class Atom {\n  parent: Atom | null;\n  // An atom can have multiple \"branches\" of children,\n  // e.g. `body` and `superscript`.\n  //\n  // The `treeBranch` property indicate which branch of the parent this\n  // atom belongs to or if in an array, the row and column\n  treeBranch: Branch;\n\n  value: string; // If no branches\n\n  // Used to match a DOM element to an Atom\n  // (the corresponding DOM element has a `data-atom-id` attribute)\n  id?: string;\n\n  type: AtomType;\n\n  // Latex command ('\\sin') or character ('a')\n  command: string;\n\n  // Verbatim Latex of the command and its arguments\n  latex?: string;\n\n  style: Style;\n  mode: ParseMode;\n\n  // If true, the atom represents a function (which can be followed by parentheses)\n  // e.g. \"f\" or \"\\sin\"\n  isFunction: boolean;\n\n  isSelected: boolean;\n\n  // If the atom or one of its descendant includes the caret\n  // (used to highligth surd or fences to make clearer where the caret is\n  containsCaret: boolean;\n  caret: ParseMode | '';\n\n  // If true, some structural changes have been made to the atom\n  // (insertion or removal of children) or one of its children is dirty\n  private _isDirty: boolean;\n\n  // A monotonically increasing counter to detect structural changes\n  private _changeCounter: number;\n\n  // Cached list of children, invalidated when isDirty = true\n  private _children: Atom[];\n\n  // Optional, per instance, override of the `toLatex()` method\n  toLatexOverride?: (atom: Atom, options: ToLatexOptions) => string;\n\n  private _branches: Branches;\n\n  // If true, the atom is an operator such as `\\int` or `\\sum`\n  // (affects layout of supsub)\n  isExtensibleSymbol: boolean;\n\n  // How to display \"limits\" (i.e. superscript/subscript) for example\n  // with `\\sum`:\n  // - 'over-under': directly above and below the symbol\n  // - 'adjacent': to the right, above and below the baseline (for example\n  // for operators in `textstyle` style)\n  // - 'auto': 'over-under' in \\displaystyle, 'adjacent' otherwise\n  subsupPlacement?: 'auto' | 'over-under' | 'adjacent';\n\n  // True if the subsupPlacement was set by `\\limits` or `\\nolimits`.\n  // Necessary so the propert latex can be output\n  explicitSubsupPlacement?: boolean;\n\n  // If true, when the caret reaches the first position in this element's body,\n  // it automatically moves to the outside of the element. Conversely, when the\n  // caret reaches the position right after this element, it automatically\n  // moves to the last position inside this element.\n  skipBoundary?: boolean;\n\n  // If true, the children of this atom cannot be selected and should be handled\n  // as a unit. Used by the `\\enclose` annotations, for example.\n  captureSelection?: boolean;\n\n  // This atom causes the parsemode to change. Use by commands such as\n  // `\\mbox` to indicate that it is not necessary to wrap them in a mode\n  // changing command (`\\text`).\n  changeMode?: boolean;\n\n  constructor(\n    type: AtomType,\n    options?: {\n      command?: string;\n      mode?: ParseMode;\n      value?: string;\n      isFunction?: boolean;\n      limits?: 'auto' | 'over-under' | 'adjacent';\n      style?: Style;\n      toLatexOverride?: (atom: Atom, options: ToLatexOptions) => string;\n    }\n  ) {\n    this.command = options?.command;\n    this.type = type;\n    if (typeof options?.value === 'string') {\n      this.value = options.value;\n    }\n\n    this._isDirty = false;\n    this._changeCounter = 0;\n\n    this.mode = options?.mode ?? 'math';\n    this.isFunction = options?.isFunction ?? false;\n    this.subsupPlacement = options?.limits;\n    this.style = options?.style ?? {};\n    this.toLatexOverride = options?.toLatexOverride;\n  }\n\n  get changeCounter(): number {\n    return this._changeCounter;\n  }\n\n  get isDirty(): boolean {\n    return this._isDirty;\n  }\n\n  set isDirty(dirty: boolean) {\n    this._isDirty = dirty;\n    if (dirty) {\n      this._changeCounter++;\n      this.latex = undefined;\n      this._children = null;\n\n      let { parent } = this;\n      while (parent) {\n        parent._isDirty = true;\n        parent._changeCounter++;\n        parent.latex = undefined;\n        parent._children = null;\n\n        parent = parent.parent;\n      }\n    }\n  }\n\n  /**\n   * Return a list of spans equivalent to atoms.\n   * A span is the most elementary type possible, for example 'text'\n   * or 'vlist', while the input atoms may be more abstract and complex,\n   * such as 'genfrac'\n   *\n   * @param context Font family, variant, size, color, and other info useful\n   * to render an expression\n   * @param atoms - An array of atoms\n   */\n  static render(\n    inputContext: ContextInterface,\n    atoms: Atom[] | undefined\n  ): Span[] | null {\n    function isDigit(atom: Atom): boolean {\n      return (\n        atom.type === 'mord' &&\n        Boolean(atom.value) &&\n        /^[\\d,.]$/.test(atom.value)\n      );\n    }\n\n    function isText(atom: Atom): boolean {\n      return atom.mode === 'text';\n    }\n\n    if (!atoms) return null;\n    if (atoms.length === 0) return [];\n\n    // We can be passed either a Context object, or\n    // a ContextInterface objectl literal.\n    const context: Context =\n      inputContext instanceof Context\n        ? inputContext\n        : new Context(inputContext);\n\n    // In most cases we want to display selection,\n    // except if the `atomIdsSettings.groupNumbers` flag is set which is used for\n    // read aloud.\n    const displaySelection =\n      !context.atomIdsSettings || !context.atomIdsSettings.groupNumbers;\n\n    let result: Span[] | null = [];\n    if (atoms.length === 1) {\n      const span = atoms[0].render(context);\n      if (span && displaySelection && atoms[0].isSelected) {\n        span.selected(true);\n      }\n      if (span) result = [span];\n    } else {\n      let selection: Span[] = [];\n      let digitOrTextStringID = '';\n      let lastWasDigit = true;\n      for (const atom of atoms) {\n        if (\n          context.atomIdsSettings?.groupNumbers &&\n          digitOrTextStringID &&\n          ((lastWasDigit && isDigit(atom)) || (!lastWasDigit && isText(atom)))\n        ) {\n          context.atomIdsSettings.overrideID = digitOrTextStringID;\n        }\n\n        const span: Span = atom.render(context);\n        if (context.atomIdsSettings) {\n          context.atomIdsSettings.overrideID = null;\n        }\n\n        if (span) {\n          // Flatten the spans (i.e. [[a1, a2], b1, b2] -> [a1, a2, b1, b2]\n          context.phantomBase = [span];\n\n          // If this is a digit or text run, keep track of it\n          if (context.atomIdsSettings?.groupNumbers) {\n            if (isDigit(atom) || isText(atom)) {\n              if (!digitOrTextStringID || lastWasDigit !== isDigit(atom)) {\n                // Changed from text to digits or vice-versa\n                lastWasDigit = isDigit(atom);\n                digitOrTextStringID = atom.id;\n              }\n            }\n\n            if (\n              (!(isDigit(atom) || isText(atom)) ||\n                !atom.hasEmptyBranch('superscript') ||\n                !atom.hasEmptyBranch('subscript')) &&\n              digitOrTextStringID\n            ) {\n              // Done with digits/text\n              digitOrTextStringID = '';\n            }\n          }\n\n          if (displaySelection && atom.isSelected) {\n            selection.push(span);\n            for (const span of selection) span.selected(true);\n          } else {\n            if (selection.length > 0) {\n              // There was a selection, but we're out of it now\n              // Append the selection\n              result = [...result, ...selection];\n              selection = [];\n            }\n\n            result.push(span);\n          }\n        }\n      }\n\n      // Is there a leftover selection?\n      if (selection.length > 0) {\n        result = [...result, ...selection];\n        selection = [];\n      }\n    }\n\n    if (!result || result.length === 0) return null;\n\n    // If the mathstyle changed between the parent and the current atom,\n    // account for the size difference\n    if (context.mathstyle.id !== context.parentMathstyle.id) {\n      const factor =\n        context.mathstyle.sizeMultiplier /\n        context.parentMathstyle.sizeMultiplier;\n      for (const span of result) {\n        span.height *= factor;\n        span.depth *= factor;\n      }\n    }\n\n    // If the size changed between the parent and the current group,\n    // account for the size difference\n    if (context.size !== context.parentSize) {\n      const factor =\n        SIZING_MULTIPLIER[context.size] / SIZING_MULTIPLIER[context.parentSize];\n      for (const span of result) {\n        span.height *= factor;\n        span.depth *= factor;\n      }\n    }\n\n    return result;\n  }\n\n  /**\n   * Given an atom or an array of atoms, return a LaTeX string representation\n   */\n  static toLatex(\n    value: boolean | number | string | Atom | Atom[],\n    options: ToLatexOptions\n  ): string {\n    let result = '';\n    if (isArray<Atom>(value)) {\n      if (value.length > 0) result = atomsToLatex(value, options);\n    } else if (typeof value === 'number' || typeof value === 'boolean') {\n      result = value.toString();\n    } else if (typeof value === 'string') {\n      result = value.replace(/\\s/g, '~');\n    } else if (value !== undefined) {\n      // If we have some verbatim latex for this atom, use it.\n      // This allow non-significant punctuation to be preserved when possible.\n      if (!options.expandMacro && typeof value.latex === 'string') {\n        return value.latex;\n      }\n\n      if (value.toLatexOverride) {\n        return value.toLatexOverride(value, options);\n      }\n\n      result = value.toLatex(options);\n    }\n\n    return result;\n  }\n\n  /**\n   * The common ancestor between two atoms\n   */\n  static commonAncestor(a: Atom, b: Atom): Atom {\n    if (a === b) return a.parent;\n\n    // Short-circuit a common case\n    if (a.parent === b.parent) return a.parent;\n\n    // Accumulate all the parents of `a`\n    const parents = new WeakSet<Atom>();\n    let { parent } = a;\n    while (parent) {\n      parents.add(parent);\n      parent = parent.parent;\n    }\n\n    // Walk up the parents of `b`. If a parent of `b` is also a parent of\n    // `a`, it's the common ancestor\n    parent = b.parent;\n    while (parent) {\n      if (parents.has(parent)) return parent;\n      parent = parent.parent;\n    }\n\n    console.assert(Boolean(parent)); // Never reached\n    return null;\n  }\n\n  /**\n   * Default Latex emmiter.\n   * Avoid calling directly, instead call `Atom.toLatex(atom)`\n   * to correctly call per-definition emitters and use the cached verbatim\n   * latex when applicable.\n   */\n  toLatex(options: ToLatexOptions): string {\n    if (this.body && this.command) {\n      // There's a command and body\n      return joinLatex([\n        this.command,\n        '{',\n        this.bodyToLatex(options),\n        '}',\n        this.supsubToLatex(options),\n      ]);\n    }\n\n    if (this.body) {\n      // There's a body with no command\n      return joinLatex([\n        this.bodyToLatex(options),\n        this.supsubToLatex(options),\n      ]);\n    }\n\n    if (this.value && this.value !== '\\u200B') {\n      // There's probably just a value (which is a unicode character)\n      return this.command ?? unicodeCharToLatex(this.mode, this.value);\n    }\n\n    return '';\n  }\n\n  bodyToLatex(options: ToLatexOptions): string {\n    return Atom.toLatex(this.body, options);\n  }\n\n  aboveToLatex(options: ToLatexOptions): string {\n    return Atom.toLatex(this.above, options);\n  }\n\n  belowToLatex(options: ToLatexOptions): string {\n    return Atom.toLatex(this.below, options);\n  }\n\n  supsubToLatex(options: ToLatexOptions): string {\n    let result = '';\n    if (!this.hasEmptyBranch('superscript')) {\n      let sup = Atom.toLatex(this.superscript, options);\n      if (sup.length === 1) {\n        if (sup === '\\u2032') {\n          sup = '\\\\prime ';\n        } else if (sup === '\\u2033') {\n          sup = '\\\\doubleprime ';\n        }\n\n        result += '^' + sup;\n      } else {\n        result += '^{' + sup + '}';\n      }\n    }\n\n    if (!this.hasEmptyBranch('subscript')) {\n      const sub = Atom.toLatex(this.subscript, options);\n      result += sub.length === 1 ? '_' + sub : '_{' + sub + '}';\n    }\n\n    return result;\n  }\n\n  get treeDepth(): number {\n    let result = 1;\n    let atom = this.parent;\n    while (atom) {\n      atom = atom.parent;\n      result += 1;\n    }\n\n    return result;\n  }\n\n  get inCaptureSelection(): boolean {\n    let result = false;\n    // eslint-disable-next-line @typescript-eslint/no-this-alias\n    let atom: Atom = this;\n    while (atom) {\n      if (atom.captureSelection) {\n        result = true;\n        break;\n      }\n      atom = atom.parent;\n    }\n    return result;\n  }\n\n  /**\n   * Return the atoms in the branch, if it exists, otherwise null\n   */\n  branch(name: Branch): Atom[] | null {\n    if (!isNamedBranch(name)) return null;\n    if (!this._branches) return null;\n    return this._branches[name];\n  }\n\n  /**\n   * Return all the branches that exist.\n   * Some of them may be empty.\n   */\n  get branches(): Branch[] {\n    if (!this._branches) return [];\n    const result = [];\n    for (const branch of NAMED_BRANCHES) {\n      if (this._branches[branch]) {\n        result.push(branch);\n      }\n    }\n    return result;\n  }\n\n  /**\n   * Return the atoms in the branch, if it exists, otherwise create it\n   */\n  createBranch(name: Branch): Atom[] {\n    console.assert(isNamedBranch(name));\n    if (!isNamedBranch(name)) return [];\n    if (!this._branches) {\n      this._branches = {\n        [name]: [this.makeFirstAtom(name)],\n      };\n    } else if (!this._branches[name]) {\n      this._branches[name] = [this.makeFirstAtom(name)];\n    }\n\n    this.isDirty = true;\n    return this._branches[name];\n  }\n\n  get row(): number {\n    if (!isColRowBranch(this.treeBranch)) return -1;\n    return this.treeBranch[0];\n  }\n\n  get col(): number {\n    if (!isColRowBranch(this.treeBranch)) return -1;\n    return this.treeBranch[1];\n  }\n\n  get body(): Atom[] {\n    return this._branches?.body;\n  }\n\n  set body(atoms: Atom[]) {\n    this.setChildren(atoms, 'body');\n  }\n\n  get superscript(): Atom[] {\n    return this._branches?.superscript;\n  }\n\n  set superscript(atoms: Atom[]) {\n    this.setChildren(atoms, 'superscript');\n  }\n\n  get subscript(): Atom[] {\n    return this._branches?.subscript;\n  }\n\n  set subscript(atoms: Atom[]) {\n    this.setChildren(atoms, 'subscript');\n  }\n\n  get above(): Atom[] {\n    return this._branches?.above;\n  }\n\n  set above(atoms: Atom[]) {\n    this.setChildren(atoms, 'above');\n  }\n\n  get below(): Atom[] {\n    return this._branches?.below;\n  }\n\n  set below(atoms: Atom[]) {\n    this.setChildren(atoms, 'below');\n  }\n\n  get computedStyle(): Style {\n    const style = { ...this.style };\n    if (style) {\n      // Variant are not included in the computed style (they're not inherited)\n      delete style.variant;\n      delete style.variantStyle;\n    }\n\n    if (!this.parent) return style ?? {};\n    return { ...this.parent.computedStyle, ...style };\n  }\n\n  applyStyle(style: Style): void {\n    this.isDirty = true;\n    this.style = { ...this.style, ...style };\n\n    if (this.style.fontFamily === 'none') {\n      delete this.style.fontFamily;\n    }\n\n    if (this.style.fontShape === 'auto') {\n      delete this.style.fontShape;\n    }\n\n    if (this.style.fontSeries === 'auto') {\n      delete this.style.fontSeries;\n    }\n\n    if (this.style.color === 'none') {\n      delete this.style.color;\n    }\n\n    if (this.style.backgroundColor === 'none') {\n      delete this.style.backgroundColor;\n    }\n\n    if (this.style.fontSize === 'auto') {\n      delete this.style.fontSize;\n    }\n  }\n\n  getInitialBaseElement(): Atom {\n    let result: Atom;\n    if (!this.hasEmptyBranch('body')) {\n      console.assert(this.body[0].type === 'first');\n      result = this.body[1].getInitialBaseElement();\n    }\n\n    return result ?? this;\n  }\n\n  getFinalBaseElement(): Atom {\n    if (!this.hasEmptyBranch('body')) {\n      return this.body[this.body.length - 1].getFinalBaseElement();\n    }\n\n    return this;\n  }\n\n  isCharacterBox(): boolean {\n    const base = this.getInitialBaseElement();\n    return /minner|mbin|mrel|mpunct|mopen|mclose|textord/.test(base.type);\n  }\n\n  hasEmptyBranch(branch: Branch): boolean {\n    const atoms = this.branch(branch);\n    if (!atoms) return true;\n    console.assert(atoms.length > 0);\n    console.assert(atoms[0].type === 'first');\n    return atoms.length === 1;\n  }\n\n  /*\n   * Setting `null` does nothing\n   * Setting `[]` adds an empty list (the branch is created)\n   * The children should *not* start with a `'first'` atom:\n   * the `first` atom will be added if necessary\n   */\n  setChildren(children: Atom[], branch: Branch): void {\n    if (!children) return;\n    console.assert(isNamedBranch(branch));\n    if (!isNamedBranch(branch)) return;\n    console.assert(children[0]?.type !== 'first');\n\n    // Update the parent\n    if (this._branches) {\n      this._branches[branch] = [this.makeFirstAtom(branch), ...children];\n    } else {\n      this._branches = {\n        [branch]: [this.makeFirstAtom(branch), ...children],\n      };\n    }\n\n    this.isDirty = true;\n\n    // Update the children\n    for (const child of children) {\n      child.parent = this;\n      child.treeBranch = branch;\n    }\n  }\n\n  makeFirstAtom(branch: Branch): Atom {\n    const result = new Atom('first', { mode: this.mode });\n    result.parent = this;\n    result.treeBranch = branch;\n    return result;\n  }\n\n  addChild(child: Atom, branch: Branch): void {\n    console.assert(child.type !== 'first');\n\n    this.createBranch(branch).push(child);\n    this.isDirty = true;\n\n    // Update the child\n    child.parent = this;\n    child.treeBranch = branch;\n  }\n\n  addChildBefore(child: Atom, before: Atom): void {\n    const branch = this.createBranch(before.treeBranch);\n    branch.splice(branch.indexOf(before), 0, child);\n    this.isDirty = true;\n\n    // Update the child\n    child.parent = this;\n    child.treeBranch = before.treeBranch;\n  }\n\n  addChildAfter(child: Atom, after: Atom): void {\n    const branch = this.createBranch(after.treeBranch);\n    branch.splice(branch.indexOf(after) + 1, 0, child);\n    this.isDirty = true;\n\n    // Update the child\n    child.parent = this;\n    child.treeBranch = after.treeBranch;\n  }\n\n  addChildren(children: Atom[], branch: Branch): void {\n    for (const child of children) this.addChild(child, branch);\n  }\n\n  /**\n   * Return the last atom that was added\n   */\n  addChildrenAfter(children: Atom[], after: Atom): Atom {\n    console.assert(children.length === 0 || children[0].type !== 'first');\n    const branch = this.createBranch(after.treeBranch);\n    branch.splice(branch.indexOf(after) + 1, 0, ...children);\n    this.isDirty = true;\n\n    // Update the children\n    for (const child of children) {\n      child.parent = this;\n      child.treeBranch = after.treeBranch;\n    }\n    return children[children.length - 1];\n  }\n\n  removeBranch(name: Branch): Atom[] {\n    const children = this.branch(name);\n    if (isNamedBranch(name)) {\n      this._branches[name] = null;\n    }\n\n    for (const child of children) {\n      child.parent = null;\n      child.treeBranch = undefined;\n    }\n    // Drop the 'first' element\n    console.assert(children[0].type === 'first');\n    children.shift();\n    this.isDirty = true;\n    return children;\n  }\n\n  removeChild(child: Atom): void {\n    console.assert(child.parent === this);\n\n    // `first` atom cannot be deleted\n    if (child.type === 'first') return;\n\n    // Update the parent\n    const branch = this.branch(child.treeBranch);\n    const index = branch.indexOf(child);\n    console.assert(index >= 0);\n    branch.splice(index, 1);\n    this.isDirty = true;\n\n    // Update the child\n    child.parent = null;\n    child.treeBranch = undefined;\n  }\n\n  get siblings(): Atom[] {\n    if (this.type === 'root') return [];\n    return this.parent.branch(this.treeBranch);\n  }\n\n  get firstSibling(): Atom {\n    return this.siblings[0];\n  }\n\n  get lastSibling(): Atom {\n    const { siblings } = this;\n    return siblings[siblings.length - 1];\n  }\n\n  get isFirstSibling(): boolean {\n    return this === this.firstSibling;\n  }\n\n  get isLastSibling(): boolean {\n    return this === this.lastSibling;\n  }\n\n  get hasNoSiblings(): boolean {\n    // There is always at least one sibling, the 'first'\n    // atom, but we don't count it.\n    return this.siblings.length === 1;\n  }\n\n  get leftSibling(): Atom {\n    const siblings = this.parent.branch(this.treeBranch);\n    return siblings[siblings.indexOf(this) - 1];\n  }\n\n  get rightSibling(): Atom {\n    const siblings = this.parent.branch(this.treeBranch);\n    return siblings[siblings.indexOf(this) + 1];\n  }\n\n  get hasChildren(): boolean {\n    return this._branches && this.children.length > 0;\n  }\n\n  get firstChild(): Atom {\n    console.assert(this.hasChildren);\n    return this.children[0];\n  }\n\n  get lastChild(): Atom {\n    console.assert(this.hasChildren);\n    const { children } = this;\n    return children[children.length - 1];\n  }\n\n  /**\n   * All the children of this atom.\n   *\n   * The order of the atoms is the order in which they\n   * are navigated using the keyboard.\n   */\n  get children(): Atom[] {\n    if (this._children) return this._children;\n    if (!this._branches) return [];\n    const result = [];\n    for (const branchName of NAMED_BRANCHES) {\n      if (this._branches[branchName]) {\n        for (const x of this._branches[branchName]) {\n          result.push(...x.children);\n          result.push(x);\n        }\n      }\n    }\n\n    this._children = result;\n    return result;\n  }\n\n  /**\n   * Render this atom as an array of Spans\n   *\n   * @param context Font variant, size, color, etc...\n   */\n  render(context: Context): Span | null {\n    // Render the body branch if present, even if it's empty (need to\n    // render the 'first' atom to render the caret in an empty branch)\n    let classes = '';\n    if (this.containsCaret) classes += 'ML__contains';\n    if (this.type === 'root') classes += ' ML__base';\n    if (this.type !== 'first') {\n      classes += context.parentMathstyle.adjustTo(context.mathstyle);\n    }\n    let result: Span = this.makeSpan(context, this.body ?? this.value, {\n      classes,\n    });\n    if (!result) return null;\n\n    // Finally, render any necessary superscript, subscripts\n    if (!this.subsupPlacement && (this.superscript || this.subscript)) {\n      // If `limits` is set, the attachment of sup/sub was handled\n      // in the atom decomposition (e.g. mop, accent)\n      result = this.attachSupsub(context, result, result.type);\n    }\n\n    return result;\n  }\n\n  attachSupsub(context: Context, nucleus: Span, type: SpanType): Span {\n    // If no superscript or subscript, nothing to do.\n    if (!this.superscript && !this.subscript) {\n      return nucleus;\n    }\n\n    // Superscript and subscripts are discussed in the TeXbook\n    // on page 445-446, rules 18(a-f).\n    // TeX:14859-14945\n    const { mathstyle } = context;\n    let supmid: Span = null;\n    let submid: Span = null;\n    if (this.superscript) {\n      supmid = new Span(Atom.render(context.sup(), this.superscript));\n    }\n\n    if (this.subscript) {\n      submid = new Span(Atom.render(context.sub(), this.subscript));\n    }\n\n    // Rule 18a, p445\n    let supShift = 0;\n    let subShift = 0;\n    if (!this.isCharacterBox()) {\n      supShift = nucleus.height - mathstyle.metrics.supDrop;\n      subShift = nucleus.depth + mathstyle.metrics.subDrop;\n    }\n\n    // Rule 18c, p445\n    let minSupShift: number;\n    if (mathstyle === MATHSTYLES.displaystyle) {\n      minSupShift = mathstyle.metrics.sup1; // Sigma13\n    } else if (mathstyle.cramped) {\n      minSupShift = mathstyle.metrics.sup3; // Sigma15\n    } else {\n      minSupShift = mathstyle.metrics.sup2; // Sigma14\n    }\n\n    // Scriptspace is a font-size-independent size, so scale it\n    // appropriately @revisit: do we really need to do this scaling? It's in em...\n    const multiplier =\n      MATHSTYLES.textstyle.sizeMultiplier * mathstyle.sizeMultiplier;\n    const scriptspace = 0.5 / FONTMETRICS.ptPerEm / multiplier;\n    let supsub: Span | null = null;\n    if (submid && supmid) {\n      // Rule 18e\n      supShift = Math.max(\n        supShift,\n        minSupShift,\n        supmid.depth + 0.25 * mathstyle.metrics.xHeight\n      );\n      subShift = Math.max(subShift, mathstyle.metrics.sub2);\n      const ruleWidth = FONTMETRICS.defaultRuleThickness;\n      if (\n        supShift - supmid.depth - (submid.height - subShift) <\n        4 * ruleWidth\n      ) {\n        subShift = 4 * ruleWidth - (supShift - supmid.depth) + submid.height;\n        const psi = 0.8 * mathstyle.metrics.xHeight - (supShift - supmid.depth);\n        if (psi > 0) {\n          supShift += psi;\n          subShift -= psi;\n        }\n      }\n\n      supsub = makeVlist(\n        context,\n        [\n          [submid, subShift],\n          [supmid, -supShift],\n        ],\n        'individualShift'\n      );\n      // Subscripts shouldn't be shifted by the nucleus' italic correction.\n      // Account for that by shifting the subscript back the appropriate\n      // amount. Note we only do this when the nucleus is a single symbol.\n      if (this.isExtensibleSymbol) {\n        supsub.children[0].left = -(nucleus.italic ?? 0);\n      }\n    } else if (submid && !supmid) {\n      // Rule 18b\n      subShift = Math.max(\n        subShift,\n        mathstyle.metrics.sub1,\n        submid.height - 0.8 * mathstyle.metrics.xHeight\n      );\n      supsub = makeVlist(context, [submid], 'shift', { initialPos: subShift });\n      supsub.children[0].right = scriptspace;\n      if (this.isCharacterBox()) {\n        supsub.children[0].left = -(nucleus.italic ?? 0);\n      }\n    } else if (!submid && supmid) {\n      // Rule 18c, d\n      supShift = Math.max(\n        supShift,\n        minSupShift,\n        supmid.depth + 0.25 * mathstyle.metrics.xHeight\n      );\n      supsub = makeVlist(context, [supmid], 'shift', { initialPos: -supShift });\n      supsub.children[0].right = scriptspace;\n    }\n\n    // Display the caret *following* the superscript and subscript,\n    // so attach the caret to the 'msubsup' element.\n    const supsubContainer = new Span(supsub, { classes: 'msubsup' });\n    if (this.caret) {\n      supsubContainer.caret = this.caret;\n      // This.caret = ''; // @revisit: we shouln't clear the **Atom** caret\n    }\n\n    return new Span([nucleus, supsubContainer], { type });\n  }\n\n  attachLimits(\n    context: Context,\n    nucleus: Span,\n    nucleusShift: number,\n    slant: number\n  ): Span {\n    const limitAbove = this.superscript\n      ? new Span(Atom.render(context.sup(), this.superscript))\n      : null;\n    const limitBelow = this.subscript\n      ? new Span(Atom.render(context.sub(), this.subscript))\n      : null;\n    return makeLimitsStack(\n      context,\n      nucleus,\n      nucleusShift,\n      slant,\n      limitAbove,\n      limitBelow\n    );\n  }\n\n  /**\n   * Add an ID attribute to both the span and this atom so that the atom\n   * can be retrieved from the span later on (e.g. when the span is clicked on)\n   */\n  bind(context: Context, span: Span): Span {\n    if (this.type !== 'first' && this.value !== '\\u200B') {\n      this.id = context.makeID();\n      if (this.id) {\n        if (!span.attributes) span.attributes = {};\n        span.attributes['data-atom-id'] = this.id;\n      }\n    }\n\n    return span;\n  }\n\n  /**\n   * Create a span with the specified body and with a class attribute\n   * equal to the type ('mbin', 'inner', 'spacing', etc...)\n   *\n   */\n  makeSpan(\n    context: Context,\n    value: string | Atom[],\n    options?: { style?: Style; classes?: string }\n  ): Span {\n    // Ensure that the atom type is a valid Span type, or use ''\n    const type: SpanType = isSpanType(this.type) ? this.type : '';\n\n    // The font family is determined by:\n    // - the base font family associated with this atom (optional). For example,\n    // some atoms such as some functions ('\\sin', '\\cos', etc...) or some\n    // symbols ('\\Z') have an explicit font family. This overrides any\n    // other font family\n    // - the user-specified font family that has been explicitly applied to\n    // this atom\n    // - the font family automatically determined in math mode, for example\n    // which italicizes some characters, but which can be overridden\n\n    const style: Style = options?.style ?? {\n      variant: 'normal', // Will auto-italicize\n      ...this.style,\n      letterShapeStyle: context.letterShapeStyle,\n    };\n\n    let classes = options?.classes ?? '';\n\n    if (this.mode === 'text') classes += ' ML__text';\n\n    // Apply size correction\n    const size = style?.fontSize ? style.fontSize : 'size5';\n    if (size !== context.parentSize) {\n      classes += ' sizing reset-' + context.parentSize;\n      classes += ' ' + size;\n    } else if (context.parentSize !== context.size) {\n      classes += ' sizing reset-' + context.parentSize;\n      classes += ' ' + context.size;\n    }\n\n    const result = new Span(\n      typeof value === 'string' ? value : Atom.render(context, value),\n      { type, mode: this.mode, style, classes }\n    );\n\n    /** @revisit: If maxFontSize is changed, it should be applied to height/depth */\n    result.maxFontSize = Math.max(\n      result.maxFontSize,\n      context.mathstyle.sizeMultiplier ?? 1\n    );\n\n    // Set other attributes\n    if (context.mathstyle.isTight()) result.isTight = true;\n    // The italic correction applies only in math mode\n    if (this.mode !== 'math') result.italic = 0;\n    result.right = result.italic; // Italic correction\n\n    if (typeof context.opacity === 'number') {\n      result.setStyle('opacity', context.opacity);\n    }\n\n    // To retrieve the atom from a span, for example when the span is clicked\n    // on, attach a randomly generated ID to the span and associate it\n    // with the atom.\n    this.bind(context, result);\n    if (this.caret) {\n      // If this has a super/subscript, the caret will be attached\n      // to the 'msubsup' atom, so no need to have it here.\n      if (!this.superscript && !this.subscript) {\n        result.caret = this.caret;\n      }\n    }\n\n    return result;\n  }\n}\n\n/* Combine a nucleus with an atom above and an atom below. Used to form\n * limits.\n *\n * @param context\n * @param nucleus The base over and under which the atoms will\n * be placed.\n * @param nucleusShift The vertical shift of the nucleus from\n * the baseline.\n * @param slant For operators that have a slant, such as \\int,\n * indicate by how much to horizontally offset the above and below atoms\n */\nfunction makeLimitsStack(\n  context: Context,\n  nucleus: Span,\n  nucleusShift: number,\n  slant: number,\n  above: Span,\n  below: Span\n): Span {\n  // If nothing above and nothing below, nothing to do.\n  if (!above && !below) return nucleus;\n\n  // IE8 clips \\int if it is in a display: inline-block. We wrap it\n  // in a new span so it is an inline, and works.\n  // @todo: revisit\n  nucleus = new Span(nucleus);\n\n  let aboveShift = 0;\n  let belowShift = 0;\n\n  if (above) {\n    aboveShift = Math.max(\n      FONTMETRICS.bigOpSpacing1,\n      FONTMETRICS.bigOpSpacing3 - above.depth\n    );\n  }\n\n  if (below) {\n    belowShift = Math.max(\n      FONTMETRICS.bigOpSpacing2,\n      FONTMETRICS.bigOpSpacing4 - below.height\n    );\n  }\n\n  let result: Span | null = null;\n\n  if (below && above) {\n    const bottom =\n      FONTMETRICS.bigOpSpacing5 +\n      below.height +\n      below.depth +\n      belowShift +\n      nucleus.depth +\n      nucleusShift;\n\n    result = makeVlist(\n      context,\n      [\n        FONTMETRICS.bigOpSpacing5,\n        below,\n        belowShift,\n        nucleus,\n        aboveShift,\n        above,\n        FONTMETRICS.bigOpSpacing5,\n      ],\n      'bottom',\n      { initialPos: bottom }\n    );\n\n    // Here, we shift the limits by the slant of the symbol. Note\n    // that we are supposed to shift the limits by 1/2 of the slant,\n    // but since we are centering the limits adding a full slant of\n    // margin will shift by 1/2 that.\n    result.children[0].left = -slant;\n    result.children[2].left = slant;\n  } else if (below && !above) {\n    const top = nucleus.height - nucleusShift;\n\n    result = makeVlist(\n      context,\n      [FONTMETRICS.bigOpSpacing5, below, belowShift, nucleus],\n      'top',\n      { initialPos: top }\n    );\n\n    // See comment above about slants\n    result.children[0].left = -slant;\n  } else if (!below && above) {\n    const bottom = nucleus.depth + nucleusShift;\n\n    result = makeVlist(\n      context,\n      [nucleus, aboveShift, above, FONTMETRICS.bigOpSpacing5],\n      'bottom',\n      { initialPos: bottom }\n    );\n\n    // See comment above about slants\n    result.children[1].left = slant;\n  }\n\n  return new Span(result, { classes: 'op-limits', type: 'mop' });\n}\n\n/**\n *\n * @param atoms the list of atoms to emit as LaTeX\n * @param options.expandMacro true if macros should be expanded\n * @result a LaTeX string\n */\nfunction atomsToLatex(atoms: Atom[], options: ToLatexOptions): string {\n  if (atoms[0].type === 'first') {\n    if (atoms.length === 1) return '';\n    // Remove the 'first' atom, if present\n    atoms = atoms.slice(1);\n  }\n\n  if (atoms.length === 0) return '';\n\n  return joinLatex(\n    getPropertyRuns(atoms, 'cssClass').map((x) =>\n      joinLatex(\n        getPropertyRuns(x, 'color').map((x) =>\n          joinLatex(getModeRuns(x).map((x) => Mode.toLatex(x, options)))\n        )\n      )\n    )\n  );\n}\n","/**\n * This module contains some color dictionaries and algorithms to\n * parse a string into a hex RGB color value.s\n * @summary   Parsing of color strings.\n */\n\n/*\n{\\color{apricot}\\blacksquare}{\\color{aquamarine}\\blacksquare}{\\color{bittersweet}\\blacksquare}{\\color{black}\\blacksquare}{\\color{blue}\\blacksquare}{\\color{blueGreen}\\blacksquare}{\\color{blueviolet}\\blacksquare}{\\color{brickred}\\blacksquare}{\\color{brown}\\blacksquare}{\\color{burntorange}\\blacksquare}{\\color{cadetblue}\\blacksquare}{\\color{carnationpink}\\blacksquare}{\\color{cerulean}\\blacksquare}{\\color{cornflowerblue}\\blacksquare}{\\color{cyan}\\blacksquare}{\\color{dandelion}\\blacksquare}{\\color{darkorchid}\\blacksquare}{\\color{emerald}\\blacksquare}{\\color{forestgreen}\\blacksquare}{\\color{fuchsia}\\blacksquare}{\\color{goldenrod}\\blacksquare}{\\color{gray}\\blacksquare}{\\color{green}\\blacksquare}{\\color{greenyellow}\\blacksquare}{\\color{junglegreen}\\blacksquare}{\\color{lavender}\\blacksquare}{\\color{limegreen}\\blacksquare}{\\color{magenta}\\blacksquare}{\\color{mahogany}\\blacksquare}{\\color{maroon}\\blacksquare}{\\color{melon}\\blacksquare}{\\color{midnightblue}\\blacksquare}{\\color{mulberry}\\blacksquare}{\\color{navyblue}\\blacksquare}{\\color{olivegreen}\\blacksquare}{\\color{orange}\\blacksquare}{\\color{orangered}\\blacksquare}{\\color{orchid}\\blacksquare}{\\color{peach}\\blacksquare}{\\color{periwinkle}\\blacksquare}{\\color{pinegreen}\\blacksquare}{\\color{plum}\\blacksquare}{\\color{processblue}\\blacksquare}{\\color{purple}\\blacksquare}{\\color{rawsienna}\\blacksquare}{\\color{red}\\blacksquare}{\\color{redorange}\\blacksquare}{\\color{redviolet}\\blacksquare}{\\color{rhodamine}\\blacksquare}{\\color{royalblue}\\blacksquare}{\\color{royalpurple}\\blacksquare}{\\color{rubinered}\\blacksquare}{\\color{salmon}\\blacksquare}{\\color{seagreen}\\blacksquare}{\\color{sepia}\\blacksquare}{\\color{skyblue}\\blacksquare}{\\color{springgreen}\\blacksquare}{\\color{tan}\\blacksquare}{\\color{tealblue}\\blacksquare}{\\color{thistle}\\blacksquare}{\\color{turquoise}\\blacksquare}{\\color{violet}\\blacksquare}{\\color{violetred}\\blacksquare}{\\color{white}\\blacksquare}{\\color{wildstrawberry}\\blacksquare}{\\color{yellow}\\blacksquare}{\\color{yellowgreen}\\blacksquare}{\\color{yelloworange}\\blacksquare}\n*/\n\n/**\n * First 10 predefined colors used for plotting by Mathematica.\n *\n * Also known as _indexed color scheme #97_.\n */\nconst MATHEMATICA_COLORS: Record<string, string> = {\n  m0: '#3F3D99', // Strong blue\n  m1: '#993D71', // Strong cerise\n  m2: '#998B3D', // Strong gold\n  m3: '#3D9956', // Malachite green\n  m4: '#3D5A99', // Strong cobalt blue\n  m5: '#993D90', // Strong orchid\n  m6: '#996D3D', // Strong orange\n  m7: '#43993D', // Strong sap green\n  m8: '#3D7999', // Cornflower blue\n  m9: '#843D99', // Mulberry\n};\n// ColorData97 (Mathematica standard lines)\n// rgb(0.368417, 0.506779, 0.709798),       #5e81b5\n// rgb(0.880722, 0.611041, 0.142051),\n// rgb(0.560181, 0.691569, 0.194885),\n// rgb(0.922526, 0.385626, 0.209179),\n// rgb(0.528488, 0.470624, 0.701351),\n// rgb(0.772079, 0.431554, 0.102387),\n// rgb(0.363898, 0.618501, 0.782349),\n// rgb(1, 0.75, 0),\n// rgb(0.647624, 0.37816, 0.614037),\n// rgb(0.571589, 0.586483, 0.),\n// rgb(0.915, 0.3325, 0.2125),\n// rgb(0.40082222609352647, 0.5220066643438841, 0.85),\n// rgb(0.9728288904374106, 0.621644452187053, 0.07336199581899142),\n// rgb(0.736782672705901, 0.358, 0.5030266573755369),\n// rgb(0.28026441037696703, 0.715, 0.4292089322474965)\n\n// MathLab colors\n// '#0072bd' // [0, 0.4470, 0.7410]             blue\n// '#d95319' // [0.8500, 0.3250, 0.0980]        orange\n// '#edb120', // [0.9290, 0.6940, 0.1250]       yellow\n// '#7e2f8e', // [0.4940, 0.1840, 0.5560]       purple\n// '#77ac30', // [0.4660, 0.6740, 0.1880]       green\n// '#4dbeee', // [0.3010, 0.7450, 0.9330]       cyan\n// '#a2142f' // [0.6350, 0.0780, 0.1840]\t    dark red\n\n/* Area colors are most appropriate to color a large area */\nexport const AREA_COLORS = [\n  '#d35d60', // Red\n  '#7293cb', // Cobalt blue\n  '#e1974d', // Orange\n  '#84bb5d', // Pistachio\n  '#9066a7', // Purple\n  '#aD6a58', // Vermilion\n  '#f5a4ce', // Pale rose\n  '#fff590', // Pale gold\n  '#212121', // Black\n  '#818787', // Dark grey\n  '#d4d5d2', // Light grey\n  '#ffffff', // White\n];\n\n/* Line colors are most appropriate to color as a stroke color */\nexport const LINE_COLORS = [\n  '#cc2428', // Red\n  '#3769b1', // Cobalt blue\n  '#da7e30', // Orange\n  '#409852', // Malachite green\n  '#6b4c9a', // Blue violet\n  '#922426', // Red\n  '#e7298a', // Brilliant rose\n  '#ffe907', // Vivid gold\n  '#000000',\n  '#525055',\n  '#adafaa',\n  '#ffffff',\n];\n\n/**\n * 68 colors (+ white) known to dvips used in LaTeX.\n *\n * The color names are based on the names of the _Crayola Crayon_ box of\n * 64 crayons.\n *\n * See:\n * - {@link http://mirror.jmu.edu/pub/CTAN/systems/knuth/local/lib/colordvi.tex | ColorDVI.tex}\n * - {@link https://en.wikibooks.org/w/index.php?title=LaTeX/Colors | Wikibooks:LaTeX/Colors}\n */\nconst NAMED_COLORS: Record<string, string> = {\n  apricot: '#FBB982',\n  aquamarine: '#00B5BE',\n  bittersweet: '#C04F17',\n  black: '#221E1F', // Indeed.\n  blue: '#2D2F92',\n  bluegreen: '#00B3B8',\n  blueviolet: '#473992',\n  brickred: '#B6321C',\n  brown: '#792500',\n  burntorange: '#F7921D',\n  cadetblue: '#74729A',\n  carnationpink: '#F282B4',\n  cerulean: '#00A2E3',\n  cornflowerblue: '#41B0E4',\n  cyan: '#00AEEF',\n  dandelion: '#FDBC42',\n  darkorchid: '#A4538A',\n  emerald: '#00A99D',\n  forestgreen: '#009B55',\n  fuchsia: '#8C368C',\n  goldenrod: '#FFDF42',\n  gray: '#949698',\n  green: '#00A64F',\n  greenyellow: '#DFE674',\n  junglegreen: '#00A99A',\n  lavender: '#F49EC4',\n  limegreen: '#8DC73E',\n  magenta: '#EC008C',\n  mahogany: '#A9341F',\n  maroon: '#AF3235',\n  melon: '#F89E7B',\n  midnightblue: '#006795',\n  mulberry: '#A93C93',\n  navyblue: '#006EB8',\n  olivegreen: '#3C8031',\n  orange: '#F58137',\n  orangered: '#ED135A',\n  orchid: '#AF72B0',\n  peach: '#F7965A',\n  periwinkle: '#7977B8',\n  pinegreen: '#008B72',\n  plum: '#92268F',\n  processblue: '#00B0F0',\n  purple: '#99479B',\n  rawsienna: '#974006',\n  red: '#ED1B23',\n  redorange: '#F26035',\n  redviolet: '#A1246B',\n  rhodamine: '#EF559F',\n  royalblue: '#0071BC',\n  royalpurple: '#613F99',\n  rubinered: '#ED017D',\n  salmon: '#F69289',\n  seagreen: '#3FBC9D',\n  sepia: '#671800',\n  skyblue: '#46C5DD',\n  springgreen: '#C6DC67',\n  tan: '#DA9D76',\n  tealblue: '#00AEB3',\n  thistle: '#D883B7',\n  turquoise: '#00B4CE',\n  violet: '#58429B',\n  violetred: '#EF58A0',\n  white: '#FFFFFF',\n  wildstrawberry: '#EE2967',\n  yellow: '#FFF200',\n  yellowgreen: '#98CC70',\n  yelloworange: '#FAA21A',\n};\n\n// Other color lists: SVG colors, x11 colors\n/*\naliceblue\trgb(240, 248, 255)\nantiquewhite\trgb(250, 235, 215)\naqua\trgb( 0, 255, 255)\naquamarine\trgb(127, 255, 212)\nazure\trgb(240, 255, 255)\nbeige\trgb(245, 245, 220)\nbisque\trgb(255, 228, 196)\nblack\trgb( 0, 0, 0)\nblanchedalmond\trgb(255, 235, 205)\nblue\trgb( 0, 0, 255)\nblueviolet\trgb(138, 43, 226)\nbrown\trgb(165, 42, 42)\nburlywood\trgb(222, 184, 135)\ncadetblue\trgb( 95, 158, 160)\nchartreuse\trgb(127, 255, 0)\nchocolate\trgb(210, 105, 30)\ncoral\trgb(255, 127, 80)\ncornflowerblue\trgb(100, 149, 237)\ncornsilk\trgb(255, 248, 220)\ncrimson\trgb(220, 20, 60)\ncyan\trgb( 0, 255, 255)\ndarkblue\trgb( 0, 0, 139)\ndarkcyan\trgb( 0, 139, 139)\ndarkgoldenrod\trgb(184, 134, 11)\ndarkgray\trgb(169, 169, 169)\ndarkgreen\trgb( 0, 100, 0)\ndarkgrey\trgb(169, 169, 169)\ndarkkhaki\trgb(189, 183, 107)\ndarkmagenta\trgb(139, 0, 139)\ndarkolivegreen\trgb( 85, 107, 47)\ndarkorange\trgb(255, 140, 0)\ndarkorchid\trgb(153, 50, 204)\ndarkred\trgb(139, 0, 0)\ndarksalmon\trgb(233, 150, 122)\ndarkseagreen\trgb(143, 188, 143)\ndarkslateblue\trgb( 72, 61, 139)\ndarkslategray\trgb( 47, 79, 79)\ndarkslategrey\trgb( 47, 79, 79)\ndarkturquoise\trgb( 0, 206, 209)\ndarkviolet\trgb(148, 0, 211)\ndeeppink\trgb(255, 20, 147)\ndeepskyblue\trgb( 0, 191, 255)\ndimgray\trgb(105, 105, 105)\ndimgrey\trgb(105, 105, 105)\ndodgerblue\trgb( 30, 144, 255)\nfirebrick\trgb(178, 34, 34)\nfloralwhite\trgb(255, 250, 240)\nforestgreen\trgb( 34, 139, 34)\nfuchsia\trgb(255, 0, 255)\ngainsboro\trgb(220, 220, 220)\nghostwhite\trgb(248, 248, 255)\ngold\trgb(255, 215, 0)\ngoldenrod\trgb(218, 165, 32)\ngray\trgb(128, 128, 128)\ngrey\trgb(128, 128, 128)\ngreen\trgb( 0, 128, 0)\ngreenyellow\trgb(173, 255, 47)\nhoneydew\trgb(240, 255, 240)\nhotpink\trgb(255, 105, 180)\nindianred\trgb(205, 92, 92)\nindigo\trgb( 75, 0, 130)\nivory\trgb(255, 255, 240)\nkhaki\trgb(240, 230, 140)\nlavender\trgb(230, 230, 250)\nlavenderblush\trgb(255, 240, 245)\nlawngreen\trgb(124, 252, 0)\nlemonchiffon\trgb(255, 250, 205)\nlightblue\trgb(173, 216, 230)\nlightcoral\trgb(240, 128, 128)\nlightcyan\trgb(224, 255, 255)\nlightgoldenrodyellow\trgb(250, 250, 210)\nlightgray\trgb(211, 211, 211)\nlightgreen\trgb(144, 238, 144)\nlightgrey\trgb(211, 211, 211)\nlightpink\trgb(255, 182, 193)\nlightsalmon\trgb(255, 160, 122)\nlightseagreen\trgb( 32, 178, 170)\nlightskyblue\trgb(135, 206, 250)\nlightslategray\trgb(119, 136, 153)\nlightslategrey\trgb(119, 136, 153)\nlightsteelblue\trgb(176, 196, 222)\nlightyellow\trgb(255, 255, 224)\nlime\trgb( 0, 255, 0)\nlimegreen\trgb( 50, 205, 50)\nlinen\trgb(250, 240, 230)\nmagenta\trgb(255, 0, 255)\nmaroon\trgb(128, 0, 0)\nmediumaquamarine\trgb(102, 205, 170)\nmediumblue\trgb( 0, 0, 205)\nmediumorchid\trgb(186, 85, 211)\nmediumpurple\trgb(147, 112, 219)\nmediumseagreen\trgb( 60, 179, 113)\nmediumslateblue\trgb(123, 104, 238)\nmediumspringgreen\trgb( 0, 250, 154)\nmediumturquoise\trgb( 72, 209, 204)\nmediumvioletred\trgb(199, 21, 133)\nmidnightblue\trgb( 25, 25, 112)\nmintcream\trgb(245, 255, 250)\nmistyrose\trgb(255, 228, 225)\nmoccasin\trgb(255, 228, 181)\nnavajowhite\trgb(255, 222, 173)\nnavy\trgb( 0, 0, 128)\noldlace\trgb(253, 245, 230)\nolive\trgb(128, 128, 0)\nolivedrab\trgb(107, 142, 35)\norange\trgb(255, 165, 0)\norangered\trgb(255, 69, 0)\norchid\trgb(218, 112, 214)\npalegoldenrod\trgb(238, 232, 170)\npalegreen\trgb(152, 251, 152)\npaleturquoise\trgb(175, 238, 238)\npalevioletred\trgb(219, 112, 147)\npapayawhip\trgb(255, 239, 213)\npeachpuff\trgb(255, 218, 185)\nperu\trgb(205, 133, 63)\npink\trgb(255, 192, 203)\nplum\trgb(221, 160, 221)\npowderblue\trgb(176, 224, 230)\npurple\trgb(128, 0, 128)\nred\trgb(255, 0, 0)\nrosybrown\trgb(188, 143, 143)\nroyalblue\trgb( 65, 105, 225)\nsaddlebrown\trgb(139, 69, 19)\nsalmon\trgb(250, 128, 114)\nsandybrown\trgb(244, 164, 96)\nseagreen\trgb( 46, 139, 87)\nseashell\trgb(255, 245, 238)\nsienna\trgb(160, 82, 45)\nsilver\trgb(192, 192, 192)\nskyblue\trgb(135, 206, 235)\nslateblue\trgb(106, 90, 205)\nslategray\trgb(112, 128, 144)\nslategrey\trgb(112, 128, 144)\nsnow\trgb(255, 250, 250)\nspringgreen\trgb( 0, 255, 127)\nsteelblue\trgb( 70, 130, 180)\ntan\trgb(210, 180, 140)\nteal\trgb( 0, 128, 128)\nthistle\trgb(216, 191, 216)\ntomato\trgb(255, 99, 71)\nturquoise\trgb( 64, 224, 208)\nviolet\trgb(238, 130, 238)\nwheat\trgb(245, 222, 179)\nwhite\trgb(255, 255, 255)\nwhitesmoke\trgb(245, 245, 245)\nyellow\trgb(255, 255, 0)\nyellowgreen\trgb(154, 205, 50)\n \t \n*/\n\n/**\n * Return a CSS color (#rrggbb) from a string.\n *\n * Possible formats include:\n * - named colors from the DVI color set: 'Yellow', 'red'... Case insensitive.\n * - colors from the Mathematica set: 'm1'...'m9'\n * - 3-digit hex: `'#d50'`\n * - 6-digit hex: `'#dd5500'`\n * - RGB functional: `'rgb(240, 20, 10)'`\n *\n * In addition, colors can be mixed using the following syntax:\n * `<mix> = <color>![<value>][!<mix>]`\n * For example:\n * - `'blue!20'`  = 20% blue + 80% white\n * - `'blue!20!black'` = 20% + 80% black\n * - `'blue!20!black!30!green'` = (20% + 80% black) * 30 % + 70% green\n *\n * If the input string is prefixed with a dash, the complementary color\n * of the expression is returned.\n *\n * This creative syntax is defined by the {@link http://mirror.jmu.edu/pub/CTAN/macros/latex/contrib/xcolor/xcolor.pdf | `xcolor` LaTeX package}.\n *\n * @param s - An expression representing a color value\n * @return An RGB color expressed as a hex-triplet preceded by `#`\n */\nexport function stringToColor(s: string): string {\n  const colorSpec = s.toLowerCase().split('!');\n\n  let baseRed;\n  let baseGreen;\n  let baseBlue;\n  let red = 255;\n  let green = 255;\n  let blue = 255;\n  let mix = -1;\n\n  // If the string is prefixed with a '-', use the complementary color\n  const complementary = colorSpec.length > 0 && colorSpec[0].startsWith('-');\n  if (complementary) colorSpec[0] = colorSpec[0].slice(1);\n\n  for (let i = 0; i < colorSpec.length; i++) {\n    baseRed = red;\n    baseGreen = green;\n    baseBlue = blue;\n\n    const colorName = colorSpec[i].match(/([a-z\\d]*)/)?.[1];\n\n    let color = NAMED_COLORS[colorName] ?? MATHEMATICA_COLORS[colorName];\n    if (!color) color = colorSpec[i];\n\n    let m = color.match(/^#([\\da-f]{2})([\\da-f]{2})([\\da-f]{2})$/i);\n    if (m?.[1] && m[2] && m[3]) {\n      // It's a six-digit hex number\n      red = Math.max(0, Math.min(255, Number.parseInt(m[1], 16)));\n      green = Math.max(0, Math.min(255, Number.parseInt(m[2], 16)));\n      blue = Math.max(0, Math.min(255, Number.parseInt(m[3], 16)));\n    } else {\n      m = color.match(/^#([\\da-f]{3})$/i);\n      if (m?.[1]) {\n        // It's a three-digit hex number\n        const r1 = Number.parseInt(m[1][0], 16);\n        const g1 = Number.parseInt(m[1][1], 16);\n        const b1 = Number.parseInt(m[1][2], 16);\n        red = Math.max(0, Math.min(255, r1 * 16 + r1));\n        green = Math.max(0, Math.min(255, g1 * 16 + g1));\n        blue = Math.max(0, Math.min(255, b1 * 16 + b1));\n      } else {\n        // It's a rgb functional\n        m = color.match(/^rgb\\s*\\(\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*\\)$/i);\n        if (m?.[1] && m[2] && m[3]) {\n          red = Math.max(0, Math.min(255, Number.parseInt(m[1])));\n          green = Math.max(0, Math.min(255, Number.parseInt(m[2])));\n          blue = Math.max(0, Math.min(255, Number.parseInt(m[3])));\n        } else {\n          return null;\n        }\n      }\n    }\n\n    if (mix >= 0) {\n      red = (1 - mix) * red + mix * baseRed;\n      green = (1 - mix) * green + mix * baseGreen;\n      blue = (1 - mix) * blue + mix * baseBlue;\n      mix = -1;\n    }\n\n    if (i + 1 < colorSpec.length) {\n      mix = Math.max(0, Math.min(100, Number.parseInt(colorSpec[++i]))) / 100;\n    }\n  }\n\n  if (mix >= 0) {\n    red = mix * red + (1 - mix) * baseRed;\n    green = mix * green + (1 - mix) * baseGreen;\n    blue = mix * blue + (1 - mix) * baseBlue;\n  }\n\n  if (complementary) {\n    red = 255 - red;\n    green = 255 - green;\n    blue = 255 - blue;\n  }\n\n  return (\n    '#' +\n    ('00' + Math.round(red).toString(16)).slice(-2) +\n    ('00' + Math.round(green).toString(16)).slice(-2) +\n    ('00' + Math.round(blue).toString(16)).slice(-2)\n  );\n}\n\nexport function colorToString(color: string): string {\n  if (!color) return '';\n  if (!color.startsWith('#')) return color;\n  let result = color.toUpperCase();\n\n  for (const c in NAMED_COLORS) {\n    if (NAMED_COLORS[c] === result) {\n      result = c;\n      break;\n    }\n  }\n\n  for (const c in MATHEMATICA_COLORS) {\n    if (MATHEMATICA_COLORS[c] === result) {\n      result = c;\n      break;\n    }\n  }\n\n  return result;\n}\n","import { ParseMode, Style } from '../public/core';\n\nimport { Atom, ToLatexOptions } from '../core/atom-class';\nimport { Context } from '../core/context';\nimport { MATHSTYLES, MathStyleName } from '../core/mathstyle';\nimport { Span, SpanType } from '../core/span';\n\nexport class GroupAtom extends Atom {\n  latexOpen?: string;\n  latexClose?: string;\n  cssId?: string;\n  htmlData?: string;\n  customClass?: string;\n  mathStyleName: MathStyleName;\n  spanType: SpanType;\n  constructor(\n    arg: Atom[],\n    options?: {\n      spanType?: SpanType;\n      changeMode?: boolean;\n      mathStyleName?: MathStyleName;\n      latexOpen?: string;\n      latexClose?: string;\n      cssId?: string;\n      htmlData?: string;\n      customClass?: string;\n      mode?: ParseMode;\n      style?: Style;\n      captureSelection?: boolean;\n      toLatexOverride?: (atom: GroupAtom, options: ToLatexOptions) => string;\n    }\n  ) {\n    super('group', {\n      mode: options?.mode ?? 'math',\n      toLatexOverride: options?.toLatexOverride,\n      style: options?.style,\n    });\n    this.body = arg;\n    this.mathStyleName = options?.mathStyleName;\n\n    this.latexOpen = options?.latexOpen;\n    this.latexClose = options?.latexClose;\n    this.cssId = options?.cssId;\n    this.htmlData = options?.htmlData;\n    this.customClass = options?.customClass;\n\n    this.spanType = options?.spanType;\n    this.skipBoundary = true;\n    this.captureSelection = options?.captureSelection;\n    this.changeMode = options?.changeMode ?? false;\n  }\n\n  render(context: Context): Span {\n    // The scope of the context is this group, so clone it\n    // so that any changes to it will be discarded when finished\n    // with this group.\n    // Note that the mathstyle property is optional and could be undefined\n    // If that's the case, clone() returns a clone of the\n    // context with the same mathstyle.\n    const localContext = context.clone({\n      mathstyle: this.mathStyleName\n        ? MATHSTYLES[this.mathStyleName]\n        : undefined,\n    });\n    const span = new Span(Atom.render(localContext, this.body), {\n      type: this.spanType ?? 'mord',\n      classes: this.customClass,\n      mode: this.mode,\n      style: {\n        backgroundColor: this.style.backgroundColor,\n      },\n    }); // @revisit\n    if (this.cssId) span.cssId = this.cssId;\n    if (this.htmlData) span.htmlData = this.htmlData;\n    if (this.caret) span.caret = this.caret;\n    // Need to bind the group so that the DOM element can be matched\n    // and the atom iterated recursively. Otherwise, it behaves\n    // as if `captureSelection === true`\n    return this.bind(context, span);\n  }\n\n  toLatex(options: ToLatexOptions): string {\n    let result = this.bodyToLatex(options);\n\n    if (typeof this.latexOpen === 'string') {\n      result = this.latexOpen + result + this.latexClose;\n    }\n\n    if (this.htmlData) {\n      result = `\\\\htmlData{${this.htmlData}}${result}`;\n    }\n    if (this.customClass) {\n      result = `\\\\class{${this.customClass}}${result}`;\n    }\n    if (this.cssId) {\n      result = `\\\\cssId{${this.cssId}}${result}`;\n    }\n\n    return result;\n  }\n}\n","import { Atom, ToLatexOptions } from '../core/atom-class';\nimport { Span } from '../core/span';\nimport { Context } from '../core/context';\nimport { Style } from '../public/core';\n\nexport class SpacingAtom extends Atom {\n  private readonly width: number;\n\n  constructor(command: string, style: Style, width?: number) {\n    super('spacing', { command, style });\n    this.width = width;\n  }\n\n  render(_context: Context): Span {\n    let result: Span;\n    if (Number.isFinite(this.width)) {\n      result = new Span(null, { classes: 'mspace' });\n      result.left = this.width;\n    } else {\n      const spacingCls: string =\n        {\n          '\\\\qquad': 'qquad',\n          '\\\\quad': 'quad',\n          '\\\\enspace': 'enspace',\n          '\\\\;': 'thickspace',\n          '\\\\:': 'mediumspace',\n          '\\\\,': 'thinspace',\n          '\\\\!': 'negativethinspace',\n        }[this.command] ?? 'mediumspace';\n      result = new Span(null, { classes: spacingCls });\n    }\n\n    if (this.caret) result.caret = this.caret;\n    return result;\n  }\n\n  toLatex(_options: ToLatexOptions): string {\n    // Three kinds of spacing commands:\n    // \\hskip and \\kern which take one implicit parameter\n    // \\hspace and hspace* with take one *explicit* parameter\n    // \\quad, etc... which take no parameters.\n    let result = this.command;\n    if (this.command === '\\\\hspace' || this.command === '\\\\hspace*') {\n      result += '{';\n      result += Number.isFinite(this.width)\n        ? Number(this.width).toString() + 'em'\n        : '0em';\n      result += '}';\n    } else {\n      result += ' ';\n      if (Number.isFinite(this.width)) {\n        result += Number(this.width).toString() + 'em ';\n      }\n    }\n\n    return result;\n  }\n}\n","/**\n * This module deals with creating delimiters of various sizes. The TeXbook\n * discusses these routines on page 441-442, in the \"Another subroutine sets box\n * x to a specified variable delimiter\" paragraph.\n *\n * There are three main routines here. `makeSmallDelim` makes a delimiter in the\n * normal font, but in either text, script, or scriptscript style.\n * `makeLargeDelim` makes a delimiter in textstyle, but in one of the Size1,\n * Size2, Size3, or Size4 fonts. `makeStackedDelim` makes a delimiter out of\n * smaller pieces that are stacked on top of one another.\n *\n * The functions take a parameter `center`, which determines if the delimiter\n * should be centered around the axis.\n *\n * Then, there are three exposed functions. `sizedDelim` makes a delimiter in\n * one of the given sizes. This is used for things like `\\bigl`.\n * `customSizedDelim` makes a delimiter with a given total height+depth. It is\n * called in places like `\\sqrt`. `leftRightDelim` makes an appropriate\n * delimiter which surrounds an expression of a given height an depth. It is\n * used in `\\left` and `\\right`.\n * @summary   Handling of delimiters surrounds symbols.\n */\n\nimport { makeSymbol, makeVlist, SpanType, Span, makeHlist } from './span';\nimport { Mathstyle, MATHSTYLES } from './mathstyle';\nimport {\n  getCharacterMetrics,\n  METRICS,\n  SIZING_MULTIPLIER,\n} from './font-metrics';\nimport type { Context } from './context';\nimport { ParseMode, Style } from '../public/core';\nexport const RIGHT_DELIM = {\n  '(': ')',\n  '{': '}',\n  '[': ']',\n  '|': '|',\n  '\\\\lbrace': '\\\\rbrace',\n  '\\\\{': '\\\\}',\n  '\\\\langle': '\\\\rangle',\n  '\\\\lfloor': '\\\\rfloor',\n  '\\\\lceil': '\\\\rceil',\n  '\\\\vert': '\\\\vert',\n  '\\\\lvert': '\\\\rvert',\n  '\\\\Vert': '\\\\Vert',\n  '\\\\lVert': '\\\\rVert',\n  '\\\\lbrack': '\\\\rbrack',\n  '\\\\ulcorner': '\\\\urcorner',\n  '\\\\llcorner': '\\\\lrcorner',\n  '\\\\lgroup': '\\\\rgroup',\n  '\\\\lmoustache': '\\\\rmoustache',\n};\n\nfunction makeStyleWrap(\n  children: Span | Span[],\n  fromStyle: Mathstyle,\n  toStyle: Mathstyle,\n  options: {\n    classes?: string;\n    type?: SpanType;\n    mode?: ParseMode;\n    style?: Style;\n  }\n): Span {\n  const result = makeHlist(children, {\n    ...options,\n    classes:\n      (options.classes ?? '') + ' style-wrap ' + fromStyle.adjustTo(toStyle),\n  });\n\n  const multiplier =\n    (SIZING_MULTIPLIER[options.style?.fontSize] ?? 1) *\n    (toStyle.sizeMultiplier / fromStyle.sizeMultiplier);\n\n  result.height *= multiplier;\n  result.depth *= multiplier;\n  result.maxFontSize = multiplier; /** @revisit: shouldn't that be `multiplier` ? */\n\n  return result;\n}\n\nfunction getSymbolValue(symbol: string): number {\n  return (\n    {\n      '[': 0x5b, // '[',\n      ']': 0x5d, // ']',\n      '(': 0x28, // '(',\n      ')': 0x29, // ')',\n      '\\\\mid': 0x2223,\n      '|': 0x2223,\n      '\\u2223': 0x2223, // DIVIDES\n      '\\u2225': 0x2225, // PARALLEL TO\n      '\\\\|': 0x2223,\n      '\\\\{': 0x7b, // '{',\n      '\\\\}': 0x7d, // '}',\n      '\\\\lbrace': 0x7b, // '{',\n      '\\\\rbrace': 0x7d, // '}',\n      '\\\\lbrack': 0x5b, // '[',\n      '\\\\rbrack': 0x5d, // ']',\n      '\\\\vert': 0x2223,\n      '\\\\lvert': 0x2223,\n      '\\\\mvert': 0x2223,\n      '\\\\rvert': 0x2223,\n      '\\\\Vert': 0x2225,\n      '\\\\lVert': 0x2225,\n      '\\\\mVert': 0x2225,\n      '\\\\rVert': 0x2225,\n      '\\\\parallel': 0x2225,\n      '\\\\shortparallel': 0x2225,\n      '\\\\langle': 0x27e8,\n      '\\\\rangle': 0x27e9,\n      '\\\\lfloor': 0x230a,\n      '\\\\rfloor': 0x230b,\n      '\\\\lceil': 0x2308,\n      '\\\\rceil': 0x2309,\n      '\\\\ulcorner': 0x250c,\n      '\\\\urcorner': 0x2510,\n      '\\\\llcorner': 0x2514,\n      '\\\\lrcorner': 0x2518,\n      '\\\\lgroup': 0x27ee,\n      '\\\\rgroup': 0x27ef,\n      '\\\\lmoustache': 0x23b0,\n      '\\\\rmoustache': 0x23b1,\n      '\\\\surd': 0x221a,\n    }[symbol] ?? symbol.codePointAt(0)\n  );\n}\n\n/**\n * Makes a small delimiter. This is a delimiter that comes in the Main-Regular\n * font, but is restyled to either be in textstyle, scriptstyle, or\n * scriptscriptstyle.\n */\nfunction makeSmallDelim(\n  delim: string,\n  mathstyle: Mathstyle,\n  center: boolean,\n  context: Context,\n  options: {\n    classes: string;\n    type: 'mopen' | 'mclose' | 'minner';\n    mode?: ParseMode;\n    style?: Style;\n  }\n): Span {\n  const text = makeSymbol('Main-Regular', getSymbolValue(delim));\n\n  const span = makeStyleWrap(text, context.mathstyle, mathstyle, options);\n\n  if (center) {\n    span.setTop(\n      (1 - context.mathstyle.sizeMultiplier / mathstyle.sizeMultiplier) *\n        context.mathstyle.metrics.axisHeight *\n        SIZING_MULTIPLIER[context.size]\n    );\n  }\n\n  span.setStyle('color', context.color);\n  if (typeof context.opacity === 'number') {\n    span.setStyle('opacity', context.opacity);\n  }\n\n  return span;\n}\n\n/**\n * Makes a large delimiter. This is a delimiter that comes in the Size1, Size2,\n * Size3, or Size4 fonts. It is always rendered in textstyle.\n */\nfunction makeLargeDelim(\n  delim: string,\n  size: number,\n  center: boolean,\n  context: Context,\n  options: {\n    classes?: string;\n    type?: 'mopen' | 'mclose' | 'minner';\n    mode?: ParseMode;\n    style?: Style;\n  }\n): Span {\n  const result = makeStyleWrap(\n    makeSymbol('Size' + size + '-Regular', getSymbolValue(delim), {\n      classes: 'delimsizing size' + size,\n    }),\n    context.mathstyle,\n    MATHSTYLES.textstyle,\n    options\n  );\n\n  if (center) {\n    result.setTop(\n      (1 - context.mathstyle.sizeMultiplier) *\n        context.mathstyle.metrics.axisHeight *\n        SIZING_MULTIPLIER[context.size]\n    );\n  }\n\n  result.setStyle('color', context.color);\n  if (typeof context.opacity === 'number') {\n    result.setStyle('opacity', context.opacity);\n  }\n\n  return result;\n}\n\n/**\n * Make a stacked delimiter out of a given delimiter, with the total height at\n * least `heightTotal`. This routine is mentioned on page 442 of the TeXbook.\n */\nfunction makeStackedDelim(\n  delim: string,\n  heightTotal: number,\n  center: boolean,\n  context: Context,\n  options: {\n    classes?: string;\n    type?: SpanType;\n    mode?: ParseMode;\n    style?: Style;\n  }\n): Span {\n  // There are four parts, the top, an optional middle, a repeated part, and a\n  // bottom.\n  let top: number;\n  let middle: number;\n  let repeat: number;\n  let bottom: number;\n  top = repeat = bottom = getSymbolValue(delim);\n  middle = null;\n  // Also keep track of what font the delimiters are in\n  let font = 'Size1-Regular';\n\n  // We set the parts and font based on the symbol. Note that we use\n  // 0x23d0 instead of '|' and 0x2016 instead of '\\\\|' for the\n  // repeats of the arrows\n  if (\n    delim === '\\\\vert' ||\n    delim === '\\\\lvert' ||\n    delim === '\\\\rvert' ||\n    delim === '\\\\mvert' ||\n    delim === '\\\\mid'\n  ) {\n    repeat = top = bottom = 0x2223;\n  } else if (\n    delim === '\\\\Vert' ||\n    delim === '\\\\lVert' ||\n    delim === '\\\\rVert' ||\n    delim === '\\\\mVert' ||\n    delim === '\\\\|'\n  ) {\n    repeat = top = bottom = 0x2225;\n  } else if (delim === '\\\\uparrow') {\n    repeat = bottom = 0x23d0;\n  } else if (delim === '\\\\Uparrow') {\n    repeat = bottom = 0x2016;\n  } else if (delim === '\\\\downarrow') {\n    top = repeat = 0x23d0;\n  } else if (delim === '\\\\Downarrow') {\n    top = repeat = 0x2016;\n  } else if (delim === '\\\\updownarrow') {\n    top = 0x2191;\n    repeat = 0x23d0;\n    bottom = 0x2193;\n  } else if (delim === '\\\\Updownarrow') {\n    top = 0x21d1;\n    repeat = 0x2016;\n    bottom = 0x21d3;\n  } else if (delim === '[' || delim === '\\\\lbrack') {\n    top = 0x23a1;\n    repeat = 0x23a2;\n    bottom = 0x23a3;\n    font = 'Size4-Regular';\n  } else if (delim === ']' || delim === '\\\\rbrack') {\n    top = 0x23a4;\n    repeat = 0x23a5;\n    bottom = 0x23a6;\n    font = 'Size4-Regular';\n  } else if (delim === '\\\\lfloor') {\n    repeat = top = 0x23a2;\n    bottom = 0x23a3;\n    font = 'Size4-Regular';\n  } else if (delim === '\\\\lceil') {\n    top = 0x23a1;\n    repeat = bottom = 0x23a2;\n    font = 'Size4-Regular';\n  } else if (delim === '\\\\rfloor') {\n    repeat = top = 0x23a5;\n    bottom = 0x23a6;\n    font = 'Size4-Regular';\n  } else if (delim === '\\\\rceil') {\n    top = 0x23a4;\n    repeat = bottom = 0x23a5;\n    font = 'Size4-Regular';\n  } else if (delim === '(') {\n    top = 0x239b;\n    repeat = 0x239c;\n    bottom = 0x239d;\n    font = 'Size4-Regular';\n  } else if (delim === ')') {\n    top = 0x239e;\n    repeat = 0x239f;\n    bottom = 0x23a0;\n    font = 'Size4-Regular';\n  } else if (delim === '\\\\{' || delim === '\\\\lbrace') {\n    top = 0x23a7;\n    middle = 0x23a8;\n    bottom = 0x23a9;\n    repeat = 0x23aa;\n    font = 'Size4-Regular';\n  } else if (delim === '\\\\}' || delim === '\\\\rbrace') {\n    top = 0x23ab;\n    middle = 0x23ac;\n    bottom = 0x23ad;\n    repeat = 0x23aa;\n    font = 'Size4-Regular';\n  } else if (delim === '\\\\lgroup') {\n    top = 0x23a7;\n    bottom = 0x23a9;\n    repeat = 0x23aa;\n    font = 'Size4-Regular';\n  } else if (delim === '\\\\rgroup') {\n    top = 0x23ab;\n    bottom = 0x23ad;\n    repeat = 0x23aa;\n    font = 'Size4-Regular';\n  } else if (delim === '\\\\lmoustache') {\n    top = 0x23a7;\n    bottom = 0x23ad;\n    repeat = 0x23aa;\n    font = 'Size4-Regular';\n  } else if (delim === '\\\\rmoustache') {\n    top = 0x23ab;\n    bottom = 0x23a9;\n    repeat = 0x23aa;\n    font = 'Size4-Regular';\n  } else if (delim === '\\\\surd') {\n    top = 0xe001;\n    bottom = 0x23b7;\n    repeat = 0xe000;\n    font = 'Size4-Regular';\n  } else if (delim === '\\\\ulcorner') {\n    top = 0x250c;\n    repeat = bottom = 0x20;\n  } else if (delim === '\\\\urcorner') {\n    top = 0x2510;\n    repeat = bottom = 0x20;\n  } else if (delim === '\\\\llcorner') {\n    bottom = 0x2514;\n    repeat = top = 0x20;\n  } else if (delim === '\\\\lrcorner') {\n    top = 0x2518;\n    repeat = top = 0x20;\n  }\n\n  // Get the metrics of the four sections\n  const topMetrics = getCharacterMetrics(top, font);\n  const topHeightTotal = topMetrics.height + topMetrics.depth;\n  const repeatMetrics = getCharacterMetrics(repeat, font);\n  const repeatHeightTotal = repeatMetrics.height + repeatMetrics.depth;\n  const bottomMetrics = getCharacterMetrics(bottom, font);\n  const bottomHeightTotal = bottomMetrics.height + bottomMetrics.depth;\n  let middleHeightTotal = 0;\n  let middleFactor = 1;\n  if (middle !== null) {\n    const middleMetrics = getCharacterMetrics(middle, font);\n    middleHeightTotal = middleMetrics.height + middleMetrics.depth;\n    middleFactor = 2; // Repeat symmetrically above and below middle\n  }\n\n  // Calculate the minimal height that the delimiter can have.\n  // It is at least the size of the top, bottom, and optional middle combined.\n  const minHeight = topHeightTotal + bottomHeightTotal + middleHeightTotal;\n\n  // Compute the number of copies of the repeat symbol we will need\n  const repeatCount = Math.ceil(\n    (heightTotal - minHeight) / (middleFactor * repeatHeightTotal)\n  );\n\n  // Compute the total height of the delimiter including all the symbols\n  const realHeightTotal =\n    minHeight + repeatCount * middleFactor * repeatHeightTotal;\n\n  // The center of the delimiter is placed at the center of the axis. Note\n  // that in this context, 'center' means that the delimiter should be\n  // centered around the axis in the current style, while normally it is\n  // centered around the axis in textstyle.\n  let { axisHeight } = context.mathstyle.metrics;\n\n  if (center) {\n    axisHeight =\n      axisHeight *\n      context.mathstyle.sizeMultiplier *\n      SIZING_MULTIPLIER[context.size];\n  }\n\n  // Calculate the depth\n  const depth = realHeightTotal / 2 - axisHeight;\n\n  // Now, we start building the pieces that will go into the vlist\n\n  // Keep a list of the inner pieces\n  const inners = [];\n  let sizeClass = '';\n  // Apply the correct CSS class to choose the right font.\n  if (font === 'Size1-Regular') {\n    sizeClass = ' delim-size1';\n  } else if (font === 'Size4-Regular') {\n    sizeClass = ' delim-size4';\n  }\n\n  // Add the bottom symbol\n  inners.push(makeSymbol(font, bottom));\n\n  const repeatSpan = makeSymbol(font, repeat);\n\n  if (middle === null) {\n    // Add that many symbols\n    for (let i = 0; i < repeatCount; i++) {\n      inners.push(repeatSpan);\n    }\n  } else {\n    // When there is a middle bit, we need the middle part and two repeated\n    // sections\n    for (let i = 0; i < repeatCount; i++) {\n      inners.push(repeatSpan);\n    }\n\n    inners.push(makeSymbol(font, middle));\n\n    for (let i = 0; i < repeatCount; i++) {\n      inners.push(repeatSpan);\n    }\n  }\n\n  // Add the top symbol\n  inners.push(makeSymbol(font, top));\n\n  // Finally, build the vlist\n  const inner = makeVlist(context, inners, 'bottom', {\n    initialPos: depth,\n    classes: 'delimsizinginner' + sizeClass,\n  });\n  inner.setStyle('color', context.color);\n  if (typeof context.opacity === 'number') {\n    inner.setStyle('opacity', context.opacity);\n  }\n\n  const result = new Span(inner, { classes: 'delimsizing mult' });\n  result.setStyle(\n    'vertical-align',\n    -context.mathstyle.metrics.axisHeight * SIZING_MULTIPLIER[context.size],\n    'em'\n  );\n\n  return makeStyleWrap(\n    result,\n    context.mathstyle,\n    MATHSTYLES.textstyle,\n    options\n  );\n}\n\n// There are three kinds of delimiters, delimiters that stack when they become\n// too large\nconst stackLargeDelimiters = new Set([\n  '(',\n  ')',\n  '[',\n  '\\\\lbrack',\n  ']',\n  '\\\\rbrack',\n  '\\\\{',\n  '\\\\lbrace',\n  '\\\\}',\n  '\\\\rbrace',\n  '\\\\lfloor',\n  '\\\\rfloor',\n  '\\\\lceil',\n  '\\\\rceil',\n  '\\\\surd',\n]);\n\n// Delimiters that always stack\nconst stackAlwaysDelimiters = new Set([\n  '\\\\uparrow',\n  '\\\\downarrow',\n  '\\\\updownarrow',\n  '\\\\Uparrow',\n  '\\\\Downarrow',\n  '\\\\Updownarrow',\n  '|',\n  '\\\\|',\n  '\\\\vert',\n  '\\\\Vert',\n  '\\\\lvert',\n  '\\\\rvert',\n  '\\\\lVert',\n  '\\\\rVert',\n  '\\\\mvert',\n  '\\\\mid',\n  '\\\\lgroup',\n  '\\\\rgroup',\n  '\\\\lmoustache',\n  '\\\\rmoustache',\n]);\n\n// And delimiters that never stack\nconst stackNeverDelimiters = new Set([\n  '<',\n  '>',\n  '\\\\langle',\n  '\\\\rangle',\n  '/',\n  '\\\\backslash',\n  '\\\\lt',\n  '\\\\gt',\n]);\n\n// Metrics of the different sizes. Found by looking at TeX's output of\n// $\\bigl| // \\Bigl| \\biggl| \\Biggl| \\showlists$\n// Used to create stacked delimiters of appropriate sizes in makeSizedDelim.\nconst sizeToMaxHeight = [0, 1.2, 1.8, 2.4, 3];\n\n/**\n * Used to create a delimiter of a specific size, where `size` is 1, 2, 3, or 4.\n */\nexport function makeSizedDelim(\n  delim: string | undefined,\n  size: 1 | 2 | 3 | 4,\n  context: Context,\n  options: {\n    classes: string;\n    type?: 'mopen' | 'mclose';\n    mode?: ParseMode;\n    style?: Style;\n  }\n): Span {\n  if (delim === undefined || delim === '.') {\n    // Empty delimiters still count as elements, even though they don't\n    // show anything.\n    return makeNullFence(context, options.type, options.classes);\n  }\n\n  // < and > turn into \\langle and \\rangle in delimiters\n  if (delim === '<' || delim === '\\\\lt') {\n    delim = '\\\\langle';\n  } else if (delim === '>' || delim === '\\\\gt') {\n    delim = '\\\\rangle';\n  }\n\n  // Sized delimiters are never centered.\n  if (stackLargeDelimiters.has(delim) || stackNeverDelimiters.has(delim)) {\n    return makeLargeDelim(delim, size, false, context, options);\n  }\n\n  if (stackAlwaysDelimiters.has(delim)) {\n    return makeStackedDelim(\n      delim,\n      sizeToMaxHeight[size],\n      false,\n      context,\n      options\n    );\n  }\n\n  console.assert(false, \"Unknown delimiter '\" + delim + \"'\");\n  return null;\n}\n\n/*\n * There are three different sequences of delimiter sizes that the delimiters\n * follow depending on the kind of delimiter. This is used when creating custom\n * sized delimiters to decide whether to create a small, large, or stacked\n * delimiter.\n *\n * In real TeX, these sequences aren't explicitly defined, but are instead\n * defined inside the font metrics. Since there are only three sequences that\n * are possible for the delimiters that TeX defines, it is easier to just encode\n * them explicitly here.\n */\n\ninterface DelimiterInfo {\n  type: 'small' | 'large' | 'stack';\n  mathstyle?: Mathstyle;\n  size?: 1 | 2 | 3 | 4;\n}\n\n// Delimiters that never stack try small delimiters and large delimiters only\nconst stackNeverDelimiterSequence: DelimiterInfo[] = [\n  { type: 'small', mathstyle: MATHSTYLES.scriptscriptstyle },\n  { type: 'small', mathstyle: MATHSTYLES.scriptstyle },\n  { type: 'small', mathstyle: MATHSTYLES.textstyle },\n  { type: 'large', size: 1 },\n  { type: 'large', size: 2 },\n  { type: 'large', size: 3 },\n  { type: 'large', size: 4 },\n];\n\n// Delimiters that always stack try the small delimiters first, then stack\nconst stackAlwaysDelimiterSequence: DelimiterInfo[] = [\n  { type: 'small', mathstyle: MATHSTYLES.scriptscriptstyle },\n  { type: 'small', mathstyle: MATHSTYLES.scriptstyle },\n  { type: 'small', mathstyle: MATHSTYLES.textstyle },\n  { type: 'stack' },\n];\n\n// Delimiters that stack when large try the small and then large delimiters, and\n// stack afterwards\nconst stackLargeDelimiterSequence: DelimiterInfo[] = [\n  { type: 'small', mathstyle: MATHSTYLES.scriptscriptstyle },\n  { type: 'small', mathstyle: MATHSTYLES.scriptstyle },\n  { type: 'small', mathstyle: MATHSTYLES.textstyle },\n  { type: 'large', size: 1 },\n  { type: 'large', size: 2 },\n  { type: 'large', size: 3 },\n  { type: 'large', size: 4 },\n  { type: 'stack' },\n];\n\n/*\n * Get the font used in a delimiter based on what kind of delimiter it is.\n */\nfunction delimTypeToFont(info: DelimiterInfo): string {\n  if (info.type === 'small') {\n    return 'Main-Regular';\n  }\n\n  if (info.type === 'large') {\n    return 'Size' + info.size + '-Regular';\n  }\n\n  console.assert(info.type === 'stack');\n  return 'Size4-Regular';\n}\n\n/**\n * Traverse a sequence of types of delimiters to decide what kind of delimiter\n * should be used to create a delimiter of the given height+depth.\n * @param delim - a character value (not a command)\n */\nfunction traverseSequence(\n  delim: number,\n  height: number,\n  sequence: DelimiterInfo[],\n  context: Context\n): DelimiterInfo {\n  // Here, we choose the index we should start at in the sequences. In smaller\n  // sizes (which correspond to larger numbers in style.size) we start earlier\n  // in the sequence. Thus, scriptscript starts at index 3-3=0, script starts\n  // at index 3-2=1, text starts at 3-1=2, and display starts at min(2,3-0)=2\n  const start = Math.min(2, 3 - context.mathstyle.size);\n  for (let i = start; i < sequence.length; i++) {\n    if (sequence[i].type === 'stack') {\n      // This is always the last delimiter, so we just break the loop now.\n      break;\n    }\n\n    const metrics = getCharacterMetrics(delim, delimTypeToFont(sequence[i]));\n    if (metrics.defaultMetrics) {\n      // If we don't have metrics info for this character,\n      // assume we'll construct as a small delimiter\n      return { type: 'small', mathstyle: MATHSTYLES.scriptstyle };\n    }\n\n    let heightDepth = metrics.height + metrics.depth;\n\n    // Small delimiters are scaled down versions of the same font, so we\n    // account for the style change size.\n\n    if (sequence[i].type === 'small') {\n      heightDepth *= sequence[i].mathstyle.sizeMultiplier;\n    }\n\n    // Check if the delimiter at this size works for the given height.\n    if (heightDepth > height) {\n      return sequence[i];\n    }\n  }\n\n  // If we reached the end of the sequence, return the last sequence element.\n  return sequence[sequence.length - 1];\n}\n\n/**\n * Make a delimiter of a given height+depth, with optional centering. Here, we\n * traverse the sequences, and create a delimiter that the sequence tells us to.\n */\nexport function makeCustomSizedDelim(\n  type: 'mopen' | 'mclose' | 'minner',\n  delim: string,\n  height: number,\n  center: boolean,\n  context: Context,\n  options?: {\n    classes?: string;\n    mode?: ParseMode;\n    style?: Style;\n  }\n): Span {\n  if (!delim || delim.length === 0 || delim === '.') {\n    return makeNullFence(context, type, type);\n  }\n\n  if (delim === '<' || delim === '\\\\lt') {\n    delim = '\\\\langle';\n  } else if (delim === '>' || delim === '\\\\gt') {\n    delim = '\\\\rangle';\n  }\n\n  // Decide what sequence to use\n  let sequence: DelimiterInfo[];\n  if (stackNeverDelimiters.has(delim)) {\n    sequence = stackNeverDelimiterSequence;\n  } else if (stackLargeDelimiters.has(delim)) {\n    sequence = stackLargeDelimiterSequence;\n  } else {\n    sequence = stackAlwaysDelimiterSequence;\n  }\n\n  // Look through the sequence\n  const delimType = traverseSequence(\n    getSymbolValue(delim),\n    height,\n    sequence,\n    context\n  );\n\n  // Depending on the sequence element we decided on,\n  // call the appropriate function.\n  if (delimType.type === 'small') {\n    return makeSmallDelim(delim, delimType.mathstyle, center, context, {\n      type,\n      classes: 'ML__small-delim ' + (options?.classes ?? ''),\n    });\n  }\n\n  if (delimType.type === 'large') {\n    return makeLargeDelim(delim, delimType.size, center, context, {\n      ...options,\n      type,\n    });\n  }\n\n  console.assert(delimType.type === 'stack');\n  return makeStackedDelim(delim, height, center, context, {\n    ...options,\n    type,\n  });\n}\n\n/**\n * Make a delimiter for use with `\\left` and `\\right`, given a height and depth\n * of an expression that the delimiters surround.\n * See tex.web:14994\n */\nexport function makeLeftRightDelim(\n  type: 'mopen' | 'mclose' | 'minner',\n  delim: string,\n  height: number,\n  depth: number,\n  context: Context,\n  options?: { classes?: string; style?: Style; mode?: ParseMode }\n): Span {\n  // If this is the empty delimiter, return a null fence\n  if (delim === '.') {\n    return makeNullFence(context, type, options?.classes);\n  }\n\n  // We always center \\left/\\right delimiters, so the axis is always shifted\n  const axisHeight =\n    context.mathstyle.metrics.axisHeight *\n    context.mathstyle.sizeMultiplier *\n    SIZING_MULTIPLIER[context.size];\n  // Taken from TeX source, tex.web, function make_left_right\n  const delimiterFactor = 901; // Plain.tex:327, texboox:152\n  const delimiterShortfall = 5 / METRICS.ptPerEm; // Plain.tex:345, texboox:152\n\n  const maxDistFromAxis = Math.max(height - axisHeight, depth + axisHeight);\n  const totalHeight = Math.max(\n    (maxDistFromAxis / 500) * delimiterFactor,\n    2 * maxDistFromAxis - delimiterShortfall\n  );\n\n  // Finally, we defer to `makeCustomSizedDelim` with our calculated total\n  // height\n  return makeCustomSizedDelim(type, delim, totalHeight, true, context, options);\n}\n\nexport function makeNullFence(\n  context: Context,\n  type: 'mopen' | 'mclose' | 'minner',\n  classes?: string\n): Span {\n  let sizeAdjust = '';\n  if (context.size !== 'size5') {\n    sizeAdjust = `sizing reset-${context.size} size5`;\n  }\n  return new Span(null, {\n    // Reset the font-size to the default (size5)\n    classes:\n      sizeAdjust +\n      // Correct from scriptstyle/scriptscriptstyle to textstyle if necessary\n      context.mathstyle.adjustTo(MATHSTYLES.textstyle) +\n      // The null delimiter has a width, specified by class 'nulldelimiter'\n      ' nulldelimiter ' +\n      (classes ?? ''),\n    type,\n  });\n}\n","import { Atom, ToLatexOptions } from '../core/atom-class';\nimport { depth as spanDepth, height as spanHeight, Span } from '../core/span';\nimport { makeLeftRightDelim } from '../core/delimiters';\nimport { Context } from '../core/context';\nimport { joinLatex } from '../core/tokenizer';\nimport { Style } from '../public/core';\n\n/**\n *  \\left....\\right\n *\n * Note that we can encounter malformed \\left...\\right, for example\n * a \\left without a matching \\right or vice versa. In that case, the\n * leftDelim (resp. rightDelim) will be undefined. We still need to handle\n * those cases.\n *\n */\nexport class LeftRightAtom extends Atom {\n  readonly leftDelim?: string;\n  rightDelim?: string;\n  private readonly inner: boolean; // Indicate if it's a `\\mleft` (false), or a `\\left`\n  constructor(\n    body: Atom[],\n    options: {\n      inner?: boolean;\n      leftDelim: string;\n      rightDelim: string;\n      style?: Style;\n    }\n  ) {\n    super('leftright', { style: options.style });\n    this.body = body;\n    this.inner = options.inner ?? false;\n    this.leftDelim = options.leftDelim;\n    this.rightDelim = options.rightDelim;\n  }\n\n  toLatex(options: ToLatexOptions): string {\n    let segments = [];\n    if (this.inner) {\n      segments = [\n        '\\\\left' + (this.leftDelim || '.'),\n        this.bodyToLatex(options),\n        '\\\\right' + (this.rightDelim || '.'),\n      ];\n    } else if (options.expandMacro) {\n      // If we're in 'expandMacro' mode (i.e. interchange format\n      // used, e.g., on the clipboard for maximum compatibility\n      // with other LaTeX renderers), drop the `\\mleft(` and `\\mright`)\n      // commands\n      segments = [\n        this.leftDelim === '.' ? '' : this.leftDelim,\n        this.bodyToLatex(options),\n        this.rightDelim === '.' ? '' : this.rightDelim,\n      ];\n    } else {\n      segments = [\n        '\\\\mleft' + (this.leftDelim || '.'),\n        this.bodyToLatex(options),\n        '\\\\mright' + (this.rightDelim || '.'),\n      ];\n    }\n\n    return joinLatex(segments);\n  }\n\n  render(context: Context): Span {\n    if (!this.body) {\n      // No body, only a delimiter\n      if (this.leftDelim) {\n        return new Atom('mopen', { value: this.leftDelim }).render(context);\n      }\n\n      if (this.rightDelim) {\n        return new Atom('mclose', { value: this.rightDelim }).render(context);\n      }\n\n      return null;\n    }\n\n    // The scope of the context is this group, so make a copy of it\n    // so that any changes to it will be discarded when finished\n    // with this group.\n    const inner = Atom.render(context.clone(), this.body);\n    const localContext = context.clone({\n      size: this.style?.fontSize ?? 'size5',\n    });\n    const { mathstyle } = localContext;\n    let spans: Span[] = [];\n    // Calculate its height and depth\n    // The size of delimiters is the same, regardless of what mathstyle we are\n    // in. Thus, to correctly calculate the size of delimiter we need around\n    // a group, we scale down the inner size based on the size.\n    const innerHeight = spanHeight(inner) * mathstyle.sizeMultiplier;\n    const innerDepth = spanDepth(inner) * mathstyle.sizeMultiplier;\n\n    // Add the left delimiter to the beginning of the expression\n    if (this.leftDelim) {\n      spans.push(\n        this.bind(\n          context,\n          makeLeftRightDelim(\n            'mopen',\n            this.leftDelim,\n            innerHeight,\n            innerDepth,\n            localContext,\n            {\n              classes:\n                'ML__open' + (this.containsCaret ? ' ML__contains-caret' : ''),\n              mode: this.mode,\n              style: this.style,\n            }\n          )\n        )\n      );\n    }\n\n    if (inner) {\n      // Replace the delim (\\middle) spans with proper ones now that we know\n      // the height/depth\n      for (let i = 0; i < inner.length; i++) {\n        if (inner[i].delim) {\n          const savedCaret = inner[i].caret;\n          inner[i] = this.bind(\n            context,\n            makeLeftRightDelim(\n              'minner',\n              inner[i].delim,\n              innerHeight,\n              innerDepth,\n              localContext\n            )\n          );\n          inner[i].caret = savedCaret;\n        }\n      }\n\n      spans = spans.concat(inner);\n    }\n\n    // Add the right delimiter to the end of the expression.\n    if (this.rightDelim) {\n      let delim = this.rightDelim;\n      let classes = this.containsCaret ? ' ML__contains-caret' : '';\n      if (delim === '?') {\n        if (context.smartFence) {\n          // Use a placeholder delimiter matching the open delimiter\n          delim =\n            {\n              '(': ')',\n              '[': '\\\\rbrack',\n              '\\\\{': '\\\\}',\n              '\\\\lbrace': '\\\\rbrace',\n              '\\\\langle': '\\\\rangle',\n              '\\\\lfloor': '\\\\rfloor',\n              '\\\\lceil': '\\\\rceil',\n              '\\\\vert': '\\\\vert',\n              '\\\\lvert': '\\\\rvert',\n              '\\\\Vert': '\\\\Vert',\n              '\\\\lVert': '\\\\rVert',\n              '\\\\lbrack': '\\\\rbrack',\n              '\\\\ulcorner': '\\\\urcorner',\n              '\\\\llcorner': '\\\\lrcorner',\n              '\\\\lgroup': '\\\\rgroup',\n              '\\\\lmoustache': '\\\\rmoustache',\n            }[this.leftDelim] ?? this.leftDelim;\n          classes += ' ML__smart-fence__close';\n        } else {\n          delim = '.';\n        }\n      }\n\n      spans.push(\n        this.bind(\n          context,\n          makeLeftRightDelim(\n            'mclose',\n            delim,\n            innerHeight,\n            innerDepth,\n            localContext,\n            {\n              classes: classes + ' ML__close',\n              mode: this.mode,\n              style: this.style,\n            }\n          )\n        )\n      );\n    }\n\n    // If the `inner` flag is set, return the `inner` element (that's the\n    // behavior for the regular `\\left...\\right`\n    // Otherwise, include a `\\mathopen{}...\\mathclose{}`. That's the\n    // behavior for `\\mleft...\\mright`, which allows for tighter spacing\n    // for example in `\\sin\\mleft(x\\mright)`\n    const result = new Span(spans, {\n      classes: mathstyle.cls(),\n      type: this.inner ? 'minner' : 'mclose',\n    });\n\n    if (this.caret) result.caret = this.caret;\n\n    return this.bind(context, result);\n  }\n}\n","import { Atom, ToLatexOptions } from '../core/atom-class';\nimport { Span, height as spanHeight, depth as spanDepth } from '../core/span';\nimport { Context } from '../core/context';\nimport { Style } from '../public/core';\n\nexport class SubsupAtom extends Atom {\n  constructor(options?: { style?: Style }) {\n    super('msubsup', { style: options?.style });\n  }\n\n  render(context: Context): Span {\n    // The caret for this atom type is handled by its elements\n\n    // The span type of a `subsup` atom is 'supsub' as it doesn't\n    // have any special INTER_ATOM_SPACING with its attached atom (previous span)\n    const result = new Span('\\u200B', { type: 'supsub' });\n    if (context.phantomBase) {\n      result.height = spanHeight(context.phantomBase);\n      result.depth = spanDepth(context.phantomBase);\n    }\n\n    console.assert(!this.subsupPlacement);\n\n    return this.attachSupsub(context, result, 'supsub');\n  }\n\n  toLatex(options: ToLatexOptions): string {\n    return this.supsubToLatex(options);\n  }\n}\n","import { Atom, ToLatexOptions } from '../core/atom-class';\nimport { Span } from '../core/span';\nimport { Context } from '../core/context';\nimport { ParseMode, Style } from '../public/core';\n\nexport class PlaceholderAtom extends Atom {\n  constructor(options?: { value?: string; mode?: ParseMode; style?: Style }) {\n    super('placeholder', {\n      mode: options?.mode,\n      style: options?.style,\n      value: options?.value,\n    });\n    this.captureSelection = true;\n  }\n\n  render(context: Context): Span {\n    if (typeof context.renderPlaceholder === 'function') {\n      return context.renderPlaceholder(context);\n    }\n    return this.makeSpan(context, '⬚', {\n      classes: this.caret ? 'ML__placeholder-selected' : '',\n    });\n  }\n\n  toLatex(_options: ToLatexOptions): string {\n    return `\\\\placeholder{${this.value ?? ''}}`;\n  }\n}\n","import { Atom } from '../core/atom-class';\nimport { Span } from '../core/span';\nimport { Context } from '../core/context';\n\n/*\n * An atom representing a syntactic error, such as an unknown command\n */\nexport class ErrorAtom extends Atom {\n  constructor(value: string) {\n    super('error', { value, command: value, mode: 'math' });\n    this.latex = value;\n  }\n\n  render(context: Context): Span {\n    const result = this.makeSpan(context, this.value);\n    result.classes = 'ML__error';\n\n    if (this.caret) result.caret = this.caret;\n\n    return result;\n  }\n}\n","import { Atom, ToLatexOptions } from '../core/atom-class';\nimport { Context } from '../core/context';\nimport { Span } from '../core/span';\n\nexport class MacroAtom extends Atom {\n  constructor(macro: string, args: string, body: Atom[]) {\n    super('macro', { command: macro });\n    this.body = body;\n    // Set the `captureSelection` attribute so that the atom is handled\n    // as an unbreakable unit\n    this.captureSelection = true;\n    this.latex = macro + args;\n  }\n\n  toLatex(options: ToLatexOptions): string {\n    return options.expandMacro ? this.bodyToLatex(options) : this.latex;\n  }\n\n  render(context: Context): Span {\n    const result = new Span(Atom.render(context, this.body), { type: 'mord' });\n    if (this.caret) result.caret = this.caret;\n    return this.bind(context, result);\n  }\n}\n","import { Style } from '../public/core';\nimport { Atom, ToLatexOptions } from '../core/atom-class';\nimport { Span } from '../core/span';\nimport { Context } from '../core/context';\nimport { charToLatex } from '../core-definitions/definitions-utils';\n\nexport class TextAtom extends Atom {\n  constructor(command: string, value: string, style: Style) {\n    super('text', { command, mode: 'text' });\n    this.value = value;\n    this.latex = value;\n    this.applyStyle(style);\n  }\n\n  render(context: Context): Span {\n    const result = this.makeSpan(context, this.value);\n    if (this.caret) result.caret = this.caret;\n    return result;\n  }\n\n  toLatex(_options: ToLatexOptions): string {\n    return this.latex ?? charToLatex('text', this.value);\n  }\n}\n","import {\n  ErrorListener,\n  MacroDefinition,\n  Style,\n  ParserErrorCode,\n  MacroDictionary,\n  ParseMode,\n} from '../public/core';\n\nimport { isArray } from '../common/types';\n\nimport { stringToColor } from './color';\nimport { convertDimenToEm } from './font-metrics';\nimport { Token, tokenize, tokensToString } from './tokenizer';\nimport { Atom, BBoxParameter } from './atom-class';\nimport { Mode } from './modes-utils';\nimport {\n  Argument,\n  FunctionDefinition,\n  getEnvironmentDefinition,\n  getInfo,\n  SymbolDefinition,\n} from '../core-definitions/definitions-utils';\nimport { Colspec } from '../core-atoms/array';\nimport { GroupAtom } from '../core-atoms/group';\nimport { SpacingAtom } from '../core-atoms/spacing';\nimport { LeftRightAtom } from '../core-atoms/leftright';\nimport { SubsupAtom } from '../core-atoms/subsup';\nimport { PlaceholderAtom } from '../core-atoms/placeholder';\nimport { ErrorAtom } from '../core-atoms/error';\nimport { MacroAtom } from '../core-atoms/macro';\nimport { ArgumentType } from './context';\nimport { TextAtom } from '../core-atoms/text';\n\n// Performance to check first char of string: https://jsben.ch/QLjdZ\n\nfunction isLiteral(token: Token): boolean {\n  return !/^<({|}|\\$|\\$\\$|space)>$/.test(token);\n}\n\n/**\n * Transform a list of tokens into a list of atoms.\n *\n\n * @property tokens - An array of tokens generated by the lexer.\n * @property args - Optional arguments to substitute the `#` token.\n * @property macros - A dictionary of objects, index by the name of\n * the macro, with the following keys:\n *    * args: an integer, the number of arguments, default 0. They can be referenced as #0,\n *       #1, #2... inside the definition of the macro\n *    * def: a string, the definition of the macro, which can reference other macros\n * @property index - The current token to be parsed: index in `this.tokens`\n * @property atoms - Accumulated result of the parsing by\n * `parseAtom()`\n * @property style - The font, weight, color, etc. to apply to the\n * upcoming tokens\n * @property parseMode - The parse mode indicates the syntax rules to\n * use to parse the upcoming tokens.\n * @property tabularMode - When in tabular mode, `'&'` is interpreted as\n *  a column separator and `'\\'` as a row separator. Used for matrixes, etc...\n * @property endCount - Counter to prevent deadlock. If `end()` is\n * called too many times (1,000) in a row for the same token, bail.\n */\nclass Parser {\n  tokens: Token[];\n  index = 0;\n\n  args: null | (string | Atom[])[];\n  macros: MacroDictionary;\n\n  style: Style = {};\n  parseMode: ParseMode = 'math';\n  smartFence = false;\n  tabularMode = false; // For arrays, matrix, etc.: ifferent parsing rules apply.\n\n  atoms: Atom[] = [];\n\n  endCount = 0;\n  onError: ErrorListener<ParserErrorCode>;\n\n  /**\n   * @param tokens - An array of tokens generated by the lexer.\n   * @param args - An optional list of arguments. `#n` tokens will be\n   * substituted with the corresponding element in the args object. This is used\n   * when parsing macros.\n   */\n  constructor(\n    tokens: Token[],\n    args: null | (string | Atom[])[],\n    macros: MacroDictionary,\n    onError: ErrorListener<ParserErrorCode>\n  ) {\n    this.tokens = tokens;\n    this.args = args;\n    this.macros = macros;\n    this.onError = (err): void =>\n      onError({\n        before: tokensToString(this.tokens.slice(this.index, this.index + 10)),\n        after: tokensToString(\n          this.tokens.slice(Math.max(0, this.index - 10), this.index)\n        ),\n        ...err,\n      });\n  }\n\n  swapAtoms(newAtoms: Atom[] = []): Atom[] {\n    const result = this.atoms;\n    this.atoms = newAtoms;\n    return result;\n  }\n\n  swapParseMode(mode: ParseMode): ParseMode {\n    const result = this.parseMode;\n    this.parseMode = mode;\n    return result;\n  }\n\n  /**\n   * True if we've reached the end of the token stream\n   */\n  end(): boolean {\n    // To prevent a deadlock, count how many times end() is called without the\n    // index advancing. If it happens more than 1,000 times in a row,\n    // assume something is broken and pretend the stream is finished.\n    this.endCount++;\n    return this.index >= this.tokens.length || this.endCount > 1000;\n  }\n\n  get(): Token {\n    this.endCount = 0;\n    return this.index < this.tokens.length ? this.tokens[this.index++] : '';\n  }\n\n  peek(): Token {\n    return this.tokens[this.index];\n  }\n\n  /**\n   * @return True if the next token matches the input, and advance\n   */\n  match(input: string): boolean {\n    if (this.tokens[this.index] === input) {\n      this.index++;\n      return true;\n    }\n\n    return false;\n  }\n\n  /**\n   * Return the last atom that can have a subscript/superscript attached to it.\n   * If there isn't one, insert a `SubsupAtom` and return it.\n   */\n  lastSubsupAtom(): Atom {\n    let atom: Atom;\n    if (this.atoms.length > 0) {\n      atom = this.atoms[this.atoms.length - 1];\n\n      // If this is a `subsup` atom, it can have a `subsup` attached to it.\n      if (atom.type === 'msubsup') return atom;\n\n      // if (atom.type === 'mop' && atom?.limits && atom?.limits !== undefined) {\n\n      // An atom can have superscript/subscript attached to it if it accepts\n      // limits (`\\sum`, `\\vec`...)\n      if (atom?.subsupPlacement !== undefined) return atom;\n    }\n    // Create a new `subsup` atom and return it\n    atom = new SubsupAtom();\n    this.atoms.push(atom);\n    return atom;\n  }\n\n  /**\n   * @return True if the next token matches the specified regular expression pattern.\n   */\n  hasPattern(pattern: RegExp): boolean {\n    return pattern.test(this.tokens[this.index]);\n  }\n\n  hasInfixCommand(): boolean {\n    const { index } = this;\n    if (index < this.tokens.length && this.tokens[index].startsWith('\\\\')) {\n      const info = getInfo(this.tokens[index], this.parseMode, this.macros);\n      if (!info) return false;\n      if (info.ifMode && !info.ifMode.includes(this.parseMode)) {\n        return false;\n      }\n\n      return info.infix;\n    }\n\n    return false;\n  }\n\n  matchColumnSeparator(): boolean {\n    const { index } = this;\n    if (this.tabularMode && this.tokens[index] === '&') {\n      this.index++;\n      return true;\n    }\n\n    return false;\n  }\n\n  matchRowSeparator(): boolean {\n    const { index } = this;\n    if (\n      this.tabularMode &&\n      (this.tokens[index] === '\\\\\\\\' || this.tokens[index] === '\\\\cr')\n    ) {\n      this.index++;\n      return true;\n    }\n\n    return false;\n  }\n\n  /**\n   * Return the appropriate value for a placeholder, either a default\n   * one, or if a value was provided for #? via args, that value.\n   */\n  placeholder(): Atom[] {\n    if (!this.args || this.args['?'] === undefined) {\n      return [\n        new PlaceholderAtom({\n          mode: this.parseMode,\n          style: this.style,\n        }),\n      ];\n    }\n\n    if (typeof this.args?.['?'] === 'string') {\n      // If there is a specific value defined for the placeholder,\n      // use it.\n      return parseLatex(\n        this.args['?'],\n        this.parseMode,\n        null,\n        this.macros,\n        false,\n        this.onError\n      );\n    }\n\n    return this.args['?'];\n  }\n\n  // MatchToken(type: string): boolean {\n  //     if (this.hasToken(type)) {\n  //         this.index++;\n  //         return true;\n  //     }\n  //     return false;\n  // }\n  matchWhitespace(): boolean {\n    let found = false;\n    while (this.match('<space>')) {\n      found = true;\n    }\n\n    return found;\n  }\n\n  skipUntilToken(input: string): void {\n    let token = this.tokens[this.index];\n    while (token && token !== input) {\n      token = this.tokens[++this.index];\n    }\n\n    if (token === input) {\n      this.index++;\n    }\n  }\n\n  skipFiller(): void {\n    let done = false;\n    do {\n      const skippedSpace = this.matchWhitespace();\n      const skippedRelax = this.match('\\\\relax');\n      done = !skippedSpace && !skippedRelax;\n    } while (!done);\n  }\n\n  /**\n   * Keywords are used to specify dimensions, and for various other\n   * syntactic constructs.\n   *\n   * Unlike commands, they are not case sensitive.\n   *\n   * There are 25 keywords:\n   *\n   * at by bp cc cm dd depth em ex fil fill filll height in minus\n   * mm mu pc plus pt sp spread to true width\n   *\n   * TeX: 8212\n   * @return true if the expected keyword is present\n   */\n  matchKeyword(keyword: string): boolean {\n    const savedIndex = this.index;\n    let done = this.end();\n    let value = '';\n    while (!done) {\n      const token = this.get();\n      if (isLiteral(token)) {\n        value += token;\n        done = this.end() || value.length >= keyword.length;\n      } else {\n        done = true;\n      }\n    }\n\n    const hasKeyword = keyword.toUpperCase() === value.toUpperCase();\n    if (!hasKeyword) {\n      this.index = savedIndex;\n    }\n\n    return hasKeyword;\n  }\n\n  /**\n   * Return a sequence of characters as a string.\n   * i.e. 'abcd' returns 'abcd'.\n   * Terminates on the first non-literal token encountered\n   * e.g. '<{>', '<}>' etc...\n   * Will also terminate on character literal ']'\n   */\n  scanString(): string {\n    let result = '';\n    let done = this.end();\n    while (!done) {\n      if (this.match('<space>')) {\n        result += ' ';\n      } else {\n        const token = this.peek();\n        if (token === ']') {\n          done = true;\n        } else if (isLiteral(token)) {\n          result += this.get();\n        } else if (token.startsWith('\\\\')) {\n          // TeX will give a 'Missing \\endcsname inserted' error\n          // if it encounters any command when expecting a string.\n          // We're a bit more lax.\n          this.onError({ code: 'unbalanced-braces' });\n          result += this.get();\n        } else {\n          // It's '<{>', '<}>', '<$>' or '<$$>\n          done = true;\n        }\n      }\n\n      done = done || this.end();\n    }\n\n    return result;\n  }\n\n  /**\n   * Return a sequence of characters as a string.\n   * Terminates on a balanced closing bracket\n   * This is used by the `\\ce` command\n   */\n  scanBalancedString(): string {\n    let result = '';\n    let done = this.end();\n    let level = 1;\n    while (!done) {\n      if (this.match('<space>')) {\n        result += ' ';\n      } else {\n        const token = this.get();\n        if (token === '<{>') {\n          result += '{';\n          level += 1;\n        } else if (token === '<}>') {\n          level -= 1;\n          if (level > 0) {\n            result += '}';\n          } else {\n            this.index -= 1;\n          }\n        } else if (token === '<$>') {\n          result += '$';\n        } else if (token === '<$$>') {\n          result += '$$';\n        } else {\n          result += token;\n        }\n      }\n\n      done = level === 0 || this.end();\n    }\n\n    return result;\n  }\n\n  /**\n   * Return the literal tokens, as a string, until a matching closing \"}\"\n   */\n  matchLiteralArg(): string {\n    let result = '';\n    if (this.match('<{>')) {\n      let depth = 1;\n      while (depth > 0 && !this.end()) {\n        const token = this.get()!;\n        if (token === '<}>') {\n          depth -= 1;\n          if (depth > 0) {\n            // Don't include final '}'\n            result += '}';\n          }\n        } else if (token === '<{>') {\n          depth += 1;\n          result += '{';\n        } else {\n          result +=\n            {\n              '<space>': ' ',\n              '<$$>': '$$',\n              '<$>': '$',\n            }[token] ?? token;\n        }\n      }\n    }\n\n    return result;\n  }\n\n  /**\n   * Return a CSS color (#rrggbb)\n   */\n  scanColor(): string {\n    return stringToColor(this.scanString());\n  }\n\n  /**\n   * Return as a number a group of characters representing a\n   * numerical quantity.\n   *\n   * From TeX:8695 (scan_int):\n   * An integer number can be preceded by any number of spaces and `+' or\n   * `-' signs. Then comes either a decimal constant (i.e., radix 10), an\n   * octal constant (i.e., radix 8, preceded by '), a hexadecimal constant\n   * (radix 16, preceded by \"), an alphabetic constant (preceded by `), or\n   * an internal variable.\n   */\n  scanNumber(isInteger = true): number {\n    let negative = false;\n    let token = this.peek();\n    while (token === '<space>' || token === '+' || token === '-') {\n      this.get();\n      if (token === '-') negative = !negative;\n      token = this.peek();\n    }\n\n    isInteger = Boolean(isInteger);\n\n    let radix = 10;\n    let digits = /\\d/;\n    if (this.match(\"'\")) {\n      // Apostrophe indicates an octal value\n      radix = 8;\n      digits = /[0-7]/;\n      isInteger = true;\n    } else if (this.match('\"') || this.match('x')) {\n      // Double-quote indicates a hex value\n      // The 'x' prefix notation for the hexadecimal numbers is a MathJax extension.\n      // For example: 'x3a'\n      radix = 16;\n      // Hex digits have to be upper-case\n      digits = /[\\dA-F]/;\n      isInteger = true;\n    } else if (this.match('`')) {\n      // A backtick indicates an alphabetic constant: a letter, or a single-letter command\n      token = this.get();\n      if (token) {\n        if (token.startsWith('\\\\') && token.length === 2) {\n          return (negative ? -1 : 1) * (token.codePointAt(1) ?? 0);\n        }\n\n        return (negative ? -1 : 1) * (token.codePointAt(0) ?? 0);\n      }\n\n      return Number.NaN;\n    }\n\n    let value = '';\n    while (this.hasPattern(digits)) {\n      value += this.get();\n    }\n\n    // Parse the fractional part, if applicable\n    if (!isInteger && (this.match('.') || this.match(','))) {\n      value += '.';\n      while (this.hasPattern(digits)) {\n        value += this.get();\n      }\n    }\n\n    const result = isInteger\n      ? Number.parseInt(value, radix)\n      : Number.parseFloat(value);\n    return negative ? -result : result;\n  }\n\n  /**\n   * Return as a floating point number a dimension in pt (1 em = 10 pt)\n   *\n   * See TeX:8831\n   * @todo: note that some units depend on the font (em, ex). So it might be\n   * better to return a dimen struct with the value + unit and resolve\n   * later when we have a font context....\n   */\n  scanDimen(): number {\n    const value = this.scanNumber(false);\n    this.matchWhitespace();\n    let result: number;\n    if (this.matchKeyword('pt')) {\n      result = convertDimenToEm(value, 'pt');\n    } else if (this.matchKeyword('mm')) {\n      result = convertDimenToEm(value, 'mm');\n    } else if (this.matchKeyword('cm')) {\n      result = convertDimenToEm(value, 'cm');\n    } else if (this.matchKeyword('ex')) {\n      result = convertDimenToEm(value, 'ex');\n    } else if (this.matchKeyword('px')) {\n      result = convertDimenToEm(value, 'px');\n    } else if (this.matchKeyword('em')) {\n      result = convertDimenToEm(value, 'em');\n    } else if (this.matchKeyword('bp')) {\n      result = convertDimenToEm(value, 'bp');\n    } else if (this.matchKeyword('dd')) {\n      result = convertDimenToEm(value, 'dd');\n    } else if (this.matchKeyword('pc')) {\n      result = convertDimenToEm(value, 'pc');\n    } else if (this.matchKeyword('in')) {\n      result = convertDimenToEm(value, 'in');\n    } else if (this.matchKeyword('mu')) {\n      result = convertDimenToEm(value, 'mu');\n    } else {\n      // If the units are missing, TeX assumes 'pt'\n      this.onError({ code: 'missing-unit' });\n      result = convertDimenToEm(value, 'pt');\n    }\n\n    return result;\n  }\n\n  scanSkip(): number {\n    const result = this.scanDimen();\n    // We parse, but ignore, the optional 'plus' and 'minus'\n    // arguments.\n    this.matchWhitespace();\n    // 'plus', optionally followed by 'minus'\n    // ('minus' cannot come before 'plus')\n    // dimen or 'hfill'\n    if (this.matchKeyword('plus')) {\n      // @todo there could also be a \\hFilLlL command here\n      this.scanDimen();\n    }\n\n    this.matchWhitespace();\n    if (this.matchKeyword('minus')) {\n      // @todo there could also be a \\hFilLlL command here\n      this.scanDimen();\n    }\n\n    return result;\n  }\n\n  scanColspec(): Colspec[] {\n    this.matchWhitespace();\n    const result: Colspec[] = [];\n    while (!this.end() && !(this.peek() === '<}>' || this.peek() === ']')) {\n      const literal = this.get();\n      if (literal === 'c' || literal === 'r' || literal === 'l') {\n        result.push({ align: literal });\n      } else if (literal === '|') {\n        result.push({ rule: true });\n      } else if (literal === '@') {\n        if (this.match('<{>')) {\n          const savedParsemode = this.swapParseMode('math');\n          result.push({\n            gap: this.parse((token) => token === '<}>'),\n          });\n          this.swapParseMode(savedParsemode);\n        }\n\n        if (!this.match('<}>')) {\n          this.onError({ code: 'unbalanced-braces' });\n        }\n      }\n    }\n\n    return result;\n  }\n\n  /**\n   * Parse a `\\(...\\)` or `\\[...\\]` sequence\n   * @return group for the sequence or null\n   */\n  parseModeSet(): Atom | null {\n    let final: Token = '';\n    if (this.match('\\\\(')) final = '\\\\)';\n    if (!final && this.match('\\\\[')) final = '\\\\]';\n    if (!final) return null;\n    const savedParsemode = this.swapParseMode('math');\n    const result = new GroupAtom(\n      this.parse((token) => token === final),\n      {\n        mathStyleName: final === '\\\\)' ? 'textstyle' : 'displaystyle',\n        latexOpen: final === '\\\\]' ? '\\\\[' : '\\\\(',\n        latexClose: final,\n      }\n    );\n    if (!this.match(final)) {\n      this.onError({ code: 'unbalanced-mode-shift' });\n    }\n\n    this.swapParseMode(savedParsemode);\n    if (result.hasEmptyBranch('body')) return null;\n\n    return result;\n  }\n\n  /**\n   * Parse a `$...$` or `$$...$$` sequence\n   */\n  parseModeShift(): Atom | null {\n    let final: Token = '';\n    if (this.match('<$>')) final = '<$>';\n    if (!final && this.match('<$$>')) final = '<$$>';\n    if (!final) return null;\n\n    const savedParsemode = this.swapParseMode('math');\n\n    const result = new GroupAtom(\n      this.parse((token: Token) => token === final),\n      {\n        mathStyleName: final === '<$>' ? 'textstyle' : 'displaystyle',\n        latexOpen: final === '<$>' ? '$' : '$$',\n        latexClose: final === '<$>' ? '$' : '$$',\n      }\n    );\n    if (!this.match(final)) {\n      this.onError({ code: 'unbalanced-mode-shift' });\n    }\n\n    this.swapParseMode(savedParsemode);\n    if (result.hasEmptyBranch('body')) return null;\n    return result;\n  }\n\n  /**\n   * Parse a \\begin{env}...\\end{end} sequence\n   */\n  parseEnvironment(): Atom | null {\n    // An environment starts with a \\begin command\n    if (!this.match('\\\\begin')) return null;\n\n    // The \\begin command is immediately followed by the environment\n    // name, as a string argument\n    const envName = this.parseArgument('string');\n    if (!envName) return null;\n    const def = getEnvironmentDefinition(envName);\n    if (!def) {\n      this.onError({\n        code: 'unknown-environment',\n        arg: envName,\n      });\n      return null;\n    }\n\n    // If the environment has some arguments, parse them\n    const args: Argument[] = [];\n    if (def.params) {\n      for (const parameter of def.params) {\n        // Parse an argument\n        if (parameter.isOptional) {\n          // If it's not present, parseOptionalArgument returns null,\n          // but push it on the list of arguments anyway.\n          // The null value will be interpreted as unspecified\n          // optional value by the command parse function.\n          args.push(this.parseOptionalArgument(parameter.type));\n        } else {\n          const arg: Argument = this.parseArgument(parameter.type);\n          if (!arg) {\n            this.onError({\n              code: 'missing-argument',\n              arg: envName,\n            });\n          }\n\n          args.push(arg);\n        }\n      }\n    }\n\n    // Some environments change the mode\n    const savedMode = this.parseMode;\n    const savedTabularMode = this.tabularMode;\n    const saveAtoms = this.swapAtoms([]);\n    // @todo: since calling scanImplicitGroup(), may not need to save/restore the atoms\n    this.tabularMode = def.tabular;\n    const array: Atom[][][] = [];\n    const rowGaps: number[] = [];\n    let row: Atom[][] = [];\n    let done = false;\n    do {\n      if (this.end()) {\n        this.onError({ code: 'unbalanced-environment', arg: envName });\n        done = true;\n      }\n\n      if (!done && this.match('\\\\end')) {\n        if (this.parseArgument('string') !== envName) {\n          this.onError({\n            code: 'unbalanced-environment',\n            arg: envName,\n          });\n        }\n\n        done = true;\n      }\n\n      if (!done) {\n        if (this.matchColumnSeparator()) {\n          row.push(this.swapAtoms([]));\n        } else if (this.matchRowSeparator()) {\n          row.push(this.swapAtoms([]));\n          let gap = 0;\n          this.matchWhitespace();\n          if (this.match('[')) {\n            gap = this.scanDimen();\n            this.matchWhitespace();\n            this.match(']');\n          }\n\n          rowGaps.push(gap || 0);\n          array.push(row);\n          row = [];\n        } else {\n          this.atoms = this.atoms.concat(\n            this.parse(\n              (token: Token) =>\n                token === '<}>' ||\n                token === '&' ||\n                token === '\\\\end' ||\n                token === '\\\\cr' ||\n                token === '\\\\\\\\'\n            )\n          );\n        }\n      }\n    } while (!done);\n\n    row.push(this.swapAtoms([]));\n    if (row.length > 0) array.push(row);\n    const newAtoms = this.swapAtoms(saveAtoms);\n    // If we're in tabular mode, we should end up with an empty atoms list\n    console.assert(\n      !this.tabularMode || newAtoms.length === 0,\n      'Leftover atoms in tabular mode'\n    );\n    this.parseMode = savedMode;\n    this.tabularMode = savedTabularMode;\n\n    if (!def.tabular && newAtoms.length === 0) return null;\n    if (def.tabular && array.length === 0) return null;\n\n    return def.createAtom(envName, array, rowGaps, args);\n  }\n\n  /**\n   * Parse a sequence until a group end marker, such as\n   * `}`, `\\end`, `&`, etc...\n   *\n   * Returns an array of atoms or an empty array if the sequence\n   * terminates right away.\n   *\n   * @param done - A predicate indicating if a\n   * token signals the end of an implicit group\n   */\n  parse(done?: (token: Token) => boolean): Atom[] {\n    const savedStyle = this.style;\n    if (!done) {\n      // Default group end marker\n      done = (token: Token): boolean => token === '<}>';\n    }\n\n    // To handle infix commands, we'll keep track of their prefix\n    // (tokens coming before them) and their arguments\n    let infix: Token = '';\n    let infixInfo: (FunctionDefinition & SymbolDefinition) | null = null;\n    let infixArgs: Atom[][] = [];\n    let prefix: Atom[] | null = null;\n    const saveAtoms = this.swapAtoms([]);\n    while (!this.end() && !done(this.peek())) {\n      if (this.hasInfixCommand() && !infix) {\n        // The next token is an infix and we have not seen one yet\n        // (there can be only one infix command per implicit group).\n        infix = this.get();\n        // The current parseMode, this.parseMode, may no longer have the value\n        // it had when we encountered the infix. However, since all infix are\n        // only defined in 'math' mode, we can use the 'math' constant\n        // for the parseMode\n        infixInfo = getInfo(infix, 'math', this.macros);\n        if (infixInfo) {\n          infixArgs = this.parseArguments(infixInfo)[1] as Atom[][];\n        }\n\n        // Save the math list so far and start a new one\n        prefix = this.swapAtoms([]);\n      } else {\n        this.parseToken();\n      }\n    }\n\n    let result: Atom[];\n    if (infix) {\n      console.assert(Boolean(infixInfo));\n      infixArgs.unshift(this.swapAtoms(saveAtoms)); // Suffix\n      if (prefix) infixArgs.unshift(prefix);\n      result = [infixInfo.createAtom(infix, infixArgs, this.style)];\n    } else {\n      result = this.swapAtoms(saveAtoms);\n    }\n\n    this.style = savedStyle;\n\n    return result;\n  }\n\n  /**\n   * Parse a group enclosed in a pair of braces: `{...}`.\n   *\n   * Return either a group Atom or null if not a group.\n   *\n   * Return a group Atom with an empty body if an empty\n   * group (i.e. `{}`).\n   */\n  parseGroup(): Atom | null {\n    if (!this.match('<{>')) return null;\n    const result = new GroupAtom(\n      this.parse((token: Token) => token === '<}>'),\n      {\n        mode: this.parseMode,\n        latexOpen: '{',\n        latexClose: '}',\n      }\n    );\n    if (!this.match('<}>')) {\n      this.onError({ code: 'unbalanced-braces' });\n    }\n\n    return result;\n  }\n\n  scanSmartFence(): Atom | null {\n    this.matchWhitespace();\n    if (!this.match('(')) return null;\n    // We've found an open paren... Convert to a `\\mleft...\\mright`\n    const saveAtoms = this.swapAtoms([]);\n    let nestLevel = 1;\n    while (!this.end() && nestLevel !== 0) {\n      if (this.match('(')) nestLevel += 1;\n      if (this.match(')')) nestLevel -= 1;\n      if (nestLevel !== 0) this.parseToken();\n    }\n\n    if (nestLevel === 0) this.match(')');\n    return new LeftRightAtom(this.swapAtoms(saveAtoms), {\n      inner: false,\n      leftDelim: '(',\n      rightDelim: nestLevel === 0 ? ')' : '?',\n    });\n  }\n\n  /**\n   * Scan a delimiter, e.g. '(', '|', '\\vert', '\\ulcorner'\n   *\n   * @return The delimiter (as a character or command) or null\n   */\n  scanDelim(): string | null {\n    this.matchWhitespace();\n    const token = this.get();\n    if (!token) {\n      this.onError({ code: 'unexpected-end-of-string' });\n      return null;\n    }\n\n    let delim = '.';\n    if (token.startsWith('\\\\') || isLiteral(token)) {\n      delim = token;\n    }\n\n    const info = getInfo(delim, 'math', this.macros);\n    if (!info) {\n      this.onError({ code: 'unknown-command', arg: delim });\n      return null;\n    }\n\n    if (info.ifMode && !info.ifMode.includes(this.parseMode)) {\n      this.onError({ code: 'unexpected-delimiter', arg: delim });\n      return null;\n    }\n\n    if (info.type === 'mopen' || info.type === 'mclose') {\n      return delim;\n    }\n\n    // Some symbols are not of type mopen/mclose, but are still\n    // valid delimiters...\n    // '?' is a special delimiter used as a 'placeholder'\n    // (when the closing delimiter is displayed greyed out)\n    if (\n      /^(\\.|\\?|\\||<|>|\\\\vert|\\\\Vert|\\\\\\||\\\\surd|\\\\uparrow|\\\\downarrow|\\\\Uparrow|\\\\Downarrow|\\\\updownarrow|\\\\Updownarrow|\\\\mid|\\\\mvert|\\\\mVert)$/.test(\n        delim\n      )\n    ) {\n      return delim;\n    }\n\n    this.onError({ code: 'unexpected-delimiter', arg: delim });\n    return null;\n  }\n\n  /**\n   * Parse a `/left.../right` sequence.\n   *\n   * Note: the `/middle` command can occur multiple times inside a\n   * `/left.../right` sequence, and is handled separately.\n   *\n   * Return either an atom of type `'leftright'` or null\n   */\n  parseLeftRight(): Atom | null {\n    if (this.match('\\\\right') || this.match('\\\\mright')) {\n      // We have an unbalanced left/right (there's a \\right, but no \\left)\n      this.onError({ code: 'unbalanced-braces' });\n      return null;\n    }\n\n    const savedStyle = this.style;\n\n    let close = '\\\\right';\n    if (!this.match('\\\\left')) {\n      if (!this.match('\\\\mleft')) return null;\n      close = '\\\\mright';\n    }\n\n    const leftDelim = this.scanDelim();\n    if (!leftDelim) return null;\n\n    const saveAtoms = this.swapAtoms([]);\n    while (!this.end() && !this.match(close)) {\n      this.parseToken();\n    }\n\n    this.style = savedStyle;\n\n    // If we've reached the end and there was no `\\right` or\n    // there isn't a valid delimiter after `\\right`, we'll\n    // consider the `\\right` missing and set the `rightDelim` to undefined\n    const rightDelim = this.scanDelim();\n\n    return new LeftRightAtom(this.swapAtoms(saveAtoms), {\n      leftDelim,\n      rightDelim,\n      inner: close === '\\\\right',\n      style: this.style,\n    });\n  }\n\n  /**\n   * Parse a subscript/superscript: `^` and `_`.\n   *\n   * Modify the last atom accordingly, or create a new 'msubsup' carrier.\n   *\n   */\n  parseSupSub(): boolean {\n    // No sup/sub in text or command mode.\n    if (this.parseMode !== 'math') return false;\n\n    // Apply the subscript/superscript to the last rendered atom.\n    // If none is present (beginning of the list, i.e. `{^2}`,\n    // an empty atom will be created, equivalent to `{{}^2}`\n    let token = this.peek();\n    if (token !== '^' && token !== '_' && token !== \"'\") return false;\n\n    while (token === '^' || token === '_' || token === \"'\") {\n      if (this.match(\"'\")) {\n        if (this.match(\"'\")) {\n          // A single quote, twice, is equivalent to '^{\\doubleprime}'\n          this.lastSubsupAtom().addChild(\n            new Atom('mord', {\n              command: '\\\\doubleprime',\n              mode: 'math',\n              value: '\\u2032\\u2032', // \"\\u2033\" displays too high\n            }),\n            'superscript'\n          );\n        } else {\n          // A single quote (prime) is equivalent to '^{\\prime}'\n          this.lastSubsupAtom().addChild(\n            new Atom('mord', {\n              command: '\\\\prime',\n              mode: 'math',\n              value: '\\u2032',\n            }),\n            'superscript'\n          );\n        }\n      } else if (this.match('^') || this.match('_')) {\n        const arg = this.parseArgument('math');\n        if (arg) {\n          this.lastSubsupAtom().addChildren(\n            arg,\n            token === '_' ? 'subscript' : 'superscript'\n          );\n        }\n      }\n\n      token = this.peek();\n    }\n\n    return true;\n  }\n\n  /**\n   * Parse a `\\limits` or `\\nolimits` command.\n   *\n   * This will change the placement of limits to be either above or below\n   * (if `\\limits`) or in the superscript/subscript position (if `\\nolimits`).\n   *\n   * This overrides the calculation made for the placement, which is usually\n   * dependent on the displaystyle (`textstyle` prefers `\\nolimits`, while\n   * `displaystyle` prefers `\\limits`).\n   */\n  parseLimits(): boolean {\n    // Note: technically, `\\limits` and `\\nolimits` are only applicable\n    // after an operator. However, we apply them in all cases. They\n    // will simply be ignored when not applicable (i.e. on a literal)\n    // which is actually consistent with TeX.\n    if (this.match('\\\\limits')) {\n      const lastAtom = this.lastSubsupAtom();\n      lastAtom.subsupPlacement = 'over-under';\n      // Record that the limits was set through an explicit command\n      // so we can generate the appropriate LaTeX later\n      lastAtom.explicitSubsupPlacement = true;\n      return true;\n    }\n\n    if (this.match('\\\\nolimits')) {\n      const lastAtom = this.lastSubsupAtom();\n      lastAtom.subsupPlacement = 'adjacent';\n      lastAtom.explicitSubsupPlacement = true;\n      return true;\n    }\n\n    return false;\n  }\n\n  parseArguments(info: FunctionDefinition): [ParseMode, Argument[]] {\n    if (!info || !info.params) return [undefined, []];\n    let explicitGroup: ParseMode;\n    const args: Argument[] = [];\n    let i = info.infix ? 2 : 0;\n    while (i < info.params.length) {\n      const parameter = info.params[i];\n      // Parse an argument\n      if (parameter.type === 'rest') {\n        args.push(\n          this.parse(\n            (token: Token) =>\n              token === '<}>' ||\n              token === '&' ||\n              token === '\\\\end' ||\n              token === '\\\\cr' ||\n              token === '\\\\\\\\'\n          )\n        );\n      } else if (parameter.isOptional) {\n        args.push(this.parseOptionalArgument(parameter.type));\n      } else if (parameter.type.endsWith('*')) {\n        // For example 'math*'.\n        // In this case, indicate that a 'yet-to-be-parsed'\n        // argument (and 'explicit group') is present\n        explicitGroup = parameter.type.slice(0, -1) as ParseMode;\n      } else {\n        const arg = this.parseArgument(parameter.type);\n        if (arg !== undefined) {\n          args.push(arg);\n        } else {\n          // Report an error\n          this.onError({ code: 'missing-argument' });\n          args.push(this.placeholder());\n        }\n      }\n\n      i += 1;\n    }\n\n    return [explicitGroup, args];\n  }\n\n  /**\n   * Parse a math field (in the TeX parlance), an argument to a function.\n   *\n   * An argument can either be a single atom or  a sequence of atoms enclosed\n   * in braces.\n   *\n   */\n  parseArgument(argType: 'auto'): Atom[];\n  parseArgument(argType: ParseMode): Atom[];\n  parseArgument(argType: 'balanced-string'): string;\n  parseArgument(argType: 'color'): string;\n  parseArgument(argType: 'colspec'): Colspec[];\n  parseArgument(argType: 'delim'): string;\n  parseArgument(argType: 'dimen'): number;\n  parseArgument(argType: 'number'): number;\n  parseArgument(argType: 'skip'): number;\n  parseArgument(argType: 'string'): string;\n  parseArgument(argType: ArgumentType): Argument;\n  parseArgument(argType: ArgumentType): Argument {\n    this.skipFiller();\n    argType = argType === 'auto' ? this.parseMode : argType;\n    let result: string | number | Atom[] | Colspec[];\n    // An argument (which is called a 'math field' in TeX)\n    // could be a single character or symbol, as in `\\frac12`\n    // Note that ``\\frac\\sqrt{-1}\\alpha\\beta`` is equivalent to\n    // ``\\frac{\\sqrt}{-1}{\\beta}``\n    if (!this.match('<{>')) {\n      if (argType === 'delim') {\n        return this.scanDelim() ?? '.';\n      }\n\n      if (argType === 'text' || argType === 'math') {\n        // Parse a single token.\n        const savedParseMode = this.swapParseMode(argType);\n        const atom = this.parseSimpleToken();\n        this.swapParseMode(savedParseMode);\n        return atom;\n      }\n    }\n\n    const saveAtoms = this.swapAtoms([]);\n    if (argType === 'text' || argType === 'math') {\n      const savedParseMode = this.parseMode;\n      this.parseMode = argType;\n\n      // Collect an array of tokens until a balanced \"}\"\n      const initialIndex = this.index;\n      let depth = 1;\n      do {\n        const token = this.get();\n        if (token === '<}>') depth -= 1;\n        if (token === '<{>') depth += 1;\n      } while (depth > 0 && !this.end());\n\n      result = Mode.parseTokens(\n        argType,\n        this.tokens.slice(initialIndex, this.index - 1),\n        this.onError,\n        {\n          args: this.args,\n          macros: this.macros,\n          smartFence: this.smartFence,\n          style: this.style,\n          parse: (\n            mode: ParseMode,\n            tokens: Token[],\n            options\n          ): [Atom[], Token[]] => {\n            const parser = new Parser(\n              tokens,\n              options.args,\n              options.macros,\n              this.onError\n            );\n            parser.parseMode = mode;\n            parser.style = options.style;\n            result = parser.parse();\n            return [result, tokens.slice(parser.index)];\n          },\n        }\n      );\n      if (!result) {\n        // No mode-specific result. Try again from the start\n        this.index = initialIndex;\n        do {\n          this.atoms = this.atoms.concat(this.parse());\n        } while (!this.match('<}>') && !this.end());\n      }\n\n      this.parseMode = savedParseMode;\n    } else {\n      if (argType === 'string') {\n        result = this.scanString();\n      } else if (argType === 'balanced-string') {\n        result = this.scanBalancedString();\n      } else if (argType === 'number') {\n        result = this.scanNumber();\n      } else if (argType === 'dimen') {\n        result = this.scanDimen();\n      } else if (argType === 'skip') {\n        result = this.scanSkip();\n      } else if (argType === 'colspec') {\n        result = this.scanColspec();\n      } else if (argType === 'color') {\n        result = this.scanColor() || '#ffffff';\n      } else if (argType === 'delim') {\n        result = this.scanDelim() || '.';\n      }\n\n      this.skipUntilToken('<}>');\n    }\n\n    const atoms = this.swapAtoms(saveAtoms);\n    return result ?? atoms;\n  }\n\n  parseOptionalArgument(parseMode: ArgumentType): Argument {\n    parseMode = parseMode === 'auto' ? this.parseMode : parseMode;\n    this.matchWhitespace();\n    if (!this.match('[')) return null;\n    const savedParseMode = this.parseMode;\n    const saveAtoms = this.swapAtoms();\n    let result: Argument;\n    while (!this.end() && !this.match(']')) {\n      if (parseMode === 'string') {\n        result = this.scanString();\n      } else if (parseMode === 'number') {\n        result = this.scanNumber();\n      } else if (parseMode === 'dimen') {\n        result = this.scanDimen();\n      } else if (parseMode === 'skip') {\n        result = this.scanSkip();\n      } else if (parseMode === 'colspec') {\n        result = this.scanColspec();\n      } else if (parseMode === 'color') {\n        result = this.scanColor() ?? '#ffffff';\n      } else if (parseMode === 'bbox') {\n        // The \\bbox command takes a very particular argument:\n        // a comma delimited list of up to three arguments:\n        // a color, a dimension and a string.\n        // Split the string by comma delimited sub-strings, ignoring commas\n        // that may be inside (). For example\"x, rgb(a, b, c)\" would return\n        // ['x', 'rgb(a, b, c)']\n        const list = this.scanString()\n          .toLowerCase()\n          .trim()\n          .split(/,(?![^(]*\\)(?:(?:[^(]*\\)){2})*[^\"]*$)/);\n        const bboxParameter: BBoxParameter = {};\n        for (const element of list) {\n          const color = stringToColor(element);\n          if (color) {\n            bboxParameter.backgroundcolor = color;\n          } else {\n            const m = element.match(/^\\s*([\\d.]+)\\s*([a-z]{2})/);\n            if (m) {\n              bboxParameter.padding = convertDimenToEm(m[1], m[2]);\n            } else {\n              const m = element.match(/^\\s*border\\s*:\\s*(.*)/);\n              if (m) {\n                bboxParameter.border = m[1];\n              }\n            }\n          }\n        }\n\n        result = bboxParameter;\n      } else if (parseMode === 'math') {\n        this.parseMode = parseMode;\n        this.atoms = this.atoms.concat(this.parse((token) => token === ']'));\n        this.parseMode = savedParseMode;\n      }\n    }\n\n    const atoms = this.swapAtoms(saveAtoms);\n    return result ?? atoms;\n  }\n\n  parseCommand(command: string): Atom[] {\n    let result: Atom = null;\n    if (command === '\\\\placeholder') {\n      return [\n        new PlaceholderAtom({\n          mode: this.parseMode,\n          value: this.parseArgument('string'),\n          style: this.style,\n        }),\n      ];\n    }\n\n    if (command === '\\\\char') {\n      // \\char has a special syntax and requires a non-braced integer\n      // argument\n      const initialIndex = this.index;\n      let codepoint = Math.floor(this.scanNumber(true));\n      if (\n        !Number.isFinite(codepoint) ||\n        codepoint < 0 ||\n        codepoint > 0x10ffff\n      ) {\n        codepoint = 0x2753; // BLACK QUESTION MARK\n      }\n\n      result = new Atom(this.parseMode === 'math' ? 'mord' : 'text', {\n        command: '\\\\char',\n        mode: this.parseMode,\n        value: String.fromCodePoint(codepoint),\n      });\n      result.latex =\n        '\\\\char' + tokensToString(this.tokens.slice(initialIndex, this.index));\n      return [result];\n    }\n\n    if (command === '\\\\hskip' || command === '\\\\kern') {\n      // \\hskip and \\kern have a special syntax and requires a non-braced\n      // 'skip' argument\n      const width = this.scanSkip();\n      if (!Number.isFinite(width)) return null;\n      return [new SpacingAtom(command, this.style, width)];\n    }\n\n    // Is this a macro?\n    result = this.scanMacro(command);\n    if (result) return [result];\n\n    // This wasn't a macro, so let's see if it's a regular command\n    const info = getInfo(command, this.parseMode, {});\n\n    if (!info) {\n      // An unknown command\n      this.onError({\n        code: 'unknown-command',\n        arg: command,\n      });\n      return [new ErrorAtom(command)];\n    }\n\n    if (info.ifMode && !info.ifMode.includes(this.parseMode)) {\n      // Command not applicable in this mode: ignore it (TeX behavior)\n      // (for example `\\Huge` in math mode\n      return [];\n    }\n\n    // Parse the arguments.\n    //\n    // If `deferredArg` is not empty, the content after the command\n    // will be parsed *after* the command has been initially processed\n    // (atom creation or style application) and passed to\n    //\n    // This is used for commands such as \\textcolor{color}{content}\n    // that need to apply the color to the content *after* the\n    // style has been changed.\n    //\n    // In definitions, this is indicated with a parameter type\n    // thats ends with a '*' ('math*', 'auto*').\n\n    const savedMode = this.parseMode;\n    if (info.applyMode) {\n      this.parseMode = info.applyMode;\n    }\n\n    const initialIndex = this.index;\n    const [deferredArg, args] = this.parseArguments(info);\n    this.parseMode = savedMode;\n\n    if (!args) return null; // Some required arguments were missing...\n\n    if (info.applyMode && !info.applyStyle && !info.createAtom) {\n      return args[0] as Atom[];\n    }\n\n    if (info.infix) {\n      // Infix commands should be handled in scanImplicitGroup\n      // If we find an infix command here, it's a syntax error\n      // (second infix command in a group) and should be ignored.\n      this.onError({\n        code: 'too-many-infix-commands',\n        arg: command,\n      });\n      return null;\n    }\n\n    //  Invoke the createAtom() function if present\n    if (typeof info.createAtom === 'function') {\n      result = info.createAtom(command, args, this.style);\n      if (deferredArg) {\n        result.body = this.parseArgument(deferredArg);\n      }\n    } else if (typeof info.applyStyle === 'function') {\n      const style = info.applyStyle(command, args);\n      // No type provided -> the parse function will modify\n      // the current style rather than create a new Atom.\n      const savedMode = this.parseMode;\n      if (info.applyMode) {\n        // Change to 'text' (or 'math') mode if necessary\n        this.parseMode = info.applyMode;\n      }\n\n      // If a deferred arg is expected, process it now\n      if (deferredArg) {\n        // Create a temporary style\n        const saveStyle = this.style;\n        this.style = { ...this.style, ...style };\n        const atoms = this.parseArgument(deferredArg);\n        this.style = saveStyle;\n        this.parseMode = savedMode;\n        return atoms;\n      }\n\n      // Merge the new style info with the current style\n      this.style = { ...this.style, ...style };\n      this.parseMode = savedMode;\n    } else {\n      // The new atom will inherit the current style\n      const style = { ...this.style };\n      // Override the variant if an explicit variant is provided\n      if (info.variant) {\n        style.variant = info.variant;\n      }\n      result = new Atom(info.type ?? 'mop', {\n        command,\n        style,\n        value: info.value ?? command,\n        mode: info.applyMode ?? this.parseMode,\n      });\n    }\n\n    if (\n      result instanceof Atom &&\n      !/^\\\\(llap|rlap|class|cssId|htmlData)$/.test(command)\n    ) {\n      const argString = tokensToString(\n        this.tokens.slice(initialIndex, this.index)\n      );\n      if (argString && result.command) {\n        result.latex = result.command + argString;\n      }\n\n      if (result.isFunction && this.smartFence) {\n        // The command was a function that may be followed by\n        // an argument, like `\\sin(`\n        const smartFence = this.scanSmartFence();\n        if (smartFence) return [result, smartFence];\n      }\n    }\n\n    if (!result) return null;\n    return [result];\n  }\n\n  parseLiteral(literal: string): Atom[] {\n    const result = Mode.createAtom(this.parseMode, literal, {\n      ...this.style,\n    });\n\n    if (result.isFunction && this.smartFence) {\n      // The atom was a function that may be followed by\n      // an argument, like `f(`.\n      const smartFence = this.scanSmartFence();\n      if (smartFence) return [result, smartFence];\n    }\n\n    return [result];\n  }\n\n  parseSimpleToken(): Atom[] {\n    const token = this.get();\n    if (!token) return null;\n\n    if (token === '<space>') {\n      if (this.parseMode === 'text') {\n        return [new TextAtom(' ', ' ', this.style)];\n      }\n\n      return null;\n    }\n\n    if (token.startsWith('\\\\')) return this.parseCommand(token);\n\n    if (isLiteral(token)) return this.parseLiteral(token);\n\n    if (token === '<}>') {\n      this.onError({ latex: '', code: 'unbalanced-braces' });\n    } else {\n      this.onError({\n        latex: '',\n        code: 'unexpected-token',\n        arg: token,\n      });\n    }\n\n    return null;\n  }\n\n  /**\n   * Attempt to scan the macro name and return an atom list if successful.\n   * Otherwise, it wasn't a macro.\n   */\n  scanMacro(macro: string): Atom {\n    const macroName = macro.slice(1);\n    if (!this.macros || !this.macros[macroName]) return null;\n    const initialIndex = this.index;\n    const args: (string | Atom[])[] = [];\n    let def: string;\n    let argCount = 0;\n    if (typeof this.macros[macroName] === 'string') {\n      def = this.macros[macroName] as string;\n      // Let's see if there are arguments in the definition.\n      if (/(^|[^\\\\])#1/.test(def)) argCount = 1;\n      if (/(^|[^\\\\])#2/.test(def)) argCount = 2;\n      if (/(^|[^\\\\])#3/.test(def)) argCount = 3;\n      if (/(^|[^\\\\])#4/.test(def)) argCount = 4;\n      if (/(^|[^\\\\])#5/.test(def)) argCount = 5;\n      if (/(^|[^\\\\])#6/.test(def)) argCount = 6;\n      if (/(^|[^\\\\])#7/.test(def)) argCount = 7;\n      if (/(^|[^\\\\])#8/.test(def)) argCount = 8;\n      if (/(^|[^\\\\])#9/.test(def)) argCount = 9;\n    } else {\n      def = (this.macros[macroName] as MacroDefinition).def;\n      argCount = (this.macros[macroName] as MacroDefinition).args || 0;\n    }\n\n    for (let i = 1; i <= argCount; i++) {\n      // Parse each argument as a string. We don't know yet\n      // what the proper parse mode is, so defer parsing till later\n      // when invoking `parseString`\n      args[i] = this.matchLiteralArg();\n    }\n\n    // Carry forward the placeholder argument, if any.\n    args['?'] = this.args?.['?'];\n\n    // Group the result of the macro expansion\n    return new MacroAtom(\n      macro,\n      tokensToString(this.tokens.slice(initialIndex, this.index)),\n      parseLatex(def, this.parseMode, args, this.macros, false, this.onError)\n    );\n  }\n\n  /**\n   * Make an atom for the current token or token group and\n   * add it to the parser's current atoms\n   */\n  parseToken(): boolean {\n    let result: Atom | Atom[] =\n      this.parseEnvironment() ||\n      this.parseModeShift() ||\n      this.parseModeSet() ||\n      this.parseGroup() ||\n      this.parseLeftRight();\n    if (!result && (this.parseSupSub() || this.parseLimits())) return true;\n    if (!result) result = this.parseSimpleToken();\n    // If we have an atom to add, push it at the end of the current math list\n    // We could have no atom for tokens that were skipped, a ' ' in math mode\n    // for example\n    if (isArray<Atom>(result)) {\n      this.atoms = this.atoms.concat(result);\n    } else if (result) {\n      this.atoms.push(result);\n    }\n\n    return result !== null;\n  }\n}\n\n/**\n * Given a string of LaTeX, return a corresponding array of atoms.\n * @param args - If there are any placeholder tokens, e.g.\n * `#0`, `#1`, etc... they will be replaced by the value provided by `args`.\n * @param smartFence - If true, promote plain fences, e.g. `(`,\n * as `\\left...\\right` or `\\mleft...\\mright`\n */\nexport function parseLatex(\n  s: string,\n  parseMode: ParseMode,\n  args: null | (string | Atom[])[] = null,\n  macros: null | MacroDictionary = null,\n  smartFence = false,\n  onError?: ErrorListener<ParserErrorCode>\n): Atom[] {\n  const parser = new Parser(\n    tokenize(s, args as string[]),\n    args,\n    macros,\n    (err) => {\n      if (typeof onError === 'function') {\n        onError({ ...err, latex: s });\n      } else {\n        // Console.warn(\n        //     'MathLive parsing error: ' +\n        //         err.code +\n        //         (err.arg ? ' ' + err.arg + ' ' : ''),\n        //     'in \"' + s + '\"'\n        // );\n      }\n    }\n  );\n  parser.parseMode = parseMode ?? 'math';\n  if (smartFence) parser.smartFence = true;\n\n  let atoms = [];\n  while (!parser.end()) {\n    const more = parser.parse();\n    if (!more) break;\n    atoms = atoms.concat(more);\n  }\n\n  return atoms;\n}\n","import type { Context } from '../core/context';\nimport { Atom } from '../core/atom-class';\n\nimport {\n  makeSVGSpan,\n  makeVlist,\n  makeSymbol,\n  skew as spanSkew,\n  Span,\n} from '../core/span';\nimport { METRICS as FONTMETRICS } from '../core/font-metrics';\nimport { Style } from '../public/core';\n\nexport class AccentAtom extends Atom {\n  private readonly accent?: number;\n  private readonly svgAccent?: string;\n  constructor(\n    command: string,\n    body: Atom[],\n    options: { accentChar?: number; svgAccent?: string; style: Style }\n  ) {\n    super('accent', { command, style: options.style });\n    if (options.accentChar) {\n      this.accent = options.accentChar;\n    } else {\n      this.svgAccent = options?.svgAccent;\n    }\n\n    this.body = body;\n    this.skipBoundary = true;\n    // this.limits = 'accent'; // This will suppress the regular\n    // supsub attachment and will delegate\n    // it to the decomposeAccent\n    // (any non-null value would do)\n  }\n\n  render(context: Context): Span {\n    // Accents are handled in the TeXbook pg. 443, rule 12.\n    const { mathstyle } = context;\n    // Build the base atom\n    const base = new Span(Atom.render(context.cramp(), this.body));\n    // Calculate the skew of the accent. This is based on the line \"If the\n    // nucleus is not a single character, let s = 0; otherwise set s to the\n    // kern amount for the nucleus followed by the \\skewchar of its font.\"\n    // Note that our skew metrics are just the kern between each character\n    // and the skewchar.\n    let skew = 0;\n    if (\n      !this.hasEmptyBranch('body') &&\n      this.body.length === 2 &&\n      this.body[1].isCharacterBox()\n    ) {\n      skew = spanSkew(base);\n    }\n\n    // Calculate the amount of space between the body and the accent\n    let clearance = Math.min(base.height, mathstyle.metrics.xHeight);\n    let accentBody: Span;\n    if (this.svgAccent) {\n      accentBody = makeSVGSpan(this.svgAccent);\n      clearance = -clearance + FONTMETRICS.bigOpSpacing1;\n    } else {\n      // Build the accent\n      const accent = makeSymbol('Main-Regular', this.accent);\n      // Remove the italic correction of the accent, because it only serves to\n      // shift the accent over to a place we don't want.\n      accent.italic = 0;\n      // The \\vec character that the fonts use is a combining character, and\n      // thus shows up much too far to the left. To account for this, we add a\n      // specific class which shifts the accent over to where we want it.\n      const vecClass = this.accent === 0x20d7 ? ' accent-vec' : '';\n      accentBody = new Span(new Span(accent), {\n        classes: 'accent-body' + vecClass,\n      });\n    }\n\n    accentBody = makeVlist(context, [new Span(base), -clearance, accentBody]);\n    // Shift the accent over by the skew. Note we shift by twice the skew\n    // because we are centering the accent, so by adding 2*skew to the left,\n    // we shift it to the right by 1*skew.\n    accentBody.children[accentBody.children.length - 1].left = 2 * skew;\n    const result = new Span(accentBody, { classes: 'accent', type: 'mord' });\n    if (this.caret) result.caret = this.caret;\n    return this.attachSupsub(context, result, result.type);\n  }\n}\n","import { Atom, ToLatexOptions } from '../core/atom-class';\nimport {\n  Span,\n  SpanType,\n  isSpanType,\n  makeSVGSpan,\n  makeVlist,\n} from '../core/span';\nimport { METRICS as FONTMETRICS } from '../core/font-metrics';\nimport { MATHSTYLES } from '../core/mathstyle';\nimport { Context } from '../core/context';\nimport { Style } from '../public/core';\nimport { makeNullFence } from '../core/delimiters';\n\n// An `overunder` atom has the following attributes:\n// - body: atoms[]: atoms displayed on the base line\n// - svgBody: string. A SVG graphic displayed on the base line (if present, the body is ignored)\n// - above: atoms[]: atoms displayed above the body\n// - svgAbove: string. A named SVG graphic above the element\n// - below: atoms[]: atoms displayed below the body\n// - svgBelow: string. A named SVG graphic below the element\nexport class OverunderAtom extends Atom {\n  svgAbove?: string;\n  svgBelow?: string;\n  svgBody?: string;\n  constructor(\n    command: string,\n    options: {\n      body?: Atom[];\n      above?: Atom[];\n      below?: Atom[];\n      svgBody?: string;\n      svgAbove?: string;\n      svgBelow?: string;\n      skipBoundary?: boolean;\n      subsupPlacement?: 'over-under';\n      style: Style;\n      toLatexOverride?: (\n        atom: OverunderAtom,\n        options: ToLatexOptions\n      ) => string;\n    }\n  ) {\n    super('overunder', {\n      command,\n      toLatexOverride: options.toLatexOverride,\n      style: options.style,\n    });\n    this.skipBoundary = options.skipBoundary ?? true;\n    this.subsupPlacement = options.subsupPlacement ? 'over-under' : undefined;\n\n    this.body = options.body;\n    this.svgAbove = options.svgAbove;\n    this.svgBelow = options.svgBelow;\n    this.svgBody = options.svgBody;\n    this.above = options.above;\n    this.below = options.below;\n  }\n\n  render(context: Context): Span {\n    const body: Span[] = this.svgBody\n      ? [makeSVGSpan(this.svgBody)]\n      : Atom.render(context, this.body);\n    const annotationStyle = context.clone({\n      mathstyle: MATHSTYLES.scriptstyle,\n    });\n    let above: Span;\n    let below: Span;\n    if (this.svgAbove) {\n      above = makeSVGSpan(this.svgAbove);\n    } else if (this.above) {\n      above = new Span(Atom.render(annotationStyle, this.above));\n    }\n\n    if (this.svgBelow) {\n      below = makeSVGSpan(this.svgBelow);\n    } else if (this.below) {\n      below = new Span(Atom.render(annotationStyle, this.below));\n    }\n\n    if (above && below) {\n      // Pad the above and below if over a \"base\"\n      below.left = 0.3;\n      below.right = 0.3;\n      above.left = 0.3;\n      above.right = 0.3;\n    }\n\n    let result = makeOverunderStack(\n      context,\n      body,\n      above,\n      below,\n      isSpanType(this.type) ? this.type : 'mrel'\n    );\n    if (this.superscript || this.subscript) {\n      result = this.attachLimits(context, result, 0, 0);\n    }\n\n    if (this.caret) result.caret = this.caret;\n    // Bind the generated span so its components can be selected\n    return this.bind(context, result);\n  }\n}\n\n/**\n * Combine a nucleus with an atom above and an atom below. Used to form\n * stacks for the 'overunder' atom type .\n *\n * @param nucleus The base over and under which the atoms will\n * be placed.\n * @param type The type ('mop', 'mrel', etc...) of the result\n */\nfunction makeOverunderStack(\n  context: Context,\n  nucleus: Span[],\n  above: Span,\n  below: Span,\n  type: SpanType\n): Span {\n  // If nothing above and nothing below, nothing to do.\n  if (!above && !below) {\n    return new Span(nucleus, { classes: 'op-over-under', type });\n    // Return isArray(nucleus) ? makeSpan(nucleus) : nucleus;\n  }\n\n  let aboveShift = 0;\n  let belowShift = 0;\n\n  if (above) {\n    above.height += FONTMETRICS.bigOpSpacing5;\n    aboveShift = Math.max(\n      FONTMETRICS.bigOpSpacing1,\n      FONTMETRICS.bigOpSpacing3 - above.depth\n    );\n  }\n\n  if (below) {\n    below.height += FONTMETRICS.bigOpSpacing5;\n    belowShift = Math.max(\n      FONTMETRICS.bigOpSpacing2,\n      FONTMETRICS.bigOpSpacing4 - below.height\n    );\n  }\n\n  let result = null;\n  const wrappedNucleus = new Span([\n    makeNullFence(context, 'mopen'),\n    ...(nucleus ?? []),\n    makeNullFence(context, 'mclose'),\n  ]);\n\n  if (below && above) {\n    const bottom = below.height + below.depth + wrappedNucleus.depth;\n\n    result = makeVlist(\n      context,\n      [\n        0,\n        below,\n        belowShift,\n        wrappedNucleus,\n        aboveShift,\n        above,\n        FONTMETRICS.bigOpSpacing2,\n      ],\n      'bottom',\n      { initialPos: bottom }\n    );\n    // result.height = result.height - belowShift;\n    // result.depth = belowShift;\n  } else if (below && !above) {\n    result = makeVlist(context, [0, below, belowShift, wrappedNucleus], 'top', {\n      initialPos: wrappedNucleus.height,\n    });\n  } else if (above && !below) {\n    result = makeVlist(\n      context,\n      [\n        wrappedNucleus.depth,\n        wrappedNucleus,\n        Math.max(FONTMETRICS.bigOpSpacing2, aboveShift), // TeXBook 13a, p.444\n        above,\n      ],\n      'bottom',\n      { initialPos: wrappedNucleus.depth }\n    );\n    // result.height = result.height - wrappedNucleus.depth;\n    // result.depth = wrappedNucleus.depth;\n  }\n\n  return new Span(result, { classes: 'op-over-under', type });\n}\n","import {\n  Argument,\n  defineFunction,\n  parseArgAsString,\n} from './definitions-utils';\nimport { Atom } from '../core/atom-class';\nimport { AccentAtom } from '../core-atoms/accent';\nimport { OverunderAtom } from '../core-atoms/overunder';\nimport { Style } from '../public/core';\n\nconst ACCENTS = {\n  acute: 0x02ca,\n  grave: 0x02cb,\n  dot: 0x02d9,\n  ddot: 0x00a8,\n  mathring: 0x02da,\n  tilde: 0x007e,\n  bar: 0x02c9,\n  breve: 0x02d8,\n  check: 0x02c7,\n  hat: 0x005e,\n  vec: 0x20d7,\n};\n\ndefineFunction(Object.keys(ACCENTS), '{body:auto}', {\n  createAtom: (command: string, args: Argument[], style: Style): Atom =>\n    new AccentAtom(command, args[0] as Atom[], {\n      accentChar: ACCENTS[command.slice(1)],\n      style,\n    }),\n});\n\ndefineFunction(['widehat', 'widecheck', 'widetilde'], '{body:auto}', {\n  createAtom: (command: string, args: Argument[], style: Style): Atom => {\n    // Pick the correct SVG template based on the length of the body\n    const baseString = parseArgAsString(args[0] as Atom[]);\n    return new AccentAtom(command, args[0] as Atom[], {\n      style,\n      svgAccent:\n        command.slice(1) +\n        (baseString.length > 5\n          ? '4'\n          : ['1', '1', '2', '2', '3', '3'][baseString.length]),\n    });\n  },\n});\n\ndefineFunction('utilde', '{body:auto}', {\n  createAtom: (command: string, args: Argument[], style: Style): Atom => {\n    const baseString = parseArgAsString(args[0] as Atom[]);\n    const accent =\n      'widetilde' +\n      (baseString.length > 5\n        ? '4'\n        : ['1', '1', '2', '2', '3', '3'][baseString.length]);\n    return new OverunderAtom(command, {\n      body: args[0] as Atom[],\n      svgBelow: accent,\n      style,\n    });\n  },\n});\n\n/*\n * From plain.tex\n *\n */\n\ndefineFunction('^', '{:string}', {\n  createAtom: (command: string, args: Argument[], style: Style): Atom =>\n    new Atom('mord', {\n      command,\n      isFunction: false,\n      limits: 'adjacent',\n      style,\n      value: args[0]\n        ? {\n            a: 'â',\n            e: 'ê',\n            i: 'î',\n            o: 'ô',\n            u: 'û',\n            A: 'Â',\n            E: 'Ê',\n            I: 'Î',\n            O: 'Ô',\n            U: 'Û',\n          }[args[0] as string] ?? '^'\n        : '^',\n    }),\n});\n\ndefineFunction('`', '{:string}', {\n  createAtom: (command: string, args: Argument[], style: Style): Atom =>\n    new Atom('mord', {\n      command,\n      isFunction: false,\n      limits: 'adjacent',\n      style,\n      value: args[0]\n        ? {\n            a: 'à',\n            e: 'è',\n            i: 'ì',\n            o: 'ò',\n            u: 'ù',\n            A: 'À',\n            E: 'È',\n            I: 'Ì',\n            O: 'Ò',\n            U: 'Ù',\n          }[args[0] as string] ?? '`'\n        : '`',\n    }),\n});\n\ndefineFunction(\"'\", '{:string}', {\n  createAtom: (command: string, args: Argument[], style: Style): Atom =>\n    new Atom('mord', {\n      command,\n      isFunction: false,\n      limits: 'adjacent',\n      style,\n      value: args[0]\n        ? {\n            a: 'á',\n            e: 'é',\n            i: 'í',\n            o: 'ó',\n            u: 'ú',\n            A: 'Á',\n            E: 'É',\n            I: 'Í',\n            O: 'Ó',\n            U: 'Ú',\n          }[args[0] as string] ?? '\\u005E'\n        : '\\u005E',\n    }),\n});\n\ndefineFunction('~', '{:string}', {\n  createAtom: (command: string, args: Argument[], style: Style): Atom =>\n    new Atom('mord', {\n      command,\n      isFunction: false,\n      limits: 'adjacent',\n      style,\n      value: args[0]\n        ? { n: 'ñ', N: 'Ñ', a: 'ã', o: 'õ', A: 'Ã', O: 'Õ' }[\n            args[0] as string\n          ] ?? '\\u00B4'\n        : '\\u00B4',\n    }),\n});\n\ndefineFunction('c', '{:string}', {\n  createAtom: (command: string, args: Argument[], style: Style): Atom =>\n    new Atom('mord', {\n      command,\n      isFunction: false,\n      limits: 'adjacent',\n      style,\n      value: args[0] ? { c: 'ç', C: 'Ç' }[args[0] as string] ?? '' : '',\n    }),\n});\n","import { Atom, ToLatexOptions } from '../core/atom-class';\nimport { METRICS as FONTMETRICS } from '../core/font-metrics';\nimport { addSVGOverlay, Span } from '../core/span';\nimport { Context } from '../core/context';\nimport { colorToString } from '../core/color';\nimport { Style } from '../public/core';\n\nexport type EncloseAtomOptions = {\n  shadow?: string;\n  strokeWidth?: number;\n  strokeStyle?: string;\n  svgStrokeStyle?: string;\n  strokeColor?: string;\n  borderStyle?: string;\n  padding?: string | number;\n  backgroundcolor?: string;\n  style: Style;\n};\nexport type Notations = {\n  downdiagonalstrike?: boolean;\n  updiagonalstrike?: boolean;\n  verticalstrike?: boolean;\n  horizontalstrike?: boolean;\n  updiagonalarrow?: boolean;\n  right?: boolean;\n  bottom?: boolean;\n  left?: boolean;\n  top?: boolean;\n  circle?: boolean;\n  roundedbox?: boolean;\n  madruwb?: boolean;\n  actuarial?: boolean;\n  box?: boolean;\n};\n\nexport class EncloseAtom extends Atom {\n  backgroundcolor: string;\n  border: string;\n\n  private readonly notation: Notations;\n  private readonly shadow?: string;\n  private readonly strokeWidth?: number;\n  private readonly strokeStyle?: string;\n  private readonly svgStrokeStyle?: string;\n  private readonly strokeColor?: string;\n  private readonly borderStyle?: string;\n\n  private readonly padding?: string | number;\n  constructor(\n    command: string,\n    body: Atom[],\n    notation: Notations,\n    options: EncloseAtomOptions\n  ) {\n    super('enclose', { command, style: options.style });\n    this.body = body;\n    this.backgroundcolor = options.backgroundcolor;\n    if (notation.updiagonalarrow) {\n      notation.updiagonalstrike = false;\n    }\n\n    if (notation.box) {\n      notation.left = false;\n      notation.right = false;\n      notation.bottom = false;\n      notation.top = false;\n    }\n\n    this.notation = notation;\n    this.shadow = options.shadow;\n    this.strokeWidth = options.strokeWidth;\n    this.strokeStyle = options.strokeStyle;\n    this.svgStrokeStyle = options.svgStrokeStyle;\n    this.strokeColor = options.strokeColor;\n    this.borderStyle = options.borderStyle;\n    this.padding = options.padding;\n\n    this.captureSelection = true; // Do not let children be selected\n  }\n\n  toLatex(options: ToLatexOptions): string {\n    let result = this.command;\n    if (this.command === '\\\\enclose') {\n      result += '{' + Object.keys(this.notation).join(' ') + '}';\n\n      // \\enclose can have optional parameters...\n      let style = '';\n      let sep = '';\n      if (this.backgroundcolor && this.backgroundcolor !== 'transparent') {\n        style +=\n          sep + 'mathbackground=\"' + colorToString(this.backgroundcolor) + '\"';\n        sep = ',';\n      }\n\n      if (this.shadow && this.shadow !== 'auto') {\n        style += sep + 'shadow=\"' + this.shadow + '\"';\n        sep = ',';\n      }\n\n      if (this.strokeWidth !== 1 || this.strokeStyle !== 'solid') {\n        style += sep + this.borderStyle;\n        sep = ',';\n      } else if (this.strokeColor && this.strokeColor !== 'currentColor') {\n        style += sep + 'mathcolor=\"' + colorToString(this.strokeColor) + '\"';\n        sep = ',';\n      }\n\n      if (style) {\n        result += `[${style}]`;\n      }\n    }\n\n    result += `{${this.bodyToLatex(options)}}`;\n    return result;\n  }\n\n  render(context: Context): Span {\n    const base = new Span(Atom.render(context, this.body), { type: 'mord' });\n\n    // Account for the padding\n    const padding =\n      typeof this.padding === 'number' ? this.padding : FONTMETRICS.fboxsep;\n\n    // The 'ML__notation' class is required to prevent the span from being omitted\n    // during rendering (it looks like an empty, no-op span)\n    const notation = new Span(null, { classes: 'ML__notation' });\n    notation.setStyle('position', 'absolute');\n    notation.setStyle('height', base.height + base.depth + 2 * padding, 'em');\n    notation.height = base.height + padding;\n    notation.depth = base.depth + padding;\n    if (padding !== 0) {\n      notation.setStyle('width', `calc(100% + ${2 * padding}em)`);\n    } else {\n      notation.setStyle('width', '100%');\n    }\n\n    notation.setStyle('top', -base.height + 2 * padding, 'em');\n    notation.setStyle('left', -padding, 'em');\n    notation.setStyle('z-index', '-1'); // Ensure the box is *behind* the base\n    notation.setStyle('box-sizing', 'border-box');\n    if (this.backgroundcolor) {\n      notation.setStyle('background-color', this.backgroundcolor);\n    }\n\n    if (this.notation.box) notation.setStyle('border', this.borderStyle);\n    if (this.notation.actuarial) {\n      notation.setStyle('border-top', this.borderStyle);\n      notation.setStyle('border-right', this.borderStyle);\n    }\n\n    if (this.notation.madruwb) {\n      notation.setStyle('border-bottom', this.borderStyle);\n      notation.setStyle('border-right', this.borderStyle);\n    }\n\n    if (this.notation.roundedbox) {\n      notation.setStyle('border-radius', (base.height + base.depth) / 2, 'em');\n      notation.setStyle('border', this.borderStyle);\n    }\n\n    if (this.notation.circle) {\n      notation.setStyle('border-radius', '50%');\n      notation.setStyle('border', this.borderStyle);\n    }\n\n    if (this.notation.top) {\n      notation.setStyle('border-top', this.borderStyle);\n    }\n\n    if (this.notation.left) {\n      notation.setStyle('border-left', this.borderStyle);\n    }\n\n    if (this.notation.right) {\n      notation.setStyle('border-right', this.borderStyle);\n    }\n\n    if (this.notation.bottom) {\n      notation.setStyle('border-bottom', this.borderStyle);\n    }\n\n    let svg = '';\n\n    if (this.notation.horizontalstrike) {\n      svg += '<line x1=\"3%\"  y1=\"50%\" x2=\"97%\" y2=\"50%\"';\n      svg += ` stroke-width=\"${this.strokeWidth}\" stroke=\"${this.strokeColor}\"`;\n      svg += ' stroke-linecap=\"round\"';\n      if (this.svgStrokeStyle) {\n        svg += ` stroke-dasharray=\"${this.svgStrokeStyle}\"`;\n      }\n\n      svg += '/>';\n    }\n\n    if (this.notation.verticalstrike) {\n      svg += '<line x1=\"50%\"  y1=\"3%\" x2=\"50%\" y2=\"97%\"';\n      svg += ` stroke-width=\"${this.strokeWidth}\" stroke=\"${this.strokeColor}\"`;\n      svg += ' stroke-linecap=\"round\"';\n      if (this.svgStrokeStyle) {\n        svg += ` stroke-dasharray=\"${this.svgStrokeStyle}\"`;\n      }\n\n      svg += '/>';\n    }\n\n    if (this.notation.updiagonalstrike) {\n      svg += '<line x1=\"3%\"  y1=\"97%\" x2=\"97%\" y2=\"3%\"';\n      svg += ` stroke-width=\"${this.strokeWidth}\" stroke=\"${this.strokeColor}\"`;\n      svg += ' stroke-linecap=\"round\"';\n      if (this.svgStrokeStyle) {\n        svg += ` stroke-dasharray=\"${this.svgStrokeStyle}\"`;\n      }\n\n      svg += '/>';\n    }\n\n    if (this.notation.downdiagonalstrike) {\n      svg += '<line x1=\"3%\"  y1=\"3%\" x2=\"97%\" y2=\"97%\"';\n      svg += ` stroke-width=\"${this.strokeWidth}\" stroke=\"${this.strokeColor}\"`;\n      svg += ' stroke-linecap=\"round\"';\n      if (this.svgStrokeStyle) {\n        svg += ` stroke-dasharray=\"${this.svgStrokeStyle}\"`;\n      }\n\n      svg += '/>';\n    }\n\n    // If (this.notation.updiagonalarrow) {\n    //     const t = 1;\n    //     const length = Math.sqrt(w * w + h * h);\n    //     const f = 1 / length / 0.075 * t;\n    //     const wf = w * f;\n    //     const hf = h * f;\n    //     const x = w - t / 2;\n    //     let y = t / 2;\n    //     if (y + hf - .4 * wf < 0 ) y = 0.4 * wf - hf;\n    //     svg += '<line ';\n    //     svg += `x1=\"1\" y1=\"${h - 1}px\" x2=\"${x - .7 * wf}px\" y2=\"${y + .7 * hf}px\"`;\n    //     svg += ` stroke-width=\"${this.strokeWidth}\" stroke=\"${this.strokeColor}\"`;\n    //     svg += ' stroke-linecap=\"round\"';\n    //     if (this.svgStrokeStyle) {\n    //         svg += ` stroke-dasharray=\"${this.svgStrokeStyle}\"`;\n    //     }\n    //     svg += '/>';\n    //     svg += '<polygon points=\"';\n    //     svg += `${x},${y} ${x - wf - .4 * hf},${y + hf - .4 * wf} `;\n    //     svg += `${x - .7 * wf},${y + .7 * hf} ${x - wf + .4 * hf},${y + hf + .4 * wf} `;\n    //     svg += `${x},${y}`;\n    //     svg += `\" stroke='none' fill=\"${this.strokeColor}\"`;\n    //     svg += '/>';\n    // }\n    // if (this.notation.phasorangle) {\n    //     svg += '<path d=\"';\n    //     svg += `M ${h / 2},1 L1,${h} L${w},${h} \"`;\n    //     svg += ` stroke-width=\"${this.strokeWidth}\" stroke=\"${this.strokeColor}\" fill=\"none\"`;\n    //     if (this.svgStrokeStyle) {\n    //         svg += ' stroke-linecap=\"round\"';\n    //         svg += ` stroke-dasharray=\"${this.svgStrokeStyle}\"`;\n    //     }\n    //     svg += '/>';\n    // }\n    // if (this.notation.radical) {\n    //     svg += '<path d=\"';\n    //     svg += `M 0,${.6 * h} L1,${h} L${emToPx(padding) * 2},1 \"`;\n    //     svg += ` stroke-width=\"${this.strokeWidth}\" stroke=\"${this.strokeColor}\" fill=\"none\"`;\n    //     if (this.svgStrokeStyle) {\n    //         svg += ' stroke-linecap=\"round\"';\n    //         svg += ` stroke-dasharray=\"${this.svgStrokeStyle}\"`;\n    //     }\n    //     svg += '/>';\n    // }\n    // if (this.notation.longdiv) {\n    //     svg += '<path d=\"';\n    //     svg += `M ${w} 1 L1 1 a${emToPx(padding)} ${h / 2}, 0, 0, 1, 1 ${h} \"`;\n    //     svg += ` stroke-width=\"${this.strokeWidth}\" stroke=\"${this.strokeColor}\" fill=\"none\"`;\n    //     if (this.svgStrokeStyle) {\n    //         svg += ' stroke-linecap=\"round\"';\n    //         svg += ` stroke-dasharray=\"${this.svgStrokeStyle}\"`;\n    //     }\n    //     svg += '/>';\n    // }\n    if (svg) {\n      let svgStyle;\n      if (this.shadow !== 'none') {\n        svgStyle =\n          this.shadow === 'auto'\n            ? 'filter: drop-shadow(0 0 .5px rgba(255, 255, 255, .7)) drop-shadow(1px 1px 2px #333)'\n            : 'filter: drop-shadow(' + this.shadow + ')';\n      }\n\n      addSVGOverlay(notation, svg, svgStyle);\n    }\n\n    const result = new Span([notation, base]);\n    // Set its position as relative so that the box can be absolute positioned\n    // over the base\n    result.setStyle('position', 'relative');\n    result.setStyle('display', 'inline');\n\n    // The padding adds to the width and height of the pod\n    result.height = base.height + padding;\n    result.depth = base.depth + padding;\n    result.left = padding;\n    result.right = padding;\n\n    if (this.caret) result.caret = this.caret;\n\n    return result;\n  }\n}\n","import { Argument, defineFunction } from './definitions-utils';\nimport { convertDimenToPx } from '../core/font-metrics';\nimport type { Atom } from '../core/atom-class';\nimport { EncloseAtom, EncloseAtomOptions } from '../core-atoms/enclose';\nimport { Style } from '../public/core';\n\n// \\enclose, a MathJax extension mapping to the MathML `menclose` tag.\n// The first argument is a comma delimited list of notations, as defined\n// here: https://developer.mozilla.org/en-US/docs/Web/MathML/Element/menclose\n// The second, optional, specifies the style to use for the notations.\ndefineFunction('enclose', '{notation:string}[style:string]{body:auto}', {\n  createAtom: (command: string, args: Argument[], style: Style): Atom => {\n    const options: EncloseAtomOptions = {\n      strokeColor: 'currentColor',\n      strokeWidth: 1,\n      strokeStyle: 'solid',\n      backgroundcolor: 'transparent',\n      padding: 'auto',\n      shadow: 'auto',\n      svgStrokeStyle: undefined,\n      borderStyle: undefined,\n      style,\n    };\n\n    // Extract info from style string\n    if (args[1]) {\n      // Split the string by comma delimited sub-strings, ignoring commas\n      // that may be inside (). For example\"x, rgb(a, b, c)\" would return\n      // ['x', 'rgb(a, b, c)']\n      const styles = (args[1] as string).split(\n        /,(?![^(]*\\)(?:(?:[^(]*\\)){2})*[^\"]*$)/\n      );\n      for (const s of styles) {\n        const shorthand = s.match(/\\s*(\\S+)\\s+(\\S+)\\s+(.*)/);\n        if (shorthand) {\n          options.strokeWidth = convertDimenToPx(shorthand[1], 'px');\n          if (!Number.isFinite(options.strokeWidth)) {\n            options.strokeWidth = 1;\n          }\n\n          options.strokeStyle = shorthand[2];\n          options.strokeColor = shorthand[3];\n        } else {\n          const attribute = s.match(/\\s*([a-z]*)\\s*=\\s*\"(.*)\"/);\n          if (attribute) {\n            if (attribute[1] === 'mathbackground') {\n              options.backgroundcolor = attribute[2];\n            } else if (attribute[1] === 'mathcolor') {\n              options.strokeColor = attribute[2];\n            } else if (attribute[1] === 'padding') {\n              options.padding = convertDimenToPx(attribute[2], 'px');\n            } else if (attribute[1] === 'shadow') {\n              options.shadow = attribute[2];\n            }\n          }\n        }\n      }\n\n      if (options.strokeStyle === 'dashed') {\n        options.svgStrokeStyle = '5,5';\n      } else if (options.strokeStyle === 'dotted') {\n        options.svgStrokeStyle = '1,5';\n      }\n    }\n\n    options.borderStyle = `${options.strokeWidth}px ${options.strokeStyle} ${options.strokeColor}`;\n\n    // Normalize the list of notations.\n    const notation = {};\n    ((args[0] as string) ?? '')\n      .split(/[, ]/)\n      .filter((v) => v.length > 0)\n      .forEach((x) => {\n        notation[x.toLowerCase()] = true;\n      });\n\n    return new EncloseAtom(command, args[2] as Atom[], notation, options);\n  },\n});\n\ndefineFunction('cancel', '{body:auto}', {\n  createAtom: (name: string, args: Argument[], style: Style): Atom =>\n    new EncloseAtom(\n      name,\n      args[0] as Atom[],\n      { updiagonalstrike: true },\n      {\n        strokeColor: 'currentColor',\n        strokeWidth: 1,\n        strokeStyle: 'solid',\n        borderStyle: '1px solid currentColor',\n        backgroundcolor: 'transparent',\n        padding: 'auto',\n        shadow: 'auto',\n        style,\n      }\n    ),\n});\n\ndefineFunction('bcancel', '{body:auto}', {\n  createAtom: (name: string, args: Argument[], style: Style): Atom =>\n    new EncloseAtom(\n      name,\n      args[0] as Atom[],\n      { downdiagonalstrike: true },\n      {\n        strokeColor: 'currentColor',\n        strokeWidth: 1,\n        strokeStyle: 'solid',\n        borderStyle: '1px solid currentColor',\n        backgroundcolor: 'transparent',\n        padding: 'auto',\n        shadow: 'auto',\n        style,\n      }\n    ),\n});\n\ndefineFunction('xcancel', '{body:auto}', {\n  createAtom: (name: string, args: Argument[], style: Style): Atom =>\n    new EncloseAtom(\n      name,\n      args[0] as Atom[],\n      { updiagonalstrike: true, downdiagonalstrike: true },\n      {\n        strokeColor: 'currentColor',\n        strokeWidth: 1,\n        strokeStyle: 'solid',\n        borderStyle: '1px solid currentColor',\n        backgroundcolor: 'transparent',\n        padding: 'auto',\n        shadow: 'auto',\n        style,\n      }\n    ),\n});\n","import {\n  Atom,\n  Branch,\n  isColRowBranch,\n  isNamedBranch,\n  ToLatexOptions,\n} from '../core/atom-class';\nimport {\n  makeVlist,\n  depth as spanDepth,\n  height as spanHeight,\n  Span,\n} from '../core/span';\nimport { METRICS as FONTMETRICS } from '../core/font-metrics';\nimport { makeLeftRightDelim } from '../core/delimiters';\nimport { MathStyleName, MATHSTYLES } from '../core/mathstyle';\nimport { Context } from '../core/context';\nimport { joinLatex } from '../core/tokenizer';\nimport { PlaceholderAtom } from './placeholder';\n\n/** `Colspec` defines the format of a column */\nexport type Colspec = {\n  // The width of a gap between columns, or a Latex expression between columns\n  gap?: number | Atom[];\n  // 'm' is a special alignement for multline: left on first row, right on last\n  // row, centered otherwise\n  align?: 'l' | 'c' | 'r' | 'm';\n  rule?: boolean;\n};\n\nexport type ArrayAtomConstructorOptions = {\n  // Params: FunctionArgumentDefiniton[];\n  // parser: ParseFunction;\n  mathStyleName?: MathStyleName;\n  colFormat?: Colspec[];\n  leftDelim?: string;\n  rightDelim?: string;\n  jot?: number; // Jot is an extra gap between lines of numbered equation.\n  // It's 3pt by default in LaTeX (ltmath.dtx:181)\n  arraystretch?: number;\n  arraycolsep?: number;\n};\n\ntype ArrayRow = {\n  cells: Span[][];\n  height: number;\n  depth: number;\n  pos: number;\n};\n\n// function arrayToString(array: Atom[][][]): string {\n//   if (array || array.length === 0) return `0 ⨉ 0\\n`;\n//   let result = `${array.length}r ⨉ ${array[0].length ?? 0}c\\n`;\n\n//   for (const row of array) {\n//     result += '    ';\n//     for (const cell of row) {\n//       if (!cell || cell.length === 0) {\n//         result += '😱';\n//       } else if (cell[0].type === 'first') {\n//         if (cell[1]) {\n//           result += cell[1].command;\n//         } else {\n//           result += '∅';\n//         }\n//       } else {\n//         result += '👎' + cell[0].command;\n//       }\n//       result += '  ';\n//     }\n//     result += '\\n';\n//   }\n\n//   return result;\n// }\n\n/**\n * Normalize the array:\n * - ensure it is dense (not sparse)\n * - fold rows that overflow (longer than maximum number of columns)\n * - ensure each cell begins with a `first` atom\n * - remove last row if empty\n */\n\nfunction normalizeArray(\n  atom: ArrayAtom,\n  array: Atom[][][],\n  colFormat: Colspec[]\n): Atom[][][] {\n  //\n  // 1/\n  // - Fold the array so that there are no more columns of content than\n  // there are columns prescribed by the column format.\n  // - Fill rows that have fewer cells than expected with empty cells\n  // - Ensure that all the cells have a `first` atom.\n  //\n\n  // The number of column is determined by the colFormat\n  let maxColCount = 0;\n  for (const colSpec of colFormat) {\n    if (colSpec.align) maxColCount += 1;\n  }\n  // Actual number of columns (at most `maxColCount`)\n  let colCount = 0;\n  const rows: Atom[][][] = [];\n\n  for (const row of array) {\n    let colIndex = 0;\n    colCount = Math.max(colCount, Math.min(row.length, maxColCount));\n    while (colIndex < row.length) {\n      const newRow = [];\n      const lastCol = Math.min(row.length, colIndex + maxColCount);\n      while (colIndex < lastCol) {\n        if (row[colIndex].length > 0 && row[colIndex][0].type !== 'first') {\n          newRow.push([\n            new Atom('first', { mode: atom.mode }),\n            ...row[colIndex],\n          ]);\n        } else {\n          newRow.push(row[colIndex]);\n        }\n        colIndex += 1;\n      }\n\n      rows.push(newRow);\n    }\n  }\n\n  //\n  // 2/ If the last row is empty, ignore it (TeX behavior)\n  //\n  if (\n    rows[rows.length - 1].length === 1 &&\n    rows[rows.length - 1][0].length === 0\n  ) {\n    rows.pop();\n  }\n\n  //\n  // 3/ Fill out any missing cells\n  //\n  const result: Atom[][][] = [];\n  for (const row of rows) {\n    if (row.length !== colCount) {\n      for (let i = row.length; i < colCount; i++) {\n        row.push([\n          new Atom('first', { mode: atom.mode }),\n          new PlaceholderAtom(),\n        ]);\n      }\n    }\n    result.push(row);\n  }\n\n  //\n  // 4/ Set the `parent` and `treeBranch` for each cell\n  //\n  let rowIndex = 0;\n  let colIndex = 0;\n  for (const row of result) {\n    colIndex = 0;\n    for (const cell of row) {\n      for (const element of cell) {\n        element.parent = atom;\n        element.treeBranch = [rowIndex, colIndex];\n      }\n      colIndex += 1;\n    }\n    rowIndex += 1;\n  }\n\n  atom.isDirty = true;\n\n  return result;\n}\n\nexport class ArrayAtom extends Atom {\n  array: Atom[][][];\n  environmentName: string;\n  rowGaps: number[];\n  colFormat: Colspec[];\n  arraystretch?: number;\n  arraycolsep?: number;\n  jot?: number;\n  leftDelim?: string;\n  rightDelim?: string;\n  mathStyleName?: MathStyleName;\n\n  constructor(\n    envName: string,\n    array: Atom[][][],\n    rowGaps: number[],\n    options: ArrayAtomConstructorOptions = {}\n  ) {\n    super('array');\n    this.environmentName = envName;\n    this.rowGaps = rowGaps;\n    if (options.mathStyleName) this.mathStyleName = options.mathStyleName;\n\n    if (options.colFormat) {\n      if (options.colFormat.length === 0) {\n        this.colFormat = [{ align: 'l' }];\n      } else {\n        this.colFormat = options.colFormat;\n      }\n    }\n    // The TeX definition is that arrays by default have a maximum\n    // of 10, left-aligned, columns.\n    if (!this.colFormat) {\n      this.colFormat = [\n        { align: 'l' },\n        { align: 'l' },\n        { align: 'l' },\n        { align: 'l' },\n        { align: 'l' },\n        { align: 'l' },\n        { align: 'l' },\n        { align: 'l' },\n        { align: 'l' },\n        { align: 'l' },\n      ];\n    }\n\n    this.array = normalizeArray(this, array, this.colFormat);\n    // console.log(arrayToString(this.array));\n    if (options.leftDelim) this.leftDelim = options.leftDelim;\n    if (options.rightDelim) this.rightDelim = options.rightDelim;\n    if (options.jot !== undefined) this.jot = options.jot;\n    if (options.arraycolsep) this.arraycolsep = options.arraycolsep;\n  }\n\n  branch(cell: Branch): Atom[] | null {\n    if (!isColRowBranch(cell)) return null;\n    return this.array[cell[0]][cell[1]];\n  }\n\n  get branches(): Branch[] {\n    const result = super.branches;\n    this.array.forEach((_, col) => {\n      this.array[col].forEach((_, row) => {\n        if (this.array[col][row]) {\n          result.push([col, row]);\n        }\n      });\n    });\n    return result;\n  }\n\n  createBranch(cell: Branch): Atom[] {\n    if (!isColRowBranch(cell)) return [];\n    return [];\n  }\n\n  get rowCount(): number {\n    return this.array.length;\n  }\n\n  get colCount(): number {\n    return this.array[0].length;\n  }\n\n  removeBranch(name: Branch): Atom[] {\n    if (isNamedBranch(name)) {\n      return super.removeBranch(name);\n    }\n\n    const children = this.branch(name);\n    this.array[name[0]][name[1]] = null;\n    children.forEach((x) => {\n      x.parent = null;\n      x.treeBranch = undefined;\n    });\n    // Drop the 'first' element\n    console.assert(children[0].type === 'first');\n    children.shift();\n    this.isDirty = true;\n    return children;\n  }\n\n  get hasChildren(): boolean {\n    return this.children.length > 0;\n  }\n\n  get children(): Atom[] {\n    const result = [];\n    this.array.forEach((row) => {\n      row.forEach((col) => {\n        col.forEach((x) => {\n          result.push(...x.children);\n          result.push(x);\n        });\n      });\n    });\n    return [...result, ...super.children];\n  }\n\n  render(context: Context): Span | null {\n    // See http://tug.ctan.org/macros/latex/base/ltfsstrc.dtx\n    // and http://tug.ctan.org/macros/latex/base/lttab.dtx\n    const { colFormat } = this;\n\n    const mathstyle = this.mathStyleName\n      ? MATHSTYLES[this.mathStyleName]\n      : context.mathstyle;\n    // Row spacing\n    // Default \\arraystretch from lttab.dtx\n    const arraystretch = this.arraystretch || 1;\n    const arraycolsep =\n      typeof this.arraycolsep === 'number'\n        ? this.arraycolsep\n        : FONTMETRICS.arraycolsep;\n    const arrayskip = arraystretch * FONTMETRICS.baselineskip;\n    const arstrutHeight = 0.7 * arrayskip;\n    const arstrutDepth = 0.3 * arrayskip; // \\@arstrutbox in lttab.dtx\n    let totalHeight = 0;\n    let nc = 0;\n    const body = [];\n    const nr = this.array.length;\n    for (let r = 0; r < nr; ++r) {\n      const inrow = this.array[r];\n      nc = Math.max(nc, inrow.length);\n      let height = arstrutHeight; // \\@array adds an \\@arstrut\n      let depth = arstrutDepth; // To each row (via the template)\n      const outrow: ArrayRow = { cells: [], height: 0, depth: 0, pos: 0 };\n      const rowContext = context.clone({\n        mathstyle: MATHSTYLES[this.mathStyleName],\n      });\n      for (const element of inrow) {\n        const elt = [\n          new Span(null, { type: 'mord' }),\n          ...(Atom.render(rowContext, element) ?? []),\n        ];\n        depth = Math.max(depth, spanDepth(elt));\n        height = Math.max(height, spanHeight(elt));\n        outrow.cells.push(elt);\n      }\n\n      let jot = r === nr - 1 ? 0 : this.jot ?? 0;\n      if (this.rowGaps?.[r]) {\n        jot = this.rowGaps[r];\n        if (jot > 0) {\n          // \\@argarraycr\n          jot += arstrutDepth;\n          if (depth < jot) {\n            depth = jot; // \\@xargarraycr\n          }\n\n          jot = 0;\n        }\n      }\n\n      outrow.height = height;\n      outrow.depth = depth;\n      totalHeight += height;\n      outrow.pos = totalHeight;\n      totalHeight += depth + jot; // \\@yargarraycr\n      body.push(outrow);\n    }\n\n    const offset = totalHeight / 2 + mathstyle.metrics.axisHeight;\n    const contentCols = [];\n    for (let colIndex = 0; colIndex < nc; colIndex++) {\n      const col: [Span, number][] = [];\n      for (const row of body) {\n        let element = row.cells[colIndex];\n        if (element) {\n          element = new Span(element);\n          element.depth = row.depth;\n          element.height = row.height;\n\n          col.push([element, row.pos - offset]);\n        }\n      }\n\n      if (col.length > 0) {\n        contentCols.push(makeVlist(context, col, 'individualShift'));\n      }\n    }\n\n    // Iterate over each column description.\n    // Each `colDesc` will indicate whether to insert a gap, a rule or\n    // a column from 'contentCols'\n    const cols = [];\n    let previousColContent = false;\n    let previousColRule = false;\n    let currentContentCol = 0;\n    let firstColumn = !this.leftDelim;\n    for (const colDesc of colFormat) {\n      if (colDesc.align && currentContentCol >= contentCols.length) {\n        break;\n      } else if (colDesc.align && currentContentCol < contentCols.length) {\n        // If an alignment is specified, insert a column of content\n        if (previousColContent) {\n          // If no gap was provided, insert a default gap between\n          // consecutive columns of content\n          cols.push(makeColGap(2 * arraycolsep));\n        } else if (previousColRule || firstColumn) {\n          // If the previous column was a rule or this is the first column\n          // add a smaller gap\n          cols.push(makeColGap(arraycolsep));\n        }\n\n        cols.push(\n          new Span(contentCols[currentContentCol], {\n            classes: 'col-align-' + colDesc.align,\n          })\n        );\n        currentContentCol++;\n        previousColContent = true;\n        previousColRule = false;\n        firstColumn = false;\n      } else if (colDesc.gap !== undefined) {\n        // Something to insert in between columns of content\n        if (typeof colDesc.gap === 'number') {\n          // It's a number, indicating how much space, in em,\n          // to leave in between columns\n          cols.push(makeColGap(colDesc.gap));\n        } else {\n          // It's a mathlist\n          // Create a column made up of the mathlist\n          // as many times as there are rows.\n          cols.push(\n            makeColOfRepeatingElements(context, body, offset, colDesc.gap)\n          );\n        }\n\n        previousColContent = false;\n        previousColRule = false;\n        firstColumn = false;\n      } else if (colDesc.rule) {\n        // It's a rule.\n        const separator = new Span(null, { classes: 'vertical-separator' });\n        separator.setStyle('height', totalHeight, 'em');\n        // Result.setTop((1 - context.mathstyle.sizeMultiplier) *\n        //     context.mathstyle.metrics.axisHeight);\n        separator.setStyle(\n          'margin-top',\n          3 * context.mathstyle.metrics.axisHeight - offset,\n          'em'\n        );\n        separator.setStyle('vertical-align', 'top');\n        // Separator.setStyle('display', 'inline-block');\n        let gap = 0;\n        if (previousColRule) {\n          gap = FONTMETRICS.doubleRuleSep - FONTMETRICS.arrayrulewidth;\n        } else if (previousColContent) {\n          gap = arraycolsep - FONTMETRICS.arrayrulewidth;\n        }\n\n        separator.left = gap;\n        cols.push(separator);\n        previousColContent = false;\n        previousColRule = true;\n        firstColumn = false;\n      }\n    }\n\n    if (previousColContent && !this.rightDelim) {\n      // If the last column was content, add a small gap\n      cols.push(makeColGap(arraycolsep));\n    }\n\n    if (\n      (!this.leftDelim || this.leftDelim === '.') &&\n      (!this.rightDelim || this.rightDelim === '.')\n    ) {\n      // There are no delimiters around the array, just return what\n      // we've built so far.\n      return new Span(cols, { classes: 'mtable', type: 'mord' });\n    }\n\n    // There is at least one delimiter. Wrap the core of the array with\n    // appropriate left and right delimiters\n    // const inner = new Span(new Span(cols, 'mtable'), 'mord');\n    const inner = new Span(cols, { classes: 'mtable' });\n    const innerHeight = inner.height;\n    const innerDepth = inner.depth;\n    const result = this.bind(\n      context,\n      new Span(\n        [\n          this.bind(\n            context,\n            makeLeftRightDelim(\n              'mopen',\n              this.leftDelim,\n              innerHeight,\n              innerDepth,\n              context\n            )\n          ),\n          inner,\n          this.bind(\n            context,\n            makeLeftRightDelim(\n              'mclose',\n              this.rightDelim,\n              innerHeight,\n              innerDepth,\n              context\n            )\n          ),\n        ],\n        { type: 'mord' }\n      )\n    );\n    if (this.caret) result.caret = this.caret;\n\n    return this.attachSupsub(context, result, result.type);\n  }\n\n  toLatex(options: ToLatexOptions): string {\n    let result = '\\\\begin{' + this.environmentName + '}';\n    if (this.environmentName === 'array') {\n      result += '{';\n      if (this.colFormat !== undefined) {\n        for (let i = 0; i < this.colFormat.length; i++) {\n          if (this.colFormat[i].align) {\n            result += this.colFormat[i].align;\n          } else if (this.colFormat[i].rule) {\n            result += '|';\n          }\n        }\n      }\n\n      result += '}';\n    }\n\n    for (let row = 0; row < this.array.length; row++) {\n      for (let col = 0; col < this.array[row].length; col++) {\n        if (col > 0) result += ' & ';\n        result = joinLatex([\n          result,\n          Atom.toLatex(this.array[row][col], options),\n        ]);\n      }\n\n      // Adds a separator between rows (but not after the last row)\n      if (row < this.array.length - 1) {\n        result += ' \\\\\\\\ ';\n      }\n    }\n\n    result += '\\\\end{' + this.environmentName + '}';\n\n    return result;\n  }\n\n  getCell(row: number, col: number): Atom[] {\n    return this.array[row][col];\n  }\n\n  setCell(_row: number, _column: number, _value: Atom[]): void {\n    // @todo array\n    console.assert(this.type === 'array' && Array.isArray(this.array));\n    this.isDirty = true;\n  }\n\n  addRowBefore(_row: number): void {\n    console.assert(this.type === 'array' && Array.isArray(this.array));\n    // @todo array\n    this.isDirty = true;\n  }\n\n  addRowAfter(_row: number): void {\n    console.assert(this.type === 'array' && Array.isArray(this.array));\n    // @todo array\n    this.isDirty = true;\n  }\n\n  addColumnBefore(_col: number): void {\n    console.assert(this.type === 'array' && Array.isArray(this.array));\n    this.isDirty = true;\n  }\n\n  addColumnAfter(_col: number): void {\n    console.assert(this.type === 'array' && Array.isArray(this.array));\n    // @todo array\n    this.isDirty = true;\n  }\n\n  get cells(): Atom[][] {\n    const result = [];\n    this.array.forEach((row) => {\n      row.forEach((cell) => {\n        cell.forEach((x) => {\n          result.push(x);\n        });\n      });\n    });\n    return result;\n  }\n}\n/**\n * Create a column separator span.\n *\n */\nfunction makeColGap(width: number): Span {\n  const separator = new Span('\\u200B', { classes: 'arraycolsep' });\n  separator.width = width;\n  return separator;\n}\n\n/**\n * Create a column of repeating elements.\n */\nfunction makeColOfRepeatingElements(\n  context: Context,\n  rows: ArrayRow[],\n  offset: number,\n  element: Atom[]\n): Span {\n  const col = [];\n  for (const row of rows) {\n    const cell = new Span(Atom.render(context, element));\n    cell.depth = row.depth;\n    cell.height = row.height;\n    col.push([cell, row.pos - offset]);\n  }\n\n  return makeVlist(context, col, 'individualShift');\n}\n","import {\n  defineEnvironment,\n  defineTabularEnvironment,\n} from './definitions-utils';\nimport type { Atom } from '../core/atom-class';\nimport { ArrayAtom, Colspec } from '../core-atoms/array';\n\n/*\n\nSee http://texdoc.net/texmf-dist/doc/latex/amsmath/amsldoc.pdf\n\n<columns> ::= <column>*<line>\n<column> ::= <line>('l'|'c'|'r')\n<line> ::= '|' | '||' | ''\n\n'math',\n                frequency 0\n'displaymath',\n                frequency 8\n\n'equation'      centered, numbered\n                frequency 8\n\n'subequations'   with an 'equation' environment, appends a letter to eq no\n                frequency 1\n\n'array',        {columns:text}\n                cells are textstyle math\n                no fence\n\n'eqnarray'      DEPRECATED see http://www.tug.org/pracjourn/2006-4/madsen/madsen.pdf\n                {rcl}\n                first and last cell in each row is displaystyle math\n                each cell has a margin of \\arraycolsep\n                Each line has a eqno\n                frequency 7\n\n\n'theorem'       text mode. Prepends in bold 'Theorem <counter>', then body in italics.\n\n'multline'      single column\n                first row left aligned, last right aligned, others centered\n                last line has an eqn. counter. multline* will omit the counter\n                no output if inside an equation\n                \n\n'gather'        at most two columns\n                first column centered, second column right aligned\n                frequency 1\n\n'gathered'      must be in equation environment\n                single column,\n                centered\n                frequency: COMMON\n                optional argument: [b], [t] to vertical align\n\n'align'        multiple columns,\n                alternating rl\n                there is some 'space' (additional column?) between each pair\n                each line is numbered (except when inside an equation environment)\n                there is an implicit {} at the beginning of left columns\n\n'aligned'      must be in equation environment\n                frequency: COMMON\n                @{}r@{}l@{\\quad}@{}r@{}l@{}\n\n'split'         must be in an equation environment,\n                two columns, additional columns are interpreted as line breaks\n                first column is right aligned, second column is left aligned\n                entire construct is numbered (as opposed to 'align' where each line is numbered)\n                frequency: 0\n\n\n'alignedat'\nFrom AMSMath:\n---The alignedat environment was changed to take two arguments rather\nthan one: a mandatory argument (as formerly) specifying the number of\nalign structures, and a new optional one specifying the placement of the\nenvironment (parallel to the optional argument of aligned). However,\naligned is simpler to use, allowing any number of aligned structures\nautomatically, and therefore the use of alignedat is deprecated.\n\n\n 'alignat'      {pairs:number}\n                {rl} alternating as many times as indicated by <pairs> arg\n                no space between column pairs (unlike align)\n                there is an implicit {} at the beginning of left columns\n                frequency: 0\n\n 'flalign'      multiple columns\n                alternate rl\n                third column further away than align...?\n                frequency: 0\n\n\n'matrix'        at most 10 columns\n                cells centered\n                no fence\n                no colsep at beginning or end\n                (mathtools package add an optional arg for the cell alignment)\n                frequency: COMMON\n\n'pmatrix'       fence: ()\n                frequency: COMMON\n\n'bmatrix'       fence: []\n                frequency: COMMON\n\n'Bmatrix'       fence: {}\n                frequency: 237\n\n'vmatrix'       fence: \\vert\n                frequency: 368\n\n'Vmatrix'       fence: \\Vert\n                frequency: 41\n\n'smallmatrix'   displaystyle: scriptstyle (?)\n                frequency: 279\n\n'cases'\n                frequency: COMMON\n                l@{2}l\n\n'center'        text mode only?\n                frequency: ?\n*/\n// See https://en.wikibooks.org/wiki/LaTeX/Mathematics\n// and http://www.ele.uri.edu/faculty/vetter/Other-stuff/latex/Mathmode.pdf\n\n/*\nThe star at the end of the name of a displayed math environment causes that\nthe formula lines won't be numbered. Otherwise they would automatically get a number.\n\n\\notag will also turn off the numbering.\n\\shoveright and \\shoveleft will force alignment of a line\n\nThe only difference between align and equation is the spacing of the formulas.\nYou should attempt to use equation when possible, and align when you have multi-line formulas.\nEquation will have space before/after < 1em if line before/after is short enough.\n\nAlso: equation throws an error when you have an & inside the environment,\nso look out for that when converting between the two.\n\n\n\nWhereas align produces a structure whose width is the full line width, aligned\ngives a width that is the actual width of the contents, thus it can be used as\na component in a containing expression, e.g. for putting the entire alignment\nin a parenthesis\n*/\ndefineEnvironment(\n  'math',\n  '',\n  (name: string, array: Atom[][][], rowGaps: number[]): Atom =>\n    new ArrayAtom(name, array, rowGaps, { mathStyleName: 'textstyle' })\n);\n\ndefineEnvironment(\n  'displaymath',\n  '',\n  (name: string, array: Atom[][][], rowGaps: number[]): Atom =>\n    new ArrayAtom(name, array, rowGaps, { mathStyleName: 'textstyle' })\n);\n\ndefineTabularEnvironment(\n  'array',\n  '{columns:colspec}',\n  (name: string, array: Atom[][][], rowGaps: number[], args): Atom =>\n    new ArrayAtom(name, array, rowGaps, {\n      colFormat: args[0] as Colspec[],\n      mathStyleName: 'textstyle',\n    })\n);\n\ndefineTabularEnvironment(\n  ['equation', 'equation', 'subequations'],\n  '',\n  (name: string, array: Atom[][][], rowGaps: number[]): Atom =>\n    new ArrayAtom(name, array, rowGaps, {\n      colFormat: [{ align: 'c' }],\n    })\n);\n\n// Note spelling: MULTLINE, not multiline.\ndefineTabularEnvironment(\n  'multline',\n  '',\n  (name: string, array: Atom[][][], rowGaps: number[]): Atom =>\n    new ArrayAtom(name, array, rowGaps, {\n      colFormat: [{ align: 'm' }],\n    })\n);\n\n// An AMS-Math environment\n// See amsmath.dtx:3565\n// Note that some versions of AMS-Math have a gap on the left.\n// More recent version suppresses that gap, but have an option to turn it back on\n// for backward compatibility.\n// Note that technically, 'eqnarray' behaves (slightly) differently. However,\n// is is generally recommended to avoid using eqnarray and use align isntead.\n// https://texblog.net/latex-archive/maths/eqnarray-align-environment/\ndefineTabularEnvironment(\n  ['align', 'align*', 'aligned', 'eqnarray'],\n  '',\n  (name: string, array: Atom[][][], rowGaps: number[]): Atom => {\n    let colCount = 0;\n    for (const row of array) {\n      colCount = Math.max(colCount, row.length);\n    }\n\n    const colFormat: Colspec[] = [\n      { gap: 0 },\n      { align: 'r' },\n      { gap: 0 },\n      { align: 'l' },\n    ];\n    let i = 2;\n    while (i < colCount) {\n      colFormat.push({ gap: 1 });\n      colFormat.push({ align: 'r' });\n      colFormat.push({ gap: 0 });\n      colFormat.push({ align: 'l' });\n      i += 2;\n    }\n\n    colFormat.push({ gap: 0 });\n\n    return new ArrayAtom(name, array, rowGaps, {\n      arraycolsep: 0,\n      colFormat,\n      jot: 0.3,\n    });\n  }\n);\n\n// DefineEnvironment('alignat', '', function(name, args) {\n//     return {\n\n//     };\n// });\n\n// defineEnvironment('flalign', '', function(name, args) {\n//     return {\n\n//     };\n// });\n\ndefineTabularEnvironment(\n  'split',\n  '',\n  (name: string, array: Atom[][][], rowGaps: number[]): Atom =>\n    new ArrayAtom(name, array, rowGaps, {\n      colFormat: [{ align: 'r' }, { align: 'l' }],\n    })\n);\n\ndefineTabularEnvironment(\n  ['gather', 'gathered'],\n  '',\n  (name: string, array: Atom[][][], rowGaps: number[]): Atom =>\n    // An AMS-Math environment\n    // %    The \\env{gathered} environment is for several lines that are\n    // %    centered independently.\n    // From amstex.sty\n    // \\newenvironment{gathered}[1][c]{%\n    //   \\relax\\ifmmode\\else\\nonmatherr@{\\begin{gathered}}\\fi\n    //   \\null\\,%\n    //   \\if #1t\\vtop \\else \\if#1b\\vbox \\else \\vcenter \\fi\\fi\n    //   \\bgroup\\Let@\\restore@math@cr\n    //   \\ifinany@\\else\\openup\\jot\\fi\\ialign\n    //   \\bgroup\\hfil\\strut@$\\m@th\\displaystyle##$\\hfil\\crcr\n    new ArrayAtom(name, array, rowGaps, {\n      colFormat: [{ gap: 0.25 }, { align: 'c' }, { gap: 0 }],\n    })\n);\n\n// DefineEnvironment('cardinality', '',  function() {\n//     const result = {};\n\n//     result.mathstyle = 'textstyle';\n//     result.lFence = '|';\n//     result.rFence = '|';\n\n//     return result;\n// });\n\ndefineTabularEnvironment(\n  [\n    'matrix',\n    'pmatrix',\n    'bmatrix',\n    'Bmatrix',\n    'vmatrix',\n    'Vmatrix',\n    'smallmatrix',\n    'matrix*',\n    'pmatrix*',\n    'bmatrix*',\n    'Bmatrix*',\n    'vmatrix*',\n    'Vmatrix*',\n    'smallmatrix*',\n  ],\n  '[columns:colspec]',\n  (name: string, array: Atom[][][], rowGaps: number[], args): Atom => {\n    // From amstex.sty:\n    // \\def\\matrix{\\hskip -\\arraycolsep\\array{*\\c@MaxMatrixCols c}}\n    // \\def\\endmatrix{\\endarray \\hskip -\\arraycolsep}\n    let leftDelim: string;\n    let rightDelim: string;\n    switch (name) {\n      case 'pmatrix':\n      case 'pmatrix*':\n        leftDelim = '(';\n        rightDelim = ')';\n        break;\n\n      case 'bmatrix':\n      case 'bmatrix*':\n        leftDelim = '[';\n        rightDelim = ']';\n        break;\n\n      case 'Bmatrix':\n      case 'Bmatrix*':\n        leftDelim = '\\\\lbrace';\n        rightDelim = '\\\\rbrace';\n        break;\n\n      case 'vmatrix':\n      case 'vmatrix*':\n        leftDelim = '\\\\vert';\n        rightDelim = '\\\\vert';\n        break;\n\n      case 'Vmatrix':\n      case 'Vmatrix*':\n        leftDelim = '\\\\Vert';\n        rightDelim = '\\\\Vert';\n        break;\n\n      case 'matrix':\n      case 'matrix*':\n        // Specifying a fence, even a null fence,\n        // will prevent the insertion of an initial and final gap\n        leftDelim = '.';\n        rightDelim = '.';\n        break;\n      default:\n    }\n\n    return new ArrayAtom(name, array, rowGaps, {\n      mathStyleName: name.startsWith('smallmatrix')\n        ? 'scriptstyle'\n        : 'textstyle',\n      leftDelim,\n      rightDelim,\n      colFormat: (args[0] as Colspec[]) ?? [\n        { align: 'c' },\n        { align: 'c' },\n        { align: 'c' },\n        { align: 'c' },\n        { align: 'c' },\n        { align: 'c' },\n        { align: 'c' },\n        { align: 'c' },\n        { align: 'c' },\n        { align: 'c' },\n      ],\n    });\n  }\n);\n\n// \\cases is standard LaTeX\n// \\dcases is from the mathtools package\ndefineTabularEnvironment(\n  ['cases', 'dcases'],\n  '',\n  (name: string, array: Atom[][][], rowGaps: number[]): Atom => {\n    // From amstex.sty:\n    // \\def\\cases{\\left\\{\\def\\arraystretch{1.2}\\hskip-\\arraycolsep\n    //   \\array{l@{\\quad}l}}\n    // \\def\\endcases{\\endarray\\hskip-\\arraycolsep\\right.}\n    // From amsmath.dtx\n    // \\def\\env@cases{%\n    //   \\let\\@ifnextchar\\new@ifnextchar\n    //   \\left\\lbrace\n    //   \\def\\arraystretch{1.2}%\n    //   \\array{@{}l@{\\quad}l@{}}%\n    return new ArrayAtom(name, array, rowGaps, {\n      mathStyleName: name === 'dcases' ? 'displaystyle' : 'textstyle',\n      arraystretch: 1.2,\n      leftDelim: '\\\\lbrace',\n      rightDelim: '.',\n      colFormat: [{ align: 'l' }, { gap: 1 }, { align: 'l' }],\n    });\n  }\n);\n\ndefineTabularEnvironment(\n  'rcases',\n  '',\n  (name: string, array: Atom[][][], rowGaps: number[]): Atom => {\n    return new ArrayAtom(name, array, rowGaps, {\n      arraystretch: 1.2,\n      leftDelim: '.',\n      rightDelim: '\\\\rbrace',\n      colFormat: [{ align: 'l' }, { gap: 1 }, { align: 'l' }],\n    });\n  }\n);\n\n// This is a text mode environment\n/*\n\\begin{theorem}\nLet $f$ be a function whose derivative exists in every point, then $f$\nis a continuous function.\n\\end{theorem}\n*/\n// defineEnvironment('theorem', '', function () {\n//     return {};\n// });\n\ndefineEnvironment(\n  'center',\n  '',\n  (name: string, array: Atom[][][], rowGaps: number[]): Atom =>\n    new ArrayAtom(name, array, rowGaps, { colFormat: [{ align: 'c' }] })\n);\n","import { Argument, defineFunction } from './definitions-utils';\nimport type { Atom, ToLatexOptions } from '../core/atom-class';\nimport { OverunderAtom } from '../core-atoms/overunder';\nimport { Style } from '../public/core';\n\n// Extensible (horitontally stretchy) symbols\n\ndefineFunction(\n  [\n    'overrightarrow',\n    'overleftarrow',\n    'Overrightarrow',\n    'overleftharpoon',\n    'overrightharpoon',\n    'overleftrightarrow',\n    'overbrace',\n    'overlinesegment',\n    'overgroup',\n  ],\n  '{:auto}',\n  {\n    createAtom: (command: string, args: Argument[], style: Style): Atom =>\n      new OverunderAtom(command, {\n        body: args[0] as Atom[],\n        subsupPlacement: 'over-under',\n        skipBoundary: false,\n        style,\n        // Set the \"svgAbove\" to the name of a SVG object (which is the same\n        // as the command name)\n        svgAbove: command.slice(1),\n      }),\n  }\n);\n\ndefineFunction(\n  [\n    'underrightarrow',\n    'underleftarrow',\n    'underleftrightarrow',\n    'underbrace',\n    'underlinesegment',\n    'undergroup',\n  ],\n  '{:auto}',\n  {\n    createAtom: (command: string, args: Argument[], style: Style): Atom =>\n      new OverunderAtom(command, {\n        body: args[0] as Atom[],\n        subsupPlacement: 'over-under',\n        skipBoundary: false,\n        style,\n        // Set the \"svgBelow\" to the name of a SVG object (which is the same\n        // as the command name)\n        svgBelow: command.slice(1),\n      }),\n  }\n);\ndefineFunction(\n  [\n    'xrightarrow',\n    'xleftarrow',\n    'xRightarrow',\n    'xLeftarrow',\n    'xleftharpoonup',\n    'xleftharpoondown',\n    'xrightharpoonup',\n    'xrightharpoondown',\n    'xlongequal',\n    'xtwoheadleftarrow',\n    'xtwoheadrightarrow',\n    'xleftrightarrow',\n    'xLeftrightarrow',\n    'xrightleftharpoons',\n    'xleftrightharpoons',\n    'xhookleftarrow',\n    'xhookrightarrow',\n    'xmapsto',\n    'xtofrom',\n    'xrightleftarrows', // From mhchem.sty package\n    'xrightequilibrium', // From mhchem.sty package\n    'xleftequilibrium', // From mhchem.sty package\n  ],\n  '[:auto]{:auto}',\n  {\n    createAtom: (command: string, args: Argument[], style: Style): Atom =>\n      new OverunderAtom(command, {\n        style,\n        // Set the \"svgBody\" to the name of a SVG object (which is the same\n        // as the command name)\n        svgBody: command.slice(1),\n        // The overscript is optional, i.e. `\\xtofrom` is valid\n        above: (args[1] as Atom[])?.length === 0 ? null : (args[1] as Atom[]),\n        below: args[0] as Atom[],\n        skipBoundary: false,\n        toLatexOverride: (atom: OverunderAtom, options: ToLatexOptions) =>\n          command +\n          (!atom.hasEmptyBranch('below')\n            ? `[${atom.belowToLatex(options)}]`\n            : '') +\n          `{${atom.aboveToLatex(options)}}`,\n      }),\n  }\n);\n","import { Atom, AtomType, ToLatexOptions } from '../core/atom-class';\nimport { MATHSTYLES } from '../core/mathstyle';\nimport { makeSymbol, Span } from '../core/span';\nimport { Context } from '../core/context';\nimport { Style, Variant, VariantStyle } from '../public/core';\nimport { joinLatex } from '../core/tokenizer';\n\n/**\n * Operators are handled in the TeXbook pg. 443-444, rule 13(a).\n */\nexport class OperatorAtom extends Atom {\n  private readonly variant: Variant;\n  private readonly variantStyle: VariantStyle;\n\n  constructor(\n    command: string,\n    symbol: string | Atom[],\n    options: {\n      type?: AtomType;\n      isExtensibleSymbol?: boolean;\n      isFunction?: boolean;\n      captureSelection?: boolean;\n      // Unlike `style`, `variant` and `variantStyle` are applied to the\n      // content of this atom, but not propagated to the next atom\n      variant?: Variant;\n      variantStyle?: VariantStyle;\n      limits?: 'auto' | 'over-under' | 'adjacent';\n      style?: Style;\n    }\n  ) {\n    super(options.type ?? 'mop', {\n      command,\n      style: options.style,\n      isFunction: options?.isFunction,\n    });\n    if (typeof symbol === 'string') {\n      this.value = symbol;\n    } else {\n      this.body = symbol;\n    }\n\n    this.captureSelection = options.captureSelection;\n    this.variant = options?.variant;\n    this.variantStyle = options?.variantStyle;\n    this.subsupPlacement = options?.limits;\n    this.isExtensibleSymbol = options?.isExtensibleSymbol ?? false;\n  }\n\n  render(context: Context): Span {\n    const { mathstyle } = context;\n    let base: Span;\n    let baseShift = 0;\n    let slant = 0;\n    if (this.isExtensibleSymbol) {\n      // Most symbol operators get larger in displaystyle (rule 13)\n      // except `\\smallint`\n      const large =\n        mathstyle.size === MATHSTYLES.displaystyle.size &&\n        this.value !== '\\\\smallint';\n\n      base = makeSymbol(\n        large ? 'Size2-Regular' : 'Size1-Regular',\n        this.value.codePointAt(0),\n        {\n          classes: 'op-symbol ' + (large ? 'large-op' : 'small-op'),\n          type: 'mop',\n        }\n      );\n\n      // Shift the symbol so its center lies on the axis (rule 13). It\n      // appears that our fonts have the centers of the symbols already\n      // almost on the axis, so these numbers are very small. Note we\n      // don't actually apply this here, but instead it is used either in\n      // the vlist creation or separately when there are no limits.\n      baseShift =\n        (base.height - base.depth) / 2 -\n        mathstyle.metrics.axisHeight * mathstyle.sizeMultiplier;\n\n      // The slant of the symbol is just its italic correction.\n      slant = base.italic;\n      base.setStyle('color', this.style.color);\n      base.setStyle('backgroundColor', this.style.backgroundColor);\n    } else if (this.body) {\n      // If this is a list, decompose that list.\n      base = new Span(Atom.render(context, this.body), { type: 'mop' });\n      base.setStyle('color', this.style.color);\n      base.setStyle('backgroundColor', this.style.backgroundColor);\n    } else {\n      // Otherwise, this is a text operator. Build the text from the\n      // operator's name.\n      console.assert(this.type === 'mop');\n      // Not all styles are applied, since the operators have a distinct\n      // appearance (for example, can't override their font family)\n      base = this.makeSpan(context, this.value, {\n        style: {\n          color: this.style.color,\n          backgroundColor: this.style.backgroundColor,\n          letterShapeStyle: context.letterShapeStyle,\n          variant: this.variant,\n          variantStyle: this.variantStyle,\n        },\n      });\n    }\n\n    if (this.isExtensibleSymbol) base.setTop(baseShift);\n    let result = base;\n    if (this.superscript || this.subscript) {\n      const limits = this.subsupPlacement ?? 'auto';\n      result =\n        limits === 'over-under' ||\n        (limits === 'auto' && mathstyle.size === MATHSTYLES.displaystyle.size)\n          ? this.attachLimits(context, base, baseShift, slant)\n          : this.attachSupsub(context, base, 'mop');\n    }\n\n    if (this.caret) result.caret = this.caret;\n\n    // Bind the generated span with its limits so they\n    // can all be selected as one\n    return this.bind(context, result);\n  }\n\n  toLatex(options: ToLatexOptions): string {\n    let result = '';\n    if (this.value !== '\\u200B') {\n      // Not ZERO-WIDTH\n      result +=\n        this.command === '\\\\mathop' || this.command === '\\\\operatorname'\n          ? this.command + `{${this.bodyToLatex(options)}}`\n          : this.command;\n    }\n\n    result = joinLatex([result, this.supsubToLatex(options)]);\n    if (this.explicitSubsupPlacement) {\n      if (this.subsupPlacement === 'over-under') result += '\\\\limits';\n      if (this.subsupPlacement === 'adjacent') result += '\\\\nolimits';\n    }\n\n    return result;\n  }\n}\n","import { Atom, ToLatexOptions } from '../core/atom-class';\nimport { MATHSTYLES } from '../core/mathstyle';\nimport {\n  METRICS as FONTMETRICS,\n  SIZING_MULTIPLIER,\n} from '../core/font-metrics';\nimport { makeVlist, Span } from '../core/span';\nimport { Context } from '../core/context';\n\nimport { makeCustomSizedDelim } from '../core/delimiters';\nimport { ParseMode, Style } from '../public/core';\n\nexport class SurdAtom extends Atom {\n  constructor(\n    command: string,\n    options: { mode?: ParseMode; body: Atom[]; index: Atom[]; style: Style }\n  ) {\n    super('surd', {\n      command,\n      mode: options.mode ?? 'math',\n      style: options.style,\n    });\n    this.body = options.body;\n    this.above = options.index;\n  }\n\n  toLatex(options: ToLatexOptions): string {\n    let args = '';\n    if (this.above) {\n      args += `[${this.aboveToLatex(options)}]`;\n    }\n\n    args += `{${this.bodyToLatex(options)}}`;\n    return this.command + args;\n  }\n\n  render(context: Context): Span {\n    // See the TeXbook pg. 443, Rule 11.\n    // http://www.ctex.org/documents/shredder/src/texbook.pdf\n    const { mathstyle } = context;\n    // First, we do the same steps as in overline to build the inner group\n    // and line\n    const inner =\n      new Span(Atom.render(context.cramp(), this.body)) ?? new Span('');\n    const ruleWidth =\n      FONTMETRICS.defaultRuleThickness / mathstyle.sizeMultiplier;\n    let phi = ruleWidth;\n    if (mathstyle.id < MATHSTYLES.textstyle.id) {\n      phi = mathstyle.metrics.xHeight;\n    }\n\n    const factor = SIZING_MULTIPLIER[this.style.fontSize] ?? 1;\n\n    // Calculate the clearance between the body and line\n    let lineClearance = factor * (ruleWidth + phi / 4);\n    const innerTotalHeight = Math.max(\n      factor * 2 * phi,\n      inner.height + inner.depth\n    );\n    const minDelimiterHeight = innerTotalHeight + (lineClearance + ruleWidth);\n\n    const delimContext = context.withFontsize(this.style?.fontSize ?? 'size5');\n    // Create a \\surd delimiter of the required minimum size\n    const delim = this.bind(\n      context,\n      new Span(\n        makeCustomSizedDelim(\n          null,\n          '\\\\surd',\n          minDelimiterHeight,\n          false,\n          delimContext\n        ),\n        { classes: 'sqrt-sign', mode: this.mode, style: this.style }\n      )\n    );\n\n    const delimDepth = delim.height + delim.depth - ruleWidth;\n\n    // Adjust the clearance based on the delimiter size\n    if (delimDepth > inner.height + inner.depth + lineClearance) {\n      lineClearance =\n        (lineClearance + delimDepth - (inner.height + inner.depth)) / 2;\n    }\n\n    // Shift the delimiter so that its top lines up with the top of the line\n    delim.setTop(delim.height - inner.height - (lineClearance + ruleWidth));\n    const line = new Span(null, {\n      classes: context.mathstyle.adjustTo(MATHSTYLES.textstyle) + ' sqrt-line',\n      mode: this.mode,\n      style: this.style,\n    });\n    line.height = ruleWidth;\n\n    const body = makeVlist(context, [\n      new Span(inner),\n      lineClearance,\n      line,\n      ruleWidth,\n    ]);\n\n    let className = 'sqrt';\n    if (this.containsCaret) className += ' ML__contains-caret';\n\n    if (!this.above) {\n      const result = new Span([delim, body], {\n        classes: className,\n        type: 'mord',\n      });\n      if (this.caret) result.caret = this.caret;\n      return this.bind(context, result);\n    }\n\n    // Handle the optional root index\n    // The index is always in scriptscript style\n    const newcontext = context.clone({\n      mathstyle: MATHSTYLES.scriptscriptstyle,\n    });\n    const root = new Span(Atom.render(newcontext, this.above));\n    // Figure out the height and depth of the inner part\n    const innerRootHeight = Math.max(delim.height, body.height);\n    const innerRootDepth = Math.max(delim.depth, body.depth);\n    // The amount the index is shifted by. This is taken from the TeX\n    // source, in the definition of `\\r@@t`.\n    const toShift = 0.6 * (innerRootHeight - innerRootDepth);\n    // Build a VList with the superscript shifted up correctly\n    const rootVlist = makeVlist(context, [root], 'shift', {\n      initialPos: -toShift,\n    });\n\n    // Add a class surrounding it so we can add on the appropriate\n    // kerning\n\n    const result = new Span(\n      [new Span(rootVlist, { classes: 'root' }), delim, body],\n      {\n        classes: className,\n        type: 'mord',\n      }\n    );\n    result.height = delim.height;\n    result.depth = delim.depth;\n    if (this.caret) result.caret = this.caret;\n    return this.bind(context, result);\n  }\n}\n","import { Atom, ToLatexOptions } from '../core/atom-class';\nimport { MATHSTYLES, MathStyleName } from '../core/mathstyle';\nimport { Span, makeHlist, makeVlist } from '../core/span';\nimport { makeCustomSizedDelim, makeNullFence } from '../core/delimiters';\nimport { Context } from '../core/context';\nimport { Style } from '../public/core';\nimport {\n  METRICS as FONTMETRICS,\n  SIZING_MULTIPLIER,\n} from '../core/font-metrics';\n\nexport type GenfracOptions = {\n  continuousFraction?: boolean;\n  numerPrefix?: string;\n  denomPrefix?: string;\n  leftDelim?: string;\n  rightDelim?: string;\n  hasBarLine?: boolean;\n  mathStyleName?: MathStyleName | 'auto';\n  style?: Style;\n  toLatexOverride?: (atom: GenfracAtom, options: ToLatexOptions) => string;\n};\n\n/**\n * Gengrac -- Generalized fraction\n *\n * Decompose fractions, binomials, and in general anything made\n * of two expressions on top of each other, optionally separated by a bar,\n * and optionally surrounded by fences (parentheses, brackets, etc...)\n *\n * Depending on the type of fraction the mathstyle is either\n * display math or inline math (which is indicated by 'textstyle'). This value can\n * also be set to 'auto', which indicates it should use the current mathstyle\n */\nexport class GenfracAtom extends Atom {\n  leftDelim?: string;\n  rightDelim?: string;\n  hasBarLine: boolean;\n  private readonly continuousFraction: boolean;\n  private readonly numerPrefix?: string;\n  private readonly denomPrefix?: string;\n  private readonly mathStyleName: MathStyleName | 'auto';\n  constructor(\n    command: string,\n    above: Atom[],\n    below: Atom[],\n    options?: GenfracOptions\n  ) {\n    super('genfrac', {\n      style: options.style,\n      command,\n      toLatexOverride: options.toLatexOverride,\n    });\n    this.above = above;\n    this.below = below;\n    this.hasBarLine = options?.hasBarLine ?? true;\n    this.continuousFraction = options?.continuousFraction ?? false;\n    this.numerPrefix = options?.numerPrefix;\n    this.denomPrefix = options?.denomPrefix;\n    this.mathStyleName = options?.mathStyleName ?? 'auto';\n    this.leftDelim = options?.leftDelim;\n    this.rightDelim = options?.rightDelim;\n  }\n\n  toLatex(options: ToLatexOptions): string {\n    return (\n      this.command +\n      `{${this.aboveToLatex(options)}}` +\n      `{${this.belowToLatex(options)}}`\n    );\n  }\n\n  render(context: Context): Span {\n    const outerstyle =\n      this.mathStyleName === 'auto'\n        ? context.mathstyle\n        : MATHSTYLES[this.mathStyleName];\n    const newContext = context.clone({ mathstyle: outerstyle });\n    const style = this.computedStyle;\n\n    const numeratorStyle = this.continuousFraction\n      ? outerstyle\n      : outerstyle.fracNum();\n    let numer = [];\n    if (this.numerPrefix) {\n      numer.push(new Span(this.numerPrefix, { type: 'mord' }));\n    }\n    numer = numer.concat(\n      Atom.render(newContext.clone({ mathstyle: numeratorStyle }), this.above)\n    );\n    const numerSpans = makeHlist(numer);\n\n    const denominatorStyle = this.continuousFraction\n      ? outerstyle\n      : outerstyle.fracDen();\n    let denom = [];\n    if (this.denomPrefix) {\n      denom.push(new Span(this.denomPrefix, { type: 'mord' }));\n    }\n    denom = denom.concat(\n      Atom.render(newContext.clone({ mathstyle: denominatorStyle }), this.below)\n    );\n    const denomSpans = makeHlist(denom);\n    const ruleWidth = !this.hasBarLine\n      ? 0\n      : FONTMETRICS.defaultRuleThickness / outerstyle.sizeMultiplier;\n    // Rule 15b from TeXBook Appendix G, p.444\n    //\n    // 15b. If C > T, set u ← σ8 and v ← σ11. Otherwise set u ← σ9 or σ10,according\n    // as θ ̸= 0 or θ = 0, and set v ← σ12. (The fraction will be typeset with\n    // its numerator shifted up by an amount u with respect to the current\n    // baseline, and with the denominator shifted down by v, unless the boxes\n    // are unusually large.)\n    let numerShift: number;\n    let clearance = 0;\n    let denomShift: number;\n    if (outerstyle.size === MATHSTYLES.displaystyle.size) {\n      numerShift = outerstyle.metrics.num1; // Set u ← σ8\n      clearance =\n        ruleWidth > 0 ? 3 * ruleWidth : 7 * FONTMETRICS.defaultRuleThickness;\n      denomShift = outerstyle.metrics.denom1; // V ← σ11\n    } else {\n      if (ruleWidth > 0) {\n        numerShift = outerstyle.metrics.num2; // U ← σ9\n        clearance = ruleWidth; //  Φ ← θ\n      } else {\n        numerShift = outerstyle.metrics.num3; // U ← σ10\n        clearance = 3 * FONTMETRICS.defaultRuleThickness; // Φ ← 3 ξ8\n      }\n\n      denomShift = outerstyle.metrics.denom2; // V ← σ12\n    }\n\n    const numerDepth = numerSpans.depth;\n    const denomHeight = denomSpans.height;\n    let frac: Span;\n    if (ruleWidth === 0) {\n      // Rule 15c from Appendix G\n      // No bar line between numerator and denominator\n      const candidateClearance =\n        numerShift - numerDepth - (denomHeight - denomShift);\n      if (candidateClearance < clearance) {\n        numerShift += (clearance - candidateClearance) / 2;\n        denomShift += (clearance - candidateClearance) / 2;\n      }\n\n      frac = makeVlist(\n        newContext,\n        [\n          [numerSpans, -numerShift],\n          [denomSpans, denomShift],\n        ],\n        'individualShift',\n        { classes: 'mfrac' }\n      );\n    } else {\n      // Rule 15d from Appendix G\n      // There is a bar line between the numerator and the denominator\n      let { axisHeight } = outerstyle.metrics;\n      axisHeight *= SIZING_MULTIPLIER[this.style?.fontSize ?? 'size5'];\n      const numerLine = axisHeight + ruleWidth / 2;\n      const denomLine = axisHeight - ruleWidth / 2;\n      if (numerShift < clearance + numerDepth + numerLine) {\n        numerShift = clearance + numerDepth + numerLine;\n      }\n\n      if (denomShift < clearance + denomHeight - denomLine) {\n        denomShift = clearance + denomHeight - denomLine;\n      }\n\n      const fracLine = new Span(null, {\n        classes: 'frac-line',\n        mode: this.mode,\n        style,\n      });\n      // Manually set the height of the frac line because its height is\n      // created in CSS\n      fracLine.height = ruleWidth / 2;\n      fracLine.depth = ruleWidth / 2;\n      frac = makeVlist(\n        newContext,\n        [\n          [denomSpans, denomShift],\n          [fracLine, -denomLine],\n          [numerSpans, -numerShift],\n        ],\n        'individualShift',\n        { classes: 'mfrac' }\n      );\n    }\n\n    // Since we manually change the style sometimes (with \\dfrac or \\tfrac),\n    // account for the possible size change here.\n    frac.height *= outerstyle.sizeMultiplier / context.mathstyle.sizeMultiplier;\n    frac.depth *= outerstyle.sizeMultiplier / context.mathstyle.sizeMultiplier;\n\n    // Rule 15e of Appendix G\n    const delimSize =\n      outerstyle.size === MATHSTYLES.displaystyle.size\n        ? outerstyle.metrics.delim1\n        : outerstyle.metrics.delim2;\n    const delimContext = context.clone({\n      mathstyle: outerstyle,\n      size: this.style?.fontSize ?? 'size5',\n    });\n    const delimSizingClass =\n      context.parentSize !== delimContext.size\n        ? 'sizing reset-' + context.parentSize + ' ' + delimContext.size\n        : '';\n\n    // Optional delimiters\n    const leftDelim = this.leftDelim\n      ? this.bind(\n          context,\n          makeCustomSizedDelim(\n            'mopen',\n            this.leftDelim,\n            delimSize,\n            true,\n            delimContext,\n            { style, mode: this.mode, classes: delimSizingClass }\n          )\n        )\n      : makeNullFence(context, 'mopen');\n\n    let rightDelim: Span;\n    if (this.continuousFraction) {\n      rightDelim = new Span(null);\n    } else if (!this.rightDelim) {\n      rightDelim = makeNullFence(context, 'mclose');\n    } else {\n      rightDelim = this.bind(\n        context,\n        makeCustomSizedDelim(\n          'mclose',\n          this.rightDelim,\n          delimSize,\n          true,\n          context.clone({ mathstyle: outerstyle }),\n          { style, mode: this.mode, classes: delimSizingClass }\n        )\n      );\n    }\n\n    const result = this.bind(\n      context,\n      // MakeStruts(\n      new Span(\n        [leftDelim, frac, rightDelim],\n        {\n          classes:\n            context.parentSize !== context.size\n              ? 'sizing reset-' + context.parentSize + ' ' + context.size\n              : '',\n          type: 'mord',\n        }\n        // )\n      )\n    );\n\n    if (this.caret) result.caret = this.caret;\n\n    return this.attachSupsub(context, result, result.type);\n  }\n}\n","import { Atom, ToLatexOptions } from '../core/atom-class';\nimport { Span, SpanType } from '../core/span';\nimport { Context } from '../core/context';\nimport { makeSizedDelim } from '../core/delimiters';\nimport { Style } from '../public/core';\n\nexport class DelimAtom extends Atom {\n  size: 1 | 2 | 3 | 4;\n  constructor(\n    command: string,\n    delim: string,\n    options?: {\n      size?: 1 | 2 | 3 | 4;\n      style: Style;\n    }\n  ) {\n    super('delim', { command, style: options?.style });\n    this.value = delim;\n    this.size = options?.size;\n  }\n\n  render(_context: Context): Span {\n    const span = new Span(null);\n    span.delim = this.value;\n    return span;\n  }\n\n  toLatex(_options: ToLatexOptions): string {\n    if (this.value.length === 1) {\n      return this.command + this.value;\n    }\n\n    return this.command + '{' + this.value + '}';\n  }\n}\n\nexport class SizedDelimAtom extends Atom {\n  protected delimClass?: SpanType;\n  private readonly size: 1 | 2 | 3 | 4;\n  constructor(\n    command: string,\n    delim: string,\n    options: {\n      delimClass: SpanType;\n      size: 1 | 2 | 3 | 4;\n      style: Style;\n    }\n  ) {\n    super('sizeddelim', { command, style: options.style });\n    this.value = delim;\n    this.delimClass = options.delimClass;\n    this.size = options.size;\n  }\n\n  render(context: Context): Span {\n    const result = this.bind(\n      context,\n      makeSizedDelim(this.value, this.size, context, {\n        classes: this.delimClass,\n      })\n    );\n    if (this.caret) result.caret = this.caret;\n    return result;\n  }\n\n  toLatex(_options: ToLatexOptions): string {\n    if (this.value.length === 1) {\n      return this.command + this.value;\n    }\n\n    return this.command + '{' + this.value + '}';\n  }\n}\n","import { Argument, defineFunction } from './definitions-utils';\nimport type { Atom, ToLatexOptions } from '../core/atom-class';\nimport { OperatorAtom } from '../core-atoms/operator';\nimport { SurdAtom } from '../core-atoms/surd';\nimport { GenfracAtom, GenfracOptions } from '../core-atoms/genfrac';\nimport { DelimAtom } from '../core-atoms/delim';\nimport { Style } from '../public/core';\n\ndefineFunction(\n  [\n    'arccos',\n    'arcsin',\n    'arctan',\n    'arctg', // Not Latex standard. Used in France\n    'arcctg', // Not Latex standard. Used in France\n    'arg',\n    'ch', // Not Latex standard. \\cosh\n    'cos',\n    'cosh',\n    'cot',\n    'coth',\n    'ctg', // Not Latex standard. Used in France\n    'cth',\n    'cotg', // Not Latex standard. Used in France\n    'csc', // Not Latex standard. \\cth\n    'cosec', // Not Latex standard.\n    'deg',\n    'dim',\n    'exp',\n    'hom',\n    'inf',\n    'ker',\n    'lg',\n    'lb', // Not Latex standard. US Dept of Commerce recommendation for log2\n    'lg', // Not Latex standard. In German and Russian literature,  log10.\n    // Sometimes used as the log2\n    'ln',\n    'log',\n    'Pr',\n    'sec',\n    'sh', // Not Latex standard. \\sinh\n    'sin',\n    'sinh',\n    'sup',\n    'tan',\n    'tanh',\n    'tg', // Not Latex standard. Used in France\n    'th', // Not Latex standard. \\tanh\n  ],\n  '',\n  {\n    isFunction: true,\n    createAtom: (command: string, _args: Argument[], style: Style): Atom =>\n      new OperatorAtom(command, command.slice(1), {\n        limits: 'adjacent',\n        isFunction: true,\n        variant: 'main',\n        variantStyle: 'up',\n        style,\n      }),\n  }\n);\n\ndefineFunction(['liminf', 'limsup'], '', {\n  createAtom: (command: string, _args: Argument[], style: Style): Atom =>\n    new OperatorAtom(\n      command,\n      { '\\\\liminf': 'lim inf', '\\\\limsup': 'lim sup' }[command],\n      {\n        limits: 'over-under',\n        variant: 'main',\n        style,\n      }\n    ),\n});\n\ndefineFunction(['lim', 'mod'], '', {\n  createAtom: (command: string, _args: Argument[], style: Style): Atom =>\n    new OperatorAtom(command, command.slice(1), {\n      limits: 'over-under',\n      variant: 'main',\n      style,\n    }),\n});\n\n// With Limits\ndefineFunction(['det', 'max', 'min'], '', {\n  isFunction: true,\n  createAtom: (command: string, _args: Argument[], style: Style): Atom =>\n    new OperatorAtom(command, command.slice(1), {\n      limits: 'over-under',\n      isFunction: true,\n      variant: 'main',\n      style,\n    }),\n});\n\n// Root\ndefineFunction('sqrt', '[index:auto]{radicand:auto}', {\n  createAtom: (command: string, args: Argument[], style: Style): Atom =>\n    new SurdAtom(command, {\n      body: args[1] as Atom[],\n      index: args[0] as Atom[],\n      style,\n    }),\n});\n\n// Fractions\ndefineFunction(\n  ['frac', 'dfrac', 'tfrac', 'cfrac', 'binom', 'dbinom', 'tbinom'],\n  '{numerator}{denominator}',\n  {\n    createAtom: (command: string, args: Argument[], style: Style): Atom => {\n      const options: GenfracOptions = {\n        mathStyleName: 'auto',\n        style,\n      };\n      switch (command) {\n        case '\\\\dfrac':\n        case '\\\\frac':\n        case '\\\\tfrac':\n          options.hasBarLine = true;\n          break;\n        case '\\\\atopfrac':\n          options.hasBarLine = false;\n          break;\n        case '\\\\dbinom':\n        case '\\\\binom':\n        case '\\\\tbinom':\n          options.hasBarLine = false;\n          options.leftDelim = '(';\n          options.rightDelim = ')';\n          break;\n        default:\n      }\n\n      switch (command) {\n        case '\\\\dfrac':\n        case '\\\\dbinom':\n          options.mathStyleName = 'displaystyle';\n          break;\n        case '\\\\tfrac':\n        case '\\\\tbinom':\n          options.mathStyleName = 'textstyle';\n          break;\n        case '\\\\cfrac':\n          options.hasBarLine = true;\n          options.continuousFraction = true;\n          break;\n        default:\n      }\n\n      return new GenfracAtom(\n        command,\n        args[0] as Atom[],\n        args[1] as Atom[],\n        options\n      );\n    },\n  }\n);\n\ndefineFunction(['over', 'atop', 'choose'], '', {\n  infix: true,\n  createAtom: (command: string, args: Argument[], style: Style): Atom => {\n    let leftDelim: string;\n    let rightDelim: string;\n\n    if (command === '\\\\choose') {\n      leftDelim = '(';\n      rightDelim = ')';\n    }\n\n    return new GenfracAtom(command, args[0] as Atom[], args[1] as Atom[], {\n      hasBarLine: command === '\\\\over',\n      leftDelim,\n      rightDelim,\n      style,\n      toLatexOverride: (atom: GenfracAtom, options: ToLatexOptions) =>\n        `{${atom.aboveToLatex(options)}${atom.command} ${atom.belowToLatex(\n          options\n        )}}`,\n    });\n  },\n});\n\n// Slashed package\n/*\ndefineFunction('\\\\slashed'\n*/\n\ndefineFunction('pdiff', '{numerator}{denominator}', {\n  createAtom: (command: string, args: Argument[], style: Style): Atom =>\n    new GenfracAtom(command, args[0] as Atom[], args[1] as Atom[], {\n      hasBarLine: true,\n      numerPrefix: '\\u2202',\n      denomPrefix: '\\u2202',\n      style,\n    }),\n});\n\n// Limits, symbols\ndefineFunction(\n  [\n    'sum',\n    'prod',\n    'bigcup',\n    'bigcap',\n    'coprod',\n    'bigvee',\n    'bigwedge',\n    'biguplus',\n    'bigotimes',\n    'bigoplus',\n    'bigodot',\n    'bigsqcup',\n    'smallint',\n    'intop',\n  ],\n  '',\n  {\n    createAtom: (command: string, args: Argument[], style: Style): Atom =>\n      new OperatorAtom(\n        command,\n        {\n          coprod: '\\u2210',\n          bigvee: '\\u22C1',\n          bigwedge: '\\u22C0',\n          biguplus: '\\u2A04',\n          bigcap: '\\u22C2',\n          bigcup: '\\u22C3',\n          intop: '\\u222B',\n          prod: '\\u220F',\n          sum: '\\u2211',\n          bigotimes: '\\u2A02',\n          bigoplus: '\\u2A01',\n          bigodot: '\\u2A00',\n          bigsqcup: '\\u2A06',\n          smallint: '\\u222B',\n        }[command.slice(1)],\n        {\n          isExtensibleSymbol: true,\n          limits: 'auto',\n          variant: 'main',\n          style,\n        }\n      ),\n  }\n);\n\n// No limits, symbols (i.e. display larger in 'display' mode, and\n// centered on the baseline)\nconst EXTENSIBLE_SYMBOLS = {\n  int: '\\u222B',\n  iint: '\\u222C',\n  iiint: '\\u222D',\n  oint: '\\u222E',\n  oiint: '\\u222F',\n  oiiint: '\\u2230',\n  intclockwise: '\\u2231',\n  varointclockwise: '\\u2232',\n  ointctrclockwise: '\\u2233',\n  intctrclockwise: '\\u2A11',\n  sqcup: '\\u2294',\n  sqcap: '\\u2293',\n  uplus: '\\u228E',\n  wr: '\\u2240',\n  amalg: '\\u2A3F',\n  Cap: '\\u22D2',\n  Cup: '\\u22D3',\n  doublecap: '\\u22D2',\n  doublecup: '\\u22D3',\n};\ndefineFunction(Object.keys(EXTENSIBLE_SYMBOLS), '', {\n  createAtom: (command: string, _args: Argument[], style: Style): Atom =>\n    new OperatorAtom(command, EXTENSIBLE_SYMBOLS[command.slice(1)], {\n      limits: 'adjacent',\n      isExtensibleSymbol: true,\n      style,\n      variant: { '\\u22D2': 'ams', '\\u22D3': 'ams' }[\n        EXTENSIBLE_SYMBOLS[command.slice(1)]\n      ],\n    }),\n});\n\ndefineFunction(['Re', 'Im'], '', {\n  createAtom: (command: string, _args: Argument[], style: Style): Atom =>\n    new OperatorAtom(command, { '\\\\Re': '\\u211C', '\\\\Im': '\\u2111' }[command], {\n      limits: 'adjacent',\n      style,\n      isFunction: true,\n      variant: 'fraktur',\n    }),\n});\n\ndefineFunction('middle', '{:delim}', {\n  createAtom: (command: string, args: Argument[], style: Style): Atom =>\n    new DelimAtom(command, args[0] as string, { style }),\n});\n\n// TODO\n// Some missing greek letters, but see https://reference.wolfram.com/language/tutorial/LettersAndLetterLikeForms.html\n// koppa, stigma, Sampi\n// See https://tex.stackexchange.com/questions/231878/accessing-archaic-greek-koppa-in-the-birkmult-document-class\n// Capital Alpha, etc...\n// Colon (ratio) (2236)\n\n// Review:\n// https://en.wikipedia.org/wiki/Help:Displaying_a_formula\n\n// https://reference.wolfram.com/language/tutorial/LettersAndLetterLikeForms.html\n// ftp://ftp.dante.de/tex-archive/info/symbols/comprehensive/symbols-a4.pdf\n\n// Media Wiki Reference\n// https://en.wikipedia.org/wiki/Help:Displaying_a_formula\n\n// MathJax Reference\n// http://docs.mathjax.org/en/latest/tex.html#supported-latex-commands\n// http://www.onemathematicalcat.org/MathJaxDocumentation/TeXSyntax.htm\n\n// LaTeX Reference\n// http://ctan.sharelatex.com/tex-archive/info/latex2e-help-texinfo/latex2e.html\n\n// iBooks Author/Pages\n// https://support.apple.com/en-au/HT202501\n\n// Mathematica Reference\n// https://reference.wolfram.com/language/tutorial/NamesOfSymbolsAndMathematicalObjects.html\n// https://reference.wolfram.com/language/guide/MathematicalTypesetting.html\n/*\n    * @todo \\sb (equivalent to _) $\\mathfrak{sl}\\sb 2$ frequency 184\n    * @todo \\sp (equivalent to ^) $\\mathfrak{sl}\\sp 2$ frequency 274\n    * \\intertext    frequency 0\n\n\n    See http://mirrors.ibiblio.org/CTAN/macros/latex/contrib/mathtools/mathtools.pdf\n\n*/\n","/* eslint-disable */\n/* -*- Mode: Javascript; indent-tabs-mode:nil; js-indent-level: 2 -*- */\n/* vim: set ts=2 et sw=2 tw=80: */\n\n// @ts-nocheck\n\n/**\n * Mathlive mhchem.ts\n *\n * This file is an adptation of KaTeX's adaption of MathJax's mhchem\n * implementation of the mhchem Latex extension of the same name.\n *\n *\n * See https://mhchem.github.io/MathJax-mhchem/\n */\n\nimport { defineFunction } from './definitions-utils';\nimport { parseLatex } from '../core/parser';\nimport { Atom, ToLatexOptions } from '../core/atom-class';\nimport { Context } from '../core/context';\nimport { Span } from '../core/span';\n\nclass ChemAtom extends Atom {\n  constructor(command: string, arg: string) {\n    super('chem', { command, mode: 'math' });\n    const tex = texify.go(\n      mhchemParser.go(arg, command === '\\\\pu' ? 'pu' : 'ce'),\n      false\n    );\n\n    this.body = parseLatex(tex);\n    this.latex = command + '{' + arg + '}';\n    this.captureSelection = true;\n  }\n  render(context: Context): Span {\n    const span = new Span(Atom.render(context, this.body), '', 'chem');\n\n    if (this.caret) span.caret = this.caret;\n    // Need to bind the group so that the DOM element can be matched\n    // and the atom iterated recursively. Otherwise, it behaves\n    // as if `captureSelection === true`\n    return this.bind(context, span);\n  }\n  toLatex(_options: ToLatexOptions): string {\n    return this.latex;\n  }\n}\n\ndefineFunction(['ce', 'pu'], '{chemformula:balanced-string}', {\n  createAtom: (command: string, args: Argument[], _style: Style): Atom =>\n    new ChemAtom(command, args[0] as string),\n});\n\n/*************************************************************\n *\n *  MathJax/extensions/TeX/mhchem.js\n *\n *  Implements the \\ce command for handling chemical formulas\n *  from the mhchem LaTeX package.\n *\n *  ---------------------------------------------------------------------\n *\n *  Copyright (c) 2011-2015 The MathJax Consortium\n *  Copyright (c) 2015-2018 Martin Hensel\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n */\n\n//\n// Core parser for mhchem syntax  (recursive)\n//\n/** @type {MhchemParser} */\nvar mhchemParser = {\n  //\n  // Parses mchem \\ce syntax\n  //\n  // Call like\n  //   go(\"H2O\");\n  //\n  go: function (input?, stateMachine?) {\n    if (!input) {\n      return [];\n    }\n    if (stateMachine === undefined) {\n      stateMachine = 'ce';\n    }\n    var state = '0';\n\n    //\n    // String buffers for parsing:\n    //\n    // buffer.a == amount\n    // buffer.o == element\n    // buffer.b == left-side superscript\n    // buffer.p == left-side subscript\n    // buffer.q == right-side subscript\n    // buffer.d == right-side superscript\n    //\n    // buffer.r == arrow\n    // buffer.rdt == arrow, script above, type\n    // buffer.rd == arrow, script above, content\n    // buffer.rqt == arrow, script below, type\n    // buffer.rq == arrow, script below, content\n    //\n    // buffer.text_\n    // buffer.rm\n    // etc.\n    //\n    // buffer.parenthesisLevel == int, starting at 0\n    // buffer.sb == bool, space before\n    // buffer.beginsWithBond == bool\n    //\n    // These letters are also used as state names.\n    //\n    // Other states:\n    // 0 == begin of main part (arrow/operator unlikely)\n    // 1 == next entity\n    // 2 == next entity (arrow/operator unlikely)\n    // 3 == next atom\n    // c == macro\n    //\n    /** @type {Buffer} */\n    var buffer = {};\n    buffer['parenthesisLevel'] = 0;\n\n    input = input.replace(/\\n/g, ' ');\n    input = input.replace(/[\\u2212\\u2013\\u2014\\u2010]/g, '-');\n    input = input.replace(/[\\u2026]/g, '...');\n\n    //\n    // Looks through mhchemParser.transitions, to execute a matching action\n    // (recursive)\n    //\n    var lastInput;\n    var watchdog = 10;\n    /** @type {ParserOutput[]} */\n    var output = [];\n    while (true) {\n      if (lastInput !== input) {\n        watchdog = 10;\n        lastInput = input;\n      } else {\n        watchdog--;\n      }\n      //\n      // Find actions in transition table\n      //\n      var machine = mhchemParser.stateMachines[stateMachine];\n      var t = machine.transitions[state] || machine.transitions['*'];\n      iterateTransitions: for (var i = 0; i < t.length; i++) {\n        var matches = mhchemParser.patterns.match_(t[i].pattern, input);\n        if (matches) {\n          //\n          // Execute actions\n          //\n          var task = t[i].task;\n          for (var iA = 0; iA < task.action_.length; iA++) {\n            var o;\n            //\n            // Find and execute action\n            //\n            if (machine.actions[task.action_[iA].type_]) {\n              o = machine.actions[task.action_[iA].type_](\n                buffer,\n                matches.match_,\n                task.action_[iA].option\n              );\n            } else if (mhchemParser.actions[task.action_[iA].type_]) {\n              o = mhchemParser.actions[task.action_[iA].type_](\n                buffer,\n                matches.match_,\n                task.action_[iA].option\n              );\n            } else {\n              throw [\n                'MhchemBugA',\n                'mhchem bug A. Please report. (' + task.action_[iA].type_ + ')',\n              ]; // Trying to use non-existing action\n            }\n            //\n            // Add output\n            //\n            mhchemParser.concatArray(output, o);\n          }\n          //\n          // Set next state,\n          // Shorten input,\n          // Continue with next character\n          //   (= apply only one transition per position)\n          //\n          state = task.nextState || state;\n          if (input.length > 0) {\n            if (!task.revisit) {\n              input = matches.remainder;\n            }\n            if (!task.toContinue) {\n              break iterateTransitions;\n            }\n          } else {\n            return output;\n          }\n        }\n      }\n      //\n      // Prevent infinite loop\n      //\n      if (watchdog <= 0) {\n        throw ['MhchemBugU', 'mhchem bug U. Please report.']; // Unexpected character\n      }\n    }\n  },\n  concatArray: function (a, b) {\n    if (b) {\n      if (Array.isArray(b)) {\n        for (var iB = 0; iB < b.length; iB++) {\n          a.push(b[iB]);\n        }\n      } else {\n        a.push(b);\n      }\n    }\n  },\n\n  patterns: {\n    //\n    // Matching patterns\n    // either regexps or function that return null or {match_:\"a\", remainder:\"bc\"}\n    //\n    patterns: {\n      // property names must not look like integers (\"2\") for correct property traversal order, later on\n      'empty': /^$/,\n      'else': /^./,\n      'else2': /^./,\n      'space': /^\\s/,\n      'space A': /^\\s(?=[A-Z\\\\$])/,\n      'space$': /^\\s$/,\n      'a-z': /^[a-z]/,\n      'x': /^x/,\n      'x$': /^x$/,\n      'i$': /^i$/,\n      'letters': /^(?:[a-zA-Z\\u03B1-\\u03C9\\u0391-\\u03A9?@]|(?:\\\\(?:alpha|beta|gamma|delta|epsilon|zeta|eta|theta|iota|kappa|lambda|mu|nu|xi|omicron|pi|rho|sigma|tau|upsilon|phi|chi|psi|omega|Gamma|Delta|Theta|Lambda|Xi|Pi|Sigma|Upsilon|Phi|Psi|Omega)(?:\\s+|\\{\\}|(?![a-zA-Z]))))+/,\n      '\\\\greek': /^\\\\(?:alpha|beta|gamma|delta|epsilon|zeta|eta|theta|iota|kappa|lambda|mu|nu|xi|omicron|pi|rho|sigma|tau|upsilon|phi|chi|psi|omega|Gamma|Delta|Theta|Lambda|Xi|Pi|Sigma|Upsilon|Phi|Psi|Omega)(?:\\s+|\\{\\}|(?![a-zA-Z]))/,\n      'one lowercase latin letter $': /^(?:([a-z])(?:$|[^a-zA-Z]))$/,\n      '$one lowercase latin letter$ $': /^\\$(?:([a-z])(?:$|[^a-zA-Z]))\\$$/,\n      'one lowercase greek letter $': /^(?:\\$?[\\u03B1-\\u03C9]\\$?|\\$?\\\\(?:alpha|beta|gamma|delta|epsilon|zeta|eta|theta|iota|kappa|lambda|mu|nu|xi|omicron|pi|rho|sigma|tau|upsilon|phi|chi|psi|omega)\\s*\\$?)(?:\\s+|\\{\\}|(?![a-zA-Z]))$/,\n      'digits': /^[0-9]+/,\n      '-9.,9': /^[+\\-]?(?:[0-9]+(?:[,.][0-9]+)?|[0-9]*(?:\\.[0-9]+))/,\n      '-9.,9 no missing 0': /^[+\\-]?[0-9]+(?:[.,][0-9]+)?/,\n      '(-)(9.,9)(e)(99)': function (input) {\n        var m = input.match(\n          /^(\\+\\-|\\+\\/\\-|\\+|\\-|\\\\pm\\s?)?([0-9]+(?:[,.][0-9]+)?|[0-9]*(?:\\.[0-9]+))?(\\((?:[0-9]+(?:[,.][0-9]+)?|[0-9]*(?:\\.[0-9]+))\\))?(?:([eE]|\\s*(\\*|x|\\\\times|\\u00D7)\\s*10\\^)([+\\-]?[0-9]+|\\{[+\\-]?[0-9]+\\}))?/\n        );\n        if (m && m[0]) {\n          return {\n            match_: m.splice(1),\n            remainder: input.substr(m[0].length),\n          };\n        }\n        return null;\n      },\n      '(-)(9)^(-9)': function (input) {\n        var m = input.match(\n          /^(\\+\\-|\\+\\/\\-|\\+|\\-|\\\\pm\\s?)?([0-9]+(?:[,.][0-9]+)?|[0-9]*(?:\\.[0-9]+)?)\\^([+\\-]?[0-9]+|\\{[+\\-]?[0-9]+\\})/\n        );\n        if (m && m[0]) {\n          return {\n            match_: m.splice(1),\n            remainder: input.substr(m[0].length),\n          };\n        }\n        return null;\n      },\n      'state of aggregation $': function (input) {\n        // ... or crystal system\n        var a = mhchemParser.patterns.findObserveGroups(\n          input,\n          '',\n          /^\\([a-z]{1,3}(?=[\\),])/,\n          ')',\n          ''\n        ); // (aq), (aq,$\\infty$), (aq, sat)\n        if (a && a.remainder.match(/^($|[\\s,;\\)\\]\\}])/)) {\n          return a;\n        } //  AND end of 'phrase'\n        var m = input.match(/^(?:\\((?:\\\\ca\\s?)?\\$[amothc]\\$\\))/); // OR crystal system ($o$) (\\ca$c$)\n        if (m) {\n          return {\n            match_: m[0],\n            remainder: input.substr(m[0].length),\n          };\n        }\n        return null;\n      },\n      '_{(state of aggregation)}$': /^_\\{(\\([a-z]{1,3}\\))\\}/,\n      '{[(': /^(?:\\\\\\{|\\[|\\()/,\n      ')]}': /^(?:\\)|\\]|\\\\\\})/,\n      ', ': /^[,;]\\s*/,\n      ',': /^[,;]/,\n      '.': /^[.]/,\n      '. ': /^([.\\u22C5\\u00B7\\u2022])\\s*/,\n      '...': /^\\.\\.\\.(?=$|[^.])/,\n      '* ': /^([*])\\s*/,\n      '^{(...)}': function (input) {\n        return mhchemParser.patterns.findObserveGroups(\n          input,\n          '^{',\n          '',\n          '',\n          '}'\n        );\n      },\n      '^($...$)': function (input) {\n        return mhchemParser.patterns.findObserveGroups(\n          input,\n          '^',\n          '$',\n          '$',\n          ''\n        );\n      },\n      '^a': /^\\^([0-9]+|[^\\\\_])/,\n      '^\\\\x{}{}': function (input) {\n        return mhchemParser.patterns.findObserveGroups(\n          input,\n          '^',\n          /^\\\\[a-zA-Z]+\\{/,\n          '}',\n          '',\n          '',\n          '{',\n          '}',\n          '',\n          true\n        );\n      },\n      '^\\\\x{}': function (input) {\n        return mhchemParser.patterns.findObserveGroups(\n          input,\n          '^',\n          /^\\\\[a-zA-Z]+\\{/,\n          '}',\n          ''\n        );\n      },\n      '^\\\\x': /^\\^(\\\\[a-zA-Z]+)\\s*/,\n      '^(-1)': /^\\^(-?\\d+)/,\n      \"'\": /^'/,\n      '_{(...)}': function (input) {\n        return mhchemParser.patterns.findObserveGroups(\n          input,\n          '_{',\n          '',\n          '',\n          '}'\n        );\n      },\n      '_($...$)': function (input) {\n        return mhchemParser.patterns.findObserveGroups(\n          input,\n          '_',\n          '$',\n          '$',\n          ''\n        );\n      },\n      '_9': /^_([+\\-]?[0-9]+|[^\\\\])/,\n      '_\\\\x{}{}': function (input) {\n        return mhchemParser.patterns.findObserveGroups(\n          input,\n          '_',\n          /^\\\\[a-zA-Z]+\\{/,\n          '}',\n          '',\n          '',\n          '{',\n          '}',\n          '',\n          true\n        );\n      },\n      '_\\\\x{}': function (input) {\n        return mhchemParser.patterns.findObserveGroups(\n          input,\n          '_',\n          /^\\\\[a-zA-Z]+\\{/,\n          '}',\n          ''\n        );\n      },\n      '_\\\\x': /^_(\\\\[a-zA-Z]+)\\s*/,\n      '^_': /^(?:\\^(?=_)|\\_(?=\\^)|[\\^_]$)/,\n      '{}': /^\\{\\}/,\n      '{...}': function (input) {\n        return mhchemParser.patterns.findObserveGroups(input, '', '{', '}', '');\n      },\n      '{(...)}': function (input) {\n        return mhchemParser.patterns.findObserveGroups(input, '{', '', '', '}');\n      },\n      '$...$': function (input) {\n        return mhchemParser.patterns.findObserveGroups(input, '', '$', '$', '');\n      },\n      '${(...)}$': function (input) {\n        return mhchemParser.patterns.findObserveGroups(\n          input,\n          '${',\n          '',\n          '',\n          '}$'\n        );\n      },\n      '$(...)$': function (input) {\n        return mhchemParser.patterns.findObserveGroups(input, '$', '', '', '$');\n      },\n      '=<>': /^[=<>]/,\n      '#': /^[#\\u2261]/,\n      '+': /^\\+/,\n      '-$': /^-(?=[\\s_},;\\]/]|$|\\([a-z]+\\))/, // -space -, -; -] -/ -$ -state-of-aggregation\n      '-9': /^-(?=[0-9])/,\n      '- orbital overlap': /^-(?=(?:[spd]|sp)(?:$|[\\s,;\\)\\]\\}]))/,\n      '-': /^-/,\n      'pm-operator': /^(?:\\\\pm|\\$\\\\pm\\$|\\+-|\\+\\/-)/,\n      'operator': /^(?:\\+|(?:[\\-=<>]|<<|>>|\\\\approx|\\$\\\\approx\\$)(?=\\s|$|-?[0-9]))/,\n      'arrowUpDown': /^(?:v|\\(v\\)|\\^|\\(\\^\\))(?=$|[\\s,;\\)\\]\\}])/,\n      '\\\\bond{(...)}': function (input) {\n        return mhchemParser.patterns.findObserveGroups(\n          input,\n          '\\\\bond{',\n          '',\n          '',\n          '}'\n        );\n      },\n      '->': /^(?:<->|<-->|->|<-|<=>>|<<=>|<=>|[\\u2192\\u27F6\\u21CC])/,\n      'CMT': /^[CMT](?=\\[)/,\n      '[(...)]': function (input) {\n        return mhchemParser.patterns.findObserveGroups(input, '[', '', '', ']');\n      },\n      '1st-level escape': /^(&|\\\\\\\\|\\\\hline)\\s*/,\n      '\\\\,': /^(?:\\\\[,\\ ;:])/, // \\\\x - but output no space before\n      '\\\\x{}{}': function (input) {\n        return mhchemParser.patterns.findObserveGroups(\n          input,\n          '',\n          /^\\\\[a-zA-Z]+\\{/,\n          '}',\n          '',\n          '',\n          '{',\n          '}',\n          '',\n          true\n        );\n      },\n      '\\\\x{}': function (input) {\n        return mhchemParser.patterns.findObserveGroups(\n          input,\n          '',\n          /^\\\\[a-zA-Z]+\\{/,\n          '}',\n          ''\n        );\n      },\n      '\\\\ca': /^\\\\ca(?:\\s+|(?![a-zA-Z]))/,\n      '\\\\x': /^(?:\\\\[a-zA-Z]+\\s*|\\\\[_&{}%])/,\n      'orbital': /^(?:[0-9]{1,2}[spdfgh]|[0-9]{0,2}sp)(?=$|[^a-zA-Z])/, // only those with numbers in front, because the others will be formatted correctly anyway\n      'others': /^[\\/~|]/,\n      '\\\\frac{(...)}': function (input) {\n        return mhchemParser.patterns.findObserveGroups(\n          input,\n          '\\\\frac{',\n          '',\n          '',\n          '}',\n          '{',\n          '',\n          '',\n          '}'\n        );\n      },\n      '\\\\overset{(...)}': function (input) {\n        return mhchemParser.patterns.findObserveGroups(\n          input,\n          '\\\\overset{',\n          '',\n          '',\n          '}',\n          '{',\n          '',\n          '',\n          '}'\n        );\n      },\n      '\\\\underset{(...)}': function (input) {\n        return mhchemParser.patterns.findObserveGroups(\n          input,\n          '\\\\underset{',\n          '',\n          '',\n          '}',\n          '{',\n          '',\n          '',\n          '}'\n        );\n      },\n      '\\\\underbrace{(...)}': function (input) {\n        return mhchemParser.patterns.findObserveGroups(\n          input,\n          '\\\\underbrace{',\n          '',\n          '',\n          '}_',\n          '{',\n          '',\n          '',\n          '}'\n        );\n      },\n      '\\\\color{(...)}0': function (input) {\n        return mhchemParser.patterns.findObserveGroups(\n          input,\n          '\\\\color{',\n          '',\n          '',\n          '}'\n        );\n      },\n      '\\\\color{(...)}{(...)}1': function (input) {\n        return mhchemParser.patterns.findObserveGroups(\n          input,\n          '\\\\color{',\n          '',\n          '',\n          '}',\n          '{',\n          '',\n          '',\n          '}'\n        );\n      },\n      '\\\\color(...){(...)}2': function (input) {\n        return mhchemParser.patterns.findObserveGroups(\n          input,\n          '\\\\color',\n          '\\\\',\n          '',\n          /^(?=\\{)/,\n          '{',\n          '',\n          '',\n          '}'\n        );\n      },\n      '\\\\ce{(...)}': function (input) {\n        return mhchemParser.patterns.findObserveGroups(\n          input,\n          '\\\\ce{',\n          '',\n          '',\n          '}'\n        );\n      },\n      'oxidation$': /^(?:[+-][IVX]+|\\\\pm\\s*0|\\$\\\\pm\\$\\s*0)$/,\n      'd-oxidation$': /^(?:[+-]?\\s?[IVX]+|\\\\pm\\s*0|\\$\\\\pm\\$\\s*0)$/, // 0 could be oxidation or charge\n      'roman numeral': /^[IVX]+/,\n      '1/2$': /^[+\\-]?(?:[0-9]+|\\$[a-z]\\$|[a-z])\\/[0-9]+(?:\\$[a-z]\\$|[a-z])?$/,\n      'amount': function (input) {\n        var match;\n        // e.g. 2, 0.5, 1/2, -2, n/2, +;  $a$ could be added later in parsing\n        match = input.match(\n          /^(?:(?:(?:\\([+\\-]?[0-9]+\\/[0-9]+\\)|[+\\-]?(?:[0-9]+|\\$[a-z]\\$|[a-z])\\/[0-9]+|[+\\-]?[0-9]+[.,][0-9]+|[+\\-]?\\.[0-9]+|[+\\-]?[0-9]+)(?:[a-z](?=\\s*[A-Z]))?)|[+\\-]?[a-z](?=\\s*[A-Z])|\\+(?!\\s))/\n        );\n        if (match) {\n          return {\n            match_: match[0],\n            remainder: input.substr(match[0].length),\n          };\n        }\n        var a = mhchemParser.patterns.findObserveGroups(\n          input,\n          '',\n          '$',\n          '$',\n          ''\n        );\n        if (a) {\n          // e.g. $2n-1$, $-$\n          match = a.match_.match(\n            /^\\$(?:\\(?[+\\-]?(?:[0-9]*[a-z]?[+\\-])?[0-9]*[a-z](?:[+\\-][0-9]*[a-z]?)?\\)?|\\+|-)\\$$/\n          );\n          if (match) {\n            return {\n              match_: match[0],\n              remainder: input.substr(match[0].length),\n            };\n          }\n        }\n        return null;\n      },\n      'amount2': function (input) {\n        return this['amount'](input);\n      },\n      '(KV letters),': /^(?:[A-Z][a-z]{0,2}|i)(?=,)/,\n      'formula$': function (input) {\n        if (input.match(/^\\([a-z]+\\)$/)) {\n          return null;\n        } // state of aggregation = no formula\n        var match = input.match(\n          /^(?:[a-z]|(?:[0-9\\ \\+\\-\\,\\.\\(\\)]+[a-z])+[0-9\\ \\+\\-\\,\\.\\(\\)]*|(?:[a-z][0-9\\ \\+\\-\\,\\.\\(\\)]+)+[a-z]?)$/\n        );\n        if (match) {\n          return {\n            match_: match[0],\n            remainder: input.substr(match[0].length),\n          };\n        }\n        return null;\n      },\n      'uprightEntities': /^(?:pH|pOH|pC|pK|iPr|iBu)(?=$|[^a-zA-Z])/,\n      '/': /^\\s*(\\/)\\s*/,\n      '//': /^\\s*(\\/\\/)\\s*/,\n      '*': /^\\s*[*.]\\s*/,\n    },\n    findObserveGroups: function (\n      input,\n      begExcl,\n      begIncl,\n      endIncl,\n      endExcl,\n      beg2Excl?,\n      beg2Incl?,\n      end2Incl?,\n      end2Excl?,\n      combine?\n    ) {\n      /** @type {{(input: string, pattern: string | RegExp): string | string[] | null;}} */\n      var _match = function (input, pattern) {\n        if (typeof pattern === 'string') {\n          if (input.indexOf(pattern) !== 0) {\n            return null;\n          }\n          return pattern;\n        } else {\n          var match = input.match(pattern);\n          if (!match) {\n            return null;\n          }\n          return match[0];\n        }\n      };\n      /** @type {{(input: string, i: number, endChars: string | RegExp): {endMatchBegin: number, endMatchEnd: number} | null;}} */\n      var _findObserveGroups = function (input, i, endChars) {\n        var braces = 0;\n        while (i < input.length) {\n          var a = input.charAt(i);\n          var match = _match(input.substr(i), endChars);\n          if (match !== null && braces === 0) {\n            return {\n              endMatchBegin: i,\n              endMatchEnd: i + match.length,\n            };\n          } else if (a === '{') {\n            braces++;\n          } else if (a === '}') {\n            if (braces === 0) {\n              throw [\n                'ExtraCloseMissingOpen',\n                'Extra close brace or missing open brace',\n              ];\n            } else {\n              braces--;\n            }\n          }\n          i++;\n        }\n        if (braces > 0) {\n          return null;\n        }\n        return null;\n      };\n      var match = _match(input, begExcl);\n      if (match === null) {\n        return null;\n      }\n      input = input.substr(match.length);\n      match = _match(input, begIncl);\n      if (match === null) {\n        return null;\n      }\n      var e = _findObserveGroups(input, match.length, endIncl || endExcl);\n      if (e === null) {\n        return null;\n      }\n      var match1 = input.substring(\n        0,\n        endIncl ? e.endMatchEnd : e.endMatchBegin\n      );\n      if (!(beg2Excl || beg2Incl)) {\n        return {\n          match_: match1,\n          remainder: input.substr(e.endMatchEnd),\n        };\n      } else {\n        var group2 = this.findObserveGroups(\n          input.substr(e.endMatchEnd),\n          beg2Excl,\n          beg2Incl,\n          end2Incl,\n          end2Excl\n        );\n        if (group2 === null) {\n          return null;\n        }\n        /** @type {string[]} */\n        var matchRet = [match1, group2.match_];\n        return {\n          match_: combine ? matchRet.join('') : matchRet,\n          remainder: group2.remainder,\n        };\n      }\n    },\n\n    //\n    // Matching function\n    // e.g. match(\"a\", input) will look for the regexp called \"a\" and see if it matches\n    // returns null or {match_:\"a\", remainder:\"bc\"}\n    //\n    match_: function (m, input) {\n      var pattern = mhchemParser.patterns.patterns[m];\n      if (pattern === undefined) {\n        throw ['MhchemBugP', 'mhchem bug P. Please report. (' + m + ')']; // Trying to use non-existing pattern\n      } else if (typeof pattern === 'function') {\n        return mhchemParser.patterns.patterns[m](input); // cannot use cached var pattern here, because some pattern functions need this===mhchemParser\n      } else {\n        // RegExp\n        var match = input.match(pattern);\n        if (match) {\n          var mm;\n          if (match[2]) {\n            mm = [match[1], match[2]];\n          } else if (match[1]) {\n            mm = match[1];\n          } else {\n            mm = match[0];\n          }\n          return {\n            match_: mm,\n            remainder: input.substr(match[0].length),\n          };\n        }\n        return null;\n      }\n    },\n  },\n\n  //\n  // Generic state machine actions\n  //\n  actions: {\n    'a=': function (buffer, m) {\n      buffer.a = (buffer.a || '') + m;\n    },\n    'b=': function (buffer, m) {\n      buffer.b = (buffer.b || '') + m;\n    },\n    'p=': function (buffer, m) {\n      buffer.p = (buffer.p || '') + m;\n    },\n    'o=': function (buffer, m) {\n      buffer.o = (buffer.o || '') + m;\n    },\n    'q=': function (buffer, m) {\n      buffer.q = (buffer.q || '') + m;\n    },\n    'd=': function (buffer, m) {\n      buffer.d = (buffer.d || '') + m;\n    },\n    'rm=': function (buffer, m) {\n      buffer.rm = (buffer.rm || '') + m;\n    },\n    'text=': function (buffer, m) {\n      buffer.text_ = (buffer.text_ || '') + m;\n    },\n    'insert': function (buffer, m, a) {\n      return { type_: a };\n    },\n    'insert+p1': function (buffer, m, a) {\n      return { type_: a, p1: m };\n    },\n    'insert+p1+p2': function (buffer, m, a) {\n      return { type_: a, p1: m[0], p2: m[1] };\n    },\n    'copy': function (buffer, m) {\n      return m;\n    },\n    'rm': function (buffer, m) {\n      return { type_: 'rm', p1: m || '' };\n    },\n    'text': function (buffer, m) {\n      return mhchemParser.go(m, 'text');\n    },\n    '{text}': function (buffer, m) {\n      var ret = ['{'];\n      mhchemParser.concatArray(ret, mhchemParser.go(m, 'text'));\n      ret.push('}');\n      return ret;\n    },\n    'tex-math': function (buffer, m) {\n      return mhchemParser.go(m, 'tex-math');\n    },\n    'tex-math tight': function (buffer, m) {\n      return mhchemParser.go(m, 'tex-math tight');\n    },\n    'bond': function (buffer, m, k) {\n      return { type_: 'bond', kind_: k || m };\n    },\n    'color0-output': function (buffer, m) {\n      return { type_: 'color0', color: m[0] };\n    },\n    'ce': function (buffer, m) {\n      return mhchemParser.go(m);\n    },\n    '1/2': function (buffer, m) {\n      /** @type {ParserOutput[]} */\n      var ret = [];\n      if (m.match(/^[+\\-]/)) {\n        ret.push(m.substr(0, 1));\n        m = m.substr(1);\n      }\n      var n = m.match(/^([0-9]+|\\$[a-z]\\$|[a-z])\\/([0-9]+)(\\$[a-z]\\$|[a-z])?$/);\n      n[1] = n[1].replace(/\\$/g, '');\n      ret.push({ type_: 'frac', p1: n[1], p2: n[2] });\n      if (n[3]) {\n        n[3] = n[3].replace(/\\$/g, '');\n        ret.push({ type_: 'tex-math', p1: n[3] });\n      }\n      return ret;\n    },\n    '9,9': function (buffer, m) {\n      return mhchemParser.go(m, '9,9');\n    },\n  },\n  //\n  // createTransitions\n  // convert  { 'letter': { 'state': { action_: 'output' } } }  to  { 'state' => [ { pattern: 'letter', task: { action_: [{type_: 'output'}] } } ] }\n  // with expansion of 'a|b' to 'a' and 'b' (at 2 places)\n  //\n  createTransitions: function (o) {\n    var pattern, state;\n    /** @type {string[]} */\n    var stateArray;\n    var i;\n    //\n    // 1. Collect all states\n    //\n    /** @type {Transitions} */\n    var transitions = {};\n    for (pattern in o) {\n      for (state in o[pattern]) {\n        stateArray = state.split('|');\n        o[pattern][state].stateArray = stateArray;\n        for (i = 0; i < stateArray.length; i++) {\n          transitions[stateArray[i]] = [];\n        }\n      }\n    }\n    //\n    // 2. Fill states\n    //\n    for (pattern in o) {\n      for (state in o[pattern]) {\n        stateArray = o[pattern][state].stateArray || [];\n        for (i = 0; i < stateArray.length; i++) {\n          //\n          // 2a. Normalize actions into array:  'text=' ==> [{type_:'text='}]\n          // (Note to myself: Resolving the function here would be problematic. It would need .bind (for *this*) and currying (for *option*).)\n          //\n          /** @type {any} */\n          var p = o[pattern][state];\n          if (p.action_) {\n            p.action_ = [].concat(p.action_);\n            for (var k = 0; k < p.action_.length; k++) {\n              if (typeof p.action_[k] === 'string') {\n                p.action_[k] = { type_: p.action_[k] };\n              }\n            }\n          } else {\n            p.action_ = [];\n          }\n          //\n          // 2.b Multi-insert\n          //\n          var patternArray = pattern.split('|');\n          for (var j = 0; j < patternArray.length; j++) {\n            if (stateArray[i] === '*') {\n              // insert into all\n              for (var t in transitions) {\n                transitions[t].push({\n                  pattern: patternArray[j],\n                  task: p,\n                });\n              }\n            } else {\n              transitions[stateArray[i]].push({\n                pattern: patternArray[j],\n                task: p,\n              });\n            }\n          }\n        }\n      }\n    }\n    return transitions;\n  },\n  stateMachines: {},\n};\n\n//\n// Definition of state machines\n//\nmhchemParser.stateMachines = {\n  //\n  // \\ce state machines\n  //\n  //#region ce\n  'ce': {\n    // main parser\n    transitions: mhchemParser.createTransitions({\n      'empty': {\n        '*': { action_: 'output' },\n      },\n      'else': {\n        '0|1|2': {\n          action_: 'beginsWithBond=false',\n          revisit: true,\n          toContinue: true,\n        },\n      },\n      'oxidation$': {\n        '0': { action_: 'oxidation-output' },\n      },\n      'CMT': {\n        r: { action_: 'rdt=', nextState: 'rt' },\n        rd: { action_: 'rqt=', nextState: 'rdt' },\n      },\n      'arrowUpDown': {\n        '0|1|2|as': {\n          action_: ['sb=false', 'output', 'operator'],\n          nextState: '1',\n        },\n      },\n      'uprightEntities': {\n        '0|1|2': { action_: ['o=', 'output'], nextState: '1' },\n      },\n      'orbital': {\n        '0|1|2|3': { action_: 'o=', nextState: 'o' },\n      },\n      '->': {\n        '0|1|2|3': { action_: 'r=', nextState: 'r' },\n        'a|as': { action_: ['output', 'r='], nextState: 'r' },\n        '*': { action_: ['output', 'r='], nextState: 'r' },\n      },\n      '+': {\n        'o': { action_: 'd= kv', nextState: 'd' },\n        'd|D': { action_: 'd=', nextState: 'd' },\n        'q': { action_: 'd=', nextState: 'qd' },\n        'qd|qD': { action_: 'd=', nextState: 'qd' },\n        'dq': { action_: ['output', 'd='], nextState: 'd' },\n        '3': {\n          action_: ['sb=false', 'output', 'operator'],\n          nextState: '0',\n        },\n      },\n      'amount': {\n        '0|2': { action_: 'a=', nextState: 'a' },\n      },\n      'pm-operator': {\n        '0|1|2|a|as': {\n          action_: [\n            'sb=false',\n            'output',\n            { type_: 'operator', option: '\\\\pm' },\n          ],\n          nextState: '0',\n        },\n      },\n      'operator': {\n        '0|1|2|a|as': {\n          action_: ['sb=false', 'output', 'operator'],\n          nextState: '0',\n        },\n      },\n      '-$': {\n        'o|q': {\n          action_: ['charge or bond', 'output'],\n          nextState: 'qd',\n        },\n        'd': { action_: 'd=', nextState: 'd' },\n        'D': {\n          action_: ['output', { type_: 'bond', option: '-' }],\n          nextState: '3',\n        },\n        'q': { action_: 'd=', nextState: 'qd' },\n        'qd': { action_: 'd=', nextState: 'qd' },\n        'qD|dq': {\n          action_: ['output', { type_: 'bond', option: '-' }],\n          nextState: '3',\n        },\n      },\n      '-9': {\n        '3|o': {\n          action_: ['output', { type_: 'insert', option: 'hyphen' }],\n          nextState: '3',\n        },\n      },\n      '- orbital overlap': {\n        o: {\n          action_: ['output', { type_: 'insert', option: 'hyphen' }],\n          nextState: '2',\n        },\n        d: {\n          action_: ['output', { type_: 'insert', option: 'hyphen' }],\n          nextState: '2',\n        },\n      },\n      '-': {\n        '0|1|2': {\n          action_: [\n            { type_: 'output', option: 1 },\n            'beginsWithBond=true',\n            { type_: 'bond', option: '-' },\n          ],\n          nextState: '3',\n        },\n        '3': { action_: { type_: 'bond', option: '-' } },\n        'a': {\n          action_: ['output', { type_: 'insert', option: 'hyphen' }],\n          nextState: '2',\n        },\n        'as': {\n          action_: [\n            { type_: 'output', option: 2 },\n            { type_: 'bond', option: '-' },\n          ],\n          nextState: '3',\n        },\n        'b': { action_: 'b=' },\n        'o': {\n          action_: { type_: '- after o/d', option: false },\n          nextState: '2',\n        },\n        'q': {\n          action_: { type_: '- after o/d', option: false },\n          nextState: '2',\n        },\n        'd|qd|dq': {\n          action_: { type_: '- after o/d', option: true },\n          nextState: '2',\n        },\n        'D|qD|p': {\n          action_: ['output', { type_: 'bond', option: '-' }],\n          nextState: '3',\n        },\n      },\n      'amount2': {\n        '1|3': { action_: 'a=', nextState: 'a' },\n      },\n      'letters': {\n        '0|1|2|3|a|as|b|p|bp|o': { action_: 'o=', nextState: 'o' },\n        'q|dq': { action_: ['output', 'o='], nextState: 'o' },\n        'd|D|qd|qD': { action_: 'o after d', nextState: 'o' },\n      },\n      'digits': {\n        'o': { action_: 'q=', nextState: 'q' },\n        'd|D': { action_: 'q=', nextState: 'dq' },\n        'q': { action_: ['output', 'o='], nextState: 'o' },\n        'a': { action_: 'o=', nextState: 'o' },\n      },\n      'space A': {\n        'b|p|bp': {},\n      },\n      'space': {\n        'a': { nextState: 'as' },\n        '0': { action_: 'sb=false' },\n        '1|2': { action_: 'sb=true' },\n        'r|rt|rd|rdt|rdq': { action_: 'output', nextState: '0' },\n        '*': { action_: ['output', 'sb=true'], nextState: '1' },\n      },\n      '1st-level escape': {\n        '1|2': {\n          action_: [\n            'output',\n            { type_: 'insert+p1', option: '1st-level escape' },\n          ],\n        },\n        '*': {\n          action_: [\n            'output',\n            { type_: 'insert+p1', option: '1st-level escape' },\n          ],\n          nextState: '0',\n        },\n      },\n      '[(...)]': {\n        'r|rt': { action_: 'rd=', nextState: 'rd' },\n        'rd|rdt': { action_: 'rq=', nextState: 'rdq' },\n      },\n      '...': {\n        'o|d|D|dq|qd|qD': {\n          action_: ['output', { type_: 'bond', option: '...' }],\n          nextState: '3',\n        },\n        '*': {\n          action_: [\n            { type_: 'output', option: 1 },\n            { type_: 'insert', option: 'ellipsis' },\n          ],\n          nextState: '1',\n        },\n      },\n      '. |* ': {\n        '*': {\n          action_: ['output', { type_: 'insert', option: 'addition compound' }],\n          nextState: '1',\n        },\n      },\n      'state of aggregation $': {\n        '*': {\n          action_: ['output', 'state of aggregation'],\n          nextState: '1',\n        },\n      },\n      '{[(': {\n        'a|as|o': {\n          action_: ['o=', 'output', 'parenthesisLevel++'],\n          nextState: '2',\n        },\n        '0|1|2|3': {\n          action_: ['o=', 'output', 'parenthesisLevel++'],\n          nextState: '2',\n        },\n        '*': {\n          action_: ['output', 'o=', 'output', 'parenthesisLevel++'],\n          nextState: '2',\n        },\n      },\n      ')]}': {\n        '0|1|2|3|b|p|bp|o': {\n          action_: ['o=', 'parenthesisLevel--'],\n          nextState: 'o',\n        },\n        'a|as|d|D|q|qd|qD|dq': {\n          action_: ['output', 'o=', 'parenthesisLevel--'],\n          nextState: 'o',\n        },\n      },\n      ', ': {\n        '*': { action_: ['output', 'comma'], nextState: '0' },\n      },\n      '^_': {\n        // ^ and _ without a sensible argument\n        '*': {},\n      },\n      '^{(...)}|^($...$)': {\n        '0|1|2|as': { action_: 'b=', nextState: 'b' },\n        'p': { action_: 'b=', nextState: 'bp' },\n        '3|o': { action_: 'd= kv', nextState: 'D' },\n        'q': { action_: 'd=', nextState: 'qD' },\n        'd|D|qd|qD|dq': { action_: ['output', 'd='], nextState: 'D' },\n      },\n      \"^a|^\\\\x{}{}|^\\\\x{}|^\\\\x|'\": {\n        '0|1|2|as': { action_: 'b=', nextState: 'b' },\n        'p': { action_: 'b=', nextState: 'bp' },\n        '3|o': { action_: 'd= kv', nextState: 'd' },\n        'q': { action_: 'd=', nextState: 'qd' },\n        'd|qd|D|qD': { action_: 'd=' },\n        'dq': { action_: ['output', 'd='], nextState: 'd' },\n      },\n      '_{(state of aggregation)}$': {\n        'd|D|q|qd|qD|dq': { action_: ['output', 'q='], nextState: 'q' },\n      },\n      '_{(...)}|_($...$)|_9|_\\\\x{}{}|_\\\\x{}|_\\\\x': {\n        '0|1|2|as': { action_: 'p=', nextState: 'p' },\n        'b': { action_: 'p=', nextState: 'bp' },\n        '3|o': { action_: 'q=', nextState: 'q' },\n        'd|D': { action_: 'q=', nextState: 'dq' },\n        'q|qd|qD|dq': { action_: ['output', 'q='], nextState: 'q' },\n      },\n      '=<>': {\n        '0|1|2|3|a|as|o|q|d|D|qd|qD|dq': {\n          action_: [{ type_: 'output', option: 2 }, 'bond'],\n          nextState: '3',\n        },\n      },\n      '#': {\n        '0|1|2|3|a|as|o': {\n          action_: [\n            { type_: 'output', option: 2 },\n            { type_: 'bond', option: '#' },\n          ],\n          nextState: '3',\n        },\n      },\n      '{}': {\n        '*': {\n          action_: { type_: 'output', option: 1 },\n          nextState: '1',\n        },\n      },\n      '{...}': {\n        '0|1|2|3|a|as|b|p|bp': { action_: 'o=', nextState: 'o' },\n        'o|d|D|q|qd|qD|dq': {\n          action_: ['output', 'o='],\n          nextState: 'o',\n        },\n      },\n      '$...$': {\n        'a': { action_: 'a=' }, // 2$n$\n        '0|1|2|3|as|b|p|bp|o': { action_: 'o=', nextState: 'o' }, // not 'amount'\n        'as|o': { action_: 'o=' },\n        'q|d|D|qd|qD|dq': { action_: ['output', 'o='], nextState: 'o' },\n      },\n      '\\\\bond{(...)}': {\n        '*': {\n          action_: [{ type_: 'output', option: 2 }, 'bond'],\n          nextState: '3',\n        },\n      },\n      '\\\\frac{(...)}': {\n        '*': {\n          action_: [{ type_: 'output', option: 1 }, 'frac-output'],\n          nextState: '3',\n        },\n      },\n      '\\\\overset{(...)}': {\n        '*': {\n          action_: [{ type_: 'output', option: 2 }, 'overset-output'],\n          nextState: '3',\n        },\n      },\n      '\\\\underset{(...)}': {\n        '*': {\n          action_: [{ type_: 'output', option: 2 }, 'underset-output'],\n          nextState: '3',\n        },\n      },\n      '\\\\underbrace{(...)}': {\n        '*': {\n          action_: [{ type_: 'output', option: 2 }, 'underbrace-output'],\n          nextState: '3',\n        },\n      },\n      '\\\\color{(...)}{(...)}1|\\\\color(...){(...)}2': {\n        '*': {\n          action_: [{ type_: 'output', option: 2 }, 'color-output'],\n          nextState: '3',\n        },\n      },\n      '\\\\color{(...)}0': {\n        '*': {\n          action_: [{ type_: 'output', option: 2 }, 'color0-output'],\n        },\n      },\n      '\\\\ce{(...)}': {\n        '*': {\n          action_: [{ type_: 'output', option: 2 }, 'ce'],\n          nextState: '3',\n        },\n      },\n      '\\\\,': {\n        '*': {\n          action_: [{ type_: 'output', option: 1 }, 'copy'],\n          nextState: '1',\n        },\n      },\n      '\\\\x{}{}|\\\\x{}|\\\\x': {\n        '0|1|2|3|a|as|b|p|bp|o|c0': {\n          action_: ['o=', 'output'],\n          nextState: '3',\n        },\n        '*': { action_: ['output', 'o=', 'output'], nextState: '3' },\n      },\n      'others': {\n        '*': {\n          action_: [{ type_: 'output', option: 1 }, 'copy'],\n          nextState: '3',\n        },\n      },\n      'else2': {\n        'a': { action_: 'a to o', nextState: 'o', revisit: true },\n        'as': {\n          action_: ['output', 'sb=true'],\n          nextState: '1',\n          revisit: true,\n        },\n        'r|rt|rd|rdt|rdq': {\n          action_: ['output'],\n          nextState: '0',\n          revisit: true,\n        },\n        '*': { action_: ['output', 'copy'], nextState: '3' },\n      },\n    }),\n    actions: {\n      'o after d': function (buffer, m) {\n        var ret;\n        if ((buffer.d || '').match(/^[0-9]+$/)) {\n          var tmp = buffer.d;\n          buffer.d = undefined;\n          ret = this['output'](buffer);\n          buffer.b = tmp;\n        } else {\n          ret = this['output'](buffer);\n        }\n        mhchemParser.actions['o='](buffer, m);\n        return ret;\n      },\n      'd= kv': function (buffer, m) {\n        buffer.d = m;\n        buffer.dType = 'kv';\n      },\n      'charge or bond': function (buffer, m) {\n        if (buffer['beginsWithBond']) {\n          /** @type {ParserOutput[]} */\n          var ret = [];\n          mhchemParser.concatArray(ret, this['output'](buffer));\n          mhchemParser.concatArray(\n            ret,\n            mhchemParser.actions['bond'](buffer, m, '-')\n          );\n          return ret;\n        } else {\n          buffer.d = m;\n        }\n      },\n      '- after o/d': function (buffer, m, isAfterD) {\n        var c1 = mhchemParser.patterns.match_('orbital', buffer.o || '');\n        var c2 = mhchemParser.patterns.match_(\n          'one lowercase greek letter $',\n          buffer.o || ''\n        );\n        var c3 = mhchemParser.patterns.match_(\n          'one lowercase latin letter $',\n          buffer.o || ''\n        );\n        var c4 = mhchemParser.patterns.match_(\n          '$one lowercase latin letter$ $',\n          buffer.o || ''\n        );\n        var hyphenFollows =\n          m === '-' && ((c1 && c1.remainder === '') || c2 || c3 || c4);\n        if (\n          hyphenFollows &&\n          !buffer.a &&\n          !buffer.b &&\n          !buffer.p &&\n          !buffer.d &&\n          !buffer.q &&\n          !c1 &&\n          c3\n        ) {\n          buffer.o = '$' + buffer.o + '$';\n        }\n        /** @type {ParserOutput[]} */\n        var ret = [];\n        if (hyphenFollows) {\n          mhchemParser.concatArray(ret, this['output'](buffer));\n          ret.push({ type_: 'hyphen' });\n        } else {\n          c1 = mhchemParser.patterns.match_('digits', buffer.d || '');\n          if (isAfterD && c1 && c1.remainder === '') {\n            mhchemParser.concatArray(\n              ret,\n              mhchemParser.actions['d='](buffer, m)\n            );\n            mhchemParser.concatArray(ret, this['output'](buffer));\n          } else {\n            mhchemParser.concatArray(ret, this['output'](buffer));\n            mhchemParser.concatArray(\n              ret,\n              mhchemParser.actions['bond'](buffer, m, '-')\n            );\n          }\n        }\n        return ret;\n      },\n      'a to o': function (buffer) {\n        buffer.o = buffer.a;\n        buffer.a = undefined;\n      },\n      'sb=true': function (buffer) {\n        buffer.sb = true;\n      },\n      'sb=false': function (buffer) {\n        buffer.sb = false;\n      },\n      'beginsWithBond=true': function (buffer) {\n        buffer['beginsWithBond'] = true;\n      },\n      'beginsWithBond=false': function (buffer) {\n        buffer['beginsWithBond'] = false;\n      },\n      'parenthesisLevel++': function (buffer) {\n        buffer['parenthesisLevel']++;\n      },\n      'parenthesisLevel--': function (buffer) {\n        buffer['parenthesisLevel']--;\n      },\n      'state of aggregation': function (buffer, m) {\n        return {\n          type_: 'state of aggregation',\n          p1: mhchemParser.go(m, 'o'),\n        };\n      },\n      'comma': function (buffer, m) {\n        var a = m.replace(/\\s*$/, '');\n        var withSpace = a !== m;\n        if (withSpace && buffer['parenthesisLevel'] === 0) {\n          return { type_: 'comma enumeration L', p1: a };\n        } else {\n          return { type_: 'comma enumeration M', p1: a };\n        }\n      },\n      'output': function (buffer, m, entityFollows) {\n        // entityFollows:\n        //   undefined = if we have nothing else to output, also ignore the just read space (buffer.sb)\n        //   1 = an entity follows, never omit the space if there was one just read before (can only apply to state 1)\n        //   2 = 1 + the entity can have an amount, so output a\\, instead of converting it to o (can only apply to states a|as)\n        /** @type {ParserOutput | ParserOutput[]} */\n        var ret;\n        if (!buffer.r) {\n          ret = [];\n          if (\n            !buffer.a &&\n            !buffer.b &&\n            !buffer.p &&\n            !buffer.o &&\n            !buffer.q &&\n            !buffer.d &&\n            !entityFollows\n          ) {\n            //ret = [];\n          } else {\n            if (buffer.sb) {\n              ret.push({ type_: 'entitySkip' });\n            }\n            if (\n              !buffer.o &&\n              !buffer.q &&\n              !buffer.d &&\n              !buffer.b &&\n              !buffer.p &&\n              entityFollows !== 2\n            ) {\n              buffer.o = buffer.a;\n              buffer.a = undefined;\n            } else if (\n              !buffer.o &&\n              !buffer.q &&\n              !buffer.d &&\n              (buffer.b || buffer.p)\n            ) {\n              buffer.o = buffer.a;\n              buffer.d = buffer.b;\n              buffer.q = buffer.p;\n              buffer.a = buffer.b = buffer.p = undefined;\n            } else {\n              if (\n                buffer.o &&\n                buffer.dType === 'kv' &&\n                mhchemParser.patterns.match_('d-oxidation$', buffer.d || '')\n              ) {\n                buffer.dType = 'oxidation';\n              } else if (buffer.o && buffer.dType === 'kv' && !buffer.q) {\n                buffer.dType = undefined;\n              }\n            }\n            ret.push({\n              type_: 'chemfive',\n              a: mhchemParser.go(buffer.a, 'a'),\n              b: mhchemParser.go(buffer.b, 'bd'),\n              p: mhchemParser.go(buffer.p, 'pq'),\n              o: mhchemParser.go(buffer.o, 'o'),\n              q: mhchemParser.go(buffer.q, 'pq'),\n              d: mhchemParser.go(\n                buffer.d,\n                buffer.dType === 'oxidation' ? 'oxidation' : 'bd'\n              ),\n              dType: buffer.dType,\n            });\n          }\n        } else {\n          // r\n          /** @type {ParserOutput[]} */\n          var rd;\n          if (buffer.rdt === 'M') {\n            rd = mhchemParser.go(buffer.rd, 'tex-math');\n          } else if (buffer.rdt === 'T') {\n            rd = [{ type_: 'text', p1: buffer.rd || '' }];\n          } else {\n            rd = mhchemParser.go(buffer.rd);\n          }\n          /** @type {ParserOutput[]} */\n          var rq;\n          if (buffer.rqt === 'M') {\n            rq = mhchemParser.go(buffer.rq, 'tex-math');\n          } else if (buffer.rqt === 'T') {\n            rq = [{ type_: 'text', p1: buffer.rq || '' }];\n          } else {\n            rq = mhchemParser.go(buffer.rq);\n          }\n          ret = {\n            type_: 'arrow',\n            r: buffer.r,\n            rd: rd,\n            rq: rq,\n          };\n        }\n        for (var p in buffer) {\n          if (p !== 'parenthesisLevel' && p !== 'beginsWithBond') {\n            delete buffer[p];\n          }\n        }\n        return ret;\n      },\n      'oxidation-output': function (buffer, m) {\n        var ret = ['{'];\n        mhchemParser.concatArray(ret, mhchemParser.go(m, 'oxidation'));\n        ret.push('}');\n        return ret;\n      },\n      'frac-output': function (buffer, m) {\n        return {\n          type_: 'frac-ce',\n          p1: mhchemParser.go(m[0]),\n          p2: mhchemParser.go(m[1]),\n        };\n      },\n      'overset-output': function (buffer, m) {\n        return {\n          type_: 'overset',\n          p1: mhchemParser.go(m[0]),\n          p2: mhchemParser.go(m[1]),\n        };\n      },\n      'underset-output': function (buffer, m) {\n        return {\n          type_: 'underset',\n          p1: mhchemParser.go(m[0]),\n          p2: mhchemParser.go(m[1]),\n        };\n      },\n      'underbrace-output': function (buffer, m) {\n        return {\n          type_: 'underbrace',\n          p1: mhchemParser.go(m[0]),\n          p2: mhchemParser.go(m[1]),\n        };\n      },\n      'color-output': function (buffer, m) {\n        return {\n          type_: 'color',\n          color1: m[0],\n          color2: mhchemParser.go(m[1]),\n        };\n      },\n      'r=': function (buffer, m) {\n        buffer.r = m;\n      },\n      'rdt=': function (buffer, m) {\n        buffer.rdt = m;\n      },\n      'rd=': function (buffer, m) {\n        buffer.rd = m;\n      },\n      'rqt=': function (buffer, m) {\n        buffer.rqt = m;\n      },\n      'rq=': function (buffer, m) {\n        buffer.rq = m;\n      },\n      'operator': function (buffer, m, p1) {\n        return { type_: 'operator', kind_: p1 || m };\n      },\n    },\n  },\n  'a': {\n    transitions: mhchemParser.createTransitions({\n      'empty': {\n        '*': {},\n      },\n      '1/2$': {\n        '0': { action_: '1/2' },\n      },\n      'else': {\n        '0': { nextState: '1', revisit: true },\n      },\n      '$(...)$': {\n        '*': { action_: 'tex-math tight', nextState: '1' },\n      },\n      ',': {\n        '*': { action_: { type_: 'insert', option: 'commaDecimal' } },\n      },\n      'else2': {\n        '*': { action_: 'copy' },\n      },\n    }),\n    actions: {},\n  },\n  'o': {\n    transitions: mhchemParser.createTransitions({\n      'empty': {\n        '*': {},\n      },\n      '1/2$': {\n        '0': { action_: '1/2' },\n      },\n      'else': {\n        '0': { nextState: '1', revisit: true },\n      },\n      'letters': {\n        '*': { action_: 'rm' },\n      },\n      '\\\\ca': {\n        '*': { action_: { type_: 'insert', option: 'circa' } },\n      },\n      '\\\\x{}{}|\\\\x{}|\\\\x': {\n        '*': { action_: 'copy' },\n      },\n      '${(...)}$|$(...)$': {\n        '*': { action_: 'tex-math' },\n      },\n      '{(...)}': {\n        '*': { action_: '{text}' },\n      },\n      'else2': {\n        '*': { action_: 'copy' },\n      },\n    }),\n    actions: {},\n  },\n  'text': {\n    transitions: mhchemParser.createTransitions({\n      'empty': {\n        '*': { action_: 'output' },\n      },\n      '{...}': {\n        '*': { action_: 'text=' },\n      },\n      '${(...)}$|$(...)$': {\n        '*': { action_: 'tex-math' },\n      },\n      '\\\\greek': {\n        '*': { action_: ['output', 'rm'] },\n      },\n      '\\\\,|\\\\x{}{}|\\\\x{}|\\\\x': {\n        '*': { action_: ['output', 'copy'] },\n      },\n      'else': {\n        '*': { action_: 'text=' },\n      },\n    }),\n    actions: {\n      output: function (buffer) {\n        if (buffer.text_) {\n          /** @type {ParserOutput} */\n          var ret = { type_: 'text', p1: buffer.text_ };\n          for (var p in buffer) {\n            delete buffer[p];\n          }\n          return ret;\n        }\n      },\n    },\n  },\n  'pq': {\n    transitions: mhchemParser.createTransitions({\n      'empty': {\n        '*': {},\n      },\n      'state of aggregation $': {\n        '*': { action_: 'state of aggregation' },\n      },\n      'i$': {\n        '0': { nextState: '!f', revisit: true },\n      },\n      '(KV letters),': {\n        '0': { action_: 'rm', nextState: '0' },\n      },\n      'formula$': {\n        '0': { nextState: 'f', revisit: true },\n      },\n      '1/2$': {\n        '0': { action_: '1/2' },\n      },\n      'else': {\n        '0': { nextState: '!f', revisit: true },\n      },\n      '${(...)}$|$(...)$': {\n        '*': { action_: 'tex-math' },\n      },\n      '{(...)}': {\n        '*': { action_: 'text' },\n      },\n      'a-z': {\n        f: { action_: 'tex-math' },\n      },\n      'letters': {\n        '*': { action_: 'rm' },\n      },\n      '-9.,9': {\n        '*': { action_: '9,9' },\n      },\n      ',': {\n        '*': {\n          action_: {\n            type_: 'insert+p1',\n            option: 'comma enumeration S',\n          },\n        },\n      },\n      '\\\\color{(...)}{(...)}1|\\\\color(...){(...)}2': {\n        '*': { action_: 'color-output' },\n      },\n      '\\\\color{(...)}0': {\n        '*': { action_: 'color0-output' },\n      },\n      '\\\\ce{(...)}': {\n        '*': { action_: 'ce' },\n      },\n      '\\\\,|\\\\x{}{}|\\\\x{}|\\\\x': {\n        '*': { action_: 'copy' },\n      },\n      'else2': {\n        '*': { action_: 'copy' },\n      },\n    }),\n    actions: {\n      'state of aggregation': function (buffer, m) {\n        return {\n          type_: 'state of aggregation subscript',\n          p1: mhchemParser.go(m, 'o'),\n        };\n      },\n      'color-output': function (buffer, m) {\n        return {\n          type_: 'color',\n          color1: m[0],\n          color2: mhchemParser.go(m[1], 'pq'),\n        };\n      },\n    },\n  },\n  'bd': {\n    transitions: mhchemParser.createTransitions({\n      'empty': {\n        '*': {},\n      },\n      'x$': {\n        '0': { nextState: '!f', revisit: true },\n      },\n      'formula$': {\n        '0': { nextState: 'f', revisit: true },\n      },\n      'else': {\n        '0': { nextState: '!f', revisit: true },\n      },\n      '-9.,9 no missing 0': {\n        '*': { action_: '9,9' },\n      },\n      '.': {\n        '*': { action_: { type_: 'insert', option: 'electron dot' } },\n      },\n      'a-z': {\n        f: { action_: 'tex-math' },\n      },\n      'x': {\n        '*': { action_: { type_: 'insert', option: 'KV x' } },\n      },\n      'letters': {\n        '*': { action_: 'rm' },\n      },\n      \"'\": {\n        '*': { action_: { type_: 'insert', option: 'prime' } },\n      },\n      '${(...)}$|$(...)$': {\n        '*': { action_: 'tex-math' },\n      },\n      '{(...)}': {\n        '*': { action_: 'text' },\n      },\n      '\\\\color{(...)}{(...)}1|\\\\color(...){(...)}2': {\n        '*': { action_: 'color-output' },\n      },\n      '\\\\color{(...)}0': {\n        '*': { action_: 'color0-output' },\n      },\n      '\\\\ce{(...)}': {\n        '*': { action_: 'ce' },\n      },\n      '\\\\,|\\\\x{}{}|\\\\x{}|\\\\x': {\n        '*': { action_: 'copy' },\n      },\n      'else2': {\n        '*': { action_: 'copy' },\n      },\n    }),\n    actions: {\n      'color-output': function (buffer, m) {\n        return {\n          type_: 'color',\n          color1: m[0],\n          color2: mhchemParser.go(m[1], 'bd'),\n        };\n      },\n    },\n  },\n  'oxidation': {\n    transitions: mhchemParser.createTransitions({\n      'empty': {\n        '*': {},\n      },\n      'roman numeral': {\n        '*': { action_: 'roman-numeral' },\n      },\n      '${(...)}$|$(...)$': {\n        '*': { action_: 'tex-math' },\n      },\n      'else': {\n        '*': { action_: 'copy' },\n      },\n    }),\n    actions: {\n      'roman-numeral': function (buffer, m) {\n        return { type_: 'roman numeral', p1: m || '' };\n      },\n    },\n  },\n  'tex-math': {\n    transitions: mhchemParser.createTransitions({\n      'empty': {\n        '*': { action_: 'output' },\n      },\n      '\\\\ce{(...)}': {\n        '*': { action_: ['output', 'ce'] },\n      },\n      '{...}|\\\\,|\\\\x{}{}|\\\\x{}|\\\\x': {\n        '*': { action_: 'o=' },\n      },\n      'else': {\n        '*': { action_: 'o=' },\n      },\n    }),\n    actions: {\n      output: function (buffer) {\n        if (buffer.o) {\n          /** @type {ParserOutput} */\n          var ret = { type_: 'tex-math', p1: buffer.o };\n          for (var p in buffer) {\n            delete buffer[p];\n          }\n          return ret;\n        }\n      },\n    },\n  },\n  'tex-math tight': {\n    transitions: mhchemParser.createTransitions({\n      'empty': {\n        '*': { action_: 'output' },\n      },\n      '\\\\ce{(...)}': {\n        '*': { action_: ['output', 'ce'] },\n      },\n      '{...}|\\\\,|\\\\x{}{}|\\\\x{}|\\\\x': {\n        '*': { action_: 'o=' },\n      },\n      '-|+': {\n        '*': { action_: 'tight operator' },\n      },\n      'else': {\n        '*': { action_: 'o=' },\n      },\n    }),\n    actions: {\n      'tight operator': function (buffer, m) {\n        buffer.o = (buffer.o || '') + '{' + m + '}';\n      },\n      'output': function (buffer) {\n        if (buffer.o) {\n          /** @type {ParserOutput} */\n          var ret = { type_: 'tex-math', p1: buffer.o };\n          for (var p in buffer) {\n            delete buffer[p];\n          }\n          return ret;\n        }\n      },\n    },\n  },\n  '9,9': {\n    transitions: mhchemParser.createTransitions({\n      'empty': {\n        '*': {},\n      },\n      ',': {\n        '*': { action_: 'comma' },\n      },\n      'else': {\n        '*': { action_: 'copy' },\n      },\n    }),\n    actions: {\n      comma: function () {\n        return { type_: 'commaDecimal' };\n      },\n    },\n  },\n  //#endregion\n  //\n  // \\pu state machines\n  //\n  //#region pu\n  'pu': {\n    transitions: mhchemParser.createTransitions({\n      'empty': {\n        '*': { action_: 'output' },\n      },\n      'space$': {\n        '*': { action_: ['output', 'space'] },\n      },\n      '{[(|)]}': {\n        '0|a': { action_: 'copy' },\n      },\n      '(-)(9)^(-9)': {\n        '0': { action_: 'number^', nextState: 'a' },\n      },\n      '(-)(9.,9)(e)(99)': {\n        '0': { action_: 'enumber', nextState: 'a' },\n      },\n      'space': {\n        '0|a': {},\n      },\n      'pm-operator': {\n        '0|a': {\n          action_: { type_: 'operator', option: '\\\\pm' },\n          nextState: '0',\n        },\n      },\n      'operator': {\n        '0|a': { action_: 'copy', nextState: '0' },\n      },\n      '//': {\n        d: { action_: 'o=', nextState: '/' },\n      },\n      '/': {\n        d: { action_: 'o=', nextState: '/' },\n      },\n      '{...}|else': {\n        '0|d': { action_: 'd=', nextState: 'd' },\n        'a': { action_: ['space', 'd='], nextState: 'd' },\n        '/|q': { action_: 'q=', nextState: 'q' },\n      },\n    }),\n    actions: {\n      'enumber': function (buffer, m) {\n        /** @type {ParserOutput[]} */\n        var ret = [];\n        if (m[0] === '+-' || m[0] === '+/-') {\n          ret.push('\\\\pm ');\n        } else if (m[0]) {\n          ret.push(m[0]);\n        }\n        if (m[1]) {\n          mhchemParser.concatArray(ret, mhchemParser.go(m[1], 'pu-9,9'));\n          if (m[2]) {\n            if (m[2].match(/[,.]/)) {\n              mhchemParser.concatArray(ret, mhchemParser.go(m[2], 'pu-9,9'));\n            } else {\n              ret.push(m[2]);\n            }\n          }\n          m[3] = m[4] || m[3];\n          if (m[3]) {\n            m[3] = m[3].trim();\n            if (m[3] === 'e' || m[3].substr(0, 1) === '*') {\n              ret.push({ type_: 'cdot' });\n            } else {\n              ret.push({ type_: 'times' });\n            }\n          }\n        }\n        if (m[3]) {\n          ret.push('10^{' + m[5] + '}');\n        }\n        return ret;\n      },\n      'number^': function (buffer, m) {\n        /** @type {ParserOutput[]} */\n        var ret = [];\n        if (m[0] === '+-' || m[0] === '+/-') {\n          ret.push('\\\\pm ');\n        } else if (m[0]) {\n          ret.push(m[0]);\n        }\n        mhchemParser.concatArray(ret, mhchemParser.go(m[1], 'pu-9,9'));\n        ret.push('^{' + m[2] + '}');\n        return ret;\n      },\n      'operator': function (buffer, m, p1) {\n        return { type_: 'operator', kind_: p1 || m };\n      },\n      'space': function () {\n        return { type_: 'pu-space-1' };\n      },\n      'output': function (buffer) {\n        /** @type {ParserOutput | ParserOutput[]} */\n        var ret;\n        var md = mhchemParser.patterns.match_('{(...)}', buffer.d || '');\n        if (md && md.remainder === '') {\n          buffer.d = md.match_;\n        }\n        var mq = mhchemParser.patterns.match_('{(...)}', buffer.q || '');\n        if (mq && mq.remainder === '') {\n          buffer.q = mq.match_;\n        }\n        if (buffer.d) {\n          buffer.d = buffer.d.replace(/\\u00B0C|\\^oC|\\^{o}C/g, '{}^{\\\\circ}C');\n          buffer.d = buffer.d.replace(/\\u00B0F|\\^oF|\\^{o}F/g, '{}^{\\\\circ}F');\n        }\n        if (buffer.q) {\n          // fraction\n          buffer.q = buffer.q.replace(/\\u00B0C|\\^oC|\\^{o}C/g, '{}^{\\\\circ}C');\n          buffer.q = buffer.q.replace(/\\u00B0F|\\^oF|\\^{o}F/g, '{}^{\\\\circ}F');\n          var b5 = {\n            d: mhchemParser.go(buffer.d, 'pu'),\n            q: mhchemParser.go(buffer.q, 'pu'),\n          };\n          if (buffer.o === '//') {\n            ret = { type_: 'pu-frac', p1: b5.d, p2: b5.q };\n          } else {\n            ret = b5.d;\n            if (b5.d.length > 1 || b5.q.length > 1) {\n              ret.push({ type_: ' / ' });\n            } else {\n              ret.push({ type_: '/' });\n            }\n            mhchemParser.concatArray(ret, b5.q);\n          }\n        } else {\n          // no fraction\n          ret = mhchemParser.go(buffer.d, 'pu-2');\n        }\n        for (var p in buffer) {\n          delete buffer[p];\n        }\n        return ret;\n      },\n    },\n  },\n  'pu-2': {\n    transitions: mhchemParser.createTransitions({\n      'empty': {\n        '*': { action_: 'output' },\n      },\n      '*': {\n        '*': { action_: ['output', 'cdot'], nextState: '0' },\n      },\n      '\\\\x': {\n        '*': { action_: 'rm=' },\n      },\n      'space': {\n        '*': { action_: ['output', 'space'], nextState: '0' },\n      },\n      '^{(...)}|^(-1)': {\n        '1': { action_: '^(-1)' },\n      },\n      '-9.,9': {\n        '0': { action_: 'rm=', nextState: '0' },\n        '1': { action_: '^(-1)', nextState: '0' },\n      },\n      '{...}|else': {\n        '*': { action_: 'rm=', nextState: '1' },\n      },\n    }),\n    actions: {\n      'cdot': function () {\n        return { type_: 'tight cdot' };\n      },\n      '^(-1)': function (buffer, m) {\n        buffer.rm += '^{' + m + '}';\n      },\n      'space': function () {\n        return { type_: 'pu-space-2' };\n      },\n      'output': function (buffer) {\n        /** @type {ParserOutput | ParserOutput[]} */\n        var ret = [];\n        if (buffer.rm) {\n          var mrm = mhchemParser.patterns.match_('{(...)}', buffer.rm || '');\n          if (mrm && mrm.remainder === '') {\n            ret = mhchemParser.go(mrm.match_, 'pu');\n          } else {\n            ret = { type_: 'rm', p1: buffer.rm };\n          }\n        }\n        for (var p in buffer) {\n          delete buffer[p];\n        }\n        return ret;\n      },\n    },\n  },\n  'pu-9,9': {\n    transitions: mhchemParser.createTransitions({\n      'empty': {\n        '0': { action_: 'output-0' },\n        'o': { action_: 'output-o' },\n      },\n      ',': {\n        '0': { action_: ['output-0', 'comma'], nextState: 'o' },\n      },\n      '.': {\n        '0': { action_: ['output-0', 'copy'], nextState: 'o' },\n      },\n      'else': {\n        '*': { action_: 'text=' },\n      },\n    }),\n    actions: {\n      'comma': function () {\n        return { type_: 'commaDecimal' };\n      },\n      'output-0': function (buffer) {\n        /** @type {ParserOutput[]} */\n        var ret = [];\n        buffer.text_ = buffer.text_ || '';\n        if (buffer.text_.length > 4) {\n          var a = buffer.text_.length % 3;\n          if (a === 0) {\n            a = 3;\n          }\n          for (var i = buffer.text_.length - 3; i > 0; i -= 3) {\n            ret.push(buffer.text_.substr(i, 3));\n            ret.push({ type_: '1000 separator' });\n          }\n          ret.push(buffer.text_.substr(0, a));\n          ret.reverse();\n        } else {\n          ret.push(buffer.text_);\n        }\n        for (var p in buffer) {\n          delete buffer[p];\n        }\n        return ret;\n      },\n      'output-o': function (buffer) {\n        /** @type {ParserOutput[]} */\n        var ret = [];\n        buffer.text_ = buffer.text_ || '';\n        if (buffer.text_.length > 4) {\n          var a = buffer.text_.length - 3;\n          for (var i = 0; i < a; i += 3) {\n            ret.push(buffer.text_.substr(i, 3));\n            ret.push({ type_: '1000 separator' });\n          }\n          ret.push(buffer.text_.substr(i));\n        } else {\n          ret.push(buffer.text_);\n        }\n        for (var p in buffer) {\n          delete buffer[p];\n        }\n        return ret;\n      },\n    },\n  },\n  //#endregion\n};\n\n//\n// texify: Take MhchemParser output and convert it to TeX\n//\n/** @type {Texify} */\nvar texify = {\n  go: function (input, isInner) {\n    // (recursive, max 4 levels)\n    if (!input) {\n      return '';\n    }\n    var res = '';\n    var cee = false;\n    for (var i = 0; i < input.length; i++) {\n      var inputi = input[i];\n      if (typeof inputi === 'string') {\n        res += inputi;\n      } else {\n        res += texify._go2(inputi);\n        if (inputi.type_ === '1st-level escape') {\n          cee = true;\n        }\n      }\n    }\n    if (!isInner && !cee && res) {\n      res = '{' + res + '}';\n    }\n    return res;\n  },\n  _goInner: function (input) {\n    if (!input) {\n      return input;\n    }\n    return texify.go(input, true);\n  },\n  _go2: function (buf) {\n    /** @type {undefined | string} */\n    var res;\n    switch (buf.type_) {\n      case 'chemfive':\n        res = '';\n        var b5 = {\n          a: texify._goInner(buf.a),\n          b: texify._goInner(buf.b),\n          p: texify._goInner(buf.p),\n          o: texify._goInner(buf.o),\n          q: texify._goInner(buf.q),\n          d: texify._goInner(buf.d),\n        };\n        //\n        // a\n        //\n        if (b5.a) {\n          if (b5.a.match(/^[+\\-]/)) {\n            b5.a = '{' + b5.a + '}';\n          }\n          res += b5.a + '\\\\,';\n        }\n        //\n        // b and p\n        //\n        if (b5.b || b5.p) {\n          res += '{\\\\vphantom{X}}';\n          res +=\n            '^{\\\\hphantom{' +\n            (b5.b || '') +\n            '}}_{\\\\hphantom{' +\n            (b5.p || '') +\n            '}}';\n          res += '{\\\\vphantom{X}}';\n          res += '^{\\\\smash[t]{\\\\vphantom{2}}\\\\mathllap{' + (b5.b || '') + '}}';\n          res += '_{\\\\vphantom{2}\\\\mathllap{\\\\smash[t]{' + (b5.p || '') + '}}}';\n        }\n        //\n        // o\n        //\n        if (b5.o) {\n          if (b5.o.match(/^[+\\-]/)) {\n            b5.o = '{' + b5.o + '}';\n          }\n          res += b5.o;\n        }\n        //\n        // q and d\n        //\n        if (buf.dType === 'kv') {\n          if (b5.d || b5.q) {\n            res += '{\\\\vphantom{X}}';\n          }\n          if (b5.d) {\n            res += '^{' + b5.d + '}';\n          }\n          if (b5.q) {\n            res += '_{\\\\smash[t]{' + b5.q + '}}';\n          }\n        } else if (buf.dType === 'oxidation') {\n          if (b5.d) {\n            res += '{\\\\vphantom{X}}';\n            res += '^{' + b5.d + '}';\n          }\n          if (b5.q) {\n            res += '{\\\\vphantom{X}}';\n            res += '_{\\\\smash[t]{' + b5.q + '}}';\n          }\n        } else {\n          if (b5.q) {\n            res += '{\\\\vphantom{X}}';\n            res += '_{\\\\smash[t]{' + b5.q + '}}';\n          }\n          if (b5.d) {\n            res += '{\\\\vphantom{X}}';\n            res += '^{' + b5.d + '}';\n          }\n        }\n        break;\n      case 'rm':\n        res = '\\\\mathrm{' + buf.p1 + '}';\n        break;\n      case 'text':\n        if (buf.p1.match(/[\\^_]/)) {\n          buf.p1 = buf.p1.replace(' ', '~').replace('-', '\\\\text{-}');\n          res = '\\\\mathrm{' + buf.p1 + '}';\n        } else {\n          res = '\\\\text{' + buf.p1 + '}';\n        }\n        break;\n      case 'roman numeral':\n        res = '\\\\mathrm{' + buf.p1 + '}';\n        break;\n      case 'state of aggregation':\n        res = '\\\\mskip2mu ' + texify._goInner(buf.p1);\n        break;\n      case 'state of aggregation subscript':\n        res = '\\\\mskip1mu ' + texify._goInner(buf.p1);\n        break;\n      case 'bond':\n        res = texify._getBond(buf.kind_);\n        if (!res) {\n          throw [\n            'MhchemErrorBond',\n            'mhchem Error. Unknown bond type (' + buf.kind_ + ')',\n          ];\n        }\n        break;\n      case 'frac':\n        var c = '\\\\frac{' + buf.p1 + '}{' + buf.p2 + '}';\n        res =\n          '\\\\mathchoice{\\\\textstyle' + c + '}{' + c + '}{' + c + '}{' + c + '}';\n        break;\n      case 'pu-frac':\n        var d =\n          '\\\\frac{' +\n          texify._goInner(buf.p1) +\n          '}{' +\n          texify._goInner(buf.p2) +\n          '}';\n        res =\n          '\\\\mathchoice{\\\\textstyle' + d + '}{' + d + '}{' + d + '}{' + d + '}';\n        break;\n      case 'tex-math':\n        res = buf.p1 + ' ';\n        break;\n      case 'frac-ce':\n        res =\n          '\\\\frac{' +\n          texify._goInner(buf.p1) +\n          '}{' +\n          texify._goInner(buf.p2) +\n          '}';\n        break;\n      case 'overset':\n        res =\n          '\\\\overset{' +\n          texify._goInner(buf.p1) +\n          '}{' +\n          texify._goInner(buf.p2) +\n          '}';\n        break;\n      case 'underset':\n        res =\n          '\\\\underset{' +\n          texify._goInner(buf.p1) +\n          '}{' +\n          texify._goInner(buf.p2) +\n          '}';\n        break;\n      case 'underbrace':\n        res =\n          '\\\\underbrace{' +\n          texify._goInner(buf.p1) +\n          '}_{' +\n          texify._goInner(buf.p2) +\n          '}';\n        break;\n      case 'color':\n        res =\n          '{\\\\color{' + buf.color1 + '}{' + texify._goInner(buf.color2) + '}}';\n        break;\n      case 'color0':\n        res = '\\\\color{' + buf.color + '}';\n        break;\n      case 'arrow':\n        var b6 = {\n          rd: texify._goInner(buf.rd),\n          rq: texify._goInner(buf.rq),\n        };\n        var arrow = '\\\\x' + texify._getArrow(buf.r);\n        if (b6.rq) {\n          arrow += '[{' + b6.rq + '}]';\n        }\n        if (b6.rd) {\n          arrow += '{' + b6.rd + '}';\n        } else {\n          arrow += '{}';\n        }\n        res = arrow;\n        break;\n      case 'operator':\n        res = texify._getOperator(buf.kind_);\n        break;\n      case '1st-level escape':\n        res = buf.p1 + ' '; // &, \\\\\\\\, \\\\hlin\n        break;\n      case 'space':\n        res = ' ';\n        break;\n      case 'entitySkip':\n        res = '~';\n        break;\n      case 'pu-space-1':\n        res = '~';\n        break;\n      case 'pu-space-2':\n        res = '\\\\mkern3mu ';\n        break;\n      case '1000 separator':\n        res = '\\\\mkern2mu ';\n        break;\n      case 'commaDecimal':\n        res = '{,}';\n        break;\n      case 'comma enumeration L':\n        res = '{' + buf.p1 + '}\\\\mkern6mu ';\n        break;\n      case 'comma enumeration M':\n        res = '{' + buf.p1 + '}\\\\mkern3mu ';\n        break;\n      case 'comma enumeration S':\n        res = '{' + buf.p1 + '}\\\\mkern1mu ';\n        break;\n      case 'hyphen':\n        res = '\\\\text{-}';\n        break;\n      case 'addition compound':\n        res = '\\\\,{\\\\cdot}\\\\,';\n        break;\n      case 'electron dot':\n        res = '\\\\mkern1mu \\\\bullet\\\\mkern1mu ';\n        break;\n      case 'KV x':\n        res = '{\\\\times}';\n        break;\n      case 'prime':\n        res = '\\\\prime ';\n        break;\n      case 'cdot':\n        res = '\\\\cdot ';\n        break;\n      case 'tight cdot':\n        res = '\\\\mkern1mu{\\\\cdot}\\\\mkern1mu ';\n        break;\n      case 'times':\n        res = '\\\\times ';\n        break;\n      case 'circa':\n        res = '{\\\\sim}';\n        break;\n      case '^':\n        res = 'uparrow';\n        break;\n      case 'v':\n        res = 'downarrow';\n        break;\n      case 'ellipsis':\n        res = '\\\\ldots ';\n        break;\n      case '/':\n        res = '/';\n        break;\n      case ' / ':\n        res = '\\\\,/\\\\,';\n        break;\n      default:\n        assertNever(buf);\n        throw ['MhchemBugT', 'mhchem bug T. Please report.']; // Missing texify rule or unknown MhchemParser output\n    }\n    assertString(res);\n    return res;\n  },\n  _getArrow: function (a) {\n    switch (a) {\n      case '->':\n        return 'rightarrow';\n      case '\\u2192':\n        return 'rightarrow';\n      case '\\u27F6':\n        return 'rightarrow';\n      case '<-':\n        return 'leftarrow';\n      case '<->':\n        return 'leftrightarrow';\n      case '<-->':\n        return 'rightleftarrows';\n      case '<=>':\n        return 'rightleftharpoons';\n      case '\\u21CC':\n        return 'rightleftharpoons';\n      case '<=>>':\n        return 'rightequilibrium';\n      case '<<=>':\n        return 'leftequilibrium';\n      default:\n        assertNever(a);\n        throw ['MhchemBugT', 'mhchem bug T. Please report.'];\n    }\n  },\n  _getBond: function (a) {\n    switch (a) {\n      case '-':\n        return '{-}';\n      case '1':\n        return '{-}';\n      case '=':\n        return '{=}';\n      case '2':\n        return '{=}';\n      case '#':\n        return '{\\\\equiv}';\n      case '3':\n        return '{\\\\equiv}';\n      case '~':\n        return '{\\\\tripledash}';\n      case '~-':\n        return '{\\\\mathrlap{\\\\raisebox{-.1em}{$-$}}\\\\raisebox{.1em}{$\\\\tripledash$}}';\n      case '~=':\n        return '{\\\\mathrlap{\\\\raisebox{-.2em}{$-$}}\\\\mathrlap{\\\\raisebox{.2em}{$\\\\tripledash$}}-}';\n      case '~--':\n        return '{\\\\mathrlap{\\\\raisebox{-.2em}{$-$}}\\\\mathrlap{\\\\raisebox{.2em}{$\\\\tripledash$}}-}';\n      case '-~-':\n        return '{\\\\mathrlap{\\\\raisebox{-.2em}{$-$}}\\\\mathrlap{\\\\raisebox{.2em}{$-$}}\\\\tripledash}';\n      case '...':\n        return '{{\\\\cdot}{\\\\cdot}{\\\\cdot}}';\n      case '....':\n        return '{{\\\\cdot}{\\\\cdot}{\\\\cdot}{\\\\cdot}}';\n      case '->':\n        return '{\\\\rightarrow}';\n      case '<-':\n        return '{\\\\leftarrow}';\n      case '<':\n        return '{<}';\n      case '>':\n        return '{>}';\n      default:\n        assertNever(a);\n        throw ['MhchemBugT', 'mhchem bug T. Please report.'];\n    }\n  },\n  _getOperator: function (a) {\n    switch (a) {\n      case '+':\n        return ' {}+{} ';\n      case '-':\n        return ' {}-{} ';\n      case '=':\n        return ' {}={} ';\n      case '<':\n        return ' {}<{} ';\n      case '>':\n        return ' {}>{} ';\n      case '<<':\n        return ' {}\\\\ll{} ';\n      case '>>':\n        return ' {}\\\\gg{} ';\n      case '\\\\pm':\n        return ' {}\\\\pm{} ';\n      case '\\\\approx':\n        return ' {}\\\\approx{} ';\n      case '$\\\\approx$':\n        return ' {}\\\\approx{} ';\n      case 'v':\n        return ' \\\\downarrow{} ';\n      case '(v)':\n        return ' \\\\downarrow{} ';\n      case '^':\n        return ' \\\\uparrow{} ';\n      case '(^)':\n        return ' \\\\uparrow{} ';\n      default:\n        assertNever(a);\n        throw ['MhchemBugT', 'mhchem bug T. Please report.'];\n    }\n  },\n};\n\n//\n// Helpers for code anaylsis\n// Will show type error at calling position\n//\n/** @param {number} a */\nfunction assertNever(a) {}\n/** @param {string} a */\nfunction assertString(a) {}\n","import { Atom, ToLatexOptions } from '../core/atom-class';\nimport { METRICS as FONTMETRICS } from '../core/font-metrics';\nimport { Span } from '../core/span';\nimport { Context } from '../core/context';\nimport { Style } from '../public/core';\n\nexport class BoxAtom extends Atom {\n  readonly framecolor?: string;\n  readonly verbatimFramecolor?: string;\n  readonly backgroundcolor?: string;\n  readonly verbatimBackgroundcolor?: string;\n  readonly padding?: number;\n  readonly border?: string;\n\n  constructor(\n    command: string,\n    body: Atom[],\n    options: {\n      framecolor?: string;\n      verbatimFramecolor?: string;\n      backgroundcolor?: string;\n      verbatimBackgroundcolor?: string;\n      padding?: number;\n      border?: string;\n      style: Style;\n      toLatexOverride?: (atom: BoxAtom, options: ToLatexOptions) => string;\n    }\n  ) {\n    super('box', {\n      command,\n      toLatexOverride: options.toLatexOverride,\n      style: options.style,\n    });\n    this.body = body;\n\n    this.framecolor = options.framecolor;\n    this.verbatimFramecolor = options.verbatimBackgroundcolor;\n    this.backgroundcolor = options.backgroundcolor;\n    this.verbatimBackgroundcolor = options.verbatimBackgroundcolor;\n    this.padding = options.padding;\n    this.border = options.border;\n  }\n\n  render(context: Context): Span {\n    // The padding extends outside of the base\n    const padding =\n      typeof this.padding === 'number' ? this.padding : FONTMETRICS.fboxsep;\n\n    // Base is the main content \"inside\" the box\n    const content = new Span(Atom.render(context, this.body));\n    content.setStyle('vertical-align', -content.height, 'em');\n    const base = new Span(content, { type: 'mord' });\n\n    // This span will represent the box (background and border).\n    // It's positioned to overlap the base.\n    // The 'ML__box' class is required to prevent the span from being omitted\n    // during rendering (it looks like an empty, no-op span)\n    const box = new Span(null, { classes: 'ML__box' });\n    box.height = base.height + padding;\n    box.depth = base.depth + padding;\n    box.setStyle('box-sizing', 'border-box');\n    box.setStyle('position', 'absolute');\n\n    box.setStyle('height', base.height + base.depth + 2 * padding, 'em');\n    if (padding === 0) {\n      box.setStyle('width', '100%');\n    } else {\n      box.setStyle('width', `calc(100% + ${2 * padding}em)`);\n      box.setStyle('top', FONTMETRICS.fboxsep, 'em'); // empirical\n      box.setStyle('left', -padding, 'em');\n    }\n\n    box.setStyle('z-index', '-1'); // Ensure the box is *behind* the base\n\n    if (this.backgroundcolor) {\n      box.setStyle('background-color', this.backgroundcolor);\n    }\n\n    if (this.framecolor) {\n      box.setStyle(\n        'border',\n        `${FONTMETRICS.fboxrule}em solid ${this.framecolor}`\n      );\n    }\n\n    if (this.border) box.setStyle('border', this.border);\n    // box.setStyle('top', /* width of the border */);\n\n    base.setStyle('display', 'inline-block');\n    base.setStyle('height', content.height + content.depth, 'em');\n    base.setStyle('vertical-align', -padding, 'em');\n\n    // The result is a span that encloses the box and the base\n    const result = new Span([box, base], { type: 'mord' });\n    // Set its position as relative so that the box can be absolute positioned\n    // over the base\n    result.setStyle('position', 'relative');\n    result.setStyle('display', 'inline-block');\n\n    // The padding adds to the width and height of the pod\n    result.height = base.height + padding;\n    result.depth = base.depth + padding;\n    result.left = padding;\n    result.right = padding;\n    result.setStyle('height', base.height + padding, 'em');\n    result.setStyle('top', base.depth - base.height, 'em');\n    result.setStyle('vertical-align', base.depth + padding, 'em');\n\n    if (this.caret) result.caret = this.caret;\n\n    return this.attachSupsub(context, result, result.type);\n  }\n}\n","import { Atom } from '../core/atom-class';\nimport { Span, makeVlist } from '../core/span';\nimport { Context } from '../core/context';\nimport type { Style } from '../public/core';\n\nexport type PhantomType =\n  | 'phantom'\n  | 'vphantom'\n  | 'hphantom'\n  | 'smash'\n  | 'bsmash'\n  | 'tsmash';\nexport class PhantomAtom extends Atom {\n  readonly phantomType: PhantomType;\n  private readonly isInvisible: boolean;\n  constructor(\n    command: string,\n    body: Atom[],\n    options: {\n      phantomType?: PhantomType;\n      isInvisible?: boolean;\n      style: Style;\n    }\n  ) {\n    super('phantom', { command, style: options.style });\n    this.captureSelection = true;\n    this.body = body;\n    this.phantomType = options.phantomType;\n    this.isInvisible = options.isInvisible ?? false;\n  }\n\n  render(context: Context): Span {\n    if (this.phantomType === 'vphantom') {\n      const content = new Span(Atom.render(context, this.body), {\n        classes: 'inner',\n      });\n      content.setStyle('color', 'transparent');\n      content.setStyle('backgroundColor', 'transparent');\n      return new Span([content, new Span(null, { classes: 'fix' })], {\n        classes: 'rlap',\n        type: 'mord',\n      });\n    }\n\n    if (\n      this.phantomType === 'hphantom' ||\n      this.phantomType === 'smash' ||\n      this.phantomType === 'bsmash' ||\n      this.phantomType === 'tsmash'\n    ) {\n      const content = new Span(Atom.render(context, this.body), {\n        type: 'mord',\n      });\n      if (this.isInvisible) {\n        content.setStyle('color', 'transparent');\n        content.setStyle('backgroundColor', 'transparent');\n      }\n\n      if (this.phantomType !== 'bsmash') {\n        content.height = 0;\n      }\n\n      if (this.phantomType !== 'tsmash') {\n        content.depth = 0;\n      }\n\n      return new Span(makeVlist(context, [content]), { type: 'mord' });\n    }\n\n    return new Span(Atom.render(context, this.body), { type: 'mord' });\n  }\n}\n","import { Atom } from '../core/atom-class';\nimport { MATHSTYLES } from '../core/mathstyle';\nimport { METRICS as FONTMETRICS } from '../core/font-metrics';\nimport { Span, makeVlist } from '../core/span';\nimport { Context } from '../core/context';\nimport { Style } from '../public/core';\n\nexport class LineAtom extends Atom {\n  private readonly position: 'overline' | 'underline';\n  constructor(\n    command: string,\n    body: Atom[],\n    options: { position: 'overline' | 'underline'; style: Style }\n  ) {\n    super('line', { command, style: options.style });\n    this.skipBoundary = true;\n    this.body = body;\n    this.position = options.position;\n  }\n\n  render(context: Context): Span {\n    const { mathstyle } = context;\n    // TeXBook:443. Rule 9 and 10\n    const inner = new Span(Atom.render(context.cramp(), this.body));\n    const ruleWidth =\n      FONTMETRICS.defaultRuleThickness / mathstyle.sizeMultiplier;\n    const line = new Span(null, {\n      classes:\n        context.mathstyle.adjustTo(MATHSTYLES.textstyle) +\n        ' ' +\n        this.position +\n        '-line',\n    });\n    line.height = ruleWidth;\n    line.maxFontSize = 1;\n    let vlist: Span;\n    if (this.position === 'overline') {\n      vlist = makeVlist(context, [inner, 3 * ruleWidth, line, ruleWidth]);\n    } else {\n      vlist = makeVlist(\n        context,\n        [ruleWidth, line, 3 * ruleWidth, inner],\n        'top',\n        { initialPos: inner.height }\n      );\n    }\n\n    if (this.caret) vlist.caret = this.caret;\n    return new Span(vlist, { classes: this.position, type: 'mord' });\n  }\n}\n","import { Atom } from '../core/atom-class';\nimport { Span, SpanType } from '../core/span';\nimport { Context } from '../core/context';\nimport type { Style } from '../public/core';\n\nexport class OverlapAtom extends Atom {\n  private readonly align?: 'left' | 'right';\n  private readonly spanType: SpanType;\n  constructor(\n    command: string,\n    body: string | Atom[],\n    options?: { align?: 'left' | 'right'; spanType?: SpanType; style: Style }\n  ) {\n    super('overlap', { command, style: options.style });\n    this.skipBoundary = true;\n    if (typeof body === 'string') {\n      this.body = [new Atom('mord', { value: body })];\n    } else {\n      this.body = body;\n    }\n    this.align = options?.align ?? 'left';\n    this.spanType = options?.spanType ?? 'mord';\n  }\n\n  render(context: Context): Span {\n    // For llap (18), rlap (270), clap (0)\n    // smash (common), mathllap (0), mathrlap (0), mathclap (0)\n    // See https://www.tug.org/TUGboat/tb22-4/tb72perlS.pdf\n    // and https://tex.stackexchange.com/questions/98785/what-are-the-different-kinds-of-vertical-spacing-and-horizontal-spacing-commands\n    const inner = new Span(Atom.render(context, this.body), {\n      classes: 'inner',\n    }); // @revisit\n    if (this.caret) inner.caret = this.caret;\n    return this.bind(\n      context,\n      new Span([inner, new Span(null, { classes: 'fix' })], {\n        classes: this.align === 'left' ? 'llap' : 'rlap',\n        type: this.spanType,\n      })\n    );\n  }\n}\n","import { Atom, ToLatexOptions } from '../core/atom-class';\nimport { Context } from '../core/context';\nimport { Span } from '../core/span';\nimport { Style } from '../public/core';\n\nexport class RuleAtom extends Atom {\n  private readonly shift?: number;\n  private readonly depth?: number;\n  private readonly height?: number;\n  private readonly width?: number;\n  constructor(\n    command: string,\n    options: {\n      shift?: number;\n      depth?: number;\n      height: number;\n      width: number;\n      style: Style;\n    }\n  ) {\n    super('rule', { command, style: options.style });\n    this.height = options.height;\n    this.width = options.width;\n    this.depth = options.depth ?? 0;\n    this.shift = options.shift ?? 0;\n  }\n\n  render(context: Context): Span {\n    const { mathstyle } = context;\n    let shift = Number.isFinite(this.shift) ? this.shift : 0;\n    shift /= mathstyle.sizeMultiplier;\n    const width = this.width / mathstyle.sizeMultiplier;\n    const height = this.height / mathstyle.sizeMultiplier;\n    const result = new Span(null, { classes: 'rule', type: 'mord' });\n    result.setStyle('border-right-width', width, 'em');\n    result.setStyle('border-top-width', height, 'em');\n    result.setStyle('margin-top', -(height - shift), 'em');\n    result.setStyle('border-color', context.color); // @revisit\n    result.width = width;\n    result.height = height + shift;\n    result.depth = -shift;\n    if (this.caret) result.caret = this.caret;\n    return result;\n  }\n\n  toLatex(options: ToLatexOptions): string {\n    let result = this.command;\n    if (this.shift) {\n      result += `[${Atom.toLatex(this.shift, options)}em]`;\n    }\n\n    result +=\n      `{${Atom.toLatex(this.width, options)}em}` +\n      `{${Atom.toLatex(this.height, options)}em}`;\n    return result;\n  }\n}\n","import { Argument, defineFunction } from './definitions-utils';\nimport { colorToString, stringToColor } from '../core/color';\nimport { Atom, BBoxParameter, ToLatexOptions } from '../core/atom-class';\nimport { FontShape, FontSeries, Style, FontSize } from '../public/core';\nimport { GroupAtom } from '../core-atoms/group';\nimport { BoxAtom } from '../core-atoms/box';\nimport { PhantomAtom, PhantomType } from '../core-atoms/phantom';\nimport { SizedDelimAtom } from '../core-atoms/delim';\nimport { SpacingAtom } from '../core-atoms/spacing';\nimport { LineAtom } from '../core-atoms/line';\nimport { OverunderAtom } from '../core-atoms/overunder';\nimport { OverlapAtom } from '../core-atoms/overlap';\nimport { GenfracAtom } from '../core-atoms/genfrac';\nimport { RuleAtom } from '../core-atoms/rule';\nimport { OperatorAtom } from '../core-atoms/operator';\nimport { MathStyleName } from '../core/mathstyle';\n\ndefineFunction('ensuremath', '{:math}', {\n  createAtom: (_name: string, args: Argument[], style: Style): Atom =>\n    new GroupAtom(args[0] as Atom[], {\n      mode: 'math',\n      latexOpen: '\\\\ensuremath{',\n      latexClose: '}',\n      style,\n    }),\n});\n\ndefineFunction('color', '{:color}', {\n  applyStyle: (_name, args): Style => {\n    return { color: args[0] as string };\n  },\n});\n\n// From the xcolor package.\n// Unlike what its name might suggest, this command does not set the mode to text\n// That is, it can equally be applied to math and text mode.\ndefineFunction('textcolor', '{:color}{content:auto*}', {\n  applyStyle: (_name, args): Style => {\n    return { color: args[0] as string };\n  },\n});\n\n// Can be preceded by e.g. '\\fboxsep=4pt' (also \\fboxrule)\n// Note:\n// - \\boxed: sets content in displaystyle mode (@todo: should change type of argument)\n//      equivalent to \\fbox{$$<content>$$}\n// - \\fbox: sets content in 'auto' mode (frequency 777)\n// - \\framebox[<width>][<alignment>]{<content>} (<alignment> := 'c'|'t'|'b' (center, top, bottom) (frequency 28)\n// @todo\ndefineFunction('boxed', '{content:math}', {\n  createAtom: (name: string, args: Argument[], style: Style): Atom =>\n    new BoxAtom(name, args[0] as Atom[], {\n      framecolor: 'black',\n      style,\n    }),\n});\n\n// In LaTeX, \\colorbox sets the mode to text\ndefineFunction('colorbox', '{background-color:string}{content:auto}', {\n  createAtom: (name: string, args: Argument[], style: Style): Atom =>\n    new BoxAtom(name, args[1] as Atom[], {\n      backgroundcolor: stringToColor(args[0] as string),\n      verbatimBackgroundcolor: args[0] as string, // Save this value to restore it verbatim later\n      style,\n      toLatexOverride: (atom: BoxAtom, options: ToLatexOptions) =>\n        `${atom.command}{${\n          atom.verbatimBackgroundcolor ?? colorToString(atom.backgroundcolor)\n        }}{${atom.bodyToLatex(options)}}`,\n    }),\n});\n\ndefineFunction(\n  'fcolorbox',\n  '{frame-color:string}{background-color:string}{content:auto}',\n  {\n    createAtom: (name: string, args: Argument[], style: Style): Atom =>\n      new BoxAtom(name, args[2] as Atom[], {\n        framecolor: stringToColor(args[0] as string),\n        backgroundcolor: stringToColor(args[1] as string),\n        verbatimBackgroundcolor: args[1] as string, // Save this value to restore it verbatim later\n        verbatimFramecolor: args[0] as string, // Save this value to restore it verbatim later\n        style,\n        toLatexOverride: (atom: BoxAtom, options: ToLatexOptions) =>\n          `${atom.command}{${\n            atom.verbatimFramecolor ?? colorToString(atom.framecolor)\n          }{${\n            atom.verbatimBackgroundcolor ?? colorToString(atom.backgroundcolor)\n          }}{${atom.bodyToLatex(options)}}`,\n      }),\n  }\n);\n\n// \\bbox, MathJax extension\n// The first argument is a CSS border property shorthand, e.g.\n// \\bbox[red], \\bbox[5px,border:2px solid red]\n// The MathJax syntax is\n// arglist ::= <arg>[,<arg>[,<arg>]]\n// arg ::= [<background:color>|<padding:dimen>|<style>]\n// style ::= 'border:' <string>\n\ndefineFunction('bbox', '[:bbox]{body:auto}', {\n  createAtom: (name: string, args: Argument[], style: Style): Atom => {\n    if (args[0]) {\n      const arg = args[0] as BBoxParameter;\n      return new BoxAtom(name, args[1] as Atom[], {\n        padding: arg.padding,\n        border: arg.border,\n        backgroundcolor: arg.backgroundcolor,\n        style,\n        toLatexOverride: (atom: BoxAtom, options: ToLatexOptions) => {\n          let result = name;\n          if (\n            Number.isFinite(atom.padding) ||\n            atom.border !== undefined ||\n            atom.backgroundcolor !== undefined\n          ) {\n            const bboxParameters = [];\n            if (Number.isFinite(atom.padding)) {\n              bboxParameters.push(`${Math.floor(1e2 * atom.padding) / 1e2}em`);\n            }\n\n            if (atom.border) {\n              bboxParameters.push(`border: ${atom.border}`);\n            }\n\n            if (atom.backgroundcolor) {\n              bboxParameters.push(colorToString(atom.backgroundcolor));\n            }\n\n            result += `[${bboxParameters.join(',')}]`;\n          }\n\n          return result + `{${atom.bodyToLatex(options)}}`;\n        },\n      });\n    }\n\n    return new BoxAtom(name, args[1] as Atom[], { style });\n  },\n});\n\ndefineFunction(\n  ['displaystyle', 'textstyle', 'scriptstyle', 'scriptscriptstyle'],\n  '{:rest}',\n  {\n    createAtom: (name: string, args: Argument[], style: Style): Atom =>\n      new GroupAtom(args[0] as Atom[], {\n        latexOpen: `${name} `,\n        latexClose: '',\n        style,\n        mathStyleName: name.slice(1) as MathStyleName,\n      }),\n  }\n);\n\n// Size\ndefineFunction(\n  [\n    'tiny',\n    'scriptsize',\n    'footnotesize',\n    'small',\n    'normalsize',\n    'large',\n    'Large',\n    'LARGE',\n    'huge',\n    'Huge',\n  ],\n  '',\n  {\n    // TeX behaves very inconsistently when sizing commands are applied\n    // to math mode. We allow sizing commands to be applied in both math and\n    // text mode\n    applyStyle: (name, _args): Style => {\n      return {\n        fontSize: {\n          '\\\\tiny': 'size1',\n          '\\\\scriptsize': 'size2',\n          '\\\\footnotesize': 'size3',\n          '\\\\small': 'size4',\n          '\\\\normalsize': 'size5',\n          '\\\\large': 'size6',\n          '\\\\Large': 'size7',\n          '\\\\LARGE': 'size8',\n          '\\\\huge': 'size9',\n          '\\\\Huge': 'size10',\n        }[name] as FontSize,\n      };\n    },\n  }\n);\n\n// \\fontseries only works in text mode\ndefineFunction('fontseries', '{:string}', {\n  ifMode: 'text',\n  applyStyle: (_name, args): Style => {\n    return { fontSeries: (args[0] as string) as FontSeries };\n  },\n});\n// SHAPE: italic, small caps\ndefineFunction('fontshape', '{:string}', {\n  ifMode: 'text',\n  applyStyle: (_name, args): Style => {\n    return { fontShape: args[0] as FontShape };\n  },\n});\n\n// FONT FAMILY: Fraktur, Calligraphic, ...\ndefineFunction('fontfamily', '{:string}', {\n  ifMode: 'text',\n  applyStyle: (_name, args): Style => {\n    return { fontFamily: args[0] as string };\n  },\n});\n\n// In LaTeX, the \\fontseries, \\fontshape, \\fontfamily, \\fontsize commands\n// do not take effect until \\selectfont is encoded. In our implementation,\n// they take effect immediately, and \\selectfont is a no-op\ndefineFunction('selectfont', '', {\n  ifMode: 'text',\n  applyStyle: (_name, _args): Style => {\n    return {};\n  },\n});\n\n// \\bf works in any mode\n// As per the LaTeX 2.09 semantics, it overrides shape, family\ndefineFunction('bf', '', {\n  applyStyle: (_name, _args): Style => {\n    return { fontSeries: 'b', fontShape: 'n', fontFamily: 'cmr' };\n  },\n});\n\n// Note: These function work a little bit differently than LaTex\n// In LaTeX, \\bm{x\\mathrm{y}} yield a bold x and an upright y.\n// This is not necesarily intentional, but a side effect of the (current)\n// implementation of \\bm\ndefineFunction(['boldsymbol', 'bm'], '{:math*}', {\n  applyMode: 'math',\n  createAtom: (name: string, args: Argument[], style: Style): Atom =>\n    new GroupAtom(args[0] as Atom[], {\n      latexOpen: `${name}{`,\n      latexClose: '}',\n      style,\n      customClass: 'ML__boldsymbol',\n    }),\n});\n\n// Note: switches to math mode\ndefineFunction('bold', '{:math*}', {\n  applyMode: 'math',\n  applyStyle: (_name, _args): Style => {\n    return { variantStyle: 'bold' };\n  },\n});\n\ndefineFunction('bfseries', '', {\n  applyMode: 'text',\n  applyStyle: (_name, _args): Style => {\n    return { fontSeries: 'b' };\n  },\n});\ndefineFunction('mdseries', '', {\n  applyMode: 'text',\n  applyStyle: (_name, _args): Style => {\n    return { fontSeries: 'm' };\n  },\n});\ndefineFunction('upshape', '', {\n  applyMode: 'text',\n  applyStyle: (_name, _args): Style => {\n    return { fontShape: 'n' };\n  },\n});\ndefineFunction('slshape', '', {\n  applyMode: 'text',\n  applyStyle: (_name, _args): Style => {\n    return { fontShape: 'sl' };\n  },\n});\n// Small caps\ndefineFunction('scshape', '', {\n  applyMode: 'text',\n  applyStyle: (_name, _args): Style => {\n    return { fontShape: 'sc' };\n  },\n});\n\ndefineFunction('textbf', '{:text*}', {\n  applyMode: 'text',\n  applyStyle: (_name, _args): Style => {\n    return { fontSeries: 'b' };\n  },\n});\ndefineFunction('textmd', '{:text*}', {\n  applyMode: 'text',\n  applyStyle: (_name, _args): Style => {\n    return { fontSeries: 'm' };\n  },\n});\n\ndefineFunction('textup', '{:text*}', {\n  applyMode: 'text',\n  applyStyle: (_name, _args): Style => {\n    return { fontShape: 'n' };\n  },\n});\n\n// @todo: family could be 'none' or 'default'\n// \"normal\" font of the body text, not necessarily roman\ndefineFunction('textnormal', '{:text*}', {\n  applyMode: 'text',\n  applyStyle: (_name, _args): Style => {\n    return { fontShape: 'n', fontSeries: 'm' };\n  },\n});\n\ndefineFunction('textsl', '{:text*}', {\n  applyMode: 'text',\n  applyStyle: (_name, _args): Style => {\n    return { fontShape: 'sl' };\n  },\n});\n\ndefineFunction('textit', '{:text*}', {\n  applyMode: 'text',\n  applyStyle: (_name, _args): Style => {\n    return { fontShape: 'it' };\n  },\n});\n\ndefineFunction('textsc', '{:text*}', {\n  applyMode: 'text',\n  applyStyle: (_name, _args): Style => {\n    return { fontShape: 'sc' };\n  },\n});\ndefineFunction('textrm', '{:text*}', {\n  applyMode: 'text',\n  applyStyle: (_name, _args): Style => {\n    return { fontFamily: 'roman' };\n  },\n});\n\ndefineFunction('textsf', '{:text*}', {\n  applyMode: 'text',\n  applyStyle: (_name, _args): Style => {\n    return { fontFamily: 'sans-serif' };\n  },\n});\n\ndefineFunction('texttt', '{:text*}', {\n  applyMode: 'text',\n  applyStyle: (_name, _args): Style => {\n    return { fontFamily: 'monospace' };\n  },\n});\n\n// Note: \\mathbf is a no-op in text mode\ndefineFunction('mathbf', '{:math*}', {\n  applyMode: 'math',\n  applyStyle: (_name, _args): Style => {\n    return { variant: 'normal', variantStyle: 'bold' };\n  },\n});\n\ndefineFunction('mathit', '{:math*}', {\n  applyMode: 'math',\n  applyStyle: (_name, _args): Style => {\n    return { variant: 'normal', variantStyle: 'italic' };\n  },\n});\n\n// From the ISOMath package\ndefineFunction('mathbfit', '{:math*}', {\n  applyMode: 'math',\n  applyStyle: (_name, _args): Style => {\n    return { variant: 'normal', variantStyle: 'bolditalic' };\n  },\n});\n\ndefineFunction('mathrm', '{:math*}', {\n  applyMode: 'math',\n  applyStyle: (_name, _args): Style => {\n    return { variant: 'normal', variantStyle: 'up' };\n  },\n});\n\ndefineFunction('mathsf', '{:math*}', {\n  applyMode: 'math',\n  applyStyle: (_name, _args): Style => {\n    return { variant: 'sans-serif', variantStyle: 'up' };\n  },\n});\ndefineFunction('mathtt', '{:math*}', {\n  applyMode: 'math',\n  applyStyle: (_name, _args): Style => {\n    return { variant: 'monospace', variantStyle: 'up' };\n  },\n});\n\ndefineFunction('it', '', {\n  applyStyle: (_name, _args): Style => {\n    return {\n      fontSeries: 'm',\n      fontShape: 'it',\n      fontFamily: 'cmr',\n      variantStyle: 'italic', // For math mode\n    };\n  },\n});\n\n// In LaTeX, \\rmfamily, \\sffamily and \\ttfamily are no-op in math mode.\ndefineFunction('rmfamily', '', {\n  applyStyle: (_name, _args): Style => {\n    return { fontFamily: 'roman' };\n  },\n});\n\ndefineFunction('sffamily', '', {\n  applyStyle: (_name, _args): Style => {\n    return { fontFamily: 'sans-serif' };\n  },\n});\n\ndefineFunction('ttfamily', '', {\n  applyStyle: (_name, _args): Style => {\n    return { fontFamily: 'monospace' };\n  },\n});\n\n// In LaTeX, \\Bbb and \\mathbb are no-op in text mode.\n// They also map lowercase characters to different glyphs.\n// Note that \\Bbb has been deprecated for over 20 years (as well as \\rm, \\it, \\bf)\ndefineFunction(['Bbb', 'mathbb'], '{:math*}', {\n  applyStyle: (_name, _args): Style => {\n    return { variant: 'double-struck', variantStyle: 'up' };\n  },\n});\n\ndefineFunction(['frak', 'mathfrak'], '{:math*}', {\n  applyStyle: (_name, _args) => {\n    return { variant: 'fraktur', variantStyle: 'up' };\n  },\n});\n\ndefineFunction('mathcal', '{:math*}', {\n  applyStyle: (_name, _args) => {\n    return { variant: 'calligraphic', variantStyle: 'up' };\n  },\n});\n\ndefineFunction('mathscr', '{:math*}', {\n  applyStyle: (_name, _args): Style => {\n    return { variant: 'script', variantStyle: 'up' };\n  },\n});\n\n/*\n * Rough synomym for \\text{}\n * An \\mbox within math mode does not use the current math font; rather it uses\n * the typeface of the surrounding running text.\n */\ndefineFunction('mbox', '{:text}', {\n  ifMode: 'math',\n  createAtom: (_name: string, args: Argument[], style: Style): Atom =>\n    new GroupAtom(args[0] as Atom[], {\n      changeMode: true,\n      style,\n      mode: 'text',\n      toLatexOverride: (atom: GroupAtom, options: ToLatexOptions) =>\n        `\\\\mbox{${atom.bodyToLatex({\n          ...options,\n          skipModeCommand: true,\n        })}}`,\n    }),\n});\n\ndefineFunction('text', '{:text}', {\n  ifMode: 'math',\n  applyMode: 'text',\n});\n\n/* A MathJax extension: assign a class to the element */\ndefineFunction('class', '{name:string}{content:auto*}', {\n  createAtom: (_command: string, args: Argument[], style: Style): Atom =>\n    new GroupAtom(args[1] as Atom[], {\n      customClass: args[0] as string,\n      style,\n    }),\n});\n\n/* A MathJax extension: assign an ID to the element */\ndefineFunction('cssId', '{id:string}{content:auto}', {\n  createAtom: (command: string, args: Argument[], style: Style): Atom =>\n    new GroupAtom(args[1] as Atom[], {\n      cssId: args[0] as string,\n      style,\n    }),\n});\n\n/*  assign an property to the element */\ndefineFunction('htmlData', '{data:string}{content:auto}', {\n  createAtom: (command: string, args: Argument[], style: Style): Atom =>\n    new GroupAtom(args[1] as Atom[], {\n      htmlData: args[0] as string,\n      style,\n    }),\n});\n\n/* Note: in TeX, \\em is restricted to text mode. We extend it to math\n * This is the 'switch' variant of \\emph, i.e:\n * `\\emph{important text}`\n * `{\\em important text}`\n */\ndefineFunction('em', '{:auto*}', {\n  createAtom: (command: string, args: Argument[], style: Style): Atom =>\n    new GroupAtom(args[0] as Atom[], {\n      latexOpen: '\\\\em',\n      latexClose: '',\n      customClass: 'ML__emph',\n      style,\n    }),\n});\n\n/* Note: in TeX, \\emph is restricted to text mode. We extend it to math */\ndefineFunction('emph', '{:auto}', {\n  createAtom: (command: string, args: Argument[], style: Style): Atom =>\n    new GroupAtom(args[0] as Atom[], {\n      latexOpen: '\\\\emph{',\n      latexClose: '}',\n      customClass: 'ML__emph',\n      style,\n    }),\n});\n\n// Extra data needed for the delimiter parse function down below\nconst DELIMITER_SIZES = {\n  '\\\\bigl': { mclass: 'mopen', size: 1 },\n  '\\\\Bigl': { mclass: 'mopen', size: 2 },\n  '\\\\biggl': { mclass: 'mopen', size: 3 },\n  '\\\\Biggl': { mclass: 'mopen', size: 4 },\n  '\\\\bigr': { mclass: 'mclose', size: 1 },\n  '\\\\Bigr': { mclass: 'mclose', size: 2 },\n  '\\\\biggr': { mclass: 'mclose', size: 3 },\n  '\\\\Biggr': { mclass: 'mclose', size: 4 },\n  '\\\\bigm': { mclass: 'mrel', size: 1 },\n  '\\\\Bigm': { mclass: 'mrel', size: 2 },\n  '\\\\biggm': { mclass: 'mrel', size: 3 },\n  '\\\\Biggm': { mclass: 'mrel', size: 4 },\n  '\\\\big': { mclass: 'mord', size: 1 },\n  '\\\\Big': { mclass: 'mord', size: 2 },\n  '\\\\bigg': { mclass: 'mord', size: 3 },\n  '\\\\Bigg': { mclass: 'mord', size: 4 },\n};\n\ndefineFunction(\n  [\n    'bigl',\n    'Bigl',\n    'biggl',\n    'Biggl',\n    'bigr',\n    'Bigr',\n    'biggr',\n    'Biggr',\n    'bigm',\n    'Bigm',\n    'biggm',\n    'Biggm',\n    'big',\n    'Big',\n    'bigg',\n    'Bigg',\n  ],\n  '{:delim}',\n  {\n    createAtom: (name: string, args: Argument[], style: Style): Atom =>\n      new SizedDelimAtom(name, args[0] as string, {\n        size: DELIMITER_SIZES[name].size,\n        delimClass: DELIMITER_SIZES[name].mclass,\n        style,\n      }),\n  }\n);\n\ndefineFunction(\n  [\n    'hspace',\n    'hspace*',\n    // \\hspace* inserts a non-breakable space, but since we don't line break...\n    // it's the same as \\hspace.\n  ],\n  '{width:skip}',\n  {\n    createAtom: (name: string, args: Argument[], style: Style): Atom =>\n      new SpacingAtom(name, style, (args[0] as number) ?? 0),\n  }\n);\n\ndefineFunction('mathop', '{:auto}', {\n  createAtom: (command: string, args: Argument[], style: Style): Atom =>\n    new OperatorAtom(command, args[0] as Atom[], {\n      type: 'mop',\n      captureSelection: true,\n      limits: 'over-under',\n      isFunction: true,\n      style,\n    }),\n});\n\ndefineFunction(\n  [\n    'mathbin',\n    'mathrel',\n    'mathopen',\n    'mathclose',\n    'mathpunct',\n    'mathord',\n    'mathinner',\n  ],\n  '{:auto}',\n  {\n    createAtom: (command: string, args: Argument[], style: Style): Atom =>\n      new OperatorAtom(command, args[0] as Atom[], {\n        type: ({\n          '\\\\mathbin': 'mbin',\n          '\\\\mathrel': 'mrel',\n          '\\\\mathopen': 'mopen',\n          '\\\\mathclose': 'mclose',\n          '\\\\mathpunct': 'mpunct',\n          '\\\\mathord': 'mord',\n          '\\\\mathinner': 'minner',\n        } as const)[command],\n        captureSelection: true,\n        style,\n      }),\n  }\n);\n\n// @todo see http://mirrors.ibiblio.org/CTAN/macros/latex/required/amsmath/amsopn.pdf\n// for list of additional operators\n\ndefineFunction(['operatorname', 'operatorname*'], '{operator:math}', {\n  createAtom: (name: string, args: Argument[], style: Style): Atom => {\n    const result = new OperatorAtom(name, args[0] as Atom[], {\n      isFunction: true,\n      limits: name === '\\\\operatorname' ? 'adjacent' : 'over-under',\n      style,\n    });\n    result.captureSelection = true; // Do not let children be selected\n\n    /*\n        The \\operatorname commands is defined with:\n\n        \\gdef\\newmcodes@{\\mathcode`\\'39\\mathcode`\\*42\\mathcode`\\.\"613A%\n        \\ifnum\\mathcode`\\-=45 \\else\n            \\mathchardef\\std@minus\\mathcode`\\-\\relax\n        \\fi\n        \\mathcode`\\-45\\mathcode`\\/47\\mathcode`\\:\"603A\\relax}\n\n\n        \\mathcode assigns to a character its category (2=mbin), its font family (0=cmr),\n        and its character code.\n\n        It basically temporarily reassigns to \":.'-/*\" the values/properties\n        these characters have in text mode (but importantly, not to \" \" (space))\n\n        */\n\n    result.body.forEach((x) => {\n      if (x.type !== 'first') {\n        x.type = 'mord';\n        x.value = { '\\u2217': '*', '\\u2212': '-' }[x.value] ?? x.value;\n        x.isFunction = false;\n        if (!x.style.variant && !x.style.variantStyle) {\n          // No variant as been specified (as it could have been with\n          // \\operatorname{\\mathit{lim}} for example)\n          // Bypass the default auto styling by specifing an upright style\n          x.style.variant = 'main';\n          x.style.variantStyle = 'up';\n        }\n      }\n    });\n\n    return result;\n  },\n});\n\nclass UnicodeAtom extends Atom {\n  codepoint: number;\n  constructor(arg: string, style: Style) {\n    let codepoint = Number.parseInt(arg);\n    if (!Number.isFinite(codepoint)) codepoint = 0x2753; // BLACK QUESTION MARK\n    super('mord', {\n      value: String.fromCodePoint(codepoint),\n      style,\n    });\n    this.codepoint = codepoint;\n  }\n\n  toLatex(_options: ToLatexOptions): string {\n    return (\n      '\\\\unicode\"' +\n      ('000000' + this.codepoint.toString(16)).toUpperCase().slice(-6)\n    );\n  }\n}\n\ndefineFunction('unicode', '{charcode:number}', {\n  createAtom: (name: string, args: Argument[], style: Style): Atom =>\n    new UnicodeAtom(args[0] as string, style),\n});\n\n// A box of the width and height\ndefineFunction('rule', '[raise:dimen]{width:dimen}{thickness:dimen}', {\n  createAtom: (name: string, args: Argument[], style: Style): Atom =>\n    new RuleAtom(name, {\n      shift: args[0] as number,\n      width: args[1] as number,\n      height: args[2] as number,\n      style,\n    }),\n});\n\n// An overline\ndefineFunction('overline', '{:auto}', {\n  createAtom: (name: string, args: Argument[], style: Style): Atom =>\n    new LineAtom(name, args[0] as Atom[], {\n      position: 'overline',\n      style,\n    }),\n});\n\ndefineFunction('underline', '{:auto}', {\n  createAtom: (name: string, args: Argument[], style: Style): Atom =>\n    new LineAtom(name, args[0] as Atom[], {\n      position: 'underline',\n      style,\n    }),\n});\n\ndefineFunction('overset', '{annotation:auto}{symbol:auto}', {\n  createAtom: (name: string, args: Argument[], style: Style): Atom =>\n    new OverunderAtom(name, {\n      body: args[1] as Atom[],\n      above: args[0] as Atom[],\n      skipBoundary: false,\n      style,\n      toLatexOverride: (atom: OverunderAtom, options: ToLatexOptions) =>\n        `${atom.command}{${atom.aboveToLatex(options)}}` +\n        `{${atom.bodyToLatex(options)}}`,\n    }),\n});\n\ndefineFunction('underset', '{annotation:auto}{symbol:auto}', {\n  createAtom: (name: string, args: Argument[], style: Style): Atom =>\n    new OverunderAtom(name, {\n      body: args[1] as Atom[],\n      below: args[0] as Atom[],\n      skipBoundary: false,\n      style,\n      toLatexOverride: (atom: OverunderAtom, options: ToLatexOptions) =>\n        `${name}{${atom.belowToLatex(options)}}` +\n        `{${atom.bodyToLatex(options)}}`,\n    }),\n});\n\ndefineFunction(['stackrel', 'stackbin'], '{annotation:auto}{symbol:auto}', {\n  createAtom: (name: string, args: Argument[], style: Style): Atom =>\n    // Set the correct spacing rule for \\stackrel\n    // @revisit: this is not actually used...?\n    // mathtype: name === '\\\\stackrel' ? 'mrel' : 'mbin',\n    new OverunderAtom(name, {\n      body: args[1] as Atom[],\n      above: args[0] as Atom[],\n      skipBoundary: false,\n      style,\n      toLatexOverride: (atom: OverunderAtom, options: ToLatexOptions) =>\n        `${atom.command}{${atom.aboveToLatex(options)}}` +\n        `{${atom.bodyToLatex(options)}}`,\n    }),\n});\n\ndefineFunction(\n  ['overwithdelims', 'atopwithdelims'],\n  '{numer:auto}{denom:auto}{left-delim:delim}{right-delim:delim}',\n  {\n    infix: true,\n    createAtom: (name: string, args: Argument[], style: Style): Atom =>\n      new GenfracAtom(name, args[0] as Atom[], args[1] as Atom[], {\n        leftDelim: args[2] as string,\n        rightDelim: args[3] as string,\n        style,\n        toLatexOverride: (atom: GenfracAtom, options: ToLatexOptions) =>\n          `${atom.aboveToLatex(options)} ${atom.command}${atom.leftDelim}${\n            atom.rightDelim\n          }${atom.belowToLatex(options)}`,\n      }),\n  }\n);\n\ndefineFunction('smash', '[:string]{:auto}', {\n  createAtom: (name: string, args: Argument[], style: Style): Atom => {\n    let phantomType: PhantomType = 'smash';\n    if (args[0] === 'b') {\n      phantomType = 'bsmash';\n    } else if (args[0] === 't') {\n      phantomType = 'tsmash';\n    }\n\n    return new PhantomAtom(name, args[1] as Atom[], { phantomType, style });\n  },\n});\n\ndefineFunction(['phantom', 'vphantom', 'hphantom'], '{:auto*}', {\n  createAtom: (name: string, args: Argument[], style: Style): Atom =>\n    new PhantomAtom(name, args[1] as Atom[], {\n      isInvisible: true,\n      phantomType: name.slice(1) as PhantomType,\n      style,\n    }),\n});\n\ndefineFunction('not', '{:math}', {\n  createAtom: (name: string, args: Argument[], style: Style): Atom => {\n    if (args.length < 1 || args[0] === null) {\n      return new Atom('mrel', { command: name, style, value: '\\ue020' });\n    }\n    const arg = args[0] as Atom[];\n    return new GroupAtom(\n      [\n        new OverlapAtom(name, '\\ue020', {\n          align: 'right',\n          style,\n          spanType: 'mrel',\n        }),\n        ...arg,\n      ],\n      {\n        spanType: 'mrel',\n        captureSelection: true,\n        toLatexOverride: (atom: GroupAtom, options) => {\n          const argLatex = Atom.toLatex(arg, options);\n          if (argLatex.length === 1 && !/[a-zA-Z]/.test(argLatex)) {\n            return '\\\\not' + argLatex;\n          }\n          return `\\\\not{${argLatex}}`;\n        },\n      }\n    );\n  },\n});\n\ndefineFunction(['ne', 'neq'], '', {\n  createAtom: (name: string, _args: Argument[], style: Style): Atom =>\n    new GroupAtom(\n      [\n        new OverlapAtom(name, '\\ue020', {\n          align: 'right',\n          style,\n          spanType: 'mrel',\n        }),\n        new Atom('mrel', { style, value: '=' }),\n      ],\n      { spanType: 'mrel', captureSelection: true, toLatexOverride: () => name }\n    ),\n});\n\ndefineFunction('rlap', '{:auto}', {\n  createAtom: (name: string, args: Argument[], style: Style): Atom =>\n    new OverlapAtom(name, args[0] as Atom[], { align: 'right', style }),\n});\n\ndefineFunction('llap', '{:auto}', {\n  createAtom: (name: string, args: Argument[], style: Style): Atom =>\n    new OverlapAtom(name, args[0] as Atom[], { style }),\n});\n\ndefineFunction('mathllap', '{:auto}', {\n  createAtom: (name: string, args: Argument[], style: Style): Atom =>\n    new OverlapAtom(name, args[0] as Atom[], { style }),\n});\n\ndefineFunction('mathrlap', '{:auto}', {\n  createAtom: (name: string, args: Argument[], style: Style): Atom =>\n    new OverlapAtom(name, args[0] as Atom[], { align: 'right', style }),\n});\n","import { SpacingAtom } from '../core-atoms/spacing';\nimport { Atom } from '../core/atom';\nimport { Style } from '../public/core';\nimport {\n  defineSymbol,\n  defineSymbols,\n  defineSymbolRange,\n  defineFunction,\n} from './definitions-utils';\n\n// Simple characters allowed in math mode\ndefineSymbols('0123456789/@.?!');\ndefineSymbolRange(0x0041, 0x005a); // A-z\ndefineSymbolRange(0x0061, 0x007a); // A-Z\n\n// Quantifiers\n\ndefineSymbol('\\\\forall', '\\u2200');\ndefineSymbol('\\\\exists', '\\u2203');\ndefineSymbol('\\\\nexists', '\\u2204', 'mord', 'ams');\ndefineSymbol('\\\\mid', '\\u2223', 'mrel');\ndefineSymbol('\\\\top', '\\u22A4');\ndefineSymbol('\\\\bot', '\\u22A5');\n\n// Misc Symbols\n\ndefineSymbol('\\\\sharp', '\\u266F');\ndefineSymbol('\\\\flat', '\\u266D');\ndefineSymbol('\\\\natural', '\\u266E');\ndefineSymbol('\\\\#', '\\u0023');\ndefineSymbol('\\\\&', '\\u0026');\ndefineSymbol('\\\\clubsuit', '\\u2663');\ndefineSymbol('\\\\heartsuit', '\\u2661');\ndefineSymbol('\\\\spadesuit', '\\u2660');\ndefineSymbol('\\\\diamondsuit', '\\u2662');\n\n// DefineSymbol( '\\\\cross', '\\uF4A0',  'mord',  MAIN); // NOTE: not a real TeX symbol, but Mathematica\n// defineSymbol( '\\\\transpose', '\\uF3C7',  'mord',  MAIN); // NOTE: not a real TeX symbol, but Mathematica\n// defineSymbol( '\\\\conjugate', 'conj'],  MAIN,  'mord', '\\uF3C8'); // NOTE: not a real TeX symbol, but Mathematica\n// defineSymbol( '\\\\conjugatetranspose', '\\uF3C9',  'mord',  MAIN); // NOTE: not a real TeX symbol, but Mathematica\n// defineSymbol( '\\\\hermitianconjugate', '\\uF3CE',  'mord',  MAIN); // NOTE: not a real TeX symbol, but Mathematica\ndefineSymbol('\\\\differencedelta', '\\u2206', 'mrel');\n\ndefineSymbol('\\\\backslash', '\\\\');\n\ndefineSymbol('\\\\nabla', '\\u2207');\ndefineSymbol('\\\\partial', '\\u2202');\n\ndefineSymbol('\\\\ell', '\\u2113');\n\ndefineSymbol('\\\\hbar', '\\u210F');\ndefineSymbol('\\\\hslash', '\\u210F', 'mord', 'ams');\n\ndefineSymbol('\\\\Finv', '\\u2132', 'mord', 'ams');\ndefineSymbol('\\\\Game', '\\u2141', 'mord', 'ams');\n\ndefineSymbol('\\\\wp', '\\u2118');\ndefineSymbol('\\\\eth', '\\u00F0', 'mord', 'ams');\n\ndefineSymbol('\\\\mho', '\\u2127', 'mord', 'ams');\n\ndefineSymbol('\\\\Bbbk', '\\u006B', 'mord', 'ams');\ndefineSymbol('\\\\N', 'N', 'mord', 'double-struck'); // NOTE: Check if standard Latex\ndefineSymbol('\\\\R', 'R', 'mord', 'double-struck'); // NOTE: Check if standard Latex\ndefineSymbol('\\\\Q', 'Q', 'mord', 'double-struck'); // NOTE: Check if standard Latex\ndefineSymbol('\\\\C', 'C', 'mord', 'double-struck'); // NOTE: Check if standard Latex\ndefineSymbol('\\\\Z', 'Z', 'mord', 'double-struck'); // NOTE: Check if standard Latex\ndefineSymbol('\\\\P', 'P', 'mord', 'double-struck'); // NOTE: Check if standard Latex\n\ndefineSymbol('\\\\pounds', '\\u00A3');\ndefineSymbol('\\\\yen', '\\u00A5', 'mord', 'ams');\ndefineSymbol('\\\\euro', '\\u20AC'); // NOTE: not TeX built-in, but textcomp package\n\n// TODO Koppa, Stigma, Sampi\n\n// Math and Text\n\ndefineSymbol('\\\\dagger', '\\u2020', 'mbin');\ndefineSymbol('\\\\dag', '\\u2020', 'mbin');\ndefineSymbol('\\\\ddag', '\\u2021', 'mbin');\ndefineSymbol('\\\\ddagger', '\\u2021', 'mbin');\ndefineSymbol('\\\\maltese', '\\u2720', 'mord', 'ams');\n\n// Arrow Symbols\n\ndefineSymbol('\\\\rightarrow', '\\u2192', 'mrel');\ndefineSymbol('\\\\to', '\\u2192', 'mrel');\ndefineSymbol('\\\\leftarrow', '\\u2190', 'mrel');\ndefineSymbol('\\\\gets', '\\u2190', 'mrel');\ndefineSymbol('\\\\Rightarrow', '\\u21D2', 'mrel');\ndefineSymbol('\\\\Leftarrow', '\\u21D0', 'mrel');\ndefineSymbol('\\\\longrightarrow', '\\u27F6', 'mrel');\ndefineSymbol('\\\\longleftarrow', '\\u27F5', 'mrel');\ndefineSymbol('\\\\Longrightarrow', '\\u27F9', 'mrel');\ndefineSymbol('\\\\implies', '\\u27F9', 'mrel');\ndefineSymbol('\\\\Longleftarrow', '\\u27F8', 'mrel');\ndefineSymbol('\\\\impliedby', '\\u27F8', 'mrel');\ndefineSymbol('\\\\dashrightarrow', '\\u21E2', 'mrel', 'ams');\ndefineSymbol('\\\\dashleftarrow', '\\u21E0', 'mrel', 'ams');\ndefineSymbol('\\\\Rrightarrow', '\\u21DB', 'mrel', 'ams');\ndefineSymbol('\\\\Lleftarrow', '\\u21DA', 'mrel', 'ams');\n\ndefineSymbol('\\\\longleftrightarrow', '\\u27F7', 'mrel');\ndefineSymbol('\\\\biconditional', '\\u27F7', 'mrel');\ndefineSymbol('\\\\Longleftrightarrow', '\\u27FA', 'mrel');\n\ndefineSymbol('\\\\leftrightarrows', '\\u21C6', 'mrel', 'ams');\ndefineSymbol('\\\\rightleftarrows', '\\u21C4', 'mrel', 'ams');\n\ndefineSymbol('\\\\mapsto', '\\u21A6', 'mrel');\ndefineSymbol('\\\\longmapsto', '\\u27FC', 'mrel');\n\ndefineSymbol('\\\\uparrow', '\\u2191', 'mrel');\ndefineSymbol('\\\\downarrow', '\\u2193', 'mrel');\ndefineSymbol('\\\\Uparrow', '\\u21D1', 'mrel');\ndefineSymbol('\\\\Downarrow', '\\u21D3', 'mrel');\ndefineSymbol('\\\\updownarrow', '\\u2195', 'mrel');\ndefineSymbol('\\\\Updownarrow', '\\u21D5', 'mrel');\n\ndefineSymbol('\\\\curvearrowright', '\\u21B7', 'mrel', 'ams');\ndefineSymbol('\\\\curvearrowleft', '\\u21B6', 'mrel', 'ams');\n\ndefineSymbol('\\\\hookrightarrow', '\\u21AA', 'mrel');\ndefineSymbol('\\\\hookleftarrow', '\\u21A9', 'mrel');\n\ndefineSymbol('\\\\rightharpoonup', '\\u21C0', 'mrel');\ndefineSymbol('\\\\leftharpoonup', '\\u21BC', 'mrel');\ndefineSymbol('\\\\rightharpoondown', '\\u21C1', 'mrel');\ndefineSymbol('\\\\leftharpoondown', '\\u21BD', 'mrel');\n\ndefineSymbol('\\\\rightrightarrows', '\\u21C9', 'mrel', 'ams');\ndefineSymbol('\\\\leftleftarrows', '\\u21C7', 'mrel', 'ams');\ndefineSymbol('\\\\upuparrows', '\\u21C8', 'mrel', 'ams');\ndefineSymbol('\\\\downdownarrows', '\\u21CA', 'mrel', 'ams');\n\ndefineSymbol('\\\\leftarrowtail', '\\u21A2', 'mrel', 'ams');\ndefineSymbol('\\\\rightarrowtail', '\\u21A3', 'mrel', 'ams');\n\ndefineSymbol('\\\\looparrowright', '\\u21AC', 'mrel', 'ams');\ndefineSymbol('\\\\looparrowleft', '\\u21AB', 'mrel', 'ams');\n\ndefineSymbol('\\\\twoheadleftarrow', '\\u219E', 'mrel', 'ams');\ndefineSymbol('\\\\twoheadrightarrow', '\\u21A0', 'mrel', 'ams');\n\ndefineSymbol('\\\\rightleftharpoons', '\\u21CC', 'mrel');\ndefineSymbol('\\\\leftrightharpoons', '\\u21CB', 'mrel', 'ams');\n\ndefineSymbol('\\\\Rsh', '\\u21B1', 'mrel', 'ams');\ndefineSymbol('\\\\Lsh', '\\u21B0', 'mrel', 'ams');\n\ndefineSymbol('\\\\searrow', '\\u2198', 'mrel');\ndefineSymbol('\\\\nearrow', '\\u2197', 'mrel');\ndefineSymbol('\\\\swarrow', '\\u2199', 'mrel');\ndefineSymbol('\\\\nwarrow', '\\u2196', 'mrel');\n\ndefineSymbol('\\\\circlearrowright', '\\u21BB', 'mrel', 'ams');\ndefineSymbol('\\\\circlearrowleft', '\\u21BA', 'mrel', 'ams');\n\ndefineSymbol('\\\\restriction', '\\u21BE', 'mrel', 'ams');\ndefineSymbol('\\\\upharpoonright', '\\u21BE', 'mrel', 'ams');\ndefineSymbol('\\\\upharpoonleft', '\\u21BF', 'mrel', 'ams');\ndefineSymbol('\\\\downharpoonright', '\\u21C2', 'mrel', 'ams');\ndefineSymbol('\\\\downharpoonleft', '\\u21C3', 'mrel', 'ams');\n\ndefineSymbol('\\\\rightsquigarrow', '\\u21DD', 'mrel', 'ams');\ndefineSymbol('\\\\leadsto', '\\u21DD', 'mrel', 'ams');\ndefineSymbol('\\\\leftrightsquigarrow', '\\u21AD', 'mrel', 'ams');\n\ndefineSymbol('\\\\originalof', '\\u22B6', 'mrel');\ndefineSymbol('\\\\laplace', '\\u22B6', 'mrel');\ndefineSymbol('\\\\imageof', '\\u22B7', 'mrel');\ndefineSymbol('\\\\Laplace', '\\u22B7', 'mrel');\ndefineSymbol('\\\\multimap', '\\u22B8', 'mrel', 'ams');\n\n// 'ams' Negated Arrows\n\ndefineSymbol('\\\\nrightarrow', '\\u219B', 'mrel', 'ams');\ndefineSymbol('\\\\nleftarrow', '\\u219A', 'mrel', 'ams');\ndefineSymbol('\\\\nRightarrow', '\\u21CF', 'mrel', 'ams');\ndefineSymbol('\\\\nLeftarrow', '\\u21CD', 'mrel', 'ams');\ndefineSymbol('\\\\nleftrightarrow', '\\u21AE', 'mrel', 'ams');\ndefineSymbol('\\\\nLeftrightarrow', '\\u21CE', 'mrel', 'ams');\n\n// 'ams' Negated Binary Relations\n\ndefineSymbol('\\\\nless', '\\u226E', 'mrel', 'ams');\ndefineSymbol('\\\\nleqslant', '\\uE010', 'mrel', 'ams');\ndefineSymbol('\\\\lneq', '\\u2A87', 'mrel', 'ams');\ndefineSymbol('\\\\lneqq', '\\u2268', 'mrel', 'ams');\ndefineSymbol('\\\\nleqq', '\\uE011', 'mrel', 'ams');\n\ndefineSymbol('\\\\unlhd', '\\u22B4', 'mbin', 'ams');\ndefineSymbol('\\\\unrhd', '\\u22B5', 'mbin', 'ams');\n\ndefineSymbol('\\\\lvertneqq', '\\uE00C', 'mrel', 'ams');\ndefineSymbol('\\\\lnsim', '\\u22E6', 'mrel', 'ams');\ndefineSymbol('\\\\lnapprox', '\\u2A89', 'mrel', 'ams');\ndefineSymbol('\\\\nprec', '\\u2280', 'mrel', 'ams');\ndefineSymbol('\\\\npreceq', '\\u22E0', 'mrel', 'ams');\ndefineSymbol('\\\\precnsim', '\\u22E8', 'mrel', 'ams');\ndefineSymbol('\\\\precnapprox', '\\u2AB9', 'mrel', 'ams');\ndefineSymbol('\\\\nsim', '\\u2241', 'mrel', 'ams');\ndefineSymbol('\\\\nshortmid', '\\uE006', 'mrel', 'ams');\ndefineSymbol('\\\\nmid', '\\u2224', 'mrel', 'ams');\ndefineSymbol('\\\\nvdash', '\\u22AC', 'mrel', 'ams');\ndefineSymbol('\\\\nvDash', '\\u22AD', 'mrel', 'ams');\ndefineSymbol('\\\\ngtr', '\\u226F', 'mrel', 'ams');\ndefineSymbol('\\\\ngeqslant', '\\uE00F', 'mrel', 'ams');\ndefineSymbol('\\\\ngeqq', '\\uE00E', 'mrel', 'ams');\ndefineSymbol('\\\\gneq', '\\u2A88', 'mrel', 'ams');\ndefineSymbol('\\\\gneqq', '\\u2269', 'mrel', 'ams');\ndefineSymbol('\\\\gvertneqq', '\\uE00D', 'mrel', 'ams');\ndefineSymbol('\\\\gnsim', '\\u22E7', 'mrel', 'ams');\ndefineSymbol('\\\\gnapprox', '\\u2A8A', 'mrel', 'ams');\ndefineSymbol('\\\\nsucc', '\\u2281', 'mrel', 'ams');\ndefineSymbol('\\\\nsucceq', '\\u22E1', 'mrel', 'ams');\ndefineSymbol('\\\\succnsim', '\\u22E9', 'mrel', 'ams');\ndefineSymbol('\\\\succnapprox', '\\u2ABA', 'mrel', 'ams');\ndefineSymbol('\\\\ncong', '\\u2246', 'mrel', 'ams');\ndefineSymbol('\\\\nshortparallel', '\\uE007', 'mrel', 'ams');\ndefineSymbol('\\\\nparallel', '\\u2226', 'mrel', 'ams');\ndefineSymbol('\\\\nVDash', '\\u22AF', 'mrel', 'ams');\ndefineSymbol('\\\\nsupseteqq', '\\uE018', 'mrel', 'ams');\ndefineSymbol('\\\\supsetneq', '\\u228B', 'mrel', 'ams');\ndefineSymbol('\\\\varsupsetneq', '\\uE01B', 'mrel', 'ams');\ndefineSymbol('\\\\supsetneqq', '\\u2ACC', 'mrel', 'ams');\ndefineSymbol('\\\\varsupsetneqq', '\\uE019', 'mrel', 'ams');\ndefineSymbol('\\\\nVdash', '\\u22AE', 'mrel', 'ams');\ndefineSymbol('\\\\precneqq', '\\u2AB5', 'mrel', 'ams');\ndefineSymbol('\\\\succneqq', '\\u2AB6', 'mrel', 'ams');\ndefineSymbol('\\\\nsubseteqq', '\\uE016', 'mrel', 'ams');\n\n// 'ams' Misc\n\ndefineSymbol('\\\\checkmark', '\\u2713', 'mord', 'ams');\n\ndefineSymbol('\\\\diagup', '\\u2571', 'mord', 'ams');\ndefineSymbol('\\\\diagdown', '\\u2572', 'mord', 'ams');\n\ndefineSymbol('\\\\measuredangle', '\\u2221', 'mord', 'ams');\ndefineSymbol('\\\\sphericalangle', '\\u2222', 'mord', 'ams');\n\ndefineSymbol('\\\\backprime', '\\u2035', 'mord', 'ams');\ndefineSymbol('\\\\backdoubleprime', '\\u2036', 'mord', 'ams');\n\ndefineSymbol('\\\\ast', '\\u2217', 'mbin');\ndefineSymbol('\\\\star', '\\u22C6', 'mbin');\ndefineSymbol('\\\\diamond', '\\u22C4', 'mbin');\ndefineSymbol('\\\\Diamond', '\\u25CA', 'mord', 'ams');\ndefineSymbol('\\\\lozenge', '\\u25CA', 'mord', 'ams');\ndefineSymbol('\\\\blacklozenge', '\\u29EB', 'mord', 'ams');\ndefineSymbol('\\\\bigstar', '\\u2605', 'mord', 'ams');\n\n// 'ams' Hebrew\n\ndefineSymbol('\\\\aleph', '\\u2135');\ndefineSymbol('\\\\beth', '\\u2136', 'mord', 'ams');\ndefineSymbol('\\\\daleth', '\\u2138', 'mord', 'ams');\ndefineSymbol('\\\\gimel', '\\u2137', 'mord', 'ams');\n\n// 'ams' Delimiters\n\ndefineSymbol('\\\\lbrace', '{', 'mopen');\ndefineSymbol('\\\\rbrace', '}', 'mclose');\ndefineSymbol('\\\\langle', '\\u27E8', 'mopen');\ndefineSymbol('\\\\rangle', '\\u27E9', 'mclose');\ndefineSymbol('\\\\lfloor', '\\u230A', 'mopen');\ndefineSymbol('\\\\rfloor', '\\u230B', 'mclose');\ndefineSymbol('\\\\lceil', '\\u2308', 'mopen');\ndefineSymbol('\\\\rceil', '\\u2309', 'mclose');\n\ndefineSymbol('\\\\vert', '\\u2223');\ndefineSymbol('\\\\mvert', '\\u2223', 'mrel');\ndefineSymbol('\\\\lvert', '\\u2223', 'mopen');\ndefineSymbol('\\\\rvert', '\\u2223', 'mclose');\ndefineSymbol('\\\\|', '\\u2225');\ndefineSymbol('\\\\Vert', '\\u2225');\ndefineSymbol('\\\\mVert', '\\u2225');\ndefineSymbol('\\\\lVert', '\\u2225', 'mopen');\ndefineSymbol('\\\\rVert', '\\u2225', 'mclose');\ndefineSymbol('\\\\parallel', '\\u2225', 'mrel');\ndefineSymbol('\\\\shortparallel', '\\u2225', 'mrel', 'ams');\n\ndefineSymbol('\\\\lbrack', '[', 'mopen');\ndefineSymbol('\\\\rbrack', ']', 'mclose');\ndefineSymbol('\\\\{', '{', 'mopen');\ndefineSymbol('\\\\}', '}', 'mclose');\n\ndefineSymbol('(', '(', 'mopen');\ndefineSymbol(')', ')', 'mclose');\ndefineSymbol('[', '[', 'mopen');\ndefineSymbol(']', ']', 'mclose');\n\ndefineSymbol('\\\\ulcorner', '\\u250C', 'mopen', 'ams');\ndefineSymbol('\\\\urcorner', '\\u2510', 'mclose', 'ams');\ndefineSymbol('\\\\llcorner', '\\u2514', 'mopen', 'ams');\ndefineSymbol('\\\\lrcorner', '\\u2518', 'mclose', 'ams');\n\n// Large Delimiters\n\ndefineSymbol('\\\\lgroup', '\\u27EE', 'mopen');\ndefineSymbol('\\\\rgroup', '\\u27EF', 'mclose');\ndefineSymbol('\\\\lmoustache', '\\u23B0', 'mopen');\ndefineSymbol('\\\\rmoustache', '\\u23B1', 'mclose');\n\n// Relations\n\ndefineSymbol('=', '=', 'mrel');\n// defineSymbol('\\\\ne', '\\u2260', 'mrel');\n// defineSymbol('\\\\neq', '\\u2260', 'mrel');\n// DefineSymbol( '\\\\longequal', '\\uF7D9',  'mrel',  MAIN);   // NOTE: Not TeX\n\ndefineSymbol('<', '<', 'mrel');\ndefineSymbol('\\\\lt', '<', 'mrel');\ndefineSymbol('>', '>', 'mrel');\ndefineSymbol('\\\\gt', '>', 'mrel');\n\ndefineSymbol('\\\\le', '\\u2264', 'mrel');\ndefineSymbol('\\\\leq', '\\u2264', 'mrel');\ndefineSymbol('\\\\ge', '\\u2265', 'mrel');\ndefineSymbol('\\\\geq', '\\u2265', 'mrel');\n\ndefineSymbol('\\\\leqslant', '\\u2A7D', 'mrel', 'ams');\ndefineSymbol('\\\\geqslant', '\\u2A7E', 'mrel', 'ams');\n\ndefineSymbol('\\\\ll', '\\u226A', 'mrel');\ndefineSymbol('\\\\gg', '\\u226B', 'mrel');\ndefineSymbol('\\\\coloneq', '\\u2254', 'mrel');\ndefineSymbol('\\\\measeq', '\\u225D', 'mrel'); // MEASSURED BY\ndefineSymbol('\\\\eqdef', '\\u225E', 'mrel');\ndefineSymbol('\\\\questeq', '\\u225F', 'mrel'); // QUESTIONED EQUAL TO\n\ndefineSymbol(':', ':', 'mrel');\ndefineSymbol('\\\\cong', '\\u2245', 'mrel');\n\ndefineSymbol('\\\\equiv', '\\u2261', 'mrel');\n\ndefineSymbol('\\\\prec', '\\u227A', 'mrel');\ndefineSymbol('\\\\preceq', '\\u2AAF', 'mrel');\ndefineSymbol('\\\\succ', '\\u227B', 'mrel');\ndefineSymbol('\\\\succeq', '\\u2AB0', 'mrel');\n\ndefineSymbol('\\\\perp', '\\u22A5', 'mrel');\n\ndefineSymbol('\\\\propto', '\\u221D', 'mrel');\ndefineSymbol('\\\\Colon', '\\u2237', 'mrel');\n\ndefineSymbol('\\\\smile', '\\u2323', 'mrel');\ndefineSymbol('\\\\frown', '\\u2322', 'mrel');\n\ndefineSymbol('\\\\sim', '\\u223C', 'mrel');\ndefineSymbol('\\\\gtrsim', '\\u2273', 'mrel', 'ams');\n\ndefineSymbol('\\\\approx', '\\u2248', 'mrel');\n\ndefineSymbol('\\\\approxeq', '\\u224A', 'mrel', 'ams');\ndefineSymbol('\\\\thickapprox', '\\u2248', 'mrel', 'ams');\ndefineSymbol('\\\\lessapprox', '\\u2A85', 'mrel', 'ams');\ndefineSymbol('\\\\gtrapprox', '\\u2A86', 'mrel', 'ams');\ndefineSymbol('\\\\precapprox', '\\u2AB7', 'mrel', 'ams');\ndefineSymbol('\\\\succapprox', '\\u2AB8', 'mrel', 'ams');\n\ndefineSymbol('\\\\thicksim', '\\u223C', 'mrel', 'ams');\ndefineSymbol('\\\\succsim', '\\u227F', 'mrel', 'ams');\ndefineSymbol('\\\\precsim', '\\u227E', 'mrel', 'ams');\ndefineSymbol('\\\\backsim', '\\u223D', 'mrel', 'ams');\ndefineSymbol('\\\\eqsim', '\\u2242', 'mrel', 'ams');\ndefineSymbol('\\\\backsimeq', '\\u22CD', 'mrel', 'ams');\ndefineSymbol('\\\\simeq', '\\u2243', 'mrel');\ndefineSymbol('\\\\lesssim', '\\u2272', 'mrel', 'ams');\n\ndefineSymbol('\\\\nleq', '\\u2270', 'mrel', 'ams');\ndefineSymbol('\\\\ngeq', '\\u2271', 'mrel', 'ams');\n\ndefineSymbol('\\\\smallsmile', '\\u2323', 'mrel', 'ams');\ndefineSymbol('\\\\smallfrown', '\\u2322', 'mrel', 'ams');\ndefineSymbol('\\\\bowtie', '\\u22C8', 'mrel');\ndefineSymbol('\\\\Join', '\\u22C8', 'mrel');\n\ndefineSymbol('\\\\asymp', '\\u224D', 'mrel');\n\ndefineSymbol('\\\\sqsubseteq', '\\u2291', 'mrel');\ndefineSymbol('\\\\sqsupseteq', '\\u2292', 'mrel');\n\ndefineSymbol('\\\\leqq', '\\u2266', 'mrel', 'ams');\ndefineSymbol('\\\\eqslantless', '\\u2A95', 'mrel', 'ams');\n\ndefineSymbol('\\\\lll', '\\u22D8', 'mrel', 'ams');\ndefineSymbol('\\\\lessgtr', '\\u2276', 'mrel', 'ams');\ndefineSymbol('\\\\lesseqgtr', '\\u22DA', 'mrel', 'ams');\ndefineSymbol('\\\\lesseqqgtr', '\\u2A8B', 'mrel', 'ams');\ndefineSymbol('\\\\risingdotseq', '\\u2253', 'mrel', 'ams');\ndefineSymbol('\\\\fallingdotseq', '\\u2252', 'mrel', 'ams');\ndefineSymbol('\\\\subseteqq', '\\u2AC5', 'mrel', 'ams');\ndefineSymbol('\\\\Subset', '\\u22D0', 'mrel', 'ams');\ndefineSymbol('\\\\sqsubset', '\\u228F', 'mrel', 'ams');\ndefineSymbol('\\\\preccurlyeq', '\\u227C', 'mrel', 'ams');\ndefineSymbol('\\\\curlyeqprec', '\\u22DE', 'mrel', 'ams');\ndefineSymbol('\\\\vDash', '\\u22A8', 'mrel', 'ams');\ndefineSymbol('\\\\Vvdash', '\\u22AA', 'mrel', 'ams');\ndefineSymbol('\\\\bumpeq', '\\u224F', 'mrel', 'ams');\ndefineSymbol('\\\\Bumpeq', '\\u224E', 'mrel', 'ams');\ndefineSymbol('\\\\geqq', '\\u2267', 'mrel', 'ams');\ndefineSymbol('\\\\eqslantgtr', '\\u2A96', 'mrel', 'ams');\ndefineSymbol('\\\\ggg', '\\u22D9', 'mrel', 'ams');\ndefineSymbol('\\\\gtrless', '\\u2277', 'mrel', 'ams');\ndefineSymbol('\\\\gtreqless', '\\u22DB', 'mrel', 'ams');\ndefineSymbol('\\\\gtreqqless', '\\u2A8C', 'mrel', 'ams');\n\ndefineSymbol('\\\\supseteqq', '\\u2AC6', 'mrel', 'ams');\ndefineSymbol('\\\\Supset', '\\u22D1', 'mrel', 'ams');\ndefineSymbol('\\\\sqsupset', '\\u2290', 'mrel', 'ams');\ndefineSymbol('\\\\succcurlyeq', '\\u227D', 'mrel', 'ams');\ndefineSymbol('\\\\curlyeqsucc', '\\u22DF', 'mrel', 'ams');\ndefineSymbol('\\\\Vdash', '\\u22A9', 'mrel', 'ams');\ndefineSymbol('\\\\shortmid', '\\u2223', 'mrel', 'ams');\ndefineSymbol('\\\\between', '\\u226C', 'mrel', 'ams');\ndefineSymbol('\\\\pitchfork', '\\u22D4', 'mrel', 'ams');\ndefineSymbol('\\\\varpropto', '\\u221D', 'mrel', 'ams');\ndefineSymbol('\\\\backepsilon', '\\u220D', 'mrel', 'ams');\ndefineSymbol('\\\\llless', '\\u22D8', 'mrel', 'ams');\ndefineSymbol('\\\\gggtr', '\\u22D9', 'mrel', 'ams');\ndefineSymbol('\\\\lhd', '\\u22B2', 'mbin', 'ams');\ndefineSymbol('\\\\rhd', '\\u22B3', 'mbin', 'ams');\n\ndefineSymbol('\\\\doteq', '\\u2250', 'mrel');\ndefineSymbol('\\\\doteqdot', '\\u2251', 'mrel', 'ams');\ndefineSymbol('\\\\Doteq', '\\u2251', 'mrel', 'ams');\ndefineSymbol('\\\\eqcirc', '\\u2256', 'mrel', 'ams');\ndefineSymbol('\\\\circeq', '\\u2257', 'mrel', 'ams');\ndefineSymbol('\\\\lessdot', '\\u22D6', 'mbin', 'ams');\ndefineSymbol('\\\\gtrdot', '\\u22D7', 'mbin', 'ams');\n\n// In TeX, '~' is a spacing command (non-breaking space).\n// However, '~' is used as an ASCII Math shortctut character, so define a \\\\~\n// command which maps to the '~' character\ndefineSymbol('\\\\~', '~', 'mrel');\n\ndefineSymbol('\\\\leftrightarrow', '\\u2194', 'mrel');\ndefineSymbol('\\\\Leftrightarrow', '\\u21D4', 'mrel');\ndefineSymbol('\\\\models', '\\u22A8', 'mrel');\ndefineSymbol('\\\\vdash', '\\u22A2', 'mrel');\n\ndefineSymbol('\\\\therefore', '\\u2234', 'mrel', 'ams');\ndefineSymbol('\\\\because', '\\u2235', 'mrel', 'ams');\ndefineSymbol('\\\\dashv', '\\u22A3', 'mrel');\ndefineSymbol('\\\\roundimplies', '\\u2970', 'mrel');\n\n// 'ams' Binary Operators\n\ndefineSymbol('+', '+', 'mbin');\ndefineSymbol('-', '\\u2212', 'mbin');\ndefineSymbol('\\u2212', '\\u2212', 'mbin');\ndefineSymbol('\\\\pm', '\\u00B1', 'mbin');\ndefineSymbol('\\\\mp', '\\u2213', 'mbin');\ndefineSymbol('*', '\\u2217', 'mbin');\ndefineSymbol('\\\\times', '\\u00D7', 'mbin');\ndefineSymbol('\\\\div', '\\u00F7', 'mbin');\ndefineSymbol('\\\\surd', '\\u221A');\n\ndefineSymbol('\\\\divides', '\\u2223', 'mbin');\n// From MnSymbol package\n\ndefineSymbol('\\\\ltimes', '\\u22C9', 'mbin', 'ams');\ndefineSymbol('\\\\rtimes', '\\u22CA', 'mbin', 'ams');\ndefineSymbol('\\\\leftthreetimes', '\\u22CB', 'mbin', 'ams');\ndefineSymbol('\\\\rightthreetimes', '\\u22CC', 'mbin', 'ams');\ndefineSymbol('\\\\intercal', '\\u22BA', 'mbin', 'ams');\ndefineSymbol('\\\\dotplus', '\\u2214', 'mbin', 'ams');\ndefineSymbol('\\\\doublebarwedge', '\\u2A5E', 'mbin', 'ams');\ndefineSymbol('\\\\divideontimes', '\\u22C7', 'mbin', 'ams');\ndefineSymbol('\\\\centerdot', '\\u22C5', 'mbin', 'ams');\ndefineSymbol('\\\\cdot', '\\u22C5', 'mbin');\n\ndefineSymbol('\\\\infty', '\\u221E');\ndefineSymbol('\\\\prime', '\\u2032');\ndefineSymbol('\\\\doubleprime', '\\u2033'); // NOTE: Not in TeX, but Mathematica\ndefineSymbol('\\\\angle', '\\u2220');\ndefineSymbol('`', '\\u2018');\ndefineSymbol('\\\\$', '$');\ndefineSymbol('\\\\%', '%');\ndefineSymbol('\\\\_', '_');\n\n// Note: In TeX, greek symbols are only available in Math mode\ndefineSymbol('\\\\alpha', '\\u03B1');\ndefineSymbol('\\\\beta', '\\u03B2');\ndefineSymbol('\\\\gamma', '\\u03B3');\ndefineSymbol('\\\\delta', '\\u03B4');\ndefineSymbol('\\\\epsilon', '\\u03F5');\ndefineSymbol('\\\\varepsilon', '\\u03B5');\ndefineSymbol('\\\\zeta', '\\u03B6');\ndefineSymbol('\\\\eta', '\\u03B7');\ndefineSymbol('\\\\theta', '\\u03B8');\ndefineSymbol('\\\\vartheta', '\\u03D1');\ndefineSymbol('\\\\iota', '\\u03B9');\ndefineSymbol('\\\\kappa', '\\u03BA');\ndefineSymbol('\\\\varkappa', '\\u03F0', 'mord', 'ams');\ndefineSymbol('\\\\lambda', '\\u03BB');\ndefineSymbol('\\\\mu', '\\u03BC');\ndefineSymbol('\\\\nu', '\\u03BD');\ndefineSymbol('\\\\xi', '\\u03BE');\ndefineSymbol('\\\\omicron', 'o');\ndefineSymbol('\\\\pi', '\\u03C0');\ndefineSymbol('\\\\varpi', '\\u03D6');\ndefineSymbol('\\\\rho', '\\u03C1');\ndefineSymbol('\\\\varrho', '\\u03F1');\ndefineSymbol('\\\\sigma', '\\u03C3');\ndefineSymbol('\\\\varsigma', '\\u03C2');\ndefineSymbol('\\\\tau', '\\u03C4');\ndefineSymbol('\\\\phi', '\\u03D5');\ndefineSymbol('\\\\varphi', '\\u03C6');\ndefineSymbol('\\\\upsilon', '\\u03C5');\ndefineSymbol('\\\\chi', '\\u03C7');\ndefineSymbol('\\\\psi', '\\u03C8');\ndefineSymbol('\\\\omega', '\\u03C9');\n\ndefineSymbol('\\\\Gamma', '\\u0393');\ndefineSymbol('\\\\Delta', '\\u0394');\ndefineSymbol('\\\\Theta', '\\u0398');\ndefineSymbol('\\\\Lambda', '\\u039B');\ndefineSymbol('\\\\Xi', '\\u039E');\ndefineSymbol('\\\\Pi', '\\u03A0');\ndefineSymbol('\\\\Sigma', '\\u03A3');\ndefineSymbol('\\\\Upsilon', '\\u03A5');\ndefineSymbol('\\\\Phi', '\\u03A6');\ndefineSymbol('\\\\Psi', '\\u03A8');\ndefineSymbol('\\\\Omega', '\\u03A9');\n\n// 'ams' Greek\ndefineSymbol('\\\\digamma', '\\u03DD', 'mord', 'ams');\n\ndefineSymbol('\\\\emptyset', '\\u2205');\ndefineSymbol('\\\\varnothing', '\\u2205', 'mord', 'ams');\n\ndefineSymbol('\\\\cap', '\\u2229', 'mbin');\ndefineSymbol('\\\\cup', '\\u222A', 'mbin');\ndefineSymbol('\\\\setminus', '\\u2216', 'mbin');\ndefineSymbol('\\\\smallsetminus', '\\u2216', 'mbin', 'ams');\ndefineSymbol('\\\\complement', '\\u2201', 'mord', 'ams');\n\ndefineSymbol('\\\\in', '\\u2208', 'mrel');\ndefineSymbol('\\\\notin', '\\u2209', 'mrel');\n// defineSymbol('\\\\not', '\\u0338', 'mrel');\n// defineSymbol('\\\\not', '\\ue020', 'mrel');\ndefineSymbol('\\\\ni', '\\u220B', 'mrel');\ndefineSymbol('\\\\owns', '\\u220B', 'mrel');\ndefineSymbol('\\\\subset', '\\u2282', 'mrel');\ndefineSymbol('\\\\supset', '\\u2283', 'mrel');\ndefineSymbol('\\\\subseteq', '\\u2286', 'mrel');\ndefineSymbol('\\\\supseteq', '\\u2287', 'mrel');\ndefineSymbol('\\\\subsetneq', '\\u228A', 'mrel', 'ams');\ndefineSymbol('\\\\varsubsetneq', '\\uE01A', 'mrel', 'ams');\ndefineSymbol('\\\\subsetneqq', '\\u2ACB', 'mrel', 'ams');\ndefineSymbol('\\\\varsubsetneqq', '\\uE017', 'mrel', 'ams');\ndefineSymbol('\\\\nsubset', '\\u2284', 'mrel', 'ams'); // NOTE: Not TeX?\ndefineSymbol('\\\\nsupset', '\\u2285', 'mrel', 'ams'); // NOTE: Not TeX?\ndefineSymbol('\\\\nsubseteq', '\\u2288', 'mrel', 'ams');\ndefineSymbol('\\\\nsupseteq', '\\u2289', 'mrel', 'ams');\n\n// See http://tex.stackexchange.com/questions/41476/lengths-and-when-to-use-them\ndefineSymbol('\\\\ ', '\\u00A0', 'space');\ndefineSymbol('~', '\\u00A0', 'space');\ndefineSymbol('\\\\space', '\\u00A0', 'space');\n\n// \\enspace is a TeX command (not LaTeX) equivalent to a \\skip\ndefineFunction(['!', ',', ':', ';', 'enskip', 'enspace', 'quad', 'qquad'], '', {\n  createAtom: (command: string, _args, style: Style): Atom =>\n    new SpacingAtom(command, style),\n});\n\n// Punctuation\n\ndefineSymbol('\\\\colon', ':', 'mpunct');\ndefineSymbol('\\\\cdotp', '\\u22C5', 'mpunct');\ndefineSymbol('\\\\cdots', '\\u22EF', 'minner');\ndefineSymbol('\\\\ddots', '\\u22F1', 'minner');\ndefineSymbol('\\\\ldots', '\\u2026', 'minner');\ndefineSymbol('\\\\mathellipsis', '\\u2026', 'minner');\ndefineSymbol('\\\\vdots', '\\u22EE');\ndefineSymbol('\\\\ldotp', '\\u002E', 'mpunct');\ndefineSymbol(',', ',', 'mpunct');\ndefineSymbol(';', ';', 'mpunct');\n\ndefineSymbol('\\\\land', '\\u2227', 'mbin');\ndefineSymbol('\\\\wedge', '\\u2227', 'mbin');\ndefineSymbol('\\\\lor', '\\u2228', 'mbin');\ndefineSymbol('\\\\vee', '\\u2228', 'mbin');\ndefineSymbol('\\\\lnot', '\\u00AC');\ndefineSymbol('\\\\neg', '\\u00AC');\n\ndefineSymbol('\\\\barwedge', '\\u22BC', 'mbin', 'ams');\ndefineSymbol('\\\\veebar', '\\u22BB', 'mbin', 'ams');\ndefineSymbol('\\\\nor', '\\u22BB', 'mbin', 'ams'); // NOTE: Not TeX, Mathematica\ndefineSymbol('\\\\curlywedge', '\\u22CF', 'mbin', 'ams');\ndefineSymbol('\\\\curlyvee', '\\u22CE', 'mbin', 'ams');\n\ndefineSymbol('\\\\square', '\\u25A1', 'mord', 'ams');\ndefineSymbol('\\\\Box', '\\u25A1', 'mord', 'ams');\ndefineSymbol('\\\\blacksquare', '\\u25A0', 'mord', 'ams');\ndefineSymbol('\\\\boxminus', '\\u229F', 'mbin', 'ams');\ndefineSymbol('\\\\boxplus', '\\u229E', 'mbin', 'ams');\ndefineSymbol('\\\\boxtimes', '\\u22A0', 'mbin', 'ams');\ndefineSymbol('\\\\boxdot', '\\u22A1', 'mbin', 'ams');\n\ndefineSymbol('\\\\circ', '\\u2218', 'mbin');\ndefineSymbol('\\\\bigcirc', '\\u25EF', 'mbin');\ndefineSymbol('\\\\bullet', '\\u2219', 'mbin');\ndefineSymbol('\\\\circleddash', '\\u229D', 'mbin', 'ams');\ndefineSymbol('\\\\circledast', '\\u229B', 'mbin', 'ams');\ndefineSymbol('\\\\oplus', '\\u2295', 'mbin');\ndefineSymbol('\\\\ominus', '\\u2296', 'mbin');\ndefineSymbol('\\\\otimes', '\\u2297', 'mbin');\ndefineSymbol('\\\\odot', '\\u2299', 'mbin');\ndefineSymbol('\\\\circledcirc', '\\u229A', 'mbin', 'ams');\ndefineSymbol('\\\\oslash', '\\u2298', 'mbin');\ndefineSymbol('\\\\circledS', '\\u24C8', 'mord', 'ams');\ndefineSymbol('\\\\circledR', '\\u00AE', 'mord', 'ams');\n\ndefineSymbol('\\\\triangle', '\\u25B3');\ndefineSymbol('\\\\bigtriangleup', '\\u25B3', 'mbin');\ndefineSymbol('\\\\vartriangle', '\\u25B3', 'mrel', 'ams');\ndefineSymbol('\\\\triangleq', '\\u225C', 'mrel', 'ams');\n\ndefineSymbol('\\\\triangledown', '\\u25BD', 'mord', 'ams');\ndefineSymbol('\\\\bigtriangledown', '\\u25BD', 'mbin');\n\ndefineSymbol('\\\\triangleleft', '\\u25C3', 'mbin');\ndefineSymbol('\\\\vartriangleleft', '\\u22B2', 'mrel', 'ams');\ndefineSymbol('\\\\trianglelefteq', '\\u22B4', 'mrel', 'ams');\ndefineSymbol('\\\\ntriangleleft', '\\u22EA', 'mrel', 'ams');\ndefineSymbol('\\\\ntrianglelefteq', '\\u22EC', 'mrel', 'ams');\n\ndefineSymbol('\\\\triangleright', '\\u25B9', 'mbin');\ndefineSymbol('\\\\vartriangleright', '\\u22B3', 'mrel', 'ams');\ndefineSymbol('\\\\trianglerighteq', '\\u22B5', 'mrel', 'ams');\ndefineSymbol('\\\\ntriangleright', '\\u22EB', 'mrel', 'ams');\ndefineSymbol('\\\\ntrianglerighteq', '\\u22ED', 'mrel', 'ams');\n\ndefineSymbol('\\\\blacktriangle', '\\u25B2', 'mord', 'ams');\ndefineSymbol('\\\\blacktriangledown', '\\u25BC', 'mord', 'ams');\ndefineSymbol('\\\\blacktriangleleft', '\\u25C0', 'mrel', 'ams');\ndefineSymbol('\\\\blacktriangleright', '\\u25B6', 'mrel', 'ams');\n\ndefineSymbol('\\\\/', '/');\ndefineSymbol('|', '\\u2223', 'mord');\n\ndefineSymbol('\\\\And', '\\u0026', 'mbin');\ndefineSymbol('\\\\imath', '\\u0131');\ndefineSymbol('\\\\jmath', '\\u0237');\n\ndefineSymbol('\\\\degree', '\\u00B0');\n\ndefineSymbol(\"'\", '\\u2032'); // Prime\ndefineSymbol('\"', '\\u201D'); // Double Prime\n// defineSymbol( \"\\'', '\\u2033',  'mord',  MAIN);       // Double Prime\n","// Adapted from https://jakedeichert.com/blog/2020/02/a-super-hacky-alternative-to-import-meta-url/\nfunction getFileUrl() {\n  const stackTraceFrames = String(new Error().stack)\n    .replace(/^Error.*\\n/, '')\n    .split('\\n');\n\n  if (stackTraceFrames.length === 0) {\n    console.error(\n      \"Can't use relative paths to specify assets location because the source\" +\n        'file location could not be determined (unexpected stack trace format' +\n        ` \"${new Error().stack}\").`\n    );\n    return '';\n  }\n\n  // 0 = this getFileUrl frame (because the Error is created here)\n  // 1 = the caller of getFileUrl (the file path we want to grab)\n  let callerFrame = stackTraceFrames[1];\n\n  // Extract the script's complete url\n  let m = callerFrame.match(/[^(@ ]+\\.ts[\\?:]/);\n  if (m) {\n    // This is a Typescript file, therefore there's a source map that's\n    // remapping to the source file. Use an entry further in the stack trace.\n    callerFrame = stackTraceFrames[2];\n  }\n\n  m = callerFrame.match(/([^(@ ]+js)[\\?:]/);\n  if (!m) {\n    console.error(stackTraceFrames);\n    console.error(\n      \"Can't use relative paths to specify assets location because the source \" +\n        'file location could not be determined ' +\n        `(unexpected location \"${callerFrame}\").`\n    );\n    return '';\n  }\n  return m[1];\n}\n\nexport function resolveRelativeUrl(url: string): string {\n  let result = '';\n  try {\n    result = new URL(url, gScriptUrl).toString();\n  } catch (e) {\n    console.error(`Invalid URL \"${url}\" (relative to \"${gScriptUrl}\")`);\n  }\n  return result;\n}\n\n// The URL of the bundled MathLive library. Used later to locate the `fonts`\n// directory, relative to the library\n\n// If loaded via a <script> tag, `document.currentScript.src` is this location\n// If loaded via a module (e.g. `import ...`),`import.meta.url` is this location.\n// However, `import.meta` is not supported by WebPack. So, use a\n// super-hacky-alternative to get the URL.\n// See https://github.com/webpack/webpack/issues/6719\n\n// Note that in some circumstances, document.currentScript.src can be \"\"\n// (the empty string). Therefore, use the \"||\" operator rather than \"??\"\n// to properly apply the alternative value in this case.\n\nconst gScriptUrl =\n  (globalThis?.document?.currentScript as HTMLScriptElement)?.src ||\n  getFileUrl();\n","import { resolveRelativeUrl } from '../common/script-url';\nimport { ErrorListener, MathfieldErrorCode } from '../public/core';\n\nfunction makeFontFace(\n  name: string,\n  source: string,\n  descriptors: Record<string, string> = {}\n): FontFace {\n  return new FontFace(\n    name,\n    `url(${source}.woff2) format('woff2')`,\n    descriptors\n  );\n}\n\nexport async function loadFonts(\n  fontsDirectory?: string,\n  onError?: ErrorListener<MathfieldErrorCode>\n): Promise<void> {\n  // If we're already loading the fonts, we're done.\n  if (document.body.classList.contains('ML__fonts-loading')) {\n    return;\n  }\n\n  // If the \"mathlive-fonts.css\" stylesheet is included in the <head> of the\n  // page, it will include a `--ML__static-fonts` variable.\n  // In that case, don't load the fonts dynamically\n  const useStaticFonts =\n    getComputedStyle(document.documentElement).getPropertyValue(\n      '--ML__static-fonts'\n    ) ?? false;\n\n  if (useStaticFonts) return;\n\n  if ('fonts' in document) {\n    const fontFamilies = [\n      'KaTeX_Main',\n      'KaTeX_Math',\n      'KaTeX_AMS',\n      'KaTeX_Caligraphic',\n      'KaTeX_Fraktur',\n      'KaTeX_SansSerif',\n      'KaTeX_Script',\n      'KaTeX_Size1',\n      'KaTeX_Size2',\n      'KaTeX_Size3',\n      'KaTeX_Size4',\n    ];\n    let fontsLoaded = false;\n\n    // Firefox and Safari return true for fonts that are not loaded...\n    // https://bugzilla.mozilla.org/show_bug.cgi?id=1252821 🤦‍♂️\n    // So, if on Firefox, always assume that the fonts are not loaded.\n    if (!/firefox|safari/i.test(navigator.userAgent)) {\n      try {\n        fontsLoaded = fontFamilies.every((x) =>\n          document.fonts.check('16px ' + x)\n        );\n      } catch {\n        fontsLoaded = false;\n      }\n    }\n\n    if (fontsLoaded) return;\n\n    // Locate the `fonts` folder relative to the script URL\n    const fontsFolder = resolveRelativeUrl(fontsDirectory ?? './fonts');\n    if (!fontsFolder) return;\n\n    document.body.classList.add('ML__fonts-loading');\n\n    const fonts: FontFace[] = ([\n      ['KaTeX_Main-Regular'],\n      ['KaTeX_Main-BoldItalic', { style: 'italic', weight: 'bold' }],\n      ['KaTeX_Main-Bold', { weight: 'bold' }],\n      ['KaTeX_Main-Italic', { style: 'italic' }],\n      ['KaTeX_Math-Italic', { style: 'italic' }],\n      ['KaTeX_Math-BoldItalic', { style: 'italic', weight: 'bold' }],\n      ['KaTeX_AMS-Regular'],\n      ['KaTeX_Caligraphic-Regular'],\n      ['KaTeX_Caligraphic-Bold', { weight: 'bold' }],\n      ['KaTeX_Fraktur-Regular'],\n      ['KaTeX_Fraktur-Bold', { weight: 'bold' }],\n      ['KaTeX_SansSerif-Regular', { style: 'italic' }],\n      ['KaTeX_SansSerif-Bold', { weight: 'bold' }],\n      ['KaTeX_SansSerif-Italic', { style: 'italic' }],\n      ['KaTeX_Script-Regular'],\n      ['KaTeX_Typewriter-Regular'],\n      ['KaTeX_Size1-Regular'],\n      ['KaTeX_Size2-Regular'],\n      ['KaTeX_Size3-Regular'],\n      ['KaTeX_Size4-Regular'],\n    ] as [string, Record<string, string>][]).map((x) =>\n      makeFontFace(\n        x[0].replace(/-[a-zA-Z]+$/, ''),\n        fontsFolder + '/' + x[0],\n        x[1]\n      )\n    );\n    try {\n      const loadedFonts = ((await Promise.all(\n        fonts.map((x) => {\n          try {\n            return x.load();\n          } catch {}\n\n          return undefined;\n        })\n      )) as unknown) as FontFace[];\n      // Render them at the same time\n      loadedFonts.forEach((font) => document.fonts.add(font));\n    } catch (error: unknown) {\n      console.error(\n        `The mathlive fonts could not be loaded from \"${fontsFolder}\" (${error})`\n      );\n      if (typeof onError === 'function') {\n        onError({\n          code: 'font-not-found',\n          arg: error as string,\n        });\n      }\n    }\n\n    // Event if an error occur, give up and pretend the fonts are\n    // loaded (displaying something is better than nothing)\n    document.body.classList.remove('ML__fonts-loading');\n  }\n}\n","export function hashCode(s: string): number {\n  let hash = 0;\n  if (s.length === 0) {\n    return hash;\n  }\n\n  for (let i = 0; i < s.length; i++) {\n    const char = s.charCodeAt(i);\n    hash = (hash << 5) - hash + char;\n    hash &= hash; // Convert to 32bit integer\n    // hash &= hash; // Convert to 32bit integer\n  }\n\n  return hash;\n}\n","import type { Releasable } from './releasable';\nimport { hashCode } from './hash-code';\n\nexport type Stylesheet = Releasable;\n\nexport function inject(element: HTMLElement, css: string): Releasable {\n  if (!css) return null;\n\n  let root = element?.getRootNode() ?? document?.head;\n\n  if (!root) return null;\n  if (root === document) root = document.head;\n\n  const id = hashCode(css).toString(36);\n  const element_ = (root as HTMLElement).querySelector<HTMLElement>(\n    `style[data-id=\"${id}\"]`\n  );\n  if (element_) {\n    const refCount = Number.parseFloat(\n      element_.getAttribute('data-refcount') ?? '0'\n    );\n    element_.dataset.refcount = Number(refCount + 1).toString();\n  } else {\n    // Make a new node holding the stylesheet\n    const styleNode = document.createElement('style');\n    // StyleNode.setAttribute('media', 'screen')\n    // styleNode.setAttribute('media', 'only screen and (max-width : 1024px)')\n    styleNode.dataset.id = id;\n    styleNode.dataset.refcount = '1';\n    styleNode.append(document.createTextNode(css));\n    root.appendChild(styleNode);\n  }\n\n  return {\n    release: (): void => {\n      const element_ = document.head.querySelector<HTMLElement>(\n        `style[data-id=\"${id}\"]`\n      );\n      if (element_) {\n        const refCount = Number.parseFloat(\n          element_.getAttribute('data-refcount') ?? '0'\n        );\n        if (refCount === 1) {\n          element_.remove();\n        } else {\n          element_.dataset.refcount = Number(refCount - 1).toString();\n        }\n      }\n    },\n  };\n}\n","import type { ParseMode } from '../public/core';\nimport type { Mathfield, Offset, Range, Selection } from '../public/mathfield';\nimport { ModelPrivate } from './model-private';\n\nimport type { MacroDictionary } from '../core-definitions/definitions';\nimport type { Atom } from '../core/atom';\n\nexport type ModelOptions = {\n  mode: ParseMode;\n  macros: MacroDictionary;\n  removeExtraneousParentheses: boolean;\n};\n\nexport type AnnounceVerb =\n  | 'plonk'\n  | 'focus'\n  | 'replacement'\n  | 'line'\n  | 'move'\n  | 'move up'\n  | 'move down'\n  | 'delete'\n  | 'delete: numerator'\n  | 'delete: denominator'\n  | 'delete: root'\n  | 'delete: superscript';\n\nexport type ModelHooks = {\n  announce?: (\n    target: Mathfield, // @revisit: could drop this argument\n    verb: AnnounceVerb,\n    previousPosition: number,\n    object: Atom[] // Object of the command\n  ) => void;\n  /*\n   * Return false if handled.\n   */\n  moveOut?: (\n    sender: ModelPrivate,\n    direction: 'forward' | 'backward' | 'upward' | 'downward'\n  ) => boolean;\n  /*\n   * Return false if handled.\n   */\n  tabOut?: (sender: ModelPrivate, direction: 'forward' | 'backward') => boolean;\n};\n\nexport function isOffset(value: unknown): value is Offset {\n  return typeof value === 'number' && !Number.isNaN(value);\n}\n\nexport function isRange(value: unknown): value is Range {\n  return Array.isArray(value) && value.length === 2;\n}\n\nexport function isSelection(value: unknown): value is Selection {\n  return (\n    typeof value === 'object' &&\n    'ranges' in value &&\n    Array.isArray((value as Selection).ranges)\n  );\n}\n","/* eslint-disable */\n/**\n * This module parses and outputs an Abstract Syntax Tree representing the\n * formula using the {@tutorial math-json | MathJSON } format.\n *\n * To use it, use the {@linkcode atomtoAST | atomtoAST()}  method.\n */\nimport { isArray } from '../common/types';\n\nimport { Atom, AtomType } from '../core/atom';\nimport { ArrayAtom } from '../core-atoms/array';\nimport { parseLatex } from '../core/parser';\nimport { joinLatex } from '../core/tokenizer';\nimport {\n  unicodeStringToLatex,\n  getInfo,\n  mathVariantToUnicode,\n} from '../core-definitions/definitions';\nimport { LeftRightAtom } from '../core-atoms/leftright';\nimport { SizedDelimAtom } from '../core-atoms/delim';\nimport { RIGHT_DELIM } from '../core/delimiters';\n\nexport type MathJsonLatexOptions = {\n  precision?: number;\n  decimalMarker?: string;\n  groupSeparator?: string;\n  product?: string;\n  exponentProduct?: string;\n  exponentMarker?: string;\n  arcSeparator?: string;\n  scientificNotation?: 'engineering' | 'auto' | 'on';\n  beginRepeatingDigits?: string;\n  endRepeatingDigits?: string;\n};\n\nexport type MathJson = any;\ntype ComplexNumber = { re?: string; im?: string };\ntype WrappedNumber = { num: string | ComplexNumber };\ntype MathJsonNumber = WrappedNumber & MathJsonOptionalAttributes;\ntype MathJsonExpression = {\n  fn?: string;\n  variant?: string;\n  [property: string]: MathJson;\n};\ntype MathJsonFunction = { fn: string; arg?: MathJson[] };\ntype MathJsonOptionalAttributes = {\n  latex?: string;\n};\n\ntype ParseState = {\n  atoms: Atom[];\n  index?: number;\n  ast?: MathJson;\n  minPrec?: number;\n};\n\n// Type MathJson =\n//     | string\n//     | number\n//     | boolean\n//     | null\n//     | { [property: string]: MathJson }\n//     | MathJson[];\n\nconst CANONICAL_NAMES = {\n  // CONSTANTS\n  '\\\\imaginaryI': '\\u2148',\n  '\\\\imaginaryJ': '\\u2149',\n  '\\\\pi': 'π',\n  '\\\\exponentialE': '\\u212F',\n\n  // ARITHMETIC\n  '﹢': '+', // SMALL PLUS SIGN\n  '＋': '+', // FULL WIDTH PLUS SIGN\n  '−': '-', // MINUS SIGN\n  '-': '-', // HYPHEN-MINUS\n  '﹣': '-', // SMALL HYPHEN-MINUS\n  '－': '-', // FULLWIDTH HYPHEN-MINUS\n  '\\\\times': '*',\n  '\\\\cdot': '*',\n  '⨉': '*', // N-ARY TIMES OPERATOR U+\n  '️✖': '*', // MULTIPLICATION SYMBOL\n  '️×': '*', // MULTIPLICATION SIGN\n  '.': '*',\n  '÷': '/', // DIVISION SIGN\n  // '/':             '/',        // SOLIDUS\n  '⁄': '/', // FRACTION SLASH\n  '／': '/', // FULLWIDTH SOLIDUS\n  '!': 'factorial',\n  '\\\\mp': 'minusplus', // MINUS-PLUS SIGN\n  '\\\\ne': '!=',\n  '\\\\coloneq': ':=',\n  '\\\\questeq': '?=',\n  '\\\\approx': 'approx',\n  '\\\\cong': 'congruent',\n  '\\\\sim': 'similar',\n  '\\\\equiv': 'equiv',\n  '\\\\pm': 'plusminus', // PLUS-MINUS SIGN\n\n  '\\\\land': 'and',\n  '\\\\wedge': 'and',\n  '\\\\lor': 'or',\n  '\\\\vee': 'or',\n  '\\\\oplus': 'xor',\n  '\\\\veebar': 'xor',\n  '\\\\lnot': 'not',\n  '\\\\neg': 'not',\n\n  '\\\\exists': 'exists',\n  '\\\\nexists': '!exists',\n  '\\\\forall': 'forAll',\n  '\\\\backepsilon': 'suchThat',\n  '\\\\therefore': 'therefore',\n  '\\\\because': 'because',\n\n  '\\\\nabla': 'nabla',\n  '\\\\circ': 'circle',\n  // '\\\\oplus':       'oplus',\n  '\\\\ominus': 'ominus',\n  '\\\\odot': 'odot',\n  '\\\\otimes': 'otimes',\n\n  '\\\\zeta': 'Zeta',\n  '\\\\Gamma': 'Gamma',\n  '\\\\min': 'min',\n  '\\\\max': 'max',\n  '\\\\mod': 'mod',\n  '\\\\lim': 'lim', // BIG OP\n  '\\\\sum': 'sum',\n  '\\\\prod': 'prod',\n  '\\\\int': 'integral',\n  '\\\\iint': 'integral2',\n  '\\\\iiint': 'integral3',\n\n  '\\\\Re': 'Re',\n  '\\\\gothicCapitalR': 'Re',\n  '\\\\Im': 'Im',\n  '\\\\gothicCapitalI': 'Im',\n\n  '\\\\binom': 'nCr',\n\n  '\\\\partial': 'partial',\n  '\\\\differentialD': 'differentialD',\n  '\\\\capitalDifferentialD': 'capitalDifferentialD',\n  '\\\\Finv': 'Finv',\n  '\\\\Game': 'Game',\n  '\\\\wp': 'wp',\n  '\\\\ast': 'ast',\n  '\\\\star': 'star',\n  '\\\\asymp': 'asymp',\n\n  // Function domain, limits\n  '\\\\to': 'to', // Looks like \\rightarrow\n  '\\\\gets': 'gets', // Looks like \\leftarrow\n\n  // Sets\n  '\\\\in': 'elementof',\n  '\\\\notin': '!elementof',\n  '\\\\ni': 'ownedby',\n  '\\\\owns': 'ownedby',\n  '\\\\subset': 'subset',\n  '\\\\supset': 'superset',\n  '\\\\complement': 'complement',\n\n  // Logic\n  '\\\\rightarrow': 'shortLogicalImplies',\n  '\\\\leftarrow': 'shortLogicalImpliedBy',\n  '\\\\leftrightarrow': 'shortLogicalEquivalent',\n  '\\\\longrightarrow': 'logicalImplies',\n  '\\\\longleftarrow': 'logicalImpliedBy',\n  '\\\\longleftrightarrow': 'logicalEquivalent',\n\n  // Metalogic\n  '\\\\Rightarrow': 'shortImplies',\n  '\\\\Leftarrow': 'shortImpliedBy',\n  '\\\\Leftrightarrow': 'shortEquivalent',\n\n  '\\\\implies': 'implies',\n  '\\\\Longrightarrow': 'implies',\n  '\\\\impliedby': 'impliedBy',\n  '\\\\Longleftarrow': 'impliedBy',\n  '\\\\iff': 'equivalent',\n  '\\\\Longleftrightarrow': 'equivalent',\n};\n\n// The OP_NAME table maps a canonical name to a function name\nconst OP_NAME = {\n  '+': 'add',\n  '*': 'multiply',\n  '-': 'subtract',\n  '/': 'divide',\n  '=': 'equal',\n  ':=': 'assign',\n  '!=': 'ne',\n  '?=': 'questeq',\n  'approx': 'approx',\n  'congruent': 'congruent',\n  'similar': 'similar',\n  'equiv': 'equiv',\n  '<': 'lt',\n  '>': 'gt',\n  '<=': 'le',\n  '>=': 'ge',\n  '≤': 'le',\n  '≥': 'ge',\n  '>>': 'gg',\n  '<<': 'll',\n  '**': 'pow',\n  '++': 'increment',\n  '--': 'decrement',\n};\n\n// The FUNCTION_TEMPLATE table maps a canonical name to a LaTeX template\nconst FUNCTION_TEMPLATE = {\n  'equal': '%0 = %1',\n  'ne': '%0 \\\\ne %1',\n  'questeq': '%0 \\\\questeq %1',\n  'approx': '%0 \\\\approx %1',\n  'congruent': '%0 \\\\cong %1',\n  'similar': '%0 \\\\sim %1',\n  'equiv': '%0 \\\\equiv %1',\n  'assign': '%0 := %1',\n  'lt': '%0 < %1',\n  'gt': '%0 > %1',\n  'le': '%0 \\\\le %1',\n  'ge': '%0 \\\\ge %1',\n\n  // TRIGONOMETRY\n  'sin': '\\\\sin%_%^ %0',\n  'cos': '\\\\cos%_%^ %0',\n  'tan': '\\\\tan%_%^ %0',\n  'cot': '\\\\cot%_%^ %0',\n  'sec': '\\\\sec%_%^ %0',\n  'csc': '\\\\csc%_%^ %0',\n\n  'sinh': '\\\\sinh %0',\n  'cosh': '\\\\cosh %0',\n  'tanh': '\\\\tanh %0',\n  'csch': '\\\\csch %0',\n  'sech': '\\\\sech %0',\n  'coth': '\\\\coth %0',\n\n  'arcsin': '\\\\arcsin %0',\n  'arccos': '\\\\arccos %0',\n  'arctan': '\\\\arctan %0',\n  'arccot': '\\\\arcctg %0', // Check\n  'arcsec': '\\\\arcsec %0',\n  'arccsc': '\\\\arccsc %0',\n\n  'arsinh': '\\\\arsinh %0',\n  'arcosh': '\\\\arcosh %0',\n  'artanh': '\\\\artanh %0',\n  'arcsch': '\\\\arcsch %0',\n  'arsech': '\\\\arsech %0',\n  'arcoth': '\\\\arcoth %0',\n\n  // LOGARITHMS\n  'ln': '\\\\ln%_%^ %', // Natural logarithm\n  'log': '\\\\log%_%^ %', // General logarithm, e.g. log_10\n  'lg': '\\\\lg %', // Common, base-10, logarithm\n  'lb': '\\\\lb %', // Binary, base-2, logarithm\n\n  // Big operator\n  'sum': '\\\\sum%_%^ %0',\n  'prod': '\\\\prod%_%^ %0',\n\n  // OTHER\n  'Zeta': '\\\\zeta%_%^ %', // Riemann Zeta function\n  'Gamma': '\\\\Gamma %', // Gamma function, such that Gamma(n) = (n - 1)!\n  'min': '\\\\min%_%^ %',\n  'max': '\\\\max%_%^ %',\n  'mod': '\\\\mod%_%^ %',\n  'lim': '\\\\lim%_%^ %', // BIG OP\n  'binom': '\\\\binom %',\n  'nabla': '\\\\nabla %',\n  'curl': '\\\\nabla\\\\times %0',\n  'div': '\\\\nabla\\\\cdot %0',\n  'floor': '\\\\lfloor %0 \\\\rfloor%_%^',\n  'ceil': '\\\\lceil %0 \\\\rceil%_%^',\n  'abs': '\\\\left| %0 \\\\right|%_%^',\n  'norm': '\\\\lVert %0 \\\\rVert%_%^',\n  'ucorner': '\\\\ulcorner %0 \\\\urcorner%_%^',\n  'lcorner': '\\\\llcorner %0 \\\\lrcorner%_%^',\n  'angle': '\\\\langle %0 \\\\rangle%_%^',\n  'group': '\\\\lgroup %0 \\\\rgroup%_%^',\n  'moustache': '\\\\lmoustache %0 \\\\rmoustache%_%^',\n  'brace': '\\\\lbrace %0 \\\\rbrace%_%^',\n  'sqrt[]': '\\\\sqrt[%^]{%0}', // Template used when there's an index\n  'sqrt': '\\\\sqrt{%0}',\n  'lcm': '\\\\operatorname{lcm}%',\n  'gcd': '\\\\operatorname{gcd}%',\n  'erf': '\\\\operatorname{erf}%',\n  'erfc': '\\\\operatorname{erfc}%',\n  'randomReal': '\\\\operatorname{randomReal}%',\n  'randomInteger': '\\\\operatorname{randomInteger}%',\n\n  // Logic operators\n  'and': '%0 \\\\land %1',\n  'or': '%0 \\\\lor %1',\n  'xor': '%0 \\\\oplus %1',\n  'not': '%0 \\\\lnot %1',\n\n  // Other operators\n  'circle': '%0 \\\\circ %1',\n  'ast': '%0 \\\\ast %1',\n  'star': '%0 \\\\star %1',\n  'asymp': '%0 \\\\asymp %1',\n  '/': '\\\\frac{%0}{%1}',\n  'Re': '\\\\Re{%0}',\n  'Im': '\\\\Im{%0}',\n  'factorial': '%0!',\n  'factorial2': '%0!!',\n};\n\n// From www.w3.org/TR/MathML3/appendixc.html\n// The keys of OP_PRECEDENCE are \"canonical names\"\n// (the values of the CANONICAL_NAMES table above, e.g. \"?=\")\n// Those are different from the latex names (e.g. \\\\questeq)\n// and from the function names (e.g. \"questeq\")\nconst OP_PRECEDENCE = {\n  'degree': 880,\n  'nabla': 740,\n  'curl': 740, // Not in MathML\n  'partial': 740,\n  'differentialD': 740, // Not in MathML\n  'capitalDifferentialD': 740, // Not in MathML\n\n  '**': 720, // Not in MathML\n\n  'odot': 710,\n\n  // Logical not\n  'not': 680,\n\n  // Division\n  'div': 660, // Division sign\n  'solidus': 660,\n  '/': 660,\n\n  'setminus': 650, // \\setminus, \\smallsetminus\n\n  '%': 640,\n\n  'otimes': 410,\n\n  // Set operators\n  'union': 350, // \\cup\n  'intersection': 350, // \\cap\n\n  // Multiplication, division and modulo\n  '*': 390,\n  'ast': 390,\n  '.': 390,\n\n  'oplus': 300, // Also logical XOR... @todo\n  'ominus': 300,\n\n  // Addition\n  '+': 275,\n  '-': 275,\n  '+-': 275, // \\pm\n  '-+': 275, // \\mp\n\n  // Most circled-ops are 265\n  'circle': 265,\n  'circledast': 265,\n  'circledcirc': 265,\n  'star': 265, // Different from ast\n\n  // Range\n  '..': 263, // Not in MathML\n\n  // Unit conversion\n  'to': 262, // Not in MathML\n  'in': 262, // Not in MathML\n\n  '|': 261, // Not in MathML    (bind is the |_ operator)\n\n  // Relational\n  'congruent': 265,\n  'equiv': 260, // MathML: \"identical to\"\n  '=': 260,\n  '!=': 255,\n  '?=': 255,\n  'similar': 250, // Tilde operator in MathML\n\n  'approx': 247,\n  '<': 245,\n  '>': 243,\n  '>=': 242,\n  '≥': 242,\n  '<=': 241,\n\n  // Set operator\n  'complement': 240,\n  'subset': 240, // \\subset\n  'superset': 240, // \\supset\n  // @todo and equality and neg operators\n  'elementof': 240, // \\in\n  '!elementof': 240, // \\notin\n  //\n  'exists': 230,\n  '!exists': 230,\n  'forall': 230,\n\n  // Logical operators\n  'and': 200,\n  'xor': 195, // MathML had 190\n  'or': 190,\n  // Note: 'not' is 680\n\n  // center, low, diag, vert ellipsis         150\n\n  // Composition/sequence\n  'suchThat': 110, // \\backepsilon\n  ':': 100,\n  // '..':               100,\n  // '...':               100,\n\n  // Conditional (?:)\n\n  // Assignment\n  'assign': 80,\n  ':=': 80, // MathML had 260 (same with U+2254 COLON EQUALS)\n\n  'therefore': 70,\n  'because': 70,\n\n  // Arrows\n  // Note: MathML had 270 for the arrows, but this\n  // would not work for (a = b => b = a)\n  // See also https://en.wikipedia.org/wiki/Logical_connective#Order_of_precedence\n  // for a suggested precedence (note that in this page lower precedence\n  // has the opposite meaning as what we use)\n  'shortLogicalImplies': 52, // ->\n  'shortImplies': 51, // =>\n  'logicalImplies': 50, // -->\n  'implies': 49, // ==>\n\n  'shortLogicalImpliedBy': 48, // <-\n  'shortImpliedBy': 47, // <=\n  'logicalImpliedBy': 46, // <--\n  'impliedBy': 45, // <==\n\n  'shortLogicalEquivalent': 44, // <->\n  'shortEquivalent': 43, // <=>\n  'logicalEquivalent': 42, // <-->\n  'equivalent': 41, // <==>\n\n  ',': 40,\n  ';': 30,\n};\n\nfunction getArg(ast, index) {\n  return isArray(ast.arg) ? ast.arg[index] : undefined;\n}\n\n/**\n * Given a canonical name, return its precedence\n * @param canonicalName, for example \"and\"\n */\nfunction getPrecedence(canonicalName: string): number {\n  return canonicalName ? OP_PRECEDENCE[canonicalName] || -1 : -1;\n}\n\nfunction getAssociativity(canonicalName: string): 'left' | 'right' {\n  if (/=|=>/.test(canonicalName)) {\n    return 'right';\n  }\n\n  return 'left';\n}\n\n/**\n *\n * @param name - function canonical name\n */\nfunction getLatexTemplateForFunction(name: string): string {\n  let result = FUNCTION_TEMPLATE[name];\n  if (!result) {\n    result =\n      name.length > 1 ? '\\\\operatorname{' + name + '}%^%_ %' : name + '%^%_ %';\n  }\n\n  return result;\n}\n\n/**\n *\n * @param name symbol name, e.g. \"alpha\"\n */\nfunction getLatexForSymbol(name: string): string {\n  let result = FUNCTION_TEMPLATE[name];\n  if (result) {\n    return result.replace('%1', '').replace('%0', '').replace('%', '');\n  }\n\n  if (name.length > 1) {\n    result = '\\\\' + name;\n  }\n\n  if (!result) {\n    result = unicodeStringToLatex('math', name);\n  }\n\n  return result;\n}\n\nfunction isFunction(canonicalName: string): boolean {\n  if (canonicalName === 'f' || canonicalName === 'g') return true;\n\n  const t = FUNCTION_TEMPLATE[canonicalName];\n  if (!t) return false;\n\n  // A plain \"%\" is a placeholder for an argument list, indicating a function\n  if (/%[^01_^]?/.test(t)) return true;\n\n  return false;\n}\n\n/**\n *\n * @param latex, for example '\\\\times'\n * @retur the canonical name for the input, for example '*'\n */\nfunction getCanonicalName(latex: string): string {\n  latex = (latex || '').trim();\n  let result = CANONICAL_NAMES[latex];\n  if (!result) {\n    if (/^\\\\[^{}]+$/.test(latex)) {\n      const info = getInfo(latex, 'math', {});\n      result = info ? info.value || latex.slice(1) : latex.slice(1);\n    } else {\n      result = latex;\n    }\n  }\n\n  return result;\n}\n\n/**\n * Return the operator precedence of the atom\n * or null if not an operator\n */\nfunction opPrec(atom: Atom): [number, 'left' | 'right'] {\n  if (!atom) return null;\n  const name = getCanonicalName(getString(atom));\n  const result: [number, 'left' | 'right'] = [\n    getPrecedence(name),\n    getAssociativity(name),\n  ];\n  if (result[0] <= 0) return null;\n  return result;\n}\n\nfunction isOperator(atom) {\n  return opPrec(atom) !== null;\n}\n\nconst DELIM_FUNCTION = {\n  '\\\\lfloor\\\\rfloor': 'floor',\n  '\\\\lceil\\\\rceil': 'ceil',\n  '\\\\vert\\\\vert': 'abs',\n  '\\\\lvert\\\\rvert': 'abs',\n  '||': 'abs',\n  '\\\\Vert\\\\Vert': 'norm',\n  '\\\\lVert\\\\rVert': 'norm',\n  '\\\\ulcorner\\\\urcorner': 'ucorner',\n  '\\\\llcorner\\\\lrcorner': 'lcorner',\n  '\\\\langle\\\\rangle': 'angle',\n  '\\\\lgroup\\\\rgroup': 'group',\n  '\\\\lmoustache\\\\rmoustache': 'moustache',\n  '\\\\lbrace\\\\rbrace': 'brace',\n};\n\nconst POSTFIX_FUNCTION = {\n  '!': 'factorial',\n  '\\\\dag': 'dagger',\n  '\\\\dagger': 'dagger',\n  '\\\\ddagger': 'dagger2',\n  '\\\\maltese': 'maltese',\n  '\\\\backprime': 'backprime',\n  '\\\\backdoubleprime': 'backprime2',\n  '\\\\prime': 'prime',\n  '\\\\doubleprime': 'prime2',\n  '\\\\$': '$',\n  '\\\\%': '%',\n  '\\\\_': '_',\n  '\\\\degree': 'degree',\n};\n\nconst ASSOCIATIVE_FUNCTION = {\n  '+': 'add',\n  '-': 'add', // Subtraction is add(), but it's\n  // handled specifically so that the\n  // argument is negated\n  '*': 'multiply',\n\n  '=': 'equal',\n\n  ',': 'list',\n  ';': 'list2',\n\n  'and': 'and',\n  'or': 'or',\n  'xor': 'xor',\n  'union': 'union',\n  // ShortLogicalEquivalent and logicalEquivalent map to the same function\n  // they mean the same thing, but have a difference precedence.\n  'shortLogicalEquivalent': 'logicalEquivalent', // Logical equivalent, iff, biconditional logical connective\n  'logicalEquivalent': 'logicalEquivalent', // Same\n  // shortEquivalent and equivalent map to the same function\n  // they mean the same thing, but have a difference precedence.\n  'shortEquivalent': 'equivalent', // Metalogic equivalent\n  'equivalent': 'equivalent', // Same\n};\n\nconst SUPER_ASSOCIATIVE_FUNCTION = {\n  ',': 'list',\n  ';': 'list2',\n};\n\nfunction getString(atom) {\n  if (typeof atom === 'string') return atom;\n  if (isArray(atom)) {\n    let result = '';\n    for (const subAtom of atom) {\n      result += getString(subAtom);\n    }\n\n    return result;\n  }\n\n  if (\n    atom.symbol &&\n    !/^\\\\math(op|bin|rel|open|punct|ord|inner)/.test(atom.symbol)\n  ) {\n    return atom.symbol;\n  }\n\n  if (atom.type === 'leftright') {\n    return '';\n  }\n\n  if (typeof atom.value === 'string') {\n    return atom.value;\n  }\n\n  if (isArray(atom.branch('body'))) {\n    let result = '';\n    for (const subAtom of atom.branch('body')) {\n      result += getString(subAtom);\n    }\n\n    return result;\n  }\n\n  return '';\n}\n\n/**\n *\n * @param {object} expr - Abstract Syntax Tree object\n * @return A string, the symbol, or undefined\n */\nfunction asSymbol(node): string {\n  return typeof node.sym === 'string'\n    ? getLatexForSymbol(node.sym) || node.sym\n    : '';\n}\n\n/**\n *\n * @param {object} node - Abstract Syntax Tree node\n * @return A JavaScript number, the value of the AST or NaN\n */\nfunction asMachineNumber(node): number {\n  return Number.parseFloat(node.num);\n}\n\nfunction isNumber(node): boolean {\n  return typeof node === 'object' && node.num !== undefined;\n}\n\nfunction numberRe(node): number {\n  let result = 0;\n  if (isNumber(node)) {\n    if (typeof node.num === 'object') {\n      result =\n        node.num.re !== undefined ? parseFloatToPrecision(node.num.re) : 0;\n    } else {\n      result = Number.parseFloat(node.num);\n    }\n  }\n\n  return result;\n}\n\nfunction numberIm(node): number {\n  let result = 0;\n  if (isNumber(node)) {\n    if (typeof node.num === 'object') {\n      result =\n        typeof node.num.im !== 'undefined'\n          ? parseFloatToPrecision(node.num.im)\n          : 0;\n    }\n  }\n\n  return result;\n}\n\nfunction isComplexWithRealAndImaginary(node) {\n  return numberRe(node) !== 0 && numberIm(node) !== 0;\n}\n\nfunction hasSup(node) {\n  return node && typeof node.sup !== 'undefined';\n}\n\nfunction hasSub(node) {\n  return node && typeof node.sub !== 'undefined';\n}\n\n/**\n * Return true if the current atom is of the specified type and value.\n */\nfunction isAtom(expr: ParseState, type: AtomType, value?): boolean {\n  let result = false;\n  const atom = expr.atoms[expr.index];\n  if (atom && atom.type === type) {\n    result = typeof value === 'undefined' ? true : getString(atom) === value;\n  }\n\n  return result;\n}\n\nfunction wrapFn(functionName: string, ...parameters: any[]): MathJsonFunction {\n  const result = { fn: functionName, arg: undefined };\n  if (parameters) {\n    const args = [];\n    for (const arg of parameters) {\n      if (arg) args.push(arg);\n    }\n\n    if (args.length > 0) result.arg = args;\n  }\n\n  return result;\n}\n\nfunction wrapNumber(number: number | string | ComplexNumber): MathJsonNumber {\n  if (typeof number === 'number') {\n    return { num: number.toString() };\n  }\n\n  if (typeof number === 'string') {\n    return { num: number };\n  }\n\n  if (typeof number === 'object') {\n    // This is a complex number\n    console.assert(\n      typeof number.re === 'string' || typeof number.im === 'string'\n    );\n    return { num: number };\n  }\n\n  return undefined;\n}\n\n/**\n * Return the negative of the expression. Usually { fn:'negate', arg }\n * but for numbers, the negated number\n * @param {object} node\n * @private\n */\nfunction negate(node) {\n  if (isNumber(node)) {\n    const re = numberRe(node);\n    const im = numberIm(node);\n    if (im !== 0) {\n      if (re !== 0) {\n        node.num.re = (-re).toString();\n      }\n\n      node.num.im = (-im).toString();\n    } else {\n      node.num = (-re).toString();\n    }\n\n    return node;\n  }\n\n  return wrapFn('negate', node);\n}\n\nfunction nextIsSupsub(expr) {\n  const atom = expr.atoms[expr.index + 1];\n  return atom && atom.type === 'msubsup';\n}\n\n/**\n * Parse for a possible sup/sub attached directly to the current atom\n * or to a following 'msubsup' atom.\n * After the call, the index points to the next atom to process.\n * @param {object} expr\n * @private\n */\nfunction parseSupsub(expr, options) {\n  let atom = expr.atoms[expr.index];\n\n  // Is there a supsub directly on this atom?\n  if (\n    atom &&\n    (typeof atom.branches?.superscript !== 'undefined' ||\n      typeof atom.branches?.subscript !== 'undefined')\n  ) {\n    // Move to the following atom\n    expr.index += 1;\n  } else {\n    atom = null;\n  }\n\n  // If this atom didn't have a sup/sub,\n  // is the following atom a subsup atom?\n  if (!atom) {\n    atom = expr.atoms[expr.index + 1];\n    if (\n      !atom ||\n      atom.type !== 'msubsup' ||\n      !(atom.branches?.superscript || atom.branches?.subscript)\n    ) {\n      atom = null;\n    } else {\n      // Yes. Skip the current atom and the supsub\n      expr.index += 2;\n    }\n  }\n\n  if (atom) {\n    if (typeof atom.branches?.subscript !== 'undefined') {\n      expr.ast.sub = parse(atom.branches?.subscript, options);\n    }\n\n    if (typeof atom.branches?.superscript !== 'undefined') {\n      if (atom.type === 'msubsup') {\n        if (/['\\u2032]|\\\\prime/.test(getString(atom.branches?.superscript))) {\n          expr.index += 1;\n          atom = expr.atoms[expr.index + 1];\n          if (\n            atom &&\n            atom.type === 'msubsup' &&\n            /['\\u2032]|\\\\prime/.test(getString(atom.branches?.superscript))\n          ) {\n            expr.ast.sup = { sym: '\\u2033' }; // DOUBLE-PRIME\n          } else {\n            expr.ast.sup = { sym: '\\u2032' }; // PRIME\n            expr.index -= 1;\n          }\n        } else if (\n          /['\\u2033]|\\\\doubleprime/.test(getString(atom.branches?.superscript))\n        ) {\n          expr.ast.sup = { sym: '\\u2033' }; // DOUBLE-PRIME\n        } else if (expr.ast) {\n          expr.ast.sup = parse(atom.branches?.superscript, options);\n        }\n      } else {\n        expr.ast.sup = parse(atom.branches?.superscript, options);\n      }\n    }\n  } else {\n    // Didn't find a supsup either on this atom and there was no 'msubsup'\n    // Time to move on to the next atom.\n    expr.index += 1;\n  }\n\n  return expr;\n}\n\n/**\n * Parse postfix operators, such as \"!\" (factorial)\n * @private\n */\nfunction parsePostfix(expr, options) {\n  const lhs = expr.ast;\n  if (nextIsDigraph(expr, '!!')) {\n    expr.index += 1;\n    expr.ast = wrapFn('factorial2', lhs);\n    expr = parseSupsub(expr, options);\n    expr = parsePostfix(expr, options);\n    return expr;\n  }\n\n  if (nextIsDigraph(expr, '++')) {\n    expr.index += 1;\n    expr.ast = wrapFn('increment', lhs);\n    expr = parseSupsub(expr, options);\n    expr = parsePostfix(expr, options);\n    return expr;\n  }\n\n  if (nextIsDigraph(expr, '--')) {\n    expr.index += 1;\n    expr.ast = wrapFn('decrement', lhs);\n    expr = parseSupsub(expr, options);\n    expr = parsePostfix(expr, options);\n    return expr;\n  }\n\n  const atom = expr.atoms[expr.index];\n  if (atom?.symbol && POSTFIX_FUNCTION[atom.symbol]) {\n    expr.ast = wrapFn(POSTFIX_FUNCTION[atom.symbol], lhs);\n    expr = parseSupsub(expr, options);\n    expr = parsePostfix(expr, options);\n  }\n\n  return expr;\n}\n\n/**\n * Delimiters can be expressed:\n * - as a matching pair of regular characters: '(a)'\n * - a as 'leftright' expression: '\\left(a\\right)'\n * - as a matching pair of 'sizeddelim': '\\Bigl(a\\Bigr)\n *\n * Note that the '\\delim' command is only used for delimiters in the middle\n * of a \\left\\right pair and not to represent pair-matched delimiters.\n *\n * This function handles all three cases\n */\nfunction parseDelim(\n  expr: ParseState,\n  ldelim,\n  rdelim,\n  options: MathJsonLatexOptions\n) {\n  expr.index = expr.index || 0;\n\n  if (expr.atoms.length === 0 || expr.index >= expr.atoms.length) {\n    expr.ast = undefined;\n    return expr;\n  }\n\n  const savedPrec = expr.minPrec;\n  expr.minPrec = 0;\n  let atom = expr.atoms[expr.index];\n\n  if (!ldelim) {\n    // If we didn't expect a specific delimiter, parse any delimiter\n    // and return it as a function application\n    let pairedDelim = true;\n    if (atom.type === 'mopen') {\n      ldelim = atom.value;\n      rdelim = RIGHT_DELIM[ldelim];\n    } else if (atom.type === 'sizeddelim') {\n      ldelim = atom.value;\n      rdelim = RIGHT_DELIM[ldelim];\n    } else if (atom instanceof LeftRightAtom) {\n      pairedDelim = false;\n      ldelim = atom.leftDelim;\n      rdelim = atom.rightDelim;\n      // If we have an unclosed smart fence, assume the right delim is\n      // matching the left delim\n      if (rdelim === '?') rdelim = RIGHT_DELIM[ldelim];\n    }\n\n    if (ldelim && rdelim) {\n      if (ldelim === '|' && rdelim === '|') {\n        // Check if this could be a ||x|| instead of |x|\n        const atom = expr.atoms[expr.index + 1];\n        if (atom && atom.type === 'mord' && atom.value === '|') {\n          // Yes, it's a ||x||\n          ldelim = '\\\\lVert';\n          rdelim = '\\\\rVert';\n        }\n      }\n\n      expr = parseDelim(expr, ldelim, rdelim, options);\n      if (expr) {\n        if (pairedDelim) expr.index += 1;\n        expr.ast = {\n          fn: DELIM_FUNCTION[ldelim + rdelim] || ldelim + rdelim,\n          arg: [expr.ast],\n        };\n        expr.minPrec = savedPrec;\n        return expr;\n      }\n    }\n\n    return undefined;\n  }\n\n  if (atom.type === 'mopen' && getString(atom) === ldelim) {\n    expr.index += 1; // Skip the open delim\n    expr = parseExpression(expr, options);\n    atom = expr.atoms[expr.index];\n    if (atom && atom.type === 'mclose' && getString(atom) === rdelim) {\n      if (nextIsSupsub(expr)) {\n        // Wrap in a group if we have an upcoming superscript or subscript\n        expr.ast = { group: expr.ast };\n      }\n\n      expr = parseSupsub(expr, options);\n      expr = parsePostfix(expr, options);\n    } // TODO: else, syntax error?\n  } else if (atom.type === 'mord' && getString(atom) === ldelim) {\n    expr.index += 1; // Skip the open delim\n    expr = parseExpression(expr, options);\n    atom = expr.atoms[expr.index];\n    if (atom && atom.type === 'mord' && getString(atom) === rdelim) {\n      expr.index += 1;\n      expr = parseSupsub(expr, options);\n      expr = parsePostfix(expr, options);\n    } // TODO: else, syntax error?\n  } else if (\n    ldelim === '\\\\lVert' &&\n    atom.type === 'mord' &&\n    atom.value === '|'\n  ) {\n    atom = expr.atoms[expr.index + 1];\n    if (atom && atom.type === 'mord' && atom.value === '|') {\n      // This is an opening ||\n      expr.index += 2; // Skip the open delim\n      expr = parseExpression(expr, options);\n      atom = expr.atoms[expr.index];\n      const atom2 = expr.atoms[expr.index + 1];\n      if (\n        atom &&\n        atom.type === 'mord' &&\n        atom.value === '|' &&\n        atom2 &&\n        atom2.type === 'mord' &&\n        atom2.value === '|'\n      ) {\n        // This was a closing ||\n        expr.index += 2;\n        expr = parseSupsub(expr, options);\n        expr = parsePostfix(expr, options);\n      }\n    }\n  } else if (atom.type === 'sizeddelim' && atom.value === ldelim) {\n    expr.index += 1; // Skip the open delim\n    expr = parseExpression(expr, options);\n    atom = expr.atoms[expr.index];\n    if (atom && atom.type === 'sizeddelim' && atom.value === rdelim) {\n      expr.index += 1;\n      expr = parseSupsub(expr, options);\n      expr = parsePostfix(expr, options);\n    } // TODO: else, syntax error?\n  } else if (\n    atom instanceof LeftRightAtom &&\n    atom.leftDelim === ldelim &&\n    (atom.rightDelim === '?' || atom.rightDelim === rdelim)\n  ) {\n    // This atom type includes the content of the parenthetical expression\n    // in its body\n    expr.ast = parse(atom.branch('body'), options);\n    if (nextIsSupsub(expr)) {\n      // Wrap in a group if we have an upcoming superscript or subscript\n      expr.ast = { group: expr.ast };\n    }\n\n    expr = parseSupsub(expr, options);\n    expr = parsePostfix(expr, options);\n  } else {\n    return undefined;\n  }\n\n  expr.minPrec = savedPrec;\n  return expr;\n}\n\nfunction nextIsDigraph(expr, digraph) {\n  expr.index = expr.index || 0;\n\n  if (expr.atoms.length <= 1 || expr.index >= expr.atoms.length - 1) {\n    return false;\n  }\n\n  return (\n    digraph ===\n    getString(expr.atoms[expr.index]) + getString(expr.atoms[expr.index + 1])\n  );\n}\n\n/**\n * Some symbols are made up of two consecutive characters.\n * Handle them here. Return undefined if not a digraph.\n * TODO: other digraphs:\n * :=\n * ++\n * **\n * =:\n * °C U+2103\n * °F U+2109\n * @private\n *\n */\nfunction parseDigraph(expr) {\n  expr.index = expr.index || 0;\n\n  if (expr.atoms.length <= 1 || expr.index >= expr.atoms.length - 1) {\n    return undefined;\n  }\n\n  if (isAtom(expr, 'mord', '\\\\nabla')) {\n    expr.index += 1;\n    if (isAtom(expr, 'mbin', '\\\\times')) {\n      expr.index += 1;\n      expr.ast = 'curl'; // Divergence\n      return expr;\n    }\n\n    if (isAtom(expr, 'mbin', '\\\\cdot')) {\n      expr.index += 1;\n      expr.ast = 'div';\n      return expr;\n    }\n\n    expr.index -= 1;\n  } else {\n    const digraph =\n      expr.atoms[expr.index].symbol + expr.atoms[expr.index + 1].symbol;\n    const result = /^(>=|<=|>>|<<|:=|!=)$/.test(digraph) ? digraph : '';\n    if (result) {\n      expr.index += 1;\n    }\n\n    return result;\n  }\n\n  return undefined;\n}\n\nfunction parsePrimary(expr: ParseState, options: MathJsonLatexOptions) {\n  // <primary> := ('-'|'+) <primary> | <number> |\n  //              '(' <expression> ')' | <symbol> | <text> (<expression>)\n\n  expr.index = expr.index || 0;\n  expr.ast = undefined;\n\n  if (expr.atoms.length === 0 || expr.index >= expr.atoms.length) {\n    return expr;\n  }\n\n  let atom = expr.atoms[expr.index];\n  if (atom.mode === 'text') {\n    let text = '';\n    while (expr.atoms[expr.index] && expr.atoms[expr.index].mode === 'text') {\n      text += expr.atoms[expr.index].value;\n      expr.index += 1;\n    }\n\n    expr.ast = { text };\n    return expr;\n  }\n\n  const value = getCanonicalName(getString(atom));\n\n  const digraph = parseDigraph(expr);\n  if (digraph) {\n    expr.ast = wrapFn(expr.ast, parsePrimary(expr, options).ast);\n  } else if (atom.type === 'root') {\n    expr.index = 0;\n    expr.atoms = atom.branch('body');\n    return parsePrimary(expr, options);\n  } else if (atom.type === 'mbin' && value === '-') {\n    // Prefix - sign\n    expr.index += 1; // Skip the '-' symbol\n    expr = parsePrimary(expr, options);\n    expr.ast = negate(expr.ast);\n  } else if (atom.type === 'mbin' && value === '+') {\n    // Prefix + sign\n    expr.index += 1; // Skip the '+' symbol\n    expr = parsePrimary(expr, options);\n    expr.ast = wrapFn('add', expr.ast);\n  } else if (atom.type === 'mord' && /^[\\d.]$/.test(atom.value)) {\n    // Looks like a number\n    let number = '';\n    let done = false;\n    let pat = /^[\\d.eEdD]$/;\n    while (\n      expr.index < expr.atoms.length &&\n      !done &&\n      (isAtom(expr, 'spacing') ||\n        ((isAtom(expr, 'mord') ||\n          isAtom(expr, 'mpunct', ',') ||\n          isAtom(expr, 'mbin')) &&\n          pat.test(expr.atoms[expr.index].value)))\n    ) {\n      if (expr.atoms[expr.index].type === 'spacing') {\n        expr.index += 1;\n      } else if (\n        typeof expr.atoms[expr.index].superscript !== 'undefined' ||\n        typeof expr.atoms[expr.index].subscript !== 'undefined'\n      ) {\n        done = true;\n      } else {\n        let digit = expr.atoms[expr.index].value;\n        if (digit === 'd' || digit === 'D') {\n          digit = 'e';\n          pat = /^[\\d+-.]$/;\n        } else if (digit === 'e' || digit === 'E') {\n          if (nextIsSupsub(expr)) {\n            digit = '';\n            expr.index -= 1;\n            done = true;\n          } else {\n            digit = 'E';\n            pat = /^[\\d+-.]$/;\n          }\n        } else if (pat === /^[\\d+-.]$/) {\n          pat = /^\\d$/;\n        }\n\n        number += digit === ',' ? '' : digit;\n        expr.index += 1;\n      }\n    }\n\n    expr.ast = number ? wrapNumber(number) : undefined;\n\n    // This was a number. Is it followed by a fraction, e.g. 2 1/2\n    atom = expr.atoms[expr.index];\n    if (atom && atom.type === 'genfrac' && !isNaN(expr.ast.num)) {\n      // Add an invisible plus, i.e. 2 1/2 = 2 + 1/2\n      const lhs = expr.ast;\n      expr = parsePrimary(expr, options);\n      expr.ast = wrapFn('add', lhs, expr.ast);\n    }\n\n    if (\n      atom &&\n      atom.type === 'group' &&\n      atom.command.startsWith('\\\\nicefrac')\n    ) {\n      // \\nicefrac macro, add an invisible plus\n      const lhs = expr.ast;\n      expr = parsePrimary(expr, options);\n      expr.ast = wrapFn('add', lhs, expr.ast);\n    }\n\n    if (atom && atom.type === 'msubsup') {\n      expr = parseSupsub(expr, options);\n    }\n\n    expr = parsePostfix(expr, options);\n  } else if (atom.type === 'genfrac' || atom.type === 'surd') {\n    // A fraction or a square/cube root\n    expr.ast = atomToMathJson(atom, options);\n    expr = parseSupsub(expr, options);\n    expr = parsePostfix(expr, options);\n  } else if (atom.type === 'mord' || atom.type === 'mbin') {\n    // A 'mord' but not a number: either an identifier ('x') or\n    // a function ('\\\\Zeta')\n    if (isFunction(value) && !isOperator(atom)) {\n      // A function\n      expr.ast = { fn: value };\n      expr = parseSupsub(expr, options);\n\n      const fn = expr.ast;\n      const arg = parsePrimary(expr, options).ast;\n      if (arg && /^(list0|list|list2)$/.test(arg.fn)) {\n        fn.arg = arg.arg;\n      } else if (arg) {\n        fn.arg = [arg];\n      }\n\n      expr.ast = fn;\n    } else {\n      // An identifier\n      expr.ast = atomToMathJson(atom, options);\n      if (expr.ast.sym === 'ⅈ') {\n        // It's 'i', the imaginary unit\n        expr.ast = wrapNumber({ im: '1' });\n      }\n\n      expr = parseSupsub(expr, options);\n    }\n\n    expr = parsePostfix(expr, options);\n  } else if (atom.type === 'mop') {\n    // Could be a function or an operator.\n    if (\n      (/^\\\\(mathop|operatorname|operatorname\\*)/.test(atom.command) ||\n        isFunction(value)) &&\n      !isOperator(atom)\n    ) {\n      expr.ast = {\n        fn: /^\\\\(mathop|operatorname|operatorname\\*)/.test(atom.command)\n          ? getString(atom.branch('body'))\n          : value,\n      };\n      expr = parseSupsub(expr, options);\n\n      if (hasSup(expr.ast)) {\n        // There was an exponent with the function.\n        // This may be an inverse function\n        const INVERSE_FUNCTION = {\n          sin: 'arcsin',\n          cos: 'arccos',\n          tan: 'arctan',\n          cot: 'arccot',\n          sec: 'arcsec',\n          csc: 'arccsc',\n          sinh: 'arsinh',\n          cosh: 'arcosh',\n          tanh: 'artanh',\n          csch: 'arcsch',\n          sech: 'arsech',\n          coth: 'arcoth',\n        };\n        if (asMachineNumber(expr.ast.sup) === -1 && INVERSE_FUNCTION[value]) {\n          expr.ast = wrapFn(\n            INVERSE_FUNCTION[value],\n            parsePrimary(expr, options).ast\n          );\n        } else {\n          // Keep the exponent, add the argument\n          const fn = expr.ast;\n          fn.arg = [parsePrimary(expr, options).ast];\n          expr.ast = fn;\n        }\n      } else {\n        const fn = expr.ast;\n        const arg = parsePrimary(expr, options).ast;\n        if (arg && /^(list0|list|list2)$/.test(arg.fn)) {\n          fn.arg = arg.arg;\n        } else if (arg) {\n          fn.arg = [arg];\n        }\n\n        expr.ast = fn;\n      }\n    }\n  } else if (atom.type === 'array') {\n    expr.index += 1;\n    expr.ast = atomToMathJson(atom, options);\n  } else if (atom.type === 'group') {\n    expr.index += 1;\n    expr.ast = atomToMathJson(atom, options);\n  } else if (atom.type === 'mclose') {\n    return expr;\n  } else if (atom.type === 'error') {\n    expr.index += 1;\n    expr.ast = { error: atom.command };\n    return expr;\n  }\n\n  if (expr.ast === undefined) {\n    // Parse either a group of paren, and return their content as the result\n    // or a pair of delimiters, and return them as a function applied\n    // to their content, i.e. \"|x|\" -> {fn: \"||\", arg: \"x\"}\n    const delim =\n      parseDelim(expr, '(', ')', options) ||\n      parseDelim(expr, null, null, options);\n    if (delim) {\n      expr = delim;\n    } else if (!isOperator(atom)) {\n      // This is not an operator (if it is, it may be an operator\n      // dealing with an empty lhs. It's possible.\n      // Couldn't interpret the expression. Output an error.\n      if (atom.type === 'placeholder') {\n        // Default value for a placeholder is 0\n        // (except for the denominator of a 'genfrac')\n        expr.ast = wrapNumber(0);\n      } else {\n        expr.ast = { text: '?' };\n        expr.ast.error = 'Unexpected token ' + \"'\" + atom.type + \"'\";\n        if (atom.latex) {\n          expr.ast.latex = atom.latex;\n        }\n      }\n\n      expr.index += 1; // Skip the unexpected token, and attempt to continue\n    }\n  }\n\n  atom = expr.atoms[expr.index];\n  if (\n    atom &&\n    (atom.type === 'mord' ||\n      atom.type === 'surd' ||\n      atom.type === 'mop' ||\n      atom.type === 'mopen' ||\n      atom.type === 'sizeddelim' ||\n      atom.type === 'leftright')\n  ) {\n    if (atom instanceof SizedDelimAtom) {\n      for (const d in RIGHT_DELIM) {\n        if (atom.value === RIGHT_DELIM[d]) {\n          // This is (most likely) a closing delim, exit.\n          // There are ambiguous cases, for example |x|y|z|.\n          expr.index += 1;\n          return expr;\n        }\n      }\n    }\n\n    if ((atom.type === 'mord' || atom.type === 'mop') && isOperator(atom)) {\n      // It's actually an operator\n      return expr;\n    }\n\n    const lhs = expr.ast;\n    expr.ast = {};\n    expr = parsePrimary(expr, options);\n    if (expr?.ast && lhs) {\n      if (\n        (isFunction(lhs.fn) && typeof lhs.arg === 'undefined') ||\n        (isArray(lhs.arg) && lhs.arg.length === 0)\n      ) {\n        // A function with no arguments followed by a list ->\n        // the list becomes the argument to the function\n        if (expr.ast.fn === 'list2' || expr.ast.fn === 'list') {\n          expr.ast = wrapFn(lhs.fn, expr.ast.arg);\n        } else {\n          // A function \"f(x)\" or \"√x\" followed by something else:\n          // implicit multiply\n          expr.ast = wrapFn('multiply', lhs, expr.ast);\n        }\n      } else {\n        // Invisible times, e.g. '2x'\n        if (expr.ast.fn === 'multiply') {\n          expr.ast.arg.unshift(lhs);\n        } else if (\n          numberIm(lhs) === 0 &&\n          numberRe(lhs) !== 0 &&\n          numberIm(expr.ast) === 1 &&\n          numberRe(expr.ast) === 0\n        ) {\n          // Imaginary number, i.e. \"3i\"\n          expr.ast = wrapNumber({ im: numberRe(lhs).toString() });\n        } else {\n          expr.ast = wrapFn('multiply', lhs, expr.ast);\n        }\n      }\n    } else {\n      expr.ast = lhs;\n    }\n  }\n\n  return expr;\n}\n\n/**\n * Given an atom or an array of atoms, return their AST representation as\n * an object.\n * @param {object} expr An expressions, including expr.atoms, expr.index,\n * expr.minPrec the minimum precedence that this parser should parse\n * before returning; expr.ast, the resulting AST.\n * @return {object} the expr object, updated\n * @private\n */\nfunction parseExpression(expr: ParseState, options: MathJsonLatexOptions) {\n  expr.index = expr.index || 0;\n  expr.ast = undefined;\n  if (expr.atoms.length === 0 || expr.index >= expr.atoms.length) return expr;\n  expr.minPrec = expr.minPrec || 0;\n\n  let lhs = parsePrimary(expr, options).ast;\n\n  let done = false;\n  const { minPrec } = expr;\n  while (!done) {\n    const atom = expr.atoms[expr.index];\n    const digraph = parseDigraph(expr);\n    done = !atom || atom.mode === 'text' || (!digraph && !isOperator(atom));\n    let prec;\n    let assoc;\n    if (!done) {\n      [prec, assoc] = digraph\n        ? [getPrecedence(digraph), getAssociativity(digraph)]\n        : opPrec(atom);\n      done = prec < minPrec;\n    }\n\n    if (!done) {\n      const opName = digraph || getCanonicalName(getString(atom));\n      if (assoc === 'left') {\n        expr.minPrec = prec + 1;\n      } else {\n        expr.minPrec = prec;\n      }\n\n      expr.index += 1;\n      if (opName === '|') {\n        if (\n          typeof atom.subscript !== 'undefined' ||\n          (expr.atoms[expr.index] &&\n            typeof expr.atoms[expr.index].subscript !== 'undefined' &&\n            expr.atoms[expr.index].type === 'msubsup')\n        ) {\n          // Bind is a special function. It doesn't have a rhs, and\n          // its argument is a subscript.\n          expr.ast = {};\n          const subArg = parseSupsub(expr, options).ast.sub;\n          lhs = wrapFn('bind', lhs);\n          if (subArg && subArg.fn === 'equal' && lhs.arg) {\n            // This is a subscript of the form \"x=...\"\n            lhs.arg.push(getArg(subArg, 0));\n            lhs.arg.push(getArg(subArg, 1));\n          } else if (\n            subArg &&\n            lhs.arg &&\n            (subArg.fn === 'list' || subArg.fn === 'list2')\n          ) {\n            // Form: \"x=0;n=3;z=5\"\n            let currentSym = { sym: 'x' };\n            for (let i = 0; i < subArg.arg.length; i++) {\n              if (subArg.arg[i].fn === 'equal') {\n                currentSym = getArg(subArg.arg[i], 0);\n                lhs.arg.push(currentSym);\n                lhs.arg.push(getArg(subArg.arg[i], 1));\n              } else {\n                lhs.arg.push(currentSym);\n                lhs.arg.push(subArg.arg[i]);\n              }\n            }\n          } else if (subArg) {\n            // Default identifier if none provided\n            lhs.arg.push({ sym: 'x' });\n            lhs.arg.push(subArg);\n          }\n        } else {\n          // That was a \"|\", but not with a subscript after, so\n          // it's the end of the expression, might be a right fence.\n          done = true;\n        }\n      } else {\n        const rhs = parseExpression(expr, options).ast;\n\n        // Some operators (',' and ';' for example) convert into a function\n        // even if there's only two arguments. They're super associative...\n        let fn = SUPER_ASSOCIATIVE_FUNCTION[opName];\n        if (fn && lhs && lhs.fn !== fn) {\n          // Only promote them if the lhs is not already the same function.\n          // If it is, we'll combine it below.\n          lhs = wrapFn(fn, lhs);\n        }\n\n        // Promote subtraction to an addition\n        if (opName === '-') {\n          if (lhs?.arg && lhs.fn === 'add') {\n            // Add(x,y) - z -> add(x, y, -z)\n            if (rhs !== undefined) lhs.arg.push(negate(rhs));\n          } else if (lhs && lhs.fn === 'subtract') {\n            // X-y - z      -> add(x, -y, -z)\n            lhs = wrapFn(\n              'add',\n              getArg(lhs, 0),\n              negate(getArg(lhs, 1)),\n              negate(rhs)\n            );\n          } else if (\n            isNumber(lhs) &&\n            !hasSup(lhs) &&\n            isNumber(rhs) &&\n            !hasSup(rhs) &&\n            (typeof rhs.num.re === 'undefined' || rhs.num.re === '0') &&\n            typeof rhs.num.im !== 'undefined'\n          ) {\n            lhs = {\n              num: {\n                re: lhs.num,\n                im: (-Number.parseFloat(rhs.num.im)).toString(),\n              },\n            };\n          } else {\n            lhs = wrapFn('subtract', lhs, rhs);\n          }\n        } else {\n          // Is there a function (e.g. 'add') implementing the\n          // associative version of this operator (e.g. '+')?\n          fn = ASSOCIATIVE_FUNCTION[opName];\n          if (fn === 'add' && lhs && lhs.fn === 'subtract') {\n            // Subtract(x, y) + z -> add(x, -y, z)\n            lhs = wrapFn('add', getArg(lhs, 0), negate(getArg(lhs, 1)), rhs);\n          } else if (fn && lhs && lhs.fn === fn && !hasSup(lhs)) {\n            // Add(x,y) + z -> add(x, y, z)\n            if (typeof rhs !== 'undefined') {\n              if (rhs.fn === fn && !hasSup(rhs) && rhs.arg) {\n                // Add(x, y) = add (a, b)\n                lhs.arg = [...lhs.arg, ...rhs.arg];\n              } else if (lhs.arg) {\n                lhs.arg.push(rhs);\n              }\n            }\n          } else if (fn && rhs && rhs.arg && rhs.fn === fn) {\n            // X =    y = z -> equal(x, y, z)\n            rhs.arg.unshift(lhs);\n            lhs = rhs;\n          } else if (\n            fn === 'multiply' &&\n            isNumber(lhs) &&\n            !hasSup(lhs) &&\n            rhs &&\n            asMachineNumber(rhs) === 10 &&\n            isNumber(rhs.sup)\n          ) {\n            // N * 10^m\n            lhs = wrapNumber(\n              asMachineNumber(lhs) * 10 ** asMachineNumber(rhs.sup)\n            );\n          } else if (\n            fn === 'add' &&\n            isNumber(lhs) &&\n            !hasSup(lhs) &&\n            rhs &&\n            numberIm(rhs) !== 0 &&\n            !hasSup(rhs)\n          ) {\n            lhs = {\n              num: {\n                re: lhs.num,\n                im: rhs.num.im,\n              },\n            };\n          } else {\n            lhs = wrapFn(fn || OP_NAME[opName] || opName, lhs, rhs);\n          }\n        }\n      }\n    }\n  }\n\n  expr.ast = lhs;\n  return expr;\n}\n\n/**\n * Return a string escaped as necessary to comply with the JSON format\n * @param {string} s\n * @return {string}\n * @private\n */\nfunction escapeText(s) {\n  return s\n    .replace(/\\\\/g, '\\\\\\\\')\n    .replace(/\"/g, '\\\\\"')\n    .replace(/[\\b]/g, '\\\\b')\n    .replace(/\\f/g, '\\\\f')\n    .replace(/\\n/g, '\\\\n')\n    .replace(/\\r/g, '\\\\r')\n    .replace(/\\t/g, '\\\\t');\n}\n\n/**\n * Return an AST representation of a single atom\n *\n */\nexport function atomToMathJson(\n  atom: Atom,\n  options: {\n    precision?: number;\n    decimalMarker?: string;\n    groupSeparator?: string;\n    product?: string;\n    exponentProduct?: string;\n    exponentMarker?: string;\n    arcSeparator?: string;\n    scientificNotation?: 'auto' | 'engineering' | 'on';\n    beginRepeatingDigits?: string;\n    endRepeatingDigits?: string;\n    macros?: any;\n  }\n): MathJson {\n  const MATH_VARIANTS = {\n    'double-struck': 'double-struck',\n    'calligraphic': 'script',\n    'script': 'script',\n    'fraktur': 'fraktur',\n    'sans-serif': 'sans-serif',\n    'monospace': 'monospace',\n  };\n  // TODO: See https://www.w3.org/TR/MathML2/chapter6.html#chars.letter-like-tables\n\n  let result: MathJsonExpression = {};\n  let sym = '';\n  let m;\n  let lhs;\n  let rhs;\n  const style = atom.computedStyle;\n  let variant =\n    MATH_VARIANTS[\n      style.variant +\n        (!style.variantStyle || style.variantStyle === 'up'\n          ? ''\n          : '-' + style.variantStyle)\n    ];\n  let variantSym;\n\n  let styleString = '';\n  if (style.fontSeries === 'b') styleString += 'bold';\n  if (style.fontShape === 'it') styleString += 'italic';\n\n  const { command } = atom;\n  switch (atom.type) {\n    case 'root':\n    case 'group':\n      // Macros appear as group as well. Handle some of them.\n      if (command?.startsWith('\\\\nicefrac')) {\n        m = command.slice(9).match(/({.*}|[^}])({.*}|[^}])/);\n        if (m) {\n          lhs = m[1].length === 1 ? m[1] : m[1].substr(1, m[1].length - 2);\n          lhs = parseLatex(lhs, 'math', null, options.macros);\n\n          rhs = m[2].length === 1 ? m[2] : m[2].substr(1, m[2].length - 2);\n          rhs = parseLatex(rhs, 'math', null, options.macros);\n\n          result = wrapFn('divide', parse(lhs, options), parse(rhs, options));\n        } else {\n          result = { fn: 'divide' };\n        }\n      } else {\n        result = { group: parse(atom.branch('body'), options) };\n      }\n\n      break;\n\n    case 'genfrac':\n      // If there's no denominator, or a placeholder, use \"1\" as the value\n      result = wrapFn(\n        'divide',\n        parse(atom.above, options),\n        atom.below?.[0]?.type === 'placeholder'\n          ? wrapNumber(1)\n          : parse(atom.below, options)\n      );\n      break;\n\n    case 'surd':\n      result = !atom.hasEmptyBranch('above')\n        ? wrapFn(\n            'pow',\n            parse(atom.body, options),\n            wrapFn('divide', wrapNumber(1), parse(atom.above, options))\n          )\n        : wrapFn('sqrt', parse(atom.body, options));\n      break;\n\n    case 'rule':\n      break;\n\n    // Case 'line':\n    case 'overlap':\n      // Case 'accent':\n      break;\n\n    case 'overunder':\n      break;\n\n    case 'mord':\n    case 'mbin':\n      // Check to see if it's a \\char command\n      m = !command\n        ? undefined\n        : command.match(/{?\\\\char\"([\\dabcdefABCDEF]*)}?/);\n      if (m) {\n        sym = String.fromCodePoint(Number.parseInt(m[1], 16));\n      } else {\n        sym = getCanonicalName(getString(atom));\n        if (sym.length > 0 && sym.startsWith('\\\\')) {\n          // This is an identifier with no special handling.\n          // Use the Unicode value if outside ASCII range\n          if (typeof atom.value === 'string') {\n            // TODO: consider making this an option?\n            // if (atom.branch('body').charCodeAt(0) > 255) {\n            //     sym = '&#x' + ('000000' +\n            //         atom.branch('body').charCodeAt(0).toString(16)).substr(-4) + ';';\n            // } else {\n            sym = atom.value;\n            // }\n          }\n        }\n      }\n\n      variantSym = escapeText(mathVariantToUnicode(sym, variant, styleString));\n      if (variantSym !== sym) {\n        // If there's a specific Unicode character matching this one\n        // no need to record a variant.\n        result = { sym: variantSym };\n        variant = 'normal';\n      } else {\n        result = { sym };\n      }\n\n      break;\n\n    // Case 'mpunct':\n    //     result = '<mo separator=\"true\">' + command + '</mo>';\n    //     break;\n\n    case 'minner':\n      break;\n\n    case 'mop':\n      break;\n\n    case 'box':\n      result = parse(atom.branch('body'), options);\n      break;\n\n    case 'enclose':\n      // Result = '<menclose notation=\"';\n      // for (const notation in atom.notation) {\n      //     if (Object.prototype.hasOwnProperty.call(atom.notation, notation) &&\n      //         atom.notation[notation]) {\n      //         result += sep + notation;\n      //         sep = ' ';\n      //     }\n      // }\n      // result += '\">' + toAST(atom.branch('body')).mathML + '</menclose>';\n      break;\n\n    case 'array':\n      if (atom instanceof ArrayAtom) {\n        if (atom.environmentName === 'cardinality') {\n          // @revisit... It's an environment, but not an array...?\n          result = wrapFn(\n            'card',\n            parse((atom.array as unknown) as Atom[], options)\n          );\n        } else if (/array|matrix|pmatrix|bmatrix/.test(atom.environmentName)) {\n          result = { fn: 'array', args: [] };\n          for (const row of atom.array) {\n            result.args.push(row.map((cell) => parse(cell, options)));\n          }\n        } else if (atom.environmentName === 'cases') {\n          result = { fn: 'cases', args: [] };\n          for (const row of atom.array) {\n            if (row[0]) {\n              const statement = [];\n              statement.push(parse(row[0], options));\n              let condition = parse(row[1], options);\n              if (condition) {\n                if (condition.fn === 'text' && condition.arg) {\n                  if (/^(if|when|for)$/i.test(condition.arg[0].trim())) {\n                    condition = condition.arg.filter(\n                      (x) => typeof x !== 'string'\n                    );\n                  }\n                }\n              }\n\n              statement.push(condition ?? {});\n              result.args.push(statement);\n            }\n          }\n        }\n      }\n\n      break;\n\n    case 'spacing':\n    case 'space':\n      break;\n    default:\n      result = undefined;\n      console.warn(\n        'Unhandled atom \"' +\n          atom.type +\n          '\" in \"' +\n          (atom.command ?? atom.branch('body')) +\n          '\"'\n      );\n  }\n\n  if (result && variant && variant !== 'normal') {\n    result.variant = variant;\n  }\n\n  return result;\n}\n\nfunction filterPresentationAtoms(\n  atoms: Atom | Atom[] | Atom[][] | Atom[][][]\n): Atom[] {\n  if (!atoms) return [];\n  let result;\n  if (isArray(atoms)) {\n    result = [];\n    for (const atom of atoms) {\n      const filter = filterPresentationAtoms(atom);\n      result = result.concat(filter);\n    }\n  } else {\n    if (atoms.type === 'spacing' || atoms.type === 'first') {\n      return [];\n    }\n\n    if (atoms.type === 'box') {\n      result = filterPresentationAtoms(atoms.branch('body'));\n    } else {\n      if (!atoms.hasEmptyBranch('body')) {\n        atoms.setChildren(\n          filterPresentationAtoms(atoms.branch('body')),\n          'body'\n        );\n      }\n\n      if (!atoms.hasEmptyBranch('superscript')) {\n        atoms.setChildren(\n          filterPresentationAtoms(atoms.branch('superscript')),\n          'superscript'\n        );\n      }\n\n      if (!atoms.hasEmptyBranch('subscript')) {\n        atoms.setChildren(\n          filterPresentationAtoms(atoms.branch('subscript')),\n          'subscript'\n        );\n      }\n\n      if (atoms instanceof ArrayAtom) {\n        atoms.array = atoms.array.map((row) =>\n          row.map((cell) => filterPresentationAtoms(cell))\n        );\n      }\n\n      result = [atoms];\n    }\n  }\n\n  return result;\n}\n\n/**\n * Parse a sequence of text zone and math zones:\n * <sentence> := ((<text>) <expression>)+\n */\nfunction parseSentence(\n  expr: ParseState,\n  options?: MathJsonLatexOptions\n): MathJson {\n  expr.index = expr.index || 0;\n  expr.ast = undefined;\n\n  const zones = [];\n  // Iterate while we have atoms to look at\n  while (expr.atoms[expr.index]) {\n    if (expr.atoms[expr.index].mode === 'text') {\n      // Text mode atom...\n      let text = '';\n      while (expr.atoms[expr.index] && expr.atoms[expr.index].mode === 'text') {\n        text += expr.atoms[expr.index].value;\n        expr.index += 1;\n      }\n\n      zones.push(wrapFn('text', text));\n    } else {\n      const z = parseExpression(expr, options).ast;\n      // Something went wrong in parsing the expression...\n      if (!z) return undefined;\n      zones.push(z);\n    }\n  }\n\n  if (zones.length > 1) {\n    return wrapFn('sequence', ...zones);\n  }\n\n  return zones[0] || undefined;\n}\n\nfunction parse(atoms: Atom | Atom[], options?: MathJsonLatexOptions): MathJson {\n  return parseSentence({ atoms: filterPresentationAtoms(atoms) }, options);\n}\n\nexport function atomtoMathJson(\n  atoms: Atom | Atom[],\n  options?: MathJsonLatexOptions\n): MathJson {\n  return parse(atoms, options);\n}\n\n/**\n *\n * @param {string} fence - The fence to wrap around the arguments\n * @return {string} - A string wrapped in the fence\n */\nfunction wrapFence(fence: string, ...args): string {\n  fence = fence || '.. ';\n  let result = '';\n  if (args.length > 0) {\n    if (!fence.startsWith('.')) result += fence[0];\n    let sep = '';\n    for (const arg of args) {\n      result += sep + arg;\n      sep = fence[2];\n    }\n\n    if (fence[1] !== '.') result += fence[1];\n  }\n\n  return result;\n}\n\n/**\n * Return a formatted mantissa:\n * 1234567 -> 123 456 7...\n * 1233333 -> 12(3)\n * @param {string} m\n * @param {Object.<string, any>} config\n * @private\n */\nfunction formatMantissa(m, config) {\n  const originalLength = m.length;\n  // The last digit may have been rounded, if it exceeds the precison,\n  // which could throw off the\n  // repeating pattern detection. Ignore   it.\n  m = m.slice(0, Math.max(0, config.precision - 2));\n\n  for (let i = 0; i < m.length - 16; i++) {\n    // Offset is the part of the mantissa that is not repeating\n    const offset = m.slice(0, Math.max(0, i));\n    // Try to find a repeating pattern of length j\n    for (let j = 0; j < 17; j++) {\n      const cycle = m.substr(i, j + 1);\n      const times = Math.floor((m.length - offset.length) / cycle.length);\n      if (times > 1) {\n        if ((offset + cycle.repeat(times + 1)).startsWith(m)) {\n          // We've found a repeating pattern!\n          if (cycle === '0') {\n            return offset.replace(/(\\d{3})/g, '$1' + config.groupSeparator);\n          }\n\n          return (\n            offset.replace(/(\\d{3})/g, '$1' + config.groupSeparator) +\n            config.beginRepeatingDigits +\n            cycle.replace(/(\\d{3})/g, '$1' + config.groupSeparator) +\n            config.endRepeatingDigits\n          );\n        }\n      }\n    }\n  }\n\n  if (originalLength !== m.length) {\n    m += '\\\\ldots';\n  }\n\n  return m.replace(/(\\d{3})/g, '$1' + config.groupSeparator);\n}\n\nfunction parseFloatToPrecision(number) {\n  return Number.parseFloat(Number.parseFloat(number).toPrecision(15));\n}\n\n/**\n *\n * @param num - A number, represented as a string (e.g. \"-12.45\"\n *  particularly useful for arbitrary precision numbers) or a number (-12.45)\n * @return A LaTeX representation of the AST\n */\nfunction numberAsLatex(\n  number: string | number,\n  config: Required<MathJsonLatexOptions>\n): string {\n  let result = '';\n  let value: number;\n\n  if (typeof config.precision === 'number') {\n    if (typeof number === 'number') {\n      value = parseFloatToPrecision(number);\n    } else {\n      let sign = '';\n      let exponent = '';\n      if (number.startsWith('-')) {\n        sign = '-';\n        number = number.slice(1);\n      } else if (number.startsWith('+')) {\n        number = number.slice(1);\n      }\n\n      if (number.includes('.')) {\n        const m = number.match(/(\\d*).(\\d*)([e|E]([-+]?\\d*))?/);\n        const base = m[1];\n        const mantissa = m[2].slice(\n          0,\n          Math.max(0, Math.min(config.precision - base.length, m[2].length))\n        );\n        exponent = m[4] || '';\n\n        if (base === '0') {\n          let p = 0; // Index of the first non-zero digit after the decimal\n          while (mantissa[p] === '0' && p < mantissa.length) {\n            p += 1;\n          }\n\n          let r = '';\n          if (p <= 4) {\n            r = '0' + config.decimalMarker;\n            r += mantissa.slice(0, Math.max(0, p));\n            r += formatMantissa(number.slice(r.length), config);\n          } else if (p + 1 >= config.precision) {\n            r = '0';\n            sign = '';\n          } else {\n            r = number[p];\n            const f = formatMantissa(number.slice(p + 1), config);\n            if (f) {\n              r += config.decimalMarker + f;\n            }\n          }\n\n          if (r !== '0') {\n            if (\n              number.length - 1 > config.precision &&\n              !r.endsWith('}') &&\n              !r.endsWith('\\\\ldots')\n            ) {\n              r += '\\\\ldots';\n            }\n\n            if (p > 4) {\n              r += config.exponentProduct;\n              r += config.exponentMarker\n                ? config.exponentMarker + (1 - p).toString()\n                : '10^{' + (1 - p).toString() + '}';\n            }\n          }\n\n          number = r;\n        } else {\n          number = base.replace(/\\B(?=(\\d{3})+(?!\\d))/g, config.groupSeparator);\n          const f = formatMantissa(mantissa, config);\n          if (f) {\n            number += config.decimalMarker + f;\n            // If (num.length - 1 > config.precision && !num.endsWith('}') && !num.endsWith('\\\\ldots')) {\n            //     num += '\\\\ldots';\n            // }\n          }\n        }\n      } else if (number.length > config.precision) {\n        const { length } = number;\n        let r = number[0];\n        const f = formatMantissa(number.slice(2), config);\n        if (f) {\n          r += config.decimalMarker + f;\n          if (!r.endsWith('}')) {\n            r += '\\\\ldots';\n          }\n        }\n\n        if (r !== '1') {\n          r += config.exponentProduct;\n        } else {\n          r = '';\n        }\n\n        r += config.exponentMarker\n          ? config.exponentMarker + (length - 2).toString()\n          : '10^{' + (length - 2).toString() + '}';\n\n        number = r;\n      } else {\n        number = number.replace(/\\B(?=(\\d{3})+(?!\\d))/g, config.groupSeparator);\n      }\n\n      if (exponent) {\n        // There is an exponent...\n        exponent = config.exponentMarker\n          ? config.exponentMarker + exponent\n          : config.exponentProduct + ' 10^{' + exponent + '}';\n      }\n\n      return sign + number + exponent;\n    }\n  }\n\n  if (config.scientificNotation === 'engineering') {\n    // Ensure the exponent is a multiple of 3\n    if (value === 0) {\n      result = '0';\n    } else {\n      const y = Math.abs(value);\n      let exponent: number = Math.round(Math.log10(y));\n      exponent -= exponent % 3;\n      if (y < 1000) exponent = 0;\n      const mantissa = y / 10 ** exponent;\n      let mantissaString = '';\n      const m = mantissa.toString().match(/^(.*)\\.(.*)$/);\n      if (m?.[1] && m[2]) {\n        mantissaString = m[1] + config.decimalMarker + m[2];\n      }\n\n      if (config.groupSeparator) {\n        mantissaString = formatMantissa(mantissa.toExponential(), config);\n      }\n\n      let exponentString = '';\n      if (exponent === 0) {\n        exponentString = '';\n      } else if (config.exponentMarker) {\n        exponentString = config.exponentMarker + exponent;\n      } else {\n        exponentString = config.exponentProduct + ' 10^{' + exponent + '}';\n      }\n\n      result = (value < 0 ? '-' : '') + mantissaString + exponentString;\n    }\n  } else {\n    const valueString = typeof number === 'string' ? number : number.toString();\n    let m = valueString.match(/^(.*)[e|]([-+]?\\d*)$/i);\n    let base;\n    let exponent;\n    let mantissa;\n    base = valueString;\n    mantissa = '';\n    if (m?.[1] && m[2]) {\n      // There is an exponent...\n      base = m[1];\n      exponent = config.exponentMarker\n        ? config.exponentMarker + m[2]\n        : config.exponentProduct + ' 10^{' + m[2] + '}';\n    }\n\n    m = base.match(/^(.*)\\.(.*)$/);\n    if (m?.[1] && m[2]) {\n      base = m[1];\n      mantissa = m[2];\n    }\n\n    if (config.groupSeparator) {\n      base = base.replace(/\\B(?=(\\d{3})+(?!\\d))/g, config.groupSeparator);\n      mantissa = formatMantissa(mantissa, config);\n    }\n\n    if (mantissa) mantissa = config.decimalMarker + mantissa;\n    result = base + mantissa + (exponent || '');\n  }\n\n  return result;\n}\n\n/**\n *\n * @param {object} ast - Abstract Syntax Tree object (in canonical form)\n * @return {string} A LaTeX representation of the AST\n */\nexport function jsonToLatex(\n  ast: MathJson,\n  options?: MathJsonLatexOptions\n): string {\n  const config: Required<MathJsonLatexOptions> = {\n    precision: 14,\n    decimalMarker: '.',\n    groupSeparator: '\\\\, ',\n    product: '\\\\cdot ', // \\\\times, \\\\,\n    exponentProduct: '\\\\cdot ',\n    exponentMarker: '',\n    arcSeparator: '\\\\,',\n    scientificNotation: 'auto', // 'engineering', 'auto', 'on'\n    beginRepeatingDigits: '\\\\overline{',\n    endRepeatingDigits: '}',\n    ...options,\n  };\n\n  let result = '';\n\n  if (ast === undefined) return '';\n  if (typeof ast === 'string') {\n    result = ast;\n  } else if (ast.latex) {\n    // If ast.latex key is present, use it to render the element\n    result = ast.latex;\n  } else if (isNumber(ast)) {\n    const value = asMachineNumber(ast);\n    if (value === -Infinity) {\n      result = '-\\\\infty ';\n    } else if (value === Infinity) {\n      result = '\\\\infty ';\n    } else if (\n      typeof ast.num === 'object' &&\n      (typeof ast.num.re === 'string' || typeof ast.num.im === 'string')\n    ) {\n      const re = numberRe(ast);\n      const im = numberIm(ast);\n      if (Number.isNaN(re) || Number.isNaN(im)) {\n        result = '\\\\text{NaN}';\n      } else if (\n        Math.abs(im) <= Number.EPSILON &&\n        Math.abs(re) <= Number.EPSILON\n      ) {\n        result = '0';\n      } else {\n        if (Math.abs(re) > Number.EPSILON) {\n          result = numberAsLatex(re, config);\n        }\n\n        if (Math.abs(im) > Number.EPSILON) {\n          if (Math.abs(re) > Number.EPSILON) {\n            result += im > 0 ? '+' : '';\n          }\n\n          result +=\n            (Math.abs(im) !== 1 ? numberAsLatex(im, config) : '') +\n            '\\\\imaginaryI ';\n        }\n      }\n    } else if (Number.isNaN(value)) {\n      result = '\\\\text{NaN}';\n    } else {\n      result = numberAsLatex(ast.num, config);\n    }\n\n    if (hasSup(ast)) result += '^{' + jsonToLatex(ast.sup, config) + '}';\n    if (hasSub(ast)) result += '_{' + jsonToLatex(ast.sub, config) + '}';\n  } else if (ast.group) {\n    result = jsonToLatex(ast.group, config);\n    if (!isNumber(ast.group) && !asSymbol(ast.group)) {\n      result = wrapFence(ast.fence || '(),', result);\n    } else if (numberIm(ast.group) !== 0) {\n      result = wrapFence(ast.fence || '(),', result);\n    }\n\n    if (hasSup(ast)) result += '^{' + jsonToLatex(ast.sup, config) + '}';\n    if (hasSub(ast)) result += '_{' + jsonToLatex(ast.sub, config) + '}';\n  } else if (ast.fn) {\n    if (ast.fn === 'bind') {\n      result = jsonToLatex(getArg(ast, 0), config) + '|_{';\n      if (ast.arg && ast.arg.length === 2) {\n        result += jsonToLatex(getArg(ast, 1));\n      } else {\n        let sep = '';\n        for (let i = 1; i < ast.arg.length; i += 2) {\n          result +=\n            sep +\n            jsonToLatex(getArg(ast, i)) +\n            ' = ' +\n            jsonToLatex(getArg(ast, i + 1));\n          sep = ', ';\n        }\n      }\n\n      result += '}';\n    } else if (ast.fn === 'divide') {\n      result =\n        '\\\\frac{' +\n        jsonToLatex(getArg(ast, 0), config) +\n        '}{' +\n        jsonToLatex(getArg(ast, 1), config) +\n        '}';\n    } else if (ast.fn === 'negate') {\n      result = '-' + jsonToLatex(getArg(ast, 0), config);\n    } else if (ast.fn === 'subtract') {\n      result =\n        jsonToLatex(getArg(ast, 0), config) +\n        ' - ' +\n        jsonToLatex(getArg(ast, 1), config);\n    } else if (\n      (ast.fn === 'add' || ast.fn === 'multiply') &&\n      isArray(ast.arg)\n    ) {\n      const a = [];\n      for (const exp of ast.arg) {\n        if (exp.fn === 'add' || exp.fn === 'subtract') {\n          a.push(wrapFence('() ', jsonToLatex(exp, config)));\n        } else if (isComplexWithRealAndImaginary(exp)) {\n          // Complex numbers that have both a real and imaginary part\n          // should be wrapped in parentheses\n          a.push(wrapFence('() ', jsonToLatex(exp, config)));\n        } else if (\n          hasSup(ast) &&\n          !(numberIm(exp) === 0 || numberIm(exp) === 1)\n        ) {\n          // Wrap with parentheses if there's an exponent\n          // and the imaginary part is neither 0 nor 1\n          a.push(wrapFence('() ', jsonToLatex(exp, config)));\n        } else {\n          a.push(jsonToLatex(exp, config));\n        }\n      }\n\n      if (ast.fn === 'multiply') {\n        result =\n          ast.arg &&\n          ast.arg.length === 2 &&\n          (isNumber(ast.arg[0]) || ast.arg[0].fn === 'divide') &&\n          (!isNumber(ast.arg[1]) ||\n            (numberRe(ast.arg[1]) === 0 && numberIm(ast.arg[1]) === 1))\n            ? a[0] + a[1]\n            : a.join(' \\\\times ');\n      } else {\n        // Addition (and subtraction)\n        if (ast.arg && ast.arg.length === 1) {\n          result =\n            ast.arg[0].fn === 'negate' ||\n            (isNumber(ast.arg[0]) && asMachineNumber(ast.arg[0]) < 0)\n              ? a[0]\n              : '+' + a[0];\n        } else {\n          result = a[0];\n          for (let i = 1; i < ast.arg.length; i++) {\n            result +=\n              ast.arg[i].fn === 'negate' ||\n              (isNumber(ast.arg[i]) && asMachineNumber(ast.arg[i]) < 0)\n                ? a[i]\n                : ' + ' + a[i];\n          }\n        }\n      }\n    } else if (ast.fn === 'list' || ast.fn === 'list2') {\n      const a = [];\n      if (ast.arg) {\n        for (const exp of ast.arg) {\n          a.push(jsonToLatex(exp, config));\n        }\n      }\n\n      result = a.join(ast.fn === 'list2' ? '; ' : ', ');\n    } else if (ast.fn === 'sequence') {\n      result = joinLatex(ast.arg.map((x) => jsonToLatex(x, config)));\n    } else if (ast.fn === 'text') {\n      result = '\\\\text{' + (ast.arg[0] || '') + '}';\n    } else if (ast.fn === 'pow' && isArray(ast.arg) && ast.arg.length >= 2) {\n      result = jsonToLatex(getArg(ast, 0), config);\n      if (!isNumber(getArg(ast, 0)) && !asSymbol(getArg(ast, 0))) {\n        result = wrapFence(ast.fence || '(),', result);\n      }\n\n      result += '^{' + jsonToLatex(getArg(ast, 1), config) + '}';\n    } else if (ast.fn === 'equal' && ast.arg && ast.arg.length > 2) {\n      result = ast.arg.map((x) => jsonToLatex(x, config)).join(' = ');\n    } else {\n      const fn = getLatexTemplateForFunction(ast.fn);\n      result = fn;\n      let argstring = '';\n      const parenRequired =\n        /%(?![01_^])/.test(fn) && isArray(ast.arg) && ast.arg.length > 1;\n      if (parenRequired) {\n        // Parenthesis are required if argument list is longer than 1\n        result += wrapFence(\n          ast.fence || '(),',\n          ...ast.arg.map((x) => jsonToLatex(x, config))\n        );\n      } else if (isArray(ast.arg) && ast.arg.length > 0) {\n        // The parenthesis may be optional...\n        const arg0 = jsonToLatex(getArg(ast, 0), config);\n        const arg1 = jsonToLatex(getArg(ast, 1), config);\n        const argsn = [...ast.arg];\n        if (fn.includes('%0')) {\n          result = result.replace('%0', arg0);\n          argsn.shift();\n        }\n\n        if (fn.includes('%1')) {\n          result = result.replace('%1', arg1);\n          argsn.shift();\n        }\n\n        if (argsn.length > 0) {\n          argstring = wrapFence(\n            ast.fence || '(),',\n            ...argsn.map((x) => jsonToLatex(x, config))\n          );\n        }\n      } else {\n        // Empty argument list\n        argstring = wrapFence(ast.fence || '(),', '');\n      }\n\n      result = hasSup(ast)\n        ? result.replace('%^', '^{' + jsonToLatex(ast.sup, config) + '}')\n        : result.replace('%^', '');\n      result = hasSub(ast)\n        ? result.replace('%_', '_{' + jsonToLatex(ast.sub, config) + '}')\n        : result.replace('%_', '');\n\n      // Insert the arguments in the function template (%)\n      result = result.replace(/%(?![01_^])/, argstring);\n      // If there are any placeholders left, remove them\n      result = result.replace('%0', '').replace('%1', '');\n    }\n  } else if (typeof ast.sym === 'string') {\n    result = asSymbol(ast);\n    // Is it a Unicode value?\n    let m = result.match(/^&#x([\\da-f]+);$/i);\n    if (m?.[1]) {\n      result = String.fromCodePoint(Number.parseInt(m[1], 16));\n    } else {\n      m = result.match(/^&#(\\d+);$/i);\n      if (m?.[1]) {\n        result = String.fromCodePoint(Number.parseInt(m[1]));\n      }\n    }\n\n    // Is there a variant info attached to it?\n    if (typeof ast.variant === 'string') {\n      const MATH_VARIANTS = {\n        'normal': 'mathrm',\n        'double-struck': 'mathbb',\n        'bold': 'mathbf',\n        // 'script': 'mathcal',\n        'fraktur': 'mathfrak',\n        'script': 'mathscr',\n        'sans-serif': 'mathsf',\n        'monospace': 'mathtt',\n      };\n      result = '\\\\' + MATH_VARIANTS[ast.variant] + '{' + result + '}';\n    }\n\n    if (hasSup(ast)) result += '^{' + jsonToLatex(ast.sup, config) + '}';\n    if (hasSub(ast)) result += '_{' + jsonToLatex(ast.sub, config) + '}';\n  } else if (typeof ast.text === 'string') {\n    result = '\\\\text{' + ast.text + '}';\n  }\n\n  // If there was an error attached to this node,\n  // display it on a red background\n  if (typeof ast.error === 'string') {\n    result = '\\\\bbox[#F56165]{' + result + '}';\n  }\n\n  return result;\n}\n","import type { MathfieldOptions } from '../public/options';\nimport { Atom } from '../core/atom';\nimport { stringToColor } from '../core/color';\nconst SPECIAL_OPERATORS = {\n  '\\\\pm': '&#177;',\n  '\\\\times': '&#215;',\n  '\\\\colon': ':',\n  '\\\\vert': '|',\n  '\\\\Vert': '\\u2225',\n  '\\\\mid': '\\u2223',\n  '\\\\lbrace': '{',\n  '\\\\rbrace': '}',\n  '\\\\langle': '\\u27E8',\n  '\\\\rangle': '\\u27E9',\n  '\\\\lfloor': '\\u230A',\n  '\\\\rfloor': '\\u230B',\n  '\\\\lceil': '\\u2308',\n  '\\\\rceil': '\\u2309',\n\n  '\\\\vec': '&#x20d7;',\n  '\\\\acute': '&#x00b4;',\n  '\\\\grave': '&#x0060;',\n  '\\\\dot': '&#x02d9;',\n  '\\\\ddot': '&#x00a8;',\n  '\\\\tilde': '&#x007e;',\n  '\\\\bar': '&#x00af;',\n  '\\\\breve': '&#x02d8;',\n  '\\\\check': '&#x02c7;',\n  '\\\\hat': '&#x005e;',\n};\n\nconst APPLY_FUNCTION = '&#x2061;';\n\nconst INVISIBLE_TIMES = '&#8290;';\n\nfunction xmlEscape(string: string): string {\n  return (\n    string\n      // .replace(/&/g, '&amp;')\n      .replace(/\"/g, '&quot;')\n      .replace(/'/g, '&#39;')\n      .replace(/</g, '&lt;')\n      .replace(/>/g, '&gt;')\n  );\n}\n\nfunction makeID(id, options) {\n  if (!id || !options.generateID) return '';\n  // Note: the 'extid' attribute is recognized by SRE as an attribute\n  // to be passed to SSML as a <mark> tag.\n  return ' extid=\"' + id + '\"';\n}\n\nfunction scanIdentifier(stream, final, options) {\n  let result = false;\n  final = final || stream.atoms.length;\n  let mathML = '';\n  let body = '';\n  let superscript = -1;\n  let subscript = -1;\n  const atom: Atom = stream.atoms[stream.index];\n\n  if (\n    stream.index < final &&\n    atom.type === 'mord' &&\n    !'0123456789,.'.includes(atom.value)\n  ) {\n    body = atomToMathML(atom, options);\n    if (atom.superscript) {\n      superscript = stream.index;\n    }\n\n    if (atom.subscript) {\n      subscript = stream.index;\n    }\n\n    stream.index += 1;\n  }\n\n  if (body.length > 0) {\n    result = true;\n\n    // If there are separate atoms for sub/sup, record them\n    if (isSuperscriptAtom(stream)) {\n      superscript = stream.index;\n      stream.index += 1;\n    }\n\n    if (isSubscriptAtom(stream)) {\n      subscript = stream.index;\n      stream.index += 1;\n    }\n\n    if (superscript >= 0 && subscript >= 0) {\n      mathML = '<msubsup>' + body;\n      mathML += toMathML(stream.atoms[subscript].subscript, 0, 0, options)\n        .mathML;\n      mathML += toMathML(stream.atoms[superscript].superscript, 0, 0, options)\n        .mathML;\n      mathML += '</msubsup>';\n    } else if (superscript >= 0) {\n      mathML = '<msup>' + body;\n      if (isSuperscriptAtom(stream)) {\n        // There's another superscript after this one. Maybe double-prime?\n        const sup = toMathML(\n          stream.atoms[superscript].superscript,\n          0,\n          0,\n          options\n        ).mathML;\n\n        const sup2 = toMathML(\n          stream.atoms[superscript + 1].superscript,\n          0,\n          0,\n          options\n        ).mathML;\n        if (\n          (sup === '<mi>\\u2032</mi>' || sup === '<mi>&#x2032;</mi>') &&\n          (sup2 === '<mi>\\u2032</mi>' || sup2 === '<mi>&#x2032;</mi>')\n        ) {\n          mathML += '<mi>&#x2033;</mi>';\n        } else if (sup === '<mi>\\u2032</mi>' || sup === '<mi>&#x2032;</mi>') {\n          mathML += '<mi>&#x2032;</mi>';\n        } else {\n          mathML += sup;\n        }\n      } else {\n        mathML += toMathML(stream.atoms[superscript].superscript, 0, 0, options)\n          .mathML;\n      }\n\n      mathML += '</msup>';\n    } else if (subscript >= 0) {\n      mathML = '<msub>' + body;\n      mathML += toMathML(stream.atoms[subscript].subscript, 0, 0, options)\n        .mathML;\n      mathML += '</msub>';\n    } else {\n      mathML = body;\n    }\n\n    if (\n      (stream.lastType === 'mi' ||\n        stream.lastType === 'mn' ||\n        stream.lastType === 'mtext' ||\n        stream.lastType === 'fence') &&\n      !/^<mo>(.*)<\\/mo>$/.test(mathML)\n    ) {\n      mathML = `<mo>${INVISIBLE_TIMES}</mo>${mathML}`; // &InvisibleTimes;\n    }\n\n    if (body.endsWith('>f</mi>') || body.endsWith('>g</mi>')) {\n      mathML += `<mo>${APPLY_FUNCTION}</mo>`; // &ApplyFunction;\n      stream.lastType = 'applyfunction';\n    } else {\n      stream.lastType = /^<mo>(.*)<\\/mo>$/.test(mathML) ? 'mo' : 'mi';\n    }\n\n    stream.mathML += mathML;\n  }\n\n  return result;\n}\n\n/**\n * Return true if the current atom is a standalone superscript atom\n * i.e. an atom with no content, except of a superscript.\n * Superscripts can be encoded either as an attribute on the last atom\n * or as a standalone, empty, atom following the one to which it applies.\n * @param {object} stream\n */\nfunction isSuperscriptAtom(stream) {\n  return (\n    stream.index < stream.atoms.length &&\n    stream.atoms[stream.index].superscript &&\n    stream.atoms[stream.index].type === 'msubsup'\n  );\n}\n\nfunction isSubscriptAtom(stream) {\n  return (\n    stream.index < stream.atoms.length &&\n    stream.atoms[stream.index].subscript &&\n    stream.atoms[stream.index].type === 'msubsup'\n  );\n}\n\nfunction indexOfSuperscriptInNumber(stream) {\n  let result = -1;\n  let i = stream.index;\n  let done = false;\n  let found = false;\n  while (i < stream.atoms.length && !done && !found) {\n    done =\n      stream.atoms[i].type !== 'mord' ||\n      !'0123456789,.'.includes(stream.atoms[i].body);\n    found = !done && stream.atoms[i].superscript;\n    i++;\n  }\n\n  if (found) {\n    result = i - 1;\n  }\n\n  return result;\n}\n\nfunction parseSubsup(base, stream, options) {\n  let result = false;\n  let mathML = '';\n  let atom: Atom = stream.atoms[stream.index - 1];\n\n  if (!atom) {\n    return false;\n  }\n\n  if (!atom.superscript && !atom.subscript) {\n    if (isSuperscriptAtom(stream) || isSubscriptAtom(stream)) {\n      atom = stream.atoms[stream.index];\n      stream.index += 1;\n    }\n  }\n\n  if (!atom) {\n    return false;\n  }\n\n  if (atom.superscript && atom.subscript) {\n    mathML = '<msubsup>' + base;\n    mathML += toMathML(atom.subscript, 0, 0, options).mathML;\n    mathML += toMathML(atom.superscript, 0, 0, options).mathML;\n    mathML += '</msubsup>';\n  } else if (atom.superscript) {\n    mathML = '<msup>' + base;\n    mathML += toMathML(atom.superscript, 0, 0, options).mathML;\n    mathML += '</msup>';\n  } else if (atom.subscript) {\n    mathML = '<msub>' + base;\n    mathML += toMathML(atom.subscript, 0, 0, options).mathML;\n    mathML += '</msub>';\n  }\n\n  if (mathML.length > 0) {\n    result = true;\n    stream.mathML += mathML;\n    stream.lastType = '';\n  }\n\n  return result;\n}\n\nfunction scanText(stream, final, options) {\n  let result = false;\n  final = final || stream.atoms.length;\n  const initial = stream.index;\n  let mathML = '';\n  while (stream.index < final && stream.atoms[stream.index].mode === 'text') {\n    mathML += stream.atoms[stream.index].body\n      ? stream.atoms[stream.index].body\n      : ' ';\n    stream.index += 1;\n  }\n\n  if (mathML.length > 0) {\n    result = true;\n    mathML =\n      '<mtext' +\n      makeID(stream.atoms[initial].id, options) +\n      '>' +\n      mathML +\n      '</mtext>';\n\n    stream.mathML += mathML;\n    stream.lastType = 'mtext';\n  }\n\n  return result;\n}\n\nfunction scanNumber(stream, final, options) {\n  let result = false;\n  final = final || stream.atoms.length;\n  const initial = stream.index;\n  let mathML = '';\n\n  let superscript = indexOfSuperscriptInNumber(stream);\n  if (superscript >= 0 && superscript < final) {\n    final = superscript;\n  }\n\n  while (\n    stream.index < final &&\n    stream.atoms[stream.index].type === 'mord' &&\n    '0123456789,.'.includes(stream.atoms[stream.index].body)\n  ) {\n    mathML += stream.atoms[stream.index].body;\n    stream.index += 1;\n  }\n\n  if (mathML.length > 0) {\n    result = true;\n    mathML =\n      '<mn' +\n      makeID(stream.atoms[initial].id, options) +\n      '>' +\n      mathML +\n      '</mn>';\n\n    if (superscript < 0 && isSuperscriptAtom(stream)) {\n      superscript = stream.index;\n      stream.index += 1;\n    }\n\n    if (superscript >= 0) {\n      mathML = '<msup>' + mathML;\n      mathML += toMathML(stream.atoms[superscript].superscript, 0, 0, options)\n        .mathML;\n      mathML += '</msup>';\n    }\n\n    stream.mathML += mathML;\n    stream.lastType = 'mn';\n  }\n\n  return result;\n}\n\nfunction scanFence(stream, final, options) {\n  let result = false;\n  final = final || stream.atoms.length;\n  let mathML = '';\n  let lastType = '';\n\n  if (stream.index < final && stream.atoms[stream.index].type === 'mopen') {\n    let found = false;\n    let depth = 0;\n    const openIndex = stream.index;\n    let closeIndex = -1;\n    let index = openIndex + 1;\n    while (index < final && !found) {\n      if (stream.atoms[index].type === 'mopen') {\n        depth += 1;\n      } else if (stream.atoms[index].type === 'mclose') {\n        depth -= 1;\n      }\n\n      if (depth === -1) {\n        found = true;\n        closeIndex = index;\n      }\n\n      index += 1;\n    }\n\n    if (found) {\n      // TODO: could add attribute indicating it's a fence (fence=true)\n      mathML = '<mrow>';\n      mathML += toMo(stream.atoms[openIndex], options);\n\n      mathML += toMathML(stream.atoms, openIndex + 1, closeIndex, options)\n        .mathML;\n\n      // TODO: could add attribute indicating it's a fence (fence=true)\n      mathML += toMo(stream.atoms[closeIndex], options);\n      mathML += '</mrow>';\n\n      if (\n        stream.lastType === 'mi' ||\n        stream.lastType === 'mn' ||\n        stream.lastType === 'mfrac' ||\n        stream.lastType === 'fence'\n      ) {\n        mathML = `<mo>${INVISIBLE_TIMES}</mo>${mathML}`; // &InvisibleTimes;\n      }\n\n      stream.index = closeIndex + 1;\n\n      if (parseSubsup(mathML, stream, options)) {\n        result = true;\n        stream.lastType = '';\n        mathML = '';\n      }\n\n      lastType = 'fence';\n    }\n  }\n\n  if (mathML.length > 0) {\n    result = true;\n    stream.mathML += mathML;\n    stream.lastType = lastType;\n  }\n\n  return result;\n}\n\nfunction scanOperator(stream, final, options) {\n  let result = false;\n  final = final || stream.atoms.length;\n  let mathML = '';\n  let lastType = '';\n  const atom: Atom = stream.atoms[stream.index];\n\n  if (stream.index < final && (atom.type === 'mbin' || atom.type === 'mrel')) {\n    mathML += atomToMathML(stream.atoms[stream.index], options);\n    stream.index += 1;\n    lastType = 'mo';\n  } else if (stream.index < final && atom.type === 'mop') {\n    // MathML += '<mrow>';\n\n    if (\n      atom.subsupPlacement === 'over-under' &&\n      (atom.superscript || atom.subscript)\n    ) {\n      // Operator with limits, e.g. \\sum\n      const op = toMo(atom, options);\n      if (atom.superscript && atom.subscript) {\n        // Both superscript and subscript\n        mathML += '<munderover>' + op;\n\n        mathML += toMathML(atom.subscript, 0, 0, options).mathML;\n        mathML += toMathML(atom.superscript, 0, 0, options).mathML;\n        mathML += '</munderover>';\n      } else if (atom.superscript) {\n        // Superscript only\n        mathML += '<mover>' + op;\n        mathML += toMathML(atom.superscript, 0, 0, options).mathML;\n        mathML += '</mover>';\n      } else {\n        // Subscript only\n        mathML += '<munder>' + op;\n        mathML += toMathML(atom.subscript, 0, 0, options).mathML;\n        mathML += '</munder>';\n      }\n\n      lastType = 'mo';\n    } else {\n      const atom = stream.atoms[stream.index];\n      const isUnit = atom.symbol === '\\\\operatorname';\n      const op = isUnit\n        ? '<mi class=\"MathML-Unit\"' +\n          makeID(atom.id, options) +\n          '>' +\n          toString(atom.value) +\n          '</mi>'\n        : toMo(atom, options);\n      mathML += op;\n      stream.index += 1;\n      if (parseSubsup(mathML, stream, options)) {\n        result = true;\n        stream.lastType = '';\n        mathML = '';\n      }\n\n      stream.index -= 1;\n      if (!isUnit && !/^<mo>(.*)<\\/mo>$/.test(op)) {\n        mathML += `<mo>${APPLY_FUNCTION}</mo>`; // APPLY FUNCTION\n        // mathML += scanArgument(stream);\n        lastType = 'applyfunction';\n      } else {\n        lastType = isUnit ? 'mi' : 'mo';\n      }\n    }\n    // MathML += '</mrow>';\n\n    if (\n      (stream.lastType === 'mi' || stream.lastType === 'mn') &&\n      !/^<mo>(.*)<\\/mo>$/.test(mathML)\n    ) {\n      mathML = `<mo>${INVISIBLE_TIMES}</mo>${mathML}`; // &InvisibleTimes;\n    }\n\n    stream.index += 1;\n  }\n\n  if (mathML.length > 0) {\n    result = true;\n    stream.mathML += mathML;\n    stream.lastType = lastType;\n  }\n\n  return result;\n}\n\n/**\n * Given an atom or an array of atoms, return their MathML representation as\n * a string.\n * @param {string|Atom|Atom[]} input\n * @param initial index of the input to start conversion from\n * @param final last index of the input to stop conversion to\n */\nfunction toMathML(\n  input: number | boolean | string | Atom | Atom[],\n  initial: number,\n  final: number,\n  options: Partial<MathfieldOptions>\n): {\n  atoms: number | boolean | string | Atom | Atom[];\n  index: number;\n  mathML: string;\n  lastType: string;\n} {\n  const result = {\n    atoms: input,\n    index: initial ?? 0,\n    mathML: '',\n    lastType: '',\n  };\n\n  if (typeof input === 'number' || typeof input === 'boolean') {\n    result.mathML = input.toString();\n  } else if (typeof input === 'string') {\n    result.mathML = input;\n  } else if (input instanceof Atom) {\n    result.mathML = atomToMathML(input, options);\n  } else if (Array.isArray(input)) {\n    let count = 0;\n    final = final ? final : input ? input.length : 0;\n\n    while (result.index < final) {\n      if (\n        scanText(result, final, options) ||\n        scanNumber(result, final, options) ||\n        scanIdentifier(result, final, options) ||\n        scanOperator(result, final, options) ||\n        scanFence(result, final, options)\n      ) {\n        count += 1;\n      } else if (result.index < final) {\n        let mathML = atomToMathML(result.atoms[result.index], options);\n        if (\n          result.lastType === 'mn' &&\n          mathML.length > 0 &&\n          result.atoms[result.index].type === 'genfrac'\n        ) {\n          // If this is a fraction preceded by a number (e.g. 2 1/2),\n          // add an \"invisible plus\" (U+0264) character in front of it\n          mathML = '<mo>&#x2064;</mo>' + mathML;\n        }\n\n        if (result.atoms[result.index].type === 'genfrac') {\n          result.lastType = 'mfrac';\n        } else {\n          result.lastType = '';\n        }\n\n        if (mathML.length > 0) {\n          result.mathML += mathML;\n          count += 1;\n        }\n\n        result.index += 1;\n      }\n    }\n\n    // If there are more than a single element, wrap them in a mrow tag.\n    if (count > 1) {\n      result.mathML = '<mrow>' + result.mathML + '</mrow>';\n    }\n  }\n\n  return result;\n}\n\nfunction toMo(atom, options) {\n  let result = '';\n  const body = toString(atom.value);\n  if (body) {\n    result = '<mo' + makeID(atom.id, options) + '>' + body + '</mo>';\n  }\n\n  return result;\n}\n\nfunction toString(atoms) {\n  if (!atoms) return '';\n  if (typeof atoms === 'string') return xmlEscape(atoms);\n  if (!Array.isArray(atoms) && typeof atoms.body === 'string') {\n    return xmlEscape(atoms.body);\n  }\n\n  let result = '';\n  for (const atom of atoms) {\n    if (typeof atom.value === 'string') {\n      result += atom.value;\n    }\n  }\n\n  return xmlEscape(result);\n}\n\n/**\n * Return a MathML fragment representation of a single atom\n *\n */\nfunction atomToMathML(atom, options): string {\n  // For named SVG atoms, map to a Unicode char\n  const SVG_CODE_POINTS = {\n    widehat: '^',\n    widecheck: 'ˇ',\n    widetilde: '~',\n    utilde: '~',\n    overleftarrow: '\\u2190',\n    underleftarrow: '\\u2190',\n    xleftarrow: '\\u2190',\n    overrightarrow: '\\u2192',\n    underrightarrow: '\\u2192',\n    xrightarrow: '\\u2192',\n    underbrace: '\\u23DF',\n    overbrace: '\\u23DE',\n    overgroup: '\\u23E0',\n    undergroup: '\\u23E1',\n    overleftrightarrow: '\\u2194',\n    underleftrightarrow: '\\u2194',\n    xleftrightarrow: '\\u2194',\n    Overrightarrow: '\\u21D2',\n    xRightarrow: '\\u21D2',\n    overleftharpoon: '\\u21BC',\n    xleftharpoonup: '\\u21BC',\n    overrightharpoon: '\\u21C0',\n    xrightharpoonup: '\\u21C0',\n    xLeftarrow: '\\u21D0',\n    xLeftrightarrow: '\\u21D4',\n    xhookleftarrow: '\\u21A9',\n    xhookrightarrow: '\\u21AA',\n    xmapsto: '\\u21A6',\n    xrightharpoondown: '\\u21C1',\n    xleftharpoondown: '\\u21BD',\n    xrightleftharpoons: '\\u21CC',\n    xleftrightharpoons: '\\u21CB',\n    xtwoheadleftarrow: '\\u219E',\n    xtwoheadrightarrow: '\\u21A0',\n    xlongequal: '=',\n    xtofrom: '\\u21C4',\n    xrightleftarrows: '\\u21C4',\n    xrightequilibrium: '\\u21CC', // Not a perfect match.\n    xleftequilibrium: '\\u21CB', // None better available.\n  };\n\n  const SPECIAL_IDENTIFIERS = {\n    '\\\\exponentialE': '&#x02147;',\n    '\\\\imaginaryI': '&#x2148;',\n    '\\\\differentialD': '&#x2146;',\n    '\\\\capitalDifferentialD': '&#x2145;',\n    '\\\\alpha': '&#x03b1;',\n    '\\\\pi': '&#x03c0;',\n    '\\\\infty': '&#x221e;',\n    '\\\\forall': '&#x2200;',\n    '\\\\nexists': '&#x2204;',\n    '\\\\exists': '&#x2203;',\n    '\\\\hbar': '\\u210F',\n    '\\\\cdotp': '\\u22C5',\n    '\\\\ldots': '\\u2026',\n    '\\\\cdots': '\\u22EF',\n    '\\\\ddots': '\\u22F1',\n    '\\\\vdots': '\\u22EE',\n    '\\\\ldotp': '\\u002E',\n  };\n\n  const MATH_VARIANTS = {\n    cal: 'script',\n    frak: 'fraktur',\n    bb: 'double-struck',\n    scr: 'script',\n    cmtt: 'monospace',\n    cmss: 'sans-serif',\n  };\n  const SPACING = {\n    '\\\\!': -3 / 18,\n    '\\\\ ': 6 / 18,\n    '\\\\,': 3 / 18,\n    '\\\\:': 4 / 18,\n    '\\\\;': 5 / 18,\n    '\\\\enspace': 0.5,\n    '\\\\quad': 1,\n    '\\\\qquad': 2,\n    '\\\\enskip': 0.5,\n  };\n\n  let result = '';\n  let sep = '';\n  let col;\n  let row;\n  let i;\n  let underscript;\n  let overscript;\n  let body;\n  let variant = MATH_VARIANTS[atom.fontFamily || atom.font] || '';\n  if (variant) {\n    variant = ' mathvariant=\"' + variant + '\"';\n  }\n\n  const { command } = atom;\n  if (atom.mode === 'text') {\n    result = '<mi' + makeID(atom.id, options) + '>' + atom.value + '</mi>';\n  } else {\n    switch (atom.type) {\n      case 'first':\n        break; // Nothing to do\n      case 'group':\n      case 'root':\n        result = toMathML(atom.body, 0, 0, options).mathML;\n        break;\n\n      case 'array':\n        if (\n          (atom.leftDelim && atom.leftDelim !== '.') ||\n          (atom.rightDelim && atom.rightDelim !== '.')\n        ) {\n          result += '<mrow>';\n          if (atom.leftDelim && atom.leftDelim !== '.') {\n            result +=\n              '<mo>' +\n              (SPECIAL_OPERATORS[atom.leftDelim] || atom.leftDelim) +\n              '</mo>';\n          }\n        }\n\n        result += '<mtable';\n        if (atom.colFormat) {\n          result += ' columnalign=\"';\n          for (i = 0; i < atom.colFormat.length; i++) {\n            if (atom.colFormat[i].align) {\n              result +=\n                { l: 'left', c: 'center', r: 'right' }[\n                  atom.colFormat[i].align\n                ] + ' ';\n            }\n          }\n\n          result += '\"';\n        }\n\n        result += '>';\n        for (row = 0; row < atom.array.length; row++) {\n          result += '<mtr>';\n          for (col = 0; col < atom.array[row].length; col++) {\n            result +=\n              '<mtd>' +\n              toMathML(atom.array[row][col], 0, 0, options).mathML +\n              '</mtd>';\n          }\n\n          result += '</mtr>';\n        }\n\n        result += '</mtable>';\n\n        if (\n          (atom.leftDelim && atom.leftDelim !== '.') ||\n          (atom.rightDelim && atom.rightDelim !== '.')\n        ) {\n          if (atom.rightDelim && atom.rightDelim !== '.') {\n            result +=\n              '<mo>' +\n              (SPECIAL_OPERATORS[atom.leftDelim] || atom.rightDelim) +\n              '</mo>';\n          }\n\n          result += '</mrow>';\n        }\n\n        break;\n\n      case 'genfrac':\n        if (atom.leftDelim || atom.rightDelim) {\n          result += '<mrow>';\n        }\n\n        if (atom.leftDelim && atom.leftDelim !== '.') {\n          result +=\n            '<mo' +\n            makeID(atom.id, options) +\n            '>' +\n            (SPECIAL_OPERATORS[atom.leftDelim] || atom.leftDelim) +\n            '</mo>';\n        }\n\n        if (atom.hasBarLine) {\n          result += '<mfrac>';\n          result +=\n            toMathML(atom.above, 0, 0, options).mathML || '<mi>&nbsp;</mi>';\n          result +=\n            toMathML(atom.below, 0, 0, options).mathML || '<mi>&nbsp;</mi>';\n          result += '</mfrac>';\n        } else {\n          // No bar line, i.e. \\choose, etc...\n          result += '<mtable' + makeID(atom.id, options) + '>';\n          result +=\n            '<mtr>' + toMathML(atom.above, 0, 0, options).mathML + '</mtr>';\n          result +=\n            '<mtr>' + toMathML(atom.below, 0, 0, options).mathML + '</mtr>';\n          result += '</mtable>';\n        }\n\n        if (atom.rightDelim && atom.rightDelim !== '.') {\n          result +=\n            '<mo' +\n            makeID(atom.id, options) +\n            '>' +\n            (SPECIAL_OPERATORS[atom.rightDelim] || atom.rightDelim) +\n            '</mo>';\n        }\n\n        if (atom.leftDelim || atom.rightDelim) {\n          result += '</mrow>';\n        }\n\n        break;\n\n      case 'surd':\n        if (!atom.hasEmptyBranch('above')) {\n          result += '<mroot' + makeID(atom.id, options) + '>';\n          result += toMathML(atom.body, 0, 0, options).mathML;\n          result += toMathML(atom.above, 0, 0, options).mathML;\n          result += '</mroot>';\n        } else {\n          result += '<msqrt' + makeID(atom.id, options) + '>';\n          result += toMathML(atom.body, 0, 0, options).mathML;\n          result += '</msqrt>';\n        }\n\n        break;\n\n      case 'leftright':\n        // TODO: could add fence=true attribute\n        result = '<mrow>';\n        if (atom.leftDelim && atom.leftDelim !== '.') {\n          result +=\n            '<mo' +\n            makeID(atom.id, options) +\n            '>' +\n            (SPECIAL_OPERATORS[atom.leftDelim] || atom.leftDelim) +\n            '</mo>';\n        }\n\n        if (atom.body) {\n          result += toMathML(atom.body, 0, 0, options).mathML;\n        }\n\n        if (atom.rightDelim && atom.rightDelim !== '.') {\n          result +=\n            '<mo' +\n            makeID(atom.id, options) +\n            '>' +\n            (SPECIAL_OPERATORS[atom.rightDelim] || atom.rightDelim) +\n            '</mo>';\n        }\n\n        result += '</mrow>';\n        break;\n\n      case 'sizeddelim':\n      case 'delim':\n        result +=\n          '<mo separator=\"true\"' +\n          makeID(atom.id, options) +\n          '>' +\n          (SPECIAL_OPERATORS[atom.delim] || atom.delim) +\n          '</mo>';\n        break;\n\n      case 'accent':\n        result += '<mover accent=\"true\"' + makeID(atom.id, options) + '>';\n        result += toMathML(atom.body, 0, 0, options).mathML;\n        result +=\n          '<mo>' + (SPECIAL_OPERATORS[command] || atom.accent) + '</mo>';\n        result += '</mover>';\n        break;\n\n      case 'line':\n      case 'overlap':\n        break;\n\n      case 'overunder':\n        overscript = atom.above;\n        underscript = atom.below;\n        if ((atom.svgAbove || overscript) && (atom.svgBelow || underscript)) {\n          body = atom.body;\n        } else if (overscript && overscript.length > 0) {\n          body = atom.body;\n          if (atom.body?.[0]?.below) {\n            underscript = atom.body[0].below;\n            body = atom.body[0].body;\n          } else if (\n            atom.body?.[0]?.type === 'first' &&\n            atom.body?.[1]?.below\n          ) {\n            underscript = atom.body[1].below;\n            body = atom.body[1].body;\n          }\n        } else if (underscript && underscript.length > 0) {\n          body = atom.body;\n          if (atom.body?.[0]?.above) {\n            overscript = atom.body[0].above;\n            body = atom.body[0].body;\n          } else if (\n            atom.body?.[0]?.type === 'first' &&\n            atom.body?.[1]?.above\n          ) {\n            overscript = atom.body[1].overscript;\n            body = atom.body[1].body;\n          }\n        }\n\n        if ((atom.svgAbove || overscript) && (atom.svgBelow || underscript)) {\n          result += `<munderover ${variant} ${makeID(atom.id, options)}>`;\n          result +=\n            SVG_CODE_POINTS[atom.svgBody] ||\n            toMathML(body, 0, 0, options).mathML;\n          result +=\n            SVG_CODE_POINTS[atom.svgBelow] ||\n            toMathML(underscript, 0, 0, options).mathML;\n          result +=\n            SVG_CODE_POINTS[atom.svgAbove] ||\n            toMathML(overscript, 0, 0, options).mathML;\n          result += '</munderover>';\n        } else if (atom.svgAbove || overscript) {\n          result +=\n            `<mover ${variant} ${makeID(atom.id, options)}>` +\n            (SVG_CODE_POINTS[atom.svgBody] ||\n              toMathML(body, 0, 0, options).mathML);\n          result +=\n            SVG_CODE_POINTS[atom.svgAbove] ||\n            toMathML(overscript, 0, 0, options).mathML;\n          result += '</mover>';\n        } else if (atom.svgBelow || underscript) {\n          result +=\n            `<munder ${variant} ${makeID(atom.id, options)}>` +\n            (SVG_CODE_POINTS[atom.svgBody] ||\n              toMathML(body, 0, 0, options).mathML);\n          result +=\n            SVG_CODE_POINTS[atom.svgBelow] ||\n            toMathML(underscript, 0, 0, options).mathML;\n          result += '</munder>';\n        }\n\n        break;\n\n      case 'placeholder': // No real equivalent in MathML -- will generate a '?'qq\n      case 'mord': {\n        result =\n          SPECIAL_IDENTIFIERS[command] ||\n          command ||\n          (typeof atom.value === 'string' ? atom.value : '');\n        const m = command\n          ? command.match(/{?\\\\char\"([\\dabcdefABCDEF]*)}?/)\n          : null;\n        if (m) {\n          // It's a \\char command\n          result = '&#x' + m[1] + ';';\n        } else if (result.length > 0 && result.startsWith('\\\\')) {\n          // This is an identifier with no special handling. Use the\n          // Unicode value\n          if (\n            typeof atom.value === 'string' &&\n            atom.value.charCodeAt(0) > 255\n          ) {\n            result =\n              '&#x' +\n              ('000000' + atom.value.charCodeAt(0).toString(16)).slice(-4) +\n              ';';\n          } else if (typeof atom.value === 'string') {\n            result = atom.value.charAt(0);\n          } else {\n            console.log('Did not expect this');\n            result = '';\n          }\n        }\n\n        const tag = /\\d/.test(result) ? 'mn' : 'mi';\n        result =\n          '<' +\n          tag +\n          variant +\n          makeID(atom.id, options) +\n          '>' +\n          xmlEscape(result) +\n          '</' +\n          tag +\n          '>';\n        break;\n      }\n\n      case 'mbin':\n      case 'mrel':\n      case 'minner':\n        if (command && SPECIAL_IDENTIFIERS[command]) {\n          // Some 'textord' are actually identifiers. Check them here.\n          result =\n            '<mi' +\n            makeID(atom.id, options) +\n            '>' +\n            SPECIAL_IDENTIFIERS[command] +\n            '</mi>';\n        } else if (command && SPECIAL_OPERATORS[command]) {\n          result =\n            '<mo' +\n            makeID(atom.id, options) +\n            '>' +\n            SPECIAL_OPERATORS[command] +\n            '</mo>';\n        } else {\n          result = toMo(atom, options);\n        }\n\n        break;\n\n      case 'mpunct':\n        result =\n          '<mo separator=\"true\"' +\n          makeID(atom.id, options) +\n          '>' +\n          (SPECIAL_OPERATORS[command] || command) +\n          '</mo>';\n        break;\n\n      case 'mop':\n        if (atom.body !== '\\u200B') {\n          // Not ZERO-WIDTH\n          result = '<mo' + makeID(atom.id, options) + '>';\n          result +=\n            command === '\\\\operatorname' ? atom.body : command || atom.body;\n          result += '</mo>';\n        }\n\n        break;\n\n      // Case 'mathstyle':\n      // TODO: mathstyle is a switch. Need to figure out its scope to properly wrap it around a <mstyle> tag\n      // if (atom.mathstyle === 'displaystyle') {\n      //     result += '<mstyle displaystyle=\"true\">';\n      //     result += '</mstyle>';\n      // } else {\n      //     result += '<mstyle displaystyle=\"false\">';\n      //     result += '</mstyle>';\n      // };\n      // break;\n\n      case 'box':\n        result = '<menclose notation=\"box\"';\n        if (atom.backgroundcolor) {\n          result +=\n            ' mathbackground=\"' + stringToColor(atom.backgroundcolor) + '\"';\n        }\n\n        result +=\n          makeID(atom.id, options) +\n          '>' +\n          toMathML(atom.body, 0, 0, options).mathML +\n          '</menclose>';\n        break;\n\n      case 'spacing':\n        result += '<mspace width=\"' + (SPACING[command] || 0) + 'em\"/>';\n        break;\n\n      case 'enclose':\n        result = '<menclose notation=\"';\n        for (const notation in atom.notation) {\n          if (\n            Object.prototype.hasOwnProperty.call(atom.notation, notation) &&\n            atom.notation[notation]\n          ) {\n            result += sep + notation;\n            sep = ' ';\n          }\n        }\n\n        result +=\n          makeID(atom.id, options) +\n          '\">' +\n          toMathML(atom.body, 0, 0, options).mathML +\n          '</menclose>';\n        break;\n\n      case 'space':\n        result += '&nbsp;';\n        break;\n\n      case 'msubsup':\n        // if (atom.superscript && atom.subscript) {\n        //   result = '<msubsup>' + base;\n        //   result += toMathML(atom.subscript, 0, 0, options).mathML;\n        //   result += toMathML(atom.superscript, 0, 0, options).mathML;\n        //   result += '</msubsup>';\n        // } else if (atom.superscript) {\n        //   result = '<msup>' + base;\n        //   result += toMathML(atom.superscript, 0, 0, options).mathML;\n        //   result += '</msup>';\n        // } else if (atom.subscript) {\n        //   result = '<msub>' + base;\n        //   result += toMathML(atom.subscript, 0, 0, options).mathML;\n        //   result += '</msub>';\n        // }\n        break;\n\n      case 'phantom':\n        break;\n      case 'composition':\n        break;\n      case 'rule':\n        console.log('In conversion to MathML, unknown type : ' + atom.type);\n        break;\n      case 'chem':\n        break;\n      case 'mopen':\n        console.log('In conversion to MathML, unknown type : ' + atom.type);\n        break;\n      case 'mclose':\n        console.log('In conversion to MathML, unknown type : ' + atom.type);\n        break;\n      case 'macro':\n        console.log('In conversion to MathML, unknown type : ' + atom.type);\n        break;\n      case 'error':\n        console.log('In conversion to MathML, unknown type : ' + atom.type);\n        break;\n      default:\n        console.log('In conversion to MathML, unknown type : ' + atom.type);\n    }\n  }\n\n  return result;\n}\n\nexport function atomsToMathML(\n  atoms: Atom | Atom[],\n  options: Partial<MathfieldOptions>\n): string {\n  return toMathML(atoms, 0, 0, options).mathML;\n}\n","import { isArray } from '../common/types';\n\nimport type { Atom } from '../core/atom';\nimport { GenfracAtom } from '../core-atoms/genfrac';\nimport { LeftRightAtom } from '../core-atoms/leftright';\nimport { ArrayAtom } from '../core-atoms/array';\n\nconst SPECIAL_IDENTIFIERS = {\n  '\\u2212': '-', // MINUS SIGN\n  '-': '-',\n  '\\\\alpha': 'alpha',\n  '\\\\beta': 'beta',\n  '\\\\gamma': 'gamma',\n  '\\\\delta': 'delta',\n  '\\\\epsilon': 'epsilon',\n  '\\\\varepsilon': 'varepsilon',\n  '\\\\zeta': 'zeta',\n  '\\\\eta': 'eta',\n  '\\\\theta': 'theta',\n  '\\\\vartheta': 'vartheta',\n  '\\\\iota': 'iota',\n  '\\\\kappa': 'kappa',\n  '\\\\lambda': 'lambda',\n  '\\\\mu': 'mu',\n  '\\\\nu': 'nu',\n  '\\\\xi': 'xi',\n  '\\\\pi': 'pi',\n  '\\\\rho': 'rho',\n  '\\\\sigma': 'sigma',\n  '\\\\tau': 'tau',\n  '\\\\upsilon': 'upsilon',\n  '\\\\phi': 'phi',\n  '\\\\varphi': 'varphi',\n  '\\\\chi': 'chi',\n  '\\\\psi': 'psi',\n  '\\\\omega': 'omega',\n  '\\\\Gamma': 'Gamma',\n  '\\\\Delta': 'Delta',\n  '\\\\Theta': 'Theta',\n  '\\\\Lambda': 'Lambda',\n  '\\\\Xi': 'Xi',\n  '\\\\Pi': 'Pi',\n  '\\\\Sigma': 'Sigma',\n  '\\\\Phi': 'Phi',\n  '\\\\Psi': 'Psi',\n  '\\\\Omega': 'Omega',\n};\n\nconst SPECIAL_OPERATORS = {\n  '\\\\pm': '+-',\n  '\\\\times': 'xx',\n  '\\\\colon': ':',\n  '\\\\vert': '|',\n  '\\\\Vert': '||',\n  '\\\\mid': '|',\n  '\\\\lbrace': '{',\n  '\\\\rbrace': '}',\n  '\\\\langle': '(:',\n  '\\\\rangle': ':)',\n  // '\\\\lfloor': '\\u230a',\n  // '\\\\rfloor': '\\u230b',\n  // '\\\\lceil': '\\u2308',\n  // '\\\\rceil': '\\u2309',\n\n  // '\\\\vec': '&#x20d7;',\n  // '\\\\acute': '&#x00b4;',\n  // '\\\\grave': '&#x0060;',\n  // '\\\\dot': '&#x02d9;',\n  // '\\\\ddot': '&#x00a8;',\n  // '\\\\tilde': '&#x007e;',\n  // '\\\\bar': '&#x00af;',\n  // '\\\\breve': '&#x02d8;',\n  // '\\\\check': '&#x02c7;',\n  // '\\\\hat': '&#x005e;'\n};\n\nexport function atomToAsciiMath(atom: Atom | Atom[]): string {\n  if (!atom) return '';\n  if (isArray<Atom>(atom)) {\n    let result = '';\n    if (atom.length === 0) return '';\n    if (atom[0].type === 'first') atom = atom.slice(1);\n    if (atom.length === 0) return '';\n    if (atom[0].mode === 'text') {\n      // Text mode... put it in (ASCII) quotes\n      let i = 0;\n      result = '\"';\n      while (atom[i]?.mode === 'text') {\n        result += atom[i].body ? atomToAsciiMath(atom[i].body) : atom[i].value;\n        i++;\n      }\n\n      result += '\"' + atomToAsciiMath(atom.slice(i));\n    } else if (atom[0].mode === 'math') {\n      let i = 0;\n      while (atom[i] && atom[i].mode === 'math') {\n        result += atomToAsciiMath(atom[i]);\n        i++;\n      }\n\n      result += atomToAsciiMath(atom.slice(i));\n    } else {\n      console.warn('toASCIIMath: Unexpected mode');\n    }\n\n    return result.trim();\n  }\n\n  if (atom.mode === 'text') {\n    return '\"' + atom.value + '\"'; // Text -- add in (ASCII) quotes\n  }\n\n  let result = '';\n  const { command } = atom;\n  let m;\n\n  switch (atom.type) {\n    case 'first':\n      return '';\n    case 'group':\n    case 'root':\n      result = atomToAsciiMath(atom.body);\n      break;\n\n    case 'genfrac':\n      {\n        const genfracAtom = atom as GenfracAtom;\n        if (genfracAtom.leftDelim || genfracAtom.rightDelim) {\n          result +=\n            genfracAtom.leftDelim === '.' || !genfracAtom.leftDelim\n              ? '{:'\n              : genfracAtom.leftDelim;\n        }\n\n        if (genfracAtom.hasBarLine) {\n          result += '(';\n          result += atomToAsciiMath(genfracAtom.above);\n          result += ')/(';\n          result += atomToAsciiMath(genfracAtom.below);\n          result += ')';\n        } else {\n          // No bar line, i.e. \\choose, etc...\n          result += '(' + atomToAsciiMath(genfracAtom.above) + '),';\n          result += '(' + atomToAsciiMath(genfracAtom.below) + ')';\n        }\n\n        if (genfracAtom.leftDelim || genfracAtom.rightDelim) {\n          result +=\n            genfracAtom.rightDelim === '.' || !genfracAtom.rightDelim\n              ? '{:'\n              : genfracAtom.rightDelim;\n        }\n      }\n\n      break;\n\n    case 'surd':\n      result += !atom.hasEmptyBranch('above')\n        ? 'root(' +\n          atomToAsciiMath(atom.above) +\n          ')(' +\n          atomToAsciiMath(atom.body) +\n          ')'\n        : 'sqrt(' + atomToAsciiMath(atom.body) + ')';\n      break;\n\n    case 'leftright':\n      {\n        const leftrightAtom = atom as LeftRightAtom;\n        result +=\n          leftrightAtom.leftDelim === '.' || !leftrightAtom.leftDelim\n            ? '{:'\n            : leftrightAtom.leftDelim;\n        result += atomToAsciiMath(leftrightAtom.body);\n        result +=\n          leftrightAtom.rightDelim === '.' || !leftrightAtom.rightDelim\n            ? ':}'\n            : leftrightAtom.rightDelim;\n      }\n\n      break;\n\n    case 'sizeddelim':\n    case 'delim':\n      // Result += '<mo separator=\"true\"' + makeID(atom.id, options) + '>' + (SPECIAL_OPERATORS[atom.delim] || atom.delim) + '</mo>';\n      break;\n\n    case 'overlap':\n      break;\n\n    case 'overunder':\n      break;\n\n    case 'mord':\n      // @todo, deal with some special identifiers: \\alpha, etc...\n      result =\n        SPECIAL_IDENTIFIERS[command] ??\n        command ??\n        (typeof atom.value === 'string' ? atom.value : '');\n      if (result.startsWith('\\\\')) result = String(result);\n      m = command ? command.match(/{?\\\\char\"([\\dabcdefABCDEF]*)}?/) : null;\n      if (m) {\n        // It's a \\char command\n        result = String.fromCharCode(Number.parseInt('0x' + m[1]));\n      } else if (result.length > 0 && result.startsWith('\\\\')) {\n        // Atom is an identifier with no special handling. Use the\n        // Unicode value\n        result =\n          typeof atom.value === 'string' ? atom.value.charAt(0) : atom.command;\n      }\n\n      // Result = '<mi' + variant + makeID(atom.id, options) + '>' + xmlEscape(result) + '</mi>';\n      break;\n\n    case 'mbin':\n    case 'mrel':\n    case 'minner':\n      if (command && SPECIAL_IDENTIFIERS[command]) {\n        // Some 'textord' are actually identifiers. Check them here.\n        result = SPECIAL_IDENTIFIERS[command];\n      } else if (command && SPECIAL_OPERATORS[command]) {\n        result = SPECIAL_OPERATORS[command];\n      } else {\n        result = atom.value;\n      }\n\n      break;\n\n    case 'mopen':\n    case 'mclose':\n      result += atom.value;\n      break;\n\n    case 'mpunct':\n      result = SPECIAL_OPERATORS[command] || command;\n      break;\n\n    case 'mop':\n      if (atom.value !== '\\u200B') {\n        // Not ZERO-WIDTH\n        result = '';\n        result +=\n          command === '\\\\operatorname'\n            ? atomToAsciiMath(atom.body)\n            : atom.value ?? command;\n        result += ' ';\n      }\n      break;\n\n    case 'array':\n      const array = (atom as ArrayAtom).array;\n      const environment = (atom as ArrayAtom).environmentName;\n      const rowDelim = {\n        'bmatrix': ['[', ']'],\n        'bmatrix*': ['[', ']'],\n      }[environment] ?? ['(', ')'];\n      const rows = [];\n      for (const row of array) {\n        const cells = [];\n        for (const cell of row) {\n          cells.push(rowDelim[0] + atomToAsciiMath(cell) + rowDelim[1]);\n        }\n        rows.push(cells.join(','));\n      }\n\n      const delim = {\n        'bmatrix': ['[', ']'],\n        'bmatrix*': ['[', ']'],\n        'cases': ['{', ':}'],\n      }[environment] ?? ['(', ')'];\n      result = delim[0] + rows.join(',') + delim[1];\n      break;\n\n    case 'box':\n      break;\n\n    case 'spacing':\n      break;\n\n    case 'enclose':\n      break;\n\n    case 'space':\n      result = ' ';\n      break;\n\n    case 'msubsup':\n      result = '';\n      break;\n  }\n\n  // Subscripts before superscripts (according to the ASCIIMath spec)\n  if (!atom.hasEmptyBranch('subscript')) {\n    result += '_';\n    const arg = atomToAsciiMath(atom.subscript);\n    result += arg.length > 1 ? '(' + arg + ')' : arg;\n  }\n\n  if (!atom.hasEmptyBranch('superscript')) {\n    result += '^';\n    const arg = atomToAsciiMath(atom.superscript);\n    result += arg.length > 1 ? '(' + arg + ')' : arg;\n  }\n\n  return result;\n}\n","import { TextToSpeechOptions } from '../public/options';\n\nimport { Atom } from '../core/atom';\n\nimport { atomsToMathML } from '../addons/math-ml';\nimport { LeftRightAtom } from '../core-atoms/leftright';\nimport { isArray } from '../common/types';\n\ndeclare global {\n  interface Window {\n    sre: any;\n  }\n}\n\n// Markup\n// Two common flavor of markups: SSML and 'mac'. The latter is only available\n// when using the native TTS synthesizer on Mac OS.\n// Use SSML in the production rules below. The markup will either be striped\n// off or replaced with the 'mac' markup as necessary.\n//\n// SSML                                             Mac\n// ----                                             ----\n// <emphasis>WORD</emphasis>                        [[emph +]]WORD\n// <break time=\"150ms\"/>                            [[slc 150]]\n// <say-as interpret-as=\"character\">A</say-as>      [[char LTRL] A [[char NORM]]\n\n// https://developer.apple.com/library/content/documentation/UserExperience/Conceptual/SpeechSynthesisProgrammingGuide/FineTuning/FineTuning.html#//apple_ref/doc/uid/TP40004365-CH5-SW3\n\n// https://pdfs.semanticscholar.org/8887/25b82b8dbb45dd4dd69b36a65f092864adb0.pdf\n\n// \"<audio src='non_existing_file.au'>File could not be played.</audio>\"\n\n// \"I am now <prosody rate='+0.06'>speaking 6% faster.</prosody>\"\n\nconst PRONUNCIATION: Record<string, string> = {\n  '\\\\alpha': 'alpha ',\n  '\\\\mu': 'mew ',\n  '\\\\sigma': 'sigma ',\n  '\\\\pi': 'pie ',\n  '\\\\imaginaryI': 'eye ',\n\n  '\\\\sum': 'Summation ',\n  '\\\\prod': 'Product ',\n\n  'a': '<phoneme alphabet=\"ipa\" ph=\"eɪ\">a</phoneme>',\n  'A': 'capital <phoneme alphabet=\"ipa\" ph=\"eɪ\">A</phoneme>',\n  '+': 'plus ',\n  '-': 'minus ',\n  ';': '<break time=\"150ms\"/> semi-colon <break time=\"150ms\"/>',\n  ',': '<break time=\"150ms\"/> comma  <break time=\"150ms\"/>',\n  '|': '<break time=\"150ms\"/>Vertical bar<break time=\"150ms\"/>',\n  '(': '<break time=\"150ms\"/>Open paren. <break time=\"150ms\"/>',\n  ')': '<break time=\"150ms\"/> Close paren. <break time=\"150ms\"/>',\n  '=': 'equals ',\n  '<': 'is less than ',\n  '\\\\lt': 'is less than ',\n  '<=': 'is less than or equal to ',\n  '\\\\le': 'is less than or equal to ',\n  '\\\\gt': 'is greater than ',\n  '>': 'is greater than ',\n  '\\\\ge': 'is greater than or equal to ',\n  '\\\\geq': 'is greater than or equal to ',\n  '\\\\leq': 'is less than or equal to ',\n  '!': 'factorial ',\n  '\\\\sin': 'sine ',\n  '\\\\cos': 'cosine ',\n  '\\u200B': '',\n  '\\u2212': 'minus ',\n  ':': '<break time=\"150ms\"/> such that <break time=\"200ms\"/> ',\n  '\\\\colon': '<break time=\"150ms\"/> such that <break time=\"200ms\"/> ',\n  '\\\\hbar': 'etch bar ',\n  '\\\\iff': '<break time=\"200ms\"/>if, and only if, <break time=\"200ms\"/>',\n  '\\\\Longleftrightarrow':\n    '<break time=\"200ms\"/>if, and only if, <break time=\"200ms\"/>',\n  '\\\\land': 'and ',\n  '\\\\lor': 'or ',\n  '\\\\neg': 'not ',\n  '\\\\div': 'divided by ',\n\n  '\\\\forall': 'for all ',\n  '\\\\exists': 'there exists ',\n  '\\\\nexists': 'there does not exists ',\n\n  '\\\\in': 'element of ',\n\n  '\\\\N':\n    'the set <break time=\"150ms\"/><say-as interpret-as=\"character\">n</say-as>',\n  '\\\\C':\n    'the set <break time=\"150ms\"/><say-as interpret-as=\"character\">c</say-as>',\n  '\\\\Z':\n    'the set <break time=\"150ms\"/><say-as interpret-as=\"character\">z</say-as>',\n  '\\\\Q':\n    'the set <break time=\"150ms\"/><say-as interpret-as=\"character\">q</say-as>',\n\n  '\\\\infty': 'infinity ',\n\n  '\\\\nabla': 'nabla ',\n\n  '\\\\partial': 'partial derivative of ',\n\n  '\\\\cdots': 'dot dot dot ',\n\n  '\\\\Rightarrow': 'implies ',\n\n  '\\\\lbrace': '<break time=\"150ms\"/>open brace<break time=\"150ms\"/>',\n  '\\\\{': '<break time=\"150ms\"/>open brace<break time=\"150ms\"/>',\n  '\\\\rbrace': '<break time=\"150ms\"/>close brace<break time=\"150ms\"/>',\n  '\\\\}': '<break time=\"150ms\"/>close brace<break time=\"150ms\"/>',\n  '\\\\langle': '<break time=\"150ms\"/>left angle bracket<break time=\"150ms\"/>',\n  '\\\\rangle': '<break time=\"150ms\"/>right angle bracket<break time=\"150ms\"/>',\n  '\\\\lfloor': '<break time=\"150ms\"/>open floor<break time=\"150ms\"/>',\n  '\\\\rfloor': '<break time=\"150ms\"/>close floor<break time=\"150ms\"/>',\n  '\\\\lceil': '<break time=\"150ms\"/>open ceiling<break time=\"150ms\"/>',\n  '\\\\rceil': '<break time=\"150ms\"/>close ceiling<break time=\"150ms\"/>',\n  '\\\\vert': '<break time=\"150ms\"/>vertical bar<break time=\"150ms\"/>',\n  '\\\\mvert': '<break time=\"150ms\"/>divides<break time=\"150ms\"/>',\n  '\\\\lvert': '<break time=\"150ms\"/>left vertical bar<break time=\"150ms\"/>',\n  '\\\\rvert': '<break time=\"150ms\"/>right vertical bar<break time=\"150ms\"/>',\n  // '\\\\lbrack':\t\t'left bracket',\n  // '\\\\rbrack':\t\t'right bracket',\n  '\\\\lbrack': '<break time=\"150ms\"/> open square bracket <break time=\"150ms\"/>',\n  '\\\\rbrack':\n    '<break time=\"150ms\"/> close square bracket <break time=\"150ms\"/>',\n\n  // Need to add code to detect singluar/plural. Until then spoken as plural since that is vastly more common\n  // note: need to worry about intervening &InvisibleTimes;.\n  // note: need to also do this when in numerator of fraction and number preceeds fraction\n  // note: need to do this for <msup>\n  'mm': 'millimeters',\n  'cm': 'centimeters',\n  'km': 'kilometers',\n  'kg': 'kilograms',\n};\n\nfunction getSpokenName(latex: string): string {\n  let result = '';\n  if (latex.startsWith('\\\\')) {\n    result = ' ' + latex.replace('\\\\', '') + ' ';\n  }\n\n  return result;\n}\n\nfunction platform(p: string): string {\n  let result = 'other';\n  if (navigator?.platform && navigator?.userAgent) {\n    if (/^(mac)/i.test(navigator.platform)) {\n      result = 'mac';\n    } else if (/^(win)/i.test(navigator.platform)) {\n      result = 'win';\n    } else if (/(android)/i.test(navigator.userAgent)) {\n      result = 'android';\n    } else if (/(iphone|ipad|ipod)/i.test(navigator.userAgent)) {\n      result = 'ios';\n    } else if (/\\bcros\\b/i.test(navigator.userAgent)) {\n      result = 'chromeos';\n    }\n  }\n\n  return result === p ? p : '!' + p;\n}\n\nfunction isAtomic(atoms: Atom[]): boolean {\n  let count = 0;\n  if (isArray<Atom>(atoms)) {\n    for (const atom of atoms) {\n      if (atom.type !== 'first') {\n        count += 1;\n      }\n    }\n  }\n\n  return count === 1;\n}\n\nfunction atomicID(atoms: Atom[]): string {\n  if (isArray<Atom>(atoms)) {\n    for (const atom of atoms) {\n      if (atom.type !== 'first' && atom.id) {\n        return atom.id.toString();\n      }\n    }\n  }\n\n  return '';\n}\n\nfunction atomicValue(atoms: Atom[]): string {\n  let result = '';\n  if (isArray<Atom>(atoms)) {\n    for (const atom of atoms) {\n      if (atom.type !== 'first' && typeof atom.value === 'string') {\n        result += atom.value;\n      }\n    }\n  }\n\n  return result;\n}\n\nfunction atomToSpeakableFragment(\n  mode: 'text' | 'math',\n  atom: Atom | Atom[],\n  options: TextToSpeechOptions\n): string {\n  function letter(c: string): string {\n    let result = '';\n    if (!options.textToSpeechMarkup) {\n      if (/[a-z]/.test(c)) {\n        result += \" '\" + c.toUpperCase() + \"'\";\n      } else if (/[A-Z]/.test(c)) {\n        result += \" 'capital \" + c.toUpperCase() + \"'\";\n      } else {\n        result += c;\n      }\n    } else if (/[a-z]/.test(c)) {\n      result += ' <say-as interpret-as=\"character\">' + c + '</say-as>';\n    } else if (/[A-Z]/.test(c)) {\n      result += String('capital ' + c.toLowerCase());\n    } else {\n      result += c;\n    }\n\n    return result;\n  }\n\n  function emph(s: string): string {\n    return '<emphasis>' + s + '</emphasis>';\n  }\n\n  if (!atom) return '';\n\n  let result = '';\n\n  if (isArray<Atom>(atom)) {\n    let isInDigitRun = false; // Need to group sequence of digits\n    let isInTextRun = false; // Need to group text\n    for (let i = 0; i < atom.length; i++) {\n      if (atom[i].mode !== 'text') {\n        isInTextRun = false;\n      }\n\n      if (\n        i < atom.length - 2 &&\n        atom[i].type === 'mopen' &&\n        atom[i + 2].type === 'mclose' &&\n        atom[i + 1].type === 'mord'\n      ) {\n        result += ' of ';\n        result += emph(atomToSpeakableFragment(mode, atom[i + 1], options));\n        i += 2;\n      } else if (atom[i].mode === 'text') {\n        if (isInTextRun) {\n          result += atom[i].value ?? ' ';\n        } else {\n          isInTextRun = true;\n          result += atomToSpeakableFragment('text', atom[i], options);\n        }\n        // '.' and ',' should only be allowed if prev/next entry is a digit\n        // However, if that isn't the case, this still works because 'toSpeakableFragment' is called in either case.\n        // Note: the first char in a digit/text run potentially needs to have a 'mark', hence the call to 'toSpeakableFragment'\n      } else if (\n        atom[i].type === 'mord' &&\n        /[0123456789,.]/.test(atom[i].value)\n      ) {\n        if (isInDigitRun) {\n          result += atom[i].value;\n        } else {\n          isInDigitRun = true;\n          result += atomToSpeakableFragment(mode, atom[i], options);\n        }\n      } else {\n        isInDigitRun = false;\n        result += atomToSpeakableFragment(mode, atom[i], options);\n      }\n    }\n  } else if (atom.mode === 'text') {\n    if (atom.id && mode === 'math') {\n      result += '<mark name=\"' + atom.id.toString() + '\"/>';\n    }\n\n    result += atom.value;\n  } else {\n    if (atom.id && mode === 'math') {\n      result += '<mark name=\"' + atom.id.toString() + '\"/>';\n    }\n\n    let numer = '';\n    let denom = '';\n    let body = '';\n    let supsubHandled = false;\n    switch (atom.type) {\n      case 'group':\n      case 'root':\n        result += atomToSpeakableFragment('math', atom.body, options);\n        break;\n\n      case 'genfrac':\n        numer = atomToSpeakableFragment('math', atom.above, options);\n        denom = atomToSpeakableFragment('math', atom.below, options);\n        if (isAtomic(atom.above) && isAtomic(atom.below)) {\n          const COMMON_FRACTIONS = {\n            '1/2': ' half ',\n            '1/3': ' one third ',\n            '2/3': ' two third',\n            '1/4': ' one quarter ',\n            '3/4': ' three quarter ',\n            '1/5': ' one fifth ',\n            '2/5': ' two fifths ',\n            '3/5': ' three fifths ',\n            '4/5': ' four fifths ',\n            '1/6': ' one sixth ',\n            '5/6': ' five sixths ',\n            '1/8': ' one eight ',\n            '3/8': ' three eights ',\n            '5/8': ' five eights ',\n            '7/8': ' seven eights ',\n            '1/9': ' one ninth ',\n            '2/9': ' two ninths ',\n            '4/9': ' four ninths ',\n            '5/9': ' five ninths ',\n            '7/9': ' seven ninths ',\n            '8/9': ' eight ninths ',\n            // '1/10':     ' one tenth ',\n            // '1/12':     ' one twelfth ',\n            // 'x/2':     ' <say-as interpret-as=\"character\">X</say-as> over 2',\n          };\n          const commonFraction =\n            COMMON_FRACTIONS[\n              atomicValue(atom.above) + '/' + atomicValue(atom.below)\n            ];\n          if (commonFraction) {\n            result = commonFraction;\n          } else {\n            result += numer + ' over ' + denom;\n          }\n        } else {\n          result +=\n            ' the fraction <break time=\"150ms\"/>' +\n            numer +\n            ', over <break time=\"150ms\"/>' +\n            denom +\n            '.<break time=\"150ms\"/> End fraction.<break time=\"150ms\"/>';\n        }\n\n        break;\n      case 'surd':\n        body = atomToSpeakableFragment('math', atom.body, options);\n\n        if (atom.hasEmptyBranch('above')) {\n          result += isAtomic(atom.body)\n            ? ' the square root of ' + body + ' , '\n            : ' the square root of <break time=\"200ms\"/>' +\n              body +\n              '. <break time=\"200ms\"/> End square root';\n        } else {\n          let index = atomToSpeakableFragment('math', atom.above, options);\n          index = index.trim();\n          const index2 = index.replace(/<mark([^/]*)\\/>/g, '');\n          if (index2 === '3') {\n            result +=\n              ' the cube root of <break time=\"200ms\"/>' +\n              body +\n              '. <break time=\"200ms\"/> End cube root';\n          } else if (index2 === 'n') {\n            result +=\n              ' the nth root of <break time=\"200ms\"/>' +\n              body +\n              '. <break time=\"200ms\"/> End root';\n          } else {\n            result +=\n              ' the root with index: <break time=\"200ms\"/>' +\n              index +\n              ', of <break time=\"200ms\"/>' +\n              body +\n              '. <break time=\"200ms\"/> End root';\n          }\n        }\n\n        break;\n      case 'leftright':\n        {\n          const delimAtom = atom as LeftRightAtom;\n          result += PRONUNCIATION[delimAtom.leftDelim] || delimAtom.leftDelim;\n          result += atomToSpeakableFragment('math', atom.body, options);\n          result += PRONUNCIATION[delimAtom.rightDelim] || delimAtom.rightDelim;\n        }\n\n        break;\n      case 'rule':\n        // @todo\n        break;\n      case 'overunder':\n        // @todo\n        break;\n      case 'overlap':\n        // @todo\n        break;\n      case 'placeholder':\n        result += 'placeholder ';\n        break;\n      case 'delim':\n      case 'sizeddelim':\n      case 'mord':\n      case 'minner':\n      case 'mbin':\n      case 'mrel':\n      case 'mpunct':\n      case 'mopen':\n      case 'mclose': {\n        const { command } = atom;\n        if (\n          command === '\\\\mathbin' ||\n          command === '\\\\mathrel' ||\n          command === '\\\\mathopen' ||\n          command === '\\\\mathclose' ||\n          command === '\\\\mathpunct' ||\n          command === '\\\\mathord' ||\n          command === '\\\\mathinner'\n        ) {\n          result = atomToSpeakableFragment(mode, atom.body, options);\n          break;\n        }\n\n        let atomValue = atom.value;\n        let latexValue = atom.command;\n        if (atom.type === 'delim' || atom.type === 'sizeddelim') {\n          latexValue = atom.value;\n          atomValue = latexValue;\n        }\n\n        if (mode === 'text') {\n          result += atomValue;\n        } else {\n          if (atom.type === 'mbin') {\n            result += '<break time=\"150ms\"/>';\n          }\n\n          if (atomValue) {\n            const value =\n              PRONUNCIATION[atomValue] ||\n              (latexValue ? PRONUNCIATION[latexValue.trim()] : '');\n            if (value) {\n              result += ' ' + value;\n            } else {\n              const spokenName = latexValue\n                ? getSpokenName(latexValue.trim())\n                : '';\n\n              result += spokenName ? spokenName : letter(atomValue);\n            }\n          } else {\n            result += atomToSpeakableFragment('math', atom.body, options);\n          }\n\n          if (atom.type === 'mbin') {\n            result += '<break time=\"150ms\"/>';\n          }\n        }\n\n        break;\n      }\n\n      case 'mop':\n        // @todo\n        if (atom.value !== '\\u200B') {\n          // Not ZERO-WIDTH\n          const trimLatex = atom.command;\n          if (trimLatex === '\\\\sum') {\n            if (\n              !atom.hasEmptyBranch('superscript') &&\n              !atom.hasEmptyBranch('subscript')\n            ) {\n              let sup = atomToSpeakableFragment(\n                'math',\n                atom.superscript,\n                options\n              );\n              sup = sup.trim();\n              let sub = atomToSpeakableFragment(\n                'math',\n                atom.subscript,\n                options\n              );\n              sub = sub.trim();\n              result +=\n                ' the summation from <break time=\"200ms\"/>' +\n                sub +\n                '<break time=\"200ms\"/> to  <break time=\"200ms\"/>' +\n                sup +\n                '<break time=\"200ms\"/> of <break time=\"150ms\"/>';\n              supsubHandled = true;\n            } else if (!atom.hasEmptyBranch('subscript')) {\n              let sub = atomToSpeakableFragment(\n                'math',\n                atom.subscript,\n                options\n              );\n              sub = sub.trim();\n              result +=\n                ' the summation from <break time=\"200ms\"/>' +\n                sub +\n                '<break time=\"200ms\"/> of <break time=\"150ms\"/>';\n              supsubHandled = true;\n            } else {\n              result += ' the summation of';\n            }\n          } else if (trimLatex === '\\\\prod') {\n            if (\n              !atom.hasEmptyBranch('superscript') &&\n              !atom.hasEmptyBranch('subscript')\n            ) {\n              let sup = atomToSpeakableFragment(\n                'math',\n                atom.superscript,\n                options\n              );\n              sup = sup.trim();\n              let sub = atomToSpeakableFragment(\n                'math',\n                atom.subscript,\n                options\n              );\n              sub = sub.trim();\n              result +=\n                ' the product from <break time=\"200ms\"/>' +\n                sub +\n                '<break time=\"200ms\"/> to <break time=\"200ms\"/>' +\n                sup +\n                '<break time=\"200ms\"/> of <break time=\"150ms\"/>';\n              supsubHandled = true;\n            } else if (!atom.hasEmptyBranch('subscript')) {\n              let sub = atomToSpeakableFragment(\n                'math',\n                atom.subscript,\n                options\n              );\n              sub = sub.trim();\n              result +=\n                ' the product from <break time=\"200ms\"/>' +\n                sub +\n                '<break time=\"200ms\"/> of <break time=\"150ms\"/>';\n              supsubHandled = true;\n            } else {\n              result += ' the product  of ';\n            }\n          } else if (trimLatex === '\\\\int') {\n            if (\n              !atom.hasEmptyBranch('superscript') &&\n              !atom.hasEmptyBranch('subscript')\n            ) {\n              let sup = atomToSpeakableFragment(\n                'math',\n                atom.superscript,\n                options\n              );\n              sup = sup.trim();\n              let sub = atomToSpeakableFragment(\n                'math',\n                atom.subscript,\n                options\n              );\n              sub = sub.trim();\n              result +=\n                ' the integral from <break time=\"200ms\"/>' +\n                emph(sub) +\n                '<break time=\"200ms\"/> to <break time=\"200ms\"/>' +\n                emph(sup) +\n                ' <break time=\"200ms\"/> of ';\n              supsubHandled = true;\n            } else {\n              result += ' the integral of <break time=\"200ms\"/> ';\n            }\n          } else if (typeof atom.value === 'string') {\n            const value =\n              PRONUNCIATION[atom.value] ?? PRONUNCIATION[atom.command];\n            result += value ? value : ' ' + atom.value;\n          } else if (atom.command) {\n            result += atom.command.startsWith('\\\\')\n              ? ' ' + atom.command.slice(1)\n              : ' ' + atom.command;\n          }\n        }\n\n        break;\n\n      case 'enclose':\n        body = atomToSpeakableFragment('math', atom.body, options);\n\n        result += isAtomic(atom.body)\n          ? ' crossed out ' + body + ' , '\n          : ' crossed out ' + body + '. End cross out';\n        break;\n\n      case 'space':\n      case 'spacing':\n        // @todo\n        break;\n    }\n\n    if (!supsubHandled && !atom.hasEmptyBranch('superscript')) {\n      let sup = atomToSpeakableFragment(mode, atom.superscript, options);\n      sup = sup.trim();\n      const sup2 = sup.replace(/<[^>]*>/g, '');\n      if (isAtomic(atom.superscript)) {\n        if (mode === 'math') {\n          const id = atomicID(atom.superscript);\n          if (id) {\n            result += '<mark name=\"' + id + '\"/>';\n          }\n        }\n\n        if (sup2 === '\\u2032') {\n          result += ' prime ';\n        } else if (sup2 === '2') {\n          result += ' squared ';\n        } else if (sup2 === '3') {\n          result += ' cubed ';\n        } else if (Number.isNaN(Number.parseInt(sup2))) {\n          result += ' to the ' + sup + '; ';\n        } else {\n          result +=\n            ' to the <say-as interpret-as=\"ordinal\">' +\n            sup2 +\n            '</say-as> power; ';\n        }\n      } else if (Number.isNaN(Number.parseInt(sup2))) {\n        result += ' raised to the ' + sup + '; ';\n      } else {\n        result +=\n          ' raised to the <say-as interpret-as=\"ordinal\">' +\n          sup2 +\n          '</say-as> power; ';\n      }\n    }\n\n    if (!supsubHandled && !atom.hasEmptyBranch('subscript')) {\n      let sub = atomToSpeakableFragment('math', atom.subscript, options);\n      sub = sub.trim();\n      result += isAtomic(atom.subscript)\n        ? ' sub ' + sub\n        : ' subscript ' + sub + '. End subscript. ';\n    }\n  }\n\n  return result;\n}\n\n/**\n * @param  atoms The atoms to represent as speakable text.\n */\nexport function atomToSpeakableText(\n  atoms: Atom | Atom[],\n  speechOptions: TextToSpeechOptions\n): string {\n  const options = {\n    ...speechOptions,\n    textToSpeechRulesOptions: { ...speechOptions.textToSpeechRulesOptions },\n  };\n\n  if (window.sre && options.textToSpeechRules === 'sre') {\n    const mathML = atomsToMathML(atoms, options);\n    if (mathML) {\n      if (options.textToSpeechMarkup) {\n        options.textToSpeechRulesOptions =\n          options.textToSpeechRulesOptions ?? {};\n        options.textToSpeechRulesOptions.markup = options.textToSpeechMarkup;\n        if (options.textToSpeechRulesOptions.markup === 'ssml') {\n          options.textToSpeechRulesOptions.markup = 'ssml_step';\n        }\n\n        options.textToSpeechRulesOptions.rate = options.speechEngineRate;\n      }\n\n      if (options.textToSpeechRulesOptions) {\n        window.sre.System.getInstance().setupEngine(\n          options.textToSpeechRulesOptions\n        );\n      }\n\n      return window.sre.System.getInstance().toSpeech(mathML);\n    }\n\n    return '';\n  }\n\n  let result = atomToSpeakableFragment('math', atoms, options);\n\n  if (options.textToSpeechMarkup === 'ssml') {\n    let prosody = '';\n    if (options.speechEngineRate) {\n      prosody = '<prosody rate=\"' + options.speechEngineRate + '\">';\n    }\n\n    result =\n      `<?xml version=\"1.0\"?><speak version=\"1.1\" xmlns=\"http://www.w3.org/2001/10/synthesis\" xml:lang=\"en-US\">` +\n      '<amazon:auto-breaths>' +\n      prosody +\n      '<p><s>' +\n      result +\n      '</s></p>' +\n      (prosody ? '</prosody>' : '') +\n      '</amazon:auto-breaths>' +\n      '</speak>';\n  } else if (\n    options.textToSpeechMarkup === 'mac' &&\n    platform('mac') === 'mac'\n  ) {\n    // Convert SSML to Mac markup\n    result = result\n      .replace(/<mark([^/]*)\\/>/g, '')\n      .replace(/<emphasis>/g, '[[emph+]]')\n      .replace(/<\\/emphasis>/g, '')\n      .replace(/<break time=\"(\\d*)ms\"\\/>/g, '[[slc $1]]')\n      .replace(/<say-as[^>]*>/g, '')\n      .replace(/<\\/say-as>/g, '');\n  } else {\n    // If no markup was requested, or 'mac' markup, but we're not on a mac,\n    // remove any that we may have\n    // Strip out the SSML markup\n    result = result.replace(/<[^>]*>/g, '').replace(/\\s{2,}/g, ' ');\n  }\n\n  return result;\n}\n","import type {\n  ErrorListener,\n  ParserErrorCode,\n  MathfieldErrorCode,\n} from '../public/core';\nimport { ModelPrivate } from './model-private';\n\nexport type ModelListeners = {\n  onContentWillChange: (sender: ModelPrivate) => void;\n  onContentDidChange: (sender: ModelPrivate) => void;\n  onSelectionWillChange: (sender: ModelPrivate) => void;\n  onSelectionDidChange: (sender: ModelPrivate) => void;\n  onError: ErrorListener<ParserErrorCode | MathfieldErrorCode>;\n};\n\nexport function selectionDidChange(model: ModelPrivate): void {\n  if (\n    typeof model.listeners?.onSelectionDidChange === 'function' &&\n    !model.suppressChangeNotifications\n  ) {\n    model.suppressChangeNotifications = true;\n    model.listeners.onSelectionDidChange(model);\n    model.suppressChangeNotifications = false;\n  }\n}\n\nexport function contentDidChange(model: ModelPrivate): void {\n  if (\n    typeof model.listeners?.onContentDidChange === 'function' &&\n    !model.suppressChangeNotifications\n  ) {\n    model.suppressChangeNotifications = true;\n    model.listeners.onContentDidChange(model);\n    model.suppressChangeNotifications = false;\n  }\n}\n\n/// ///\n\nexport interface Disposable {\n  dispose(): void;\n}\n\nexport type EventListener = (...payload: any[]) => void;\n\nexport class EventEmitter {\n  events: Map<string, EventListener[]>;\n\n  constructor() {\n    this.events = new Map();\n  }\n\n  addListener(\n    event: string,\n    listener: EventListener,\n    options?: { once?: boolean }\n  ): Disposable {\n    if (!this.events.has(event)) {\n      this.events.set(event, []);\n    }\n\n    options = options ?? {};\n    if (options.once ?? false) {\n      listener = (...payload: any[]): void => {\n        this.events.get(event).filter((x) => x !== listener);\n        listener.apply(this, ...payload);\n      };\n    }\n\n    this.events.get(event).push(listener);\n    return {\n      dispose: (): void => {\n        this.events.set(\n          event,\n          this.events.get(event).filter((x) => x !== listener)\n        );\n      },\n    };\n  }\n\n  on(event: string, listener: EventListener): Disposable {\n    return this.addListener(event, listener);\n  }\n\n  once(event: string, listener: EventListener): Disposable {\n    return this.addListener(event, listener, { once: true });\n  }\n\n  emit(event: string, ...payload: any[]): boolean {\n    const listeners = this.events.get(event);\n    if (listeners && listeners.length > 0) {\n      for (const listener of listeners) listener.apply(this, ...payload);\n      return true;\n    }\n\n    return false;\n  }\n}\n\n/*\n// type User = { name: string };\n\n// interface UserEvents {\n//     login(user: User): void;\n//     logout(): string;\n// }\n\ntype Filter<T, Cond, U extends keyof T = keyof T> = {\n    [K in U]: T[K] extends Cond ? K : never;\n}[U];\n\ntype In<T> = T extends (...args: infer U) => any ? U : [];\ntype Out<T> = T extends () => infer U ? U : never;\n\n// Extract an array type of valid event keys\ntype EventKey<T> = Filter<T, Function> & string;\n\n// Extract the argument/return types of a valid event\ntype Arguments<T> = T extends (...args: infer U) => any ? U : [];\ntype Result<T> = T extends () => infer U ? U : never;\n\ntype EventIn<T, K extends EventKey<T>> = In<T[K]>;\ntype EventOut<T, K extends EventKey<T>> = Out<T[K]> | void;\n\nexport type Listener<T, K extends EventKey<T> = EventKey<T>> = (\n    ...args: EventIn<T, K>\n) => EventOut<T, K>;\n\nexport type ListenerMap<T> = Partial<{ [K in EventKey<T>]: Listener<T, K> }>;\n\ninterface Emitter<T> {\n    on<K extends EventKey<T>>(key: K, fn: Listener<T, K>): typeof fn;\n}\n\n// import { EventEmitter } from 'events';\n// const ee = (new EventEmitter() as unknown) as Emitter<UserEvents>;\n\n// ee.on('login', (user: string) => {});\n// ee.on('logout', () => {\n//     return 'done';\n// });\n*/\n","import { Range, Selection } from '../public/mathfield';\n\nexport function compareSelection(\n  a: Selection,\n  b: Selection\n): 'equal' | 'different' {\n  if (a.direction === b.direction) {\n    const l = a.ranges.length;\n    if (b.ranges.length === l) {\n      let i = 0;\n      while (i < l && compareRange(a.ranges[i], b.ranges[i]) === 'equal') {\n        i++;\n      }\n\n      return i === l ? 'equal' : 'different';\n    }\n  }\n\n  return 'different';\n}\n\nfunction compareRange(a: Range, b: Range): 'equal' | 'different' {\n  if (a[0] === b[0] && a[1] === b[1]) return 'equal';\n  return 'different';\n}\n\n/**\n * Return the smallest and largest offsets in a selection\n */\nexport function range(selection: Selection): Range {\n  let first = Infinity;\n  let last = -Infinity;\n  for (const range of selection.ranges) {\n    first = Math.min(first, range[0], range[1]);\n    last = Math.max(last, range[0], range[1]);\n  }\n  return [first, last];\n}\n","import type {\n  Model,\n  Mathfield,\n  Offset,\n  Range,\n  Selection,\n  OutputFormat,\n} from '../public/mathfield';\n\nimport type { MathfieldPrivate } from '../editor-mathfield/mathfield-private';\n\nimport { Atom, Branch, ToLatexOptions } from '../core/atom-class';\nimport { joinLatex } from '../core/tokenizer';\n\nimport { atomtoMathJson } from '../addons/math-json';\nimport { atomsToMathML } from '../addons/math-ml';\n\nimport { atomToAsciiMath } from '../editor/atom-to-ascii-math';\nimport { atomToSpeakableText } from '../editor/atom-to-speakable-text';\n\nimport {\n  contentDidChange,\n  ModelListeners,\n  selectionDidChange,\n} from './listeners';\nimport {\n  ModelOptions,\n  ModelHooks,\n  isOffset,\n  isSelection,\n  isRange,\n  AnnounceVerb,\n} from './utils';\nimport { compareSelection, range } from './selection-utils';\nimport { parseLatex } from '../core/parser';\n\nexport type GetAtomOptions = {\n  includeChildren?: boolean;\n};\n\nexport class ModelPrivate implements Model {\n  readonly mathfield: MathfieldPrivate;\n  readonly options: ModelOptions;\n  listeners: ModelListeners;\n  hooks: Required<ModelHooks>;\n\n  root: Atom;\n  suppressChangeNotifications: boolean;\n\n  private _selection: Selection;\n  private _anchor: Offset;\n  private _position: Offset;\n\n  constructor(\n    options?: ModelOptions,\n    listeners?: ModelListeners,\n    hooks?: ModelHooks,\n    target?: Mathfield\n  ) {\n    this.options = {\n      mode: 'math',\n      removeExtraneousParentheses: false,\n      ...options,\n    };\n    this.root = new Atom('root', { mode: this.options.mode });\n    this.root.body = [];\n    this._selection = { ranges: [[0, 0]], direction: 'none' };\n    this._anchor = 0;\n    this._position = 0;\n\n    this.setListeners(listeners);\n    this.setHooks(hooks);\n    this.mathfield = target as MathfieldPrivate;\n\n    this.suppressChangeNotifications = false;\n  }\n\n  get atoms(): Atom[] {\n    return this.root.children;\n  }\n\n  /**\n   * The selection, accounting for the common ancestors\n   */\n  get selection(): Selection {\n    return this._selection;\n  }\n\n  set selection(value: Selection) {\n    this.setSelection(value);\n  }\n\n  setSelection(from: Offset, to: Offset): boolean;\n  setSelection(range: Range): boolean;\n  setSelection(selection: Selection): boolean;\n  setSelection(arg1: Offset | Range | Selection, arg2?: Offset): boolean {\n    return this.deferNotifications({ selection: true }, () => {\n      //\n      // 1/ Normalize the input\n      // (account for offset < 0, etc...)\n      //\n      const value = this.normalizeSelection(arg1, arg2);\n\n      if (value === undefined) {\n        throw new TypeError('Invalid selection');\n      }\n\n      //\n      // 2/ Short-circuit a common case...\n      //\n      if (\n        value.ranges.length === 1 &&\n        value.ranges[0][0] === value.ranges[0][1]\n      ) {\n        const pos = value.ranges[0][0];\n        console.assert(pos >= 0 && pos <= this.lastOffset);\n        this._position = pos;\n        this._anchor = pos;\n        this._selection = value;\n      } else {\n        //\n        // 2b/ Determine the anchor and position\n        // (smallest, largest offsets, oriented as per `direction`)\n        //\n        const selRange = range(value);\n        if (value.direction === 'backward') {\n          [this._position, this._anchor] = selRange;\n        } else {\n          [this._anchor, this._position] = selRange;\n        }\n\n        const first = this.at(selRange[0]);\n        const last = this.at(selRange[1]);\n\n        const commonAncestor = Atom.commonAncestor(first, last);\n        if (\n          commonAncestor?.type === 'array' &&\n          first.parent === commonAncestor &&\n          last.parent === commonAncestor\n        ) {\n          // 3a/ If the parent of all the ranges is an array...\n          // Make a rectangular selection based on the col/row of the anchor\n          // and cursor\n          // @todo array\n        } else {\n          this._selection = {\n            ranges: [[this.offsetOf(first), this.offsetOf(last)]],\n            direction: value.direction,\n          };\n          // 3b.3/ Adjust the position to match the selection\n          if (value.direction === 'backward') {\n            this._position = this._selection.ranges[0][0];\n          } else {\n            this._position = this._selection.ranges[0][1];\n          }\n\n          console.assert(\n            this._position >= 0 && this._position <= this.lastOffset\n          );\n        }\n      }\n    });\n  }\n\n  /**\n   * The \"focus\" or \"cursor\" (i.e. not the anchor) a.k.a the insertion point\n   * or caret: where things are going to be inserted next.\n   *\n   */\n  get position(): Offset {\n    return this._position;\n  }\n\n  set position(value: Offset) {\n    this.setSelection(value, value);\n  }\n\n  /**\n   * The offset from which the selection is extended\n   */\n  get anchor(): Offset {\n    return this._anchor;\n  }\n\n  get selectionIsCollapsed(): boolean {\n    return this._anchor === this._position;\n  }\n\n  get selectionIsPlaceholder(): boolean {\n    if (Math.abs(this._anchor - this._position) === 1) {\n      return (\n        this.at(Math.max(this._anchor, this._position)).type === 'placeholder'\n      );\n    }\n\n    return false;\n  }\n\n  collapseSelection(direction: 'forward' | 'backward' = 'forward'): boolean {\n    if (this._anchor === this._position) return false;\n    if (direction === 'backward') {\n      this.position = Math.min(this._anchor, this._position);\n    } else {\n      this.position = Math.max(this._anchor, this._position);\n    }\n\n    return true;\n  }\n\n  get lastOffset(): Offset {\n    return this.atoms.length - 1;\n  }\n\n  at(index: number): Atom {\n    return this.atoms[index];\n  }\n\n  offsetOf(atom: Atom): Offset {\n    return this.atoms.indexOf(atom);\n  }\n\n  getSiblingsRange(offset: Offset): Range {\n    const atom: Atom = this.at(offset);\n    const { parent } = atom;\n    if (!parent) return [0, this.lastOffset];\n    const branch = atom.parent.branch(atom.treeBranch);\n    return [this.offsetOf(branch[0]), this.offsetOf(branch[branch.length - 1])];\n  }\n\n  getBranchRange(offset: Offset, branchName: Branch): Range {\n    const branch = this.at(offset).branch(branchName);\n    return [this.offsetOf(branch[0]), this.offsetOf(branch[branch.length - 1])];\n  }\n\n  /**\n   * Return the atoms in a range.\n   * getAtoms([3, 5]) -> atoms 4 and 5\n   * getAtoms(3, 5) -> atoms 4 and 5\n   * getAtom(3) -> all atoms, starting at 4 till lastOffset, then 0 to 3\n   * getAtoms(3, -1) -> all atoms after 3 till lastOffset\n   * getAtoms(-5, -2) -> all atoms between lastOffset - 4 and lastOffset - 1\n   * Note that an atom with children is included in the result only if\n   * all its children are in range.\n   */\n  getAtoms(arg: Selection, options?: GetAtomOptions): Atom[];\n  getAtoms(arg: Range, options?: GetAtomOptions): Atom[];\n  getAtoms(from: Offset, to?: Offset, options?: GetAtomOptions): Atom[];\n  getAtoms(\n    arg1: Selection | Range | Offset,\n    arg2?: Offset | GetAtomOptions,\n    arg3?: GetAtomOptions\n  ): Atom[] {\n    let options = arg3 ?? {};\n    if (isSelection(arg1)) {\n      options = (arg2 as GetAtomOptions) ?? {};\n      if (arg1.ranges.length > 1) {\n        return arg1.ranges.reduce(\n          (acc: Atom[], range) => [...acc, ...this.getAtoms(range, options)],\n          []\n        );\n      }\n\n      arg1 = arg1.ranges[0];\n    }\n\n    let start: number;\n    let end: number;\n    if (isOffset(arg1)) {\n      start = arg1;\n      if (!isOffset(arg2)) return [];\n      end = arg2;\n    } else {\n      [start, end] = arg1;\n      options = (arg2 as GetAtomOptions) ?? {};\n    }\n\n    if (!Number.isFinite(start)) return [];\n\n    if (options.includeChildren === undefined) {\n      options.includeChildren = false;\n    }\n\n    if (start < 0) start = this.lastOffset - start + 1;\n    if (end < 0) end = this.lastOffset - end + 1;\n    const first = Math.min(start, end) + 1;\n    const last = Math.max(start, end);\n\n    let result: Atom[] = [];\n    for (let i = first; i <= last; i++) {\n      const atom = this.atoms[i];\n      if (atomIsInRange(this, atom, first, last)) {\n        result.push(atom);\n      }\n    }\n\n    if (!options.includeChildren) {\n      // Remove any atoms whose ancestor is also included\n      result = result.filter((atom) => {\n        let ancestorIncluded = false;\n        let { parent } = atom;\n        while (parent && !ancestorIncluded) {\n          ancestorIncluded = atomIsInRange(this, parent, first, last);\n          parent = parent.parent;\n        }\n\n        return !ancestorIncluded;\n      });\n    }\n\n    return result;\n  }\n\n  /**\n   * Unlike `getAtoms()`, the argument here is an index\n   * Return all the atoms, in order, starting at startingIndex\n   * then looping back at the beginning\n   */\n  getAllAtoms(startingIndex: number): Atom[] {\n    const result: Atom[] = [];\n    const last = this.lastOffset;\n    for (let i = startingIndex; i <= last; i++) {\n      result.push(this.atoms[i]);\n    }\n\n    for (let i = 0; i < startingIndex; i++) {\n      result.push(this.atoms[i]);\n    }\n\n    return result;\n  }\n\n  extractAtoms(range: Range): Atom[] {\n    const result = this.getAtoms(range);\n    for (const child of result) child.parent.removeChild(child);\n    return result;\n  }\n\n  deleteAtoms(range: Range): Offset {\n    this.extractAtoms(range);\n    return range[0];\n  }\n\n  atomToString(atom: Atom, inFormat: OutputFormat): string {\n    const format: string = inFormat ?? 'latex';\n    let result = '';\n    if (format === 'latex' || format === 'latex-expanded') {\n      result = Atom.toLatex(atom, {\n        expandMacro: format === 'latex-expanded',\n      });\n    } else if (format === 'mathML' /* @deprecated */ || format === 'math-ml') {\n      if (format === 'mathML') {\n        console.error(\"'mathML is deprecated. Use 'math-ml' instead\");\n      }\n      result = atomsToMathML(atom, this.mathfield.options);\n    } else if (format === 'spoken') {\n      result = atomToSpeakableText(atom, this.mathfield.options);\n    } else if (format === 'spoken-text') {\n      const saveTextToSpeechMarkup = this.mathfield.options.textToSpeechMarkup;\n      this.mathfield.options.textToSpeechMarkup = '';\n      result = atomToSpeakableText(atom, this.mathfield.options);\n      this.mathfield.options.textToSpeechMarkup = saveTextToSpeechMarkup;\n    } else if (\n      format === 'spoken-ssml' ||\n      format === 'spoken-ssml-with-highlighting' ||\n      format === 'spoken-ssml-withHighlighting' // @deprecated\n    ) {\n      if (format === 'spoken-ssml-withHighlighting') {\n        console.error(\n          \"'spoken-ssml-withHighlighting is deprecated. Use 'spoken-ssml-with-highlighting' instead\"\n        );\n      }\n      const saveTextToSpeechMarkup = this.mathfield.options.textToSpeechMarkup;\n      // Const savedAtomIdsSettings = this.config.atomIdsSettings;    // @revisit\n      this.mathfield.options.textToSpeechMarkup = 'ssml';\n      // If (format === 'spoken-ssml-with-highlighting') {     // @revisit\n      //     this.config.atomIdsSettings = { seed: 'random' };\n      // }\n      result = atomToSpeakableText(atom, this.mathfield.options);\n      this.mathfield.options.textToSpeechMarkup = saveTextToSpeechMarkup;\n      // This.config.atomIdsSettings = savedAtomIdsSettings;      // @revisit\n    } else if (format === 'json') {\n      console.log('deprecated format. Use MathJSON');\n      // note: atomToMathJson is destructive (it filters out presentation atoms)\n      // So, don't pass in the current atoms, but create a new set based on the\n      // current Latex\n      const json = atomtoMathJson(\n        parseLatex(\n          Atom.toLatex(atom, { expandMacro: false }),\n          'math',\n          null,\n          this.mathfield.options.macros\n        )\n      );\n      result = JSON.stringify(json);\n    } else if (format === 'json-2') {\n      console.log('deprecated format. Use MathJSON');\n      const json = atomtoMathJson(atom);\n      // Const json = parseLatex(root.toLatex(true), {\n      //     form: 'canonical',\n      // });\n      result = JSON.stringify(json, null, 2);\n    } else if (\n      format === 'ASCIIMath' /* @deprecated */ ||\n      format === 'ascii-math'\n    ) {\n      if (format === 'ASCIIMath') {\n        console.error(\"'ASCIIMath' is deprecated. Use 'ascii-math' instead\");\n      }\n      result = atomToAsciiMath(atom);\n    } else {\n      console.warn('Unknown format :', format);\n    }\n\n    return result;\n  }\n\n  // GetValue(): string;\n  // getValue(format: OutputFormat): string;\n  // getValue(start: Offset, end: Offset, format?: OutputFormat): string;\n  // getValue(range: Range, format?: OutputFormat): string;\n  // getValue(selection: Selection, format?: OutputFormat): string;\n  getValue(\n    arg1?: Offset | OutputFormat | Range | Selection,\n    arg2?: Offset | OutputFormat,\n    arg3?: OutputFormat\n  ): string {\n    if (arg1 === undefined) {\n      // GetValue()\n      return this.atomToString(this.root, 'latex');\n    }\n\n    if (typeof arg1 === 'string') {\n      // GetValue(format): Output format only\n      return this.atomToString(this.root, arg1);\n    }\n\n    let ranges: Range[];\n    let format: OutputFormat;\n    if (isOffset(arg1) && isOffset(arg2)) {\n      ranges = [this.normalizeRange([arg1, arg2])];\n      format = arg3;\n    } else if (isRange(arg1)) {\n      ranges = [this.normalizeRange(arg1)];\n      format = arg2 as OutputFormat;\n    } else if (isSelection(arg1)) {\n      ranges = arg1.ranges;\n      format = arg2 as OutputFormat;\n    }\n\n    format = format ?? 'latex';\n    if (format === 'latex' || format === 'latex-expanded') {\n      const options: ToLatexOptions = {\n        expandMacro: format === 'latex-expanded',\n      };\n      return joinLatex(\n        ranges.map((range) => Atom.toLatex(this.getAtoms(range), options))\n      );\n    }\n\n    return ranges\n      .map((range): string =>\n        this.getAtoms(range)\n          .map((atom) => this.atomToString(atom, format))\n          .join('')\n      )\n      .join('');\n  }\n\n  /**\n   * Method called in response to a user interaction\n   */\n  extendSelection(direction: 'forward' | 'backward'): boolean {\n    let anchor = this._anchor;\n    // Keep the anchor anchored, move the position forward or back\n    if (direction === 'forward') {\n      let pos = this._position;\n      do {\n        let atom = this.at(pos + 1);\n        if (atom?.inCaptureSelection) {\n          // When going forward, if in a capture selection, jump to\n          // after\n          while (!atom.captureSelection) atom = atom.parent;\n          pos = this.offsetOf(atom?.parent.lastChild) + 1;\n        } else {\n          pos += 1;\n        }\n      } while (pos <= this.lastOffset && this.at(pos).isFirstSibling);\n\n      if (pos === anchor - 1 && this.at(anchor).type === 'first') {\n        pos = anchor;\n      }\n\n      return this.extendSelectionTo(anchor, pos);\n    }\n\n    //\n    // Extending backward\n    //\n    let pos = this._position - 1;\n\n    if (pos < 0) return false;\n\n    while (pos >= 0 && this.at(pos).isLastSibling) {\n      let atom = this.at(pos);\n      if (atom?.inCaptureSelection) {\n        // When going backward, if in a capture selection, jump to\n        // before\n        while (!atom.captureSelection) atom = atom.parent;\n        pos = this.offsetOf(atom?.parent.firstChild) - 1;\n      } else {\n        pos -= 1;\n      }\n    }\n\n    if (pos < 0) pos = 0;\n\n    if (pos === anchor + 1 && this.at(pos).type === 'first') {\n      anchor = pos;\n    }\n\n    return this.extendSelectionTo(anchor, pos);\n  }\n\n  /**\n   * Unlike `setSelection`, this method is intended to be used in response\n   * to a user action, and it performs various adjustments to result\n   * in a more intuitive selection.\n   * For example:\n   * - when all the children of an atom are selected, the atom\n   * become selected.\n   * - this method will *not* change the anchor, but may result\n   * in a selection whose boundary is outside the anchor\n   */\n  extendSelectionTo(anchor: Offset, position: Offset): boolean {\n    return this.deferNotifications({ selection: true }, () => {\n      const range = this.normalizeRange([anchor, position]);\n      let [start, end] = range;\n\n      // Include the parent if all the chidlren are selected\n      let { parent } = this.at(end);\n      while (\n        parent !== this.root &&\n        childrenInRange(this, parent, [start, end])\n      ) {\n        end = this.offsetOf(parent);\n        parent = parent.parent;\n      }\n\n      parent = this.at(start).parent;\n      while (\n        parent !== this.root &&\n        childrenInRange(this, parent, [start, end])\n      ) {\n        start = this.offsetOf(parent.leftSibling);\n        parent = parent.parent;\n      }\n\n      // Now that the start has potentially changed, check again\n      // if end needs to be updated\n      parent = this.at(end).parent;\n      while (\n        parent !== this.root &&\n        childrenInRange(this, parent, [start, end])\n      ) {\n        end = this.offsetOf(parent);\n        console.assert(end >= 0);\n        parent = parent.parent;\n      }\n\n      this._position = this.normalizeOffset(position);\n      this._selection = {\n        ranges: [[start, end]],\n        direction: 'none',\n      };\n    });\n  }\n\n  setListeners(listeners?: ModelListeners): void {\n    this.listeners = listeners;\n  }\n\n  setHooks(hooks?: ModelHooks): void {\n    this.hooks = {\n      announce: hooks?.announce\n        ? hooks.announce\n        : (\n            _target: Mathfield,\n            _command: string,\n            _previousPosition: number,\n            _atoms: Atom[]\n          ): void => {},\n      moveOut: hooks?.moveOut ? hooks.moveOut : (): boolean => true,\n      tabOut: hooks?.tabOut ? hooks.tabOut : (): boolean => true,\n    };\n  }\n\n  /**\n   * This method is called to provide feedback when using a screen reader\n   * or other assistive device, for example when changing the selection or\n   * moving the insertion point.\n   *\n   * It can also be used with the 'plonk' command to provide an audible\n   * feedback when a command is not possible.\n   *\n   * This method should not be called from other methods of the model\n   * (such as `setSelection`) as these methods can also be called\n   * programmatically and a feedback in these case would be innapropriate,\n   * however they should be called from functions called as a result of a user\n   * action, such as the functions in `commands.ts`\n   */\n  announce(\n    command: AnnounceVerb,\n    previousPosition?: number,\n    atoms: Atom[] = []\n  ): void {\n    this.hooks.announce(this.mathfield, command, previousPosition, atoms);\n  }\n\n  // Suppress notification while scope is executed,\n  // then notify of content change, and selection change (if actual change)\n  deferNotifications(\n    options: { content?: boolean; selection?: boolean },\n    f: () => void\n  ): boolean {\n    const oldSelection = this._selection;\n    const oldAnchor = this._anchor;\n    const oldPosition = this._position;\n    let selectionChanged = false;\n\n    const saved = this.suppressChangeNotifications;\n    this.suppressChangeNotifications = true;\n    const previousCounter = this.root.changeCounter;\n    f();\n\n    const contentChanged = this.root.changeCounter !== previousCounter;\n    if (\n      oldAnchor !== this._anchor ||\n      oldPosition !== this._position ||\n      compareSelection(this._selection, oldSelection) === 'different'\n    ) {\n      selectionChanged = true;\n    }\n\n    this.suppressChangeNotifications = saved;\n    if (!this.suppressChangeNotifications) {\n      // Notify of content change, if requested\n      if (options.content && contentChanged) {\n        contentDidChange(this);\n      }\n\n      // If the selection has effectively changed, notify\n      if (options.selection && selectionChanged) {\n        selectionDidChange(this);\n      }\n    }\n\n    return contentChanged || selectionChanged;\n  }\n\n  normalizeOffset(value: Offset): Offset {\n    if (value > 0) {\n      value = Math.min(value, this.lastOffset);\n    } else if (value < 0) {\n      value = this.lastOffset + value + 1;\n    }\n\n    return value;\n  }\n\n  /**\n   * Ensure that the range is valid and canonical, i.e.\n   * - start <= end\n   * - collapsed = start === end\n   * - start >= 0, end >=0\n   */\n  normalizeRange(range: Range): Range {\n    // 1. Normalize the offsets\n    let [start, end] = range;\n    start = this.normalizeOffset(start);\n    end = this.normalizeOffset(end);\n\n    return start < end ? [start, end] : [end, start];\n  }\n\n  normalizeSelection(\n    value: Offset | Range | Selection,\n    value2?: Offset\n  ): Selection {\n    let result: Selection;\n    if (isOffset(value)) {\n      const offset = this.normalizeOffset(value);\n      if (isOffset(value2)) {\n        const offset2 = this.normalizeOffset(value2);\n        result =\n          offset <= offset2\n            ? { ranges: [[offset, offset2]], direction: 'none' }\n            : {\n                ranges: [[offset2, offset]],\n                direction: 'backward',\n              };\n      } else {\n        result = { ranges: [[offset, offset]], direction: 'none' };\n      }\n    } else if (isRange(value)) {\n      const start = this.normalizeOffset(value[0]);\n      const end = this.normalizeOffset(value[1]);\n      result =\n        start <= end\n          ? { ranges: [[start, end]], direction: 'none' }\n          : { ranges: [[end, start]], direction: 'backward' };\n    } else if (isSelection(value)) {\n      result = {\n        ranges: value.ranges.map((x) => this.normalizeRange(x)),\n        direction: value.direction ?? 'none',\n      };\n    }\n\n    return result;\n  }\n}\n\nfunction atomIsInRange(\n  model: ModelPrivate,\n  atom: Atom,\n  first: Offset,\n  last: Offset\n): boolean {\n  const offset = model.offsetOf(atom);\n  if (offset < first || offset > last) {\n    return false;\n  }\n\n  if (!atom.hasChildren) return true;\n\n  const firstOffset = model.offsetOf(atom.firstChild);\n  if (firstOffset >= first && firstOffset <= last) {\n    const lastOffset = model.offsetOf(atom.lastChild);\n    if (lastOffset >= first && lastOffset <= last) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nfunction childrenInRange(\n  model: ModelPrivate,\n  atom: Atom,\n  range: Range\n): boolean {\n  if (!atom?.hasChildren) return false;\n  const [start, end] = range;\n  const first = model.offsetOf(atom.firstChild);\n  const last = model.offsetOf(atom.lastChild);\n  if (first >= start && first <= end && last >= first && last <= end) {\n    return true;\n  }\n\n  return false;\n}\n","import { Atom } from '../core/atom-class';\nimport type { Range } from '../public/mathfield';\nimport { OriginValidator } from '../public/options';\nimport { MathfieldPrivate } from './mathfield-private';\n\nexport type Rect = {\n  top: number;\n  bottom: number;\n  left: number;\n  right: number;\n};\n\nexport function on(\n  element: EventTarget,\n  inSelectors: string,\n  listener: EventListenerOrEventListenerObject,\n  options?: AddEventListenerOptions\n): void {\n  const selectors = inSelectors.split(' ');\n  for (const sel of selectors) {\n    const m = sel.match(/(.*):(.*)/);\n    if (m) {\n      const options2 = options ?? {};\n      if (m[2] === 'active') {\n        options2.passive = false;\n      } else {\n        options2[m[2]] = true;\n      }\n\n      element.addEventListener(m[1], listener, options2);\n    } else {\n      element.addEventListener(sel, listener, options);\n    }\n  }\n}\n\nexport function off(\n  element: EventTarget,\n  inSelectors: string,\n  listener: EventListenerOrEventListenerObject,\n  options?: AddEventListenerOptions\n): void {\n  const selectors = inSelectors.split(' ');\n  for (const sel of selectors) {\n    const m = sel.match(/(.*):(.*)/);\n    if (m) {\n      const options2 = options ?? {};\n      if (m[2] === 'active') {\n        options2.passive = false;\n      } else {\n        options2[m[2]] = true;\n      }\n\n      element.removeEventListener(m[1], listener, options2);\n    } else {\n      element.removeEventListener(sel, listener, options);\n    }\n  }\n}\n\nexport function getSharedElement(id: string, cls: string): HTMLElement {\n  let result = document.getElementById(id);\n  if (result) {\n    result.dataset.refcount = Number(\n      Number.parseInt(result.getAttribute('data-refcount')) + 1\n    ).toString();\n  } else {\n    result = document.createElement('div');\n    result.setAttribute('aria-hidden', 'true');\n    result.dataset.refcount = '1';\n    result.className = cls;\n    result.id = id;\n    document.body.append(result);\n  }\n\n  return result;\n}\n\n// @revisit: check the elements are correctly released\nexport function releaseSharedElement(element: HTMLElement): void {\n  if (!element) return;\n  const refcount = Number.parseInt(element.getAttribute('data-refcount'));\n  if (refcount <= 1) {\n    element.remove();\n  } else {\n    element.dataset.refcount = Number(refcount - 1).toString();\n  }\n}\n\n/**\n * Checks if the argument is a valid Mathfield.\n * After a Mathfield has been destroyed (for example by calling `dispose()`\n * the Mathfield is no longer valid. However, there may be some pending\n * operations invoked via requestAnimationFrame() for example, that would\n * need to ensure the mathfield is still valid by the time they're executed.\n */\nexport function isValidMathfield(mf: MathfieldPrivate): boolean {\n  return mf.element && mf.element.mathfield === mf;\n}\n\n/**\n * Return the element which has the caret\n */\nfunction findElementWithCaret(element: Element): Element {\n  return (\n    element.querySelector('.ML__caret') ??\n    element.querySelector('.ML__text-caret') ??\n    element.querySelector('.ML__latex-caret')\n  );\n}\n\n/**\n * Return the (x,y) client coordinates of the caret\n */\nexport function getCaretPoint(\n  element: Element\n): { x: number; y: number; height: number } | null {\n  const caret = findElementWithCaret(element);\n  if (!caret) return null;\n  const bounds = caret.getBoundingClientRect();\n  return {\n    x: bounds.right,\n    y: bounds.bottom,\n    height: bounds.height,\n  };\n}\n\nfunction branchId(atom: Atom): string {\n  let result = atom.parent ? atom.parent.id : 'root';\n  result +=\n    typeof atom.treeBranch === 'string'\n      ? '-' + atom.treeBranch\n      : `-${atom.treeBranch[0]}/${atom.treeBranch[0]}`;\n  return result;\n}\n\nfunction adjustForScrolling(\n  mathfield: MathfieldPrivate,\n  rect: Rect | null\n): Rect | null {\n  if (!rect) return null;\n  const fieldRect = mathfield.field.getBoundingClientRect();\n  const w = rect.right - rect.left;\n  const h = rect.bottom - rect.top;\n  const left = Math.ceil(\n    rect.left - fieldRect.left + mathfield.field.scrollLeft\n  );\n  const top = Math.ceil(rect.top - fieldRect.top);\n  return {\n    left,\n    right: left + w,\n    top,\n    bottom: top + h,\n  };\n}\n\nfunction getNodeBounds(node: Element): Rect {\n  const bounds = node.getBoundingClientRect();\n  const marginRight = parseInt(getComputedStyle(node).marginRight);\n  const result: Rect = {\n    top: bounds.top - 1,\n    bottom: bounds.bottom,\n    left: bounds.left,\n    right: bounds.right - 1 + marginRight,\n  };\n  if (node.children.length > 0 && node.tagName.toUpperCase() !== 'SVG') {\n    for (const child of node.children) {\n      if (child.nodeType === 1) {\n        const r: Rect = getNodeBounds(child);\n        result.left = Math.min(result.left, r.left);\n        result.right = Math.max(result.right, r.right);\n        result.top = Math.min(result.top, r.top);\n        result.bottom = Math.max(result.bottom, r.bottom);\n      }\n    }\n  }\n  return result;\n}\n\nexport function getAtomBounds(\n  mathfield: MathfieldPrivate,\n  atom: Atom\n): Rect | null {\n  if (!atom.id) return null;\n  let result = mathfield._atomBoundsCache?.get(atom.id);\n  if (result !== undefined) return result;\n  const node = mathfield.field.querySelector(`[data-atom-id=\"${atom.id}\"]`);\n  result = node ? getNodeBounds(node) : null;\n  if (mathfield._atomBoundsCache) {\n    mathfield._atomBoundsCache.set(atom.id, result);\n  }\n  return result;\n}\n\n/*\n * Return an array of bounds for the specified range, at most\n * one rect per branch.\n */\nexport function getRangeBounds(\n  mathfield: MathfieldPrivate,\n  range: Range\n): Rect[] {\n  // The key of the map is a 'branchId', i.e. \"atom id + branch\"\n  const rects = new Map<string, Rect>();\n\n  for (const atom of mathfield.model.getAtoms(range, {\n    includeChildren: true,\n  })) {\n    const bounds = adjustForScrolling(\n      mathfield,\n      getAtomBounds(mathfield, atom)\n    );\n    if (bounds) {\n      const id = branchId(atom);\n      if (rects.has(id)) {\n        const r = rects.get(id);\n        rects.set(id, {\n          left: Math.min(r.left, bounds.left),\n          right: Math.max(r.right, bounds.right),\n          top: Math.min(r.top, bounds.top),\n          bottom: Math.max(r.bottom, bounds.bottom),\n        });\n      } else {\n        rects.set(id, bounds);\n      }\n    }\n  }\n\n  return [...rects.values()];\n}\n\nexport function getSelectionBounds(mathfield: MathfieldPrivate): Rect[] {\n  return mathfield.model.selection.ranges.reduce(\n    (acc, x) => acc.concat(...getRangeBounds(mathfield, x)),\n    []\n  );\n}\n\nexport function validateOrigin(\n  origin: string,\n  originValidator: OriginValidator\n): boolean {\n  if (originValidator === 'none') {\n    return true;\n  }\n\n  if (originValidator === 'same-origin') {\n    return origin === window.origin;\n  }\n\n  if (typeof originValidator === 'function') {\n    return originValidator(origin);\n  }\n\n  return false;\n}\n","/* eslint-disable no-new */\nimport { colorToString } from './color';\nimport {\n  getInfo,\n  mathVariantToUnicode,\n} from '../core-definitions/definitions-utils';\nimport { Atom, ToLatexOptions } from './atom';\nimport { joinLatex } from './tokenizer';\nimport { getPropertyRuns, Mode } from './modes-utils';\nimport { Style } from '../public/core';\nimport { Span } from './span';\n\n// Each entry indicate the font-name (to be used to calculate font metrics)\n// and the CSS classes (for proper markup styling) for each possible\n// variant combinations.\nconst VARIANTS: Record<string, [string, string]> = {\n  // Handle some special characters which are only available in \"main\" font (not \"math\")\n  'main': ['Main-Regular', 'ML__cmr'],\n  'main-italic': ['Main-Italic', 'ML__cmr ML__it'],\n  'main-bold': ['Main-Bold', 'ML__cmr ML__bold'],\n  'main-bolditalic': ['Main-BoldItalic', 'ML__cmr ML_bold ML__it'],\n\n  'normal': ['Main-Regular', 'ML__cmr'], // 'main' font. There is no 'math' regular (upright)\n  'normal-bold': ['Main-Bold', 'ML__mathbf'], // 'main' font. There is no 'math' bold\n  'normal-italic': ['Math-Italic', 'ML__mathit'], // Special metrics for 'math'\n  'normal-bolditalic': ['Math-BoldItalic', 'ML__mathbfit'], // Special metrics for 'math'\n\n  // Extended math symbols, arrows, etc.. at their standard Unicode codepoints\n  'ams': ['AMS-Regular', 'ML__ams'],\n  'ams-bold': ['AMS-Regular', 'ML__ams'],\n  'ams-italic': ['AMS-Regular', 'ML__ams'],\n  'ams-bolditalic': ['AMS-Regular', 'ML__ams'],\n\n  'sans-serif': ['SansSerif-Regular', 'ML__sans'],\n  'sans-serif-bold': ['SansSerif-Regular', 'ML__sans ML__bold'],\n  'sans-serif-italic': ['SansSerif-Regular', 'ML__sans'],\n  'sans-serif-bolditalic': ['SansSerif-Regular', 'ML__sans'],\n\n  'calligraphic': ['Caligraphic-Regular', 'ML__cal'],\n  'calligraphic-bold': ['Caligraphic-Regular', 'ML__cal ML__bold'],\n  'calligraphic-italic': ['Caligraphic-Regular', 'ML__cal ML__it'],\n  'calligraphic-bolditalic': ['Caligraphic-Regular', 'ML__cal ML__bold ML__it'],\n\n  'script': ['Script-Regular', 'ML__script'],\n  'script-bold': ['Script-Regular', 'ML__script ML__bold'],\n  'script-italic': ['Script-Regular', 'ML__script ML__it'],\n  'script-bolditalic': ['Script-Regular', 'ML__script ML__bold ML__it'],\n\n  'fraktur': ['Fraktur-Regular', 'ML__frak'],\n  'fraktur-bold': ['Fraktur-Regular', 'ML__frak'],\n  'fraktur-italic': ['Fraktur-Regular', 'ML__frak'],\n  'fraktur-bolditalic': ['Fraktur-Regular', 'ML__frak'],\n\n  'monospace': ['Typewriter-Regular', 'ML__tt'],\n  'monospace-bold': ['Typewriter-Regular', 'ML__tt ML__bold'],\n  'monospace-italic': ['Typewriter-Regular', 'ML__tt ML__it'],\n  'monospace-bolditalic': ['Typewriter-Regular', 'ML__tt ML__bold ML__it'],\n\n  // Blackboard characters are 'A-Z' in the AMS font\n  'double-struck': ['AMS-Regular', 'ML__bb'],\n  'double-struck-bold': ['AMS-Regular', 'ML__bb'],\n  'double-struck-italic': ['AMS-Regular', 'ML__bb'],\n  'double-struck-bolditalic': ['AMS-Regular', 'ML__bb'],\n};\n\nconst VARIANT_REPERTOIRE = {\n  'double-struck': /^[A-Z ]$/,\n  'script': /^[A-Z ]$/,\n  'calligraphic': /^[\\dA-Z ]$/,\n  'fraktur': /^[\\dA-Za-z ]$|^[!\"#$%&'()*+,\\-./:;=?[]^’‘]$/,\n  'monospace': /^[\\dA-Za-z ]$|^[!\"&'()*+,\\-./:;=?@[\\]^_~\\u0131\\u0237\\u0393\\u0394\\u0398\\u039B\\u039E\\u03A0\\u03A3\\u03A5\\u03A8\\u03A9]$/,\n  'sans-serif': /^[\\dA-Za-z ]$|^[!\"&'()*+,\\-./:;=?@[\\]^_~\\u0131\\u0237\\u0393\\u0394\\u0398\\u039B\\u039E\\u03A0\\u03A3\\u03A5\\u03A8\\u03A9]$/,\n};\n\nconst GREEK_LOWERCASE = /^[\\u03B1-\\u03C9]|\\u03D1|\\u03D5|\\u03D6|\\u03F1|\\u03F5]$/;\nconst GREEK_UPPERCASE = /^[\\u0393|\\u0394\\u0398\\u039B\\u039E\\u03A0\\u03A3\\u03A5\\u03A6\\u03A8\\u03A9]$/;\n\nconst LETTER_SHAPE_RANGES = [\n  /^[a-z]$/, // Lowercase latin\n  /^[A-Z]$/, // Upppercase latin\n  GREEK_LOWERCASE,\n  GREEK_UPPERCASE,\n];\n\n// The letterShapeStyle property indicates which characters should be\n// automatically italicized (see LETTER_SHAPE_RANGES)\nconst LETTER_SHAPE_MODIFIER = {\n  iso: ['it', 'it', 'it', 'it'],\n  tex: ['it', 'it', 'it', 'up'],\n  french: ['it', 'up', 'up', 'up'],\n  upright: ['up', 'up', 'up', 'up'],\n};\n\n// See http://ctan.math.illinois.edu/macros/latex/base/fntguide.pdf\n\nexport class MathMode extends Mode {\n  constructor() {\n    super('math');\n  }\n\n  createAtom(command: string, style: Style): Atom | null {\n    const info = getInfo(command, 'math');\n    const value = info?.value ?? command;\n    const result = new Atom(info?.type ?? 'mord', {\n      mode: 'math',\n      command,\n      value,\n      style,\n    });\n    if (info?.isFunction ?? false) {\n      result.isFunction = true;\n    }\n\n    if (command.startsWith('\\\\')) {\n      result.latex = command;\n    }\n\n    return result;\n  }\n\n  toLatex(run: Atom[], options: ToLatexOptions): string {\n    const { parent } = run[0];\n    const parentMode = parent?.mode ?? 'math';\n    const contextValue = variantString(parent);\n    const contextColor = parent?.computedStyle.color;\n    return joinLatex(\n      getPropertyRuns(run, 'color').map((x) => {\n        const result = joinLatex(\n          getPropertyRuns(x, 'variant').map((x) => {\n            const value = variantString(x[0]);\n            // Check if all the atoms in this run have a base\n            // variant identical to the current variant\n            // If so, we can skip wrapping them\n            if (\n              x.every((x) => {\n                const info = getInfo(x.command, parentMode, null);\n                if (!info || !info.variant) return false;\n\n                return variantString(x) === value;\n              })\n            ) {\n              return joinLatex(x.map((x) => Atom.toLatex(x, options)));\n            }\n\n            let command = '';\n            if (value && value !== contextValue) {\n              command = {\n                'calligraphic': '\\\\mathcal{',\n                'fraktur': '\\\\mathfrak{',\n                'double-struck': '\\\\mathbb{',\n                'script': '\\\\mathscr{',\n                'monospace': '\\\\mathtt{',\n                'sans-serif': '\\\\mathsf{',\n                'normal': '\\\\mathrm{',\n                'normal-italic': '\\\\mathit{',\n                'normal-bold': '\\\\mathbf{',\n                'normal-bolditalic': '\\\\mathbfit{',\n                'ams': '',\n                'ams-italic': '\\\\mathit{',\n                'ams-bold': '\\\\mathbf{',\n                'ams-bolditalic': '\\\\mathbfit{',\n                'main': '',\n                'main-italic': '\\\\mathit{',\n                'main-bold': '\\\\mathbf{',\n                'main-bolditalic': '\\\\mathbfit{',\n                // There are a few rare font families possible, which\n                // are not supported:\n                // mathbbm, mathbbmss, mathbbmtt, mathds, swab, goth\n                // In addition, the 'main' and 'math' font technically\n                // map to \\mathnormal{}\n              }[value];\n              console.assert(command !== undefined);\n            }\n\n            return (\n              joinLatex([command, ...x.map((x) => Atom.toLatex(x, options))]) +\n              (command ? '}' : '')\n            );\n          })\n        );\n        const style = x[0].computedStyle;\n        if (style.color && (!parent || contextColor !== style.color)) {\n          return (\n            '\\\\textcolor{' + colorToString(style.color) + '}{' + result + '}'\n          );\n        }\n\n        return result;\n      })\n    );\n  }\n\n  applyStyle(span: Span, style: Style): string {\n    // If no variant specified, don't change the font\n    if (style.variant === undefined) return '';\n\n    // LetterShapeStyle will usually be set automatically, except when the\n    // locale cannot be determined, in which case its value will be 'auto'\n    // which we default to 'tex'\n    const letterShapeStyle =\n      style.letterShapeStyle === 'auto' || !style.letterShapeStyle\n        ? 'tex'\n        : style.letterShapeStyle;\n    let { variant } = style;\n    let { variantStyle } = style;\n\n    // 1. Remap to \"main\" font some characters that don't exist\n    // in the \"math\" font\n\n    // There are two fonts that include the roman italic characters, \"main-it\" and \"math\"\n    // They are similar, but the \"math\" font has some different kernings ('f')\n    // and some slightly different character shape. It doesn't include a few\n    // characters, so for those characters, \"main\" has to be used instead\n\n    // \\imath, \\jmath and \\pound don't exist in \"math\" font,\n    // so use \"main\" italic instead.\n    if (\n      variant === 'normal' &&\n      !variantStyle &&\n      /[\\u00A3\\u0131\\u0237]/.test(span.value)\n    ) {\n      variant = 'main';\n      variantStyle = 'italic';\n    }\n\n    // 2. If no explicit variant style, auto-italicize some symbols,\n    // depending on the letterShapeStyle\n    if (variant === 'normal' && !variantStyle && span.value.length === 1) {\n      LETTER_SHAPE_RANGES.forEach((x, i) => {\n        if (\n          x.test(span.value) &&\n          LETTER_SHAPE_MODIFIER[letterShapeStyle][i] === 'it'\n        ) {\n          variantStyle = 'italic';\n        }\n      });\n    }\n\n    // 3. Map the variant + variantStyle to a font\n    if (variantStyle === 'up') {\n      variantStyle = undefined;\n    }\n\n    const styledVariant = variantStyle ? variant + '-' + variantStyle : variant;\n\n    console.assert(VARIANTS[styledVariant] !== undefined);\n\n    const [fontName, classes] = VARIANTS[styledVariant];\n\n    // 4. If outside the font repertoire, switch to system font\n    // (return NULL to use default metrics)\n    if (\n      VARIANT_REPERTOIRE[variant] &&\n      !VARIANT_REPERTOIRE[variant].test(span.value)\n    ) {\n      // Map to unicode character\n      span.value = mathVariantToUnicode(span.value, variant, variantStyle);\n      // Return NULL to use default metrics\n      return null;\n    }\n\n    // Lowercase greek letters have an incomplete repertoire (no bold)\n    // so, for \\mathbf to behave correctly, add a 'lcGreek' class.\n    if (GREEK_LOWERCASE.test(span.value)) {\n      span.classes += ' lcGreek';\n    }\n\n    // 5. Assign classes based on the font\n    if (classes) {\n      span.classes += ' ' + classes;\n    }\n\n    return fontName;\n  }\n}\nfunction variantString(atom: Atom): string {\n  if (!atom) return '';\n  const { style } = atom;\n  if (style.variant === undefined) return '';\n  let result = style.variant;\n  if (style.variantStyle && style.variantStyle !== 'up') {\n    result += '-' + style.variantStyle;\n  }\n\n  return result;\n}\n\n// Singleton class\nnew MathMode();\n","/* eslint-disable no-new */\nimport { ErrorListener, Style, ParserErrorCode } from '../public/core';\nimport { Mode, ParseTokensOptions, getPropertyRuns } from './modes-utils';\nimport { colorToString } from './color';\nimport { joinLatex, Token } from './tokenizer';\nimport { Span } from './span';\nimport { Atom, ToLatexOptions } from './atom';\nimport { getInfo, charToLatex } from '../core-definitions/definitions';\nimport { TextAtom } from '../core-atoms/text';\n\nfunction emitStringTextRun(run: Atom[], options: ToLatexOptions): string {\n  return joinLatex(run.map((x: Atom) => Atom.toLatex(x, options)));\n}\n\nfunction emitFontShapeTextRun(run: Atom[], options: ToLatexOptions): string {\n  return joinLatex(\n    getPropertyRuns(run, 'fontShape').map((x: Atom[]) => {\n      const result = emitStringTextRun(x, options);\n      const { fontShape } = x[0].style;\n      if (fontShape === 'it') {\n        return '\\\\textit{' + result + '}';\n      }\n\n      if (fontShape === 'sl') {\n        return '\\\\textsl{' + result + '}';\n      }\n\n      if (fontShape === 'sc') {\n        return '\\\\textsc{' + result + '}';\n      }\n\n      if (fontShape === 'n') {\n        return '\\\\textup{' + result + '}';\n      }\n\n      if (fontShape) {\n        return '\\\\fontshape{' + x[0].style.fontShape + '}' + result;\n      }\n\n      return result;\n    })\n  );\n}\n\nfunction emitFontSeriesTextRun(run: Atom[], options: ToLatexOptions): string {\n  return joinLatex(\n    getPropertyRuns(run, 'fontSeries').map((x) => {\n      const result = emitFontShapeTextRun(x, options);\n      const { fontSeries } = x[0].style;\n      if (fontSeries === 'b') {\n        return '\\\\textbf{' + result + '}';\n      }\n\n      if (fontSeries === 'l') {\n        return '\\\\textlf{' + result + '}';\n      }\n\n      if (fontSeries === 'm') {\n        return '\\\\textmd{' + result + '}';\n      }\n\n      if (fontSeries) {\n        return '\\\\fontseries{' + fontSeries + '}' + result;\n      }\n\n      return result;\n    })\n  );\n}\n\nfunction emitSizeTextRun(run: Atom[], options: ToLatexOptions): string {\n  return joinLatex(\n    getPropertyRuns(run, 'fontSize').map((x: Atom[]) => {\n      const result = emitFontSeriesTextRun(x, options);\n      const command: string =\n        {\n          size1: 'tiny',\n          size2: 'scriptsize',\n          size3: 'footnotesize',\n          size4: 'small',\n          size5: 'normalsize',\n          size6: 'large',\n          size7: 'Large',\n          size8: 'LARGE',\n          size9: 'huge',\n          size10: 'Huge',\n        }[x[0].style.fontSize] || '';\n      if (command) {\n        return `\\\\${command} ${result}`;\n      }\n\n      return result;\n    })\n  );\n}\n\nfunction emitFontFamilyTextRun(run: Atom[], options: ToLatexOptions): string {\n  return joinLatex(\n    getPropertyRuns(run, 'fontFamily').map((x: Atom[]) => {\n      const result = emitSizeTextRun(x, options);\n      const command: string =\n        {\n          'roman': 'textrm',\n          'monospace': 'texttt',\n          'sans-serif': 'textsf',\n        }[x[0].style.fontFamily] || '';\n      if (command) return `\\\\${command}{${result}}`;\n\n      if (x[0].style.fontFamily) {\n        return '\\\\fontfamily{' + x[0].style.fontFamily + '}' + result;\n      }\n\n      return result;\n    })\n  );\n}\n\nfunction emitStyledTextRun(run: Atom[], options: ToLatexOptions): string {\n  return emitFontFamilyTextRun(run, options);\n}\n\nfunction emitColorRun(run: Atom[], options: ToLatexOptions): string {\n  if (!run || run.length === 0) return '';\n  const parentColor = run[0].parent?.style.color;\n  return joinLatex(\n    getPropertyRuns(run, 'color').map((x) => {\n      const result = emitStyledTextRun(x, options);\n\n      if (\n        x[0].style.color &&\n        x[0].style.color !== 'none' &&\n        parentColor !== x[0].style.color\n      ) {\n        // If there is a color specified, and it is different\n        // from our context color, output a command\n        return (\n          '\\\\textcolor{' + colorToString(x[0].style.color) + '}{' + result + '}'\n        );\n      }\n\n      return result;\n    })\n  );\n}\n\nconst TEXT_FONT_CLASS: Record<string, string> = {\n  'roman': '',\n  'sans-serif': 'ML__sans',\n  'monospace': 'ML__tt',\n};\n\nexport class TextMode extends Mode {\n  constructor() {\n    super('text');\n  }\n\n  createAtom(command: string, style: Style): Atom | null {\n    const info = getInfo(command, 'text');\n    const value = info?.value ?? command;\n    return new TextAtom(command, value, style);\n  }\n\n  toLatex(inRun: Atom[], options: ToLatexOptions): string {\n    const run = [...inRun];\n    let prefix = '';\n    while (run[0]?.changeMode ?? false) {\n      prefix += emitColorRun([run[0]], options);\n      run.shift();\n    }\n    let suffix = '';\n    if (run.length > 0) {\n      suffix += emitColorRun(run, options);\n    }\n    if (options.skipModeCommand ?? false) return prefix + suffix;\n\n    if (suffix) {\n      const allAtomsHaveShapeOrSeriesOrFontFamily = run.every(\n        (x: Atom) =>\n          x.style.fontSeries || x.style.fontShape || x.style.fontFamily\n      );\n      if (!allAtomsHaveShapeOrSeriesOrFontFamily) {\n        // Wrap in text, only if there isn't a shape or series on\n        // all the atoms, because if so, it will be wrapped in a\n        // \\\\textbf, \\\\textit, etc... and the \\\\text would be redundant\n        suffix = `\\\\text{${suffix}}`;\n      }\n    }\n    return prefix + suffix;\n  }\n\n  /**\n   * Return the font-family name\n   */\n  applyStyle(span: Span, style: Style): string {\n    const { fontFamily } = style;\n\n    if (TEXT_FONT_CLASS[fontFamily]) {\n      span.classes += ' ' + TEXT_FONT_CLASS[fontFamily];\n    } else if (fontFamily) {\n      // Not a well-known family. Use a style.\n      span.setStyle('font-family', fontFamily);\n    }\n\n    if (style.fontShape) {\n      span.classes += ' ';\n      span.classes +=\n        {\n          it: 'ML__it',\n          sl: 'ML__shape_sl', // Slanted\n          sc: 'ML__shape_sc', // Small caps\n          ol: 'ML__shape_ol', // Outline\n        }[style.fontShape] ?? '';\n    }\n\n    if (style.fontSeries) {\n      const m = style.fontSeries.match(/(.?[lbm])?(.?[cx])?/);\n      if (m) {\n        span.classes += ' ';\n        span.classes +=\n          {\n            ul: 'ML__series_ul',\n            el: 'ML__series_el',\n            l: 'ML__series_l',\n            sl: 'ML__series_sl',\n            m: '', // Medium (default)\n            sb: 'ML__series_sb',\n            b: 'ML__bold',\n            eb: 'ML__series_eb',\n            ub: 'ML__series_ub',\n          }[m[1] ?? ''] ?? '';\n        span.classes += ' ';\n        span.classes +=\n          {\n            uc: 'ML__series_uc',\n            ec: 'ML__series_ec',\n            c: 'ML__series_c',\n            sc: 'ML__series_sc',\n            n: '', // Normal (default)\n            sx: 'ML__series_sx',\n            x: 'ML__series_x',\n            ex: 'ML__series_ex',\n            ux: 'ML__series_ux',\n          }[m[2] ?? ''] ?? '';\n      }\n    }\n\n    // Always use the metrics of 'Main-Regular' in text mode\n    return 'Main-Regular';\n  }\n\n  // Given an array of tokens, return an array of atoms\n  // options.args\n  // options.macros\n  // options.smartFence\n  // options.style\n  // options.parser\n  parse(\n    tokens: Token[],\n    error: ErrorListener<ParserErrorCode>,\n    options: ParseTokensOptions\n  ): [Atom[], Token[]] {\n    let result = [];\n    let atom: Atom;\n\n    while (tokens.length > 0) {\n      const token = tokens.shift();\n      if (token === '<space>') {\n        result.push(new TextAtom(' ', ' ', options.style));\n      } else if (token.startsWith('\\\\')) {\n        // Invoke the 'main' parser to handle the command\n        tokens.unshift(token);\n        let atoms: Atom[];\n        [atoms, tokens] = options.parse('text', tokens, options);\n        result = [...result, ...atoms];\n      } else if (token === '<$>' || token === '<$$>') {\n        // Mode-shift\n        const subtokens = tokens.slice(\n          0,\n          tokens.findIndex((x: Token) => x === token)\n        );\n        tokens = tokens.slice(subtokens.length + 1);\n        const [atoms] = options.parse('math', subtokens, options);\n        result = [...result, ...atoms];\n      } else if (token === '<{>' || token === '<}>') {\n        // Spurious braces are ignored by TeX in text mode\n        // In text mode, braces are sometimes used to separate adjacent\n        // commands without inserting a space, e.g. \"\\backlash{}command\"\n      } else {\n        const info = getInfo(token, 'text', options.macros);\n        if (!info || (info.ifMode && !info.ifMode.includes('text'))) {\n          error({ code: 'unexpected-token' });\n        } else {\n          atom = new TextAtom(token, info.value, options.style);\n          atom.latex = charToLatex('text', token);\n          result.push(atom);\n        }\n      }\n    }\n\n    return [result, tokens];\n  }\n}\n\n// Singleton class\nnew TextMode();\n","import { Span } from '../core/span';\nimport { Context } from '../core/context';\nimport { Style } from '../public/core';\n\nimport { Atom, ToLatexOptions } from '../core/atom-class';\n\n/**\n * Atom for raw latex character, while in Latex editing mode\n */\nexport class LatexAtom extends Atom {\n  isSuggestion: boolean; // This atom is a suggestion\n  isError: boolean;\n  constructor(\n    value: string,\n    options?: {\n      isSuggestion: boolean;\n    }\n  ) {\n    super('latex', { value, mode: 'latex' });\n    this.isSuggestion = options?.isSuggestion ?? false;\n    this.isError = false;\n    this.latex = value;\n  }\n\n  get computedStyle(): Style {\n    return {};\n  }\n\n  render(context: Context): Span {\n    const result = new Span(this.value, {\n      classes: this.isSuggestion\n        ? 'ML__suggestion'\n        : this.isError\n        ? 'ML__error'\n        : '',\n      type: 'latex',\n    });\n    if (this.caret) result.caret = this.caret;\n    return this.bind(context, result);\n  }\n}\n\n/**\n * A group that represents a raw Latex editing zone.\n * There is only one LatexGroupAtom at a time in an expression.\n */\nexport class LatexGroupAtom extends Atom {\n  constructor(latex: string) {\n    super('group', { mode: 'latex' });\n    this.body = [...latex].map((x) => new LatexAtom(x));\n\n    this.skipBoundary = false;\n  }\n\n  render(context: Context): Span {\n    const span = new Span(Atom.render(context, this.body), { type: 'mord' });\n\n    if (this.caret) span.caret = this.caret;\n    // Need to bind the group so that the DOM element can be matched\n    // and the atom iterated recursively. Otherwise, it behaves\n    // as if `captureSelection === true`\n    return this.bind(context, span);\n  }\n\n  toLatex(_options: ToLatexOptions): string {\n    return this.body.map((x) => x.value).join('');\n  }\n}\n","/* eslint-disable no-new */\nimport { Mode } from './modes-utils';\nimport { Atom, ToLatexOptions } from './atom';\nimport { LatexAtom } from '../core-atoms/latex';\nimport { Style } from '../public/core';\n\nexport class LatexMode extends Mode {\n  constructor() {\n    super('latex');\n  }\n\n  createAtom(command: string, _style: Style): Atom | null {\n    return new LatexAtom(command);\n  }\n\n  toLatex(run: Atom[], _options: ToLatexOptions): string {\n    return run\n      .filter((x) => x instanceof LatexAtom && !x.isSuggestion)\n      .map((x) => x.value)\n      .join('');\n  }\n}\n\nnew LatexMode();\n","import type { KeyboardLayoutName as KeyboardLayoutId } from '../public/options';\n\ntype KeystrokeModifiers = {\n  shift: boolean;\n  alt: boolean;\n  cmd: boolean;\n  win: boolean;\n  meta: boolean;\n  ctrl: boolean;\n  key: string;\n};\n\nexport function keystrokeModifiersFromString(key: string): KeystrokeModifiers {\n  const segments = key.split('+');\n  const result: KeystrokeModifiers = {\n    shift: false,\n    alt: false,\n    cmd: false,\n    win: false,\n    meta: false,\n    ctrl: false,\n    key: segments.pop(),\n  };\n  if (segments.includes('shift')) result.shift = true;\n  if (segments.includes('alt')) result.alt = true;\n  if (segments.includes('ctrl')) result.ctrl = true;\n  if (segments.includes('cmd')) result.cmd = true;\n  if (segments.includes('win')) result.win = true;\n  if (segments.includes('meta')) result.meta = true;\n\n  return result;\n}\n\nexport function keystrokeModifiersToString(key: KeystrokeModifiers): string {\n  let result = '';\n  if (key.shift) result += 'shift+';\n  if (key.alt) result += 'alt+';\n  if (key.ctrl) result += 'ctrl+';\n  if (key.cmd) result += 'cmd+';\n  if (key.win) result += 'win+';\n  if (key.meta) result += 'meta+';\n\n  return result + key.key;\n}\n\n// From https://www.w3.org/TR/uievents-code/\ntype Keycode =\n  | 'Sleep'\n  | 'WakeUp'\n  | 'KeyA'\n  | 'KeyB'\n  | 'KeyC'\n  | 'KeyD'\n  | 'KeyE'\n  | 'KeyF'\n  | 'KeyG'\n  | 'KeyH'\n  | 'KeyI'\n  | 'KeyJ'\n  | 'KeyK'\n  | 'KeyL'\n  | 'KeyM'\n  | 'KeyN'\n  | 'KeyO'\n  | 'KeyP'\n  | 'KeyQ'\n  | 'KeyR'\n  | 'KeyS'\n  | 'KeyT'\n  | 'KeyU'\n  | 'KeyV'\n  | 'KeyW'\n  | 'KeyX'\n  | 'KeyY'\n  | 'KeyZ'\n  | 'Digit1'\n  | 'Digit2'\n  | 'Digit3'\n  | 'Digit4'\n  | 'Digit5'\n  | 'Digit6'\n  | 'Digit7'\n  | 'Digit8'\n  | 'Digit9'\n  | 'Digit0'\n  | 'Enter'\n  | 'Escape'\n  | 'Backspace'\n  | 'Tab'\n  | 'Space'\n  | 'Minus'\n  | 'Equal'\n  | 'BracketLeft'\n  | 'BracketRight'\n  | 'Backslash'\n  | 'Semicolon'\n  | 'Quote'\n  | 'Backquote'\n  | 'Comma'\n  | 'Period'\n  | 'Slash'\n  | 'CapsLock'\n  | 'F1'\n  | 'F2'\n  | 'F3'\n  | 'F4'\n  | 'F5'\n  | 'F6'\n  | 'F7'\n  | 'F8'\n  | 'F9'\n  | 'F10'\n  | 'F11'\n  | 'F12'\n  | 'F13'\n  | 'F14'\n  | 'F15'\n  | 'F16'\n  | 'F17'\n  | 'F18'\n  | 'F19'\n  | 'F20'\n  | 'F21'\n  | 'F22'\n  | 'F23'\n  | 'F24'\n  | 'PrintScreen'\n  | 'ScrollLock'\n  | 'Pause'\n  | 'Insert'\n  | 'Home'\n  | 'PageUp'\n  | 'Delete'\n  | 'End'\n  | 'PageDown'\n  | 'ArrowRight'\n  | 'ArrowLeft'\n  | 'ArrowDown'\n  | 'ArrowUp'\n  | 'NumLock'\n  | 'Numpad1'\n  | 'Numpad2'\n  | 'Numpad3'\n  | 'Numpad4'\n  | 'Numpad5'\n  | 'Numpad6'\n  | 'Numpad7'\n  | 'Numpad8'\n  | 'Numpad9'\n  | 'Numpad0'\n  | 'NumpadDivide'\n  | 'NumpadMultiply'\n  | 'NumpadSubtract'\n  | 'NumpadAdd'\n  | 'NumpadEnter'\n  | 'NumpadDecimal'\n  | 'NumpadEqual'\n  | 'NumpadParenLeft'\n  | 'NumpadParenRight'\n  | 'IntlBackslash'\n  | 'ContextMenu'\n  | 'Power'\n  | 'Help'\n  | 'Undo'\n  | 'Cut'\n  | 'Copy'\n  | 'Paste'\n  | 'AudioVolumeMute'\n  | 'AudioVolumeUp'\n  | 'AudioVolumeDown'\n  | 'NumpadComma'\n  | 'IntlRo'\n  | 'KanaMode'\n  | 'IntlYen'\n  | 'Convert'\n  | 'NonConvert'\n  | 'Lang1'\n  | 'Lang2'\n  | 'Lang3'\n  | 'Lang4'\n  | 'ControlLeft'\n  | 'ShiftLeft'\n  | 'AltLeft'\n  | 'MetaLeft'\n  | 'ControlRight'\n  | 'ShiftRight'\n  | 'AltRight'\n  | 'MetaRight'\n  | 'MediaTrackNext'\n  | 'MediaTrackPrevious'\n  | 'MediaStop'\n  | 'Eject'\n  | 'MediaPlayPause'\n  | 'MediaSelect'\n  | 'LaunchMail'\n  | 'LaunchApp2'\n  | 'LaunchApp1'\n  | 'BrowserSearch'\n  | 'BrowserHome'\n  | 'BrowserBack'\n  | 'BrowserForward'\n  | 'BrowserStop'\n  | 'BrowserRefresh'\n  | 'BrowserFavorites';\n\nexport type KeyboardLayout = {\n  id: KeyboardLayoutId;\n  displayName: string; // Doesn't have to be unique\n  virtualLayout: 'qwerty' | 'azerty' | 'qwertz' | 'dvorak' | 'colemak';\n  locale: string;\n  platform: 'windows' | 'apple' | 'linux' | '';\n  score: number;\n  mapping: { [K in Keycode]?: [string, string, string, string] };\n};\n\nexport const DEFAULT_KEYBOARD_LAYOUT: KeyboardLayout =\n  platform() === 'apple'\n    ? {\n        id: 'apple.en-intl',\n        displayName: 'English (international)',\n        virtualLayout: 'qwerty',\n        platform: 'apple',\n        locale: 'en',\n        score: 0,\n        mapping: {\n          KeyA: ['a', 'A', 'å', 'Å'],\n          KeyB: ['b', 'B', '∫', 'ı'],\n          KeyC: ['c', 'C', 'ç', 'Ç'],\n          KeyD: ['d', 'D', '∂', 'Î'],\n          KeyE: ['e', 'E', '´', '´'],\n          KeyF: ['f', 'F', 'ƒ', 'Ï'],\n          KeyG: ['g', 'G', '©', '˝'],\n          KeyH: ['h', 'H', '˙', 'Ó'],\n          KeyI: ['i', 'I', 'ˆ', 'ˆ'],\n          KeyJ: ['j', 'J', '∆', 'Ô'],\n          KeyK: ['k', 'K', '˚', ''],\n          KeyL: ['l', 'L', '¬', 'Ò'],\n          KeyM: ['m', 'M', 'µ', 'Â'],\n          KeyN: ['n', 'N', '˜', '˜'],\n          KeyO: ['o', 'O', 'ø', 'Ø'],\n          KeyP: ['p', 'P', 'π', '∏'],\n          KeyQ: ['q', 'Q', 'œ', 'Œ'],\n          KeyR: ['r', 'R', '®', '‰'],\n          KeyS: ['s', 'S', 'ß', 'Í'],\n          KeyT: ['t', 'T', '†', 'ˇ'],\n          KeyU: ['u', 'U', '¨', '¨'],\n          KeyV: ['v', 'V', '√', '◊'],\n          KeyW: ['w', 'W', '∑', '„'],\n          KeyX: ['x', 'X', '≈', '˛'],\n          KeyY: ['y', 'Y', '¥', 'Á'],\n          KeyZ: ['z', 'Z', 'Ω', '¸'],\n          Digit1: ['1', '!', '¡', '⁄'],\n          Digit2: ['2', '@', '™', '€'],\n          Digit3: ['3', '#', '£', '‹'],\n          Digit4: ['4', '$', '¢', '›'],\n          Digit5: ['5', '%', '∞', 'ﬁ'],\n          Digit6: ['6', '^', '§', 'ﬂ'],\n          Digit7: ['7', '&', '¶', '‡'],\n          Digit8: ['8', '*', '•', '°'],\n          Digit9: ['9', '(', 'ª', '·'],\n          Digit0: ['0', ')', 'º', '‚'],\n          Space: [' ', ' ', ' ', ' '],\n          Minus: ['-', '_', '–', '—'],\n          Equal: ['=', '+', '≠', '±'],\n          BracketLeft: ['[', '{', '“', '”'],\n          BracketRight: [']', '}', '‘', '’'],\n          Backslash: ['\\\\', '|', '«', '»'],\n          Semicolon: [';', ':', '…', 'Ú'],\n          Quote: [\"'\", '\"', 'æ', 'Æ'],\n          Backquote: ['`', '˜', '`', '`'],\n          Comma: [',', '<', '≤', '¯'],\n          Period: ['.', '>', '≥', '˘'],\n          Slash: ['/', '?', '÷', '¿'],\n          NumpadDivide: ['/', '/', '/', '/'],\n          NumpadMultiply: ['*', '*', '*', '*'],\n          NumpadSubtract: ['-', '-', '-', '-'],\n          NumpadAdd: ['+', '+', '+', '+'],\n          Numpad1: ['1', '1', '1', '1'],\n          Numpad2: ['2', '2', '2', '2'],\n          Numpad3: ['3', '3', '3', '3'],\n          Numpad4: ['4', '4', '4', '4'],\n          Numpad5: ['5', '5', '5', '5'],\n          Numpad6: ['6', '6', '6', '6'],\n          Numpad7: ['7', '7', '7', '7'],\n          Numpad8: ['8', '8', '8', '8'],\n          Numpad9: ['9', '9', '9', '9'],\n          Numpad0: ['0', '0', '0', '0'],\n          NumpadDecimal: ['.', '.', '.', '.'],\n          IntlBackslash: ['§', '±', '§', '±'],\n          NumpadEqual: ['=', '=', '=', '='],\n          AudioVolumeUp: ['', '=', '', '='],\n        },\n      }\n    : platform() === 'windows'\n    ? {\n        id: 'windows.en-intl',\n        displayName: 'English (international)',\n        platform: 'windows',\n        virtualLayout: 'qwerty',\n        locale: 'en',\n        score: 0,\n        mapping: {\n          KeyA: ['a', 'A', 'á', 'Á'],\n          KeyB: ['b', 'B', '', ''],\n          KeyC: ['c', 'C', '©', '¢'],\n          KeyD: ['d', 'D', 'ð', 'Ð'],\n          KeyE: ['e', 'E', 'é', 'É'],\n          KeyF: ['f', 'F', '', ''],\n          KeyG: ['g', 'G', '', ''],\n          KeyH: ['h', 'H', '', ''],\n          KeyI: ['i', 'I', 'í', 'Í'],\n          KeyJ: ['j', 'J', '', ''],\n          KeyK: ['k', 'K', '', ''],\n          KeyL: ['l', 'L', 'ø', 'Ø'],\n          KeyM: ['m', 'M', 'µ', ''],\n          KeyN: ['n', 'N', 'ñ', 'Ñ'],\n          KeyO: ['o', 'O', 'ó', 'Ó'],\n          KeyP: ['p', 'P', 'ö', 'Ö'],\n          KeyQ: ['q', 'Q', 'ä', 'Ä'],\n          KeyR: ['r', 'R', '®', ''],\n          KeyS: ['s', 'S', 'ß', '§'],\n          KeyT: ['t', 'T', 'þ', 'Þ'],\n          KeyU: ['u', 'U', 'ú', 'Ú'],\n          KeyV: ['v', 'V', '', ''],\n          KeyW: ['w', 'W', 'å', 'Å'],\n          KeyX: ['x', 'X', '', ''],\n          KeyY: ['y', 'Y', 'ü', 'Ü'],\n          KeyZ: ['z', 'Z', 'æ', 'Æ'],\n          Digit1: ['1', '!', '¡', '¹'],\n          Digit2: ['2', '@', '²', ''],\n          Digit3: ['3', '#', '³', ''],\n          Digit4: ['4', '$', '¤', '£'],\n          Digit5: ['5', '%', '€', ''],\n          Digit6: ['6', '^', '¼', ''],\n          Digit7: ['7', '&', '½', ''],\n          Digit8: ['8', '*', '¾', ''],\n          Digit9: ['9', '(', '‘', ''],\n          Digit0: ['0', ')', '’', ''],\n          Space: [' ', ' ', '', ''],\n          Minus: ['-', '_', '¥', ''],\n          Equal: ['=', '+', '×', '÷'],\n          BracketLeft: ['[', '{', '«', ''],\n          BracketRight: [']', '}', '»', ''],\n          Backslash: ['\\\\', '|', '¬', '¦'],\n          Semicolon: [';', ':', '¶', '°'],\n          Quote: [\"'\", '\"', '´', '¨'],\n          Backquote: ['`', '~', '', ''],\n          Comma: [',', '<', 'ç', 'Ç'],\n          Period: ['.', '>', '', ''],\n          Slash: ['/', '?', '¿', ''],\n          NumpadDivide: ['/', '/', '', ''],\n          NumpadMultiply: ['*', '*', '', ''],\n          NumpadSubtract: ['-', '-', '', ''],\n          NumpadAdd: ['+', '+', '', ''],\n          IntlBackslash: ['\\\\', '|', '', ''],\n        },\n      }\n    : {\n        id: 'linux.en',\n        displayName: 'English',\n        platform: 'linux',\n        virtualLayout: 'qwerty',\n        locale: 'en',\n        score: 0,\n        mapping: {\n          KeyA: ['a', 'A', 'a', 'A'],\n          KeyB: ['b', 'B', 'b', 'B'],\n          KeyC: ['c', 'C', 'c', 'C'],\n          KeyD: ['d', 'D', 'd', 'D'],\n          KeyE: ['e', 'E', 'e', 'E'],\n          KeyF: ['f', 'F', 'f', 'F'],\n          KeyG: ['g', 'G', 'g', 'G'],\n          KeyH: ['h', 'H', 'h', 'H'],\n          KeyI: ['i', 'I', 'i', 'I'],\n          KeyJ: ['j', 'J', 'j', 'J'],\n          KeyK: ['k', 'K', 'k', 'K'],\n          KeyL: ['l', 'L', 'l', 'L'],\n          KeyM: ['m', 'M', 'm', 'M'],\n          KeyN: ['n', 'N', 'n', 'N'],\n          KeyO: ['o', 'O', 'o', 'O'],\n          KeyP: ['p', 'P', 'p', 'P'],\n          KeyQ: ['q', 'Q', 'q', 'Q'],\n          KeyR: ['r', 'R', 'r', 'R'],\n          KeyS: ['s', 'S', 's', 'S'],\n          KeyT: ['t', 'T', 't', 'T'],\n          KeyU: ['u', 'U', 'u', 'U'],\n          KeyV: ['v', 'V', 'v', 'V'],\n          KeyW: ['w', 'W', 'w', 'W'],\n          KeyX: ['x', 'X', 'x', 'X'],\n          KeyY: ['y', 'Y', 'y', 'Y'],\n          KeyZ: ['z', 'Z', 'z', 'Z'],\n          Digit1: ['1', '!', '1', '!'],\n          Digit2: ['2', '@', '2', '@'],\n          Digit3: ['3', '#', '3', '#'],\n          Digit4: ['4', '$', '4', '$'],\n          Digit5: ['5', '%', '5', '%'],\n          Digit6: ['6', '^', '6', '^'],\n          Digit7: ['7', '&', '7', '&'],\n          Digit8: ['8', '*', '8', '*'],\n          Digit9: ['9', '(', '9', '('],\n          Digit0: ['0', ')', '0', ')'],\n          Space: [' ', ' ', ' ', ' '],\n          Minus: ['-', '_', '-', '_'],\n          Equal: ['=', '+', '=', '+'],\n          BracketLeft: ['[', '{', '[', '{'],\n          BracketRight: [']', '}', ']', '}'],\n          Backslash: ['\\\\', '|', '\\\\', '|'],\n          Semicolon: [';', ':', ';', ':'],\n          Quote: [\"'\", '\"', \"'\", '\"'],\n          Backquote: ['`', '~', '`', '~'],\n          Comma: [',', '<', ',', '<'],\n          Period: ['.', '>', '.', '>'],\n          Slash: ['/', '?', '/', '?'],\n          NumpadDivide: ['/', '/', '/', '/'],\n          NumpadMultiply: ['*', '*', '*', '*'],\n          NumpadSubtract: ['-', '-', '-', '-'],\n          NumpadAdd: ['+', '+', '+', '+'],\n          Numpad1: ['1', '1', '1', '1'],\n          Numpad2: ['2', '2', '2', '2'],\n          Numpad3: ['3', '3', '3', '3'],\n          Numpad4: ['4', '4', '4', '4'],\n          Numpad5: ['5', '5', '5', '5'],\n          Numpad6: ['6', '6', '6', '6'],\n          Numpad7: ['7', '7', '7', '7'],\n          Numpad8: ['8', '8', '8', '8'],\n          Numpad9: ['9', '9', '9', '9'],\n          Numpad0: ['0', '0', '0', '0'],\n          NumpadDecimal: ['', '.', '', '.'],\n          IntlBackslash: ['<', '>', '|', '¦'],\n          NumpadEqual: ['=', '=', '=', '='],\n          NumpadComma: ['.', '.', '.', '.'],\n          NumpadParenLeft: ['(', '(', '(', '('],\n          NumpadParenRight: [')', ')', ')', ')'],\n        },\n      };\n\n/* prettier-ignore */\nconst BASE_LAYOUT_MAPPING = {\n    enter: '[Enter]',\n    escape: '[Escape]',\n    backspace: '[Backspace]',\n    tab: '[Tab]',\n    space: '[Space]',\n    pausebreak: '[Pause]',\n    insert: '[Insert]',\n    home: '[Home]',\n    pageup: '[PageUp]',\n    delete: '[Delete]',\n    end: '[End]',\n    pagedown: '[PageDown]',\n    right: '[ArrowRight]',\n    left: '[ArrowLeft]',\n    down: '[ArrowDown]',\n    up: '[ArrowUp]',\n    numpad0: '[Numpad0]',\n    numpad1: '[Numpad1]',\n    numpad2: '[Numpad2]',\n    numpad3: '[Numpad3]',\n    numpad4: '[Numpad4]',\n    numpad5: '[Numpad5]',\n    numpad6: '[Numpad6]',\n    numpad7: '[Numpad7]',\n    numpad8: '[Numpad8]',\n    numpad9: '[Numpad9]',\n    'numpad_divide': '[NumpadDivide]',\n    'numpad_multiply': '[NumpadMultiply]',\n    'numpad_subtract': '[NumpadSubtract]',\n    'numpad_add': '[NumpadAdd]',\n    'numpad_decimal': '[NumpadDecimal]',\n    'numpad_separator': '[NumpadComma]',\n    capslock: '[Capslock]',\n    f1: '[F1]',\n    f2: '[F2]',\n    f3: '[F3]',\n    f4: '[F4]',\n    f5: '[F5]',\n    f6: '[F6]',\n    f7: '[F7]',\n    f8: '[F8]',\n    f9: '[F9]',\n    f10: '[F10]',\n    f11: '[F11]',\n    f12: '[F12]',\n    f13: '[F13]',\n    f14: '[F14]',\n    f15: '[F15]',\n    f16: '[F16]',\n    f17: '[F17]',\n    f18: '[F18]',\n    f19: '[F19]',\n};\n\nconst gKeyboardLayouts: KeyboardLayout[] = [];\n\nlet gKeyboardLayout: KeyboardLayout;\n\nexport function platform(): 'apple' | 'windows' | 'linux' {\n  let result: 'apple' | 'windows' | 'linux' = 'linux';\n  if (navigator?.platform && navigator?.userAgent) {\n    if (/^(mac)/i.test(navigator.platform)) {\n      result = 'apple';\n    } else if (/^(win)/i.test(navigator.platform)) {\n      result = 'windows';\n    } else if (/(android)/i.test(navigator.userAgent)) {\n      result = 'linux';\n    } else if (/(iphone|ipod|ipad)/i.test(navigator.userAgent)) {\n      result = 'apple';\n    } else if (/\\bcros\\b/i.test(navigator.userAgent)) {\n      result = 'linux';\n    }\n  }\n\n  return result;\n}\n\nexport function register(layout: KeyboardLayout): void {\n  if (!layout.platform || layout.platform === platform()) {\n    gKeyboardLayouts.push(layout);\n  }\n}\n\n/** Given the current estimated keyboard layout,\n *  return the unmodified key for the event.\n * For example, on AZERTY option+shift+'A' = 'Æ' -> 'a'\n * (event though the code is KeyQ)\n */\n// export function getUnmodifiedKey(evt: KeyboardEvent): string {\n//     if (!evt.shiftKey && !evt.altKey) {\n//         return evt.key;\n//     }\n//     // @todo: iterate over the entries for the current layout,\n//     // with the alt+shift modifiers set accordingly\n//     // and find the (first) entry that matches\n//     const layout = gKeyboardLayouts[0] ?? DEFAULT_KEYBOARD_LAYOUT;\n//     const index =\n//         evt.shiftKey && evt.altKey ? 3 : evt.altKey ? 2 : evt.shiftKey ? 1 : 0;\n\n//     for (const [key, value] of Object.entries(layout.mapping)) {\n//         if (key === evt.code && value[index] === evt.key) {\n//             return value[0];\n//         }\n//     }\n\n//     // We did not find a perfect match...\n//     // Look for an entry even if the keycode doesn't match...\n//     for (const [, value] of Object.entries(layout.mapping)) {\n//         if (value[index] === evt.key) {\n//             return value[0];\n//         }\n//     }\n\n//     // Really? Nothing matched?! Just return the key...\n//     return evt.key;\n// }\n\nexport function getCodeForKey(\n  k: string,\n  layout: KeyboardLayout\n): KeystrokeModifiers {\n  const result: KeystrokeModifiers = {\n    shift: false,\n    alt: false,\n    cmd: false,\n    win: false,\n    meta: false,\n    ctrl: false,\n    key: '',\n  };\n  if (!k) return result;\n\n  for (const [key, value] of Object.entries(layout.mapping)) {\n    if (value[0] === k) {\n      result.key = `[${key}]`;\n      return result;\n    }\n    if (value[1] === k) {\n      result.shift = true;\n      result.key = `[${key}]`;\n      return result;\n    }\n    if (value[2] === k) {\n      result.alt = true;\n      result.key = `[${key}]`;\n      return result;\n    }\n    if (value[3] === k) {\n      result.shift = true;\n      result.alt = true;\n      result.key = `[${key}]`;\n      return result;\n    }\n  }\n\n  result.key = BASE_LAYOUT_MAPPING[k] ?? '';\n  return result;\n}\n\nexport function normalizeKeyboardEvent(evt: KeyboardEvent): KeyboardEvent {\n  if (!evt.code) {\n    // For virtual keyboards (iOS, Android) and Microsoft Edge (!)\n    // the `evt.code`, which represents the physical key pressed, is set\n    // to undefined. In that case, map the virtual key (\"q\") to a\n    // pseudo-hardware key (\"KeyQ\")\n    const mapping = Object.entries(getActiveKeyboardLayout().mapping);\n    let altKey = false;\n    let shiftKey = false;\n    let code: string;\n    for (let index = 0; index < 4; index++) {\n      for (const [key, value] of mapping) {\n        if (value[index] === evt.key) {\n          code = key;\n          if (index === 3) {\n            altKey = true;\n            shiftKey = true;\n          } else if (index === 2) {\n            altKey = true;\n          } else if (index === 1) {\n            shiftKey = true;\n          }\n\n          break;\n        }\n      }\n\n      if (code) break;\n    }\n\n    return new KeyboardEvent(evt.type, { ...evt, altKey, shiftKey, code });\n  }\n\n  return new KeyboardEvent(evt.type, evt);\n}\n\n// Given this keyboard event, and the `code`, `key` and modifiers\n// in it, increase the score of layouts that do match it.\n// Calling repeatedly this function will improve the accuracy of the\n// keyboard layout estimate.\nexport function validateKeyboardLayout(evt: KeyboardEvent): void {\n  const index =\n    evt.shiftKey && evt.altKey ? 3 : evt.altKey ? 2 : evt.shiftKey ? 1 : 0;\n\n  if (evt.key === 'Unidentified') return;\n\n  // Dead keys do not have enough info to validate the keyboard\n  // (we dont' know what char they could produce, only the physical key associated with them )\n  if (evt.key === 'Dead') return;\n\n  for (const layout of gKeyboardLayouts) {\n    if (layout.mapping[evt.code]?.[index] === evt.key) {\n      // Increase the score of the layouts that have a mapping compatible with\n      // this keyboard event.\n      layout.score += 1;\n    } else if (layout.mapping[evt.code]?.[index]) {\n      // There is a mapping, but it's not compatible with this keystroke:\n      // zero-out the score\n      layout.score = 0;\n    }\n  }\n\n  gKeyboardLayouts.sort((a, b) => b.score - a.score);\n}\n\nexport function setKeyboardLayoutLocale(locale: string): void {\n  gKeyboardLayout = gKeyboardLayouts.find((x) => locale.startsWith(x.locale));\n}\n\nexport function setKeyboardLayout(\n  name: KeyboardLayoutId | 'auto'\n): KeyboardLayout {\n  // If name is 'auto', the layout is not found, and set to undefined\n  gKeyboardLayout = gKeyboardLayouts.find((x) => x.id === name);\n  return gKeyboardLayout;\n}\n\nexport function getActiveKeyboardLayout(): KeyboardLayout {\n  return gKeyboardLayout ?? gKeyboardLayouts[0];\n}\n\nexport function getKeyboardLayouts(): KeyboardLayout[] {\n  return gKeyboardLayouts;\n}\n\nregister(DEFAULT_KEYBOARD_LAYOUT);\n\nregister({\n  id: 'apple.french',\n  locale: 'fr',\n  displayName: 'French',\n  platform: 'apple',\n  virtualLayout: 'azerty',\n  score: 0,\n  mapping: {\n    KeyA: ['q', 'Q', '‡', 'Ω'],\n    KeyB: ['b', 'B', 'ß', '∫'],\n    KeyC: ['c', 'C', '©', '¢'],\n    KeyD: ['d', 'D', '∂', '∆'],\n    KeyE: ['e', 'E', 'ê', 'Ê'],\n    KeyF: ['f', 'F', 'ƒ', '·'],\n    KeyG: ['g', 'G', 'ﬁ', 'ﬂ'],\n    KeyH: ['h', 'H', 'Ì', 'Î'],\n    KeyI: ['i', 'I', 'î', 'ï'],\n    KeyJ: ['j', 'J', 'Ï', 'Í'],\n    KeyK: ['k', 'K', 'È', 'Ë'],\n    KeyL: ['l', 'L', '¬', '|'],\n    KeyM: [',', '?', '∞', '¿'],\n    KeyN: ['n', 'N', '~', 'ı'],\n    KeyO: ['o', 'O', 'œ', 'Œ'],\n    KeyP: ['p', 'P', 'π', '∏'],\n    KeyQ: ['a', 'A', 'æ', 'Æ'],\n    KeyR: ['r', 'R', '®', '‚'],\n    KeyS: ['s', 'S', 'Ò', '∑'],\n    KeyT: ['t', 'T', '†', '™'],\n    KeyU: ['u', 'U', 'º', 'ª'],\n    KeyV: ['v', 'V', '◊', '√'],\n    KeyW: ['z', 'Z', 'Â', 'Å'],\n    KeyX: ['x', 'X', '≈', '⁄'],\n    KeyY: ['y', 'Y', 'Ú', 'Ÿ'],\n    KeyZ: ['w', 'W', '‹', '›'],\n    Digit1: ['&', '1', '', '´'],\n    Digit2: ['é', '2', 'ë', '„'],\n    Digit3: ['\"', '3', '“', '”'],\n    Digit4: [\"'\", '4', '‘', '’'],\n    Digit5: ['(', '5', '{', '['],\n    Digit6: ['§', '6', '¶', 'å'],\n    Digit7: ['è', '7', '«', '»'],\n    Digit8: ['!', '8', '¡', 'Û'],\n    Digit9: ['ç', '9', 'Ç', 'Á'],\n    Digit0: ['à', '0', 'ø', 'Ø'],\n    Space: [' ', ' ', ' ', ' '],\n    Minus: [')', '°', '}', ']'],\n    Equal: ['-', '_', '—', '–'],\n    BracketLeft: ['^', '¨', 'ô', 'Ô'],\n    BracketRight: ['$', '*', '€', '¥'],\n    Backslash: ['`', '£', '@', '#'],\n    Semicolon: ['m', 'M', 'µ', 'Ó'],\n    Quote: ['ù', '%', 'Ù', '‰'],\n    Backquote: ['<', '>', '≤', '≥'],\n    Comma: [';', '.', '…', '•'],\n    Period: [':', '/', '÷', '\\\\'],\n    Slash: ['=', '+', '≠', '±'],\n    NumpadDivide: ['/', '/', '/', '/'],\n    NumpadMultiply: ['*', '*', '*', '*'],\n    NumpadSubtract: ['-', '-', '-', '-'],\n    NumpadAdd: ['+', '+', '+', '+'],\n    NumpadDecimal: [',', '.', ',', '.'],\n    IntlBackslash: ['@', '#', '•', 'Ÿ'],\n    NumpadEqual: ['=', '=', '=', '='],\n  },\n});\n\nregister({\n  id: 'apple.spanish',\n  locale: 'es',\n  displayName: 'Spanish ISO',\n  platform: 'apple',\n  virtualLayout: 'qwerty',\n  score: 0,\n  mapping: {\n    KeyA: ['a', 'A', 'å', 'Å'],\n    KeyB: ['b', 'B', 'ß', ''],\n    KeyC: ['c', 'C', '©', ' '],\n    KeyD: ['d', 'D', '∂', '∆'],\n    KeyE: ['e', 'E', '€', '€'],\n    KeyF: ['f', 'F', 'ƒ', 'ﬁ'],\n    KeyG: ['g', 'G', '', 'ﬂ'],\n    KeyH: ['h', 'H', '™', ' '],\n    KeyI: ['i', 'I', ' ', ' '],\n    KeyJ: ['j', 'J', '¶', '¯'],\n    KeyK: ['k', 'K', '§', 'ˇ'],\n    KeyL: ['l', 'L', ' ', '˘'],\n    KeyM: ['m', 'M', 'µ', '˚'],\n    KeyN: ['n', 'N', ' ', '˙'],\n    KeyO: ['o', 'O', 'ø', 'Ø'],\n    KeyP: ['p', 'P', 'π', '∏'],\n    KeyQ: ['q', 'Q', 'œ', 'Œ'],\n    KeyR: ['r', 'R', '®', ' '],\n    KeyS: ['s', 'S', '∫', ' '],\n    KeyT: ['t', 'T', '†', '‡'],\n    KeyU: ['u', 'U', ' ', ' '],\n    KeyV: ['v', 'V', '√', '◊'],\n    KeyW: ['w', 'W', 'æ', 'Æ'],\n    KeyX: ['x', 'X', '∑', '›'],\n    KeyY: ['y', 'Y', '¥', ' '],\n    KeyZ: ['z', 'Z', 'Ω', '‹'],\n    Digit1: ['1', '!', '|', 'ı'],\n    Digit2: ['2', '\"', '@', '˝'],\n    Digit3: ['3', '·', '#', '•'],\n    Digit4: ['4', '$', '¢', '£'],\n    Digit5: ['5', '%', '∞', '‰'],\n    Digit6: ['6', '&', '¬', ' '],\n    Digit7: ['7', '/', '÷', '⁄'],\n    Digit8: ['8', '(', '“', '‘'],\n    Digit9: ['9', ')', '”', '’'],\n    Digit0: ['0', '=', '≠', '≈'],\n    Space: [' ', ' ', ' ', ' '],\n    Minus: [\"'\", '?', '´', '¸'],\n    Equal: ['¡', '¿', '‚', '˛'],\n    BracketLeft: ['`', '^', '[', 'ˆ'],\n    BracketRight: ['+', '*', ']', '±'],\n    Backslash: ['ç', 'Ç', '}', '»'],\n    Semicolon: ['ñ', 'Ñ', '~', '˜'],\n    Quote: ['´', '¨', '{', '«'],\n    Backquote: ['<', '>', '≤', '≥'],\n    Comma: [',', ';', '„', ''],\n    Period: ['.', ':', '…', '…'],\n    Slash: ['-', '_', '–', '—'],\n    NumpadDivide: ['/', '/', '/', '/'],\n    NumpadMultiply: ['*', '*', '*', '*'],\n    NumpadSubtract: ['-', '-', '-', '-'],\n    NumpadAdd: ['+', '+', '+', '+'],\n    Numpad1: ['1', '1', '1', '1'],\n    Numpad2: ['2', '2', '2', '2'],\n    Numpad3: ['3', '3', '3', '3'],\n    Numpad4: ['4', '4', '4', '4'],\n    Numpad5: ['5', '5', '5', '5'],\n    Numpad6: ['6', '6', '6', '6'],\n    Numpad7: ['7', '7', '7', '7'],\n    Numpad8: ['8', '8', '8', '8'],\n    Numpad9: ['9', '9', '9', '9'],\n    Numpad0: ['0', '0', '0', '0'],\n    NumpadDecimal: [',', ',', ',', ','],\n    IntlBackslash: ['º', 'ª', '\\\\', '°'],\n  },\n});\n\nregister({\n  id: 'windows.spanish',\n  locale: 'es',\n  displayName: 'Spanish',\n  platform: 'windows',\n  virtualLayout: 'qwerty',\n  score: 0,\n  mapping: {\n    KeyA: ['a', 'A', '', ''],\n    KeyB: ['b', 'B', '', ''],\n    KeyC: ['c', 'C', '', ''],\n    KeyD: ['d', 'D', '', ''],\n    KeyE: ['e', 'E', '€', ''],\n    KeyF: ['f', 'F', '', ''],\n    KeyG: ['g', 'G', '', ''],\n    KeyH: ['h', 'H', '', ''],\n    KeyI: ['i', 'I', '', ''],\n    KeyJ: ['j', 'J', '', ''],\n    KeyK: ['k', 'K', '', ''],\n    KeyL: ['l', 'L', '', ''],\n    KeyM: ['m', 'M', '', ''],\n    KeyN: ['n', 'N', '', ''],\n    KeyO: ['o', 'O', '', ''],\n    KeyP: ['p', 'P', '', ''],\n    KeyQ: ['q', 'Q', '', ''],\n    KeyR: ['r', 'R', '', ''],\n    KeyS: ['s', 'S', '', ''],\n    KeyT: ['t', 'T', '', ''],\n    KeyU: ['u', 'U', '', ''],\n    KeyV: ['v', 'V', '', ''],\n    KeyW: ['w', 'W', '', ''],\n    KeyX: ['x', 'X', '', ''],\n    KeyY: ['y', 'Y', '', ''],\n    KeyZ: ['z', 'Z', '', ''],\n    Digit1: ['1', '!', '|', ''],\n    Digit2: ['2', '\"', '@', ''],\n    Digit3: ['3', '·', '#', ''],\n    Digit4: ['4', '$', '~', ''],\n    Digit5: ['5', '%', '€', ''],\n    Digit6: ['6', '&', '¬', ''],\n    Digit7: ['7', '/', '', ''],\n    Digit8: ['8', '(', '', ''],\n    Digit9: ['9', ')', '', ''],\n    Digit0: ['0', '=', '', ''],\n    Space: [' ', ' ', '', ''],\n    Minus: [\"'\", '?', '', ''],\n    Equal: ['¡', '¿', '', ''],\n    BracketLeft: ['`', '^', '[', ''],\n    BracketRight: ['+', '*', ']', ''],\n    Backslash: ['ç', 'Ç', '}', ''],\n    Semicolon: ['ñ', 'Ñ', '', ''],\n    Quote: ['´', '¨', '{', ''],\n    Backquote: ['º', 'ª', '\\\\', ''],\n    Comma: [',', ';', '', ''],\n    Period: ['.', ':', '', ''],\n    Slash: ['-', '_', '', ''],\n    NumpadDivide: ['/', '/', '', ''],\n    NumpadMultiply: ['*', '*', '', ''],\n    NumpadSubtract: ['-', '-', '', ''],\n    NumpadAdd: ['+', '+', '', ''],\n    IntlBackslash: ['<', '>', '', ''],\n  },\n});\n\nregister({\n  id: 'linux.spanish',\n  locale: 'es',\n  displayName: 'Spanish',\n  platform: 'linux',\n  virtualLayout: 'qwerty',\n  score: 0,\n  mapping: {\n    KeyA: ['a', 'A', 'æ', 'Æ'],\n    KeyB: ['b', 'B', '”', '’'],\n    KeyC: ['c', 'C', '¢', '©'],\n    KeyD: ['d', 'D', 'ð', 'Ð'],\n    KeyE: ['e', 'E', '€', '¢'],\n    KeyF: ['f', 'F', 'đ', 'ª'],\n    KeyG: ['g', 'G', 'ŋ', 'Ŋ'],\n    KeyH: ['h', 'H', 'ħ', 'Ħ'],\n    KeyI: ['i', 'I', '→', 'ı'],\n    KeyJ: ['j', 'J', '̉', '̛'],\n    KeyK: ['k', 'K', 'ĸ', '&'],\n    KeyL: ['l', 'L', 'ł', 'Ł'],\n    KeyM: ['m', 'M', 'µ', 'º'],\n    KeyN: ['n', 'N', 'n', 'N'],\n    KeyO: ['o', 'O', 'ø', 'Ø'],\n    KeyP: ['p', 'P', 'þ', 'Þ'],\n    KeyQ: ['q', 'Q', '@', 'Ω'],\n    KeyR: ['r', 'R', '¶', '®'],\n    KeyS: ['s', 'S', 'ß', '§'],\n    KeyT: ['t', 'T', 'ŧ', 'Ŧ'],\n    KeyU: ['u', 'U', '↓', '↑'],\n    KeyV: ['v', 'V', '“', '‘'],\n    KeyW: ['w', 'W', 'ł', 'Ł'],\n    KeyX: ['x', 'X', '»', '>'],\n    KeyY: ['y', 'Y', '←', '¥'],\n    KeyZ: ['z', 'Z', '«', '<'],\n    Digit1: ['1', '!', '|', '¡'],\n    Digit2: ['2', '\"', '@', '⅛'],\n    Digit3: ['3', '·', '#', '£'],\n    Digit4: ['4', '$', '~', '$'],\n    Digit5: ['5', '%', '½', '⅜'],\n    Digit6: ['6', '&', '¬', '⅝'],\n    Digit7: ['7', '/', '{', '⅞'],\n    Digit8: ['8', '(', '[', '™'],\n    Digit9: ['9', ')', ']', '±'],\n    Digit0: ['0', '=', '}', '°'],\n    Enter: ['\\r', '\\r', '\\r', '\\r'],\n    Escape: ['\\u001B', '\\u001B', '\\u001B', '\\u001B'],\n    Backspace: ['\\b', '\\b', '\\b', '\\b'],\n    Tab: ['\\t', '', '\\t', ''],\n    Space: [' ', ' ', ' ', ' '],\n    Minus: [\"'\", '?', '\\\\', '¿'],\n    Equal: ['¡', '¿', '̃', '~'],\n    BracketLeft: ['̀', '̂', '[', '̊'],\n    BracketRight: ['+', '*', ']', '̄'],\n    Backslash: ['ç', 'Ç', '}', '̆'],\n    Semicolon: ['ñ', 'Ñ', '~', '̋'],\n    Quote: ['́', '̈', '{', '{'],\n    Backquote: ['º', 'ª', '\\\\', '\\\\'],\n    Comma: [',', ';', '─', '×'],\n    Period: ['.', ':', '·', '÷'],\n    Slash: ['-', '_', '̣', '̇'],\n    NumpadDivide: ['/', '/', '/', '/'],\n    NumpadMultiply: ['*', '*', '*', '*'],\n    NumpadSubtract: ['-', '-', '-', '-'],\n    NumpadAdd: ['+', '+', '+', '+'],\n    NumpadEnter: ['\\r', '\\r', '\\r', '\\r'],\n    Numpad1: ['', '1', '', '1'],\n    Numpad2: ['', '2', '', '2'],\n    Numpad3: ['', '3', '', '3'],\n    Numpad4: ['', '4', '', '4'],\n    Numpad5: ['', '5', '', '5'],\n    Numpad6: ['', '6', '', '6'],\n    Numpad7: ['', '7', '', '7'],\n    Numpad8: ['', '8', '', '8'],\n    Numpad9: ['', '9', '', '9'],\n    Numpad0: ['', '0', '', '0'],\n    NumpadDecimal: ['', '.', '', '.'],\n    IntlBackslash: ['<', '>', '|', '¦'],\n    NumpadEqual: ['=', '=', '=', '='],\n    NumpadComma: ['.', '.', '.', '.'],\n    NumpadParenLeft: ['(', '(', '(', '('],\n    NumpadParenRight: [')', ')', ')', ')'],\n  },\n});\n\nregister({\n  id: 'linux.french',\n  locale: 'fr',\n  displayName: 'French',\n  virtualLayout: 'azerty',\n  platform: 'linux',\n  score: 0,\n  mapping: {\n    KeyA: ['q', 'Q', '@', 'Ω'],\n    KeyB: ['b', 'B', '”', '’'],\n    KeyC: ['c', 'C', '¢', '©'],\n    KeyD: ['d', 'D', 'ð', 'Ð'],\n    KeyE: ['e', 'E', '€', '¢'],\n    KeyF: ['f', 'F', 'đ', 'ª'],\n    KeyG: ['g', 'G', 'ŋ', 'Ŋ'],\n    KeyH: ['h', 'H', 'ħ', 'Ħ'],\n    KeyI: ['i', 'I', '→', 'ı'],\n    KeyJ: ['j', 'J', '̉', '̛'],\n    KeyK: ['k', 'K', 'ĸ', '&'],\n    KeyL: ['l', 'L', 'ł', 'Ł'],\n    KeyM: [',', '?', '́', '̋'],\n    KeyN: ['n', 'N', 'n', 'N'],\n    KeyO: ['o', 'O', 'ø', 'Ø'],\n    KeyP: ['p', 'P', 'þ', 'Þ'],\n    KeyQ: ['a', 'A', 'æ', 'Æ'],\n    KeyR: ['r', 'R', '¶', '®'],\n    KeyS: ['s', 'S', 'ß', '§'],\n    KeyT: ['t', 'T', 'ŧ', 'Ŧ'],\n    KeyU: ['u', 'U', '↓', '↑'],\n    KeyV: ['v', 'V', '“', '‘'],\n    KeyW: ['z', 'Z', '«', '<'],\n    KeyX: ['x', 'X', '»', '>'],\n    KeyY: ['y', 'Y', '←', '¥'],\n    KeyZ: ['w', 'W', 'ł', 'Ł'],\n    Digit1: ['&', '1', '¹', '¡'],\n    Digit2: ['é', '2', '~', '⅛'],\n    Digit3: ['\"', '3', '#', '£'],\n    Digit4: [\"'\", '4', '{', '$'],\n    Digit5: ['(', '5', '[', '⅜'],\n    Digit6: ['-', '6', '|', '⅝'],\n    Digit7: ['è', '7', '`', '⅞'],\n    Digit8: ['_', '8', '\\\\', '™'],\n    Digit9: ['ç', '9', '^', '±'],\n    Digit0: ['à', '0', '@', '°'],\n    Enter: ['\\r', '\\r', '\\r', '\\r'],\n    Escape: ['\\u001B', '\\u001B', '\\u001B', '\\u001B'],\n    Backspace: ['\\b', '\\b', '\\b', '\\b'],\n    Tab: ['\\t', '', '\\t', ''],\n    Space: [' ', ' ', ' ', ' '],\n    Minus: [')', '°', ']', '¿'],\n    Equal: ['=', '+', '}', '̨'],\n    BracketLeft: ['̂', '̈', '̈', '̊'],\n    BracketRight: ['$', '£', '¤', '̄'],\n    Backslash: ['*', 'µ', '̀', '̆'],\n    Semicolon: ['m', 'M', 'µ', 'º'],\n    Quote: ['ù', '%', '̂', '̌'],\n    Backquote: ['²', '~', '¬', '¬'],\n    Comma: [';', '.', '─', '×'],\n    Period: [':', '/', '·', '÷'],\n    Slash: ['!', '§', '̣', '̇'],\n    NumpadMultiply: ['*', '*', '*', '*'],\n    NumpadSubtract: ['-', '-', '-', '-'],\n    NumpadAdd: ['+', '+', '+', '+'],\n    NumpadDecimal: ['', '.', '', '.'],\n    IntlBackslash: ['<', '>', '|', '¦'],\n  },\n});\n\nregister({\n  id: 'windows.french',\n  locale: 'fr',\n  displayName: 'French',\n  virtualLayout: 'azerty',\n  platform: 'windows',\n  score: 0,\n  mapping: {\n    KeyA: ['q', 'Q', '', ''],\n    KeyB: ['b', 'B', '', ''],\n    KeyC: ['c', 'C', '', ''],\n    KeyD: ['d', 'D', '', ''],\n    KeyE: ['e', 'E', '€', ''],\n    KeyF: ['f', 'F', '', ''],\n    KeyG: ['g', 'G', '', ''],\n    KeyH: ['h', 'H', '', ''],\n    KeyI: ['i', 'I', '', ''],\n    KeyJ: ['j', 'J', '', ''],\n    KeyK: ['k', 'K', '', ''],\n    KeyL: ['l', 'L', '', ''],\n    KeyM: [',', '?', '', ''],\n    KeyN: ['n', 'N', '', ''],\n    KeyO: ['o', 'O', '', ''],\n    KeyP: ['p', 'P', '', ''],\n    KeyQ: ['a', 'A', '', ''],\n    KeyR: ['r', 'R', '', ''],\n    KeyS: ['s', 'S', '', ''],\n    KeyT: ['t', 'T', '', ''],\n    KeyU: ['u', 'U', '', ''],\n    KeyV: ['v', 'V', '', ''],\n    KeyW: ['z', 'Z', '', ''],\n    KeyX: ['x', 'X', '', ''],\n    KeyY: ['y', 'Y', '', ''],\n    KeyZ: ['w', 'W', '', ''],\n    Digit1: ['&', '1', '', ''],\n    Digit2: ['é', '2', '~', ''],\n    Digit3: ['\"', '3', '#', ''],\n    Digit4: [\"'\", '4', '{', ''],\n    Digit5: ['(', '5', '[', ''],\n    Digit6: ['-', '6', '|', ''],\n    Digit7: ['è', '7', '`', ''],\n    Digit8: ['_', '8', '\\\\', ''],\n    Digit9: ['ç', '9', '^', ''],\n    Digit0: ['à', '0', '@', ''],\n    Space: [' ', ' ', '', ''],\n    Minus: [')', '°', ']', ''],\n    Equal: ['=', '+', '}', ''],\n    BracketLeft: ['^', '¨', '', ''],\n    BracketRight: ['$', '£', '¤', ''],\n    Backslash: ['*', 'µ', '', ''],\n    Semicolon: ['m', 'M', '', ''],\n    Quote: ['ù', '%', '', ''],\n    Backquote: ['²', '', '', ''],\n    Comma: [';', '.', '', ''],\n    Period: [':', '/', '', ''],\n    Slash: ['!', '§', '', ''],\n    NumpadDivide: ['/', '/', '', ''],\n    NumpadMultiply: ['*', '*', '', ''],\n    NumpadSubtract: ['-', '-', '', ''],\n    NumpadAdd: ['+', '+', '', ''],\n    IntlBackslash: ['<', '>', '', ''],\n  },\n});\n\nregister({\n  id: 'windows.german',\n  locale: 'de',\n  displayName: 'German',\n  platform: 'windows',\n  virtualLayout: 'qwertz',\n  score: 0,\n  mapping: {\n    KeyA: ['a', 'A', '', ''],\n    KeyB: ['b', 'B', '', ''],\n    KeyC: ['c', 'C', '', ''],\n    KeyD: ['d', 'D', '', ''],\n    KeyE: ['e', 'E', '€', ''],\n    KeyF: ['f', 'F', '', ''],\n    KeyG: ['g', 'G', '', ''],\n    KeyH: ['h', 'H', '', ''],\n    KeyI: ['i', 'I', '', ''],\n    KeyJ: ['j', 'J', '', ''],\n    KeyK: ['k', 'K', '', ''],\n    KeyL: ['l', 'L', '', ''],\n    KeyM: ['m', 'M', 'µ', ''],\n    KeyN: ['n', 'N', '', ''],\n    KeyO: ['o', 'O', '', ''],\n    KeyP: ['p', 'P', '', ''],\n    KeyQ: ['q', 'Q', '@', ''],\n    KeyR: ['r', 'R', '', ''],\n    KeyS: ['s', 'S', '', ''],\n    KeyT: ['t', 'T', '', ''],\n    KeyU: ['u', 'U', '', ''],\n    KeyV: ['v', 'V', '', ''],\n    KeyW: ['w', 'W', '', ''],\n    KeyX: ['x', 'X', '', ''],\n    KeyY: ['z', 'Z', '', ''],\n    KeyZ: ['y', 'Y', '', ''],\n    Digit1: ['1', '!', '', ''],\n    Digit2: ['2', '\"', '²', ''],\n    Digit3: ['3', '§', '³', ''],\n    Digit4: ['4', '$', '', ''],\n    Digit5: ['5', '%', '', ''],\n    Digit6: ['6', '&', '', ''],\n    Digit7: ['7', '/', '{', ''],\n    Digit8: ['8', '(', '[', ''],\n    Digit9: ['9', ')', ']', ''],\n    Digit0: ['0', '=', '}', ''],\n    Space: [' ', ' ', '', ''],\n    Minus: ['ß', '?', '\\\\', 'ẞ'],\n    Equal: ['´', '`', '', ''],\n    BracketLeft: ['ü', 'Ü', '', ''],\n    BracketRight: ['+', '*', '~', ''],\n    Backslash: ['#', \"'\", '', ''],\n    Semicolon: ['ö', 'Ö', '', ''],\n    Quote: ['ä', 'Ä', '', ''],\n    Backquote: ['^', '°', '', ''],\n    Comma: [',', ';', '', ''],\n    Period: ['.', ':', '', ''],\n    Slash: ['-', '_', '', ''],\n    NumpadDivide: ['/', '/', '', ''],\n    NumpadMultiply: ['*', '*', '', ''],\n    NumpadSubtract: ['-', '-', '', ''],\n    NumpadAdd: ['+', '+', '', ''],\n    IntlBackslash: ['<', '>', '|', ''],\n  },\n});\n\nregister({\n  id: 'apple.german',\n  locale: 'de',\n  displayName: 'German',\n  virtualLayout: 'qwertz',\n  platform: 'apple',\n  score: 0,\n  mapping: {\n    KeyA: ['a', 'A', 'å', 'Å'],\n    KeyB: ['b', 'B', '∫', '‹'],\n    KeyC: ['c', 'C', 'ç', 'Ç'],\n    KeyD: ['d', 'D', '∂', '™'],\n    KeyE: ['e', 'E', '€', '‰'],\n    KeyF: ['f', 'F', 'ƒ', 'Ï'],\n    KeyG: ['g', 'G', '©', 'Ì'],\n    KeyH: ['h', 'H', 'ª', 'Ó'],\n    KeyI: ['i', 'I', '⁄', 'Û'],\n    KeyJ: ['j', 'J', 'º', 'ı'],\n    KeyK: ['k', 'K', '∆', 'ˆ'],\n    KeyL: ['l', 'L', '@', 'ﬂ'],\n    KeyM: ['m', 'M', 'µ', '˘'],\n    KeyN: ['n', 'N', '~', '›'],\n    KeyO: ['o', 'O', 'ø', 'Ø'],\n    KeyP: ['p', 'P', 'π', '∏'],\n    KeyQ: ['q', 'Q', '«', '»'],\n    KeyR: ['r', 'R', '®', '¸'],\n    KeyS: ['s', 'S', '‚', 'Í'],\n    KeyT: ['t', 'T', '†', '˝'],\n    KeyU: ['u', 'U', '¨', 'Á'],\n    KeyV: ['v', 'V', '√', '◊'],\n    KeyW: ['w', 'W', '∑', '„'],\n    KeyX: ['x', 'X', '≈', 'Ù'],\n    KeyY: ['z', 'Z', 'Ω', 'ˇ'],\n    KeyZ: ['y', 'Y', '¥', '‡'],\n    Digit1: ['1', '!', '¡', '¬'],\n    Digit2: ['2', '\"', '“', '”'],\n    Digit3: ['3', '§', '¶', '#'],\n    Digit4: ['4', '$', '¢', '£'],\n    Digit5: ['5', '%', '[', 'ﬁ'],\n    Digit6: ['6', '&', ']', '^'],\n    Digit7: ['7', '/', '|', '\\\\'],\n    Digit8: ['8', '(', '{', '˜'],\n    Digit9: ['9', ')', '}', '·'],\n    Digit0: ['0', '=', '≠', '¯'],\n    Space: [' ', ' ', ' ', ' '],\n    Minus: ['ß', '?', '¿', '˙'],\n    Equal: ['´', '`', \"'\", '˚'],\n    BracketLeft: ['ü', 'Ü', '•', '°'],\n    BracketRight: ['+', '*', '±', ''],\n    Backslash: ['#', \"'\", '‘', '’'],\n    Semicolon: ['ö', 'Ö', 'œ', 'Œ'],\n    Quote: ['ä', 'Ä', 'æ', 'Æ'],\n    Backquote: ['<', '>', '≤', '≥'],\n    Comma: [',', ';', '∞', '˛'],\n    Period: ['.', ':', '…', '÷'],\n    Slash: ['-', '_', '–', '—'],\n    NumpadDivide: ['/', '/', '/', '/'],\n    NumpadMultiply: ['*', '*', '*', '*'],\n    NumpadSubtract: ['-', '-', '-', '-'],\n    NumpadAdd: ['+', '+', '+', '+'],\n    NumpadDecimal: [',', ',', '.', '.'],\n    IntlBackslash: ['^', '°', '„', '“'],\n    NumpadEqual: ['=', '=', '=', '='],\n  },\n});\n\nregister({\n  id: 'dvorak',\n  locale: 'en',\n  displayName: 'Dvorak',\n  virtualLayout: 'dvorak',\n  platform: '',\n  score: 0,\n  mapping: {\n    KeyA: ['a', 'A', 'å', 'Å'],\n    KeyB: ['x', 'X', '≈', '˛'],\n    KeyC: ['j', 'J', '∆', 'Ô'],\n    KeyD: ['e', 'E', '´', '´'],\n    KeyE: ['.', '>', '≥', '˘'],\n    KeyF: ['u', 'U', '¨', '¨'],\n    KeyG: ['i', 'I', 'ˆ', 'ˆ'],\n    KeyH: ['d', 'D', '∂', 'Î'],\n    KeyI: ['c', 'C', 'ç', 'Ç'],\n    KeyJ: ['h', 'H', '˙', 'Ó'],\n    KeyK: ['t', 'T', '†', 'ˇ'],\n    KeyL: ['n', 'N', '˜', '˜'],\n    KeyM: ['m', 'M', 'µ', 'Â'],\n    KeyN: ['b', 'B', '∫', 'ı'],\n    KeyO: ['r', 'R', '®', '‰'],\n    KeyP: ['l', 'L', '¬', 'Ò'],\n    KeyQ: [\"'\", '\"', 'æ', 'Æ'],\n    KeyR: ['p', 'P', 'π', '∏'],\n    KeyS: ['o', 'O', 'ø', 'Ø'],\n    KeyT: ['y', 'Y', '¥', 'Á'],\n    KeyU: ['g', 'G', '©', '˝'],\n    KeyV: ['k', 'K', '˚', ''],\n    KeyW: [',', '<', '≤', '¯'],\n    KeyX: ['q', 'Q', 'œ', 'Œ'],\n    KeyY: ['f', 'F', 'ƒ', 'Ï'],\n    KeyZ: [';', ':', '…', 'Ú'],\n    Digit1: ['1', '!', '¡', '⁄'],\n    Digit2: ['2', '@', '™', '€'],\n    Digit3: ['3', '#', '£', '‹'],\n    Digit4: ['4', '$', '¢', '›'],\n    Digit5: ['5', '%', '∞', 'ﬁ'],\n    Digit6: ['6', '^', '§', 'ﬂ'],\n    Digit7: ['7', '&', '¶', '‡'],\n    Digit8: ['8', '*', '•', '°'],\n    Digit9: ['9', '(', 'ª', '·'],\n    Digit0: ['0', ')', 'º', '‚'],\n    Space: [' ', ' ', ' ', ' '],\n    Minus: ['[', '{', '“', '”'],\n    Equal: [']', '}', '‘', '’'],\n    BracketLeft: ['/', '?', '÷', '¿'],\n    BracketRight: ['=', '+', '≠', '±'],\n    Backslash: ['\\\\', '|', '«', '»'],\n    Semicolon: ['s', 'S', 'ß', 'Í'],\n    Quote: ['-', '_', '–', '—'],\n    Backquote: ['`', '~', '`', '`'],\n    Comma: ['w', 'W', '∑', '„'],\n    Period: ['v', 'V', '√', '◊'],\n    Slash: ['z', 'Z', 'Ω', '¸'],\n    NumpadDivide: ['/', '/', '/', '/'],\n    NumpadMultiply: ['*', '*', '*', '*'],\n    NumpadSubtract: ['-', '-', '-', '-'],\n    NumpadAdd: ['+', '+', '+', '+'],\n    Numpad1: ['1', '1', '1', '1'],\n    Numpad2: ['2', '2', '2', '2'],\n    Numpad3: ['3', '3', '3', '3'],\n    Numpad4: ['4', '4', '4', '4'],\n    Numpad5: ['5', '5', '5', '5'],\n    Numpad6: ['6', '6', '6', '6'],\n    Numpad7: ['7', '7', '7', '7'],\n    Numpad8: ['8', '8', '8', '8'],\n    Numpad9: ['9', '9', '9', '9'],\n    Numpad0: ['0', '0', '0', '0'],\n    NumpadDecimal: ['.', '.', '.', '.'],\n    IntlBackslash: ['§', '±', '§', '±'],\n    NumpadEqual: ['=', '=', '=', '='],\n    AudioVolumeUp: ['', '=', '', '='],\n  },\n});\n","import type { Keybinding } from '../public/options';\n\nexport const DEFAULT_KEYBINDINGS: Keybinding[] = [\n  { key: 'left', command: 'moveToPreviousChar' },\n  { key: 'right', command: 'moveToNextChar' },\n  { key: 'up', command: 'moveUp' },\n  { key: 'down', command: 'moveDown' },\n\n  { key: 'shift+[ArrowLeft]', command: 'extendSelectionBackward' },\n  { key: 'shift+[ArrowRight]', command: 'extendSelectionForward' },\n  { key: 'shift+[ArrowUp]', command: 'extendSelectionUpward' },\n  { key: 'shift+[ArrowDown]', command: 'extendSelectionDownward' },\n\n  { key: '[Backspace]', command: 'deleteBackward' },\n  { key: 'alt+[Delete]', command: 'deleteBackward' },\n\n  { key: '[Delete]', command: 'deleteForward' },\n  { key: 'alt+[Backspace]', command: 'deleteForward' },\n\n  { key: 'alt+[ArrowLeft]', command: 'moveToPreviousWord' },\n  { key: 'alt+[ArrowRight]', command: 'moveToNextWord' },\n\n  { key: 'shift+alt+[ArrowLeft]', command: 'extendToPreviousWord' },\n  { key: 'shift+alt+[ArrowRight]', command: 'extendToNextWord' },\n\n  { key: 'ctrl+[ArrowLeft]', command: 'moveToGroupStart' },\n  { key: 'ctrl+[ArrowRight]', command: 'moveToGroupEnd' },\n\n  { key: 'shift+ctrl+[ArrowLeft]', command: 'extendToGroupStart' },\n  { key: 'shift+ctrl+[ArrowRight]', command: 'extendToGroupEnd' },\n\n  { key: '[Space]', ifMode: 'math', command: 'moveAfterParent' },\n  { key: 'shift+[Space]', ifMode: 'math', command: 'moveBeforeParent' },\n\n  { key: '[Home]', command: 'moveToMathFieldStart' },\n  { key: 'cmd+[ArrowLeft]', command: 'moveToMathFieldStart' },\n  { key: 'shift+[Home]', command: 'extendToMathFieldStart' },\n  { key: 'shift+cmd+[ArrowLeft]', command: 'extendToMathFieldStart' },\n\n  { key: '[End]', command: 'moveToMathFieldEnd' },\n  { key: 'cmd+[ArrowRight]', command: 'moveToMathFieldEnd' },\n  { key: 'shift+[End]', command: 'extendToMathFieldEnd' },\n  { key: 'shift+cmd+[ArrowRight]', command: 'extendToMathFieldEnd' },\n\n  { key: '[Pageup]', command: 'moveToGroupStart' },\n  { key: '[Pagedown]', command: 'moveToGroupEnd' },\n\n  { key: '[Tab]', ifMode: 'math', command: 'moveToNextPlaceholder' },\n  {\n    key: 'shift+[Tab]',\n    ifMode: 'math',\n    command: 'moveToPreviousPlaceholder',\n  },\n\n  { key: '[Tab]', ifMode: 'text', command: 'moveToNextPlaceholder' },\n  {\n    key: 'shift+[Tab]',\n    ifMode: 'text',\n    command: 'moveToPreviousPlaceholder',\n  },\n\n  { key: '[Escape]', ifMode: 'math', command: ['switchMode', 'latex'] },\n\n  { key: '\\\\', ifMode: 'math', command: ['switchMode', 'latex'] },\n\n  {\n    key: 'alt+[Equal]',\n    ifMode: 'math',\n    command: ['applyStyle', { mode: 'text' }],\n  },\n  {\n    key: 'alt+[Equal]',\n    ifMode: 'text',\n    command: ['applyStyle', { mode: 'math' }],\n  },\n\n  {\n    key: '[Escape]',\n    ifMode: 'latex',\n    command: ['complete', 'complete', { selectItem: 'true' }],\n  }, // Accept the entry (without the suggestion) and select\n  {\n    key: '[Tab]',\n    ifMode: 'latex',\n    command: ['complete', 'accept-suggestion'],\n  }, // Complete the suggestion\n  { key: '[Return]', ifMode: 'latex', command: 'complete' },\n  { key: '[Enter]', ifMode: 'latex', command: 'complete' },\n  {\n    key: 'shift+[Escape]',\n    ifMode: 'latex',\n    command: ['complete', 'reject'],\n  }, // Some keyboards can't generate\n  // this combination, for example in 60% keyboards it is mapped to ~\n  { key: '[ArrowDown]', ifMode: 'latex', command: 'nextSuggestion' },\n  // { key: 'ios:command:[Tab]', ifMode: 'latex',command: 'nextSuggestion' },\n  { key: '[ArrowUp]', ifMode: 'latex', command: 'previousSuggestion' },\n\n  { key: 'ctrl+a', ifPlatform: '!macos', command: 'selectAll' },\n  { key: 'cmd+a', command: 'selectAll' },\n\n  // Rare keys on some extended keyboards\n  { key: '[Cut]', command: 'cutToClipboard' },\n  { key: '[Copy]', command: 'copyToClipboard' },\n  { key: '[Paste]', command: 'pasteFromClipboard' },\n  { key: '[Clear]', command: 'deleteBackward' },\n\n  { key: 'ctrl+z', ifPlatform: '!macos', command: 'undo' },\n  { key: 'cmd+z', command: 'undo' },\n  { key: '[Undo]', command: 'undo' },\n  { key: 'ctrl+y', ifPlatform: '!macos', command: 'redo' }, // ARIA recommendation\n  { key: 'shift+cmd+y', command: 'redo' },\n  { key: 'shift+ctrl+z', ifPlatform: '!macos', command: 'redo' },\n  { key: 'shift+cmd+z', command: 'redo' },\n  { key: '[Redo]', command: 'redo' },\n\n  { key: '[EraseEof]', command: 'deleteToGroupEnd' },\n\n  // EMACS/MACOS BINDINGS\n  { key: 'ctrl+b', ifPlatform: 'macos', command: 'moveToPreviousChar' },\n  { key: 'ctrl+f', ifPlatform: 'macos', command: 'moveToNextChar' },\n  { key: 'ctrl+p', ifPlatform: 'macos', command: 'moveUp' },\n  { key: 'ctrl+n', ifPlatform: 'macos', command: 'moveDown' },\n  { key: 'ctrl+a', ifPlatform: 'macos', command: 'moveToMathFieldStart' },\n  { key: 'ctrl+e', ifPlatform: 'macos', command: 'moveToMathFieldEnd' },\n  {\n    key: 'shift+ctrl+b',\n    ifPlatform: 'macos',\n    command: 'extendSelectionBackward',\n  },\n  {\n    key: 'shift+ctrl+f',\n    ifPlatform: 'macos',\n    command: 'extendSelectionForward',\n  },\n  {\n    key: 'shift+ctrl+p',\n    ifPlatform: 'macos',\n    command: 'extendSelectionUpward',\n  },\n  {\n    key: 'shift+ctrl+n',\n    ifPlatform: 'macos',\n    command: 'extendSelectionDownward',\n  },\n  {\n    key: 'shift+ctrl+a',\n    ifPlatform: 'macos',\n    command: 'extendToMathFieldStart',\n  },\n  {\n    key: 'shift+ctrl+e',\n    ifPlatform: 'macos',\n    command: 'extendToMathFieldEnd',\n  },\n  { key: 'alt+ctrl+b', ifPlatform: 'macos', command: 'moveToPreviousWord' },\n  { key: 'alt+ctrl+f', ifPlatform: 'macos', command: 'moveToNextWord' },\n  {\n    key: 'shift+alt+ctrl+b',\n    ifPlatform: 'macos',\n    command: 'extendToPreviousWord',\n  },\n  {\n    key: 'shift+alt+ctrl+f',\n    ifPlatform: 'macos',\n    command: 'extendToNextWord',\n  },\n\n  { key: 'ctrl+h', ifPlatform: 'macos', command: 'deleteBackward' },\n  { key: 'ctrl+d', ifPlatform: 'macos', command: 'deleteForward' },\n  { key: 'ctrl+l', ifPlatform: 'macos', command: 'scrollIntoView' },\n  // { key: 'ctrl+t', ifPlatform: 'macos', command: 'transpose' },\n\n  {\n    key: 'shift+[Quote]',\n    ifMode: 'math',\n    command: ['switchMode', 'text', '', '“'],\n  }, // ??\n  {\n    key: 'shift+[Quote]',\n    ifMode: 'text',\n    command: ['switchMode', 'math', '”', ''],\n  }, // ??\n\n  // WOLFRAM MATHEMATICA BINDINGS\n  {\n    key: 'ctrl+[Digit2]',\n    ifMode: 'math',\n    command: ['insert', '$$\\\\sqrt{#0}$$'],\n  },\n  { key: 'ctrl+[Digit5]', ifMode: 'math', command: 'moveToOpposite' },\n  { key: 'ctrl+[Digit6]', ifMode: 'math', command: 'moveToSuperscript' },\n  { key: 'ctrl+[Minus]', ifMode: 'math', command: 'moveToSubscript' }, // ??\n  {\n    key: 'alt+[BracketLeft]',\n    ifMode: 'math',\n    command: ['insert', '$$\\\\left\\\\lbrack #0 \\\\right\\\\rbrack$$'],\n  }, // ??\n  {\n    key: 'shift+alt+[BracketLeft]',\n    ifMode: 'math',\n    command: ['insert', '$$\\\\left\\\\lbrace #0 \\\\right\\\\rbrace$$'],\n  }, // ??\n\n  { key: 'ctrl+[Return]', ifMode: 'math', command: 'addRowAfter' },\n  { key: 'ctrl+[Enter]', ifMode: 'math', command: 'addRowAfter' },\n  { key: 'cmd+[Return]', ifMode: 'math', command: 'addRowAfter' },\n  { key: 'cmd+[Enter]', ifMode: 'math', command: 'addRowAfter' },\n  { key: 'ctrl+;', ifMode: 'math', command: 'addRowAfter' },\n  { key: 'cmd+;', ifMode: 'math', command: 'addRowAfter' },\n  { key: 'shift+ctrl+;', ifMode: 'math', command: 'addRowBefore' },\n  { key: 'shift+cmd+;', ifMode: 'math', command: 'addRowBefore' },\n\n  { key: 'ctrl+[Comma]', ifMode: 'math', command: 'addColumnAfter' },\n  { key: 'cmd+[Comma]', ifMode: 'math', command: 'addColumnAfter' },\n  { key: 'shift+ctrl+[Comma]', ifMode: 'math', command: 'addColumnAfter' },\n  { key: 'shift+cmd+[Comma]', ifMode: 'math', command: 'addColumnAfter' },\n\n  // Excel keybindings:\n  // shift+space: select entire row, ctrl+space: select an entire column\n  // shift+ctrl++ or ctrl+numpad+\n  // ctrl+- to delete a row or columns\n\n  // MATHLIVE BINDINGS\n  // { key: 'alt+a', command: ['insert', '$$\\\\theta$$'] },\n  { key: 'alt+p', ifMode: 'math', command: ['insert', '$$\\\\pi$$'] },\n  { key: 'alt+v', ifMode: 'math', command: ['insert', '$$\\\\sqrt{#0}$$'] },\n  {\n    key: 'alt+w',\n    ifMode: 'math',\n    command: ['insert', '$$\\\\sum_{i=#?}^{#?}$$'],\n  },\n  // { key: 'alt+b', command: ['insert', '$$\\\\int_{#?}^{#?}$$'] },\n  { key: 'alt+u', ifMode: 'math', command: ['insert', '$$\\\\cup$$'] },\n  { key: 'alt+n', ifMode: 'math', command: ['insert', '$$\\\\cap$$'] },\n  { key: 'alt+o', ifMode: 'math', command: ['insert', '$$\\\\emptyset$$'] },\n  {\n    key: 'alt+d',\n    ifMode: 'math',\n    command: ['insert', '$$\\\\differentialD$$'],\n  },\n  {\n    key: 'shift+alt+o',\n    ifMode: 'math',\n    command: ['insert', '$$\\\\varnothing$$'],\n  },\n  {\n    key: 'shift+alt+d',\n    ifMode: 'math',\n    command: ['insert', '$$\\\\partial$$'],\n  },\n  {\n    key: 'shift+alt+p',\n    ifMode: 'math',\n    command: ['insert', '$$\\\\prod_{i=#?}^{#?}$$'],\n  },\n  { key: 'shift+alt+u', ifMode: 'math', command: ['insert', '$$\\\\bigcup$$'] },\n  { key: 'shift+alt+n', ifMode: 'math', command: ['insert', '$$\\\\bigcap$$'] },\n  { key: 'shift+alt+a', ifMode: 'math', command: ['insert', '$$\\\\forall$$'] },\n  { key: 'shift+alt+e', ifMode: 'math', command: ['insert', '$$\\\\exists$$'] },\n  { key: 'alt+[Digit5]', ifMode: 'math', command: ['insert', '$\\\\infty$$'] }, // \"%\" key\n  { key: 'alt+[Digit6]', ifMode: 'math', command: ['insert', '$$\\\\wedge$$'] }, // \"^\" key\n  {\n    key: 'shift+alt+[Digit6]',\n    ifMode: 'math',\n    command: ['insert', '$$\\\\vee$$'],\n  }, // \"^\" key\n  { key: 'alt+[Digit9]', ifMode: 'math', command: ['insert', '('] }, // \"(\" key} override smartFence\n  { key: 'alt+[Digit0]', ifMode: 'math', command: ['insert', ')'] }, // \")\" key} override smartFence\n\n  { key: 'alt+|', ifMode: 'math', command: ['insert', '|'] }, // \"|\" key} override smartFence\n  {\n    key: 'alt+[Backslash]',\n    ifMode: 'math',\n    command: ['insert', '$$\\\\backslash$$'],\n  }, // \"|\" key} override command mode\n\n  {\n    key: '/',\n    ifMode: 'math',\n    command: ['insert', '$$\\\\frac{#@}{#?}$$'],\n  },\n  {\n    key: 'alt+/',\n    ifMode: 'math',\n    command: ['insert', '$$\\\\/$$'],\n  },\n\n  {\n    key: '[NumpadDivide]',\n    ifMode: 'math',\n    command: ['insert', '$$\\\\frac{#@}{#?}$$'],\n  }, // ??\n  {\n    key: 'alt+[NumpadDivide]',\n    ifMode: 'math',\n    command: ['insert', '\\\\frac{#?}{#@}'],\n  }, // ??\n  {\n    key: 'shift+[Backquote]',\n    ifMode: 'math',\n    command: ['insert', '$$\\\\~$$'],\n  }, // ??\n\n  // Accessibility\n  { key: 'shift+alt+k', command: 'toggleKeystrokeCaption' },\n  { key: 'alt+[Space]', command: 'toggleVirtualKeyboard' },\n\n  // Note: On Mac OS (as of 10.12), there is a bug/behavior that causes\n  // a beep to be generated with certain command+control key combinations.\n  // The workaround is to create a default binding file to silence them.\n  // In ~/Library/KeyBindings/DefaultKeyBinding.dict add these entries:\n  //\n  //   {\n  //      \"^@\\UF701\" = \"noop:\";\n  //    \"^@\\UF702\" = \"noop:\";\n  //      \"^@\\UF703\" = \"noop:\";\n  //  }\n\n  {\n    key: 'alt+ctrl+[ArrowUp]',\n    command: ['speak', 'parent', { withHighlighting: false }],\n  },\n  {\n    key: 'alt+ctrl+[ArrowDown]',\n    command: ['speak', 'all', { withHighlighting: false }],\n  },\n];\n\n/**\n * Most commands can be associated to their keyboard shortcuts from the\n * DEFAULT_KEYBINDINGS table above, for example 'speakSelection' -> 'ctrl+KeyR'\n * However, those that contain complex commands are more ambiguous.\n * For example, '\\sqrt' -> 'math:alt+KeyV'. This table provides the reverse\n * mapping for those more complex commands. It is used when displaying\n * keybindings for specific commands in the popover.\n */\nexport const REVERSE_KEYBINDINGS = {\n  '\\\\theta': 'alt+q',\n  '\\\\sqrt': ['alt+v', 'ctrl+[Digit2]'],\n  '\\\\pi': 'alt+p',\n  '\\\\prod': 'shift+alt+p',\n  '\\\\sum': 'alt+w',\n  '\\\\int': 'alt+b',\n  '\\\\cup': 'alt+u',\n  '\\\\cap': 'alt+n',\n  '\\\\bigcup': 'shift+alt+u',\n  '\\\\bigcap': 'shift+alt+n',\n  '\\\\forall': 'shift+alt+a',\n  '\\\\exists': 'shift+alt+e',\n  '\\\\infty': 'alt+[Digit5]',\n  '\\\\wedge': 'alt+[Digit5]',\n  '\\\\vee': 'shift+alt+[Digit6]',\n  '\\\\differentialD': 'alt+d',\n  '\\\\partial': 'shift+alt+d',\n  '\\\\frac': 'Slash',\n  '\\\\emptyset': 'alt+o',\n  '\\\\varnothing': 'shift+alt+o',\n  '\\\\~': '~',\n};\n","import { isArray } from '../common/types';\n\nimport type { Selector } from '../public/commands';\nimport type { Keybinding } from '../public/options';\n\nimport {\n  KeyboardLayout,\n  getCodeForKey,\n  keystrokeModifiersFromString,\n  keystrokeModifiersToString,\n} from './keyboard-layout';\nimport { REVERSE_KEYBINDINGS } from './keybindings-definitions';\nimport type { ParseMode } from '../public/core';\n\ntype KeybindingPlatform =\n  | 'macos'\n  | 'windows'\n  | 'android'\n  | 'ios'\n  | 'chromeos'\n  | 'other';\n\n/**\n * @param p The platform to test against.\n */\nfunction matchPlatform(p: string): boolean {\n  if (navigator?.platform && navigator?.userAgent) {\n    let plat: KeybindingPlatform;\n    if (/^(mac)/i.test(navigator.platform)) {\n      plat = 'macos';\n      // WebKit on iPad OS 14 looks like macOS.\n      // Use the number of touch points to distinguish between macOS and iPad OS\n      if (navigator.maxTouchPoints === 5) plat = 'ios';\n    } else if (/^(win)/i.test(navigator.platform)) {\n      plat = 'windows';\n    } else if (/(android)/i.test(navigator.userAgent)) {\n      plat = 'android';\n    } else if (/(iphone|ipod|ipad)/i.test(navigator.userAgent)) {\n      plat = 'ios';\n    } else if (/\\bcros\\b/i.test(navigator.userAgent)) {\n      plat = 'chromeos';\n    }\n    const isNeg = p.startsWith('!');\n    const isMatch = p.endsWith(plat);\n    if (isNeg && !isMatch) return true;\n    if (!isNeg && isMatch) return true;\n  }\n\n  return false;\n}\n\n/**\n * Return the selector matching the keystroke.\n * The keybindings and keystroke should be in normalized form\n * (i.e. using key code, e.g. `[KeyQ]`)\n *\n */\nexport function getCommandForKeybinding(\n  keybindings: Keybinding[],\n  mode: ParseMode,\n  inKeystroke: string\n): Selector | [Selector, ...any[]] | '' {\n  if (keybindings.length === 0) return '';\n\n  // Normalize keystroke to the format (order of modifiers) expected by keybindings\n  const keystroke = keystrokeModifiersToString(\n    keystrokeModifiersFromString(inKeystroke)\n  );\n\n  // Try to match using a virtual keystroke\n  for (let i = keybindings.length - 1; i >= 0; i--) {\n    if (keybindings[i].key === keystroke) {\n      if (!keybindings[i].ifMode || keybindings[i].ifMode === mode) {\n        return keybindings[i].command;\n      }\n    }\n  }\n\n  return '';\n}\n\nfunction commandToString(command: string | Selector | string[]): string {\n  let result: string | string[] = command;\n\n  if (isArray<string>(result)) {\n    result =\n      result.length > 0 ? result[0] + '(' + result.slice(1).join('') + ')' : '';\n  }\n\n  return result;\n}\n\nexport function getKeybindingsForCommand(\n  keybindings: Keybinding[],\n  command: string\n): string[] {\n  let result = [];\n\n  if (typeof command === 'string') {\n    const candidate = REVERSE_KEYBINDINGS[command];\n    if (isArray<string>(candidate)) {\n      result = candidate.slice();\n    } else if (candidate) {\n      result.push(candidate);\n    }\n  }\n\n  // A command can be either a simple selector, or a selector\n  // with arguments. Normalize it to a string\n  const normalizedCommand = commandToString(command);\n\n  const regex = new RegExp(\n    '^' +\n      normalizedCommand\n        .replace('\\\\', '\\\\\\\\')\n        .replace('|', '\\\\|')\n        .replace('*', '\\\\*')\n        .replace('$', '\\\\$')\n        .replace('^', '\\\\^') +\n      '([^*a-zA-Z]|$)'\n  );\n  for (const keybinding of keybindings) {\n    if (regex.test(commandToString(keybinding.command))) {\n      result.push(keybinding);\n    }\n  }\n\n  return result.map(getKeybindingMarkup);\n}\n\n/**\n * Return a human readable representation of a shortcut as a markup string\n * @revisit\n */\nexport function getKeybindingMarkup(keystroke: string): string {\n  const useSymbol = matchPlatform('macos') || matchPlatform('ios');\n  const segments = keystroke.split('+');\n  let result = '';\n  for (const segment of segments) {\n    if (!useSymbol && result) {\n      result += '<span class=\"ML__shortcut-join\">+</span>';\n    }\n\n    if (segment.startsWith('Key')) {\n      result += segment.slice(3, 4);\n    } else if (segment.startsWith('Digit')) {\n      result += segment.slice(5, 6);\n    } else {\n      result +=\n        {\n          'cmd': '\\u2318',\n          'meta': useSymbol ? '\\u2318' : 'command',\n          'shift': useSymbol ? '\\u21E7' : 'shift',\n          'alt': useSymbol ? '\\u2325' : 'alt',\n          'ctrl': useSymbol ? '\\u2303' : 'control',\n          '\\n': useSymbol ? '\\u23CE' : 'return',\n          '[return]': useSymbol ? '\\u23CE' : 'return',\n          '[enter]': useSymbol ? '\\u2324' : 'enter',\n          '[tab]': useSymbol ? '\\u21E5' : 'tab',\n          // 'Esc':          useSymbol ? '\\u238b' : 'esc',\n          '[escape]': 'esc',\n\n          '[backspace]': useSymbol ? '\\u232B' : 'backspace',\n          '[delete]': useSymbol ? '\\u2326' : 'del',\n          '[pageup]': useSymbol ? '\\u21DE' : 'page up',\n          '[pagedown]': useSymbol ? '\\u21DF' : 'page down',\n          '[home]': useSymbol ? '\\u2912' : 'home',\n          '[end]': useSymbol ? '\\u2913' : 'end',\n          '[space]': 'space',\n          '[equal]': '=',\n          '[minus]': '-',\n          '[comma]': ',',\n          '[backslash]': '\\\\',\n          '[bracketleft]': '[',\n          '[bracketright]': ']',\n          'semicolon': ';',\n          'period': '.',\n          'comma': ',',\n          'minus': '-',\n          'equal': '=',\n          'quote': \"'\",\n          'bracketLeft': '[',\n          'bracketRight': ']',\n          'backslash': '\\\\',\n          'intlbackslash': '\\\\',\n          'backquote': '`',\n          'slash': '/',\n          'numpadmultiply': '* &#128290;',\n          'numpaddivide': '/ &#128290;', // Numeric keypad\n          'numpadsubtract': '- &#128290;',\n          'numpadadd': '+ &#128290;',\n          'numpaddecimal': '. &#128290;',\n          'numpadcomma': ', &#128290;',\n          'help': 'help',\n          'left': '\\u21E0',\n          'up': '\\u21E1',\n          'right': '\\u21E2',\n          'down': '\\u21E3',\n          '[arrowleft]': '\\u21E0',\n          '[arrowup]': '\\u21E1',\n          '[arrowright]': '\\u21E2',\n          '[arrowdown]': '\\u21E3',\n          '[digit0]': '0',\n          '[digit1]': '1',\n          '[digit2]': '2',\n          '[digit3]': '3',\n          '[digit4]': '4',\n          '[digit5]': '5',\n          '[digit6]': '6',\n          '[digit7]': '7',\n          '[digit8]': '8',\n          '[digit9]': '9',\n        }[segment.toLowerCase()] ?? segment.toUpperCase();\n    }\n  }\n\n  return result;\n}\n\nfunction normalizeKeybinding(\n  keybinding: Keybinding,\n  layout: KeyboardLayout\n): Keybinding {\n  if (\n    keybinding.ifPlatform &&\n    !/^!?(macos|windows|android|ios|chromeos|other)$/.test(\n      keybinding.ifPlatform\n    )\n  ) {\n    throw new Error(\n      `Unexpected platform \"${keybinding.ifPlatform}\" for keybinding ${keybinding.key}`\n    );\n  }\n\n  const modifiers = keystrokeModifiersFromString(keybinding.key);\n  let platform = keybinding.ifPlatform;\n\n  if (modifiers.cmd) {\n    if (platform && platform !== 'macos' && platform !== 'ios') {\n      throw new Error(\n        'Unexpected \"cmd\" modifier with platform \"' +\n          platform +\n          '\"' +\n          '\\n' +\n          '\"cmd\" modifier can only be used with macOS or iOS platform.'\n      );\n    }\n\n    if (!platform) {\n      platform = matchPlatform('ios') ? 'ios' : 'macos';\n    }\n\n    modifiers.win = false;\n    modifiers.cmd = false;\n    modifiers.meta = true;\n  }\n\n  if (modifiers.win) {\n    if (platform && platform !== 'windows') {\n      throw new Error(\n        'Unexpected \"win\" modifier with platform \"' +\n          platform +\n          '\"' +\n          '\\n' +\n          '\"win\" modifier can only be used with Windows platform.'\n      );\n    }\n\n    platform = 'windows';\n    modifiers.win = false;\n    modifiers.cmd = false;\n    modifiers.meta = true;\n  }\n\n  if (platform && !matchPlatform(platform)) return undefined;\n\n  if (!/^\\[(.*)]$/.test(modifiers.key)) {\n    // This is not a key code (e.g. `[KeyQ]`) it's a simple key (e.g. `a`).\n    // Convert it to a key code.\n    const code = getCodeForKey(modifiers.key, layout);\n    if (!code) {\n      throw new Error('Invalid keybinding key \"' + keybinding.key + '\"');\n    }\n    if ((code.shift && modifiers.shift) || (code.alt && modifiers.alt)) {\n      throw new Error(\n        `The keybinding ${keybinding.key} (${selectorToString(\n          keybinding.command\n        )}) is conflicting with the key combination ${keystrokeModifiersToString(\n          code\n        )} using the ${layout.displayName} keyboard layout`\n      );\n    }\n    code.shift = code.shift || modifiers.shift;\n    code.alt = code.alt || modifiers.alt;\n    code.meta = modifiers.meta;\n    code.ctrl = modifiers.ctrl;\n    return {\n      ...keybinding,\n      ifPlatform: platform,\n      key: keystrokeModifiersToString(code),\n    };\n  }\n\n  return {\n    ...keybinding,\n    ifPlatform: platform,\n    key: keystrokeModifiersToString(modifiers),\n  };\n}\n\nfunction selectorToString(selector: Selector | [Selector, ...any[]]): string {\n  if (Array.isArray(selector)) {\n    const sel = [...selector];\n    return (\n      sel.shift() +\n      '(' +\n      sel\n        .map((x) => (typeof x === 'string' ? `\"${x}\"` : x.toString()))\n        .join(', ') +\n      ')'\n    );\n  }\n\n  return selector as string;\n}\n\n/**\n * Parse the input keybindings and return them normalized:\n * - 'keys' are transformed to 'code' according to the current keyboard layout\n * - keybindings that don't apply to the current platform are removed\n */\nexport function normalizeKeybindings(\n  keybindings: Keybinding[],\n  layout: KeyboardLayout,\n  onError: (error: string[]) => void\n): Keybinding[] {\n  const result: Keybinding[] = [];\n  const errors = [];\n\n  for (const x of keybindings) {\n    try {\n      const keybinding = normalizeKeybinding(x, layout);\n      if (keybinding) {\n        const matches = result.filter(\n          (x) => x.key === keybinding.key && x.ifMode === keybinding.ifMode\n        );\n        if (matches.length > 0) {\n          throw new Error(\n            `Ambiguous key binding ${x.key} (${selectorToString(\n              x.command\n            )}) matches ${matches[0].key} (${selectorToString(\n              matches[0].command\n            )}) with the ${layout.displayName} keyboard layout`\n          );\n        }\n        result.push(keybinding);\n      }\n    } catch (error: unknown) {\n      if (error instanceof Error) {\n        errors.push(error.message);\n      }\n    }\n  }\n\n  if (errors.length > 0) onError(errors);\n\n  return result;\n}\n","import { on } from './utils';\nimport { ExecuteCommandFunction } from '../editor/commands-definitions';\n\n/**\n * Attach event handlers to an element so that it will react by executing\n * a command when pressed.\n * `\"command\"` can be:\n * - a string, a single selector\n * - an array, whose first element is a selector followed by one or more arguments.\n * - an object, with the following keys:\n *    * 'default': command performed on up, with a down + up sequence with no\n *      delay between down and up\n *    * 'alt', 'shift', 'altshift' keys: command performed on up with\n *      one of these modifiers pressed\n *    * 'pressed': command performed on 'down'\n *    * 'pressAndHoldStart': command performed after a tap/down followed by a\n * delay (optional)\n *    * 'pressAndHoldEnd': command performed on up, if there was a delay\n *     between down and up, if absent, 'default' is performed\n * The value of the keys specify which selector (string\n * or array) to perform depending on the keyboard state when the button is\n * pressed.\n *\n * The 'pressed' and 'active' classes will get added to\n * the element, as the :hover and :active pseudo-classes are not reliable\n * (at least on Chrome Android).\n *\n */\nexport function attachButtonHandlers(\n  executeCommand: ExecuteCommandFunction,\n  element: HTMLElement,\n  command:\n    | string\n    | {\n        default: string | any[];\n        pressed?: string | any[];\n        alt?: string | any[];\n        altshift?: string | any[];\n        shift?: string | any[];\n        pressAndHoldStart?: string | any[];\n        pressAndHoldEnd?: string | any[];\n      }\n): void {\n  if (typeof command === 'object' && (command.default || command.pressed)) {\n    // Attach the default (no modifiers pressed) command to the element\n    if (command.default) {\n      element.dataset.command = JSON.stringify(command.default);\n    }\n\n    if (command.alt) {\n      element.dataset.commandAlt = JSON.stringify(command.alt);\n    }\n\n    if (command.altshift) {\n      element.dataset.commandAltshift = JSON.stringify(command.altshift);\n    }\n\n    if (command.shift) {\n      element.dataset.commandShift = JSON.stringify(command.shift);\n    }\n\n    // .pressed: command to perform when the button is pressed (i.e.\n    // on mouse down/touch). Otherwise the command is performed when\n    // the button is released\n    if (command.pressed) {\n      element.dataset.commandPressed = JSON.stringify(command.pressed);\n    }\n\n    if (command.pressAndHoldStart) {\n      element.dataset.commandPressAndHoldStart = JSON.stringify(\n        command.pressAndHoldStart\n      );\n    }\n\n    if (command.pressAndHoldEnd) {\n      element.dataset.commandPressAndHoldEnd = JSON.stringify(\n        command.pressAndHoldEnd\n      );\n    }\n  } else {\n    // We need to turn the command into a string to attach it to the dataset\n    // associated with the button (the command could be an array made of a\n    // selector and one or more parameters)\n    element.dataset.command = JSON.stringify(command);\n  }\n\n  let pressHoldStart: number;\n  let pressHoldElement: HTMLElement;\n  let touchID;\n  let syntheticTarget; // Target while touch move\n  let pressAndHoldTimer;\n  on(\n    element,\n    'mousedown touchstart:passive',\n    (ev: MouseEvent & TouchEvent & PointerEvent) => {\n      if (ev.type !== 'mousedown' || ev.buttons === 1) {\n        // The primary button was pressed or the screen was tapped.\n        ev.stopPropagation();\n        // Can't preventDefault() in a passive listener\n        if (ev.type !== 'touchstart') {\n          ev.preventDefault();\n        }\n\n        element.classList.add('pressed');\n        pressHoldStart = Date.now();\n        // Record the ID of the primary touch point for tracking on touchmove\n        if (ev.type === 'touchstart') {\n          touchID = ev.changedTouches[0].identifier;\n        }\n\n        // Parse the JSON to get the command (and its optional arguments)\n        // and perform it immediately\n        const command = element.getAttribute('data-command-pressed');\n        if (command) {\n          executeCommand(JSON.parse(command));\n        }\n\n        // If there is a `press and hold start` command, perform it\n        // after a delay, if we're still pressed by then.\n        const pressAndHoldStartCommand = element.getAttribute(\n          'data-command-press-and-hold-start'\n        );\n        if (pressAndHoldStartCommand) {\n          pressHoldElement = element;\n          if (pressAndHoldTimer) {\n            clearTimeout(pressAndHoldTimer);\n          }\n\n          pressAndHoldTimer = window.setTimeout(() => {\n            if (element.classList.contains('pressed')) {\n              executeCommand(JSON.parse(pressAndHoldStartCommand));\n            }\n          }, 300);\n        }\n      }\n    }\n  );\n  on(element, 'mouseleave touchcancel', () => {\n    element.classList.remove('pressed');\n    // Let command = el.getAttribute('data-' + config.namespace +\n    //     'command-pressAndHoldEnd');\n    // const now = Date.now();\n    // if (command && now > pressHoldStart + 300) {\n    //     executeCommand(JSON.parse(command));\n    // }\n  });\n  on(\n    element,\n    'touchmove:passive',\n    (ev: MouseEvent & TouchEvent & PointerEvent) => {\n      // Unlike with mouse tracking, touch tracking only sends events\n      // to the target that was originally tapped on. For consistency,\n      // we want to mimic the behavior of the mouse interaction by\n      // tracking the touch events and dispatching them to potential targets\n      // ev.preventDefault(); // can't preventDefault inside a passive event handler\n      for (let i = 0; i < ev.changedTouches.length; i++) {\n        if (ev.changedTouches[i].identifier === touchID) {\n          // Found a touch matching our primary/tracked touch\n          const target = document.elementFromPoint(\n            ev.changedTouches[i].clientX,\n            ev.changedTouches[i].clientY\n          );\n          if (target !== syntheticTarget && syntheticTarget) {\n            syntheticTarget.dispatchEvent(new MouseEvent('mouseleave'), {\n              bubbles: true,\n            });\n            syntheticTarget = null;\n          }\n\n          if (target) {\n            syntheticTarget = target;\n            target.dispatchEvent(\n              new MouseEvent('mouseenter', {\n                bubbles: true,\n                buttons: 1,\n              })\n            );\n          }\n        }\n      }\n    }\n  );\n  on(element, 'mouseenter', (ev: MouseEvent & TouchEvent & PointerEvent) => {\n    if (ev.buttons === 1) {\n      element.classList.add('pressed');\n    }\n  });\n  on(\n    element,\n    'mouseup touchend click',\n    (ev: MouseEvent & TouchEvent & PointerEvent) => {\n      if (syntheticTarget) {\n        ev.stopPropagation();\n        ev.preventDefault();\n        const target = syntheticTarget;\n        syntheticTarget = null;\n        target.dispatchEvent(new MouseEvent('mouseup', { bubbles: true }));\n        return;\n      }\n\n      element.classList.remove('pressed');\n      element.classList.add('active');\n      if (ev.type === 'click' && ev.detail !== 0) {\n        // This is a click event triggered by a mouse interaction\n        // (and not a keyboard interaction)\n        // Ignore it, we'll handle the mouseup (or touchend) instead.\n        ev.stopPropagation();\n        ev.preventDefault();\n        return;\n      }\n\n      // Since we want the active state to be visible for a while,\n      // use a timer to remove it after a short delay\n      window.setTimeout(() => {\n        element.classList.remove('active');\n      }, 150);\n      let command = element.getAttribute('data-command-press-and-hold-end');\n      const now = Date.now();\n      // If the button has not been pressed for very long or if we were\n      // not the button that started the press and hold, don't consider\n      // it a press-and-hold.\n      if (element !== pressHoldElement || now < pressHoldStart + 300) {\n        command = undefined;\n      }\n\n      if (!command && ev.altKey && ev.shiftKey) {\n        command = element.getAttribute('data-command-altshift');\n      }\n\n      if (!command && ev.altKey) {\n        command = element.getAttribute('data-command-alt');\n      }\n\n      if (!command && ev.shiftKey) {\n        command = element.getAttribute('data-command-shift');\n      }\n\n      if (!command) {\n        command = element.getAttribute('data-command');\n      }\n\n      if (command) {\n        // Parse the JSON to get the command (and its optional arguments)\n        // and perform it\n        executeCommand(JSON.parse(command));\n      }\n\n      ev.stopPropagation();\n      ev.preventDefault();\n    }\n  );\n}\n","import { isArray } from '../common/types';\n\nimport { MATHSTYLES, Span, makeStruts, parseLatex, Atom } from '../core/core';\n\nimport { getKeybindingsForCommand } from './keybindings';\nimport { attachButtonHandlers } from '../editor-mathfield/buttons';\nimport { getCaretPoint } from '../editor-mathfield/utils';\n\nimport type { MathfieldPrivate } from '../editor-mathfield/mathfield-private';\n\n// A textual description of a LaTeX command.\n// The value can be either a single string, or an array of string\n// in order to provide alternatives or additional context.\n// In that case, the first string in the array should be appropriate\n// to be spoken for accessibility.\nexport const NOTES = {\n  '\\\\text': 'roman text',\n  '\\\\textrm': 'roman text',\n  '\\\\textnormal': 'roman text',\n  '\\\\textit': 'italic text',\n  '\\\\textbf': 'bold text',\n  '\\\\texttt': 'monospaced text',\n  '\\\\textsf': 'sans-serif text',\n  '\\\\mathrm': ['roman', '(upright)'],\n  '\\\\mathbf': 'bold',\n  '\\\\bf': 'bold',\n  '\\\\bold': 'bold',\n  '\\\\mathit': 'italic',\n  '\\\\mathbb': 'blackboard',\n  '\\\\mathscr': 'script',\n  '\\\\mathtt': ['typewriter', '(monospaced)'],\n  '\\\\mathsf': 'sans-serif',\n  '\\\\mathcal': 'caligraphic',\n  '\\\\frak': ['fraktur', '(gothic)'],\n  '\\\\mathfrak': ['fraktur', '(gothic)'],\n\n  '\\\\textcolor': 'text color',\n  '\\\\color': 'color',\n\n  '\\\\forall': 'for all',\n  '\\\\exists': 'there exists',\n  '\\\\nexists': 'there does not exist',\n  '\\\\frac': 'fraction',\n  '\\\\dfrac': 'display fraction',\n  '\\\\cfrac': 'continuous fraction',\n  '\\\\tfrac': 'text fraction',\n  '\\\\binom': 'binomial coefficient',\n  '\\\\dbinom': 'display binomial coefficient',\n  '\\\\tbinom': 'text binomial coefficient',\n  '\\\\pdiff': 'partial differential',\n\n  '\\\\vec': 'vector',\n  '\\\\check': 'caron',\n  '\\\\acute': 'acute',\n  '\\\\breve': 'breve',\n  '\\\\tilde': 'tilde',\n  '\\\\dot': 'dot',\n  '\\\\hat': ['hat', 'circumflex'],\n  '\\\\ddot': 'double dot',\n  '\\\\bar': 'bar',\n\n  '\\\\prime': 'prime',\n  '\\\\doubleprime': 'double prime',\n  '\\\\varnothing': 'empty set',\n  '\\\\emptyset': 'empty set',\n  '\\\\subseteq': 'subset of or <br>equal to',\n  '\\\\supseteq': 'superset of or <br>equal to',\n  '\\\\supset': 'superset of',\n  '\\\\subset': 'subset of',\n  '\\\\partial': 'partial derivative',\n  '\\\\bigcup': 'union',\n  '\\\\bigcap': 'intersection',\n  '\\\\approx': 'approximately equal to',\n  '\\\\notin': 'not an element of',\n  '\\\\in': ['element of', 'included in'],\n  '\\\\infty': 'infinity',\n  '\\\\land': 'logical and',\n  '\\\\sqrt': 'square root',\n  '\\\\prod': 'product',\n  '\\\\sum': 'summation',\n  '\\\\amalg': ['amalgamation', 'coproduct', 'free product', 'disjoint union'],\n  '\\\\cup': 'union with',\n  '\\\\cap': 'intersection with',\n  '\\\\int': 'integral',\n  '\\\\iint': 'surface integral',\n  '\\\\oint': 'curve integral',\n  '\\\\iiint': 'volume integral',\n  '\\\\iff': 'if and only if',\n  '\\\\ln': 'natural logarithm',\n  '\\\\boldsymbol': 'bold',\n  '\\\\setminus': 'set subtraction',\n  '\\\\stackrel': 'relation with symbol above',\n  '\\\\stackbin': 'operator with symbol above',\n  '\\\\underset': 'symbol with annotation below',\n  '\\\\overset': 'symbol with annotation above',\n  '\\\\hslash': ['h-bar', 'Planck constant'],\n  '\\\\gtrsim': 'greater than or <br>similar to',\n  '\\\\propto': 'proportional to',\n  '\\\\equiv': 'equivalent to',\n\n  '\\\\!': ['negative thin space', '(-3 mu)'],\n  '\\\\ ': ['space', '(6 mu)'],\n  '\\\\,': ['thin space', '(3 mu)'],\n  '\\\\:': ['medium space', '(4 mu)'],\n  '\\\\;': ['thick space', '(5 mu)'],\n  '\\\\quad': ['1 em space', '(18 mu)'],\n  '\\\\qquad': ['2 em space', '(36 mu)'],\n  '\\\\enskip': ['&#189; em space', '(9 mu)'],\n\n  '\\\\mp': 'minus or plus',\n  '\\\\pm': 'plus or minus',\n  '\\\\Im': 'Imaginary part of',\n  '\\\\Re': 'Real part of',\n  '\\\\gothicCapitalR': 'Real part of',\n  '\\\\gothicCapitalI': 'Imaginary part part of',\n  '\\\\differentialD': 'differential d',\n  '\\\\aleph': [\n    'aleph',\n    'infinite cardinal',\n    '<a target=\"_blank\" href=\"https://en.wikipedia.org/wiki/Cardinal_number\">Wikipedia <big>&#x203A;</big></a>',\n  ],\n  '\\\\beth': [\n    'beth',\n    'beth number',\n    '<a target=\"_blank\" href=\"https://en.wikipedia.org/wiki/Beth_number\">Wikipedia <big>&#x203A;</big></a>',\n  ],\n  '\\\\gimel': [\n    'gimel',\n    'gimel function',\n    '<a target=\"_blank\" href=\"https://en.wikipedia.org/wiki/Gimel_function\">Wikipedia <big>&#x203A;</big></a>',\n  ],\n\n  '\\\\O': 'empty set',\n  '\\\\N': 'set of <br>natural numbers',\n  '\\\\Z': 'set of <br>integers',\n  '\\\\Q': 'set of <br>rational numbers',\n  '\\\\C': 'set of <br>complex numbers',\n  '\\\\R': 'set of <br>real numbers',\n  '\\\\P': 'set of <br>prime numbers',\n\n  '\\\\lesseqqgtr': 'less than, equal to or<br> greater than',\n  '\\\\gnapprox': 'greater than and <br>not approximately',\n  '\\\\lnapprox': 'lesser than and <br>not approximately',\n\n  '\\\\j': 'dotless j',\n  '\\\\i': 'dotless i',\n  '\\\\cdot': 'centered dot',\n  '\\\\lmoustache': 'left moustache',\n  '\\\\rmoustache': 'right moustache',\n  '\\\\nabla': ['nabla', 'del', 'differential vector operator'],\n\n  '\\\\square': [\n    'square',\n    'd’Alembert operator',\n    '<a target=\"_blank\" href=\"https://en.wikipedia.org/wiki/D%27Alembert_operator\">Wikipedia <big>&#x203A;</big></a>',\n  ],\n  '\\\\blacksquare': [\n    'black square',\n    'end of proof',\n    'tombstone',\n    'Halmos symbol',\n  ],\n  '\\\\Box': 'end of proof',\n  '\\\\colon': ['such that', 'ratio'],\n  '\\\\coloneq': ['is defined by', 'is assigned'],\n  '\\\\Colon': ['is defined by', 'as'],\n  '\\\\_': ['underbar', 'underscore'],\n  '\\\\ll': 'much less than',\n  '\\\\gg': 'much greater than',\n  '\\\\doteq': 'approximately equal to',\n  '\\\\Doteq': 'approximately equal to',\n  '\\\\doteqdot': 'approximately equal to',\n  '\\\\cong': ['isomorphism of', '(for algebras, modules...)'],\n  '\\\\det': ['determinant of', '(of a matrix)'],\n  '\\\\dotplus': 'Cartesian product algebra',\n  '\\\\otimes': [\n    'tensor product',\n    '(of algebras)',\n    'Kronecker product',\n    '(of matrices)',\n  ],\n  '\\\\oplus': ['direct sum', '(of modules)'],\n  '\\\\lb': 'base-2 logarithm',\n  '\\\\lg': 'base-10 logarithm',\n  '\\\\wp': [\n    'Weierstrass P',\n    '<a target=\"_blank\" href=\"https://en.wikipedia.org/wiki/Weierstrass%27s_elliptic_functions\">Wikipedia <big>&#x203A;</big></a>',\n  ],\n  '\\\\wr': [\n    'wreath product',\n    '<a target=\"_blank\" href=\"https://en.wikipedia.org/wiki/Wreath_product\">Wikipedia <big>&#x203A;</big></a>',\n  ],\n  '\\\\top': ['tautology', 'Proposition P is universally true'],\n  '\\\\bot': ['contradiction', 'Proposition P is contradictory'],\n  '\\\\mid': ['probability', 'of event A given B'],\n  '\\\\mho': [\n    'Siemens',\n    'electrical conductance in SI unit',\n    '<a target=\"_blank\" href=\"https://en.wikipedia.org/wiki/Siemens_(unit)\">Wikipedia <big>&#x203A;</big></a>',\n  ],\n\n  '\\\\Longrightarrow': 'implies',\n  '\\\\Longleftrightarrow': 'if, and only if,',\n\n  '\\\\prec': 'precedes',\n  '\\\\preceq': 'precedes or is equal to',\n  '\\\\succ': 'succeedes',\n  '\\\\succeq': 'succeedes or is equal to',\n  '\\\\perp': ['is perpendicular to', 'is independent of'],\n\n  '\\\\models': [\n    'entails',\n    'double-turnstyle, models',\n    'is a semantic consequence of',\n    '<a target=\"_blank\" href=\"https://en.wikipedia.org/wiki/Double_turnstile\">Wikipedia <big>&#x203A;</big></a>',\n  ],\n  '\\\\vdash': [\n    'satisfies',\n    'turnstyle, assertion sign',\n    'syntactic inference',\n    '<a target=\"_blank\" href=\"https://en.wikipedia.org/wiki/Turnstile_(symbol)\">Wikipedia <big>&#x203A;</big></a>',\n  ],\n\n  '\\\\implies': ['implies', 'logical consequence'],\n  '\\\\impliedby': ['implied by', 'logical consequence'],\n\n  '\\\\surd': ['surd', 'root of', 'checkmark'],\n  '\\\\ltimes': [\n    'semi direct product',\n    '<a target=\"_blank\" href=\"https://en.wikipedia.org/wiki/Semidirect_product\">Wikipedia <big>&#x203A;</big></a>',\n  ],\n  '\\\\rtimes': [\n    'semi direct product',\n    '<a target=\"_blank\" href=\"https://en.wikipedia.org/wiki/Semidirect_product\">Wikipedia <big>&#x203A;</big></a>',\n  ],\n  '\\\\leftthreetimes': [\n    'semi direct product',\n    '<a target=\"_blank\" href=\"https://en.wikipedia.org/wiki/Semidirect_product\">Wikipedia <big>&#x203A;</big></a>',\n  ],\n  '\\\\rightthreetimes': [\n    'semi direct product',\n    '<a target=\"_blank\" href=\"https://en.wikipedia.org/wiki/Semidirect_product\">Wikipedia <big>&#x203A;</big></a>',\n  ],\n  '\\\\divideontimes': ['divide on times'],\n  '\\\\curlywedge': 'nor',\n  '\\\\curlyvee': 'nand',\n\n  '\\\\simeq': 'is group isomorphic with',\n  '\\\\vartriangleleft': ['is a normal subgroup of', 'is an ideal ring of'],\n\n  '\\\\circ': ['circle', 'ring', 'function composition'],\n\n  '\\\\rlap': ['overlap right', '\\\\rlap{x}o'],\n  '\\\\llap': ['overlap left', 'o\\\\llap{/}'],\n  '\\\\colorbox': ['color box', '\\\\colorbox{#fbc0bd}{...}'],\n  '\\\\ast': ['asterisk', 'reflexive closure (as a superscript)'],\n  '\\\\bullet': 'bullet',\n\n  '\\\\lim': 'limit',\n};\n\nfunction getNote(symbol: string): string {\n  let result = NOTES[symbol] ?? '';\n  if (isArray(result)) {\n    result = result.join('<br>');\n  }\n\n  return result;\n}\n\nfunction latexToMarkup(latex: string, mf: MathfieldPrivate): string {\n  const parse = parseLatex(latex, 'math', null, mf.options.macros);\n  const spans = Atom.render(\n    {\n      mathstyle: MATHSTYLES.displaystyle,\n      macros: mf.options.macros,\n    },\n    parse\n  );\n\n  const wrapper = makeStruts(new Span(spans, { classes: 'ML__base' }), {\n    classes: 'ML__mathlive',\n  });\n\n  return wrapper.toMarkup();\n}\n\nexport function showPopoverWithLatex(\n  mf: MathfieldPrivate,\n  latex: string,\n  displayArrows: boolean\n): void {\n  if (!latex || latex.length === 0) {\n    hidePopover(mf);\n    return;\n  }\n\n  const command = latex;\n  const commandMarkup = latexToMarkup(latex, mf);\n  const commandNote = getNote(command);\n  const keybinding = getKeybindingsForCommand(mf.keybindings, command).join(\n    '<br>'\n  );\n\n  let template = displayArrows\n    ? '<div class=\"ML__popover__prev-shortcut\" role=\"button\" aria-label=\"Previous suggestion\"><span><span>&#x25B2;</span></span></div>'\n    : '';\n  template += '<span class=\"ML__popover__content\" role=\"button\">';\n  template += '<div class=\"ML__popover__command\">' + commandMarkup + '</div>';\n  if (commandNote) {\n    template += '<div class=\"ML__popover__note\">' + commandNote + '</div>';\n  }\n\n  if (keybinding) {\n    template += '<div class=\"ML__popover__shortcut\">' + keybinding + '</div>';\n  }\n\n  template += '</span>';\n  template += displayArrows\n    ? '<div class=\"ML__popover__next-shortcut\" role=\"button\" aria-label=\"Next suggestion\"><span><span>&#x25BC;</span></span></div>'\n    : '';\n\n  mf.popover.innerHTML = mf.options.createHTML(template);\n\n  let element = mf.popover.querySelectorAll<HTMLElement>(\n    '.ML__popover__content'\n  );\n  if (element && element.length > 0) {\n    attachButtonHandlers((command) => mf.executeCommand(command), element[0], {\n      default: ['complete', 'accept-suggestion'],\n    });\n  }\n\n  element = mf.popover.querySelectorAll('.ML__popover__prev-shortcut');\n  if (element && element.length > 0) {\n    attachButtonHandlers(\n      (command) => mf.executeCommand(command),\n      element[0],\n      'previousSuggestion'\n    );\n  }\n\n  element = mf.popover.querySelectorAll('.ML__popover__next-shortcut');\n  if (element && element.length > 0) {\n    attachButtonHandlers(\n      (command) => mf.executeCommand(command),\n      element[0],\n      'nextSuggestion'\n    );\n  }\n\n  setTimeout(() => {\n    const caretPoint = getCaretPoint(mf.field);\n    if (caretPoint) setPopoverPosition(mf, caretPoint);\n\n    mf.popover.classList.add('is-visible');\n  }, 32);\n}\n\nexport function updatePopoverPosition(\n  mf: MathfieldPrivate,\n  options?: { deferred: boolean }\n): void {\n  // Check that the mathfield is still valid\n  // (we're calling ourselves from requestAnimationFrame() and the mathfield\n  // could have gotten destroyed\n  if (!mf.element || mf.element.mathfield !== mf) return;\n\n  // If the popover pane is visible...\n  if (!mf.popover.classList.contains('is-visible')) return;\n  if (options?.deferred) {\n    // Call ourselves again later, typically after the\n    // rendering/layout of the DOM has been completed\n    // (don't do it on next frame, it might be too soon)\n    window.setTimeout(() => updatePopoverPosition(mf), 100);\n    return;\n  }\n\n  if (mf.model.at(mf.model.position)?.type !== 'latex') {\n    hidePopover(mf);\n  } else {\n    // ... get the caret position\n    const caretPoint = getCaretPoint(mf.field);\n    if (caretPoint) setPopoverPosition(mf, caretPoint);\n  }\n}\n\nfunction setPopoverPosition(\n  mf: MathfieldPrivate,\n  position: { x: number; y: number; height: number }\n): void {\n  // Get screen width & height (browser compatibility)\n  const screenHeight =\n    window.innerHeight ||\n    document.documentElement.clientHeight ||\n    document.body.clientHeight;\n  const screenWidth =\n    window.innerWidth ||\n    document.documentElement.clientWidth ||\n    document.body.clientWidth;\n\n  // Get scrollbar size. This would be 0 in mobile device (also no needed).\n  const scrollbarWidth =\n    window.innerWidth - document.documentElement.clientWidth;\n  const scrollbarHeight =\n    window.innerHeight - document.documentElement.clientHeight;\n  const virtualkeyboardHeight = mf.virtualKeyboard.height;\n  // Prevent screen overflow horizontal.\n  if (position.x + mf.popover.offsetWidth / 2 > screenWidth - scrollbarWidth) {\n    mf.popover.style.left = `${\n      screenWidth - mf.popover.offsetWidth - scrollbarWidth\n    }px`;\n  } else if (position.x - mf.popover.offsetWidth / 2 < 0) {\n    mf.popover.style.left = '0';\n  } else {\n    mf.popover.style.left = `${position.x - mf.popover.offsetWidth / 2}px`;\n  }\n\n  // And position the popover right below or above the caret\n  if (\n    position.y + mf.popover.offsetHeight + 5 >\n    screenHeight - scrollbarHeight - virtualkeyboardHeight\n  ) {\n    mf.popover.classList.add('ML__popover--reverse-direction');\n    mf.popover.style.top = `${\n      position.y - position.height - mf.popover.offsetHeight - 5\n    }px`;\n  } else {\n    mf.popover.classList.remove('ML__popover--reverse-direction');\n    mf.popover.style.top = `${position.y + 5}px`;\n  }\n}\n\nexport function hidePopover(mf: MathfieldPrivate): void {\n  mf.suggestionIndex = 0;\n  if (mf.popover) {\n    mf.popover.classList.remove('is-visible');\n    mf.popover.innerHTML = '';\n  }\n}\n","import { makeStruts } from '../core/span';\nimport { MATHSTYLES } from '../core/mathstyle';\n\nimport { Rect, getSelectionBounds, isValidMathfield } from './utils';\nimport type { MathfieldPrivate } from './mathfield-private';\n\nimport { atomsToMathML } from '../addons/math-ml';\nimport { Atom, Context } from '../core/core';\nimport { updatePopoverPosition } from '../editor/popover';\n\n/*\n * Return a hash (32-bit integer) representing the content of the mathfield\n * (but not the selection state)\n */\nfunction hash(latex: string): number {\n  let result = 0;\n  for (let i = 0; i < latex.length; i++) {\n    result = result * 31 + latex.charCodeAt(i);\n    result = result | 0; // Force it to a 32-bit integer\n  }\n\n  return Math.abs(result);\n}\n\nexport function requestUpdate(\n  mathfield: MathfieldPrivate,\n  options?: { interactive: boolean }\n): void {\n  if (!mathfield.dirty) {\n    mathfield.dirty = true;\n    requestAnimationFrame(() => {\n      if (isValidMathfield(mathfield) && mathfield.dirty) {\n        mathfield._atomBoundsCache = new Map<string, Rect>();\n        render(mathfield, options);\n        mathfield._atomBoundsCache = undefined;\n      }\n    });\n  }\n}\n\n/**\n * Lay-out the mathfield and generate the DOM.\n *\n * This is usually done automatically, but if the font-size, or other geometric\n * attributes are modified, outside of MathLive, this function may need to be\n * called explicitly.\n *\n */\nexport function render(\n  mathfield: MathfieldPrivate,\n  renderOptions?: { forHighlighting?: boolean; interactive?: boolean }\n): void {\n  renderOptions = renderOptions ?? {};\n  mathfield.dirty = false;\n  const { model } = mathfield;\n\n  //\n  // 1. Stop and reset read aloud state\n  //\n  if (window.mathlive === undefined) {\n    window.mathlive = {};\n  }\n\n  //\n  // 2. Update selection state and blinking cursor (caret)\n  //\n  model.root.caret = undefined;\n  model.root.isSelected = false;\n  model.root.containsCaret = true;\n  for (const atom of model.atoms) {\n    atom.caret = undefined;\n    atom.isSelected = false;\n    atom.containsCaret = false;\n  }\n  const hasFocus = mathfield.hasFocus() && !mathfield.options.readOnly;\n  if (model.selectionIsCollapsed) {\n    model.at(model.position).caret = hasFocus ? mathfield.mode : '';\n  } else {\n    for (const atom of model.getAtoms(model.selection, {\n      includeChildren: true,\n    })) {\n      atom.isSelected = true;\n    }\n  }\n\n  if (hasFocus) {\n    let ancestor = model.at(model.position).parent;\n    while (ancestor) {\n      // The `surd` and `leftright` types of atom have a special display,\n      // mark the first of them in the path from the caret (`position`) to\n      // the root  as such.\n      if (ancestor.type === 'surd' || ancestor.type === 'leftright') {\n        ancestor.containsCaret = true;\n        break;\n      }\n\n      ancestor = ancestor.parent;\n    }\n  }\n\n  //\n  // 3. Render spans\n  //\n  const base = model.root.render(\n    new Context({\n      mathstyle:\n        mathfield.options.defaultMode === 'inline-math'\n          ? MATHSTYLES.textstyle\n          : MATHSTYLES.displaystyle,\n      letterShapeStyle: mathfield.options.letterShapeStyle,\n      atomIdsSettings: {\n        // Using the hash as a seed for the ID\n        // keeps the IDs the same until the content of the field changes.\n        seed: hash(Atom.toLatex(model.root, { expandMacro: false })),\n        // The `groupNumbers` flag indicates that extra spans should be generated\n        // to represent group of atoms, for example, a span to group\n        // consecutive digits to represent a number.\n        groupNumbers: renderOptions.forHighlighting,\n      },\n      smartFence: mathfield.options.smartFence,\n      macros: mathfield.options.macros,\n    })\n  );\n\n  //\n  // 4. Construct struts around the spans\n  //\n  const wrapper = makeStruts(base, { classes: 'ML__mathlive' });\n  wrapper.attributes = {\n    // Sometimes Google Translate kicks in an attempts to 'translate' math\n    // This doesn't work very well, so turn off translate\n    'translate': 'no',\n    // Hint to screen readers to not attempt to read this <span>.\n    // They should use instead the 'aria-label' attribute.\n    'aria-hidden': 'true',\n  };\n\n  //\n  // 5. Generate markup and accessible node\n  //\n  const isFocused = mathfield.field.classList.contains('ML__focused');\n  if (isFocused && !hasFocus) {\n    mathfield.field.classList.remove('ML__focused');\n  } else if (!isFocused && hasFocus) {\n    mathfield.field.classList.add('ML__focused');\n  }\n\n  mathfield.field.innerHTML = mathfield.options.createHTML(\n    wrapper.toMarkup({\n      hskip: 0,\n      hscale: mathfield.options.horizontalSpacingScale,\n    })\n  );\n  mathfield.fieldContent = mathfield.field.querySelector('.ML__mathlive');\n\n  mathfield.accessibleNode.innerHTML = mathfield.options.createHTML(\n    '<math xmlns=\"http://www.w3.org/1998/Math/MathML\">' +\n      atomsToMathML(model.root, mathfield.options) +\n      '</math>'\n  );\n\n  //\n  // 6. Render the selection\n  //\n  if (!model.selectionIsCollapsed) {\n    renderSelection(mathfield);\n    if (!(renderOptions.interactive ?? false)) {\n      // (re-render a bit later because the layout, sometimes, is not\n      // up to date by now)\n      setTimeout(() => renderSelection(mathfield), 32);\n    }\n  } else {\n    // The popover is relative to the location of the caret\n    setTimeout(() => updatePopoverPosition(mathfield), 32);\n  }\n}\n\nexport function renderSelection(mathfield: MathfieldPrivate): void {\n  for (const element of mathfield.field.querySelectorAll('.ML__selection')) {\n    element.remove();\n  }\n\n  for (const x of unionRects(getSelectionBounds(mathfield))) {\n    const selectionElement = document.createElement('div');\n    selectionElement.classList.add('ML__selection');\n    selectionElement.style.position = 'absolute';\n    selectionElement.style.left = `${x.left}px`;\n    selectionElement.style.top = `${x.top}px`;\n    selectionElement.style.width = `${Math.ceil(x.right - x.left)}px`;\n    selectionElement.style.height = `${Math.ceil(x.bottom - x.top - 1)}px`;\n    mathfield.field.insertBefore(\n      selectionElement,\n      mathfield.field.childNodes[0]\n    );\n  }\n}\n\n/**\n * Return the rects that are not entirely contained by other rects.\n */\nfunction unionRects(rects: Rect[]): Rect[] {\n  const result = [];\n\n  // Remove duplicate rects\n  for (const rect of rects) {\n    let found = false;\n    for (const rect2 of result) {\n      if (\n        rect.left === rect2.left &&\n        rect.right === rect2.right &&\n        rect.top === rect2.top &&\n        rect.bottom === rect2.bottom\n      ) {\n        found = true;\n        break;\n      }\n    }\n    if (!found) result.push(rect);\n  }\n\n  for (const rect of rects) {\n    let count = 0;\n    for (const rect2 of rects) {\n      if (\n        rect.left >= rect2.left &&\n        rect.right <= rect2.right &&\n        rect.top >= rect2.top &&\n        rect.bottom <= rect2.bottom\n      ) {\n        count += 1;\n        if (count > 1) break;\n      }\n    }\n    if (count === 1) result.push(rect);\n  }\n  return result;\n}\n","import { ModelPrivate } from '../editor-model/model-private';\nimport { ParseMode } from '../public/core';\nimport { InsertOptions } from '../public/mathfield';\nimport { MathfieldPrivate } from './mathfield-private';\n\nexport class ModeEditor {\n  static _registry: Record<string, ModeEditor> = {};\n  constructor(name: string) {\n    ModeEditor._registry[name] = this;\n  }\n\n  static onPaste(\n    mode: ParseMode,\n    mathfield: MathfieldPrivate,\n    ev: ClipboardEvent\n  ): boolean {\n    return ModeEditor._registry[mode].onPaste(mathfield, ev);\n  }\n\n  static onCopy(\n    mode: ParseMode,\n    mathfield: MathfieldPrivate,\n    ev: ClipboardEvent\n  ): void {\n    ModeEditor._registry[mode].onCopy(mathfield, ev);\n  }\n\n  static insert(\n    mode: ParseMode,\n    model: ModelPrivate,\n    text: string,\n    options: InsertOptions = {}\n  ): boolean {\n    return ModeEditor._registry[mode].insert(model, text, options);\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-empty-function\n  onCopy(_mathfield: MathfieldPrivate, _ev: ClipboardEvent): void {}\n  onPaste(_mathfield: MathfieldPrivate, _ev: ClipboardEvent): boolean {\n    return false;\n  }\n\n  insert(\n    _model: ModelPrivate,\n    _text: string,\n    _options: InsertOptions\n  ): boolean {\n    return false;\n  }\n}\n","/* eslint-disable no-new */\nimport { Offset, Range, InsertOptions } from '../public/mathfield';\nimport { Atom } from '../core/atom-class';\nimport { LatexAtom, LatexGroupAtom } from '../core-atoms/latex';\nimport { MathfieldPrivate } from './mathfield-private';\nimport { requestUpdate } from './render';\nimport { range } from '../editor-model/selection-utils';\nimport { Style } from '../public/core';\nimport { ModeEditor } from './mode-editor';\n\nimport { COMMAND_MODE_CHARACTERS } from '../core/core';\nimport { ModelPrivate } from '../editor-model/model-private';\nimport { contentDidChange } from '../editor-model/listeners';\n\nexport class LatexModeEditor extends ModeEditor {\n  constructor() {\n    super('latex');\n  }\n\n  createAtom(command: string, _style: Style): Atom | null {\n    return new LatexAtom(command);\n  }\n\n  onPaste(mathfield: MathfieldPrivate, ev: ClipboardEvent): boolean {\n    const text = ev.clipboardData.getData('text/plain');\n\n    if (text) {\n      if (this.insert(mathfield.model, text)) {\n        requestUpdate(mathfield);\n      }\n\n      ev.preventDefault();\n      ev.stopPropagation();\n      return true;\n    }\n\n    return false;\n  }\n\n  onCopy(mathfield: MathfieldPrivate, ev: ClipboardEvent): void {\n    const value: Range = mathfield.model.selectionIsCollapsed\n      ? [0, mathfield.model.lastOffset]\n      : range(mathfield.selection);\n    ev.clipboardData.setData(\n      'text/plain',\n      mathfield.getValue(value, 'latex-expanded')\n    );\n    // Prevent the current document selection from being written to the clipboard.\n    ev.preventDefault();\n  }\n\n  insert(model: ModelPrivate, text: string, options?: InsertOptions): boolean {\n    if (!options) options = {};\n    if (!options.insertionMode) options.insertionMode = 'replaceSelection';\n    if (!options.selectionMode) options.selectionMode = 'placeholder';\n\n    const { suppressChangeNotifications } = model;\n    if (options.suppressChangeNotifications) {\n      model.suppressChangeNotifications = true;\n    }\n\n    const savedSuppressChangeNotifications = model.suppressChangeNotifications;\n    model.suppressChangeNotifications = true;\n\n    // Delete any selected items\n    if (\n      options.insertionMode === 'replaceSelection' &&\n      !model.selectionIsCollapsed\n    ) {\n      model.position = model.deleteAtoms(range(model.selection));\n    } else if (options.insertionMode === 'replaceAll') {\n      model.root.setChildren([], 'body');\n      model.position = 0;\n    } else if (options.insertionMode === 'insertBefore') {\n      model.collapseSelection('backward');\n    } else if (options.insertionMode === 'insertAfter') {\n      model.collapseSelection('forward');\n    }\n\n    const newAtoms: Atom[] = [];\n    // Short-circuit the tokenizer and parser if in command mode\n    for (const c of text) {\n      if (COMMAND_MODE_CHARACTERS.test(c)) {\n        newAtoms.push(new LatexAtom(c));\n      }\n    }\n\n    //\n    // Insert the new atoms\n    //\n    const cursor = model.at(model.position);\n    const lastNewAtom = cursor.parent.addChildrenAfter(newAtoms, cursor);\n\n    // Prepare to dispatch notifications\n    model.suppressChangeNotifications = savedSuppressChangeNotifications;\n\n    if (options.selectionMode === 'before') {\n      // Do nothing: don't change the position.\n    } else if (options.selectionMode === 'item') {\n      model.setSelection(model.anchor, model.offsetOf(lastNewAtom));\n    } else if (lastNewAtom) {\n      model.position = model.offsetOf(lastNewAtom);\n    }\n\n    contentDidChange(model);\n\n    model.suppressChangeNotifications = suppressChangeNotifications;\n\n    return true;\n  }\n}\n\nexport function getLatexGroup(model: ModelPrivate): LatexGroupAtom {\n  return model.atoms.find((x) => x instanceof LatexGroupAtom);\n}\n\nexport function getLatexGroupBody(model: ModelPrivate): LatexAtom[] {\n  return (\n    (model.atoms\n      .find((x) => x instanceof LatexGroupAtom)\n      ?.body.filter((x) => x instanceof LatexAtom) as LatexAtom[]) ?? []\n  );\n}\n\nexport function getCommandSuggestionRange(\n  model: ModelPrivate,\n  options?: { before: Offset }\n): Range {\n  let start = 0;\n  let found = false;\n  const last = Number.isFinite(options?.before)\n    ? options.before\n    : model.lastOffset;\n  while (start <= last && !found) {\n    const atom = model.at(start);\n    found = atom instanceof LatexAtom && atom.isSuggestion;\n    if (!found) start++;\n  }\n\n  if (!found) return [undefined, undefined];\n\n  let end = start;\n  let done = false;\n  while (end <= last && !done) {\n    const atom = model.at(end);\n    done = !(atom instanceof LatexAtom && atom.isSuggestion);\n    if (!done) end++;\n  }\n\n  return [start - 1, end - 1];\n}\n\nnew LatexModeEditor();\n","import { ParseMode } from '../public/core';\n\nimport { LatexAtom } from '../core-atoms/latex';\nimport { suggest } from '../core-definitions/definitions-utils';\n\nimport type { ModelPrivate } from '../editor-model/model-private';\n\nimport { hidePopover, showPopoverWithLatex } from '../editor/popover';\n\nimport type { MathfieldPrivate } from './mathfield-private';\nimport { requestUpdate } from './render';\nimport {\n  getLatexGroupBody,\n  getCommandSuggestionRange,\n  getLatexGroup,\n} from './mode-editor-latex';\nimport { ModeEditor } from './mode-editor';\n\nexport function updateAutocomplete(\n  mathfield: MathfieldPrivate,\n  options?: { atIndex?: number }\n): void {\n  const { model } = mathfield;\n  // Remove any error indicator and any suggestions\n  for (const atom of getLatexGroupBody(model)) {\n    if (atom.isSuggestion) {\n      atom.parent.removeChild(atom);\n    } else {\n      atom.isError = false;\n    }\n  }\n\n  if (!model.selectionIsCollapsed) {\n    hidePopover(mathfield);\n    return;\n  }\n\n  // The current command is the sequence of atom around the insertion point\n  // that ends on the left with a '\\\\' and on the right with a non-command\n  // character.\n  const command = [];\n  let atom = model.at(model.position);\n  while (atom && atom instanceof LatexAtom && /[a-zA-Z*]$/.test(atom.value)) {\n    command.unshift(atom);\n    atom = atom.leftSibling;\n  }\n\n  if (atom && atom instanceof LatexAtom && atom.value === '\\\\') {\n    // We found the beginning of a command, include the atoms after the\n    // insertion point\n    command.unshift(atom);\n    atom = model.at(model.position).rightSibling;\n    while (atom && atom instanceof LatexAtom && /[a-zA-Z*]$/.test(atom.value)) {\n      command.push(atom);\n      atom = atom.rightSibling;\n    }\n  }\n\n  const commandString = command.map((x) => x.value).join('');\n  const suggestions = commandString ? suggest(commandString) : [];\n\n  if (suggestions.length === 0) {\n    if (/^\\\\[a-zA-Z\\\\*]+$/.test(commandString)) {\n      // This looks like a command name, but not a known one\n      command.forEach((x) => {\n        x.isError = true;\n      });\n    }\n\n    hidePopover(mathfield);\n    return;\n  }\n\n  mathfield.suggestionIndex = options?.atIndex ?? 0;\n  if (mathfield.suggestionIndex < 0) {\n    mathfield.suggestionIndex = suggestions.length - 1;\n  }\n\n  const suggestion =\n    suggestions[mathfield.suggestionIndex % suggestions.length].match;\n  if (suggestion !== commandString) {\n    const lastAtom = command[command.length - 1];\n    lastAtom.parent.addChildrenAfter(\n      [...suggestion.slice(commandString.length - suggestion.length)].map(\n        (x) => new LatexAtom(x, { isSuggestion: true })\n      ),\n      lastAtom\n    );\n    requestUpdate(mathfield);\n  }\n\n  showPopoverWithLatex(mathfield, suggestion, suggestions.length > 1);\n}\n\nexport function acceptCommandSuggestion(model: ModelPrivate): boolean {\n  let result = false;\n  model\n    .getAtoms(getCommandSuggestionRange(model, { before: model.position }))\n    .forEach((x: LatexAtom) => {\n      if (x.isSuggestion) {\n        x.isSuggestion = false;\n        result = true;\n      }\n    });\n  return result;\n}\n\n/**\n * When in latex mode, insert the latex being edited and leave latex mode\n *\n */\nexport function complete(\n  mathfield: MathfieldPrivate,\n  completion: 'reject' | 'accept' | 'accept-suggestion' = 'accept',\n  options?: { mode?: ParseMode; selectItem?: boolean }\n): boolean {\n  hidePopover(mathfield);\n  const latexGroup = getLatexGroup(mathfield.model);\n  if (!latexGroup) return false;\n\n  if (completion === 'accept-suggestion') {\n    const suggestions = getLatexGroupBody(mathfield.model).filter(\n      (x) => x.isSuggestion\n    );\n    if (suggestions.length === 0) return false;\n    for (const suggestion of suggestions) suggestion.isSuggestion = false;\n\n    mathfield.model.position = mathfield.model.offsetOf(\n      suggestions[suggestions.length - 1]\n    );\n    return true;\n  }\n\n  const body = getLatexGroupBody(mathfield.model).filter(\n    (x) => !x.isSuggestion\n  );\n\n  const latex = body.map((x) => x.value).join('');\n\n  const newPos = latexGroup.leftSibling;\n  latexGroup.parent.removeChild(latexGroup);\n  mathfield.model.position = mathfield.model.offsetOf(newPos);\n  mathfield.mode = options?.mode ?? 'math';\n\n  if (completion === 'reject') return true;\n\n  ModeEditor.insert('math', mathfield.model, latex, {\n    macros: mathfield.options.macros,\n    selectionMode: options?.selectItem ?? false ? 'item' : 'placeholder',\n  });\n\n  mathfield.snapshot();\n  mathfield.model.announce('replacement');\n  return true;\n}\n","import { isArray } from '../common/types';\n\nimport { SelectorPrivate, CommandRegistry } from './commands-definitions';\n\nimport type { MathfieldPrivate } from '../editor-mathfield/mathfield-private';\nimport { requestUpdate } from '../editor-mathfield/render';\nimport { updateAutocomplete, complete } from '../editor-mathfield/autocomplete';\n\nexport { SelectorPrivate };\n\n// @revisit: move to mathfield.vibrate()\nexport const HAPTIC_FEEDBACK_DURATION = 3; // In ms\n\ntype CommandTarget = 'model' | 'mathfield' | 'virtual-keyboard';\n\ninterface RegisterCommandOptions {\n  target: CommandTarget;\n  category?:\n    | 'delete'\n    | 'edit' // Changes the content\n    | 'array-edit' // Changes the content\n    | 'autocomplete'\n    | 'clipboard'\n    | 'scroll'\n    | 'selection-anchor'\n    | 'selection-extend'\n    | 'speech'\n    | 'virtual-keyboard'\n    | '';\n  audioFeedback?: string;\n  canUndo?: boolean;\n  changeContent?: boolean; // To update popover\n  changeSelection?: boolean; // To update inline shortcut buffer\n}\n\nexport const COMMANDS: CommandRegistry<RegisterCommandOptions> = {};\n\n/**\n * Register one or more selectors.\n * The selector function return true to request a render update of the expression.\n */\nexport function register(\n  commands: Record<string, (...args: any[]) => boolean>,\n  options?: RegisterCommandOptions\n): void {\n  options = options ?? { target: 'mathfield', canUndo: false };\n\n  for (const selector of Object.keys(commands)) {\n    console.assert(!COMMANDS[selector], 'Selector already defined: ', selector);\n    COMMANDS[selector] = { ...options, fn: commands[selector] };\n  }\n}\n\nexport function getCommandTarget(\n  command: SelectorPrivate | [SelectorPrivate, ...any[]]\n): CommandTarget {\n  let selector: SelectorPrivate;\n\n  selector = isArray(command) ? command[0] : command;\n\n  // Convert kebab case (like-this) to camel case (likeThis).\n  selector = selector.replace(/-\\w/g, (m) =>\n    m[1].toUpperCase()\n  ) as SelectorPrivate;\n\n  return COMMANDS[selector]?.target;\n}\n\nexport function perform(\n  mathfield: MathfieldPrivate,\n  command: SelectorPrivate | [SelectorPrivate, ...any[]]\n): boolean {\n  if (!command) {\n    return false;\n  }\n\n  let selector: SelectorPrivate;\n  let args: string[] = [];\n  let handled = false;\n  let dirty = false;\n\n  if (isArray(command)) {\n    selector = command[0];\n    args = command.slice(1);\n  } else {\n    selector = command;\n  }\n\n  // Convert kebab case (like-this) to camel case (likeThis).\n  selector = selector.replace(/-\\w/g, (m) =>\n    m[1].toUpperCase()\n  ) as SelectorPrivate;\n\n  const commandTarget = COMMANDS[selector]?.target;\n\n  // TODO Refactor this method\n  // Actually using commands by this way increase code complexity,\n  //  ideally all code must be moved under command code, maybe it is\n  //  a good idea to implement new Command API with additional hooks\n  //  and callbacks to make command code more transparent. Now logic of\n  //  commands are splitted between command function, registration options\n  //  and there.\n  if (commandTarget === 'model') {\n    // If in read-only mode, reject commands that would modify the\n    // content.\n    if (\n      mathfield.options.readOnly &&\n      /^(paste|cut|insert|delete|transpose|add)/.test(selector)\n    ) {\n      mathfield.model.announce('plonk');\n      return false;\n    }\n\n    if (/^(delete|transpose|add)/.test(selector)) {\n      if (selector !== 'deleteBackward') {\n        mathfield.resetKeystrokeBuffer();\n      }\n    }\n\n    if (\n      /^(delete|transpose|add)/.test(selector) &&\n      mathfield.mode !== 'latex'\n    ) {\n      // Update the undo state to account for the current selection\n      mathfield.popUndoStack();\n      mathfield.snapshot();\n    }\n\n    COMMANDS[selector].fn(mathfield.model, ...args);\n    if (\n      /^(delete|transpose|add)/.test(selector) &&\n      mathfield.mode !== 'latex'\n    ) {\n      mathfield.snapshot();\n    }\n\n    if (mathfield.mode === 'latex') {\n      updateAutocomplete(mathfield);\n    }\n\n    dirty = true;\n    handled = true;\n  } else if (commandTarget === 'virtual-keyboard') {\n    dirty = mathfield.virtualKeyboard.executeCommand(command);\n    handled = true;\n  } else if (COMMANDS[selector]) {\n    dirty = COMMANDS[selector].fn(mathfield, ...args);\n    handled = true;\n  } else {\n    throw new Error('Unknown command \"' + selector + '\"');\n  }\n\n  // Virtual keyboard commands do not update mathfield state\n  if (commandTarget !== 'virtual-keyboard') {\n    // If the command changed the selection so that it is no longer\n    // collapsed, or if it was an editing command, reset the inline\n    // shortcut buffer and the user style\n    if (\n      !mathfield.model.selectionIsCollapsed ||\n      /^(transpose|paste|complete|((moveToNextChar|moveToPreviousChar|extend).*))_$/.test(\n        selector\n      )\n    ) {\n      mathfield.resetKeystrokeBuffer();\n      mathfield.style = {};\n    }\n  }\n\n  // Render the mathlist\n  if (dirty) {\n    requestUpdate(mathfield);\n  }\n\n  return handled;\n}\n\n/**\n * Perform a command, but:\n * * focus the mathfield\n * * provide haptic and audio feedback\n * This is used by the virtual keyboard when command keys (delete, arrows, etc..)\n * are pressed.\n */\n\nexport function performWithFeedback(\n  mathfield: MathfieldPrivate,\n  selector: SelectorPrivate\n): boolean {\n  // @revisit: have a registry of commands -> sound\n  mathfield.focus();\n  if (mathfield.options.keypressVibration && navigator?.vibrate) {\n    navigator.vibrate(HAPTIC_FEEDBACK_DURATION);\n  }\n\n  // Convert kebab case to camel case.\n  selector = selector.replace(/-\\w/g, (m) =>\n    m[1].toUpperCase()\n  ) as SelectorPrivate;\n  if (\n    selector === 'moveToNextPlaceholder' ||\n    selector === 'moveToPreviousPlaceholder' ||\n    selector === 'complete'\n  ) {\n    mathfield.returnKeypressSound?.play().catch(console.warn);\n  } else if (\n    selector === 'deleteBackward' ||\n    selector === 'deleteForward' ||\n    selector === 'deletePreviousWord' ||\n    selector === 'deleteNextWord' ||\n    selector === 'deleteToGroupStart' ||\n    selector === 'deleteToGroupEnd' ||\n    selector === 'deleteToMathFieldStart' ||\n    selector === 'deleteToMathFieldEnd'\n  ) {\n    mathfield.deleteKeypressSound?.play().catch(console.warn);\n  } else {\n    mathfield.keypressSound?.play().catch(console.warn);\n  }\n\n  return mathfield.executeCommand(selector);\n}\n\nregister({\n  performWithFeedback: (\n    mathfield: MathfieldPrivate,\n    command: SelectorPrivate\n  ): boolean => performWithFeedback(mathfield, command),\n});\n\nfunction nextSuggestion(mathfield: MathfieldPrivate): boolean {\n  // The modulo of the suggestionIndex is used to determine which suggestion\n  // to display, so no need to worry about rolling over.\n  updateAutocomplete(mathfield, { atIndex: mathfield.suggestionIndex + 1 });\n  return false;\n}\n\nfunction previousSuggestion(mathfield: MathfieldPrivate): boolean {\n  updateAutocomplete(mathfield, { atIndex: mathfield.suggestionIndex - 1 });\n  return false;\n}\n\nregister(\n  {\n    complete,\n    nextSuggestion,\n    previousSuggestion,\n  },\n  { target: 'mathfield', category: 'autocomplete' }\n);\n","// Import { getEnvironmentDefinition } from '../core/definitions';\nimport { Atom } from '../core/atom';\nimport type { ModelPrivate } from './model-private';\nimport { contentDidChange } from './listeners';\nimport { register as registerCommand } from '../editor/commands';\nimport { arrayIndex, arrayCell } from './array-utils';\nimport { Style } from '../public/core';\nexport * from './array-utils';\n\n/**\n * Join all the cells at the indicated row into a single list of atoms\n */\nexport function arrayJoinColumns(\n  row: Atom[][],\n  separator = ',',\n  style?: Style\n): Atom[] {\n  if (!row) return [];\n  let result: Atom[] = [new Atom('first')];\n  let sep: Atom;\n  for (let cell of row) {\n    if (cell && cell.length > 0 && cell[0].type === 'first') {\n      // Remove the 'first' atom, if present\n      cell = cell.slice(1);\n    }\n\n    if (cell && cell.length > 0) {\n      if (sep) {\n        result.push(sep);\n      } else {\n        sep = new Atom('mpunct', { value: separator, style });\n      }\n\n      result = result.concat(cell);\n    }\n  }\n\n  return result;\n}\n\n/**\n * Join all the rows into a single atom list\n */\nexport function arrayJoinRows(\n  array: Atom[][][],\n  separators = [';', ','],\n  style?: Style\n): Atom[] {\n  let result: Atom[] = [new Atom('first')];\n  let sep: Atom;\n  for (const row of array) {\n    if (sep) {\n      result.push(sep);\n    } else {\n      sep = new Atom('mpunct', { value: separators[0], style });\n    }\n\n    result = result.concat(arrayJoinColumns(row, separators[1]));\n  }\n\n  return result;\n}\n\n/**\n * Return the number of non-empty cells in that column\n */\nexport function arrayColumnCellCount(array: Atom[][][], col: number): number {\n  let result = 0;\n  const colRow = { col, row: 0 };\n  while (colRow.row < array.length) {\n    const cell = arrayCell(array, colRow);\n    if (cell && cell.length > 0) {\n      let cellLength = cell.length;\n      if (cell[0].type === 'first') cellLength -= 1;\n      if (cellLength > 0) {\n        result += 1;\n      }\n    }\n\n    colRow.row += 1;\n  }\n\n  return result;\n}\n\n/**\n * Remove the indicated column from the array\n */\nexport function arrayRemoveColumn(array: Atom[][][], col: number): void {\n  let row = 0;\n  while (row < array.length) {\n    if (array[row][col]) {\n      array[row].splice(col, 1);\n    }\n\n    row += 1;\n  }\n}\n\n/**\n * Remove the indicated row from the array\n */\nexport function arrayRemoveRow(array: Atom[][][], row: number): void {\n  array.splice(row, 1);\n}\n\n/**\n * Return the first non-empty cell, row by row\n */\nexport function arrayFirstCellByRow(array: Atom[][][]): string {\n  const colRow = { col: 0, row: 0 };\n  while (colRow.row < array.length && !arrayCell(array, colRow)) {\n    colRow.row += 1;\n  }\n\n  return arrayCell(array, colRow) ? `cell${arrayIndex(array, colRow)}` : '';\n}\n\n/**\n * Internal primitive to add a column/row in a matrix\n */\nfunction addCell(\n  _model: ModelPrivate,\n  _where: 'after row' | 'before row' | 'after column' | 'before column'\n): void {\n  // This command is only applicable if we're in an array\n  // const parent = model.parent;\n  // if (parent && parent.type === 'array' && isArray(parent.array)) {\n  //     const relation = model.relation;\n  //     if (parent.array) {\n  //         const colRow = arrayColRow(parent.array, relation);\n  //         if (where === 'after row' || where === 'before row') {\n  //             // Insert a row\n  //             colRow.col = 0;\n  //             colRow.row = colRow.row + (where === 'after row' ? 1 : 0);\n  //             parent.array.splice(colRow.row, 0, [[]]);\n  //         } else {\n  //             // Insert a column\n  //             colRow.col += where === 'after column' ? 1 : 0;\n  //             parent.array[colRow.row].splice(colRow.col, 0, []);\n  //         }\n  //         const cellIndex = arrayIndex(parent.array, colRow);\n  //         model.path.pop();\n  //         model.path.push({\n  //             relation: ('cell' + cellIndex.toString()) as Relation,\n  //             offset: 0,\n  //         });\n  //         model.insertFirstAtom();\n  //     }\n  // }\n}\n\nexport function convertParentToArray(_model: ModelPrivate): void {\n  // Const parent = model.parent;\n  // if (parent.type === 'leftright') {\n  //     parent.type = 'array';\n  //     const envName =\n  //         { '(': 'pmatrix', '\\\\lbrack': 'bmatrix', '\\\\lbrace': 'cases' }[\n  //             parent.leftDelim\n  //         ] ?? 'matrix';\n  //     const env = getEnvironmentDefinition(envName);\n  //     const array = [[parent.branches.body]];\n  //     Object.assign(parent, env.parser(envName, [], array));\n  //     parent.mode = getAnchorMode(model);\n  //     parent.environmentName = envName;\n  //     parent.array = array;\n  //     parent.rowGaps = [0];\n  //     delete parent.branches.body;\n  //     model.path[model.path.length - 1].relation = 'cell0' as Relation;\n  // }\n  // Note: could also be a group, or we could be a subscript or an\n  // underscript (for multi-valued conditions on a \\sum, for example)\n  // Or if at root, this could be a 'align*' environment\n}\n\nexport function addRowAfter(model: ModelPrivate): boolean {\n  convertParentToArray(model);\n  addCell(model, 'after row');\n  contentDidChange(model);\n  return true;\n}\n\nexport function addRowBefore(model: ModelPrivate): boolean {\n  convertParentToArray(model);\n  addCell(model, 'before row');\n  contentDidChange(model);\n  return true;\n}\n\nexport function addColumnAfter(model: ModelPrivate): boolean {\n  convertParentToArray(model);\n  addCell(model, 'after column');\n  contentDidChange(model);\n  return true;\n}\n\nexport function addColumnBefore(model: ModelPrivate): boolean {\n  convertParentToArray(model);\n  addCell(model, 'before column');\n  contentDidChange(model);\n  return true;\n}\n\nregisterCommand(\n  {\n    addRowAfter,\n    addColumnAfter,\n    addRowBefore,\n    addColumnBefore,\n  },\n  { target: 'model', category: 'array-edit' }\n);\n","import { LeftRightAtom } from '../core-atoms/leftright';\nimport { Atom, Branch } from '../core/atom';\nimport type { Range } from '../public/mathfield';\nimport { ModelPrivate } from './model-private';\nimport { range } from './selection-utils';\n// Import {\n//     arrayFirstCellByRow,\n//     arrayColRow,\n//     arrayAdjustRow,\n//     arrayIndex,\n//     arrayJoinColumns,\n//     arrayRemoveRow,\n//     arrayColumnCellCount,\n//     arrayRemoveColumn,\n//     arrayJoinRows,\n// } from './model-array';\n\n// function deleteFirstSiblingInArray(model: ModelPrivate): boolean {\n//     const contentWasChanging = model.suppressChangeNotifications;\n//     model.suppressChangeNotifications = true;\n//     const array = model.parent.array;\n//     if (arrayFirstCellByRow(array) === model.relation) {\n//         // (1) First cell:\n//         // delete array, replace it with linearized content\n//         const atoms = arrayJoinRows(array);\n//         model.path.pop();\n//         model.siblings().splice(model.anchorOffset(), 1, ...atoms);\n//         model._iter = null;\n//         setSelectionOffset(model, model.anchorOffset() - 1, atoms.length);\n//     } else {\n//         const colRow = arrayColRow(array, model.relation);\n//         if (colRow.col === 0) {\n//             // (2) First (non-empty) column (but not first row):\n\n//             // Move to the end of the last cell of the previous row\n//             const dest = arrayAdjustRow(array, colRow, -1);\n//             dest.col = array[dest.row].length - 1;\n\n//             model.path[model.path.length - 1].relation = ('cell' +\n//                 arrayIndex(array, dest)) as Relation;\n//             const destLength = array[dest.row][dest.col].length;\n\n//             // (2.1) Linearize it and merge it with last cell of previous row\n//             // (note that atoms could be empty if there are no non-empty\n//             // cells left in the row)\n//             const atoms = arrayJoinColumns(array[colRow.row]);\n//             array[dest.row][dest.col] = array[dest.row][dest.col].concat(atoms);\n//             setSelectionOffset(model, destLength - 1, atoms.length);\n\n//             // (2.2) Remove row\n//             arrayRemoveRow(array, colRow.row);\n//         } else {\n//             // (3) Non-first column\n//             // (3.1) If column is empty, remove it\n//             if (arrayColumnCellCount(array, colRow.col) === 0) {\n//                 arrayRemoveColumn(array, colRow.col);\n//                 colRow.col -= 1;\n//                 model.path[model.path.length - 1].relation = ('cell' +\n//                     arrayIndex(array, colRow)) as Relation;\n//                 const destCell = array[colRow.row][colRow.col];\n//                 setSelectionOffset(model, destCell.length - 1, 0);\n//             }\n//             // (3.2) merge cell with cell in previous column\n//         }\n//     }\n\n//     // Dispatch notifications\n//     model.suppressChangeNotifications = contentWasChanging;\n//     selectionDidChange(model);\n//     contentDidChange(model);\n//     return true;\n// }\n\n/**\n * Handle special cases when deleting an atom as per the table below\n * - deleting an empty numerator: demote fraction\n * - forward-deleting a square root: demote it\n * - delete last atom inside a square root: delete the square root\n * - delete last atom in a subsup: delete the subsup\n * - etc...\n *\n *\n * @param branch: if deleting inside an atom, the branch being delete\n * (always the first or last atom of the branch). If undefined, the atom\n * itself is about to be deleted.\n *\n * @return true if handled\n */\nfunction onDelete(\n  model: ModelPrivate,\n  direction: 'forward' | 'backward',\n  atom: Atom,\n  branch?: Branch\n): boolean {\n  const { parent } = atom;\n  if (atom instanceof LeftRightAtom) {\n    //\n    // 'leftright': \\left\\right\n    //\n    const atStart =\n      (!branch && direction === 'forward') ||\n      (branch === 'body' && direction === 'backward');\n    const pos = atStart\n      ? model.offsetOf(atom) - 1\n      : model.offsetOf(atom.lastChild);\n    if (!atStart && atom.leftDelim !== '?' && atom.leftDelim !== '.') {\n      // Insert open fence\n      parent.addChildBefore(new Atom('mopen', { value: atom.leftDelim }), atom);\n    } else if (atStart && atom.rightDelim !== '?' && atom.rightDelim !== '.') {\n      // Insert closing fence\n      parent.addChildAfter(\n        new Atom('mclose', { value: atom.rightDelim }),\n        atom\n      );\n    }\n\n    // Hoist body\n    parent.addChildrenAfter(atom.removeBranch('body'), atom);\n    parent.removeChild(atom);\n    model.position = pos;\n    return true;\n  }\n\n  if (atom.type === 'surd') {\n    //\n    // 'surd': square root\n    //\n    if (\n      (direction === 'forward' && !branch) ||\n      (direction === 'backward' && branch === 'body')\n    ) {\n      // Before fwd or body 1st bwd: Demote body\n      const pos = atom.leftSibling;\n      if (atom.hasChildren) {\n        parent.addChildrenAfter(atom.removeBranch('body'), atom);\n      }\n\n      parent.removeChild(atom);\n      model.position = model.offsetOf(pos);\n    } else if (direction === 'forward' && branch === 'body') {\n      // Body last fwd: move to after\n      model.position = model.offsetOf(atom);\n    } else if (!branch && direction === 'backward') {\n      // After bwd: move to last of body\n      if (atom.hasChildren) {\n        model.position = model.offsetOf(atom.lastChild);\n      } else {\n        model.position = Math.max(model.offsetOf(atom) - 1);\n        parent.removeChild(atom);\n      }\n    } else if (branch === 'above') {\n      if (atom.hasEmptyBranch('above')) {\n        atom.removeBranch('above');\n      }\n\n      if (direction === 'backward') {\n        // Above 1st\n        model.position = model.offsetOf(atom.leftSibling);\n      } else {\n        // Above last\n        model.position = model.offsetOf(atom.body[0]);\n      }\n    }\n\n    return true;\n  }\n\n  if (atom.type === 'box' || atom.type === 'enclose') {\n    //\n    // 'box': \\boxed, \\fbox 'enclose': \\cancel\n    //\n    const pos =\n      (branch && direction === 'backward') ||\n      (!branch && direction === 'forward')\n        ? atom.leftSibling\n        : atom.lastChild;\n    parent.addChildrenAfter(atom.removeBranch('body'), atom);\n    parent.removeChild(atom);\n    model.position = model.offsetOf(pos);\n    return true;\n  }\n\n  if (atom.type === 'genfrac' || atom.type === 'overunder') {\n    //\n    // 'genfrac': \\frac, \\choose, etc...\n    //\n    if (!branch) {\n      // After or before atom\n      if (!atom.hasChildren) return false;\n      model.position = model.offsetOf(\n        direction === 'forward' ? atom.firstChild : atom.lastChild\n      );\n      return true;\n    }\n\n    if (\n      (direction === 'forward' && branch === 'above') ||\n      (direction === 'backward' && branch === 'below')\n    ) {\n      // Above last or below first: hoist\n      const above = atom.removeBranch('above');\n      const below = atom.removeBranch('below');\n\n      parent.addChildrenAfter([...above, ...below], atom);\n      parent.removeChild(atom);\n      model.position = model.offsetOf(\n        above.length > 0 ? above[above.length - 1] : below[0]\n      );\n      return true;\n    }\n\n    if (direction === 'backward') {\n      // Above first: move to before\n      model.position = model.offsetOf(atom.leftSibling);\n      return true;\n    }\n\n    // Below last: move to after\n    model.position = model.offsetOf(atom);\n    return true;\n  }\n\n  if (atom.isExtensibleSymbol || atom.type === 'msubsup') {\n    //\n    // Extensible operator: \\sum, \\int, etc...\n    // Superscript/subscript carrier\n    //\n    if (!branch && direction === 'forward') return false;\n    if (!branch) {\n      if (atom.subscript || atom.superscript) {\n        const pos: Atom =\n          direction === 'forward'\n            ? atom.superscript?.[0] ?? atom.subscript?.[0]\n            : atom.subscript?.[0].lastSibling ??\n              atom.superscript?.[0].lastSibling;\n        model.position = model.offsetOf(pos);\n        return true;\n      }\n\n      return false;\n    }\n\n    if (branch && atom.hasEmptyBranch(branch)) {\n      atom.removeBranch(branch);\n    }\n\n    if (!atom.hasChildren) {\n      // We've removed the last branch of a msubsup\n      const pos =\n        direction === 'forward'\n          ? model.offsetOf(atom)\n          : Math.max(0, model.offsetOf(atom) - 1);\n      atom.parent.removeChild(atom);\n      model.position = pos;\n      return true;\n    }\n\n    if (branch === 'superscript') {\n      if (direction === 'backward') {\n        const pos = model.offsetOf(atom.firstChild) - 1;\n        console.assert(pos >= 0);\n        model.position = pos;\n      } else if (atom.subscript) {\n        model.position = model.offsetOf(atom.subscript[0]);\n      } else {\n        model.position = model.offsetOf(atom);\n      }\n    } else if (branch === 'subscript') {\n      if (direction === 'backward' && atom.superscript) {\n        // Subscript first: move to superscript end\n        model.position = model.offsetOf(atom.superscript[0].lastSibling);\n      } else if (direction === 'backward') {\n        // Subscript first: move to before\n        model.position = model.offsetOf(atom.firstChild) - 1;\n      } else {\n        // Subscript last: move after\n        model.position = model.offsetOf(atom);\n      }\n    }\n\n    return true;\n  }\n\n  return false;\n}\n\n/**\n * Delete the item at the current position\n */\nexport function deleteBackward(model: ModelPrivate): boolean {\n  if (!model.selectionIsCollapsed) {\n    return deleteRange(model, range(model.selection));\n  }\n\n  return model.deferNotifications({ content: true, selection: true }, () => {\n    let target = model.at(model.position);\n\n    if (target && onDelete(model, 'backward', target)) return;\n\n    if (target?.isFirstSibling) {\n      if (onDelete(model, 'backward', target.parent, target.treeBranch)) {\n        return;\n      }\n\n      target = null;\n    }\n\n    // At the first position: nothing to delete...\n    if (!target) {\n      model.announce('plonk');\n      return;\n    }\n\n    const offset = model.offsetOf(target.leftSibling);\n    target.parent.removeChild(target);\n    model.announce('delete', null, [target]);\n    model.position = offset;\n  });\n}\n\n/**\n * Delete the item forward of the current position, update the position and\n * send notifications\n */\nexport function deleteForward(model: ModelPrivate): boolean {\n  if (!model.selectionIsCollapsed) {\n    return deleteRange(model, range(model.selection));\n  }\n\n  return model.deferNotifications({ content: true, selection: true }, () => {\n    let target = model.at(model.position).rightSibling;\n\n    if (target && onDelete(model, 'forward', target)) return;\n\n    if (!target) {\n      target = model.at(model.position);\n      if (\n        target.isLastSibling &&\n        onDelete(model, 'forward', target.parent, target.treeBranch)\n      ) {\n        return;\n      }\n\n      target = null;\n    } else if (\n      model.at(model.position).isLastSibling &&\n      onDelete(model, 'forward', target.parent, target.treeBranch)\n    ) {\n      return;\n    }\n\n    if (model.position === model.lastOffset || !target) {\n      model.announce('plonk');\n      return;\n    }\n\n    target.parent.removeChild(target);\n    let sibling = model.at(model.position)?.rightSibling;\n    while (sibling?.type === 'msubsup') {\n      sibling.parent.removeChild(sibling);\n      sibling = model.at(model.position)?.rightSibling;\n    }\n\n    model.announce('delete', null, [target]);\n  });\n}\n\n/**\n * Delete the specified range, as a result of a user action: this will\n * account for special cases such as deleting empty denominator, and will\n * provide appropriate feedback to screen readers.\n *\n * Use model.deleteAtoms() for operations that are not a result of\n * user action.\n */\n\nexport function deleteRange(model: ModelPrivate, range: Range): boolean {\n  return model.deferNotifications({ content: true, selection: true }, () => {\n    model.deleteAtoms(range);\n    model.position = range[0];\n  });\n}\n","import { Atom, ToLatexOptions } from '../core/atom-class';\nimport { Span } from '../core/span';\nimport { Context } from '../core/context';\nimport { ParseMode, Style } from '../public/core';\n\nexport class CompositionAtom extends Atom {\n  constructor(value: string, options?: { mode: ParseMode }) {\n    super('composition', { mode: options?.mode ?? 'math', value });\n  }\n\n  get computedStyle(): Style {\n    return {};\n  }\n\n  render(context: Context): Span {\n    // In theory one would like to be able to draw the clauses\n    // in an active composition. Unfortunately, there are\n    // no API to give access to those clauses :(\n    const result = new Span(this.value, {\n      classes: 'ML__composition',\n      type: 'composition',\n    });\n    this.bind(context, result);\n    if (this.caret) result.caret = this.caret;\n    return result;\n  }\n\n  toLatex(_options: ToLatexOptions): string {\n    return '';\n  }\n}\n","import { ModelPrivate } from './model-private';\nimport { CompositionAtom } from '../core-atoms/composition';\n\n/**\n * Create, remove or update a composition atom at the current location\n */\nexport function updateComposition(model: ModelPrivate, s: string): void {\n  const cursor = model.at(model.position);\n\n  // We're creating or updating a composition\n  if (cursor.type === 'composition') {\n    // Composition already in progress, update it\n    cursor.value = s;\n  } else {\n    // No composition yet, create one\n\n    // Remove previous caret\n    const { caret } = cursor;\n    cursor.caret = '';\n\n    // Create 'composition' atom, with caret\n    const atom = new CompositionAtom(s, { mode: cursor.mode });\n    atom.caret = caret;\n    cursor.parent.addChildAfter(atom, cursor);\n\n    // Move cursor one past the composition zone\n    model.position += 1;\n  }\n}\n\n/**\n * Remove the composition zone\n */\nexport function removeComposition(model: ModelPrivate): void {\n  const cursor = model.at(model.position);\n  if (cursor.type === 'composition') {\n    cursor.parent.removeChild(cursor);\n    model.position -= 1;\n  }\n}\n","import { Offset } from '../public/mathfield';\nimport type { ParseMode } from '../public/core';\n\nimport { ModelPrivate } from './model-private';\n\nexport function getMode(model: ModelPrivate, offset: Offset): ParseMode {\n  const atom = model.at(offset);\n  let result: ParseMode;\n  if (atom) {\n    result = atom.mode;\n    let ancestor = atom.parent;\n    while (!result && ancestor) {\n      if (ancestor) result = ancestor.mode;\n      ancestor = ancestor.parent;\n    }\n  }\n\n  return result;\n}\n","import { Atom } from '../core/atom';\nimport type { ModelPrivate } from './model-private';\nimport { Range } from '../public/mathfield';\nimport { Style } from '../public/core';\nimport { isArray } from '../common/types';\n\nexport function applyStyleToUnstyledAtoms(\n  atom: Atom | Atom[],\n  style: Style\n): void {\n  if (!atom || !style) return;\n  if (isArray<Atom>(atom)) {\n    // Apply styling options to each atom\n    atom.forEach((x) => applyStyleToUnstyledAtoms(x, style));\n  } else if (typeof atom === 'object') {\n    if (\n      !atom.style.color &&\n      !atom.style.backgroundColor &&\n      !atom.style.fontFamily &&\n      !atom.style.fontShape &&\n      !atom.style.fontSeries &&\n      !atom.style.fontSize &&\n      !atom.style.variant &&\n      !atom.style.variantStyle\n    ) {\n      atom.applyStyle(style);\n      applyStyleToUnstyledAtoms(atom.body, style);\n      applyStyleToUnstyledAtoms(atom.above, style);\n      applyStyleToUnstyledAtoms(atom.below, style);\n      applyStyleToUnstyledAtoms(atom.subscript, style);\n      applyStyleToUnstyledAtoms(atom.superscript, style);\n    }\n  }\n}\n\n/**\n * Apply a style (color, background) to the selection.\n *\n * If the style is already applied to the selection, remove it. If the selection\n * has the style partially applied (i.e. only some sections), remove it from\n * those sections, and apply it to the entire selection.\n */\n\nexport function applyStyle(\n  model: ModelPrivate,\n  range: Range,\n  style: Style,\n  options: { operation: 'set' | 'toggle' }\n): boolean {\n  function everyStyle(property, value): boolean {\n    let result = true;\n    for (const atom of atoms) {\n      result = result && atom.style[property] === value;\n    }\n    return result;\n  }\n\n  range = model.normalizeRange(range);\n  if (range[0] === range[1]) return false;\n\n  const atoms = model.getAtoms(range, { includeChildren: true });\n\n  if (options.operation === 'toggle') {\n    if (style.color && everyStyle('color', style.color)) {\n      // If the selection already has this color, turn it off\n      style.color = 'none';\n    }\n\n    if (\n      style.backgroundColor &&\n      everyStyle('backgroundColor', style.backgroundColor)\n    ) {\n      // If the selection already has this color, turn it off\n      style.backgroundColor = 'none';\n    }\n\n    if (style.fontFamily && everyStyle('fontFamily', style.fontFamily)) {\n      // If the selection already has this font family, turn it off\n      style.fontFamily = 'none';\n    }\n\n    // If (style.series) style.fontSeries = style.series;\n    if (style.fontSeries && everyStyle('fontSeries', style.fontSeries)) {\n      // If the selection already has this series (weight), turn it off\n      style.fontSeries = 'auto';\n    }\n\n    // If (style.shape) style.fontShape = style.shape;\n    if (style.fontShape && everyStyle('fontShape', style.fontShape)) {\n      // If the selection already has this shape (italic), turn it off\n      style.fontShape = 'auto';\n    }\n\n    // If (style.size) style.fontSize = style.size;\n    if (style.fontSize && everyStyle('fontSize', style.fontSize)) {\n      // If the selection already has this size, reset it to default size\n      style.fontSize = 'size5';\n    }\n  }\n\n  for (const atom of atoms) atom.applyStyle(style);\n\n  return true;\n}\n","import type { ModelPrivate } from './model-private';\nimport { LatexAtom } from '../core-atoms/latex';\nimport { TextAtom } from '../core-atoms/text';\nimport { LETTER_AND_DIGITS } from '../core-definitions/definitions';\nimport { Offset } from '../public/mathfield';\nimport { getCommandSuggestionRange } from '../editor-mathfield/mode-editor-latex';\n\n/*\n * Calculates the offset of the \"next word\".\n * This is inspired by the behavior of text editors on macOS, namely:\n    blue   yellow\n      ^-\n         ^-------\n * That is:\n\n * (1) If starts with an alphanumerical character, find the first alphanumerical\n * character which is followed by a non-alphanumerical character\n *\n * The behavior regarding non-alphanumeric characters is less consistent.\n * Here's the behavior we use:\n *\n *   +=-()_:”     blue\n * ^---------\n *   +=-()_:”     blue\n *      ^---------\n *   +=-()_:”blue\n *      ^--------\n *\n * (2) If starts in whitespace, skip whitespace, then find first non-whitespace*\n *    followed by whitespace\n * (*) Pages actually uses the character class of the first non-whitespace\n * encountered.\n *\n * (3) If starts in a non-whitespace, non alphanumerical character, find the first\n *      whitespace\n *\n */\nexport function wordBoundaryOffset(\n  model: ModelPrivate,\n  offset: Offset,\n  direction: 'forward' | 'backward'\n): number {\n  if (model.at(offset).mode !== 'text') return offset;\n  const dir = direction === 'backward' ? -1 : +1;\n  let result;\n  if (LETTER_AND_DIGITS.test(model.at(offset).value)) {\n    // (1) We start with an alphanumerical character\n    let i = offset;\n    let match;\n    do {\n      match =\n        model.at(i).mode === 'text' &&\n        LETTER_AND_DIGITS.test(model.at(i).value);\n      i += dir;\n    } while (model.at(i) && match);\n\n    result = model.at(i) ? i - 2 * dir : i - dir;\n  } else if (/\\s/.test(model.at(offset).value)) {\n    // (2) We start with whitespace\n\n    // Skip whitespace\n    let i = offset;\n    while (\n      model.at(i) &&\n      model.at(i).mode === 'text' &&\n      /\\s/.test(model.at(i).value)\n    ) {\n      i += dir;\n    }\n\n    if (!model.at(i)) {\n      // We've reached the end\n      result = i - dir;\n    } else {\n      let match = true;\n      do {\n        match = model.at(i).mode === 'text' && !/\\s/.test(model.at(i).value);\n        i += dir;\n      } while (model.at(i) && match);\n\n      result = model.at(i) ? i - 2 * dir : i - dir;\n    }\n  } else {\n    // (3)\n    let i = offset;\n    // Skip non-whitespace\n    while (\n      model.at(i) &&\n      model.at(i).mode === 'text' &&\n      !/\\s/.test(model.at(i).value)\n    ) {\n      i += dir;\n    }\n\n    result = model.at(i) ? i : i - dir;\n    let match = true;\n    while (model.at(i) && match) {\n      match = model.at(i).mode === 'text' && /\\s/.test(model.at(i).value);\n      if (match) result = i;\n      i += dir;\n    }\n\n    result = model.at(i) ? i - 2 * dir : i - dir;\n  }\n\n  return result - (dir > 0 ? 0 : 1);\n}\n\n/**\n * Keyboard navigation with alt/option:\n * Move the insertion point to the next/previous point of interest.\n * A point of interest is an atom of a different type (mbin, mord, etc...)\n * than the current focus.\n * If `extend` is true, the selection will be extended. Otherwise, it is\n * collapsed, then moved.\n * @todo array\n */\nexport function skip(\n  model: ModelPrivate,\n  direction: 'forward' | 'backward',\n  options?: { extend: boolean }\n): boolean {\n  const previousPosition = model.position;\n\n  if (!(options?.extend ?? false)) {\n    model.collapseSelection(direction);\n  }\n\n  let atom = model.at(model.position);\n  if (direction === 'forward') {\n    if (atom.type === 'msubsup') {\n      atom = atom.rightSibling;\n      if (!atom) {\n        atom = model.at(model.position + 1);\n      }\n    } else {\n      atom = model.at(model.position + 1);\n    }\n  }\n\n  if (!atom) {\n    model.announce('plonk');\n    return false;\n  }\n\n  let offset = model.offsetOf(atom);\n\n  if (atom instanceof TextAtom) {\n    //\n    // We're in a text zone, skip word by word\n    //\n    offset = wordBoundaryOffset(model, offset, direction);\n  } else if (atom instanceof LatexAtom) {\n    //\n    // We're in a command zone, skip suggestion\n    //\n    if (atom.isSuggestion) {\n      // Since suggestions are always at the end, this must be forward\n      console.assert(direction === 'forward');\n      while (atom && atom instanceof LatexAtom) {\n        atom.isSuggestion = false;\n        offset = model.offsetOf(atom);\n        atom = atom.rightSibling;\n      }\n    } else if (direction === 'forward') {\n      atom = atom.rightSibling;\n      if (!atom || !(atom instanceof LatexAtom)) {\n        // At the end of the command\n        model.announce('plonk');\n        return false;\n      }\n\n      while (\n        atom &&\n        atom instanceof LatexAtom &&\n        /[a-zA-Z*]/.test(atom.value)\n      ) {\n        offset = model.offsetOf(atom);\n        atom = atom.rightSibling;\n      }\n    } else {\n      atom = atom.leftSibling;\n      if (!atom || !(atom instanceof LatexAtom)) {\n        // At the start of the command\n        model.announce('plonk');\n        return false;\n      }\n\n      while (\n        atom &&\n        atom instanceof LatexAtom &&\n        /[a-zA-Z*]/.test(atom.value)\n      ) {\n        offset = model.offsetOf(atom);\n        atom = atom.leftSibling;\n      }\n    }\n  } else if (direction === 'forward' && atom.type === 'mopen') {\n    //\n    // Right before a 'mopen', skip to the corresponding balanced fence\n    //\n    let level = 0;\n    do {\n      if (atom.type === 'mopen') {\n        level += 1;\n      } else if (atom.type === 'mclose') {\n        level -= 1;\n      }\n\n      atom = atom.rightSibling;\n    } while (!atom.isLastSibling && level !== 0);\n\n    offset = model.offsetOf(atom.leftSibling);\n  } else if (direction === 'backward' && atom.type === 'mclose') {\n    //\n    // Right after a 'mclose', skip to the corresponding balanced fence\n    //\n    let level = 0;\n    do {\n      if (atom.type === 'mopen') {\n        level += 1;\n      } else if (atom.type === 'mclose') {\n        level -= 1;\n      }\n\n      atom = atom.leftSibling;\n    } while (!atom.isFirstSibling && level !== 0);\n\n    offset = model.offsetOf(atom);\n  } else if (direction === 'backward') {\n    //\n    // We're in a regular math zone (not before/after a fence)\n    //\n    if (atom.type === 'first') {\n      while (offset > 0 && atom.type === 'first') {\n        offset -= 1;\n        atom = model.at(offset);\n      }\n    } else {\n      const type = atom.type;\n      if (atom.type === 'msubsup') {\n        // If we're after a 'msubsup', skip to its left sibling\n        // (the base of the super/subscript)\n        offset = model.offsetOf(model.at(offset).leftSibling);\n      }\n\n      offset -= 1;\n      let nextType = model.at(offset)?.type;\n      // If (nextType === 'msubsup') {\n      //     offset = model.offsetOf(model.at(offset).leftSibling);\n      // }\n      while (offset >= 0 && nextType === type) {\n        if (model.at(offset)?.type === 'msubsup') {\n          offset = model.offsetOf(model.at(offset).leftSibling);\n        } else {\n          offset -= 1;\n        }\n\n        nextType = model.at(offset).type;\n      }\n    }\n  } else {\n    const { type } = atom;\n    // If (atom.type === 'msubsup') {\n    //     offset = model.offsetOf(model.at(offset).rightSibling);\n    // }\n    let nextType = model.at(offset)?.type;\n    const { lastOffset } = model;\n    while (\n      offset <= lastOffset &&\n      (nextType === type || nextType === 'msubsup')\n    ) {\n      while (model.at(offset).rightSibling?.type === 'msubsup') {\n        offset = model.offsetOf(model.at(offset).rightSibling);\n      }\n\n      offset += 1;\n      nextType = model.at(offset)?.type;\n    }\n\n    offset -= 1;\n  }\n\n  if (options?.extend ?? false) {\n    if (!model.setSelection(model.anchor, offset)) {\n      model.announce('plonk');\n      return false;\n    }\n  } else {\n    if (offset === model.position) {\n      model.announce('plonk');\n      return false;\n    }\n\n    model.position = offset;\n  }\n\n  model.announce('move', previousPosition);\n  return true;\n}\n\n/**\n * Handle keyboard navigation (arrow keys)\n */\nexport function move(\n  model: ModelPrivate,\n  direction: 'forward' | 'backward' | 'upward' | 'downward',\n  options?: { extend: boolean }\n): boolean {\n  options = options ?? { extend: false };\n\n  if (direction !== 'forward') {\n    model.deleteAtoms(getCommandSuggestionRange(model));\n  }\n\n  if (direction === 'upward') return moveUpward(model, options);\n  if (direction === 'downward') return moveDownward(model, options);\n\n  const previousPosition = model.position;\n\n  if (options.extend) {\n    return model.extendSelection(direction);\n  }\n\n  if (model.selectionIsPlaceholder) {\n    model.collapseSelection(direction);\n    return move(model, direction);\n  }\n\n  if (!model.collapseSelection(direction)) {\n    let pos = model.position + (direction === 'forward' ? +1 : -1);\n\n    //\n    // 1. Handle `captureSelection` and `skipBoundary`\n    //\n    if (direction === 'forward') {\n      let atom = model.at(model.position + 1);\n      if (atom?.inCaptureSelection) {\n        // If in a capture selection, while going forward jump to\n        // after\n        while (!atom.captureSelection) atom = atom.parent;\n        pos = model.offsetOf(atom.parent.lastChild) + 1;\n      } else if (atom?.isLastSibling && atom?.parent?.skipBoundary) {\n        // When going forward if next is skipboundary, move 2\n        if (pos + 1 === model.lastOffset) {\n          pos = pos + 1;\n        } else {\n          model.position = pos + 1;\n          return move(model, 'forward', options);\n        }\n      } else if (atom instanceof LatexAtom && atom.isSuggestion) {\n        atom.isSuggestion = false;\n      }\n    } else if (direction === 'backward') {\n      let atom = model.at(model.position - 1);\n      if (atom?.inCaptureSelection) {\n        // If in a capture selection while going backward, jump to\n        // before\n        while (!atom.captureSelection) atom = atom.parent;\n        pos = Math.max(0, model.offsetOf(atom.parent.firstChild) - 1);\n      } else if (atom?.isFirstSibling && atom.parent?.skipBoundary) {\n        // When going backward, if land on first of group and previous is\n        // skipbounday,  move -2\n        pos -= 1;\n      }\n    }\n\n    //\n    // 2. Handle out of bounds\n    //\n    if (pos < 0 || pos > model.lastOffset) {\n      // We're going out of bounds\n      let result = true; // True => perform default handling\n      if (!model.suppressChangeNotifications) {\n        result = model.hooks?.moveOut(model, direction);\n      }\n\n      if (result) model.announce('plonk');\n      return result;\n    }\n\n    //\n    // 3. Handle placeholder\n    //\n    setPositionHandlingPlaceholder(model, pos);\n  }\n\n  model.announce('move', previousPosition);\n  return true;\n}\n\nfunction setPositionHandlingPlaceholder(\n  model: ModelPrivate,\n  pos: Offset\n): void {\n  if (model.at(pos)?.type === 'placeholder') {\n    // We're going right of a placeholder: select it\n    model.setSelection(pos - 1, pos);\n  } else if (model.at(pos)?.rightSibling?.type === 'placeholder') {\n    // We're going left of a placeholder: select it\n    model.setSelection(pos, pos + 1);\n  } else {\n    model.position = pos;\n  }\n}\n\nfunction moveUpward(\n  model: ModelPrivate,\n  options?: { extend: boolean }\n): boolean {\n  const extend = options?.extend ?? false;\n\n  model.collapseSelection('backward');\n  // Find a target branch\n  // This is to handle the case: `\\frac{x}{\\sqrt{y}}`. If we're at `y`\n  // we'd expectto move to `x`, even though `\\sqrt` doesn't have an 'above'\n  // branch, but one of its ancestor does.\n  let atom = model.at(model.position);\n  while (atom && atom.treeBranch !== 'below') {\n    atom = atom.parent;\n  }\n\n  if (atom) {\n    if (extend) {\n      model.setSelection(\n        model.offsetOf(atom.parent.leftSibling),\n        model.offsetOf(atom.parent)\n      );\n    } else {\n      // If branch doesn't exist, create it\n      const branch =\n        atom.parent.branch('above') ?? atom.parent.createBranch('above');\n\n      // Move to the last atom of the branch\n      setPositionHandlingPlaceholder(\n        model,\n        model.offsetOf(branch[branch.length - 1])\n      );\n    }\n\n    model.announce('move up');\n    // } else if (model.parent.array) {\n    //     // In an array\n    //     let colRow = arrayColRow(model.parent.array, relation);\n    //     colRow = arrayAdjustRow(model.parent.array, colRow, -1);\n    //     if (colRow && arrayCell(model.parent.array, colRow)) {\n    //         model.path[model.path.length - 1].relation = ('cell' +\n    //             arrayIndex(model.parent.array, colRow)) as Relation;\n    //         setSelectionOffset(model, model.anchorOffset());\n\n    //         model.announce('moveUp');\n    //     } else {\n    //         move(model, 'backward', options);\n    //     }\n  } else if (!model.at(model.position).parent?.parent) {\n    let result = true; // True => perform default handling\n    if (!model.suppressChangeNotifications) {\n      result = model.hooks?.moveOut(model, 'upward');\n    }\n\n    model.announce(result ? 'plonk' : 'line');\n    return result;\n  }\n\n  return true;\n}\n\nfunction moveDownward(\n  model: ModelPrivate,\n  options?: { extend: boolean }\n): boolean {\n  const extend = options?.extend ?? false;\n\n  model.collapseSelection('forward');\n  let atom = model.at(model.position);\n  while (atom && atom.treeBranch !== 'above') {\n    atom = atom.parent;\n  }\n\n  if (atom) {\n    if (extend) {\n      model.setSelection(\n        model.offsetOf(atom.parent.leftSibling),\n        model.offsetOf(atom.parent)\n      );\n    } else {\n      // If branch doesn't exist, create it\n      const branch =\n        atom.parent.branch('below') ?? atom.parent.createBranch('below');\n\n      // Move to the last atom of the branch\n      setPositionHandlingPlaceholder(\n        model,\n        model.offsetOf(branch[branch.length - 1])\n      );\n    }\n\n    model.announce('move down');\n    //     // In an array\n    //     let colRow = arrayColRow(model.parent.array, relation);\n    //     colRow = arrayAdjustRow(model.parent.array, colRow, +1);\n    //     // @revisit: validate this codepath\n    //     if (colRow && arrayCell(model.parent.array, colRow)) {\n    //         model.path[model.path.length - 1].relation = ('cell' +\n    //             arrayIndex(model.parent.array, colRow)) as Relation;\n    //         setSelectionOffset(model, model.anchorOffset());\n    //         model.announce('moveDown');\n    //     } else {\n    //         move(model, 'forward', options);\n    //     }\n  } else if (!model.at(model.position).parent?.parent) {\n    let result = true; // True => perform default handling\n    if (!model.suppressChangeNotifications) {\n      result = model.hooks?.moveOut(model, 'downward');\n    }\n\n    model.announce(result ? 'plonk' : 'line');\n    return result;\n  }\n\n  return true;\n}\n","import { register } from '../editor/commands';\nimport type { ModelPrivate } from './model-private';\nimport { deleteForward, deleteBackward, deleteRange } from './delete';\nimport { wordBoundaryOffset } from './commands';\n\nregister(\n  {\n    deleteAll: (model: ModelPrivate): boolean => {\n      return deleteRange(model, [0, -1]);\n    },\n    deleteForward: (model: ModelPrivate): boolean => deleteForward(model),\n    deleteBackward: (model: ModelPrivate): boolean => deleteBackward(model),\n    deleteNextWord: (model: ModelPrivate): boolean =>\n      deleteRange(model, [\n        model.anchor,\n        wordBoundaryOffset(model, model.position, 'forward'),\n      ]),\n    deletePreviousWord: (model: ModelPrivate): boolean =>\n      deleteRange(model, [\n        model.anchor,\n        wordBoundaryOffset(model, model.position, 'backward'),\n      ]),\n    deleteToGroupStart: (model: ModelPrivate): boolean =>\n      deleteRange(model, [\n        model.anchor,\n        model.offsetOf(model.at(model.position).firstSibling),\n      ]),\n    deleteToGroupEnd: (model: ModelPrivate): boolean =>\n      deleteRange(model, [\n        model.anchor,\n        model.offsetOf(model.at(model.position).lastSibling),\n      ]),\n    deleteToMathFieldStart: (model: ModelPrivate): boolean =>\n      deleteRange(model, [model.anchor, 0]),\n    deleteToMathFieldEnd: (model: ModelPrivate): boolean =>\n      deleteRange(model, [model.anchor, -1]),\n  },\n  { target: 'model', category: 'delete' }\n);\n","import { register } from '../editor/commands';\nimport type { ModelPrivate } from './model-private';\nimport { Atom, BranchName } from '../core/atom';\nimport { SubsupAtom } from '../core-atoms/subsup';\nimport { move, skip } from './commands';\n\nexport function moveAfterParent(model: ModelPrivate): boolean {\n  const previousPosition = model.position;\n  if (!model.at(previousPosition).parent) {\n    model.announce('plonk');\n    return false;\n  }\n\n  model.position = model.offsetOf(model.at(model.position).parent);\n  model.announce('move', previousPosition);\n  return true;\n}\n\nfunction superscriptDepth(model: ModelPrivate): number {\n  let result = 0;\n  let atom = model.at(model.position);\n  let wasSuperscript = false;\n  while (atom) {\n    if (\n      !atom.hasEmptyBranch('superscript') ||\n      !atom.hasEmptyBranch('subscript')\n    ) {\n      result += 1;\n    }\n\n    if (!atom.hasEmptyBranch('superscript')) {\n      wasSuperscript = true;\n    } else if (!atom.hasEmptyBranch('subscript')) {\n      wasSuperscript = false;\n    }\n\n    atom = atom.parent;\n  }\n\n  return wasSuperscript ? result : 0;\n}\n\nfunction subscriptDepth(model: ModelPrivate): number {\n  let result = 0;\n  let atom = model.at(model.position);\n  let wasSubscript = false;\n  while (atom) {\n    if (\n      !atom.hasEmptyBranch('superscript') ||\n      !atom.hasEmptyBranch('subscript')\n    ) {\n      result += 1;\n    }\n\n    if (!atom.hasEmptyBranch('superscript')) {\n      wasSubscript = false;\n    } else if (!atom.hasEmptyBranch('subscript')) {\n      wasSubscript = true;\n    }\n\n    atom = atom.parent;\n  }\n\n  return wasSubscript ? result : 0;\n}\n\n/**\n * Switch the cursor to the superscript and select it. If there is no subscript\n * yet, create one.\n */\nfunction moveToSuperscript(model: ModelPrivate): boolean {\n  model.collapseSelection();\n  if (superscriptDepth(model) >= model.mathfield.options.scriptDepth[1]) {\n    model.announce('plonk');\n    return false;\n  }\n\n  let target = model.at(model.position);\n\n  if (\n    target.subsupPlacement !== 'over-under' &&\n    target.subsupPlacement !== 'auto'\n  ) {\n    // This atom can't have a superscript/subscript:\n    // add an adjacent `msubsup` atom instead.\n    if (target.rightSibling?.type !== 'msubsup') {\n      target.parent.addChildAfter(\n        new SubsupAtom({ style: target.computedStyle }),\n        target\n      );\n    }\n\n    target = target.rightSibling;\n  }\n\n  // Ensure there is a superscript branch\n  target.createBranch('superscript');\n  model.setSelection(\n    model.getSiblingsRange(model.offsetOf(target.superscript[0]))\n  );\n\n  return true;\n}\n\n/**\n * Switch the cursor to the subscript and select it. If there is no subscript\n * yet, create one.\n */\nfunction moveToSubscript(model: ModelPrivate): boolean {\n  model.collapseSelection();\n  if (subscriptDepth(model) >= model.mathfield.options.scriptDepth[0]) {\n    model.announce('plonk');\n    return false;\n  }\n\n  let target = model.at(model.position);\n\n  if (\n    target.subsupPlacement !== 'over-under' &&\n    target.subsupPlacement !== 'auto'\n  ) {\n    // This atom can't have a superscript/subscript:\n    // add an adjacent `msubsup` atom instead.\n    if (model.at(model.position + 1)?.type !== 'msubsup') {\n      target.parent.addChildAfter(\n        new Atom('msubsup', {\n          mode: target.mode,\n          value: '\\u200B',\n          style: model.at(model.position).computedStyle,\n        }),\n        target\n      );\n    }\n\n    target = model.at(model.position + 1);\n  }\n\n  // Ensure there is a subscript branch\n  target.createBranch('subscript');\n  model.setSelection(\n    model.getSiblingsRange(model.offsetOf(target.subscript[0]))\n  );\n  return true;\n}\n\n/**\n * Return an array of tabbable elements, approximately in the order a browser\n * would (the browsers are inconsistent), which is first by accounting\n * for non-null tabIndex, then null tabIndex, then document order of focusable\n * elements.\n */\nfunction getTabbableElements(): HTMLElement[] {\n  // Const focussableElements = `a[href]:not([disabled]),\n  // button:not([disabled]),\n  // textarea:not([disabled]),\n  // input[type=text]:not([disabled]),\n  // select:not([disabled]),\n  // [contentEditable=\"true\"],\n  // [tabindex]:not([disabled]):not([tabindex=\"-1\"])`;\n  // // Get all the potentially focusable elements\n  // // and exclude (1) those that are invisible (width and height = 0)\n  // // (2) not the active element\n  // // (3) the ancestor of the active element\n\n  // return Array.prototype.filter.call(\n  //     document.querySelectorAll(focussableElements),\n  //     (element) =>\n  //         ((element.offsetWidth > 0 || element.offsetHeight > 0) &&\n  //             !element.contains(document.activeElement)) ||\n  //         element === document.activeElement\n  // );\n\n  function tabbable(element: HTMLElement) {\n    const regularTabbables = [];\n    const orderedTabbables = [];\n\n    const candidates = [\n      ...element.querySelectorAll<HTMLElement>(`input, select, textarea, a[href], button, \n        [tabindex], audio[controls], video[controls],\n        [contenteditable]:not([contenteditable=\"false\"]), details>summary`),\n    ].filter(isNodeMatchingSelectorTabbable);\n\n    candidates.forEach((candidate, i) => {\n      const candidateTabindex = getTabindex(candidate);\n      if (candidateTabindex === 0) {\n        regularTabbables.push(candidate);\n      } else {\n        orderedTabbables.push({\n          documentOrder: i,\n          tabIndex: candidateTabindex,\n          node: candidate,\n        });\n      }\n    });\n\n    return orderedTabbables\n      .sort((a, b) =>\n        a.tabIndex === b.tabIndex\n          ? a.documentOrder - b.documentOrder\n          : a.tabIndex - b.tabIndex\n      )\n      .map((a) => a.node)\n      .concat(regularTabbables);\n  }\n\n  function isNodeMatchingSelectorTabbable(element: HTMLElement): boolean {\n    if (\n      !isNodeMatchingSelectorFocusable(element) ||\n      isNonTabbableRadio(element) ||\n      getTabindex(element) < 0\n    ) {\n      return false;\n    }\n\n    return true;\n  }\n\n  function isNodeMatchingSelectorFocusable(node) {\n    if (\n      node.disabled ||\n      (node.type === 'hidden' && node.tagName.toUpperCase() === 'INPUT') ||\n      isHidden(node)\n    ) {\n      return false;\n    }\n\n    return true;\n  }\n\n  function getTabindex(node: HTMLElement): number {\n    const tabindexAttr = Number.parseInt(node.getAttribute('tabindex'), 10);\n\n    if (!Number.isNaN(tabindexAttr)) {\n      return tabindexAttr;\n    }\n\n    // Browsers do not return `tabIndex` correctly for contentEditable nodes;\n    // so if they don't have a tabindex attribute specifically set, assume it's 0.\n    if (node.contentEditable === 'true') {\n      return 0;\n    }\n\n    // In Chrome, <audio controls/> and <video controls/> elements get a default\n    //  `tabIndex` of -1 when the 'tabindex' attribute isn't specified in the DOM,\n    //  yet they are still part of the regular tab order; in FF, they get a default\n    //  `tabIndex` of 0; since Chrome still puts those elements in the regular tab\n    //  order, consider their tab index to be 0\n    if (\n      (node.nodeName === 'AUDIO' || node.nodeName === 'VIDEO') &&\n      node.getAttribute('tabindex') === null\n    ) {\n      return 0;\n    }\n\n    return node.tabIndex;\n  }\n\n  function isNonTabbableRadio(node: HTMLElement): boolean {\n    return (\n      node.tagName.toUpperCase() === 'INPUT' &&\n      (node as HTMLInputElement).type === 'radio' &&\n      !isTabbableRadio(node as HTMLInputElement)\n    );\n  }\n\n  function getCheckedRadio(nodes, form) {\n    for (const node of nodes) {\n      if (node.checked && node.form === form) {\n        return node;\n      }\n    }\n\n    return null;\n  }\n\n  function isTabbableRadio(node: HTMLInputElement): boolean {\n    if (!node.name) {\n      return true;\n    }\n\n    const radioScope = node.form || node.ownerDocument;\n    const radioSet = radioScope.querySelectorAll(\n      'input[type=\"radio\"][name=\"' + node.name + '\"]'\n    );\n    const checked = getCheckedRadio(radioSet, node.form);\n    return !checked || checked === node;\n  }\n\n  function isHidden(element: HTMLElement) {\n    if (\n      element === document.activeElement ||\n      element.contains(document.activeElement)\n    ) {\n      return false;\n    }\n\n    if (getComputedStyle(element).visibility === 'hidden') return true;\n\n    // Note that browsers generally don't consider the bounding rect\n    // as a criteria to determine if an item is focusable, but we want\n    // to exclude the invisible textareas used to capture keyoard input.\n    const bounds = element.getBoundingClientRect();\n    if (bounds.width === 0 || bounds.height === 0) return true;\n\n    while (element) {\n      if (getComputedStyle(element).display === 'none') return true;\n      element = element.parentElement;\n    }\n\n    return false;\n  }\n\n  return tabbable(document.body);\n}\n\n/**\n * Move to the next/previous placeholder or empty child list.\n * @return False if no placeholder found and did not move\n */\nfunction leap(\n  model: ModelPrivate,\n  dir: 'forward' | 'backward',\n  callHooks = true\n): boolean {\n  const dist = dir === 'forward' ? 1 : -1;\n  if (model.at(model.anchor).type === 'placeholder') {\n    // If we're already at a placeholder, move by one more (the placeholder\n    // is right after the insertion point)\n    move(model, dir);\n  }\n\n  // Candidate placeholders are atom of type 'placeholder'\n  // or empty children list (except for the root: if the root is empty,\n  // it is not a valid placeholder)\n  const atoms = model.getAllAtoms(model.position + dist);\n  if (dir === 'backward') atoms.reverse();\n  const placeholders = atoms.filter(\n    (atom) =>\n      atom.type === 'placeholder' ||\n      (atom.treeDepth > 0 && atom.isFirstSibling && atom.isLastSibling)\n  );\n\n  // If no placeholders were found, call handler or move to the next focusable\n  // element in the document\n  if (placeholders.length === 0) {\n    const handled = !callHooks || !model.hooks.tabOut?.(model, dir);\n    if (handled) {\n      model.announce('plonk');\n      return false;\n    }\n\n    const tabbable = getTabbableElements();\n    if (!document.activeElement || tabbable.length === 1) {\n      model.announce('plonk');\n      return false;\n    }\n\n    let index = tabbable.indexOf(document.activeElement as HTMLElement) + dist;\n    if (index < 0) index = tabbable.length - 1;\n    if (index >= tabbable.length) index = 0;\n    tabbable[index].focus();\n\n    if (index === 0) {\n      model.announce('plonk');\n      return false;\n    }\n\n    return true;\n  }\n\n  // Set the selection to the next placeholder\n  const previousPosition = model.position;\n  const newPosition = model.offsetOf(placeholders[0]);\n  if (placeholders[0].type === 'placeholder') {\n    model.setSelection(newPosition - 1, newPosition);\n  } else {\n    model.position = newPosition;\n  }\n\n  model.announce('move', previousPosition);\n  return true;\n}\n\n/**\n * If cursor is currently in:\n * - superscript: move to subscript, creating it if necessary\n * - subscript: move to superscript, creating it if necessary\n * - numerator: move to denominator\n * - denominator: move to numerator\n * - otherwise: move to superscript\n */\nregister(\n  {\n    moveToOpposite: (model: ModelPrivate): boolean => {\n      const OPPOSITE_RELATIONS = {\n        superscript: 'subscript',\n        subscript: 'superscript',\n        above: 'below',\n        below: 'above',\n      };\n      const cursor = model.at(model.position);\n      const { parent } = cursor;\n      if (!parent) {\n        model.announce('plonk');\n        return false;\n      }\n\n      const relation = cursor.treeBranch;\n      let oppositeRelation: BranchName;\n      if (typeof relation === 'string') {\n        oppositeRelation = OPPOSITE_RELATIONS[relation];\n      }\n\n      if (!oppositeRelation) {\n        if (!cursor.subsupPlacement) {\n          return moveToSuperscript(model);\n        }\n\n        return moveToSubscript(model);\n      }\n\n      if (!parent.branch(oppositeRelation)) {\n        // Don't have children of the opposite relation yet\n        // Add them\n        parent.createBranch(oppositeRelation);\n      }\n\n      return model.setSelection(\n        model.getBranchRange(model.offsetOf(parent), oppositeRelation)\n      );\n    },\n    moveBeforeParent: (model: ModelPrivate): boolean => {\n      const { parent } = model.at(model.position);\n      if (!parent) {\n        model.announce('plonk');\n        return false;\n      }\n\n      model.position = model.offsetOf(parent);\n      return true;\n    },\n    moveAfterParent: (model: ModelPrivate): boolean => moveAfterParent(model),\n\n    moveToNextPlaceholder: (model: ModelPrivate): boolean =>\n      leap(model, 'forward'),\n    moveToPreviousPlaceholder: (model: ModelPrivate): boolean =>\n      leap(model, 'backward'),\n    moveToNextChar: (model: ModelPrivate): boolean => move(model, 'forward'),\n    moveToPreviousChar: (model: ModelPrivate): boolean =>\n      move(model, 'backward'),\n    moveUp: (model: ModelPrivate): boolean => move(model, 'upward'),\n    moveDown: (model: ModelPrivate): boolean => move(model, 'downward'),\n    moveToNextWord: (model: ModelPrivate): boolean => skip(model, 'forward'),\n    moveToPreviousWord: (model: ModelPrivate): boolean =>\n      skip(model, 'backward'),\n    moveToGroupStart: (model: ModelPrivate): boolean => {\n      const pos = model.offsetOf(model.at(model.position).firstSibling);\n      if (pos === model.position) {\n        model.announce('plonk');\n        return false;\n      }\n\n      model.position = pos;\n      return true;\n    },\n    moveToGroupEnd: (model: ModelPrivate): boolean => {\n      const pos = model.offsetOf(model.at(model.position).lastSibling);\n      if (pos === model.position) {\n        model.announce('plonk');\n        return false;\n      }\n\n      model.position = pos;\n      return true;\n    },\n    moveToMathFieldStart: (model: ModelPrivate): boolean => {\n      if (model.position === 0) {\n        model.announce('plonk');\n        return false;\n      }\n\n      model.position = 0;\n      return true;\n    },\n    moveToMathFieldEnd: (model: ModelPrivate): boolean => {\n      if (model.position === model.lastOffset) {\n        model.announce('plonk');\n        return false;\n      }\n\n      model.position = model.lastOffset;\n      return true;\n    },\n    moveToSuperscript: (model: ModelPrivate): boolean =>\n      moveToSuperscript(model),\n    moveToSubscript: (model: ModelPrivate): boolean => moveToSubscript(model),\n  },\n  { target: 'model', category: 'selection-anchor' }\n);\n","import { register } from '../editor/commands';\nimport type { ModelPrivate } from './model-private';\nimport { Atom } from '../core/atom';\nimport { LETTER_AND_DIGITS } from '../core-definitions/definitions';\nimport { getMode } from './selection';\nimport { move, skip } from './commands';\n\n/**\n * Return true if the atom could be a part of a number\n * i.e. \"-12354.568\"\n */\nfunction isNumber(atom: Atom): boolean {\n  if (!atom) return false;\n  return (\n    (atom.type === 'mord' && /[\\d.]/.test(atom.value)) ||\n    (atom.type === 'mpunct' && atom.value === ',')\n  );\n}\n\n/**\n * Select all the atoms in the current group, that is all the siblings.\n * When the selection is in a numerator, the group is the numerator. When\n * the selection is a superscript or subscript, the group is the supsub.\n * When the selection is in a text zone, the \"group\" is a word.\n */\nexport function selectGroup(model: ModelPrivate): boolean {\n  if (getMode(model, model.position) === 'text') {\n    let start = Math.min(model.anchor, model.position);\n    let end = Math.max(model.anchor, model.position);\n    //\n    let done = false;\n    while (!done && start > 0) {\n      const atom = model.at(start);\n      if (atom.mode === 'text' && LETTER_AND_DIGITS.test(atom.value)) {\n        start -= 1;\n      } else {\n        done = true;\n      }\n    }\n\n    done = false;\n    while (!done && end <= model.lastOffset) {\n      const atom = model.at(end);\n      if (atom.mode === 'text' && LETTER_AND_DIGITS.test(atom.value)) {\n        end += 1;\n      } else {\n        done = true;\n      }\n    }\n\n    if (done) {\n      end -= 1;\n    }\n\n    if (start >= end) {\n      // No word found. Select a single character\n      model.setSelection(end - 1, end);\n      return true;\n    }\n\n    model.setSelection(start, end);\n  } else {\n    const atom = model.at(model.position);\n    // In a math zone, select all the sibling nodes\n    if (isNumber(atom)) {\n      // In a number, select all the digits\n      let start = Math.min(model.anchor, model.position);\n      let end = Math.max(model.anchor, model.position);\n      //\n      while (isNumber(model.at(start))) start -= 1;\n      while (isNumber(model.at(end))) end += 1;\n      model.setSelection(start, end - 1);\n    } else {\n      model.setSelection(\n        model.offsetOf(atom.firstSibling),\n        model.offsetOf(atom.lastSibling)\n      );\n    }\n  }\n\n  return true;\n}\n\nregister(\n  {\n    selectGroup: (model: ModelPrivate): boolean => {\n      const result = selectGroup(model);\n      if (!result) model.announce('plonk');\n      return result;\n    },\n\n    selectAll: (model: ModelPrivate): boolean =>\n      model.setSelection(0, model.lastOffset),\n    extendSelectionForward: (model: ModelPrivate): boolean => {\n      const result = model.extendSelection('forward');\n      if (!result) model.announce('plonk');\n      return result;\n    },\n    extendSelectionBackward: (model: ModelPrivate): boolean => {\n      const result = model.extendSelection('backward');\n      if (!result) model.announce('plonk');\n      return result;\n    },\n\n    extendToNextWord: (model: ModelPrivate): boolean =>\n      skip(model, 'forward', { extend: true }),\n    extendToPreviousWord: (model: ModelPrivate): boolean =>\n      skip(model, 'backward', { extend: true }),\n    extendSelectionUpward: (model: ModelPrivate): boolean =>\n      move(model, 'upward', { extend: true }),\n    extendSelectionDownward: (model: ModelPrivate): boolean =>\n      move(model, 'downward', { extend: true }),\n    /**\n     * Extend the selection until the next boundary is reached. A boundary\n     * is defined by an atom of a different type (mbin, mord, etc...)\n     * than the current focus. For example, in \"1234+x=y\", if the focus is between\n     * \"1\" and \"2\", invoking `extendToNextBoundary_` would extend the selection\n     * to \"234\".\n     */\n    extendToNextBoundary: (model: ModelPrivate): boolean =>\n      skip(model, 'forward', { extend: true }),\n    /**\n     * Extend the selection until the previous boundary is reached. A boundary\n     * is defined by an atom of a different type (mbin, mord, etc...)\n     * than the current focus. For example, in \"1+23456\", if the focus is between\n     * \"5\" and \"6\", invoking `extendToPreviousBoundary` would extend the selection\n     * to \"2345\".\n     */\n    extendToPreviousBoundary: (model: ModelPrivate): boolean =>\n      skip(model, 'backward', { extend: true }),\n    extendToGroupStart: (model: ModelPrivate): boolean => {\n      const result = model.setSelection(\n        model.anchor,\n        model.offsetOf(model.at(model.position).firstSibling)\n      );\n      if (!result) model.announce('plonk');\n      return result;\n    },\n    extendToGroupEnd: (model: ModelPrivate): boolean => {\n      const result = model.setSelection(\n        model.anchor,\n        model.offsetOf(model.at(model.position).lastSibling)\n      );\n      if (!result) model.announce('plonk');\n      return result;\n    },\n    extendToMathFieldStart: (model: ModelPrivate): boolean => {\n      const result = model.setSelection(model.anchor, 0);\n      if (!result) model.announce('plonk');\n      return result;\n    },\n    extendToMathFieldEnd: (model: ModelPrivate): boolean => {\n      const result = model.setSelection(model.anchor, model.lastOffset);\n      if (!result) model.announce('plonk');\n      return result;\n    },\n  },\n  { target: 'model', category: 'selection-extend' }\n);\n","/**\n * This modules handles low-level keyboard events and normalize them across\n * browsers.\n *\n * See https://dvcs.w3.org/hg/d4e/raw-file/tip/key-event-test.html\n * (also at https://w3c.github.io/uievents/tools/key-event-viewer.html)\n *\n *\n * - **KeyboardEvent.key** (the printable value associated with the key or a string\n * for special keys)\n *  https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/key/Key_Values\n *  https://www.w3.org/TR/uievents-key/\n *\n * - **KeyboardEvent.code** (the physical key being pressed. On an AZERTY keyboard\n * the key labelled \"A\" is KeyQ)\n *  https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/code/code_values\n *  https://www.w3.org/TR/uievents-code/\n *\n * Note:\n * - `charCode`, `keyCode` and `which` are deprecated\n *\n * For background, see this info regarding keybinding in VSCode:\n * - https://github.com/microsoft/vscode/tree/master/src/vs/workbench/services/keybinding\n * - https://github.com/microsoft/vscode/wiki/Keybinding-Issues\n */\n\nimport { normalizeKeyboardEvent } from './keyboard-layout';\n\nconst PRINTABLE_KEYCODE = new Set([\n  'Backquote', // Japanese keyboard: hankaku/zenkaku/kanji key, which is non-printable\n  'Digit0',\n  'Digit1',\n  'Digit2',\n  'Digit3',\n  'Digit4',\n  'Digit5',\n  'Digit6',\n  'Digit7',\n  'Digit8',\n  'Digit9',\n  'Minus',\n  'Equal',\n  'IntlYen', // Japanese Keyboard. Russian keyboard: \\/\n\n  'KeyQ', // AZERTY keyboard: labeled 'a'\n  'KeyW', // AZERTY keyboard: labeled 'z'\n  'KeyE',\n  'KeyR',\n  'KeyT',\n  'KeyY', // QWERTZ keyboard: labeled 'z'\n  'KeyU',\n  'KeyI',\n  'KeyO',\n  'KeyP',\n  'BracketLeft',\n  'BracketRight',\n  'Backslash', // May be labeled #~ on UK 102 keyboard\n  'KeyA', // AZERTY keyboard: labeled 'q'\n  'KeyS',\n  'KeyD',\n  'KeyF',\n  'KeyG',\n  'KeyH',\n  'KeyJ',\n  'KeyK',\n  'KeyL',\n  'Semicolon',\n  'Quote',\n  'IntlBackslash', // QWERTZ keyboard '><'\n  'KeyZ', // AZERTY: 'w', QWERTZ: 'y'\n  'KeyX',\n  'KeyC',\n  'KeyV',\n  'KeyB',\n  'KeyN',\n  'KeyM',\n  'Comma',\n  'Period',\n  'Slash',\n  'IntlRo', // Japanse keyboard '\\ろ'\n\n  'Space',\n\n  'Numpad0',\n  'Numpad1',\n  'Numpad2',\n  'Numpad3',\n  'Numpad4',\n  'Numpad5',\n  'Numpad6',\n  'Numpad7',\n  'Numpad8',\n  'Numpad9',\n  'NumpadAdd',\n  'NumpadComma',\n  'NumpadDecimal',\n  'NumpadDivide',\n  'NumpadEqual',\n  'NumpadHash',\n  'NumpadMultiply',\n  'NumpadParenLeft',\n  'NumpadParenRight',\n  'NumpadStar',\n  'NumpadSubstract',\n]);\n\nexport function mightProducePrintableCharacter(evt: KeyboardEvent): boolean {\n  if (evt.ctrlKey || evt.metaKey) {\n    // ignore ctrl/cmd-combination but not shift/alt-combinations\n    return false;\n  }\n\n  // https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/key/Key_Values\n  if (evt.key === 'Dead') return false;\n\n  // When issued via a composition, the `code` field is empty\n  if (evt.code === '') return true;\n\n  return PRINTABLE_KEYCODE.has(evt.code);\n}\n\n/**\n * Create a normalized representation of a keyboard event,\n * i.e., key code and modifier keys. For example:\n * - `ctrl+Shift+alt+[KeyF]`\n *\n * Note: the key code corresponds to a physical key, e.g. 'KeyQ' is\n * the key labeled 'A' on a French keyboard\n *\n */\nfunction keyboardEventToString(evt: KeyboardEvent): string {\n  evt = normalizeKeyboardEvent(evt);\n\n  const modifiers = [];\n\n  if (evt.ctrlKey) modifiers.push('ctrl');\n  if (evt.metaKey) modifiers.push('meta');\n  if (evt.altKey) modifiers.push('alt');\n  if (evt.shiftKey) modifiers.push('shift');\n\n  // If no modifiers, simply return the key name\n  if (modifiers.length === 0) return '[' + evt.code + ']';\n\n  modifiers.push('[' + evt.code + ']');\n\n  return modifiers.join('+');\n}\n\nexport interface KeyboardDelegate {\n  cancelComposition: () => void;\n  blur: () => void;\n  focus: () => void;\n  hasFocus: () => boolean;\n  setValue: (value: string) => void;\n  setAriaLabel: (value: string) => void;\n  moveTo: (x: number, y: number) => void;\n}\n\n/**\n * Setup to capture the keyboard events from a `TextArea` and redispatch them to\n * handlers.\n *\n * In general, commands (arrows, delete, etc..) should be handled\n * in the `keystroke()` handler while text input should be handled in\n * `typedtext()`.\n *\n * @param {HTMLElement} textarea A `TextArea` element that will capture the keyboard\n * events. While this element will usually be a `TextArea`, it could be any\n * element that is focusable and can receive keyboard events.\n * @param {Object.<string, any>} handlers\n * @param {function} handlers.keystroke invoked on a key down event, including\n * for special keys such as ESC, arrow keys, tab, etc... and their variants\n * with modifiers.\n * @param {function} handlers.typedtext invoked on a keypress or other events\n * when a key corresponding to a character has been pressed. This include `a-z`,\n * `0-9`, `{}`, `^_()`, etc...\n * This does not include arrow keys, tab, etc... but does include 'space'\n * When a 'character' key is pressed, both `keystroke()` and `typedtext()` will\n * be invoked. When a control/function key is pressed, only `keystroke()` will\n * be invoked. In some cases, for example when using input methods or entering\n * emoji, only `typedtext()` will be invoked.\n */\nexport function delegateKeyboardEvents(\n  textarea: HTMLTextAreaElement,\n  handlers: {\n    typedText: (text: string) => void;\n    cut: (ev: ClipboardEvent) => void;\n    copy: (ev: ClipboardEvent) => void;\n    paste: (ev: ClipboardEvent) => void;\n    keystroke: (keystroke: string, ev: KeyboardEvent) => boolean;\n    focus: () => void;\n    blur: () => void;\n    compositionStart: (composition: string) => void;\n    compositionUpdate: (composition: string) => void;\n    compositionEnd: (composition: string) => void;\n  }\n): KeyboardDelegate {\n  let keydownEvent = null;\n  let keypressEvent = null;\n  let compositionInProgress = false;\n  let focusInProgress = false;\n  let blurInProgress = false;\n\n  // This callback is invoked after a keyboard event has been processed\n  // by the textarea\n  let callbackTimeoutID;\n  function defer(cb: () => void): void {\n    clearTimeout(callbackTimeoutID);\n    callbackTimeoutID = setTimeout(() => {\n      clearTimeout(callbackTimeoutID);\n      cb();\n    });\n  }\n\n  function handleTypedText(): void {\n    // Some browsers (Firefox, Opera) fire a keypress event for commands\n    // such as cmd+C where there might be a non-empty selection.\n    // We need to ignore these.\n    if (textarea.selectionStart !== textarea.selectionEnd) return;\n\n    const text = textarea.value;\n    textarea.value = '';\n    if (text.length > 0) handlers.typedText(text);\n  }\n\n  const target = textarea;\n\n  target.addEventListener(\n    'keydown',\n    (event: KeyboardEvent): void => {\n      // \"Process\" key indicates commit of IME session (on Firefox)\n      // It's handled with compositionEnd so it can be safely ignored\n      if (\n        compositionInProgress ||\n        event.key === 'Process' ||\n        event.code === 'CapsLock' ||\n        /(Control|Meta|Alt|Shift)(Left|Right)/.test(event.code)\n      ) {\n        keydownEvent = null;\n        return;\n      }\n\n      keydownEvent = event;\n      keypressEvent = null;\n      if (!handlers.keystroke(keyboardEventToString(event), event)) {\n        keydownEvent = null;\n        textarea.value = '';\n      }\n    },\n    true\n  );\n  target.addEventListener(\n    'keypress',\n    (event) => {\n      if (compositionInProgress) return;\n      // If this is not the first keypress after a keydown, that is,\n      // if this is a repeated keystroke, call the keystroke handler.\n      if (!compositionInProgress) {\n        if (keydownEvent && keypressEvent) {\n          handlers.keystroke(keyboardEventToString(keydownEvent), keydownEvent);\n        }\n\n        keypressEvent = event;\n        defer(handleTypedText);\n      }\n    },\n    true\n  );\n  target.addEventListener(\n    'keyup',\n    () => {\n      if (compositionInProgress) return;\n      // If we've received a keydown, but no keypress, check what's in the\n      // textarea field.\n      if (keydownEvent && !keypressEvent) {\n        handleTypedText();\n      }\n    },\n    true\n  );\n  target.addEventListener(\n    'paste',\n    (event: ClipboardEvent) => {\n      // In some cases (Linux browsers), the text area might not be focused\n      // when doing a middle-click paste command.\n      textarea.focus();\n      textarea.value = '';\n      handlers.paste(event);\n    },\n    true\n  );\n  target.addEventListener('cut', (ev) => handlers.cut(ev), true);\n  target.addEventListener('copy', (ev) => handlers.copy(ev), true);\n  target.addEventListener(\n    'blur',\n    (event) => {\n      // If the relatedTarget (the element that is gaining the focus)\n      // is contained in our shadow host, ignore the blur event\n      if (\n        event.relatedTarget ===\n        (((event.target as HTMLElement).getRootNode() as any) as ShadowRoot)\n          .host\n      ) {\n        event.preventDefault();\n        event.stopPropagation();\n        return;\n      }\n\n      if (blurInProgress || focusInProgress) return;\n\n      blurInProgress = true;\n      keydownEvent = null;\n      keypressEvent = null;\n      if (handlers.blur) handlers.blur();\n      blurInProgress = false;\n    },\n    true\n  );\n  target.addEventListener(\n    'focus',\n    (_ev) => {\n      if (blurInProgress || focusInProgress) return;\n\n      focusInProgress = true;\n      if (handlers.focus) handlers.focus();\n      focusInProgress = false;\n    },\n    true\n  );\n  target.addEventListener(\n    'compositionstart',\n    (event: CompositionEvent) => {\n      compositionInProgress = true;\n      textarea.value = '';\n\n      if (handlers.compositionStart) {\n        handlers.compositionStart(event.data);\n      }\n    },\n    true\n  );\n  target.addEventListener(\n    'compositionupdate',\n    (ev: CompositionEvent) => {\n      if (!compositionInProgress) return;\n      if (handlers.compositionUpdate) handlers.compositionUpdate(ev.data);\n    },\n    true\n  );\n  target.addEventListener(\n    'compositionend',\n    (ev: CompositionEvent) => {\n      textarea.value = '';\n      if (!compositionInProgress) return;\n      compositionInProgress = false;\n      if (handlers.compositionEnd) handlers.compositionEnd(ev.data);\n    },\n    true\n  );\n\n  // The `input` handler gets called when the field is changed,\n  // but no other relevant events have been triggered\n  // for example with emoji input...\n  target.addEventListener('input', (ev: InputEvent) => {\n    if (compositionInProgress) return;\n    // If this was an `input` event sent as a result of a commit of\n    // IME, ignore it.\n    // (This is what FireFox does, even though the spec says it shouldn't happen)\n    // See https://github.com/w3c/uievents/issues/202\n    if (ev.inputType === 'insertCompositionText') return;\n\n    // Paste is handled in paste handler\n    if (ev.inputType === 'insertFromPaste') {\n      ev.preventDefault();\n      ev.stopPropagation();\n      return;\n    }\n\n    defer(handleTypedText);\n  });\n\n  return {\n    cancelComposition: (): void => {\n      const savedBlur = handlers.blur;\n      const savedFocus = handlers.focus;\n      handlers.blur = null;\n      handlers.focus = null;\n      textarea.blur();\n      textarea.focus();\n      handlers.blur = savedBlur;\n      handlers.focus = savedFocus;\n    },\n    blur: (): void => {\n      if (typeof textarea.blur === 'function') {\n        textarea.blur();\n      }\n    },\n    focus: (): void => {\n      if (typeof textarea.focus === 'function') {\n        textarea.focus();\n      }\n    },\n    hasFocus: (): boolean => {\n      return deepActiveElement() === textarea;\n    },\n    setValue: (value: string): void => {\n      if (value) {\n        textarea.value = value;\n        // The textarea may be a span (on mobile, for example), so check that\n        // it has a select() before calling it.\n        if (deepActiveElement() === textarea && textarea.select) {\n          textarea.select();\n        }\n      } else {\n        textarea.value = '';\n        textarea.setAttribute('aria-label', '');\n      }\n    },\n    setAriaLabel: (value: string): void => {\n      textarea.setAttribute('aria-label', 'after: ' + value);\n    },\n    moveTo: (x: number, y: number): void => {\n      textarea.style.top = `${y}px`;\n      textarea.style.left = `${x}px`;\n    },\n  };\n}\n\nfunction deepActiveElement(): Element | null {\n  let a = document.activeElement;\n  while (a?.shadowRoot?.activeElement) {\n    a = a.shadowRoot.activeElement;\n  }\n\n  return a;\n}\n\nexport function eventToChar(evt: KeyboardEvent): string {\n  if (!evt) return '';\n  let result: string;\n  if (evt.key === 'Unidentified') {\n    // On Android, the evt.key seems to always be 'Unidentified'.\n    // Get the value entered in the event target\n    if (evt.target) {\n      result = (evt.target as HTMLInputElement).value;\n    }\n  }\n\n  result = result ?? evt.key ?? evt.code;\n  if (\n    /^(Dead|Return|Enter|Tab|Escape|Delete|PageUp|PageDown|Home|End|Help|ArrowLeft|ArrowRight|ArrowUp|ArrowDown)$/.test(\n      result\n    )\n  ) {\n    result = '';\n  }\n\n  return result;\n}\n","import type { Selection } from '../public/mathfield';\nimport { UndoStateChangeListener } from '../public/options';\nimport type { ModelPrivate } from '../editor-model/model-private';\nimport { Atom } from '../core/atom-class';\nimport { ModeEditor } from '../editor-mathfield/mode-editor';\n\nexport type UndoRecord = {\n  latex: string;\n  selection: Selection;\n};\n\ninterface UndoOptions {\n  onUndoStateWillChange?: UndoStateChangeListener;\n  onUndoStateDidChange?: UndoStateChangeListener;\n  suppressChangeNotifications?: boolean;\n}\n\nexport class UndoManager {\n  private model: ModelPrivate;\n  private get maximumDepth() {\n    return 1000;\n  } // Maximum number of undo/redo states\n\n  private record = false;\n  private canCoalesce = false;\n  private stack: UndoRecord[]; // Stack of undo/redo states\n  private index: number; // Index pointing to the undo/redo stack\n\n  constructor(model: ModelPrivate) {\n    this.model = model;\n    this.reset();\n  }\n\n  reset(): void {\n    this.stack = [];\n    this.index = -1;\n  }\n\n  startRecording(): void {\n    this.record = true;\n  }\n\n  canUndo(): boolean {\n    return this.index > 0;\n  }\n\n  canRedo(): boolean {\n    return this.index !== this.stack.length - 1;\n  }\n\n  undo(options: UndoOptions): void {\n    if (this.canUndo()) {\n      if (typeof options?.onUndoStateWillChange === 'function') {\n        options.onUndoStateWillChange(this.model.mathfield, 'undo');\n      }\n\n      this.restore(this.stack[this.index - 1], options);\n      this.index -= 1;\n      if (options && typeof options.onUndoStateDidChange === 'function') {\n        options.onUndoStateDidChange(this.model.mathfield, 'undo');\n      }\n\n      this.canCoalesce = false;\n    }\n  }\n\n  redo(options: UndoOptions): void {\n    if (this.canRedo()) {\n      if (typeof options?.onUndoStateWillChange === 'function') {\n        options.onUndoStateWillChange(this.model.mathfield, 'redo');\n      }\n\n      this.index += 1;\n      this.restore(this.stack[this.index], options);\n      if (options && typeof options.onUndoStateDidChange === 'function') {\n        options.onUndoStateDidChange(this.model.mathfield, 'redo');\n      }\n\n      this.canCoalesce = false;\n    }\n  }\n\n  pop(): void {\n    if (this.canUndo()) {\n      this.index -= 1;\n      this.stack.pop();\n    }\n  }\n\n  /**\n   * Push a snapshot of the content and selection of the mathfield onto the\n   * undo stack so that it can potentially be reverted to later.\n   */\n  snapshot(options: UndoOptions): void {\n    if (!this.record) return;\n\n    if (typeof options?.onUndoStateWillChange === 'function') {\n      options.onUndoStateWillChange(this.model.mathfield, 'snapshot');\n    }\n\n    // Drop any entries that are part of the redo stack\n    this.stack.splice(this.index + 1, this.stack.length - this.index - 1);\n    // Add a new entry\n    this.stack.push({\n      latex: Atom.toLatex(this.model.root, { expandMacro: false }),\n      selection: this.model.selection,\n    });\n\n    this.index++;\n    // If we've reached the maximum number of undo operations, forget the\n    // oldest one.\n    if (this.stack.length > this.maximumDepth) {\n      this.stack.shift();\n    }\n\n    if (options && typeof options.onUndoStateDidChange === 'function') {\n      options.onUndoStateDidChange(this.model.mathfield, 'snapshot');\n    }\n\n    this.canCoalesce = false;\n  }\n\n  snapshotAndCoalesce(options: UndoOptions): void {\n    if (this.canCoalesce) {\n      this.pop();\n    }\n\n    this.snapshot(options);\n    this.canCoalesce = true;\n  }\n\n  /**\n   * Return an object capturing the state of the content and selection of the\n   * mathfield. Pass this object to restore() to reset the value of the math\n   * field to this saved value. This does not affect the undo stack.\n   */\n  save(): UndoRecord {\n    return {\n      latex: Atom.toLatex(this.model.root, { expandMacro: false }),\n      selection: this.model.selection,\n    };\n  }\n\n  /**\n   * Set the content and selection of the mathfield to a value previously\n   * captured with save() or stored in the undo stack.\n   * This does not affect the undo stack.\n   */\n  restore(state: UndoRecord, options: UndoOptions): void {\n    const wasSuppressing = this.model.suppressChangeNotifications;\n    if (options.suppressChangeNotifications !== undefined) {\n      this.model.suppressChangeNotifications =\n        options.suppressChangeNotifications;\n    }\n\n    // Restore the content\n    ModeEditor.insert('math', this.model, state ? state.latex : '', {\n      ...options,\n      format: 'latex',\n      insertionMode: 'replaceAll',\n      selectionMode: 'after',\n      smartFence: false,\n    });\n\n    // Restore the selection\n    this.model.selection = state ? state.selection : { ranges: [[0, 0]] };\n\n    this.model.suppressChangeNotifications = wasSuppressing;\n  }\n}\n","export const STRINGS = {\n  en: {\n    'keyboard.tooltip.functions': 'Functions',\n    'keyboard.tooltip.symbols': 'Symbols',\n    'keyboard.tooltip.greek': 'Greek Letters',\n    'keyboard.tooltip.command': 'LaTeX Command Mode',\n    'keyboard.tooltip.numeric': 'Numeric',\n    'keyboard.tooltip.roman': 'Roman Letters',\n    'tooltip.copy to clipboard': 'Copy to Clipboard',\n    'tooltip.redo': 'Redo',\n    'tooltip.toggle virtual keyboard': 'Toggle Virtual Keyboard',\n    'tooltip.undo': 'Undo',\n  },\n  ar: {\n    'keyboard.tooltip.functions': 'مهام',\n    'keyboard.tooltip.symbols': 'حرف او رمز',\n    'keyboard.tooltip.greek': 'حروف يونانية',\n    'keyboard.tooltip.command': 'حالة تلقي الأوامر اللاتك',\n    'keyboard.tooltip.numeric': 'الرقمية',\n    'keyboard.tooltip.roman': 'رموز الاحرف الرومانية',\n    'tooltip.copy to clipboard': 'نسخ إلى الحافظة',\n    'tooltip.redo': 'الإعادة',\n    'tooltip.toggle virtual keyboard': 'تبديل لوحة المفاتيح الإفتراضية',\n    'tooltip.undo': 'إلغاء',\n  },\n  de: {\n    'keyboard.tooltip.functions': 'Funktionen',\n    'keyboard.tooltip.symbols': 'Symbole',\n    'keyboard.tooltip.greek': 'Griechische Buchstaben',\n    'keyboard.tooltip.command': 'LaTeX-Befehlsmodus',\n    'keyboard.tooltip.numeric': 'Numerisch',\n    'keyboard.tooltip.roman': 'Römische Buchstaben',\n    'tooltip.copy to clipboard': 'In die Zwischenablage kopieren',\n    'tooltip.redo': 'Wiederholen',\n    'tooltip.toggle virtual keyboard': 'Virtuelle Tastatur umschalten',\n    'tooltip.undo': 'Widerrufen',\n  },\n  el: {\n    'keyboard.tooltip.functions': 'συναρτήσεις',\n    'keyboard.tooltip.symbols': 'σύμβολα',\n    'keyboard.tooltip.greek': 'ελληνικά γράμματα',\n    'keyboard.tooltip.command': 'Λειτουργία εντολών LaTeX',\n    'keyboard.tooltip.numeric': 'Αριθμητικός',\n    'keyboard.tooltip.roman': 'Ρωμαϊκά γράμματα',\n    'tooltip.copy to clipboard': 'Αντιγραφή στο πρόχειρο',\n    'tooltip.redo': 'Ξανακάνω',\n    'tooltip.toggle virtual keyboard': 'Εναλλαγή εικονικού πληκτρολογίου',\n    'tooltip.undo': 'Ξεκάνω',\n  },\n  es: {\n    'keyboard.tooltip.functions': 'Funciones',\n    'keyboard.tooltip.symbols': 'Símbolos',\n    'keyboard.tooltip.greek': 'Letras griegas',\n    'keyboard.tooltip.command': 'Modo Comando LaTeX',\n    'keyboard.tooltip.numeric': 'Numérico',\n    'keyboard.tooltip.roman': 'Letras romanas',\n    'tooltip.copy to clipboard': 'Copiar al portapapeles',\n    'tooltip.redo': 'Rehacer',\n    'tooltip.toggle virtual keyboard': 'Alternar teclado virtual',\n    'tooltip.undo': 'Deshacer',\n  },\n  fa: {\n    'keyboard.tooltip.functions': 'توابع',\n    'keyboard.tooltip.symbols': 'نمادها',\n    'keyboard.tooltip.greek': 'حروف یونانی',\n    'keyboard.tooltip.command': 'حالت دستور لاتک',\n    'keyboard.tooltip.numeric': 'عددی',\n    'keyboard.tooltip.roman': 'حروف رومی',\n    'tooltip.copy to clipboard': 'کپی به کلیپبورد',\n    'tooltip.redo': 'بازگشت به بعد',\n    'tooltip.toggle virtual keyboard': 'نمایش/نهفتن کیبورد مجازی',\n    'tooltip.undo': 'بازگشت به قبل',\n  },\n  fr: {\n    'keyboard.tooltip.functions': 'Fonctions',\n    'keyboard.tooltip.symbols': 'Symboles',\n    'keyboard.tooltip.greek': 'Lettres grecques',\n    'keyboard.tooltip.command': 'Mode de commandes LaTeX',\n    'keyboard.tooltip.numeric': 'Numérique',\n    'keyboard.tooltip.roman': 'Lettres romaines',\n    'tooltip.copy to clipboard': 'Copier dans le presse-papiers',\n    'tooltip.redo': 'Rétablir',\n    'tooltip.toggle virtual keyboard': 'Afficher/Masquer le clavier virtuel',\n    'tooltip.undo': 'Annuler',\n  },\n  it: {\n    'keyboard.tooltip.functions': 'Funzioni',\n    'keyboard.tooltip.symbols': 'Simboli',\n    'keyboard.tooltip.greek': 'Lettere greche',\n    'keyboard.tooltip.command': 'Modalità di comando LaTeX',\n    'keyboard.tooltip.numeric': 'Numerico',\n    'keyboard.tooltip.roman': 'Lettere romane',\n    'tooltip.copy to clipboard': 'Copia negli appunti',\n    'tooltip.redo': 'Rifare',\n    'tooltip.toggle virtual keyboard':\n      'Attiva / disattiva la tastiera virtuale',\n    'tooltip.undo': 'Disfare',\n  },\n  ja: {\n    'keyboard.tooltip.functions': '関数',\n    'keyboard.tooltip.symbols': 'シンボル',\n    'keyboard.tooltip.greek': 'ギリシャ文字',\n    'keyboard.tooltip.command': 'LaTeXコマンドモード',\n    'keyboard.tooltip.numeric': '数値',\n    'keyboard.tooltip.roman': 'ローマ字',\n    'tooltip.copy to clipboard': 'クリップボードにコピー',\n    'tooltip.redo': 'やり直し',\n    'tooltip.toggle virtual keyboard': '仮想キーボードの切り替え',\n    'tooltip.undo': '元に戻す',\n  },\n  pl: {\n    'keyboard.tooltip.functions': 'Funkcje',\n    'keyboard.tooltip.symbols': 'Symbolika',\n    'keyboard.tooltip.greek': 'Litery greckie',\n    'keyboard.tooltip.command': 'Tryb poleceń LaTeX',\n    'keyboard.tooltip.numeric': 'Numeryczne',\n    'keyboard.tooltip.roman': 'Litery rzymskie',\n    'tooltip.copy to clipboard': 'Kopiuj do Schowka',\n    'tooltip.redo': 'Przywróć',\n    'tooltip.toggle virtual keyboard': 'Przełącz wirtualną klawiaturę',\n    'tooltip.undo': 'Cofnij',\n  },\n  ru: {\n    'keyboard.tooltip.functions': 'Функции',\n    'keyboard.tooltip.symbols': 'Символы',\n    'keyboard.tooltip.greek': 'Греческие буквы',\n    'keyboard.tooltip.command': 'Режим командной строки LaTeX',\n    'keyboard.tooltip.numeric': 'числовой',\n    'keyboard.tooltip.roman': 'Латинские буквы',\n    'tooltip.copy to clipboard': 'Скопировать в буфер обмена',\n    'tooltip.redo': 'переделывать',\n    'tooltip.toggle virtual keyboard': 'Переключить виртуальную клавиатуру',\n    'tooltip.undo': 'расстегивать',\n  },\n};\n","// Import { Keys } from '../types-utils';\nimport { STRINGS } from './l10n-strings';\n\nexport const l10n: {\n  locale?: string;\n  _ordinalEnglishPluralCategories?: string[];\n  _ordinalPluralCategories?: string[];\n  _ordinalEnglish?: Intl.PluralRules;\n  _ordinal?: Intl.PluralRules;\n  _cardinalPluralCategories?: string[];\n  _cardinalEnglishPluralCategories?: string[];\n  _cardinalEnglish?: Intl.PluralRules;\n  _cardinal?: Intl.PluralRules;\n  _locale?: string;\n  strings?: Record<string, Record<string, string>>;\n  plural?(value, s, options): Intl.PluralRules;\n  ordinal?(value, s, options): Intl.PluralRules;\n  cardinal?(value, s, options): Intl.PluralRules;\n  merge?(\n    locale: string | Record<string, Record<string, string>>,\n    strings?: Record<string, string>\n  ): void;\n} = {};\n\nl10n.plural = function (value: number, s: string, options): Intl.PluralRules {\n  options = options ?? {};\n  options.type = options.type ?? 'cardinal';\n  const language = l10n.locale.slice(0, 2);\n  const rules = options.type === 'ordinal' ? l10n._ordinal : l10n._cardinal;\n  let rule =\n    options.type === 'ordinal'\n      ? l10n._ordinalPluralCategories.indexOf(rules.select(value))\n      : l10n._cardinalPluralCategories.indexOf(rules.select(value));\n\n  let result;\n  if (l10n.strings[l10n.locale]) result = l10n.strings[l10n.locale][s];\n  if (!result && l10n.strings[language]) result = l10n.strings[language][s];\n  if (!result) {\n    result = l10n.strings.en[s];\n    if (!result) result = s;\n    rule =\n      options.type === 'ordinal'\n        ? l10n._ordinalPluralCategories.indexOf(\n            l10n._ordinalEnglish.select(value)\n          )\n        : l10n._cardinalPluralCategories.indexOf(\n            l10n._cardinalEnglish.select(value)\n          );\n  }\n\n  return result.split(';')[rule] || result.split(';')[0];\n};\n\n/*\n * Two forms for this function:\n * - merge(locale, strings)\n * Merge a dictionary of keys -> values for the specified locale\n * - merge(strings)\n * Merge a dictionary of locale code -> dictionary of keys -> values\n *\n */\nl10n.merge = function (\n  locale: string | Record<string, Record<string, string>>,\n  strings?: Record<string, string>\n): void {\n  if (locale && strings) {\n    const savedLocale = l10n._locale;\n    l10n.locale = locale as string; // Load the necessary json file\n\n    l10n.strings[locale as string] = {\n      ...l10n.strings[locale as string],\n      ...strings,\n    };\n    l10n.locale = savedLocale;\n  } else if (locale && !strings) {\n    for (const l of Object.keys(\n      locale as Record<string, Record<string, string>>\n    )) {\n      l10n.merge(l, locale[l]);\n    }\n  }\n};\n\n// Add getter and setter for the _locale property of l10n\nObject.defineProperty(l10n, 'locale', {\n  set(locale) {\n    l10n._locale = locale;\n    l10n._ordinal = null;\n    l10n._cardinal = null;\n  },\n  get() {\n    // Use the browser defined language as the default language,\n    // \"english\" if not running in a browser (node.js)\n    if (!l10n._locale) {\n      // Use the setter, which will load the necessary .json files.\n      l10n._locale = navigator?.language.slice(0, 5) ?? 'en';\n    }\n\n    return l10n._locale;\n  },\n});\n\nObject.defineProperty(l10n, 'ordinal', {\n  get() {\n    if (!l10n._ordinal) {\n      l10n._ordinalEnglish = new Intl.PluralRules('en', {\n        type: 'ordinal',\n      });\n      l10n._ordinalEnglishPluralCategories = l10n._ordinalEnglish.resolvedOptions().pluralCategories;\n      l10n._ordinal = new Intl.PluralRules(l10n.locale, {\n        type: 'ordinal',\n      });\n      l10n._ordinalPluralCategories = l10n._ordinal.resolvedOptions().pluralCategories;\n      //    \"zero\", \"one\", \"two\", \"few\", \"many\" and \"other\"\n    }\n\n    return l10n._ordinal;\n  },\n});\n\nObject.defineProperty(l10n, 'cardinal', {\n  get() {\n    if (!l10n._cardinal) {\n      l10n._cardinalEnglish = new Intl.PluralRules('en', {\n        type: 'cardinal',\n      });\n      l10n._cardinalEnglishPluralCategories = l10n._cardinalEnglish.resolvedOptions().pluralCategories;\n      l10n._cardinal = new Intl.PluralRules(l10n.locale, {\n        type: 'cardinal',\n      });\n      l10n._cardinalPluralCategories = l10n._ordinal.resolvedOptions().pluralCategories;\n    }\n\n    return l10n._cardinal;\n  },\n});\n\nl10n.strings = STRINGS;\n\n/**\n * Return a localised string for the `key`.\n */\nexport function localize(key: string): string {\n  const language = l10n.locale.slice(0, 2);\n\n  let result = '';\n\n  // Attempt to find a match for the current locale\n  if (l10n.strings[l10n.locale]) result = l10n.strings[l10n.locale][key];\n  // If none is found, attempt to find a match for the language\n  if (!result && l10n.strings[language]) result = l10n.strings[language][key];\n  // If none is found, try english\n  if (!result) result = l10n.strings.en[key];\n  // If that didn't work, return undefined\n  if (!result) return undefined;\n\n  return result;\n}\n","import { Atom, Branch } from '../core/atom';\nimport { parseLatex } from '../core/parser';\nimport type {\n  FindOptions,\n  Range,\n  ReplacementFunction,\n} from '../public/mathfield';\nimport { ModelPrivate } from './model-private';\n\nfunction match(pattern: string | RegExp, latex: string): boolean {\n  if (typeof pattern === 'string') {\n    return pattern === latex;\n  }\n\n  return pattern.test(latex);\n}\n\nfunction findInBranch(\n  model: ModelPrivate,\n  atom: Atom,\n  branchName: Branch,\n  value: string | RegExp,\n  options: FindOptions\n): Range[] {\n  const branch = atom.branch(branchName);\n  if (!branch) return [];\n  const result = [];\n  let { length } = branch;\n  // For each length...\n  while (length > 0) {\n    // Consider each possible position in the branch\n    for (let i = 1; i < branch.length - length + 1; i++) {\n      const latex = Atom.toLatex(branch.slice(i, i + length), {\n        expandMacro: false,\n      });\n      if (match(value, latex)) {\n        result.push([\n          model.offsetOf(branch[i].leftSibling),\n          model.offsetOf(branch[i + length - 1]),\n        ]);\n        i += length;\n      }\n    }\n\n    length--;\n  }\n\n  return branch.reduce(\n    (acc, x) => [...acc, ...findInAtom(model, x, value, options)],\n    result\n  );\n}\n\nfunction findInAtom(\n  model: ModelPrivate,\n  atom: Atom,\n  value: string | RegExp,\n  options: FindOptions\n): Range[] {\n  if (atom.type === 'first') return [];\n\n  // If the mode doesn't match, ignore this atom\n  if (options?.mode && options.mode !== atom.mode) return [];\n\n  return atom.branches.reduce((acc, x) => {\n    return [...acc, ...findInBranch(model, atom, x, value, options)];\n  }, []);\n}\n\nexport function find(\n  model: ModelPrivate,\n  value: string | RegExp,\n  options: FindOptions\n): Range[] {\n  return findInBranch(model, model.root, 'body', value, options).sort(\n    (a, b) => {\n      if (b[0] === a[0]) {\n        return b[1] - a[1];\n      }\n\n      return b[0] - a[0];\n    }\n  );\n}\n\nfunction replaceInBranch(\n  model: ModelPrivate,\n  atom: Atom,\n  branchName: Branch,\n  pattern: string | RegExp,\n  replacement: string | ReplacementFunction,\n  options: FindOptions\n): void {\n  const branch = atom.branch(branchName);\n  if (!branch) return;\n\n  let i = 1;\n  while (i < branch.length) {\n    let length = branch.length - i;\n    while (length > 0) {\n      let matched = false;\n      const latex = Atom.toLatex(branch.slice(i, i + length), {\n        expandMacro: false,\n      });\n      const replacementArgs: any = { latex };\n      if (typeof pattern === 'string' && latex === pattern) {\n        matched = true;\n      } else if (pattern instanceof RegExp) {\n        const match = latex.match(pattern);\n        if (match !== null) {\n          matched = true;\n          if (match.length > 0) {\n            replacementArgs.p = [...match];\n          }\n\n          replacementArgs.groups = match.groups;\n        }\n      }\n\n      if (matched) {\n        // Remove the atoms that matched\n        for (let j = i + length - 1; j >= i; j--) {\n          atom.removeChild(branch[j]);\n        }\n\n        let replacementString: string;\n        if (typeof replacement === 'string') {\n          replacementString = replacement;\n          if (replacementArgs.p) {\n            replacementArgs.p.forEach((x, index) => {\n              if (typeof x === 'string') {\n                replacementString = replacementString.replace(\n                  '$' + Number(index).toString(),\n                  x\n                );\n              }\n            });\n          }\n\n          if (replacementArgs.groups) {\n            Object.keys(replacementArgs.groups).forEach((x) => {\n              if (typeof x === 'string') {\n                replacementString = replacementString.replace(\n                  '$' + x,\n                  replacementArgs.groups[x]\n                );\n              }\n            });\n          }\n\n          replacementString = replacementString.replace('$$', '$');\n        } else {\n          replacementString = replacement(replacementArgs);\n        }\n\n        const lastChild = atom.addChildrenAfter(\n          parseLatex(replacementString, atom.mode),\n          branch[i - 1]\n        );\n        i = branch.indexOf(lastChild) + 1;\n        length = branch.length - i;\n      } else {\n        length--;\n      }\n    }\n\n    i++;\n  }\n\n  branch.forEach((x) => replaceInAtom(model, x, pattern, replacement, options));\n}\n\nfunction replaceInAtom(\n  model: ModelPrivate,\n  atom: Atom,\n  pattern: string | RegExp,\n  replacement: string | ReplacementFunction,\n  options: FindOptions\n): void {\n  if (atom.type === 'first') return;\n\n  // If the mode doesn't match, ignore this atom\n  if (options?.mode && options.mode !== atom.mode) return;\n\n  atom.branches.forEach((x) =>\n    replaceInBranch(model, atom, x, pattern, replacement, options)\n  );\n}\n\nexport function replace(\n  model: ModelPrivate,\n  pattern: string | RegExp,\n  replacement: string | ReplacementFunction,\n  options: FindOptions\n): void {\n  replaceInBranch(model, model.root, 'body', pattern, replacement, options);\n\n  model.position = model.normalizeOffset(model.position);\n}\n","import type { TextToSpeechOptions, MathfieldOptions } from '../public/options';\nimport type { SpeechScope } from '../public/commands';\n\nimport type { Atom } from '../core/atom';\n\nimport type { MathfieldPrivate } from '../editor-mathfield/mathfield-private';\n\nimport { atomToSpeakableText } from './atom-to-speakable-text';\nimport { register as registerCommand } from './commands';\nimport { render } from '../editor-mathfield/render';\n\ndeclare global {\n  interface Window {\n    AWS: any;\n    mathlive: any;\n  }\n}\n\nexport function speakableText(\n  speechOptions: Required<TextToSpeechOptions>,\n  prefix: string,\n  atoms: Atom | Atom[]\n): string {\n  const options: TextToSpeechOptions = {\n    ...speechOptions,\n    textToSpeechMarkup: '',\n    textToSpeechRulesOptions: {\n      ...speechOptions.textToSpeechRulesOptions,\n      markup: 'none',\n    },\n  };\n  return prefix + atomToSpeakableText(atoms, options);\n}\n\n/**\n *\n * Speak some part of the expression, either with or without synchronized highlighting.\n *\n * @param speakOptions.withHighlighting - If true, synchronized\n * highlighting of speech will happen (if possible). Default is false.\n */\n\n// @revisit: register 'speak' command with mathfield (to get access to SpeechOptions, which need to be passed down)\nregisterCommand(\n  {\n    speak: (\n      mathfield: MathfieldPrivate,\n      scope: SpeechScope,\n      options: { withHighlighting: boolean }\n    ): boolean => {\n      return speak(mathfield, scope, options);\n    },\n  },\n  { target: 'mathfield', category: 'speech' }\n);\n\nfunction speak(\n  mathfield: MathfieldPrivate,\n  scope: SpeechScope,\n  speakOptions: { withHighlighting: boolean }\n): boolean {\n  speakOptions = speakOptions ?? { withHighlighting: false };\n  const { model } = mathfield;\n  function getAtoms(mathfield: MathfieldPrivate, scope: SpeechScope): Atom[] {\n    let result = null;\n    switch (scope) {\n      case 'all':\n        result = model.root;\n        break;\n      case 'selection':\n        result = model.getAtoms(model.selection);\n        break;\n      case 'left': {\n        result = model.getAtoms(\n          model.offsetOf(model.at(model.position).firstSibling),\n          model.position\n        );\n        break;\n      }\n\n      case 'right': {\n        result = model.getAtoms(\n          model.position,\n          model.offsetOf(model.at(model.position).lastSibling)\n        );\n        break;\n      }\n\n      case 'group':\n        result = model.getAtoms(model.getSiblingsRange(model.position));\n        break;\n      case 'parent': {\n        const { parent } = model.at(model.position);\n        if (parent && parent.type !== 'root') {\n          result = parent;\n        }\n\n        break;\n      }\n\n      // Case 'start':\n      // case 'end':\n      // not yet implemented\n      // break;\n      default:\n        break;\n    }\n\n    return result;\n  }\n\n  function getFailedSpeech(scope: string): string {\n    let result = '';\n    switch (scope) {\n      case 'all':\n        console.log('Internal failure: speak all failed');\n        break;\n      case 'selection':\n        result = 'no selection';\n        break;\n      case 'left':\n        result = 'at start';\n        break;\n      case 'right':\n        result = 'at end';\n        break;\n      case 'group':\n        console.log('Internal failure: speak group failed');\n        break;\n      case 'parent':\n        result = 'no parent';\n        break;\n      default:\n        console.log('unknown speak_ param value: \"' + scope + '\"');\n        break;\n    }\n\n    return result;\n  }\n\n  const atoms = getAtoms(mathfield, scope);\n  if (atoms === null) {\n    mathfield.options.speakHook(getFailedSpeech(scope), mathfield.options);\n    return false;\n  }\n\n  const options = { ...mathfield.options };\n  if (speakOptions.withHighlighting || options.speechEngine === 'amazon') {\n    options.textToSpeechMarkup =\n      window.sre && options.textToSpeechRules === 'sre' ? 'ssml_step' : 'ssml';\n  }\n\n  const text = atomToSpeakableText(atoms, options);\n  if (speakOptions.withHighlighting) {\n    window.mathlive.readAloudMathField = mathfield;\n    render(mathfield, { forHighlighting: true });\n    if (mathfield.options.readAloudHook) {\n      mathfield.options.readAloudHook(mathfield.field, text, mathfield.options);\n    }\n  } else if (mathfield.options.speakHook) {\n    mathfield.options.speakHook(text, options);\n  }\n\n  return false;\n}\n\nexport function defaultSpeakHook(\n  text: string,\n  config?: Partial<MathfieldOptions>\n): void {\n  if (!config && window?.mathlive) {\n    config = window.mathlive.config;\n  }\n\n  config = config ?? {};\n\n  if (!config.speechEngine || config.speechEngine === 'local') {\n    // On ChromeOS: chrome.accessibilityFeatures.spokenFeedback\n    // See also https://developer.chrome.com/apps/tts\n    const utterance = new SpeechSynthesisUtterance(text);\n    if (window) {\n      window.speechSynthesis.speak(utterance);\n    } else {\n      console.log('Speak:', text);\n    }\n  } else if (config.speechEngine === 'amazon') {\n    if (!window || !window.AWS) {\n      console.warn(\n        'AWS SDK not loaded. See https://www.npmjs.com/package/aws-sdk'\n      );\n    } else {\n      const polly = new window.AWS.Polly({ apiVersion: '2016-06-10' });\n      const parameters = {\n        OutputFormat: 'mp3',\n        VoiceId: config.speechEngineVoice,\n        Engine: [\n          'Amy',\n          'Emma',\n          'Brian',\n          'Ivy',\n          'Joanna',\n          'Kendra',\n          'Kimberly',\n          'Salli',\n          'Joey',\n          'Justin',\n          'Matthew',\n        ].includes(config.speechEngineVoice)\n          ? 'neural'\n          : 'standard',\n        // SampleRate: '24000',\n        Text: text,\n        TextType: 'ssml',\n        // SpeechMarkTypes: ['ssml]'\n      };\n      // https://docs.aws.amazon.com/AWSJavaScriptSDK/latest/AWS/Polly.html#synthesizeSpeech-property\n      polly.synthesizeSpeech(parameters, (err, data) => {\n        if (err) {\n          console.warn('polly.synthesizeSpeech() error:', err, err.stack);\n          // Announce('plonk');\n        } else if (data?.AudioStream) {\n          const uInt8Array = new Uint8Array(data.AudioStream);\n          const blob = new Blob([uInt8Array.buffer], {\n            type: 'audio/mpeg',\n          });\n          const url = URL.createObjectURL(blob);\n\n          const audioElement = new Audio(url);\n          audioElement.play().catch((error) => console.log(error));\n        } else {\n          console.log('polly.synthesizeSpeech():', data);\n        }\n      });\n\n      // Can call AWS.Request() on the result of synthesizeSpeech()\n    }\n  } else if (config.speechEngine === 'google') {\n    console.warn(\n      'The Google speech engine is not supported yet. Please come again.'\n    );\n    // @todo: implement support for Google Text-to-Speech API,\n    // using config.speechEngineToken, config.speechEngineVoice and\n    // config.speechEngineAudioConfig\n\n    // curl -H \"Authorization: Bearer \"$(gcloud auth application-default print-access-token) \\\n    //   -H \"Content-Type: application/json; charset=utf-8\" \\\n    //   --data \"{\n    //     'input':{\n    //       'text':'Android is a mobile operating system developed by Google,\n    //          based on the Linux kernel and designed primarily for\n    //          touchscreen mobile devices such as smartphones and tablets.'\n    //     },\n    //     'voice':{\n    //       'languageCode':'en-gb',\n    //       'name':'en-GB-Standard-A',\n    //       'ssmlGender':'FEMALE'\n    //     },\n    //     'audioConfig':{\n    //       'audioEncoding':'MP3'\n    //     }\n    //   }\" \"https://texttospeech.googleapis.com/v1beta1/text:synthesize\" > synthesize-text.txt\n  }\n}\n","import type { TextToSpeechOptions } from '../public/options';\n\nimport { Atom } from '../core/atom';\n\n// Import { atomsToMathML } from '../addons/math-ml';\nimport { speakableText } from './speech';\nimport type { ModelPrivate } from '../editor-model/model-private';\nimport type { MathfieldPrivate } from '../editor-mathfield/mathfield-private';\nimport { AnnounceVerb } from '../editor-model/utils';\n\n/**\n * Given an atom, describe the relationship between the atom\n * and its siblings and their parent.\n */\nfunction relationName(atom: Atom): string {\n  let result: string;\n  if (atom.treeBranch === 'body') {\n    result = {\n      enclose: 'cross out',\n      leftright: 'fence',\n      surd: 'square root',\n      root: 'math field',\n      mop: 'operator', // E.g. `\\operatorname`, a `mop` with a body\n    }[atom.parent.type];\n  } else if (atom.parent.type === 'genfrac') {\n    if (atom.treeBranch === 'above') {\n      return 'numerator';\n    }\n\n    if (atom.treeBranch === 'below') {\n      return 'denominator';\n    }\n  } else if (atom.parent.type === 'surd') {\n    if (atom.treeBranch === 'above') {\n      result = 'index';\n    }\n  } else if (atom.treeBranch === 'superscript') {\n    result = 'superscript';\n  } else if (atom.treeBranch === 'subscript') {\n    result = 'subscript';\n  }\n\n  if (!result) {\n    console.log('unknown relationship');\n  }\n\n  return result ?? 'parent';\n}\n\n/**\n * Announce a change in selection or content via the aria-live region.\n *\n * @param action The action that invoked the change.\n * @param previousPosition The position of the insertion point before the change\n */\nexport function defaultAnnounceHook(\n  mathfield: MathfieldPrivate,\n  action: AnnounceVerb,\n  previousPosition?: number,\n  atoms?: Atom[]\n): void {\n  //* * Fix: the focus is the end of the selection, so it is before where we want it\n  let liveText = '';\n  // Const action = moveAmount > 0 ? \"right\" : \"left\";\n\n  if (action === 'plonk') {\n    // Use this sound to indicate minor errors, for\n    // example when an action has no effect.\n    mathfield.plonkSound?.play().catch((error) => console.warn(error));\n    // As a side effect, reset the keystroke buffer\n    mathfield.resetKeystrokeBuffer();\n  } else if (action === 'delete') {\n    liveText = speakableText(mathfield.options, 'deleted: ', atoms);\n    //* ** FIX: could also be moveUp or moveDown -- do something different like provide context???\n  } else if (action === 'focus' || action.includes('move')) {\n    //* ** FIX -- should be xxx selected/unselected */\n    liveText =\n      getRelationshipAsSpokenText(mathfield.model, previousPosition) +\n      (mathfield.model.selectionIsCollapsed ? '' : 'selected: ') +\n      getNextAtomAsSpokenText(mathfield.model, mathfield.options);\n  } else if (action === 'replacement') {\n    // Announce the contents\n    liveText = speakableText(\n      mathfield.options,\n      '',\n      mathfield.model.at(mathfield.model.position)\n    );\n  } else if (action === 'line') {\n    // Announce the current line -- currently that's everything\n    // mathfield.accessibleNode.innerHTML = mathfield.options.createHTML(\n    //     '<math xmlns=\"http://www.w3.org/1998/Math/MathML\">' +\n    //         atomsToMathML(mathfield.model.root, mathfield.options) +\n    //         '</math>'\n    // );\n\n    liveText = speakableText(mathfield.options, '', mathfield.model.root);\n    mathfield.keyboardDelegate.setAriaLabel('after: ' + liveText);\n\n    /** * FIX -- testing hack for setting braille ***/\n    // mathfield.accessibleNode.focus();\n    // console.log(\"before sleep\");\n    // sleep(1000).then(() => {\n    //     mathfield.textarea.focus();\n    //     console.log(\"after sleep\");\n    // });\n  } else {\n    liveText = atoms\n      ? speakableText(mathfield.options, action + ' ', atoms)\n      : action;\n  }\n\n  // Aria-live regions are only spoken when it changes; force a change by\n  // alternately using nonbreaking space or narrow nonbreaking space\n  const ariaLiveChangeHack = mathfield.ariaLiveText.textContent.includes(\n    '\\u00a0'\n  )\n    ? ' \\u202F '\n    : ' \\u00A0 ';\n  mathfield.ariaLiveText.textContent = liveText + ariaLiveChangeHack;\n  // This.textarea.setAttribute('aria-label', liveText + ariaLiveChangeHack);\n}\n\nfunction getRelationshipAsSpokenText(\n  model: ModelPrivate,\n  previousOffset?: number\n): string {\n  if (Number.isNaN(previousOffset)) return '';\n  const previous = model.at(previousOffset);\n  if (!previous) return '';\n  if (previous.treeDepth <= model.at(model.position).treeDepth) {\n    return '';\n  }\n\n  let result = '';\n  let ancestor = previous.parent;\n  const newParent = model.at(model.position).parent;\n  while (ancestor !== model.root && ancestor !== newParent) {\n    result += `out of ${relationName(ancestor)};`;\n    ancestor = ancestor.parent;\n  }\n\n  return result;\n}\n\n/**\n *\n * Return the spoken text for the atom to the right of the current selection.\n * Take into consideration the position amongst siblings to include 'start of'\n * and 'end of' if applicable.\n */\nfunction getNextAtomAsSpokenText(\n  model: ModelPrivate,\n  options: TextToSpeechOptions\n): string {\n  if (!model.selectionIsCollapsed) {\n    return speakableText(options, '', model.getAtoms(model.selection));\n  }\n\n  let result = '';\n\n  // Announce start of denominator, etc\n  const cursor = model.at(model.position);\n  const relation = relationName(cursor);\n  if (cursor.isFirstSibling) {\n    result = (relation ? 'start of ' + relation : 'unknown') + ': ';\n  }\n\n  if (cursor.isLastSibling) {\n    // Don't say both start and end\n    if (!cursor.isFirstSibling) {\n      result += relation ? 'end of ' + relation : 'unknown';\n    }\n  } else {\n    result += speakableText(options, '', cursor);\n  }\n\n  return result;\n}\n","import type { InlineShortcutDefinition } from '../public/options';\n\n/**\n * These shortcut strings are replaced with the corresponding LaTeX expression\n * without requiring an escape sequence or command.\n */\nexport const INLINE_SHORTCUTS: Record<string, InlineShortcutDefinition> = {\n  '%': '\\\\%',\n\n  // Primes\n  \"''\": { mode: 'math', value: '^{\\\\doubleprime}' },\n\n  // Greek letters\n  'alpha': '\\\\alpha',\n  'delta': '\\\\delta',\n  'Delta': '\\\\Delta',\n  'pi': { mode: 'math', value: '\\\\pi' },\n  'pi ': { mode: 'text', value: '\\\\pi ' },\n  'Pi': { mode: 'math', value: '\\\\Pi' },\n  'theta': '\\\\theta',\n  'Theta': '\\\\Theta',\n\n  // Letter-like\n  'ii': {\n    after:\n      'nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text',\n    value: '\\\\imaginaryI',\n  },\n  'jj': {\n    after:\n      'nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text',\n    value: '\\\\imaginaryJ',\n  },\n  'ee': {\n    mode: 'math',\n    after:\n      'nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text',\n    value: '\\\\exponentialE',\n  },\n\n  'nabla': { mode: 'math', value: '\\\\nabla' },\n  'grad': { mode: 'math', value: '\\\\nabla' },\n  'del': { mode: 'math', value: '\\\\partial' },\n\n  '\\u221E': '\\\\infty', // @TODO: doesn't work\n  // '&infin;': '\\\\infty',\n  // '&#8734;': '\\\\infty',\n  'oo': {\n    mode: 'math',\n    after:\n      'nothing+digit+frac+surd+binop+relop+punct+array+openfence+closefence+space',\n    value: '\\\\infty',\n  },\n\n  // Big operators\n  '∑': { mode: 'math', value: '\\\\sum' },\n  'sum': { mode: 'math', value: '\\\\sum_{#?}^{#?}' },\n  'prod': { mode: 'math', value: '\\\\prod_{#?}^{#?}' },\n  'sqrt': { mode: 'math', value: '\\\\sqrt{#?}' },\n  // '∫':                    '\\\\int',             // There's a alt-B command for this\n  '∆': { mode: 'math', value: '\\\\differentialD' }, // @TODO: is \\\\diffD most common?\n  '∂': { mode: 'math', value: '\\\\differentialD' },\n\n  // Functions\n  'arcsin': { mode: 'math', value: '\\\\arcsin' },\n  'arccos': { mode: 'math', value: '\\\\arccos' },\n  'arctan': { mode: 'math', value: '\\\\arctan' },\n  'sin': { mode: 'math', value: '\\\\sin' },\n  'sinh': { mode: 'math', value: '\\\\sinh' },\n  'cos': { mode: 'math', value: '\\\\cos' },\n  'cosh': { mode: 'math', value: '\\\\cosh' },\n  'tan': { mode: 'math', value: '\\\\tan' },\n  'tanh': { mode: 'math', value: '\\\\tanh' },\n  'sec': { mode: 'math', value: '\\\\sec' },\n  'csc': { mode: 'math', value: '\\\\csc' },\n  'cot': { mode: 'math', value: '\\\\cot' },\n\n  'log': { mode: 'math', value: '\\\\log' },\n  'ln': { mode: 'math', value: '\\\\ln' },\n  'exp': { mode: 'math', value: '\\\\exp' },\n  'lim': { mode: 'math', value: '\\\\lim_{#?}' },\n\n  // Differentials\n  // According to ISO31/XI (ISO 80000-2), differentials should be upright\n  'dx': {\n    mode: 'math',\n    after:\n      'nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text',\n    value: '\\\\differentialD x',\n  },\n  'dy': {\n    mode: 'math',\n    after:\n      'nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text',\n    value: '\\\\differentialD y',\n  },\n  'dt': {\n    mode: 'math',\n    after:\n      'nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text',\n    value: '\\\\differentialD t',\n  },\n\n  // Logic\n  'AA': { mode: 'math', value: '\\\\forall' },\n  'EE': { mode: 'math', value: '\\\\exists' },\n  '!EE': { mode: 'math', value: '\\\\nexists' },\n  '&&': { mode: 'math', value: '\\\\land' },\n  // The shortcut for the greek letter \"xi\" is interfering with \"x in\"\n  'xin': {\n    mode: 'math',\n    after: 'nothing+text+relop+punct+openfence+space',\n    value: 'x \\\\in',\n  },\n  'in': {\n    mode: 'math',\n    after: 'nothing+letter+closefence',\n    value: '\\\\in',\n  },\n  '!in': { mode: 'math', value: '\\\\notin' },\n\n  // Sets\n  'NN': '\\\\N', // Natural numbers\n  'ZZ': '\\\\Z', // Integers\n  'QQ': '\\\\Q', // Rational numbers\n  'RR': '\\\\R', // Real numbers\n  'CC': '\\\\C', // Complex numbers\n  'PP': '\\\\P', // Prime numbers\n\n  // Operators\n  'xx': { mode: 'math', value: '\\\\times' },\n  '+-': { mode: 'math', value: '\\\\pm' },\n\n  // Relational operators\n  '!=': { mode: 'math', value: '\\\\ne' },\n  '>=': { mode: 'math', value: '\\\\ge' },\n  '<=': { mode: 'math', value: '\\\\le' },\n  '<<': { mode: 'math', value: '\\\\ll' },\n  '>>': { mode: 'math', value: '\\\\gg' },\n  '~~': { mode: 'math', value: '\\\\approx' },\n\n  // More operators\n  '≈': { mode: 'math', value: '\\\\approx' },\n  '?=': { mode: 'math', value: '\\\\questeq' },\n  '÷': { mode: 'math', value: '\\\\div' },\n  '¬': { mode: 'math', value: '\\\\neg' },\n  ':=': { mode: 'math', value: '\\\\coloneq' },\n  '::': { mode: 'math', value: '\\\\Colon' },\n\n  // Fences\n  '(:': { mode: 'math', value: '\\\\langle' },\n  ':)': { mode: 'math', value: '\\\\rangle' },\n\n  // More Greek letters\n  'beta': '\\\\beta',\n  'chi': '\\\\chi',\n  'epsilon': '\\\\epsilon',\n  'varepsilon': '\\\\varepsilon',\n  'eta': {\n    mode: 'math',\n    after:\n      'nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text',\n    value: '\\\\eta',\n  },\n  'eta ': {\n    mode: 'text',\n    after:\n      'nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text',\n    value: '\\\\eta ',\n  },\n  'gamma': '\\\\gamma',\n  'Gamma': '\\\\Gamma',\n  'iota': '\\\\iota',\n  'kappa': '\\\\kappa',\n  'lambda': '\\\\lambda',\n  'Lambda': '\\\\Lambda',\n  'mu': {\n    mode: 'math',\n    after:\n      'nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text',\n    value: '\\\\mu',\n  },\n  'mu ': {\n    mode: 'text',\n    after:\n      'nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text',\n    value: '\\\\mu ',\n  },\n  'nu': {\n    mode: 'math',\n    after:\n      'nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text',\n    value: '\\\\nu',\n  },\n  'nu ': {\n    mode: 'text',\n    after:\n      'nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text',\n    value: '\\\\nu ',\n  },\n  'µ': '\\\\mu', // @TODO: or micro?\n  'phi': {\n    after:\n      'nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text',\n    value: '\\\\phi',\n  },\n  'Phi': {\n    after:\n      'nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text',\n    value: '\\\\Phi',\n  },\n  'varphi': '\\\\varphi',\n  'psi': {\n    after:\n      'nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text',\n    value: '\\\\psi',\n  },\n  'Psi': {\n    after:\n      'nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text',\n    value: '\\\\Psi',\n  },\n  'rho': {\n    after:\n      'nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text',\n    value: '\\\\rho',\n  },\n  'sigma': '\\\\sigma',\n  'Sigma': '\\\\Sigma',\n  'tau': {\n    after:\n      'nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text',\n    value: '\\\\tau',\n  },\n  'vartheta': '\\\\vartheta',\n  'upsilon': '\\\\upsilon',\n  'xi': {\n    after:\n      'nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text',\n    value: '\\\\xi',\n  },\n  'Xi': {\n    after:\n      'nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text',\n    value: '\\\\Xi',\n  },\n  'zeta': '\\\\zeta',\n  'omega': '\\\\omega',\n  'Omega': '\\\\Omega',\n  'Ω': '\\\\omega', // @TODO: or ohm?\n\n  // More Logic\n  'forall': { mode: 'math', value: '\\\\forall' },\n  'exists': {\n    mode: 'math',\n    value: '\\\\exists',\n  },\n  '!exists': {\n    mode: 'math',\n    value: '\\\\nexists',\n  },\n  ':.': {\n    mode: 'math',\n    value: '\\\\therefore',\n  },\n\n  // MORE FUNCTIONS\n  // 'arg': '\\\\arg',\n  'liminf': '\\\\operatorname*{lim~inf}_{#?}',\n  'limsup': '\\\\operatorname*{lim~sup}_{#?}',\n  'argmin': '\\\\operatorname*{arg~min}_{#?}',\n  'argmax': '\\\\operatorname*{arg~max}_{#?}',\n  'det': '\\\\det',\n  'mod': {\n    mode: 'math',\n    value: '\\\\mod',\n  },\n  'max': {\n    mode: 'math',\n    value: '\\\\max',\n  },\n  'min': {\n    mode: 'math',\n    value: '\\\\min',\n  },\n  'erf': '\\\\operatorname{erf}',\n  'erfc': '\\\\operatorname{erfc}',\n  'bessel': {\n    mode: 'math',\n    value: '\\\\operatorname{bessel}',\n  },\n  'mean': {\n    mode: 'math',\n    value: '\\\\operatorname{mean}',\n  },\n  'median': {\n    mode: 'math',\n    value: '\\\\operatorname{median}',\n  },\n  'fft': {\n    mode: 'math',\n    value: '\\\\operatorname{fft}',\n  },\n  'lcm': {\n    mode: 'math',\n    value: '\\\\operatorname{lcm}',\n  },\n  'gcd': {\n    mode: 'math',\n    value: '\\\\operatorname{gcd}',\n  },\n  'randomReal': '\\\\operatorname{randomReal}',\n  'randomInteger': '\\\\operatorname{randomInteger}',\n  'Re': {\n    mode: 'math',\n    value: '\\\\operatorname{Re}',\n  },\n  'Im': {\n    mode: 'math',\n    value: '\\\\operatorname{Im}',\n  },\n\n  // UNITS\n  'mm': {\n    mode: 'math',\n    after: 'nothing+digit+operator',\n    value: '\\\\operatorname{mm}', // Millimeter\n  },\n  'cm': {\n    mode: 'math',\n    after: 'nothing+digit+operator',\n    value: '\\\\operatorname{cm}', // Centimeter\n  },\n  'km': {\n    mode: 'math',\n    after: 'nothing+digit+operator',\n    value: '\\\\operatorname{km}', // Kilometer\n  },\n  'kg': {\n    mode: 'math',\n    after: 'nothing+digit+operator',\n    value: '\\\\operatorname{kg}', // Kilogram\n  },\n\n  // '||':                   '\\\\lor',\n  '...': '\\\\ldots', // In general, use \\ldots\n  '+...': '+\\\\cdots', // ... but use \\cdots after + ...\n  '-...': '-\\\\cdots', // ... - and ...\n  '->...': '\\\\to\\\\cdots', // ->\n\n  '->': '\\\\to',\n  '|->': '\\\\mapsto',\n  '-->': '\\\\longrightarrow',\n  //    '<-':                   '\\\\leftarrow',\n  '<--': '\\\\longleftarrow',\n  '=>': '\\\\Rightarrow',\n  '==>': '\\\\Longrightarrow',\n  // '<=': '\\\\Leftarrow',     // CONFLICTS WITH LESS THAN OR EQUAL\n  '<=>': '\\\\Leftrightarrow',\n  '<->': '\\\\leftrightarrow',\n\n  '(.)': '\\\\odot',\n  '(+)': '\\\\oplus',\n  '(/)': '\\\\oslash',\n  '(*)': '\\\\otimes',\n  '(-)': '\\\\ominus',\n  // '(-)':                  '\\\\circleddash',\n\n  '||': '\\\\Vert',\n  '{': '\\\\{',\n  '}': '\\\\}',\n\n  '*': '\\\\cdot',\n\n  /*\n    //\n    // ASCIIIMath\n    //\n    // Binary operation symbols\n    '**':                   '\\\\ast',\n    '***':                  '\\\\star',\n    '//':                   '\\\\slash',\n    '\\\\\\\\':                 '\\\\backslash',\n    'setminus':             '\\\\backslash',\n    '|><':                  '\\\\ltimes',\n    '><|':                  '\\\\rtimes',\n    '|><|':                 '\\\\bowtie',\n    '-:':                   '\\\\div',\n    'divide':               '\\\\div',\n    '@':                    '\\\\circ',\n    'o+':                   '\\\\oplus',\n    'ox':                   '\\\\otimes',\n    'o.':                   '\\\\odot',\n    '^^':                   '\\\\wedge',\n    '^^^':                  '\\\\bigwedge',\n    'vv':                   '\\\\vee',\n    'vvv':                  '\\\\bigvee',\n    'nn':                   '\\\\cap',\n    'nnn':                  '\\\\bigcap',\n    'uu':                   '\\\\cup',\n    'uuu':                  '\\\\bigcup',\n\n    // Binary relation symbols\n    '-=':                   '\\\\equiv',\n    '~=':                   '\\\\cong',\n    'lt':                   '<',\n    'lt=':                  '\\\\leq',\n    'gt':                   '>',\n    'gt=':                  '\\\\geq',\n    '-<':                   '\\\\prec',\n    '-lt':                  '\\\\prec',\n    '-<=':                  '\\\\preceq',\n    // '>-':                   '\\\\succ',\n    '>-=':                  '\\\\succeq',\n    'prop':                 '\\\\propto',\n    'diamond':              '\\\\diamond',\n    'square':               '\\\\square',\n    'iff':                  '\\\\iff',\n\n    'sub':                  '\\\\subset',\n    'sup':                  '\\\\supset',\n    'sube':                 '\\\\subseteq',\n    'supe':                 '\\\\supseteq',\n    'uarr':                 '\\\\uparrow',\n    'darr':                 '\\\\downarrow',\n    'rarr':                 '\\\\rightarrow',\n    'rArr':                 '\\\\Rightarrow',\n    'larr':                 '\\\\leftarrow',\n    'lArr':                 '\\\\Leftarrow',\n    'harr':                 '\\\\leftrightarrow',\n    'hArr':                 '\\\\Leftrightarrow',\n    'aleph':                '\\\\aleph',\n\n    // Logic\n    'and':                  '\\\\land',\n    'or':                   '\\\\lor',\n    'not':                  '\\\\neg',\n    '_|_':                   '\\\\bot',\n    'TT':                   '\\\\top',\n    '|--':                  '\\\\vdash',\n    '|==':                  '\\\\models',\n    \n    // Other functions\n    '|__':                  '\\\\lfloor',\n    '__|':                  '\\\\rfloor',\n\n    '|~':                   '\\\\lceil',\n    '~|':                   '\\\\rceil',\n\n    // Arrows\n    '>->':                   '\\\\rightarrowtail',\n    '->>':                   '\\\\twoheadrightarrow',\n    '>->>':                  '\\\\twoheadrightarrowtail'\n*/\n};\n","import type { MathfieldOptions } from '../public/options';\n\nimport { isArray } from '../common/types';\n\nimport type { Atom } from '../core/atom';\nimport { MACROS } from '../core-definitions/definitions';\n\nimport type { MathfieldPrivate } from '../editor-mathfield/mathfield-private';\nimport { l10n } from './l10n';\nimport { defaultAnnounceHook } from './a11y';\nimport { INLINE_SHORTCUTS } from './shortcuts-definitions';\nimport { DEFAULT_KEYBINDINGS } from './keybindings-definitions';\nimport { resolveRelativeUrl } from '../common/script-url';\n\nconst AUDIO_FEEDBACK_VOLUME = 0.5; // From 0.0 to 1.0\n\nconst NO_OP_LISTENER = (): void => {};\n\nexport type MathfieldOptionsPrivate = MathfieldOptions & {\n  onAnnounce: (\n    target: MathfieldPrivate,\n    command: string, // Verb\n    previousPosition: number,\n    atoms: Atom[] // Object of the command\n  ) => void; // @revisit 1.0: rename announceHook\n};\n\nfunction loadSound(\n  soundDirectory: string,\n  sound: string | HTMLAudioElement | null\n): HTMLAudioElement {\n  if (sound === null) return null;\n  if (sound instanceof HTMLAudioElement) {\n    sound.load();\n    return sound;\n  }\n\n  const url = resolveRelativeUrl(\n    (soundDirectory ?? './sounds') + '/' + sound\n  ).toString();\n\n  const result: HTMLAudioElement = new Audio();\n  result.preload = 'auto';\n  result.src = url;\n  result.volume = AUDIO_FEEDBACK_VOLUME;\n  result.load();\n  return result;\n}\n\nfunction unloadSound(\n  sound: string | HTMLAudioElement | Record<string, HTMLAudioElement | string>\n): void {\n  if (sound instanceof HTMLAudioElement) {\n    sound.pause();\n    sound.removeAttribute('src');\n    // Important to properly unload: call load() after removing the\n    // `src` attribute\n    sound.load();\n  }\n}\n\nexport function update(\n  current: Required<MathfieldOptionsPrivate>,\n  updates: Partial<MathfieldOptionsPrivate>\n): Required<MathfieldOptionsPrivate> {\n  const soundsDirectory =\n    updates.soundsDirectory ?? current.soundsDirectory ?? './sounds';\n  const result: Required<MathfieldOptionsPrivate> = get(\n    current,\n    Object.keys(current)\n  ) as Required<MathfieldOptionsPrivate>;\n  for (const key of Object.keys(updates)) {\n    switch (key) {\n      case 'scriptDepth':\n        if (isArray<number>(updates.scriptDepth)) {\n          result.scriptDepth = [updates.scriptDepth[0], updates.scriptDepth[1]];\n        } else if (typeof updates.scriptDepth === 'number') {\n          result.scriptDepth = [updates.scriptDepth, updates.scriptDepth];\n        } else {\n          throw new TypeError('Unexpected value for scriptDepth');\n        }\n\n        break;\n      case 'namespace':\n        // Validate the namespace (used for `data-` attributes)\n        if (!/^[a-z]*-?$/.test(updates.namespace)) {\n          throw new Error(\n            'namespace must be a string of lowercase characters only'\n          );\n        }\n\n        if (!updates.namespace.endsWith('-')) {\n          result.namespace = updates.namespace + '-';\n        } else {\n          result.namespace = updates.namespace;\n        }\n\n        break;\n      case 'locale':\n        result.locale =\n          updates.locale === 'auto'\n            ? navigator?.language.slice(0, 5) ?? 'en'\n            : updates.locale;\n        l10n.locale = result.locale;\n        break;\n      case 'strings':\n        l10n.merge(updates.strings);\n        result.strings = l10n.strings;\n        break;\n      case 'virtualKeyboardLayout':\n        result.virtualKeyboardLayout = updates.virtualKeyboardLayout;\n        break;\n      case 'virtualKeyboardMode':\n        {\n          const isTouchDevice = window.matchMedia?.('(any-pointer: coarse)')\n            .matches;\n          if (updates.virtualKeyboardMode === 'auto') {\n            result.virtualKeyboardMode = isTouchDevice ? 'onfocus' : 'off';\n          } else {\n            result.virtualKeyboardMode = updates.virtualKeyboardMode;\n          }\n        }\n        break;\n\n      case 'customVirtualKeyboardLayers':\n        result.customVirtualKeyboardLayers = {\n          ...result.customVirtualKeyboardLayers,\n          ...updates.customVirtualKeyboardLayers,\n        };\n        break;\n\n      case 'customVirtualKeyboards':\n        result.customVirtualKeyboards = {\n          ...result.customVirtualKeyboards,\n          ...updates.customVirtualKeyboards,\n        };\n        break;\n\n      case 'letterShapeStyle':\n        if (updates.letterShapeStyle === 'auto') {\n          // Letter shape style (locale dependent)\n          if (l10n.locale.startsWith('fr')) {\n            result.letterShapeStyle = 'french';\n          } else {\n            result.letterShapeStyle = 'tex';\n          }\n        } else {\n          result.letterShapeStyle = updates.letterShapeStyle;\n        }\n\n        break;\n      case 'plonkSound':\n        unloadSound(result.plonkSound);\n        result.plonkSound = loadSound(soundsDirectory, updates.plonkSound);\n        break;\n      case 'keypressSound':\n        if (\n          typeof result.keypressSound === 'object' &&\n          result.keypressSound !== null &&\n          'default' in result.keypressSound\n        ) {\n          unloadSound(result.keypressSound.default);\n          unloadSound(result.keypressSound.delete);\n          unloadSound(result.keypressSound.return);\n          unloadSound(result.keypressSound.spacebar);\n        }\n        if (updates.keypressSound === null) {\n          result.keypressSound = {\n            default: null,\n            delete: null,\n            return: null,\n            spacebar: null,\n          };\n        } else if (typeof updates.keypressSound === 'string') {\n          const sound = loadSound(soundsDirectory, updates.keypressSound);\n          result.keypressSound = {\n            delete: sound,\n            return: sound,\n            spacebar: sound,\n            default: sound,\n          };\n        } else if (updates.keypressSound instanceof HTMLAudioElement) {\n          result.keypressSound = {\n            delete: updates.keypressSound,\n            return: updates.keypressSound,\n            spacebar: updates.keypressSound,\n            default: updates.keypressSound,\n          };\n        } else {\n          result.keypressSound = { ...updates.keypressSound };\n          result.keypressSound.default = loadSound(\n            soundsDirectory,\n            result.keypressSound.default\n          );\n          result.keypressSound.delete =\n            loadSound(soundsDirectory, result.keypressSound.delete) ??\n            updates.keypressSound.default;\n          result.keypressSound.return =\n            loadSound(soundsDirectory, result.keypressSound.return) ??\n            updates.keypressSound.default;\n          result.keypressSound.spacebar =\n            loadSound(soundsDirectory, result.keypressSound.spacebar) ??\n            updates.keypressSound.default;\n        }\n\n        break;\n      case 'virtualKeyboardContainer':\n        result.virtualKeyboardContainer = updates.virtualKeyboardContainer;\n        break;\n      case 'onBlur':\n      case 'onFocus':\n      case 'onContentWillChange':\n      case 'onContentDidChange':\n      case 'onSelectionWillChange':\n      case 'onSelectionDidChange':\n      case 'onUndoStateWillChange':\n      case 'onUndoStateDidChange':\n      case 'onModeChange':\n      case 'onCommit':\n      case 'onReadAloudStatus':\n      case 'onError':\n        if (updates[key] === null) {\n          result[key] = NO_OP_LISTENER;\n        } else if (typeof updates[key] !== 'function') {\n          throw new TypeError(key + ' must be a function or null');\n        }\n\n        result[key] = updates[key] as any;\n        break;\n      default:\n        if (isArray(updates[key])) {\n          result[key] = [...updates[key]];\n        } else if (typeof updates[key] === 'object') {\n          result[key] = { ...updates[key] };\n        } else {\n          result[key] = updates[key];\n        }\n    }\n  }\n\n  // @revisit 1.0: for backward compatibility, interprets the overrideDefaultInlineShortcuts\n  // property\n  if (updates.overrideDefaultInlineShortcuts !== undefined) {\n    if (updates.overrideDefaultInlineShortcuts) {\n      result.inlineShortcuts = updates.inlineShortcuts;\n    } else {\n      result.inlineShortcuts = {\n        ...INLINE_SHORTCUTS,\n        ...updates.inlineShortcuts,\n      };\n    }\n  }\n\n  return result;\n}\n\nexport function get(\n  config: Required<MathfieldOptionsPrivate>,\n  keys?: keyof MathfieldOptionsPrivate | string[]\n): any | Partial<MathfieldOptionsPrivate> {\n  let resolvedKeys: string[];\n  if (typeof keys === 'string') {\n    resolvedKeys = [keys];\n  } else if (keys === undefined) {\n    resolvedKeys = Object.keys(config);\n  } else {\n    resolvedKeys = keys;\n  }\n\n  const result: Partial<MathfieldOptionsPrivate> = {};\n  for (const x of resolvedKeys) {\n    if (isArray(result[x])) {\n      result[x] = [...result[x]];\n    } else if (typeof result[x] === 'object') {\n      result[x] = { ...result[x] };\n    } else {\n      result[x] = config[x];\n    }\n  }\n  // If requested a single key, return its value\n  if (typeof keys === 'string') {\n    return result[keys];\n  }\n\n  return result;\n}\n\nexport function getDefault(): Required<MathfieldOptionsPrivate> {\n  return {\n    namespace: '',\n    substituteTextArea: undefined,\n    readOnly: false,\n    createHTML: (s: string): any => s,\n    fontsDirectory: './fonts',\n    soundsDirectory: './sounds',\n\n    defaultMode: 'math',\n    macros: MACROS,\n    horizontalSpacingScale: 1,\n    letterShapeStyle: 'auto',\n\n    smartMode: false,\n    smartFence: true,\n    smartSuperscript: true,\n    scriptDepth: [Infinity, Infinity],\n    removeExtraneousParentheses: true,\n    mathModeSpace: '',\n\n    locale: l10n.locale,\n    strings: l10n.strings,\n\n    keybindings: DEFAULT_KEYBINDINGS,\n\n    overrideDefaultInlineShortcuts: false, // @revisit: don't need this if we return the actual shortcuts\n    inlineShortcuts: {}, // @revisit: return the actual shortcuts\n    inlineShortcutTimeout: 0,\n\n    virtualKeyboardToggleGlyph: `<span style=\"width: 21px; margin-top: 4px;\"><svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 576 512\"><path d=\"M528 64H48C21.49 64 0 85.49 0 112v288c0 26.51 21.49 48 48 48h480c26.51 0 48-21.49 48-48V112c0-26.51-21.49-48-48-48zm16 336c0 8.823-7.177 16-16 16H48c-8.823 0-16-7.177-16-16V112c0-8.823 7.177-16 16-16h480c8.823 0 16 7.177 16 16v288zM168 268v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm-336 80v-24c0-6.627-5.373-12-12-12H84c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm384 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zM120 188v-24c0-6.627-5.373-12-12-12H84c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm-96 152v-8c0-6.627-5.373-12-12-12H180c-6.627 0-12 5.373-12 12v8c0 6.627 5.373 12 12 12h216c6.627 0 12-5.373 12-12z\"/></svg></span>`,\n    virtualKeyboardMode: 'auto',\n    virtualKeyboards: 'all',\n    virtualKeyboardLayout: 'auto',\n    customVirtualKeyboardLayers: {},\n    customVirtualKeyboards: {},\n    virtualKeyboardTheme: /android|cros/i.test(navigator?.userAgent)\n      ? 'material'\n      : 'apple',\n    keypressVibration: true,\n    keypressSound: null,\n    plonkSound: null,\n    virtualKeyboardToolbar: 'default',\n    virtualKeyboardContainer: globalThis.document?.body,\n\n    useSharedVirtualKeyboard: false,\n    sharedVirtualKeyboardTargetOrigin: globalThis.window?.origin,\n    originValidator: 'same-origin',\n\n    textToSpeechRules: 'mathlive',\n    textToSpeechMarkup: '', // No markup\n    textToSpeechRulesOptions: {},\n    speechEngine: 'local',\n    speechEngineVoice: 'Joanna',\n    speechEngineRate: '100%',\n    speakHook: NO_OP_LISTENER,\n    readAloudHook: NO_OP_LISTENER,\n\n    onAnnounce: defaultAnnounceHook,\n    onKeystroke: (): boolean => true,\n    onMoveOutOf: (): boolean => true,\n    onTabOutOf: (): boolean => true,\n\n    onBlur: NO_OP_LISTENER,\n    onFocus: NO_OP_LISTENER,\n    onContentWillChange: NO_OP_LISTENER,\n    onContentDidChange: NO_OP_LISTENER,\n    onSelectionWillChange: NO_OP_LISTENER,\n    onSelectionDidChange: NO_OP_LISTENER,\n    onUndoStateWillChange: NO_OP_LISTENER,\n    onUndoStateDidChange: NO_OP_LISTENER,\n    onModeChange: NO_OP_LISTENER,\n    onReadAloudStatus: NO_OP_LISTENER,\n    onCommit: NO_OP_LISTENER,\n\n    onError: (): void => {},\n  };\n}\n\nexport function effectiveMode(\n  options: MathfieldOptionsPrivate\n): 'math' | 'text' {\n  if (options.defaultMode === 'inline-math') return 'math';\n  return options.defaultMode;\n}\n","import type { InlineShortcutDefinition } from '../public/options';\nimport { LETTER } from '../core-definitions/definitions';\nimport type { Atom } from '../core/atom';\n\nimport { MathfieldOptionsPrivate } from './options';\nimport { INLINE_SHORTCUTS } from './shortcuts-definitions';\n\nexport { InlineShortcutDefinition };\nexport { INLINE_SHORTCUTS } from './shortcuts-definitions';\n\n/**\n * Return an array of potential shortcuts\n */\nexport function getInlineShortcutsStartingWith(\n  s: string,\n  config: MathfieldOptionsPrivate\n): string[] {\n  const result = [];\n\n  const skipDefaultShortcuts = config.overrideDefaultInlineShortcuts;\n\n  for (let i = 0; i <= s.length - 1; i++) {\n    const s2 = s.slice(Math.max(0, i));\n    if (!skipDefaultShortcuts) {\n      for (const key of Object.keys(INLINE_SHORTCUTS)) {\n        if (key.startsWith(s2) && !result.includes(key)) {\n          result.push(key);\n        }\n      }\n    }\n\n    const customInlineShortcuts = config?.inlineShortcuts\n      ? config.inlineShortcuts\n      : null;\n    if (customInlineShortcuts) {\n      for (const key of Object.keys(customInlineShortcuts)) {\n        if (key.startsWith(s2)) {\n          result.push(key);\n        }\n      }\n    }\n  }\n\n  return result;\n}\n\n/**\n *\n * @param siblings atoms preceding this potential shortcut\n */\nfunction validateShortcut(\n  siblings: Atom[],\n  shortcut: InlineShortcutDefinition\n): string {\n  if (!shortcut) return '';\n\n  // If it's a simple shortcut (no conditional), it's always valid\n  if (typeof shortcut === 'string') return shortcut;\n\n  // If we have no context, we assume all the shortcuts are valid\n  if (!siblings) return shortcut.value;\n\n  let nothing = false;\n  let letter = false;\n  let digit = false;\n  let isFunction = false;\n  let frac = false;\n  let surd = false;\n  let binop = false;\n  let relop = false;\n  let operator = false;\n  let punct = false;\n  let array = false;\n  let openfence = false;\n  let closefence = false;\n  let text = false;\n  let space = false;\n  let sibling = siblings[siblings.length - 1];\n  let index = siblings.length - 1;\n  while (sibling && /msubsup|placeholder/.test(sibling.type)) {\n    index -= 1;\n    sibling = siblings[index];\n  }\n\n  nothing = !sibling || sibling.type === 'first'; // Start of a group\n  if (sibling) {\n    if (shortcut.mode !== undefined && sibling.mode !== shortcut.mode) {\n      return '';\n    }\n\n    text = sibling.mode === 'text';\n    letter = !text && sibling.type === 'mord' && LETTER.test(sibling.value);\n    digit = !text && sibling.type === 'mord' && /\\d+$/.test(sibling.value);\n    isFunction = !text && sibling.isFunction;\n    frac = sibling.type === 'genfrac';\n    surd = sibling.type === 'surd';\n    binop = sibling.type === 'mbin';\n    relop = sibling.type === 'mrel';\n    operator = sibling.type === 'mop';\n    punct = sibling.type === 'mpunct' || sibling.type === 'minner';\n    array = sibling.type === 'array';\n    openfence = sibling.type === 'mopen';\n    closefence = sibling.type === 'mclose' || sibling.type === 'leftright';\n    space = sibling.type === 'space';\n  }\n\n  if (shortcut.after !== undefined) {\n    // If this is a conditional shortcut, consider the conditions now\n    if (\n      (shortcut.after.includes('nothing') && nothing) ||\n      (shortcut.after.includes('letter') && letter) ||\n      (shortcut.after.includes('digit') && digit) ||\n      (shortcut.after.includes('function') && isFunction) ||\n      (shortcut.after.includes('frac') && frac) ||\n      (shortcut.after.includes('surd') && surd) ||\n      (shortcut.after.includes('binop') && binop) ||\n      (shortcut.after.includes('relop') && relop) ||\n      (shortcut.after.includes('operator') && operator) ||\n      (shortcut.after.includes('punct') && punct) ||\n      (shortcut.after.includes('array') && array) ||\n      (shortcut.after.includes('openfence') && openfence) ||\n      (shortcut.after.includes('closefence') && closefence) ||\n      (shortcut.after.includes('text') && text) ||\n      (shortcut.after.includes('space') && space)\n    ) {\n      return shortcut.value;\n    }\n\n    return '';\n  }\n\n  return shortcut.value;\n}\n\n/**\n *\n * @param context - atoms preceding the candidate, potentially used\n * to reduce which shortcuts are applicable. If 'null', no restrictions are\n * applied.\n * @param s - candidate inline shortcuts (e.g. `'pi'`)\n * @return A replacement string matching the shortcut (e.g. `'\\pi'`)\n */\nexport function getInlineShortcut(\n  context: Atom[],\n  s: string,\n  shortcuts?: Record<string, InlineShortcutDefinition>\n): string {\n  return validateShortcut(context, shortcuts?.[s] ?? INLINE_SHORTCUTS[s]);\n}\n","import {\n  eventToChar,\n  mightProducePrintableCharacter,\n} from '../editor/keyboard';\nimport { contentDidChange } from '../editor-model/listeners';\nimport type { MathfieldPrivate } from './mathfield-private';\n\nimport { ModelPrivate } from '../editor-model/model-private';\nimport { Atom } from '../core/atom-class';\nimport { LeftRightAtom } from '../core-atoms/leftright';\n\n/**\n * Convert the atoms before the anchor to 'text' mode\n * @param count - how many atoms back to look at\n * @param {function} until - callback to indicate when to stop\n * @private\n */\nfunction convertLastAtomsToText(\n  model: ModelPrivate,\n  count?: number | ((a: Atom) => boolean),\n  until?: (a: Atom) => boolean\n): void {\n  if (typeof count !== 'number') {\n    until = count;\n    count = Infinity;\n  }\n\n  if (count === undefined) {\n    count = Infinity;\n  }\n\n  let i = model.position;\n  let done = false;\n  while (!done) {\n    const atom = model.at(i);\n    done =\n      count === 0 ||\n      !atom ||\n      atom.mode !== 'math' ||\n      !(\n        /mord|textord|mpunct/.test(atom.type) ||\n        (atom.type === 'mop' && /[a-zA-Z]+/.test(atom.value))\n      ) ||\n      !atom.hasEmptyBranch('superscript') ||\n      !atom.hasEmptyBranch('subscript') ||\n      (until && !until(atom));\n    if (!done) {\n      atom.mode = 'text';\n      atom.command = atom.value;\n      atom.latex = undefined;\n    }\n\n    i -= 1;\n    count -= 1;\n  }\n\n  contentDidChange(model);\n}\n\n/**\n * Convert the atoms before the anchor to 'math' mode 'mord'\n * @param {number} count - how many atoms back to look at\n * @param {function} until - callback to indicate when to stop\n * @private\n */\nfunction convertLastAtomsToMath(\n  model: ModelPrivate,\n  count?: number,\n  until?\n): void {\n  if (typeof count === 'function') {\n    until = count;\n    count = Infinity;\n  }\n\n  if (count === undefined) {\n    count = Infinity;\n  }\n\n  let i = model.position;\n  let done = false;\n  while (!done) {\n    const atom = model.at(i);\n    done =\n      count === 0 ||\n      !atom ||\n      atom.isFirstSibling ||\n      atom.mode !== 'text' ||\n      atom.value === ' ' ||\n      (until && !until(atom));\n    if (!done) {\n      atom.mode = 'math';\n    }\n\n    i -= 1;\n    count -= 1;\n  }\n\n  removeIsolatedSpace(model);\n  contentDidChange(model);\n}\n\n// Export function applyMode(\n//     _mathfield: MathfieldPrivate,\n//     _range: Range,\n//     _mode: ParseMode\n// ): boolean {\n// const model = mathfield.model;\n// There's a mode ('text', 'math', 'command') change\n// if (model.selectionIsCollapsed) {\n//     // Nothing selected\n//     mathfield.switchMode(mode as ParseMode);\n//     return\n// }\n// Convert the selection from one mode to another\n//         const previousMode = mathfield.mode;\n//         const targetMode =\n//             (getMode(model, model.position) ??\n//                 mathfield.options.defaultMode) === 'math'\n//                 ? 'text'\n//                 : 'math';\n//         let convertedSelection = mathfield.getValue(\n//             mathfield.selection,\n//             'ascii-math'\n//         );\n//         if (targetMode === 'math' && /^\"[^\"]+\"$/.test(convertedSelection)) {\n//             convertedSelection = convertedSelection.slice(1, -1);\n//         }\n//         mathfield.insert(convertedSelection, {\n//             mode: targetMode,\n//             selectionMode: 'item',\n//             format: targetMode === 'text' ? 'text' : 'ascii-math',\n//         });\n//         mathfield.mode = targetMode;\n//         const [groupStart, groupEnd] = model.getSiblingsRange(\n//             model.position\n//         );\n//         const first = Math.min(model.anchor, model.position);\n//         const last = Math.max(model.anchor, model.position);\n//         if (\n//             groupStart >= first &&\n//             groupStart <= last &&\n//             groupEnd >= first &&\n//             groupEnd <= last\n//         ) {\n//             // The entire group was selected. Adjust parent mode if\n//             // appropriate\n//             const parent = model.at(model.position).parent;\n//             if (\n//                 parent &&\n//                 (parent.type === 'group' || parent.type === 'root')\n//             ) {\n//                 parent.mode = targetMode;\n//             }\n//         }\n//         // Notify of mode change\n//         if (\n//             mathfield.mode !== previousMode &&\n//             typeof mathfield.options.onModeChange === 'function'\n//         ) {\n//             mathfield.options.onModeChange(mathfield, mathfield.mode);\n//         }\n// }\n//     return false;\n// }\n\n/**\n * Going backwards from the anchor, if a text zone consisting of a single\n * space character is found (i.e. it is surrounded by math zone),\n * remove it.\n */\nexport function removeIsolatedSpace(model: ModelPrivate): void {\n  let i = model.position - 1;\n  while (i >= 0 && model.at(i)?.mode === 'math') {\n    i -= 1;\n  }\n\n  if (i < 0) return;\n  // If the atom before the last one converted is a\n  // text mode space, preceded by a math mode atom,\n  // remove the space\n  if (\n    model.at(i).mode === 'text' &&\n    model.at(i).value === ' ' &&\n    model.at(i - 1).mode === 'math'\n  ) {\n    model.at(i - 1).parent.removeChild(model.at(i - 1));\n    contentDidChange(model);\n    // We need to adjust the selection after doing some surgery on the atoms list\n    // But we don't want to receive selection notification changes\n    // which could have a side effect of changing the mode :(\n    const save = model.suppressChangeNotifications;\n    model.suppressChangeNotifications = true;\n    model.position -= 1;\n    model.suppressChangeNotifications = save;\n  }\n}\n\n/**\n * Return the characters before the insertion point that could potentially be\n * turned into text mode.\n * This excludes things like 'mop' (e.g. \\sin)\n */\nfunction getTextBeforePosition(model: ModelPrivate): string {\n  // Going backwards, accumulate\n  let result = '';\n  let i = model.position;\n  let done = false;\n  while (!done) {\n    const atom = model.at(i);\n    done = !(\n      atom &&\n      (atom.mode === 'text' ||\n        (atom.mode === 'math' && /mord|textord|mpunct/.test(atom.type)))\n    );\n    if (!done) {\n      result = atom.value + result;\n    }\n\n    i -= 1;\n  }\n\n  return result;\n}\n/**\n * Consider whether to switch mode give the content before the insertion point\n * and the character being input\n *\n * @param keystroke\n * @param evt - a Event corresponding to the keystroke\n * @return true if the mode should change\n */\n\nexport function smartMode(\n  mathfield: MathfieldPrivate,\n  keystroke: string,\n  evt: KeyboardEvent\n): boolean {\n  if (mathfield.smartModeSuppressed) {\n    return false;\n  }\n\n  const { model } = mathfield;\n  // Are we at the end of a group?\n  if (!model.at(model.position).isLastSibling) {\n    return false;\n  }\n\n  // Is there an event that would produce a printable char?\n  // (i.e. not an arrow key, etc...)\n  if (!evt || !mightProducePrintableCharacter(evt)) {\n    return false;\n  }\n\n  const c = eventToChar(evt);\n  if (!model.selectionIsCollapsed) {\n    // There is a selection\n    if (mathfield.mode === 'text') {\n      // If the character is '/' or '_' or '^', switch to 'math'\n      if (/[/_^]/.test(c)) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  const context = getTextBeforePosition(model) + c;\n  if (mathfield.mode === 'text') {\n    // We're in text mode. Should we switch to math?\n    if (keystroke === 'Esc' || /[/\\\\]/.test(c)) {\n      // If this is a command for a fraction,\n      // or the '\\' command mode key\n      // switch to 'math'\n      return true;\n    }\n\n    if (/[\\^_]/.test(c)) {\n      // If this is a superscript or subscript\n      // switch to 'math'\n      if (/(^|\\s)[a-zA-Z][^_]$/.test(context)) {\n        // If left hand context is a single letter,\n        // convert it to math\n        convertLastAtomsToMath(model, 1);\n      }\n\n      return true;\n    }\n\n    // If this is a closing matching fence\n    // switch to 'math' mode\n    const lFence = { ')': '(', '}': '{', ']': '[' }[c];\n    const { parent } = model.at(model.position);\n    if (\n      lFence &&\n      parent instanceof LeftRightAtom &&\n      parent.leftDelim === lFence\n    ) {\n      return true;\n    }\n\n    if (/(^|[^a-zA-Z])(a|I) $/.test(context)) {\n      // Single letters that are valid words in the current language\n      // Do nothing. @todo: localization\n      return false;\n    }\n\n    if (/[$€£₤₺¥¤฿¢₡₧₨₹₩₱]/u.test(c)) {\n      // A currency symbol.\n      // Switch to math mode\n      return true;\n    }\n\n    if (/(^|[^a-zA-Z'’])[a-zA-Z] $/.test(context)) {\n      // An isolated letter, followed by a space:\n      // Convert the letter to math, stay in text mode.\n      convertLastAtomsToMath(model, 1);\n      return false;\n    }\n\n    if (/\\D\\.[^\\d\\s]$/.test(context)) {\n      // A period followed by something other than space or a digit\n      // and not preceded by a digit.\n      // We thought this was a text period, but turns out it's not\n      // Turn it into a \\cdot\n      convertLastAtomsToMath(model, 1);\n      const atom = model.at(model.position);\n      atom.value = '⋅'; // Centered dot\n      atom.style.variant = 'normal'; // @revisit. Was 'auto'. Check for proper conversion.\n      atom.command = '\\\\cdot';\n      atom.latex = undefined;\n      contentDidChange(model);\n      return true;\n    }\n\n    if (/(^|\\s)[a-zA-Z][^a-zA-Z]$/.test(context)) {\n      // Single letter (x), followed by a non-letter (>, =...)\n      convertLastAtomsToMath(model, 1);\n      return true;\n    }\n\n    if (/\\.\\d$/.test(context)) {\n      // If the new character is a digit,\n      // and it was preceded by a dot (which may have been converted\n      // to text)\n      // turn the dot back into 'math'\n      convertLastAtomsToMath(model, 1);\n      return true;\n    }\n\n    if (/\\([\\d+\\-.]$/.test(context)) {\n      // An open paren followed by a number\n      // Turn the paren back to math and switch.\n      convertLastAtomsToMath(model, 1);\n      return true;\n    }\n\n    if (/\\([a-z][,;]$/.test(context)) {\n      // An open paren followed by a single letter, then a \",\" or \";\"\n      // Turn the paren back and letter to math and switch.\n      convertLastAtomsToMath(model, 2);\n      return true;\n    }\n\n    // The tests above can look behind and change what had previously\n    // been entered. Now, let's just look at the typed character.\n    if (/[\\d+\\-=><*|]$/.test(c)) {\n      // If this new character looks like a number,\n      // or a relational operator (=, <, >)\n      // or a \"*\" or \"|\"\n      // (note that <=, >=, etc... are handled separately as shortcuts)\n      // switch to 'math'\n      removeIsolatedSpace(model);\n      return true;\n    }\n  } else {\n    // We're in math mode. Should we switch to text?\n    if (keystroke === '[Space]') {\n      convertLastAtomsToText(model, undefined, (a) =>\n        /[a-z][:,;.]$/.test(a.value)\n      );\n      return true;\n    }\n\n    if (/[a-zA-Z]{3,}$/.test(context) && !/(dxd|abc|xyz|uvw)$/.test(context)) {\n      // A sequence of three characters\n      // (except for some exceptions)\n      // Convert them to text.\n      convertLastAtomsToText(model, undefined, (a) => /[a-zA-Z]/.test(a.value));\n      return true;\n    }\n\n    if (/(^|\\W)(if)$/i.test(context)) {\n      // @todo localization\n      convertLastAtomsToText(model, 1);\n      return true;\n    }\n\n    if (\n      /(\\u0393|\\u0394|\\u0398|\\u039B|\\u039E|\\u03A0|\\u03A3|\\u03A5|\\u03A6|\\u03A8|\\u03A9|[\\u03B1-\\u03C9]|\\u03D1|\\u03D5|\\u03D6|\\u03F1|\\u03F5){3,}$/u.test(\n        context\n      ) &&\n      !/(αβγ)$/.test(context)\n    ) {\n      // A sequence of three *greek* characters\n      // (except for one exception)\n      // Convert them to text.\n      convertLastAtomsToText(model, undefined, (a) =>\n        /(:|,|;|.|\\u0393|\\u0394|\\u0398|\\u039B|\\u039E|\\u03A0|\\u03A3|\\u03A5|\\u03A6|\\u03A8|\\u03A9|[\\u03B1-\\u03C9]|\\u03D1|\\u03D5|\\u03D6|\\u03F1|\\u03F5)/u.test(\n          a.value\n        )\n      );\n      return true;\n    }\n\n    if (c === '?') {\n      // If the last character is a question mark,\n      // turn it to 'text'\n      return true;\n    }\n\n    if (c === '.' && !/[\\d-+]\\.$/.test(context)) {\n      // A period after something other than a digit (or minus)\n      return true;\n    }\n  }\n\n  return false;\n}\n","import { OutputFormat } from '../public/mathfield';\nimport { InlineShortcutDefinition, getInlineShortcut } from './shortcuts';\n\n/**\n * Attempts to parse and interpret a string in an unknown format, possibly\n * ASCIIMath and return a canonical LaTeX string.\n *\n * The format recognized are one of these variations:\n * - ASCIIMath: Only supports a subset\n * (1/2x)\n * 1/2sin x                     -> \\frac {1}{2}\\sin x\n * 1/2sinx                      -> \\frac {1}{2}\\sin x\n * (1/2sin x (x^(2+1))          // Unbalanced parentheses\n * (1/2sin(x^(2+1))             -> \\left(\\frac {1}{2}\\sin \\left(x^{2+1}\\right)\\right)\n * alpha + (pi)/(4)             -> \\alpha +\\frac {\\pi }{4}\n * x=(-b +- sqrt(b^2 – 4ac))/(2a)\n * alpha/beta\n * sqrt2 + sqrtx + sqrt(1+a) + sqrt(1/2)\n * f(x) = x^2 \"when\" x >= 0\n * AA n in QQ\n * AA x in RR \",\" |x| > 0\n * AA x in RR \",\" abs(x) > 0\n *\n * - UnicodeMath (generated by Microsoft Word): also only supports a subset\n *      - See https://www.unicode.org/notes/tn28/UTN28-PlainTextMath-v3.1.pdf\n * √(3&x+1)\n * {a+b/c}\n * [a+b/c]\n * _a^b x\n * lim_(n->\\infty) n\n * \\iint_(a=0)^\\infty  a\n *\n * - \"JavaScript Latex\": a variant that is LaTeX, but with escaped backslashes\n *  \\\\frac{1}{2} \\\\sin x\n */\nexport function parseMathString(\n  s: string,\n  options?: {\n    format?: OutputFormat;\n    inlineShortcuts?: Record<string, InlineShortcutDefinition>;\n  }\n): [OutputFormat, string] {\n  if (!s) return ['latex', ''];\n\n  // Nothing to do if a single character\n  if (s.length <= 1) return ['latex', s];\n\n  if (!options || options.format !== 'ascii-math') {\n    // This is not explicitly ASCIIMath. Try to infer if this is LaTex...\n\n    // If the strings is surrounded by `$..$` or `$$..$$`, assumes it is LaTeX\n    const trimedString = s.trim();\n    if (\n      (trimedString.startsWith('$$') && trimedString.endsWith('$$')) ||\n      (trimedString.startsWith('\\\\[') && trimedString.endsWith('\\\\]')) ||\n      (trimedString.startsWith('\\\\(') && trimedString.endsWith('\\\\)'))\n    ) {\n      return ['latex', trimedString.substring(2, trimedString.length - 2)];\n    }\n\n    if (trimedString.startsWith('$') && trimedString.endsWith('$')) {\n      return ['latex', trimedString.substring(1, trimedString.length - 1)];\n    }\n\n    // Replace double-backslash (coming from JavaScript) to a single one\n    s = s.replace(/\\\\\\\\([^\\s\\n])/g, '\\\\$1');\n\n    if (s.includes('\\\\')) {\n      // If the string includes a '\\' it's probably a LaTeX string\n      // (that's not completely true, it could be a UnicodeMath string, since\n      // UnicodeMath supports some LaTeX commands. However, we need to pick\n      // one in order to correctly interpret {} (which are argument delimiters\n      // in LaTeX, and are fences in UnicodeMath)\n      return ['latex', s];\n    }\n  }\n\n  s = s.replace(/\\u2061/gu, ''); // Remove function application\n  s = s.replace(/\\u3016/gu, '{'); // WHITE LENTICULAR BRACKET (grouping)\n  s = s.replace(/\\u3017/gu, '}'); // WHITE LENTICULAR BRACKET (grouping)\n\n  s = s.replace(/([^\\\\])sinx/g, '$1\\\\sin x'); // Common typo\n  s = s.replace(/([^\\\\])cosx/g, '$1\\\\cos x '); // Common typo\n  s = s.replace(/\\u2013/g, '-'); // EN-DASH, sometimes used as a minus sign\n\n  return [\n    options?.format ?? 'ascii-math',\n    parseMathExpression(s, options ?? {}),\n  ];\n}\n\nfunction parseMathExpression(\n  s: string,\n  options: {\n    format?: string;\n    inlineShortcuts?: Record<string, InlineShortcutDefinition>;\n  }\n): string {\n  if (!s) return '';\n  let done = false;\n  let m;\n\n  if (!done && (s.startsWith('^') || s.startsWith('_'))) {\n    // Superscript and subscript\n    m = parseMathArgument(s.slice(1), {\n      inlineShortcuts: options?.inlineShortcuts ?? {},\n      noWrap: true,\n    });\n    s = s[0] + '{' + m.match + '}';\n    s += parseMathExpression(m.rest, options);\n    done = true;\n  }\n\n  if (!done) {\n    m = s.match(/^(sqrt|\\u221A)(.*)/);\n    if (m) {\n      // Square root\n      m = parseMathArgument(m[2], {\n        inlineShortcuts: options?.inlineShortcuts ?? {},\n        noWrap: true,\n      });\n      const sqrtArgument = m.match ?? '\\\\placeholder{}';\n      s = '\\\\sqrt{' + sqrtArgument + '}';\n      s += parseMathExpression(m.rest, options);\n      done = true;\n    }\n  }\n\n  if (!done) {\n    m = s.match(/^(\\\\cbrt|\\u221B)(.*)/);\n    if (m) {\n      // Cube root\n      m = parseMathArgument(m[2], {\n        inlineShortcuts: options?.inlineShortcuts ?? {},\n        noWrap: true,\n      });\n      const sqrtArgument = m.match ?? '\\\\placeholder{}';\n      s = '\\\\sqrt[3]{' + sqrtArgument + '}';\n      s += parseMathExpression(m.rest, options);\n      done = true;\n    }\n  }\n\n  if (!done) {\n    m = s.match(/^abs(.*)/);\n    if (m) {\n      // Absolute value\n      m = parseMathArgument(m[1], {\n        inlineShortcuts: options?.inlineShortcuts ?? {},\n        noWrap: true,\n      });\n      s = '\\\\left|' + m.match + '\\\\right|';\n      s += parseMathExpression(m.rest, options);\n      done = true;\n    }\n  }\n\n  if (!done) {\n    m = s.match(/^[\"”“](.*?)[\"”“](.*)/);\n    if (m) {\n      // Quoted text\n      s = '\\\\text{' + m[1] + '}';\n      s += parseMathExpression(m[2], options);\n      done = true;\n    }\n  }\n\n  if (!done) {\n    m = s.match(/^([^a-zA-Z({[_^\\\\\\s\"]+)(.*)/);\n    // A string of symbols...\n    // Could be a binary or relational operator, etc...\n    if (m) {\n      s = paddedShortcut(m[1], options);\n      s += parseMathExpression(m[2], options);\n      done = true;\n    }\n  }\n\n  if (!done && /^([fgh])[^a-zA-Z]/.test(s)) {\n    // This could be a function...\n    m = parseMathArgument(s.slice(1), {\n      inlineShortcuts: options.inlineShortcuts ?? {},\n      noWrap: true,\n    });\n    s =\n      s[1] === '(' ? s[0] + '\\\\mleft(' + m.match + '\\\\mright)' : s[0] + m.match;\n    s += parseMathExpression(m.rest, options);\n    done = true;\n  }\n\n  if (!done) {\n    m = s.match(/^([a-zA-Z]+)(.*)/);\n    if (m) {\n      // Some alphabetical string...\n      // Could be a function name (sin) or symbol name (alpha)\n      s = paddedShortcut(m[1], options);\n      s += parseMathExpression(m[2], options);\n      done = true;\n    }\n  }\n\n  if (!done) {\n    m = parseMathArgument(s, {\n      inlineShortcuts: options.inlineShortcuts ?? {},\n      noWrap: true,\n    });\n    if (m.match && m.rest[0] === '/') {\n      // Fraction\n      const m2 = parseMathArgument(m.rest.slice(1), {\n        inlineShortcuts: options.inlineShortcuts ?? {},\n        noWrap: true,\n      });\n      if (m2.match) {\n        s =\n          '\\\\frac{' +\n          m.match +\n          '}{' +\n          m2.match +\n          '}' +\n          parseMathExpression(m2.rest, options);\n      }\n\n      done = true;\n    } else if (m.match) {\n      s = s.startsWith('(')\n        ? '\\\\left(' +\n          m.match +\n          '\\\\right)' +\n          parseMathExpression(m.rest, options)\n        : m.match + parseMathExpression(m.rest, options);\n      done = true;\n    }\n  }\n\n  if (!done) {\n    m = s.match(/^(\\s+)(.*)$/);\n    // Whitespace\n    if (m) {\n      s = ' ' + parseMathExpression(m[2], options);\n      done = true;\n    }\n  }\n\n  return s;\n}\n\n/**\n * Parse a math argument, as defined by ASCIIMath and UnicodeMath:\n * - Either an expression fenced in (), {} or []\n * - a number (- sign, digits, decimal point, digits)\n * - a single [a-zA-Z] letter (an identifier)\n * - a multi-letter shortcut (e.g., pi)\n * - a LaTeX command (\\pi) (for UnicodeMath)\n * @return\n * - match: the parsed (and converted) portion of the string that is an argument\n * - rest: the raw, unconverted, rest of the string\n */\nfunction parseMathArgument(\n  s: string,\n  options: {\n    noWrap?: boolean;\n    format?: string;\n    inlineShortcuts?: Record<string, InlineShortcutDefinition>;\n  }\n): { match: string; rest: string } {\n  let match = '';\n  s = s.trim();\n  let rest = s;\n  let lFence = s.charAt(0);\n  let rFence = { '(': ')', '{': '}', '[': ']' }[lFence];\n  if (rFence) {\n    // It's a fence\n    let level = 1;\n    let i = 1;\n    while (i < s.length && level > 0) {\n      if (s[i] === lFence) level++;\n      if (s[i] === rFence) level--;\n      i++;\n    }\n\n    if (level === 0) {\n      // We've found the matching closing fence\n      if (options.noWrap && lFence === '(') {\n        match = parseMathExpression(s.substring(1, i - 1), options);\n      } else {\n        if (lFence === '{' && rFence === '}') {\n          lFence = '\\\\{';\n          rFence = '\\\\}';\n        }\n\n        match =\n          '\\\\left' +\n          lFence +\n          parseMathExpression(s.substring(1, i - 1), options) +\n          '\\\\right' +\n          rFence;\n      }\n\n      rest = s.slice(Math.max(0, i));\n    } else {\n      // Unbalanced fence...\n      match = s.substring(1, i);\n      rest = '';\n    }\n  } else {\n    let m = s.match(/^([a-zA-Z]+)/);\n    if (m) {\n      // It's a string of letter, maybe a shortcut\n      let shortcut = getInlineShortcut(null, s, options.inlineShortcuts);\n      if (shortcut) {\n        shortcut = shortcut.replace('_{#?}', '');\n        shortcut = shortcut.replace('^{#?}', '');\n        return { match: shortcut, rest: s.slice(shortcut.length) };\n      }\n    }\n\n    m = s.match(/^([a-zA-Z])/);\n    if (m) {\n      // It's a single letter\n      return { match: m[1], rest: s.slice(1) };\n    }\n\n    m = s.match(/^(-)?\\d+(\\.\\d*)?/);\n    if (m) {\n      // It's a number\n      return { match: m[0], rest: s.slice(m[0].length) };\n    }\n\n    if (!/^\\\\(left|right)/.test(s)) {\n      // It's a LaTeX command (but not a \\left\\right)\n      m = s.match(/^(\\\\[a-zA-Z]+)/);\n      if (m) {\n        rest = s.slice(m[1].length);\n        match = m[1];\n      }\n    }\n  }\n\n  return { match, rest };\n}\n\nfunction paddedShortcut(s: string, options: { format?: string }): string {\n  let result = getInlineShortcut(null, s, options);\n  if (result) {\n    result = result.replace('_{#?}', '');\n    result = result.replace('^{#?}', '');\n    result += ' ';\n  } else {\n    result = s;\n  }\n\n  return result;\n}\n","/* eslint-disable no-new */\nimport { InsertOptions, Offset, Range } from '../public/mathfield';\nimport { MathfieldPrivate } from './mathfield-private';\nimport { jsonToLatex } from '../addons/math-json';\nimport { requestUpdate } from './render';\nimport { range } from '../editor-model/selection-utils';\nimport { ModeEditor } from './mode-editor';\nimport { ModelPrivate } from '../editor-model/model-private';\n\nimport { Atom } from '../core/atom-class';\nimport { ArrayAtom } from '../core-atoms/array';\n\nimport { parseMathString } from '../editor/parse-math-string';\n\nimport type { Style } from '../public/core';\nimport { LeftRightAtom } from '../core-atoms/leftright';\nimport { RIGHT_DELIM } from '../core/delimiters';\nimport {\n  contentDidChange,\n  selectionDidChange,\n} from '../editor-model/listeners';\nimport { applyStyleToUnstyledAtoms } from '../editor-model/styling';\nimport { parseLatex } from '../core/parser';\n\nexport class MathModeEditor extends ModeEditor {\n  constructor() {\n    super('math');\n  }\n\n  onPaste(mathfield: MathfieldPrivate, ev: ClipboardEvent): boolean {\n    let text = '';\n\n    // Try to get a MathJSON data type\n    const json = ev.clipboardData.getData('application/json');\n    if (json) {\n      try {\n        text = jsonToLatex(JSON.parse(json), {});\n      } catch {\n        text = '';\n      }\n    }\n\n    // If that didn't work, try some plain text\n    if (!text) {\n      text = ev.clipboardData.getData('text/plain');\n    }\n\n    if (text) {\n      if (\n        this.insert(mathfield.model, text, {\n          smartFence: mathfield.options.smartFence,\n        })\n      ) {\n        requestUpdate(mathfield);\n      }\n\n      ev.preventDefault();\n      ev.stopPropagation();\n    }\n\n    return true;\n  }\n\n  onCopy(mathfield: MathfieldPrivate, ev: ClipboardEvent): void {\n    const value: Range = mathfield.model.selectionIsCollapsed\n      ? [0, mathfield.model.lastOffset]\n      : range(mathfield.selection);\n    ev.clipboardData.setData(\n      'text/plain',\n      '$$' + mathfield.getValue(value, 'latex-expanded') + '$$'\n    );\n    ev.clipboardData.setData(\n      'application/json',\n      mathfield.getValue(value, 'math-json')\n    );\n    ev.clipboardData.setData(\n      'application/xml',\n      mathfield.getValue(value, 'math-ml')\n    );\n    // Prevent the current document selection from being written to the clipboard.\n    ev.preventDefault();\n  }\n\n  insert(model: ModelPrivate, text: string, options: InsertOptions): boolean {\n    if (!options.insertionMode) options.insertionMode = 'replaceSelection';\n    if (!options.selectionMode) options.selectionMode = 'placeholder';\n    if (!options.format) options.format = 'auto';\n    options.macros = options.macros ?? model.options.macros;\n\n    //\n    // Try to insert a smart fence.\n    //\n    if (!(options.smartFence ?? false)) {\n      // When smartFence is turned off, only do a \"smart\" fence insert\n      // if we're inside a `leftright`, at the last char\n      const { parent } = model.at(model.position);\n      if (\n        parent instanceof LeftRightAtom &&\n        parent.rightDelim === '?' &&\n        model.at(model.position).isLastSibling &&\n        /^[)}\\]|]$/.test(text)\n      ) {\n        parent.rightDelim = text;\n        model.position += 1;\n        selectionDidChange(model);\n        contentDidChange(model);\n        return true;\n      }\n    } else if (\n      model.selectionIsCollapsed &&\n      insertSmartFence(model, text, options.style)\n    ) {\n      return true;\n    }\n\n    const { suppressChangeNotifications } = model;\n    if (options.suppressChangeNotifications) {\n      model.suppressChangeNotifications = true;\n    }\n\n    const contentWasChanging = model.suppressChangeNotifications;\n    model.suppressChangeNotifications = true;\n\n    //\n    // Save the content of the selection, if any\n    //\n    const args: string[] = [];\n    args[0] = model.getValue(model.selection);\n    args['?'] = '\\\\placeholder{}';\n    args['@'] = args['?'];\n\n    //\n    // Delete any selected items\n    //\n    if (\n      options.insertionMode === 'replaceSelection' &&\n      !model.selectionIsCollapsed\n    ) {\n      model.position = model.deleteAtoms(range(model.selection));\n    } else if (options.insertionMode === 'replaceAll') {\n      model.root.setChildren([], 'body');\n      model.position = 0;\n    } else if (options.insertionMode === 'insertBefore') {\n      model.collapseSelection('backward');\n    } else if (options.insertionMode === 'insertAfter') {\n      model.collapseSelection('forward');\n    }\n\n    //\n    // Delete any placeholders before or after the insertion point\n    //\n    if (\n      !model.at(model.position).isLastSibling &&\n      model.at(model.position + 1).type === 'placeholder'\n    ) {\n      // Before a `placeholder`\n      model.deleteAtoms([model.position, model.position + 1]);\n    } else if (model.at(model.position).type === 'placeholder') {\n      // After a `placeholder`\n      model.deleteAtoms([model.position - 1, model.position]);\n      model.position -= 1;\n    }\n\n    //\n    // Calculate the implicit argument (#@)\n    //\n    if (args[0]) {\n      // There was a selection, we'll use it for #@\n      args['@'] = args[0];\n    } else if (/(^|[^\\\\])#@/.test(text)) {\n      // We'll use the preceding `mord`s or text mode atoms for it (implicit argument)\n      const offset = getImplicitArgOffset(model);\n      if (offset >= 0) {\n        args['@'] = model.getValue(offset, model.position);\n        model.deleteAtoms([offset, model.position]);\n        model.position = offset;\n      }\n    }\n\n    if (!args[0]) args[0] = args['?'];\n\n    const newAtoms = convertStringToAtoms(model, text, args, options);\n    if (!newAtoms) return false;\n\n    //\n    // Insert the new atoms\n    //\n    const { parent } = model.at(model.position);\n    // Are we inserting a fraction inside a lefright?\n    if (\n      options.format !== 'latex' &&\n      model.options.removeExtraneousParentheses &&\n      parent instanceof LeftRightAtom &&\n      parent.leftDelim === '(' &&\n      parent.hasEmptyBranch('body') &&\n      newAtoms.length === 1 &&\n      newAtoms[0].type === 'genfrac'\n    ) {\n      // Remove the leftright\n      // i.e. `\\left(\\frac{}{}\\right))` -> `\\frac{}{}`\n      const newParent = parent.parent;\n      const branch = parent.treeBranch;\n      newParent.removeChild(parent);\n      newParent.setChildren(newAtoms, branch);\n    } else {\n      if (options.format === 'latex' && args.length === 1 && !args[0]) {\n        // If we are given a latex string with no arguments, store it verbatim\n        // Caution: we can only do this if the toLatex() for this parent\n        // would return an empty string. If the latex is generated using other\n        // properties than parent.body, for example by adding '\\left.' and\n        // '\\right.' with a 'leftright' type, we can't use this shortcut.\n        if (parent.type === 'root' && parent.hasEmptyBranch('body')) {\n          parent.latex = text;\n        }\n      }\n\n      const cursor = model.at(model.position);\n      cursor.parent.addChildrenAfter(newAtoms, cursor);\n    }\n\n    // Prepare to dispatch notifications\n    // (for selection changes, then content change)\n    model.suppressChangeNotifications = contentWasChanging;\n\n    const lastNewAtom = newAtoms[newAtoms.length - 1];\n    // Update the anchor's location\n    if (options.selectionMode === 'placeholder') {\n      // Move to the next placeholder\n      const newPlaceholders = newAtoms.reduce(\n        (acc, atom) => [\n          ...acc,\n          ...atom.children.filter((x) => x.type === 'placeholder'),\n        ],\n        []\n      );\n\n      if (newPlaceholders.length > 0) {\n        const placeholderOffset = model.offsetOf(newPlaceholders[0]);\n        model.setSelection(placeholderOffset - 1, placeholderOffset);\n        model.announce('move'); // Should have placeholder selected\n      } else if (lastNewAtom) {\n        // No placeholder found, move to right after what we just inserted\n        model.position = model.offsetOf(lastNewAtom);\n      }\n    } else if (options.selectionMode === 'before') {\n      // Do nothing: don't change the position.\n    } else if (options.selectionMode === 'after') {\n      if (lastNewAtom) {\n        model.position = model.offsetOf(lastNewAtom);\n      }\n    } else if (options.selectionMode === 'item') {\n      model.setSelection(model.anchor, model.offsetOf(lastNewAtom));\n    }\n\n    contentDidChange(model);\n\n    model.suppressChangeNotifications = suppressChangeNotifications;\n\n    return true;\n  }\n}\n\nfunction convertStringToAtoms(\n  model: ModelPrivate,\n  s: string,\n  args: string[],\n  options: InsertOptions\n): Atom[] {\n  let result = [];\n  if (options.format === 'ascii-math') {\n    [, s] = parseMathString(s, { format: 'ascii-math' });\n    result = parseLatex(\n      s,\n      'math',\n      null,\n      options?.macros,\n      false,\n      model.listeners.onError\n    );\n\n    // Simplify result.\n    if (model.options.removeExtraneousParentheses) {\n      simplifyParen(result);\n    }\n  } else if (options.format === 'auto' || options.format === 'latex') {\n    if (options.format === 'auto') {\n      [options.format, s] = parseMathString(s);\n    }\n\n    // If the whole string is bracketed by a mode shift command, remove it\n    if (/^\\$\\$(.*)\\$\\$$/.test(s)) {\n      s = s.substring(2, s.length - 2);\n    }\n\n    result = parseLatex(\n      s,\n      'math',\n      args,\n      options.macros,\n      options.smartFence ?? false,\n      model.listeners.onError\n    );\n\n    // Simplify result.\n    if (\n      options.format !== 'latex' &&\n      model.options.removeExtraneousParentheses\n    ) {\n      simplifyParen(result);\n    }\n  }\n\n  // Some atoms may already have a style (for example if there was an\n  // argument, i.e. the selection, that this was applied to).\n  // So, don't apply style to atoms that are already styled, but *do*\n  // apply it to newly created atoms that have no style yet.\n  applyStyleToUnstyledAtoms(result, options.style);\n\n  return result;\n}\n\nfunction removeParen(atoms: Atom[]): Atom[] | null {\n  if (!atoms) return null;\n\n  console.assert(atoms[0].type === 'first');\n  if (atoms.length > 1) return null;\n\n  const atom = atoms[0];\n  if (\n    atom instanceof LeftRightAtom &&\n    atom.leftDelim === '(' &&\n    atom.rightDelim === ')'\n  ) {\n    return atom.removeBranch('body');\n  }\n\n  return null;\n}\n\n/**\n * If it's a fraction with a parenthesized numerator or denominator\n * remove the parentheses\n * @revisit: don't need model, only need to know if removeExtraneousParentheses\n *              Check at callsites.\n */\nfunction simplifyParen(atoms: Atom[]): void {\n  if (!atoms) return;\n  for (let i = 0; atoms[i]; i++) {\n    const atom = atoms[i];\n    if (atom instanceof LeftRightAtom && atom.leftDelim === '(') {\n      let genFracCount = 0;\n      let genFracIndex = 0;\n      let nonGenFracCount = 0;\n      for (let j = 0; atom.body[j]; j++) {\n        if (atom.body[j].type === 'genfrac') {\n          genFracCount++;\n          genFracIndex = j;\n        }\n\n        nonGenFracCount++;\n      }\n\n      if (nonGenFracCount === 0 && genFracCount === 1) {\n        // This is a single frac inside a leftright: remove the leftright\n        atoms[i] = atom.body[genFracIndex];\n      }\n    }\n  }\n\n  for (const atom of atoms) {\n    for (const branch of atom.branches) {\n      if (!atom.hasEmptyBranch(branch)) {\n        simplifyParen(atom.branch(branch));\n        const newChildren = removeParen(atom.branch(branch));\n        if (newChildren) atom.setChildren(newChildren, branch);\n      }\n    }\n\n    if (atom instanceof ArrayAtom) {\n      for (const x of atom.cells) simplifyParen(x);\n    }\n  }\n}\n\n/**\n * Locate the offset before the insertion point that would indicate\n * a good place to select as an implicit argument.\n *\n * For example with '1+\\sin(x)', if the insertion point is at the\n * end, the implicit arg offset would be after the plus. As a result,\n * inserting a fraction after the sin would yield: '1+\\frac{\\sin(c)}{\\placeholder{}}'\n */\nfunction getImplicitArgOffset(model: ModelPrivate): Offset {\n  let atom = model.at(model.position);\n  if (atom.mode === 'text') {\n    while (!atom.isFirstSibling && atom.mode === 'text') {\n      atom = atom.leftSibling;\n    }\n\n    return model.offsetOf(atom);\n  }\n\n  if (!isImplicitArg(atom)) {\n    return -1;\n  }\n\n  // Find the first 'mrel', etc... to the left of the insertion point\n  // until the first sibling\n  while (!atom.isFirstSibling && isImplicitArg(atom)) {\n    atom = atom.leftSibling;\n  }\n\n  return model.offsetOf(atom);\n}\n\n/**\n *\n * Predicate returns true if the atom should be considered an implicit argument.\n *\n * Used for example when typing \"/\" to insert a fraction: all the atoms to\n * the left of insertion point that return true for `isImplicitArg()` will\n * be included as the numerator\n */\nfunction isImplicitArg(atom: Atom): boolean {\n  if (/^(mord|surd|msubsup|leftright|mop)$/.test(atom.type)) {\n    // Exclude `\\int`, \\`sum`, etc...\n    if (atom.isExtensibleSymbol) return false;\n    return true;\n  }\n\n  return false;\n}\n\n/**\n * Insert a smart fence '(', '{', '[', etc...\n * If not handled (because `fence` wasn't a fence), return false.\n */\nexport function insertSmartFence(\n  model: ModelPrivate,\n  fence: string,\n  style: Style\n): boolean {\n  console.assert(model.selectionIsCollapsed);\n  const atom = model.at(model.position);\n  const { parent } = atom;\n  let delims =\n    parent instanceof LeftRightAtom ? parent.leftDelim + parent.rightDelim : '';\n  if (delims === '\\\\lbrace\\\\rbrace') delims = '{}';\n  if (delims === '\\\\{\\\\}') delims = '{}';\n\n  //\n  // 1. Are we inserting a middle fence?\n  // ...as in {...|...}\n  //\n  if (delims === '{}' && /\\||\\\\vert|\\\\Vert|\\\\mvert|\\\\mid/.test(fence)) {\n    ModeEditor.insert('math', model, '\\\\,\\\\middle' + fence + '\\\\, ', {\n      format: 'latex',\n      style,\n    });\n    return true;\n  }\n\n  // Normalize some fences.\n  // Note that '{' and '}' are not valid braces.\n  // They should be '\\{' or '\\lbrace' and '\\}' or '\\rbrace'\n  if (fence === '{' || fence === '\\\\{') fence = '\\\\lbrace';\n  if (fence === '}' || fence === '\\\\}') fence = '\\\\rbrace';\n  if (fence === '[') fence = '\\\\lbrack';\n  if (fence === ']') fence = '\\\\rbrack';\n\n  //\n  // 2. Is it an open fence?\n  //\n  const rDelim = RIGHT_DELIM[fence];\n  if (\n    rDelim &&\n    !(parent instanceof LeftRightAtom && parent.leftDelim === '|')\n  ) {\n    // We have a valid open fence as input\n    let s = '';\n\n    // If we're before a function (e.g. `\\sin`, or 'f'):  this is an\n    // argument list: Use `\\mleft...\\mright'.\n\n    s = atom.isFunction\n      ? `\\\\mleft${fence}\\\\mright${rDelim}`\n      : `\\\\left${fence}\\\\right?`;\n\n    const lastSiblingOffset = model.offsetOf(atom.lastSibling);\n    const content = model.extractAtoms([model.position, lastSiblingOffset]);\n    ModeEditor.insert('math', model, s, {\n      format: 'latex',\n      style,\n    });\n    // Move everything that was after the anchor into the leftright\n    model.at(model.position).body = content;\n    model.position -= 1;\n    return true;\n  }\n\n  //\n  // 3. Is it a close fence?\n  //\n  let lDelim: string;\n  Object.keys(RIGHT_DELIM).forEach((delim) => {\n    if (fence === RIGHT_DELIM[delim]) lDelim = delim;\n  });\n  if (lDelim) {\n    // We found a matching open fence, so it was a valid close fence.\n    // Note that `lDelim` may not match `fence`. That's OK.\n\n    // If we're the last atom inside a 'leftright',\n    // update the parent\n    if (parent instanceof LeftRightAtom && atom.isLastSibling) {\n      parent.rightDelim = fence;\n      model.position += 1;\n      contentDidChange(model);\n      return true;\n    }\n\n    // If we have a `leftright` sibling to our left\n    // with an indeterminate right fence,\n    // move what's between us and the `leftright` inside the `leftright`\n    const firstSibling = model.offsetOf(atom.firstSibling);\n    let i: number;\n    for (i = model.position; i >= firstSibling; i--) {\n      const atom = model.at(i);\n      if (atom instanceof LeftRightAtom && atom.rightDelim === '?') {\n        break;\n      }\n    }\n\n    const match = model.at(i);\n    if (i >= firstSibling && match instanceof LeftRightAtom) {\n      match.rightDelim = fence;\n      match.addChildren(\n        model.extractAtoms([i, model.position]),\n        atom.treeBranch\n      );\n      model.position = i;\n      contentDidChange(model);\n      return true;\n    }\n\n    // If we're inside a `leftright`, but not the last atom,\n    // and the `leftright` right delim is indeterminate\n    // adjust the body (put everything after the insertion point outside)\n    if (parent instanceof LeftRightAtom && parent.rightDelim === '?') {\n      parent.rightDelim = fence;\n\n      parent.parent.addChildren(\n        model.extractAtoms([model.position, model.offsetOf(atom.lastSibling)]),\n        parent.treeBranch\n      );\n      model.position = model.offsetOf(parent);\n      contentDidChange(model);\n\n      return true;\n    }\n\n    // Is our grand-parent a 'leftright'?\n    // If `\\left(\\frac{1}{x|}\\right?` with the cursor at `|`\n    // go up to the 'leftright' and apply it there instead\n    const grandparent = parent.parent;\n    if (\n      grandparent instanceof LeftRightAtom &&\n      grandparent.rightDelim === '?' &&\n      model.at(model.position).isLastSibling\n    ) {\n      model.position = model.offsetOf(grandparent);\n      return insertSmartFence(model, fence, style);\n    }\n\n    // Meh... We couldn't find a matching open fence. Just insert the\n    // closing fence as a regular character\n    return false;\n  }\n\n  return false;\n}\n\nnew MathModeEditor();\n","import type { Selector } from '../public/commands';\nimport { Atom } from '../core/atom-class';\nimport { parseLatex } from '../core/parser';\nimport {\n  mightProducePrintableCharacter,\n  eventToChar,\n} from '../editor/keyboard';\nimport {\n  getInlineShortcutsStartingWith,\n  getInlineShortcut,\n} from '../editor/shortcuts';\nimport {\n  getCommandForKeybinding,\n  getKeybindingMarkup,\n} from '../editor/keybindings';\nimport { splitGraphemes } from '../core/grapheme-splitter';\nimport { HAPTIC_FEEDBACK_DURATION, SelectorPrivate } from '../editor/commands';\nimport { updateAutocomplete } from './autocomplete';\n\nimport { requestUpdate } from './render';\n\nimport type { MathfieldPrivate } from './mathfield-private';\n\nimport { removeIsolatedSpace, smartMode } from './smartmode';\n\nimport {\n  getActiveKeyboardLayout,\n  validateKeyboardLayout,\n} from '../editor/keyboard-layout';\nimport { ParseMode, Style } from '../public/core';\nimport { moveAfterParent } from '../editor-model/commands-move';\nimport { range } from '../editor-model/selection-utils';\nimport { insertSmartFence } from './mode-editor-math';\nimport { ModeEditor } from './mode-editor';\nimport { effectiveMode } from '../editor/options';\n\nexport function showKeystroke(\n  mathfield: MathfieldPrivate,\n  keystroke: string\n): void {\n  const vb = mathfield.keystrokeCaption;\n  if (vb && mathfield.keystrokeCaptionVisible) {\n    const bounds = mathfield.element.getBoundingClientRect();\n    vb.style.left = `${bounds.left}px`;\n    vb.style.top = `${bounds.top - 64}px`;\n    vb.innerHTML = mathfield.options.createHTML(\n      '<span>' +\n        (getKeybindingMarkup(keystroke) || keystroke) +\n        '</span>' +\n        vb.innerHTML\n    );\n    vb.style.visibility = 'visible';\n    setTimeout(() => {\n      if (vb.childNodes.length > 0) {\n        vb.childNodes[vb.childNodes.length - 1].remove();\n      }\n\n      if (vb.childNodes.length === 0) {\n        vb.style.visibility = 'hidden';\n      }\n    }, 3000);\n  }\n}\n\n/**\n * @param evt - An Event corresponding to the keystroke.\n */\nexport function onKeystroke(\n  mathfield: MathfieldPrivate,\n  keystroke: string,\n  evt: KeyboardEvent\n): boolean {\n  const { model } = mathfield;\n\n  // 1. Update the keybindings according to the current keyboard layout\n\n  // 1.1 Possibly update the current keyboard layout based on this event\n  validateKeyboardLayout(evt);\n\n  const activeLayout = getActiveKeyboardLayout();\n  if (mathfield.keyboardLayout !== activeLayout.id) {\n    // console.log('Switching to keyboard layout ' + activeLayout.id);\n    mathfield.keyboardLayout = activeLayout.id;\n    mathfield._keybindings = undefined;\n  }\n\n  // 2. Display the keystroke in the keystroke panel (if visible)\n  showKeystroke(mathfield, keystroke);\n\n  // 3. Reset the timer for the keystroke buffer reset\n  clearTimeout(mathfield.keystrokeBufferResetTimer);\n\n  // 4. Give a chance to the custom keystroke handler to intercept the event\n  if (\n    mathfield.options.onKeystroke &&\n    !mathfield.options.onKeystroke(mathfield, keystroke, evt)\n  ) {\n    if (evt?.preventDefault) {\n      evt.preventDefault();\n      evt.stopPropagation();\n    }\n\n    return false;\n  }\n\n  // 5. Let's try to find a matching shortcut or command\n  let shortcut: string;\n  let stateIndex: number;\n  let selector: Selector | '' | [Selector, ...any[]];\n  let resetKeystrokeBuffer = false;\n  // 5.1 Check if the keystroke, prefixed with the previously typed keystrokes,\n  // would match a long shortcut (i.e. '~~')\n  // Ignore the key if command or control is pressed (it may be a keybinding,\n  // see 5.3)\n  if (mathfield.mode !== 'latex' && (!evt || (!evt.ctrlKey && !evt.metaKey))) {\n    if (keystroke === '[Backspace]') {\n      // Special case for backspace\n      mathfield.keystrokeBuffer = mathfield.keystrokeBuffer.slice(0, -1);\n      mathfield.keystrokeBufferStates.pop();\n      mathfield.resetKeystrokeBuffer({ defer: true });\n    } else if (!mightProducePrintableCharacter(evt)) {\n      // It was a non-alpha character (PageUp, End, etc...)\n      mathfield.resetKeystrokeBuffer();\n    } else {\n      const c = eventToChar(evt);\n      // Find the longest substring that matches a shortcut\n      const candidate = mathfield.keystrokeBuffer + c;\n      let i = 0;\n      while (!shortcut && i < candidate.length) {\n        const context: Atom[] = mathfield.keystrokeBufferStates[i]\n          ? parseLatex(\n              mathfield.keystrokeBufferStates[i].latex,\n              effectiveMode(mathfield.options),\n              null,\n              mathfield.options.macros\n            )\n          : // The context is from the start of the group to the current position\n            model.getAtoms(\n              model.offsetOf(model.at(model.position).firstSibling),\n              model.position\n            );\n        shortcut = getInlineShortcut(\n          context,\n          candidate.slice(i),\n          mathfield.options.inlineShortcuts\n        );\n        i += 1;\n      }\n\n      stateIndex =\n        mathfield.keystrokeBufferStates.length - (candidate.length - i);\n      mathfield.keystrokeBuffer += c;\n      mathfield.keystrokeBufferStates.push(mathfield.getUndoRecord());\n      if (\n        getInlineShortcutsStartingWith(candidate, mathfield.options).length <= 1\n      ) {\n        // There's only a single shortcut matching this sequence.\n        // We can confidently reset the keystroke buffer\n        resetKeystrokeBuffer = true;\n      } else {\n        // There are several potential shortcuts matching this sequence\n        // Don't reset the keystroke buffer yet, in case some\n        // keys typed later disambiguate the desirted shortcut,\n        // but schedule a defered reset. This handles the case if there\n        // was a shortcut for \"sin\" and \"sinh\", to avoid the detecting\n        // of the \"sin\" shortcut from ever having the \"sinh\" shortcut\n        // triggered.\n        mathfield.resetKeystrokeBuffer({ defer: true });\n      }\n    }\n  }\n\n  // 5.2. Should we switch mode?\n  // Need to check this before determing if there's a valid shortcut\n  // since if we switch to math mode, we may want to apply the shortcut\n  // e.g. \"slope = rise/run\"\n  if (mathfield.options.smartMode) {\n    const previousMode = mathfield.mode;\n    if (shortcut) {\n      // If we found a shortcut (e.g. \"alpha\"),\n      // switch to math mode and insert it\n      mathfield.mode = 'math';\n    } else if (smartMode(mathfield, keystroke, evt)) {\n      mathfield.mode = { math: 'text', text: 'math' }[mathfield.mode];\n      selector = '';\n    }\n\n    // Notify of mode change\n    if (\n      mathfield.mode !== previousMode &&\n      typeof mathfield.options.onModeChange === 'function'\n    ) {\n      mathfield.options.onModeChange(mathfield, mathfield.mode);\n    }\n  }\n\n  // 5.3 Check if this matches a keybinding\n  // Need to check this **after** checking for inline shortcuts because\n  // shift+backquote is a keybinding that inserts \"\\~\"\", but \"~~\" is a\n  // shortcut for \"\\approx\" and needs to have priority over shift+backquote\n  if (!shortcut && !selector) {\n    selector = getCommandForKeybinding(\n      mathfield.keybindings,\n      mathfield.mode,\n      keystroke\n    );\n  }\n\n  if (\n    !shortcut &&\n    !selector &&\n    (keystroke === '[Enter]' || keystroke === '[Return]')\n  ) {\n    // No matching keybinding: trigger a commit\n    if (typeof mathfield.options.onCommit === 'function') {\n      mathfield.options.onCommit(mathfield);\n      if (evt?.preventDefault) {\n        evt.preventDefault();\n        evt.stopPropagation();\n      }\n\n      return false;\n    }\n  }\n\n  // No shortcut :( We're done.\n  if (!shortcut && !selector) {\n    return true;\n  }\n\n  //\n  // 6. Perform the action matching this selector or insert the shortcut\n  //\n\n  //\n  // 6.1 If we have a `moveAfterParent` selector (usually triggered with\n  // `spacebar), and we're at the end of a smart fence, close the fence with\n  // an empty (.) right delimiter\n  //\n  const child = model.at(Math.max(model.position, model.anchor));\n  const { parent } = child;\n  if (\n    selector === 'moveAfterParent' &&\n    parent &&\n    parent.type === 'leftright' &&\n    child.isLastSibling &&\n    mathfield.options.smartFence &&\n    insertSmartFence(model, '.', mathfield.style)\n  ) {\n    // Pressing the space bar (moveAfterParent selector) when at the end\n    // of a potential smartFence will close it as a semi-open fence\n    selector = '';\n    requestUpdate(mathfield); // Re-render the closed smartFence\n  }\n\n  //\n  // 6.2 If this is the Space bar and we're just before or right after\n  // a text zone, or if `mathModeSpace` is enabled, insert the space\n  //\n  if (mathfield.mode === 'math' && keystroke === '[Space]' && !shortcut) {\n    if (mathfield.options.mathModeSpace) {\n      mathfield.snapshot();\n      ModeEditor.insert('math', model, mathfield.options.mathModeSpace);\n      selector = '';\n      mathfield.dirty = true;\n    } else {\n      const nextSibling = model.at(model.position + 1);\n      const previousSibling = model.at(model.position - 1);\n      if (\n        (nextSibling && nextSibling.mode === 'text') ||\n        (previousSibling && previousSibling.mode === 'text')\n      ) {\n        mathfield.snapshot();\n        ModeEditor.insert('text', model, ' ');\n        mathfield.dirty = true;\n      }\n    }\n  }\n\n  //\n  // 6.3 If there's a selector, perform it.\n  //\n  if (selector) {\n    mathfield.executeCommand(selector);\n  } else if (shortcut) {\n    //\n    // 6.5 Cancel the (upcoming) composition\n\n    // This is to prevent starting a composition when the keyboard event\n    // has already been handled.\n    // Example: alt+U -> \\cup, but could also be diaeresis deak key (¨) which\n    // starts a composition\n    //\n    mathfield.keyboardDelegate.cancelComposition();\n\n    //\n    // 6.6 Insert the shortcut\n    // If the shortcut is a mandatory escape sequence (\\}, etc...)\n    // don't make it undoable, this would result in syntactically incorrect\n    // formulas\n    //\n    const style: Style = {\n      ...model.at(model.position).computedStyle,\n      ...mathfield.style,\n    };\n    if (\n      !/^(\\\\{|\\\\}|\\\\[|\\\\]|\\\\@|\\\\#|\\\\$|\\\\%|\\\\^|\\\\_|\\\\backslash)$/.test(shortcut)\n    ) {\n      // To enable the substitution to be undoable,\n      // insert the character before applying the substitution\n      const saveMode = mathfield.mode;\n      ModeEditor.insert(mathfield.mode, model, eventToChar(evt), {\n        suppressChangeNotifications: true,\n        style,\n      });\n      // Create a snapshot with the inserted character\n      mathfield.snapshotAndCoalesce();\n      // Revert to the state before the beginning of the shortcut\n      // (restore doesn't change the undo stack)\n      mathfield.restoreToUndoRecord(\n        mathfield.keystrokeBufferStates[stateIndex]\n      );\n      mathfield.mode = saveMode;\n    }\n\n    model.deferNotifications(\n      { content: true, selection: true },\n      (): boolean => {\n        // Insert the substitute, possibly as a smart fence\n        ModeEditor.insert(mathfield.mode, model, shortcut, {\n          format: 'latex',\n          style,\n          smartFence: true,\n        });\n        // Check if as a result of the substitution there is now an isolated\n        // (text mode) space (surrounded by math). In which case, remove it.\n        removeIsolatedSpace(mathfield.model);\n        // Switch (back) to text mode if the shortcut ended with a space\n        if (shortcut.endsWith(' ')) {\n          mathfield.mode = 'text';\n          ModeEditor.insert('text', model, ' ', { style });\n        }\n\n        return true; // Content changed\n      }\n    );\n    mathfield.snapshot();\n    mathfield.dirty = true; // Mark the field as dirty. It will get rendered in scrollIntoView()\n    model.announce('replacement');\n    // If we're done with the shortcuts (found a unique one), reset it.\n    if (resetKeystrokeBuffer) {\n      mathfield.resetKeystrokeBuffer();\n    }\n  }\n\n  //\n  // 7. Make sure the insertion point is scrolled into view\n  //\n  mathfield.scrollIntoView();\n\n  //\n  // 8. Keystroke has been handled, if it wasn't caught in the default\n  // case, so prevent propagation\n  //\n  if (evt?.preventDefault) {\n    evt.preventDefault();\n    evt.stopPropagation();\n  }\n\n  return false;\n}\n\n/**\n * This handler is invoked when text has been typed, pasted in or input with\n * an input method. As a result, `text` can be a sequence of characters to\n * be inserted.\n * @param {object} options\n * @param {boolean} options.focus - If true, the mathfield will be focused\n * @param {boolean} options.feedback - If true, provide audio and haptic feedback\n * @param {boolean} options.simulateKeystroke - If true, generate some synthetic\n * keystrokes (useful to trigger inline shortcuts, for example)\n * @private\n */\nexport function onTypedText(\n  mathfield: MathfieldPrivate,\n  text: string,\n  options?: {\n    focus?: boolean;\n    feedback?: boolean;\n    mode?: ParseMode;\n    simulateKeystroke?: boolean;\n  }\n): void {\n  const { model } = mathfield;\n  if (mathfield.options.readOnly) {\n    model.announce('plonk');\n    return;\n  }\n\n  options = options ?? {};\n\n  //\n  // 1/ Focus, then provide audio and haptic feedback\n  //\n  if (options.focus) {\n    mathfield.focus();\n  }\n\n  if (options.feedback) {\n    if (mathfield.options.keypressVibration && navigator?.vibrate) {\n      navigator.vibrate(HAPTIC_FEEDBACK_DURATION);\n    }\n\n    mathfield.keypressSound?.play().catch(console.warn);\n  }\n\n  //\n  // 2/ Switch mode if requested\n  //\n  if (typeof options.mode === 'string' && mathfield.mode !== options.mode) {\n    mathfield.switchMode(options.mode);\n  }\n\n  //\n  // 3/ Simulate keystroke, if requested\n  //\n  if (options.simulateKeystroke) {\n    // For (const c of text) {\n    const c = text.charAt(0);\n    const ev = new KeyboardEvent('keypress', { key: c });\n    if (!onKeystroke(mathfield, c, ev)) {\n      return;\n    }\n    // }\n  }\n\n  //\n  // 4/ Insert the specified text at the current insertion point.\n  // If the selection is not collapsed, the content will be deleted first.\n  //\n\n  const style: Style = {\n    ...model.at(model.position).computedStyle,\n    // Variant: 'main',\n    ...mathfield.style,\n  };\n  if (!model.selectionIsCollapsed) {\n    model.position = model.deleteAtoms(range(model.selection));\n  }\n\n  // Decompose the string into an array of graphemes.\n  // This is necessary to correctly process what is displayed as a single\n  // glyph (a grapheme) but which is composed of multiple Unicode\n  // codepoints. This is the case in particular for some emojis, such as\n  // those with a skin tone modifier, the country flags emojis or\n  // compound emojis such as the professional emojis, including the\n  // David Bowie emoji: 👨🏻‍🎤\n  const graphemes = splitGraphemes(text);\n  if (mathfield.mode === 'latex') {\n    model.deferNotifications({ content: true, selection: true }, () => {\n      for (const c of graphemes) {\n        ModeEditor.insert('latex', model, c);\n      }\n\n      updateAutocomplete(mathfield);\n    });\n  } else if (mathfield.mode === 'text') {\n    for (const c of graphemes) {\n      ModeEditor.insert('text', model, c, { style });\n    }\n  } else if (mathfield.mode === 'math') {\n    for (const c of graphemes) {\n      // Some characters are mapped to commands. Handle them here.\n      // This is important to handle synthetic text input and\n      // non-US keyboards, on which, fop example, the '^' key is\n      // not mapped to 'Shift-Digit6'.\n      let selector: SelectorPrivate | [SelectorPrivate, ...unknown[]] = ({\n        '^': 'moveToSuperscript',\n        '_': 'moveToSubscript',\n        ' ': 'moveAfterParent',\n      } as const)[c];\n      if (c === ' ' && mathfield.options.mathModeSpace) {\n        selector = ['insert', mathfield.options.mathModeSpace];\n      }\n      if (selector) {\n        mathfield.executeCommand(selector);\n      } else if (\n        /\\d/.test(c) &&\n        mathfield.options.smartSuperscript &&\n        model.at(model.position).treeBranch === 'superscript' &&\n        model.at(model.position).hasNoSiblings\n      ) {\n        // We are inserting a digit into an empty superscript\n        // If smartSuperscript is on, insert the digit, and\n        // exit the superscript.\n        ModeEditor.insert('math', model, c, { style });\n        moveAfterParent(model);\n      } else {\n        ModeEditor.insert('math', model, c, {\n          style,\n          smartFence: mathfield.options.smartFence,\n        });\n      }\n    }\n  }\n\n  //\n  // 5/ Take a snapshot for undo stack\n  //\n  mathfield.snapshotAndCoalesce();\n\n  //\n  // 6/ Render the mathfield\n  //\n  mathfield.dirty = true;\n\n  // Render and make sure the insertion point is visible\n  mathfield.scrollIntoView();\n}\n","import { ParseMode } from '../public/core';\nimport { register as registerCommand } from '../editor/commands';\nimport { complete } from './autocomplete';\nimport type { MathfieldPrivate } from './mathfield-private';\nimport { onTypedText } from './keyboard-input';\n\nregisterCommand({\n  undo: (mathfield: MathfieldPrivate) => {\n    complete(mathfield, 'accept');\n    // Undo to the previous state\n    mathfield.undo();\n    return true;\n  },\n  redo: (mathfield: MathfieldPrivate) => {\n    complete(mathfield, 'accept');\n    mathfield.redo();\n    return true;\n  },\n  scrollIntoView: (mathfield: MathfieldPrivate) => {\n    mathfield.scrollIntoView();\n    return true;\n  },\n  scrollToStart: (mathfield: MathfieldPrivate) => {\n    mathfield.field.scroll(0, 0);\n    return true;\n  },\n  scrollToEnd: (mathfield: MathfieldPrivate) => {\n    const fieldBounds = mathfield.field.getBoundingClientRect();\n    mathfield.field.scroll(fieldBounds.left - window.scrollX, 0);\n    return true;\n  },\n  enterLatexMode: (mathfield: MathfieldPrivate) => {\n    mathfield.switchMode('latex');\n    return true;\n  },\n  toggleKeystrokeCaption: (mathfield: MathfieldPrivate) => {\n    mathfield.keystrokeCaptionVisible = !mathfield.keystrokeCaptionVisible;\n    mathfield.keystrokeCaption.innerHTML = '';\n    if (!mathfield.keystrokeCaptionVisible) {\n      mathfield.keystrokeCaption.style.visibility = 'hidden';\n    }\n\n    return false;\n  },\n  switchMode: (mathfield: MathfieldPrivate, mode: ParseMode) => {\n    mathfield.switchMode(mode);\n    return true;\n  },\n  insert: (mathfield: MathfieldPrivate, s: string, options) =>\n    mathfield.insert(s, options),\n  typedText: (mathfield: MathfieldPrivate, text: string, options) => {\n    onTypedText(mathfield, text, options);\n    return true;\n  },\n  commit: (mathfield: MathfieldPrivate) => {\n    if (typeof mathfield.options.onCommit === 'function') {\n      mathfield.options.onCommit(mathfield);\n    }\n\n    return true;\n  },\n});\n\nregisterCommand(\n  {\n    copyToClipboard: (mathfield: MathfieldPrivate) => {\n      mathfield.focus();\n      // If the selection is empty, select the entire field before\n      // copying it.\n      if (mathfield.model.selectionIsCollapsed) {\n        mathfield.select();\n      }\n\n      document.execCommand('copy');\n      return false;\n    },\n\n    cutToClipboard: (mathfield: MathfieldPrivate) => {\n      mathfield.focus();\n      document.execCommand('cut');\n      return true;\n    },\n\n    pasteFromClipboard: (mathfield: MathfieldPrivate) => {\n      mathfield.focus();\n      document.execCommand('paste');\n      return true;\n    },\n  },\n  { target: 'mathfield', category: 'clipboard' }\n);\n","import { Style, FontSeries, FontShape, FontSize } from '../public/core';\nimport { MathfieldPrivate } from './mathfield-private';\nimport { applyStyle as applyStyleToModel } from '../editor-model/styling';\nimport { register as registerCommand } from '../editor/commands';\n\nexport function applyStyle(\n  mathfield: MathfieldPrivate,\n  inStyle: Style\n): boolean {\n  const style = validateStyle(inStyle);\n  mathfield.resetKeystrokeBuffer();\n  const { model } = mathfield;\n  if (model.selectionIsCollapsed) {\n    // No selection, let's update the 'current' style\n    if (\n      mathfield.style.fontSeries &&\n      style.fontSeries === mathfield.style.fontSeries\n    ) {\n      style.fontSeries = 'auto';\n    }\n\n    if (style.fontShape && style.fontShape === mathfield.style.fontShape) {\n      style.fontShape = 'auto';\n    }\n\n    if (style.color && style.color === mathfield.style.color) {\n      style.color = 'none';\n    }\n\n    if (\n      style.backgroundColor &&\n      style.backgroundColor === mathfield.style.backgroundColor\n    ) {\n      style.backgroundColor = 'none';\n    }\n\n    if (style.fontSize && style.fontSize === mathfield.style.fontSize) {\n      style.fontSize = 'auto';\n    }\n\n    // This global style will be used the next time an atom is inserted\n    mathfield.style = { ...mathfield.style, ...style };\n  } else {\n    mathfield.model.deferNotifications({ content: true }, () => {\n      // Change the style of the selection\n      model.selection.ranges.forEach((range) =>\n        applyStyleToModel(model, range, style, { operation: 'toggle' })\n      );\n      mathfield.snapshot();\n    });\n  }\n\n  return true;\n}\n\nregisterCommand({ applyStyle }, { target: 'mathfield' });\n\n/**\n * Validate a style specification object\n */\nfunction validateStyle(style: Record<string, any>): Style {\n  const result: Style = {};\n\n  if (typeof style.color === 'string') {\n    result.color = style.color;\n  }\n\n  if (typeof style.backgroundColor === 'string') {\n    result.backgroundColor = style.backgroundColor;\n  }\n\n  if (typeof style.fontFamily === 'string') {\n    result.fontFamily = style.fontFamily;\n  }\n\n  if (typeof style.series === 'string') {\n    result.fontSeries = style.series as FontSeries;\n  }\n\n  if (typeof style.fontSeries === 'string') {\n    result.fontSeries = style.fontSeries.toLowerCase() as FontSeries;\n  }\n\n  if (result.fontSeries) {\n    result.fontSeries =\n      {\n        bold: 'b',\n        medium: 'm',\n        normal: 'm',\n      }[result.fontSeries] || result.fontSeries;\n  }\n\n  if (typeof style.shape === 'string') {\n    result.fontShape = style.shape as FontShape;\n  }\n\n  if (typeof style.fontShape === 'string') {\n    result.fontShape = style.fontShape.toLowerCase() as FontShape;\n  }\n\n  if (result.fontShape) {\n    result.fontShape =\n      {\n        italic: 'it',\n        up: 'n',\n        upright: 'n',\n        normal: 'n',\n      }[result.fontShape] || result.fontShape;\n  }\n\n  if (typeof style.size === 'string') {\n    result.fontSize = style.size as FontSize;\n  } else if (typeof style.size === 'number') {\n    result.fontSize = `size${Math.min(\n      0,\n      Math.max(10, style.size)\n    )}` as FontSize;\n  }\n\n  if (typeof style.fontSize === 'string') {\n    result.fontSize = style.fontSize.toLowerCase() as FontSize;\n  }\n\n  if (result.fontSize) {\n    result.fontSize =\n      {\n        tiny: 'size1',\n        scriptsize: 'size2',\n        footnotesize: 'size3',\n        small: 'size4',\n        normal: 'size5',\n        normalsize: 'size5',\n        large: 'size6',\n        Large: 'size7',\n        LARGE: 'size8',\n        huge: 'size9',\n        Huge: 'size10',\n      }[result.fontSize] || result.fontSize;\n  }\n\n  return result;\n}\n","import { on, off, getAtomBounds, Rect } from './utils';\nimport type { MathfieldPrivate } from './mathfield-private';\nimport { renderSelection, requestUpdate } from './render';\nimport { Offset } from '../public/mathfield';\nimport { Atom } from '../core/atom-class';\nimport { acceptCommandSuggestion } from './autocomplete';\nimport { selectGroup } from '../editor-model/commands-select';\n\nlet gLastTap: { x: number; y: number; time: number };\nlet gTapCount = 0;\n\nfunction isTouchEvent(evt: Event): evt is TouchEvent {\n  return globalThis.TouchEvent !== undefined && evt instanceof TouchEvent;\n}\n\nexport function onPointerDown(\n  mathfield: MathfieldPrivate,\n  evt: PointerEvent | TouchEvent\n): void {\n  //Reset the atom bounds cache\n  mathfield._atomBoundsCache = new Map<string, Rect>();\n\n  const that = mathfield;\n  let anchor: Offset;\n  let trackingPointer = false;\n  let trackingWords = false;\n  let dirty: 'none' | 'selection' | 'all' = 'none';\n\n  // If a mouse button other than the main one was pressed, return.\n  // On iOS 12.4 Safari and Firefox on Android (which do not support\n  // PointerEvent) the touchstart event is sent with event.buttons = 0\n  // which for a mouse event would normally be an invalid button.\n  // Accept this button 0.\n  if (evt instanceof PointerEvent && evt.buttons !== 1 && evt.buttons !== 0) {\n    return;\n  }\n\n  let scrollLeft = false;\n  let scrollRight = false;\n  // Note: evt['touches'] is for touchstart (when PointerEvent is not supported)\n  const anchorX = isTouchEvent(evt) ? evt.touches[0].clientX : evt.clientX;\n  const anchorY = isTouchEvent(evt) ? evt.touches[0].clientY : evt.clientY;\n  const anchorTime = Date.now();\n  const scrollInterval = setInterval(() => {\n    if (scrollLeft) {\n      that.field.scroll({ top: 0, left: that.field.scrollLeft - 16 });\n    } else if (scrollRight) {\n      that.field.scroll({ top: 0, left: that.field.scrollLeft + 16 });\n    }\n  }, 32);\n  function endPointerTracking(evt?: PointerEvent | TouchEvent): void {\n    if (window.PointerEvent) {\n      off(that.field, 'pointermove', onPointerMove);\n      off(that.field, 'pointerup pointercancel', endPointerTracking);\n      if (evt instanceof PointerEvent) {\n        that.field.releasePointerCapture(evt.pointerId);\n      }\n    } else {\n      off(that.field, 'touchmove', onPointerMove);\n      off(that.field, 'touchcancel touchend', endPointerTracking);\n      off(window, 'mousemove', onPointerMove);\n      off(window, 'mouseup blur', endPointerTracking);\n    }\n\n    trackingPointer = false;\n    clearInterval(scrollInterval);\n    mathfield.element.classList.remove('tracking');\n    if (evt) {\n      evt.preventDefault();\n      evt.stopPropagation();\n    }\n  }\n\n  function onPointerMove(evt: PointerEvent | TouchEvent): void {\n    // If we've somehow lost focus, end tracking\n    if (!that.hasFocus()) {\n      endPointerTracking();\n      return;\n    }\n\n    const x = isTouchEvent(evt) ? evt.touches[0].clientX : evt.clientX;\n    const y = isTouchEvent(evt) ? evt.touches[0].clientY : evt.clientY;\n    // Ignore events that are within small spatial and temporal bounds\n    // of the pointer down\n    const hysteresis =\n      isTouchEvent(evt) || evt.pointerType === 'touch' ? 20 : 5;\n    if (\n      Date.now() < anchorTime + 500 &&\n      Math.abs(anchorX - x) < hysteresis &&\n      Math.abs(anchorY - y) < hysteresis\n    ) {\n      evt.preventDefault();\n      evt.stopPropagation();\n      return;\n    }\n\n    const fieldBounds = that.field.getBoundingClientRect();\n    scrollRight = x > fieldBounds.right;\n    scrollLeft = x < fieldBounds.left;\n    let actualAnchor: Offset = anchor;\n    if (evt instanceof PointerEvent) {\n      if (!evt.isPrimary) {\n        actualAnchor = offsetFromPoint(that, evt.clientX, evt.clientY, {\n          bias: 0,\n        });\n      }\n    } else if (evt.touches && evt.touches.length === 2) {\n      actualAnchor = offsetFromPoint(\n        that,\n        evt.touches[1].clientX,\n        evt.touches[1].clientY,\n        { bias: 0 }\n      );\n    }\n\n    const focus = offsetFromPoint(that, x, y, {\n      bias: x <= anchorX ? (x === anchorX ? 0 : -1) : +1,\n    });\n    if (trackingWords) {\n      // @revisit: extend focus, actualAnchor to word boundary\n    }\n\n    if (actualAnchor >= 0 && focus >= 0) {\n      const wasCollapsed = mathfield.model.selectionIsCollapsed;\n      that.model.extendSelectionTo(actualAnchor, focus);\n      if (\n        acceptCommandSuggestion(mathfield.model) ||\n        wasCollapsed ||\n        mathfield.model.selectionIsCollapsed\n      ) {\n        requestUpdate(mathfield);\n      } else {\n        renderSelection(mathfield);\n      }\n    }\n\n    // Prevent synthetic mouseMove event when this is a touch event\n    evt.preventDefault();\n    evt.stopPropagation();\n  }\n\n  // Calculate the tap count\n  if (\n    gLastTap &&\n    Math.abs(gLastTap.x - anchorX) < 5 &&\n    Math.abs(gLastTap.y - anchorY) < 5 &&\n    Date.now() < gLastTap.time + 500\n  ) {\n    gTapCount += 1;\n    gLastTap.time = anchorTime;\n  } else {\n    gLastTap = {\n      x: anchorX,\n      y: anchorY,\n      time: anchorTime,\n    };\n    gTapCount = 1;\n  }\n\n  const bounds = mathfield.field.getBoundingClientRect();\n  if (\n    anchorX >= bounds.left &&\n    anchorX <= bounds.right &&\n    anchorY >= bounds.top &&\n    anchorY <= bounds.bottom\n  ) {\n    // Focus the mathfield\n    if (!mathfield.hasFocus()) {\n      dirty = 'all';\n      mathfield.keyboardDelegate.focus();\n    }\n\n    // Clicking or tapping the field resets the keystroke buffer and\n    // smart mode\n    mathfield.resetKeystrokeBuffer();\n    mathfield.smartModeSuppressed = false;\n\n    anchor = offsetFromPoint(mathfield, anchorX, anchorY, {\n      bias: 0,\n    });\n    if (anchor >= 0) {\n      // Set a `tracking` class to avoid triggering the hover of the virtual\n      // keyboard toggle, for example\n      mathfield.element.classList.add('tracking');\n\n      if (evt.shiftKey) {\n        // If the Shift key is down, extend the selection\n        // (in that case, 'anchor' is actually the focus\n        const wasCollapsed = mathfield.model.selectionIsCollapsed;\n        mathfield.model.extendSelectionTo(mathfield.model.anchor, anchor);\n        if (acceptCommandSuggestion(mathfield.model) || wasCollapsed) {\n          dirty = 'all';\n        } else {\n          dirty = 'selection';\n        }\n      } else if (mathfield.model.at(anchor).type === 'placeholder') {\n        mathfield.model.setSelection(anchor - 1, anchor);\n        dirty = 'selection';\n      } else if (\n        mathfield.model.at(anchor).rightSibling?.type === 'placeholder'\n      ) {\n        mathfield.model.setSelection(anchor, anchor + 1);\n        dirty = 'selection';\n      } else {\n        mathfield.model.position = anchor;\n        if (acceptCommandSuggestion(mathfield.model)) {\n          dirty = 'all';\n        } else {\n          dirty = 'selection';\n        }\n      }\n\n      // Reset any user-specified style\n      mathfield.style = {};\n      // `evt.detail` contains the number of consecutive clicks\n      // for double-click, triple-click, etc...\n      // (note that `evt.detail` is not set when using pointerEvent)\n      if (evt.detail === 3 || gTapCount > 2) {\n        endPointerTracking(evt);\n        if (evt.detail === 3 || gTapCount === 3) {\n          // This is a triple-click\n          mathfield.model.selection = {\n            ranges: [[0, mathfield.model.lastOffset]],\n          };\n          dirty = 'all';\n        }\n      } else if (!trackingPointer) {\n        trackingPointer = true;\n        if (window.PointerEvent) {\n          on(that.field, 'pointermove', onPointerMove);\n          on(that.field, 'pointerup pointercancel', endPointerTracking);\n          if (evt instanceof PointerEvent) {\n            that.field.setPointerCapture(evt.pointerId);\n          }\n        } else {\n          on(window, 'blur', endPointerTracking);\n          if (isTouchEvent(evt) && evt.touches) {\n            // This is a touchstart event (and PointerEvent is not supported)\n            // To receive the subsequent touchmove/touch, need to\n            // listen to this evt.target.\n            // This was a touch event\n            on(evt.target, 'touchmove', onPointerMove);\n            on(evt.target, 'touchcancel touchend', endPointerTracking);\n          } else {\n            on(window, 'mousemove', onPointerMove);\n            on(window, 'mouseup', endPointerTracking);\n          }\n        }\n\n        if (evt.detail === 2 || gTapCount === 2) {\n          // This is a double-click\n          trackingWords = true;\n          selectGroup(mathfield.model);\n          dirty = 'all';\n        }\n      }\n    }\n  } else {\n    gLastTap = null;\n  }\n\n  if (dirty !== 'none') {\n    if (mathfield.model.selectionIsCollapsed) dirty = 'all';\n    if (dirty === 'all') {\n      requestUpdate(mathfield);\n    } else {\n      renderSelection(mathfield);\n    }\n  }\n\n  // Prevent the browser from handling. In particular when this is a\n  // touch event, prevent the synthetic mouseDown event from being generated\n  evt.preventDefault();\n}\n\nfunction distance(x: number, y: number, r: Rect): number {\n  const dx = x - (r.left + r.right) / 2;\n  const dy = y - (r.top + r.bottom) / 2;\n  return dx * dx + dy * dy;\n}\n\nfunction nearestAtomFromPointRecursive(\n  mathfield: MathfieldPrivate,\n  cache: Map<string, [distance: number, atom: Atom | null]>,\n  atom: Atom,\n  x: number,\n  y: number\n): [distance: number, atom: Atom | null] {\n  if (!atom.id) return [Infinity, null];\n  if (cache.has(atom.id)) return cache.get(atom.id);\n\n  const bounds = getAtomBounds(mathfield, atom);\n  if (!bounds) return [Infinity, null];\n\n  let result: [distance: number, atom: Atom | null] = [\n    distance(x, y, bounds),\n    atom,\n  ];\n  //\n  // 1. Consider any children within the horizontal bounds\n  //\n  if (\n    !atom.captureSelection &&\n    x >= bounds.left &&\n    x <= bounds.right &&\n    atom.hasChildren\n  ) {\n    for (const child of atom.children) {\n      const r = nearestAtomFromPointRecursive(mathfield, cache, child, x, y);\n      if (r[0] < result[0]) result = r;\n    }\n  }\n\n  //\n  // 2. If no children matched, this atom matches\n  //\n  if (!result[1]) {\n    result = [distance(x, y, bounds), atom];\n  }\n  cache.set(atom.id, result);\n  return result;\n}\n\nfunction nearestAtomFromPoint(\n  mathfield: MathfieldPrivate,\n  x: number,\n  y: number\n): Atom {\n  return nearestAtomFromPointRecursive(\n    mathfield,\n    new Map(),\n    mathfield.model.root,\n    x,\n    y\n  )[1];\n}\n\n/**\n * @param options.bias  if 0, the midpoint of the bounding box\n * is considered to return the sibling. If <0, the left sibling is\n * favored, if >0, the right sibling\n */\nexport function offsetFromPoint(\n  mathfield: MathfieldPrivate,\n  x: number,\n  y: number,\n  options?: { bias?: -1 | 0 | 1 }\n): Offset {\n  //\n  // 1/ Check if we're inside the mathfield bounding box\n  //\n  const bounds = mathfield.fieldContent.getBoundingClientRect();\n  if (x > bounds.right || y > bounds.bottom + 8) {\n    return mathfield.model.lastOffset;\n  }\n\n  if (x < bounds.left || y < bounds.top - 8) {\n    return 0;\n  }\n\n  options = options ?? {};\n  options.bias = options.bias ?? 0;\n\n  //\n  // 2/ Find the deepest element that is near the point that was\n  // clicked on (the point could be outside of the element)\n  //\n  let atom = nearestAtomFromPoint(mathfield, x, y);\n\n  //\n  // 3/ Find the first parent from root that doesn't have a `captureSelection`\n  //    flag\n  //\n  const parents: Atom[] = [];\n  let parent = atom;\n  while (parent) {\n    parents.unshift(parent);\n    parent = parent.parent;\n  }\n  for (const x of parents) {\n    if (x.captureSelection) {\n      atom = x;\n      break;\n    }\n  }\n\n  let result = mathfield.model.offsetOf(atom);\n\n  if (result < 0) return -1;\n\n  //\n  // 4/ Account for the desired biad\n  //\n  if (atom.leftSibling) {\n    if (options.bias === 0 && atom.type !== 'placeholder') {\n      // If the point clicked is to the left of the vertical midline,\n      // adjust the offset to *before* the atom (i.e. after the\n      // preceding atom)\n      const bounds = getAtomBounds(mathfield, atom);\n      if (x < (bounds.left + bounds.right) / 2) {\n        result = mathfield.model.offsetOf(atom.leftSibling);\n      }\n    } else if (options.bias < 0) {\n      result = mathfield.model.offsetOf(atom.leftSibling);\n    }\n  }\n\n  return result;\n}\n","import { Atom } from '../core/atom';\nimport { Span, makeStruts } from '../core/span';\nimport { parseLatex } from '../core/parser';\nimport { LINE_COLORS, AREA_COLORS } from '../core/color';\nimport { l10n as l10nOptions, localize as l10n } from './l10n';\nimport { MATHSTYLES } from '../core/mathstyle';\nimport { attachButtonHandlers } from '../editor-mathfield/buttons';\nimport { releaseSharedElement } from '../editor-mathfield/utils';\n\nimport { inject as injectStylesheet } from '../common/stylesheet';\n\n// @ts-ignore-error\nimport virtualKeyboardStylesheet from '../../css/virtual-keyboard.less';\n// @ts-ignore-error\nimport coreStylesheet from '../../css/core.less';\nimport {\n  CoreOptions,\n  VirtualKeyboardDefinition,\n  VirtualKeyboardLayer,\n  VirtualKeyboardOptions,\n} from '../public/options';\nimport { VirtualKeyboardInterface } from '../public/mathfield';\nimport { getActiveKeyboardLayout } from './keyboard-layout';\nimport { loadFonts } from '../core/fonts';\nimport { isArray } from '../common/types';\nimport { COMMANDS, SelectorPrivate } from './commands';\nimport { ExecuteCommandFunction } from './commands-definitions';\nimport { MACROS } from '../core-definitions/definitions';\n\nexport class VirtualKeyboard implements VirtualKeyboardInterface {\n  options: VirtualKeyboardOptions & CoreOptions;\n  _visible: boolean;\n  _element?: HTMLDivElement;\n  _executeCommand: ExecuteCommandFunction;\n\n  constructor(\n    options: VirtualKeyboardOptions & CoreOptions,\n    alt?: {\n      executeCommand: ExecuteCommandFunction;\n    }\n  ) {\n    this.options = options;\n    this.visible = false;\n    this._executeCommand = alt?.executeCommand;\n    // Listen to know when the mouse has been released without being\n    // captured to remove the alternate keys panel and the shifted state of the\n    // keyboard.\n    // Note that we need to listen on the window to capture events happening\n    // outside the virtual keyboard.\n    // @todo should use a scrim instead (to prevent elements underneat the alt\n    // layer from reacting while the alt layer is up)\n    window.addEventListener('mouseup', this);\n    window.addEventListener('blur', this);\n    window.addEventListener('touchend', this);\n    window.addEventListener('touchcancel', this);\n  }\n\n  setOptions(options: VirtualKeyboardOptions & CoreOptions): void {\n    this.visible = false;\n    this._element?.remove();\n    this._element = undefined;\n    this.options = options;\n  }\n\n  get element(): HTMLDivElement {\n    return this._element;\n  }\n  set element(val: HTMLDivElement) {\n    this._element?.remove();\n    this._element = val;\n  }\n  get visible(): boolean {\n    return this._visible;\n  }\n  set visible(val: boolean) {\n    this._visible = val;\n  }\n\n  get height(): number {\n    return this.element?.offsetHeight ?? 0;\n  }\n\n  handleEvent(evt: Event): void {\n    if (!this.element) {\n      return;\n    }\n\n    switch (evt.type) {\n      case 'mouseup':\n      case 'blur':\n      case 'touchend':\n      case 'touchcancel':\n        unshiftKeyboardLayer(this);\n        break;\n    }\n  }\n\n  focusMathfield(): void {}\n\n  blurMathfield(): void {}\n\n  enable(): void {}\n\n  disable(): void {}\n\n  stateChanged(): void {}\n\n  executeCommand(\n    command: SelectorPrivate | [SelectorPrivate, ...any[]]\n  ): boolean {\n    let selector: SelectorPrivate;\n    let args: string[] = [];\n    if (isArray(command)) {\n      selector = command[0];\n      args = command.slice(1);\n    } else {\n      selector = command;\n    }\n\n    // Convert kebab case (like-this) to camel case (likeThis).\n    selector = selector.replace(/-\\w/g, (m) =>\n      m[1].toUpperCase()\n    ) as SelectorPrivate;\n    if (COMMANDS[selector]?.target === 'virtual-keyboard') {\n      return COMMANDS[selector].fn(this, ...args);\n    }\n\n    return this._executeCommand?.(command) ?? false;\n  }\n\n  dispose(): void {\n    this.visible = false;\n    releaseSharedElement(\n      document.querySelector('#mathlive-alternate-keys-panel')\n    );\n    window.removeEventListener('mouseup', this);\n    window.removeEventListener('blur', this);\n    window.removeEventListener('touchend', this);\n    window.removeEventListener('touchcancel', this);\n\n    this._element?.remove();\n    this._element = undefined;\n  }\n}\n\nconst KEYBOARDS: Record<string, VirtualKeyboardDefinition> = {\n  numeric: {\n    tooltip: 'keyboard.tooltip.numeric',\n    layer: 'math',\n    label: '123',\n    layers: ['math'],\n  },\n  roman: {\n    tooltip: 'keyboard.tooltip.roman',\n    layer: 'lower-roman',\n    label: 'ABC',\n    layers: ['lower-roman', 'upper-roman'],\n  },\n  greek: {\n    tooltip: 'keyboard.tooltip.greek',\n    layer: 'lower-greek',\n    label: '&alpha;&beta;&gamma;',\n    classes: 'tex-math',\n    layers: ['lower-greek', 'upper-greek'],\n  },\n  functions: {\n    tooltip: 'keyboard.tooltip.functions',\n    layer: 'functions',\n    label: '<i>f</i>&thinsp;()',\n    classes: 'tex',\n    layers: ['functions'],\n  },\n  symbols: {\n    tooltip: 'keyboard.tooltip.symbols',\n    layer: 'symbols',\n    label: '&infin;≠∈',\n    classes: 'tex',\n    layers: ['symbols'],\n  },\n  latex: {\n    tooltip: 'keyboard.tooltip.command',\n    // For the latex keyboard, perform a command rather than\n    // doing a simple layer switch, as we want to enter latex mode\n    // when the keyboard is activated\n    command: ['switchMode', 'latex'],\n    label: `<svg><use xlink:href='#svg-command' /></svg>`,\n    layers: ['latex-lower', 'latex-upper', 'latex-symbols'],\n  },\n  style: {\n    tooltip: 'keyboard.tooltip.style',\n    layer: 'style',\n    label: '<b>b</b><i>i</i>𝔹',\n  },\n};\n\nconst SHIFTED_KEYS = {\n  '\\\\varphi ': ['&Phi;', '\\\\Phi '],\n  '\\\\varsigma ': ['&Sigma;', '\\\\Sigma '],\n  '\\\\epsilon ': ['&#x0190;', '{\\\\char\"0190}'],\n  '\\\\rho ': ['&#x3A1', '{\\\\char\"3A1}'],\n  '\\\\tau ': ['&#x3A4;', '{\\\\char\"3A4}'],\n  '\\\\upsilon ': ['&Upsilon;', '\\\\Upsilon '],\n  '\\\\theta ': ['&Theta;', '\\\\Theta '],\n  '\\\\iota ': ['&Iota;', '{\\\\char\"399}'],\n  '\\\\omicron ': ['&#x039F;', '{\\\\char\"39F}'],\n  '\\\\pi ': ['&Pi;', '\\\\Pi '],\n  '\\\\alpha ': ['&Alpha;', '{\\\\char\"391}'],\n  '\\\\sigma ': ['&Sigma;', '\\\\Sigma '],\n  '\\\\delta ': ['&Delta;', '\\\\Delta '],\n  '\\\\phi ': ['&#x03a6;', '\\\\Phi '],\n  '\\\\gamma ': ['&Gamma;', '\\\\Gamma '],\n  '\\\\eta ': ['&Eta;', '{\\\\char\"397}'],\n  '\\\\xi ': ['&Xi;', '\\\\Xi '],\n  '\\\\kappa ': ['&Kappa;', '{\\\\char\"39A}'],\n  '\\\\lambda ': ['&Lambda;', '\\\\Lambda '],\n  '\\\\zeta ': ['&Zeta;', '{\\\\char\"396}'],\n  '\\\\chi ': ['&Chi;', '{\\\\char\"3A7}'],\n  '\\\\psi ': ['&Psi;', '\\\\Psi '],\n  '\\\\omega ': ['&Omega;', '\\\\Omega '],\n  '\\\\beta ': ['&Beta;', '{\\\\char\"392}'],\n  '\\\\nu ': ['&Nu;', '{\\\\char\"39D}'],\n  '\\\\mu ': ['&Mu;', '{\\\\char\"39C}'],\n};\n\n// Const FUNCTIONS = [\n//     'Basic',\n//         ['\\\\sin', '\\\\cos', '\\\\tan', '\\\\min', '\\\\max', '\\\\gcd', '\\\\lcm', '\\\\repeat', 'encapsulate', 'recognize'],\n//     'Operators',\n//         ['\\\\sum', '\\\\prod', '\\\\bigcup_x']\n// ]\nconst ALT_KEYS_BASE = {\n  '0': [\n    '\\\\emptyset',\n    '\\\\varnothing',\n    '\\\\infty',\n    { latex: '#?_0', insert: '#@_0' },\n    '\\\\circ',\n    '\\\\bigcirc',\n    '\\\\bullet',\n  ],\n  '2': ['\\\\frac{1}{2}', { latex: '#?^2', insert: '#@^2' }],\n  '3': ['\\\\frac{1}{3}', { latex: '#?^3', insert: '#@^3' }],\n  '.': [\n    ',',\n    ';',\n    '\\\\colon',\n    { latex: ':', aside: 'ratio' },\n    { latex: '\\\\cdotp', aside: 'center dot', classes: 'box' },\n    { latex: '\\\\cdots', aside: 'center ellipsis', classes: 'box' },\n    { latex: '\\\\ldotp', aside: 'low dot', classes: 'box' },\n    { latex: '\\\\ldots', aside: 'low ellipsis', classes: 'box' },\n    { latex: '\\\\vdots', aside: '', classes: 'box' },\n    { latex: '\\\\ddots', aside: '', classes: 'box' },\n    '\\\\odot',\n    '\\\\oslash',\n    '\\\\circledcirc',\n  ],\n\n  '*': [\n    '\\\\cdot',\n    '\\\\ast',\n    '\\\\star',\n    '\\\\bigstar',\n    '\\\\ltimes',\n    '\\\\rtimes',\n    '\\\\rightthreetimes',\n    '\\\\leftthreetimes',\n    '\\\\intercal',\n    '\\\\prod',\n    { latex: '\\\\prod_{n\\\\mathop=0}^{\\\\infty}', classes: 'small' },\n  ],\n\n  '+': [\n    '\\\\pm',\n    '\\\\mp',\n    '\\\\sum',\n    { latex: '\\\\sum_{n\\\\mathop=0}^{\\\\infty}', classes: 'small' },\n    '\\\\dotplus',\n    '\\\\oplus',\n  ],\n  '-': ['\\\\pm', '\\\\mp', '\\\\ominus', '\\\\vert #0  \\\\vert'],\n\n  '/': ['\\\\divideontimes', '/', '\\\\div', '\\\\%'],\n\n  '(': [\n    '\\\\left( #0\\\\right)',\n    '\\\\left[ #0\\\\right]',\n    '\\\\left\\\\{ #0\\\\right\\\\}',\n    '\\\\left\\\\langle #0\\\\right\\\\rangle',\n    '\\\\lfloor',\n    '\\\\llcorner',\n    '(',\n    '\\\\lbrack',\n    '\\\\lvert',\n    '\\\\lVert',\n    '\\\\lgroup',\n    '\\\\langle',\n    '\\\\lceil',\n    '\\\\ulcorner',\n    '\\\\lmoustache',\n    '\\\\lbrace',\n  ],\n\n  ')': [\n    '\\\\rfloor',\n    '\\\\lrcorner',\n    ')',\n    '\\\\rbrack',\n    '\\\\rvert',\n    '\\\\rVert',\n    '\\\\rgroup',\n    '\\\\rangle',\n    '\\\\rceil',\n    '\\\\urcorner',\n    '\\\\rmoustache',\n    '\\\\rbrace',\n  ],\n\n  '=': [\n    '\\\\cong',\n    '\\\\asymp',\n    '\\\\equiv',\n    '\\\\differencedelta',\n    '\\\\varpropto',\n    '\\\\thickapprox',\n    '\\\\approxeq',\n    '\\\\thicksim',\n    '\\\\backsim',\n    '\\\\eqsim',\n    '\\\\simeq',\n    '\\\\Bumpeq',\n    '\\\\bumpeq',\n    '\\\\doteq',\n    '\\\\Doteq',\n    '\\\\fallingdotseq',\n    '\\\\risingdotseq',\n    '\\\\coloneq',\n    '\\\\eqcirc',\n    '\\\\circeq',\n    '\\\\triangleq',\n    '\\\\between',\n  ],\n\n  '!=': ['\\\\neq', '\\\\ncong', '', '\\\\nsim'],\n\n  '<': [\n    '\\\\leq',\n    '\\\\leqq',\n    '\\\\lneqq',\n    '\\\\ll',\n\n    '\\\\lessgtr',\n    '\\\\nless',\n    '\\\\nleq',\n    '\\\\lesssim',\n\n    '\\\\precsim',\n    '\\\\prec',\n    '\\\\nprec',\n    '\\\\preccurlyeq',\n\n    '\\\\lessdot',\n  ],\n\n  '>': [\n    '\\\\geq',\n    '\\\\geqq',\n    '\\\\gneqq',\n    '\\\\gg',\n\n    '\\\\gtrless',\n    '\\\\ngtr',\n    '\\\\ngeq',\n    '\\\\gtrsim',\n\n    '\\\\succsim',\n    '\\\\succ',\n    '\\\\nsucc',\n    '\\\\succcurlyeq',\n\n    '\\\\gtrdot',\n  ],\n\n  'set': ['\\\\in', '\\\\owns', '\\\\subset', '\\\\nsubset', '\\\\supset', '\\\\nsupset'],\n\n  '!set': ['\\\\notin', '\\\\backepsilon'],\n\n  'subset': [],\n  'supset': [],\n\n  'infinity': ['\\\\aleph_0', '\\\\aleph_1', '\\\\omega', '\\\\mathfrak{m}'],\n\n  'numeric-pi': ['\\\\prod', '\\\\theta', '\\\\rho', '\\\\sin', '\\\\cos', '\\\\tan'],\n\n  'ee': ['\\\\times 10^{#?}', '\\\\ln', '\\\\ln_{10}', '\\\\log'],\n\n  '^': ['_{#?}'],\n\n  // Integrals\n  'int': [\n    { latex: '\\\\int_{#?}^{#?}', classes: 'small' },\n    { latex: '\\\\int', classes: 'small' },\n    { latex: '\\\\smallint', classes: 'small' },\n    { latex: '\\\\iint', classes: 'small' },\n    { latex: '\\\\iiint', classes: 'small' },\n    { latex: '\\\\oint', classes: 'small' },\n    { latex: '\\\\dfrac{\\\\rd}{\\\\rd x}', classes: 'small' },\n    { latex: '\\\\frac{\\\\partial}{\\\\partial x}', classes: 'small' },\n\n    '\\\\capitalDifferentialD',\n    '\\\\rd',\n    '\\\\partial',\n  ],\n\n  'nabla': ['\\\\nabla\\\\times', '\\\\nabla\\\\cdot', '\\\\nabla^{2}'],\n\n  '!': ['!!', '\\\\Gamma', '\\\\Pi'],\n  'accents': [\n    '\\\\bar{#@}',\n    '\\\\vec{#@}',\n    '\\\\hat{#@}',\n    '\\\\check{#@}',\n    '\\\\dot{#@}',\n    '\\\\ddot{#@}',\n    '\\\\mathring{#@}',\n    '\\\\breve{#@}',\n    '\\\\acute{#@}',\n    '\\\\tilde{#@}',\n    '\\\\grave{#@}',\n  ],\n  // 'absnorm': [{latex:'\\\\lVert #@ \\\\rVert', aside:'norm'},\n  //     {latex:'\\\\lvert #@ \\\\rvert', aside:'determinant'},\n  //     {latex:'\\\\begin{cardinality} #@ \\\\end{cardinality}', aside:'cardinality'},\n  //     {latex:'\\\\lvert #@ \\\\rvert', aside:'length'},\n  //     {latex:'\\\\lvert #@ \\\\rvert', aside:'order'},\n\n  // ],\n  'A': [\n    { latex: '\\\\aleph', aside: 'aleph' },\n    { latex: '\\\\forall', aside: 'for all' },\n  ],\n  'a': [\n    { latex: '\\\\aleph', aside: 'aleph' },\n    { latex: '\\\\forall', aside: 'for all' },\n  ],\n  'b': [{ latex: '\\\\beth', aside: 'beth' }],\n  'B': [{ latex: '\\\\beth', aside: 'beth' }],\n  'c': [{ latex: '\\\\C', aside: 'set of complex numbers' }],\n  'd': [{ latex: '\\\\daleth', aside: 'daleth' }],\n  'D': [{ latex: '\\\\daleth', aside: 'daleth' }],\n  'e': [\n    { latex: '\\\\exponentialE', aside: 'exponential e' },\n    { latex: '\\\\exists', aside: 'there is' },\n    { latex: '\\\\nexists', aside: 'there isn’t' },\n  ],\n  'g': [{ latex: '\\\\gimel', aside: 'gimel' }],\n  'G': [{ latex: '\\\\gimel', aside: 'gimel' }],\n  'h': [\n    { latex: '\\\\hbar', aside: 'h bar' },\n    { latex: '\\\\hslash', aside: 'h slash' },\n  ],\n  'i': [{ latex: '\\\\imaginaryI', aside: 'imaginary i' }],\n  'j': [{ latex: '\\\\imaginaryJ', aside: 'imaginary j' }],\n  'l': [{ latex: '\\\\ell', aside: 'ell' }],\n  'n': [{ latex: '\\\\N', aside: 'set of natural numbers' }],\n  'p': [{ latex: '\\\\P', aside: 'set of primes' }],\n  'q': [{ latex: '\\\\Q', aside: 'set of rational numbers' }],\n  'r': [{ latex: '\\\\R', aside: 'set of real numbers' }],\n  'z': [{ latex: '\\\\Z', aside: 'set of integers' }],\n\n  'x-var': [\n    'y',\n    'z',\n    't',\n    'r',\n    { latex: 'f(#?)', classes: 'small' },\n    { latex: 'g(#?)', classes: 'small' },\n    'x^2',\n    'x^n',\n    'x_n',\n    'x_{n+1}',\n    'x_i',\n    'x_{i+1}',\n  ],\n  'n-var': ['i', 'j', 'p', 'k', 'a', 'u'],\n  'ii': ['\\\\Re', '\\\\Im', '\\\\imaginaryJ', '\\\\Vert #0 \\\\Vert'],\n\n  'logic': [\n    { latex: '\\\\exists', aside: 'there is' },\n    { latex: '\\\\nexists', aside: 'there isn’t' },\n\n    { latex: '\\\\ni', aside: 'such that' },\n    { latex: '\\\\Colon', aside: 'such that' },\n\n    { latex: '\\\\implies', aside: 'implies' },\n    { latex: '\\\\impliedby', aside: 'implied by' },\n\n    { latex: '\\\\iff', aside: 'if and only if' },\n\n    { latex: '\\\\land', aside: 'and' },\n    { latex: '\\\\lor', aside: 'or' },\n    { latex: '\\\\oplus', aside: 'xor' },\n    { latex: '\\\\lnot', aside: 'not' },\n\n    { latex: '\\\\downarrow', aside: 'nor' },\n    { latex: '\\\\uparrow', aside: 'nand' },\n\n    { latex: '\\\\curlywedge', aside: 'nor' },\n    { latex: '\\\\bar\\\\curlywedge', aside: 'nand' },\n\n    // {latex:'\\\\barwedge', aside:'bar wedge'},\n    // {latex:'\\\\curlyvee', aside:'curly vee'},\n    // {latex:'\\\\veebar', aside:'vee bar'},\n\n    { latex: '\\\\therefore', aside: 'therefore' },\n    { latex: '\\\\because', aside: 'because' },\n\n    { latex: '^\\\\biconditional', aside: 'biconditional' },\n\n    '\\\\leftrightarrow',\n    '\\\\Leftrightarrow',\n    '\\\\to',\n    '\\\\models',\n    '\\\\vdash',\n    '\\\\gets',\n    '\\\\dashv',\n    '\\\\roundimplies',\n  ],\n\n  'set-operators': [\n    '\\\\cap',\n    '\\\\cup',\n    '\\\\setminus',\n    '\\\\smallsetminus',\n    '\\\\complement',\n  ],\n\n  'set-relations': [\n    '\\\\in',\n    '\\\\notin',\n    '\\\\ni',\n    '\\\\owns',\n    '\\\\subset',\n    '\\\\supset',\n    '\\\\subseteq',\n    '\\\\supseteq',\n    '\\\\subsetneq',\n    '\\\\supsetneq',\n    '\\\\varsubsetneq',\n    '\\\\subsetneqq',\n    '\\\\nsubset',\n    '\\\\nsupset',\n    '\\\\nsubseteq',\n    '\\\\nsupseteq',\n  ],\n\n  'space': [\n    {\n      latex: '\\\\char\"203A\\\\!\\\\char\"2039',\n      insert: '\\\\!',\n      aside: 'negative thin space<br>⁻³⧸₁₈ em',\n    },\n    {\n      latex: '\\\\unicode{\"203A}\\\\,\\\\unicode{\"2039}',\n      insert: '\\\\,',\n      aside: 'thin space<br>³⧸₁₈ em',\n    },\n    {\n      latex: '\\\\unicode{\"203A}\\\\:\\\\unicode{\"2039}',\n      insert: '\\\\:',\n      aside: 'medium space<br>⁴⧸₁₈ em',\n    },\n    {\n      latex: '\\\\unicode{\"203A}\\\\;\\\\unicode{\"2039}',\n      insert: '\\\\;',\n      aside: 'thick space<br>⁵⧸₁₈ em',\n    },\n    {\n      latex: '\\\\unicode{\"203A}\\\\ \\\\unicode{\"2039}',\n      insert: '\\\\ ',\n      aside: '⅓ em',\n    },\n    {\n      latex: '\\\\unicode{\"203A}\\\\enspace\\\\unicode{\"2039}',\n      insert: '\\\\enspace',\n      aside: '½ em',\n    },\n    {\n      latex: '\\\\unicode{\"203A}\\\\quad\\\\unicode{\"2039}',\n      insert: '\\\\quad',\n      aside: '1 em',\n    },\n    {\n      latex: '\\\\unicode{\"203A}\\\\qquad\\\\unicode{\"2039}',\n      insert: '\\\\qquad',\n      aside: '2 em',\n    },\n  ],\n\n  // @todo could also delete to end\n  'delete': [\n    {\n      label:\n        '<span class=\"warning\"><svg><use xlink:href=\"#svg-trash\" /></svg></span>',\n      command: '\"deleteAll\"',\n    },\n  ],\n\n  // @todo Tab: could turn on speech, visible keyboard...\n  '->|': [],\n};\nlet ALT_KEYS = {};\n\nconst LAYERS = {\n  'math': `\n        <div class='rows'>\n            <ul>\n                <li class='keycap tex' data-alt-keys='x-var'><i>x</i></li>\n                <li class='keycap tex' data-alt-keys='n-var'><i>n</i></li>\n                <li class='separator w5'></li>\n                <row name='numpad-1'/>\n                <li class='separator w5'></li>\n                <li class='keycap tex' data-insert='$$\\\\exponentialE$$' data-alt-keys='ee'>e</li>\n                <li class='keycap tex' data-insert='$$\\\\imaginaryI$$' data-alt-keys='ii'>i</li>\n                <li class='keycap tex' data-latex='\\\\pi' data-alt-keys='numeric-pi'></li>\n            </ul>\n            <ul>\n                <li class='keycap tex' data-key='<' data-alt-keys='<'>&lt;</li>\n                <li class='keycap tex' data-key='>' data-alt-keys='>'>&gt;</li>\n                <li class='separator w5'></li>\n                <row name='numpad-2'/>\n                <li class='separator w5'></li>\n                <li class='keycap tex' data-insert='$$#@^{2}$$' data-latex='x^2'></li>\n                <li class='keycap tex' data-alt-keys='^' data-insert='$$#@^{#?}$$' data-latex='x^\\\\placeholder'></li>\n                <li class='keycap tex small' data-insert='$$\\\\sqrt{#0}$$' data-latex='\\\\sqrt{#0}'></li>\n            </ul>\n            <ul>\n                <li class='keycap tex' data-alt-keys='(' >(</li>\n                <li class='keycap tex' data-alt-keys=')' >)</li>\n                <li class='separator w5'></li>\n                <row name='numpad-3'/>\n                <li class='separator w5'></li>\n                <li class='keycap small' data-alt-keys='int' data-latex='\\\\int_0^\\\\infty'></li>\n                <li class='keycap' data-latex='\\\\forall' data-alt-keys='logic' ></li>\n                <li class='action font-glyph bottom right' data-alt-keys='delete' data-command='[\"performWithFeedback\",\"deleteBackward\"]'>&#x232b;</li></ul>\n            </ul>\n            <ul>\n                <li class='keycap' data-alt-keys='foreground-color' data-command='[\"applyStyle\",{\"color\":\"#cc2428\"}]'><span style='border-radius: 50%;width:22px;height:22px; border: 3px solid #cc2428; box-sizing: border-box'></span></li>\n                <li class='keycap' data-alt-keys='background-color' data-command='[\"applyStyle\",{\"backgroundColor\":\"#fff590\"}]'><span style='border-radius: 50%;width:22px;height:22px; background:#fff590; box-sizing: border-box'></span></li>\n                <li class='separator w5'></li>\n                <row name='numpad-4'/>\n                <li class='separator w5'></li>\n                <arrows/>\n            </ul>\n        </div>\n    `,\n  'lower-roman': `\n        <div class='rows'>\n            <ul>\n                <row name='numpad-1' class='if-wide'/>\n                <row name='lower-1' shift-layer='upper-roman'/>\n            </ul>\n            <ul>\n                <row name='numpad-2' class='if-wide'/>\n                <row name='lower-2'  shift-layer='upper-roman''/>\n            </ul>\n            <ul>\n                <row name='numpad-3' class='if-wide'/>\n                <row name='lower-3'  shift-layer='upper-roman''/>\n            </ul>\n            <ul>\n                <row name='numpad-4' class='if-wide'/>\n                <li class='keycap' >;</li>\n                <li class='keycap' data-alt-keys=','>,</li>\n                <li class='keycap w50' data-key=' ' data-alt-keys='space'>&nbsp;</li>\n                <arrows/>\n            </ul>\n        </div>`,\n  'upper-roman': `\n        <div class='rows'>\n            <ul>\n                <row name='numpad-1' class='if-wide'/>\n                <row name='upper-1'  shift-layer='lower-roman'/>\n            </ul>\n            <ul>\n                <row name='numpad-2' class='if-wide'/>\n                <row name='upper-2' shift-layer='lower-roman'/>\n            </ul>\n            <ul>\n                <row name='numpad-3' class='if-wide'/>\n                <row name='upper-3' shift-layer='lower-roman'/>\n            </ul>\n            <ul>\n                <row name='numpad-4' class='if-wide'/>\n                <li class='keycap' >;</li>\n                <li class='keycap' data-alt-keys='.'>;</li>\n                <li class='keycap w50' data-key=' '>&nbsp;</li>\n                <arrows/>\n            </ul>\n        </div>`,\n  'symbols': `\n        <div class='rows'>\n            <ul>\n                <row name='numpad-1' class='if-wide'/>\n                <li class='keycap tex' data-alt-keys='(' data-insert='\\\\lbrace '>{</li>\n                <li class='keycap tex' data-alt-keys=')' data-insert='\\\\rbrace '>}</li>\n                <li class='separator w5'></li>\n                <li class='keycap tex' data-alt-keys='set' data-insert='\\\\in '>&#x2208;</li>\n                <li class='keycap tex' data-alt-keys='!set' data-insert='\\\\notin '>&#x2209;</li>\n                <li class='keycap tex' data-insert='\\\\Re '>&#x211c;<aside>Real</aside></li>\n                <li class='keycap tex' data-insert='\\\\Im '>&#x2111;<aside>Imaginary</aside></li>\n                <li class='keycap w15' data-insert='\\\\ulcorner#0\\\\urcorner '><span><sup>&#x250c;</sup><span><span style='color:#ddd'>o</span><sup>&#x2510;</sup></span><aside>ceil</aside></li>\n                <li class='keycap tex' data-alt-keys='nabla' data-insert='\\\\nabla '>&#x2207;<aside>nabla</aside></li>\n                <li class='keycap tex' data-alt-keys='infinity' data-insert='\\\\infty '>&#x221e;</li>\n\n            </ul>\n            <ul>\n                <row name='numpad-2' class='if-wide'/>\n                <li class='keycap tex' data-alt-keys='(' data-insert='\\\\lbrack '>[</li>\n                <li class='keycap tex' data-alt-keys=')' data-insert='\\\\rbrack '>]</li>\n                <li class='separator w5'></li>\n                <li class='keycap tex' data-alt-keys='subset' data-insert='\\\\subset '>&#x2282;</li>\n                <li class='keycap tex' data-alt-keys='supset' data-insert='\\\\supset '>&#x2283;</li>\n                <li class='keycap tex' data-key='!' data-alt-keys='!'>!<aside>factorial</aside></li>\n                <li class='keycap' data-insert='$$^{\\\\prime} $$'><span><sup><span><span style='color:#ddd'>o</span>&#x2032</sup></span><aside>prime</aside></li>\n                <li class='keycap w15' data-insert='\\\\llcorner#0\\\\lrcorner '><span><sub>&#x2514;</sub><span style='color:#ddd'>o</span><sub>&#x2518;</sub></span><aside>floor</aside></li>\n                <li class='keycap tex' data-insert='\\\\partial '>&#x2202;<aside>partial<br>derivative</aside></li>\n                <li class='keycap tex' data-insert='\\\\emptyset '>&#x2205;<aside>empty set</aside></li>\n\n            </ul>\n            <ul>\n                <row name='numpad-3' class='if-wide'/>\n                <li class='keycap tex' data-alt-keys='(' data-insert='\\\\langle '>&#x27e8;</li>\n                <li class='keycap tex' data-alt-keys=')' data-insert='\\\\rangle '>&#x27e9;</li>\n                <li class='separator w5'></li>\n                <li class='keycap tex' data-insert='\\\\subseteq '>&#x2286;</li>\n                <li class='keycap tex' data-insert='\\\\supseteq '>&#x2287;</li>\n                <li class='keycap tex' data-alt-keys='accents' data-insert='$$\\\\vec{#@}$$' data-latex='\\\\vec{#?}' data-aside='vector'></li>\n                <li class='keycap tex' data-alt-keys='accents' data-insert='$$\\\\bar{#@}$$' data-latex='\\\\bar{#?}' data-aside='bar'></li>\n                <li class='keycap tex' data-alt-keys='absnorm' data-insert='$$\\\\left| #0 \\\\right|$$' data-latex='\\\\left| #? \\\\right|' data-aside='abs'></li>\n                <li class='keycap tex' data-insert='\\\\ast '>&#x2217;<aside>asterisk</aside></li>\n\n                <li class='action font-glyph bottom right w15'\n                    data-shifted='<span class=\"warning\"><svg><use xlink:href=\"#svg-trash\" /></svg></span>'\n                    data-shifted-command='\"deleteAll\"'\n                    data-alt-keys='delete' data-command='[\"performWithFeedback\",\"deleteBackward\"]'\n                >&#x232b;</li>\n            </ul>\n            <ul>\n                <row name='numpad-4' class='if-wide'/>\n                <li class='keycap tex' data-insert=','>,</li>\n                <li class='keycap tex' data-insert='\\\\cdot '>&#x22c5;<aside>centered dot</aside></li>\n                <li class='keycap tex' data-insert='\\\\colon '>:<aside>colon</aside></li>\n                <li class='keycap tex' data-insert='\\\\circ '>&#x2218;<aside>circle</aside></li>\n                <li class='keycap tex' data-insert='\\\\approx '>&#x2248;<aside>approx.</aside></li>\n                <li class='keycap tex' data-insert='\\\\ne '>&#x2260;</li>\n                <li class='keycap tex' data-insert='\\\\pm '>&#x00b1;</li>\n                <arrows/>\n            </ul>\n        </div>`,\n  'lower-greek': `\n        <div class='rows'>\n            <ul><li class='keycap tex' data-insert='\\\\varphi '><i>&#x03c6;</i><aside>phi var.</aside></li>\n                <li class='keycap tex' data-insert='\\\\varsigma '><i>&#x03c2;</i><aside>sigma var.</aside></li>\n                <li class='keycap tex' data-insert='\\\\epsilon '><i>&#x03f5;</i></li>\n                <li class='keycap tex' data-insert='\\\\rho '><i>&rho;</i></li>\n                <li class='keycap tex' data-insert='\\\\tau '><i>&tau;</i></li>\n                <li class='keycap tex' data-insert='\\\\upsilon '><i>&upsilon;</i></li>\n                <li class='keycap tex' data-insert='\\\\theta '><i>&theta;</i></li>\n                <li class='keycap tex' data-insert='\\\\iota '><i>&iota;</i></li>\n                <li class='keycap tex' data-insert='\\\\omicron '>&omicron;</i></li>\n                <li class='keycap tex' data-insert='\\\\pi '><i>&pi;</i></li>\n            </ul>\n            <ul><li class='keycap tex' data-insert='\\\\alpha ' data-shifted='&Alpha;' data-shifted-command='[\"insert\",\"{\\\\\\\\char\\\\\"391}\"]'><i>&alpha;</i></li>\n                <li class='keycap tex' data-insert='\\\\sigma '><i>&sigma;</i></li>\n                <li class='keycap tex' data-insert='\\\\delta '><i>&delta;</i></li>\n                <li class='keycap tex' data-insert='\\\\phi '><i>&#x03d5;</i></i></li>\n                <li class='keycap tex' data-insert='\\\\gamma '><i>&gamma;</i></li>\n                <li class='keycap tex' data-insert='\\\\eta '><i>&eta;</i></li>\n                <li class='keycap tex' data-insert='\\\\xi '><i>&xi;</i></li>\n                <li class='keycap tex' data-insert='\\\\kappa '><i>&kappa;</i></li>\n                <li class='keycap tex' data-insert='\\\\lambda '><i>&lambda;</i></li>\n            </ul>\n            <ul><li class='shift modifier font-glyph bottom left w15 layer-switch' data-layer='upper-greek'>&#x21e7;</li>\n                <li class='keycap tex' data-insert='\\\\zeta '><i>&zeta;</i></li>\n                <li class='keycap tex' data-insert='\\\\chi '><i>&chi;</i></li>\n                <li class='keycap tex' data-insert='\\\\psi '><i>&psi;</i></li>\n                <li class='keycap tex' data-insert='\\\\omega '><i>&omega;</i></li>\n                <li class='keycap tex' data-insert='\\\\beta '><i>&beta;</i></li>\n                <li class='keycap tex' data-insert='\\\\nu '><i>&nu;</i></li>\n                <li class='keycap tex' data-insert='\\\\mu '><i>&mu;</i></li>\n                <li class='action font-glyph bottom right w15'\n                    data-shifted='<span class=\"warning\"><svg><use xlink:href=\"#svg-trash\" /></svg></span>'\n                    data-shifted-command='\"deleteAll\"'\n                    data-alt-keys='delete' data-command='[\"performWithFeedback\",\"deleteBackward\"]'\n                >&#x232b;</li>\n            </ul>\n            <ul>\n                <li class='keycap ' data-key=' '>&nbsp;</li>\n                <li class='keycap'>,</li>\n                <li class='keycap tex' data-insert='\\\\varepsilon '><i>&#x03b5;</i><aside>epsilon var.</aside></li>\n                <li class='keycap tex' data-insert='\\\\vartheta '><i>&#x03d1;</i><aside>theta var.</aside></li>\n                <li class='keycap tex' data-insert='\\\\varkappa '><i>&#x3f0;</i><aside>kappa var.</aside></li>\n                <li class='keycap tex' data-insert='\\\\varpi '><i>&#x03d6;<aside>pi var.</aside></i></li>\n                <li class='keycap tex' data-insert='\\\\varrho '><i>&#x03f1;</i><aside>rho var.</aside></li>\n                <arrows/>\n            </ul>\n        </div>`,\n  'upper-greek': `\n        <div class='rows'>\n            <ul><li class='keycap tex' data-insert='\\\\Phi '>&Phi;<aside>phi</aside></li>\n                <li class='keycap tex' data-insert='\\\\Sigma '>&Sigma;<aside>sigma</aside></li>\n                <li class='keycap tex' data-insert='{\\\\char\"0190}'>&#x0190;<aside>epsilon</aside></li>\n                <li class='keycap tex' data-insert='{\\\\char\"3A1}'>&#x3A1;<aside>rho</aside></li>\n                <li class='keycap tex' data-insert='{\\\\char\"3A4}'>&#x3A4;<aside>tau</aside></li>\n                <li class='keycap tex' data-insert='\\\\Upsilon '>&Upsilon;<aside>upsilon</aside></li>\n                <li class='keycap tex' data-insert='\\\\Theta '>&Theta;<aside>theta</aside></li>\n                <li class='keycap tex' data-insert='{\\\\char\"399}'>&Iota;<aside>iota</aside></li>\n                <li class='keycap tex' data-insert='{\\\\char\"39F}'>&#x039F;<aside>omicron</aside></li>\n                <li class='keycap tex' data-insert='\\\\Pi '>&Pi;<aside>pi</aside></li></ul>\n            <ul><li class='keycap tex' data-insert='{\\\\char\"391}'>&#x391;<aside>alpha</aside></li>\n                <li class='keycap tex' data-insert='\\\\Sigma '>&Sigma;<aside>sigma</aside></li>\n                <li class='keycap tex' data-insert='\\\\Delta '>&Delta;<aside>delta</aside></li>\n                <li class='keycap tex' data-insert='\\\\Phi '>&#x03a6;<aside>phi</aside></li>\n                <li class='keycap tex' data-insert='\\\\Gamma '>&Gamma;<aside>gamma</aside></li>\n                <li class='keycap tex' data-insert='{\\\\char\"397}'>&Eta;<aside>eta</aside></li>\n                <li class='keycap tex' data-insert='\\\\Xi '>&Xi;<aside>xi</aside></li>\n                <li class='keycap tex' data-insert='{\\\\char\"39A}'>&Kappa;<aside>kappa</aside></li>\n                <li class='keycap tex' data-insert='\\\\Lambda '>&Lambda;<aside>lambda</aside></li></ul>\n            <ul><li class='shift modifier font-glyph bottom left selected w15 layer-switch' data-layer='lower-greek'>&#x21e7;</li>\n                <li class='keycap tex' data-insert='{\\\\char\"396}'>&Zeta;<aside>zeta</aside></li>\n                <li class='keycap tex' data-insert='{\\\\char\"3A7}'>&Chi;<aside>chi</aside></li>\n                <li class='keycap tex' data-insert='\\\\Psi '>&Psi;<aside>psi</aside></li>\n                <li class='keycap tex' data-insert='\\\\Omega '>&Omega;<aside>omega</aside></li>\n                <li class='keycap tex' data-insert='{\\\\char\"392}'>&Beta;<aside>beta</aside></li>\n                <li class='keycap tex' data-insert='{\\\\char\"39D}'>&Nu;<aside>nu</aside></li>\n                <li class='keycap tex' data-insert='{\\\\char\"39C}'>&Mu;<aside>mu</aside></li>\n                <li class='action font-glyph bottom right w15' data-command='[\"performWithFeedback\",\"deleteBackward\"]'>&#x232b;</li></ul>\n            <ul>\n                <li class='separator w10'>&nbsp;</li>\n                <li class='keycap'>.</li>\n                <li class='keycap w50' data-key=' '>&nbsp;</li>\n                <arrows/>\n            </ul>\n        </div>`,\n  'latex-lower': `\n        <div class='rows'>\n            <ul><row name='lower-1' class='tt' shift-layer='latex-upper'/></ul>\n            <ul><row name='lower-2' class='tt' shift-layer='latex-upper'/></ul>\n            <ul><row name='lower-3' class='tt' shift-layer='latex-upper'/></ul>\n            <ul>\n                <li class='layer-switch font-glyph modifier bottom left' data-layer='latex-symbols'>01#</li>\n                <li class='keycap tt' data-shifted='[' data-shifted-command='[\"insertAndUnshiftKeyboardLayer\", \"[\"]'>{</li>\n                <li class='keycap tt' data-shifted=']' data-shifted-command='[\"insertAndUnshiftKeyboardLayer\", \"]\"]'>}</li>\n                <li class='keycap tt' data-shifted='(' data-shifted-command='[\"insertAndUnshiftKeyboardLayer\", \"(\"]'>^</li>\n                <li class='keycap tt' data-shifted=')' data-shifted-command='[\"insertAndUnshiftKeyboardLayer\", \")\"]'>_</li>\n                <li class='keycap w20' data-key=' '>&nbsp;</li>\n                <arrows/>\n            </ul>\n        </div>`,\n  'latex-upper': `\n        <div class='rows'>\n            <ul><row name='upper-1' class='tt' shift-layer='latex-lower'/></ul>\n            <ul><row name='upper-2' class='tt' shift-layer='latex-lower'/></ul>\n            <ul><row name='upper-3' class='tt' shift-layer='latex-lower'/></ul>\n            <ul>\n                <li class='layer-switch font-glyph modifier bottom left' data-layer='latex-symbols'01#</li>\n                <li class='keycap tt'>[</li>\n                <li class='keycap tt'>]</li>\n                <li class='keycap tt'>(</li>\n                <li class='keycap tt'>)</li>\n                <li class='keycap w20' data-key=' '>&nbsp;</li>\n                <arrows/>\n            </ul>\n        </div>`,\n  'latex-symbols': `\n        <div class='rows'>\n            <ul><li class='keycap tt'>1</li><li class='keycap tt'>2</li><li class='keycap tt'>3</li><li class='keycap tt'>4</li><li class='keycap tt'>5</li><li class='keycap tt'>6</li><li class='keycap tt'>7</li><li class='keycap tt'>8</li><li class='keycap tt'>9</li><li class='keycap tt'>0</li></ul>\n            <ul><li class='keycap tt'>!</li><li class='keycap tt'>@</li><li class='keycap tt'>#</li><li class='keycap tt'>$</li><li class='keycap tt'>%</li><li class='keycap tt'>^</li><li class='keycap tt'>&</li><li class='keycap tt'>*</li><li class='keycap tt'>+</li><li class='keycap tt'>=</li></ul>\n            <ul>\n                <li class='keycap tt'>\\\\</li>\n                <li class='keycap tt'>|</li>\n                <li class='keycap tt'>/</li>\n                <li class='keycap tt'>\\`</li>\n                <li class='keycap tt'>;</li>\n                <li class='keycap tt'>:</li>\n                <li class='keycap tt'>?</li>\n                <li class='keycap tt'>'</li>\n                <li class='keycap tt'>\"</li>\n                <li class='action font-glyph bottom right'\n                    data-shifted='<span class=\"warning\"><svg><use xlink:href=\"#svg-trash\" /></svg></span>'\n                    data-shifted-command='\"deleteAll\"'\n                    data-alt-keys='delete' data-command='[\"performWithFeedback\",\"deleteBackward\"]'\n                >&#x232b;</li>\n            </ul>\n            <ul>\n                <li class='layer-switch font-glyph modifier bottom left' data-layer='latex-lower'>abc</li>\n                <li class='keycap tt'>&lt;</li>\n                <li class='keycap tt'>&gt;</li>\n                <li class='keycap tt'>~</li>\n                <li class='keycap tt'>,</li>\n                <li class='keycap tt'>.</li>\n                <li class='keycap' data-key=' '>&nbsp;</li>\n                <arrows/>\n            </ul>\n        </div>`,\n  'functions': `\n        <div class='rows'>\n            <ul><li class='separator'></li>\n                <li class='fnbutton' data-insert='\\\\sin'></li>\n                <li class='fnbutton' data-insert='\\\\sin^{-1}'></li>\n                <li class='fnbutton' data-insert='\\\\ln'></li>\n                <li class='fnbutton' data-insert='\\\\exponentialE^{#?}'></li>\n                <li class='bigfnbutton' data-insert='$$\\\\operatorname{lcm}(#?)$$' data-latex='\\\\operatorname{lcm}()'></li>\n                <li class='bigfnbutton' data-insert='$$\\\\operatorname{ceil}(#?)$$' data-latex='\\\\operatorname{ceil}()'></li>\n                <li class='bigfnbutton' data-insert='$$\\\\lim_{n\\\\to\\\\infty}$$'></li>\n                <li class='bigfnbutton' data-insert='$$\\\\int$$'></li>\n                <li class='bigfnbutton' data-insert='$$\\\\operatorname{abs}(#?)$$' data-latex='\\\\operatorname{abs}()'></li>\n            </ul>\n            <ul><li class='separator'></li>\n                <li class='fnbutton' data-latex='\\\\cos'></li>\n                <li class='fnbutton' data-latex='\\\\cos^{-1}'></li>\n                <li class='fnbutton' data-latex='\\\\ln_{10}'></li>\n                <li class='fnbutton' data-insert='$$10^{#?}$$'></li>\n                <li class='bigfnbutton' data-insert='$$\\\\operatorname{gcd}(#?)$$' data-latex='\\\\operatorname{gcd}()'></li>\n                <li class='bigfnbutton' data-insert='$$\\\\operatorname{floor}(#?)$$' data-latex='\\\\operatorname{floor}()'></li>\n                <li class='bigfnbutton' data-insert='$$\\\\sum_{n\\\\mathop=0}^{\\\\infty}$$'></li>\n                <li class='bigfnbutton' data-insert='$$\\\\int_{0}^{\\\\infty}$$'></li>\n                <li class='bigfnbutton' data-insert='$$\\\\operatorname{sign}(#?)$$' data-latex='\\\\operatorname{sign}()'></li>\n            </ul>\n            <ul><li class='separator'></li>\n                <li class='fnbutton' data-latex='\\\\tan'></li>\n                <li class='fnbutton' data-latex='\\\\tan^{-1}'></li>\n                <li class='fnbutton' data-insert='$$\\\\log_{#?}$$'></li>\n                <li class='fnbutton' data-insert='$$\\\\sqrt[#?]{#0}$$'></li>\n                <li class='bigfnbutton' data-insert='$$#0 \\\\mod$$' data-latex='\\\\mod'></li>\n                <li class='bigfnbutton' data-insert='$$\\\\operatorname{round}(#?) $$' data-latex='\\\\operatorname{round}()'></li>\n                <li class='bigfnbutton' data-insert='$$\\\\prod_{n\\\\mathop=0}^{\\\\infty}$$' data-latex='{\\\\scriptstyle \\\\prod_{n=0}^{\\\\infty}}'></li>\n                <li class='bigfnbutton' data-insert='$$\\\\frac{\\\\differentialD #0}{\\\\differentialD x}$$'></li>\n                <li class='action font-glyph bottom right' data-command='[\"performWithFeedback\",\"deleteBackward\"]'>&#x232b;</li></ul>\n            <ul><li class='separator'></li>\n                <li class='fnbutton'>(</li>\n                <li class='fnbutton'>)</li>\n                <li class='fnbutton' data-insert='$$^{#?}$$' data-latex='x^{#?}'></li>\n                <li class='fnbutton' data-insert='$$_{#?}$$' data-latex='x_{#?}'></li>\n                <li class='keycap w20 ' data-key=' '>&nbsp;</li>\n                <arrows/>\n            </ul>\n        </div>`,\n  'style': `\n        <div class='rows'>\n            <ul>\n                <li class='keycap' data-alt-keys='foreground-color' data-command='[\"applyStyle\",{\"color\":\"#cc2428\"}]'><span style='border-radius: 50%;width:22px;height:22px; border: 3px solid #cc2428'></span></li>\n                <li class='keycap' data-alt-keys='background-color' data-command='[\"applyStyle\",{\"backgroundColor\":\"#fff590\"}]'><span style='border-radius: 50%;width:22px;height:22px; background:#fff590'></span></li>\n                <li class='separator w5'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"size\":\"size3\"}]' data-latex='\\\\scriptsize\\\\text{small}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"size\":\"size5\"}]' data-latex='\\\\scriptsize\\\\text{normal}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"size\":\"size9\"}]' data-latex='\\\\huge\\\\text{big}'></li>\n                <li class='separator w5'></li>\n                <li class='keycap' data-latex='\\\\langle' data-command='[\"insert\", \"\\\\\\\\langle\", {\"smartFence\":true}]'></li>\n            </ul>\n            <ul>\n                <li class='keycap' data-command='[\"applyStyle\",{\"series\":\"l\"}]' data-latex='\\\\fontseries{l}\\\\text{Ab}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"series\":\"m\"}]' data-latex='\\\\fontseries{m}\\\\text{Ab}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"series\":\"b\"}]' data-latex='\\\\fontseries{b}\\\\text{Ab}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"series\":\"bx\"}]' data-latex='\\\\fontseries{bx}\\\\text{Ab}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"series\":\"sb\"}]' data-latex='\\\\fontseries{sb}\\\\text{Ab}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"series\":\"c\"}]' data-latex='\\\\fontseries{c}\\\\text{Ab}'></li>\n            </ul>\n            <ul>\n                <li class='keycap' data-command='[\"applyStyle\",{\"shape\":\"up\"}]' data-latex='\\\\textup{Ab}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"shape\":\"it\"}]' data-latex='\\\\textit{Ab}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"shape\":\"sl\"}]' data-latex='\\\\textsl{Ab}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"shape\":\"sc\"}]' data-latex='\\\\textsc{Ab}'></li>\n                <li class='separator w5'></li>\n                <li class='keycap' data-insert='$$\\\\emph{#?} $$' data-latex='\\\\text{\\\\emph{emph}}'></li>\n            </ul>\n            <ul>\n                <li class='keycap' data-command='[\"applyStyle\",{\"fontFamily\":\"cmr\"}]' data-latex='\\\\textrm{Az}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"fontFamily\":\"cmtt\"}]' data-latex='\\\\texttt{Az}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"fontFamily\":\"cmss\"}]' data-latex='\\\\textsf{Az}'></li>\n\n                <li class='keycap' data-command='[\"applyStyle\",{\"fontFamily\":\"bb\"}]'  data-latex='\\\\mathbb{AZ}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"fontFamily\":\"scr\"}]'  data-latex='\\\\mathscr{AZ}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"fontFamily\":\"cal\"}]' data-latex='\\\\mathcal{A1}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"fontFamily\":\"frak\"}]' data-latex='\\\\mathfrak{Az}'></li>\n            </ul>\n        </div>`,\n};\n\nfunction latexToMarkup(latex: string, arg): string {\n  // Since we don't have preceding atoms, we'll interpret #@ as a placeholder\n  latex = latex.replace(/(^|[^\\\\])#@/g, '$1#?');\n\n  return makeStruts(\n    new Span(\n      Atom.render(\n        { mathstyle: MATHSTYLES.displaystyle },\n        parseLatex(latex, 'math', arg, MACROS)\n      ),\n      { classes: 'ML__base' }\n    ),\n    { classes: 'ML__mathlive' }\n  ).toMarkup();\n}\n\n/**\n * Return a markup string for the keyboard toolbar for the specified layer.\n */\nfunction makeKeyboardToolbar(\n  options: VirtualKeyboardOptions,\n  keyboardIDs: string,\n  currentKeyboard: string\n): string {\n  // The left hand side of the toolbar has a list of all the available keyboards\n  let result = \"<div class='left'>\";\n  const keyboardList = keyboardIDs.replace(/\\s+/g, ' ').split(' ');\n  if (keyboardList.length > 1) {\n    const keyboards = {\n      ...KEYBOARDS,\n      ...(options.customVirtualKeyboards ?? {}),\n    };\n    for (const keyboard of keyboardList) {\n      if (!keyboards[keyboard]) {\n        console.error('Unknown virtual keyboard \"', keyboard, '\"');\n        break;\n      }\n\n      result += \"<div class='\";\n      if (keyboard === currentKeyboard) {\n        result += 'selected ';\n      } else if (keyboards[keyboard].command) {\n        result += 'action ';\n      } else {\n        result += 'layer-switch ';\n      }\n\n      result += (keyboards[keyboard].classes ?? '') + \"'\";\n\n      if (keyboards[keyboard].tooltip) {\n        result +=\n          \"data-ML__tooltip='\" + l10n(keyboards[keyboard].tooltip) + \"' \";\n        result += \"data-placement='top' data-delay='1s'\";\n      }\n\n      if (keyboard !== currentKeyboard) {\n        if (typeof keyboards[keyboard].command === 'string') {\n          result += `data-command='\"${keyboards[keyboard].command as string}\"'`;\n        } else if (Array.isArray(keyboards[keyboard].command)) {\n          result += `data-command='\"${(keyboards[keyboard]\n            .command as string[]).join('')}\"'`;\n        }\n\n        if (keyboards[keyboard].layer) {\n          result += \"data-layer='\" + keyboards[keyboard].layer + \"'\";\n        }\n      }\n\n      result += '>' + keyboards[keyboard].label + '</div>';\n    }\n  }\n\n  result += '</div>';\n\n  const toolbarOptions = options.virtualKeyboardToolbar;\n  const availableActions =\n    toolbarOptions === 'default' ? ['copyToClipboard', 'undo', 'redo'] : [];\n\n  const actionsMarkup = {\n    copyToClipboard: `\n            <div class='action'\n                data-command='\"copyToClipboard\"'\n                data-ML__tooltip='${l10n(\n                  'tooltip.copy to clipboard'\n                )}' data-placement='top' data-delay='1s'>\n                <svg><use xlink:href='#svg-copy' /></svg>\n            </div>\n        `,\n    undo: `\n            <div class='action disabled'\n                data-command='\"undo\"'\n                data-ML__tooltip='${l10n(\n                  'tooltip.undo'\n                )}' data-placement='top' data-delay='1s'>\n                <svg><use xlink:href='#svg-undo' /></svg>\n            </div>\n        `,\n    redo: `\n            <div class='action disabled'\n                data-command='\"redo\"'\n                data-ML__tooltip='${l10n(\n                  'tooltip.redo'\n                )}' data-placement='top' data-delay='1s'>\n                <svg><use xlink:href='#svg-redo' /></svg>\n            </div>\n        `,\n  };\n\n  // The right hand side of the toolbar, with the copy/undo/redo commands\n  if (availableActions.length > 0) {\n    result += `\n            <div class='right'>\n                ${availableActions\n                  .map((action) => actionsMarkup[action])\n                  .join('')}\n            </div>\n        `;\n  }\n\n  return \"<div class='keyboard-toolbar' role='toolbar'>\" + result + '</div>';\n}\n\nexport function makeKeycap(\n  keyboard: VirtualKeyboard,\n  elementList: HTMLElement[],\n  chainedCommand?: string | any[]\n): void {\n  for (const element of elementList) {\n    let html: string;\n    // Display\n    if (element.getAttribute('data-latex')) {\n      html = latexToMarkup(\n        element.getAttribute('data-latex').replace(/&quot;/g, '\"'),\n        { '?': '{\\\\color{#555}{\\\\scriptstyle \\\\char\"2B1A}}' }\n      );\n    } else if (\n      element.getAttribute('data-insert') &&\n      element.innerHTML === ''\n    ) {\n      html = latexToMarkup(\n        element.getAttribute('data-insert').replace(/&quot;/g, '\"'),\n        { '?': '{\\\\color{#555}{\\\\scriptstyle \\\\char\"2B1A}}' }\n      );\n    } else if (element.getAttribute('data-content')) {\n      html = element.getAttribute('data-content').replace(/&quot;/g, '\"');\n    }\n\n    if (element.getAttribute('data-aside')) {\n      html =\n        (html ?? '') +\n        '<aside>' +\n        element.getAttribute('data-aside').replace(/&quot;/g, '\"') +\n        '</aside>';\n    }\n\n    if (html !== undefined) {\n      element.innerHTML = keyboard.options.createHTML(html);\n    }\n\n    if (element.getAttribute('data-classes')) {\n      element.classList.add(element.getAttribute('data-classes'));\n    }\n\n    const key = element.getAttribute('data-insert')?.replace(/&quot;/g, '\"');\n    if (key && SHIFTED_KEYS[key]) {\n      element.dataset.shifted = SHIFTED_KEYS[key][0];\n      element.dataset.shiftedCommand = JSON.stringify([\n        'insertAndUnshiftKeyboardLayer',\n        SHIFTED_KEYS[key][1],\n      ]);\n    }\n\n    // Commands\n    let handlers;\n    if (element.getAttribute('data-command')) {\n      handlers = JSON.parse(element.getAttribute('data-command'));\n    } else if (element.getAttribute('data-insert')) {\n      handlers = [\n        'insert',\n        element.getAttribute('data-insert'),\n        {\n          focus: true,\n          feedback: true,\n          mode: 'math',\n          format: 'latex',\n          resetStyle: true,\n        },\n      ];\n    } else if (element.getAttribute('data-latex')) {\n      handlers = [\n        'insert',\n        element.getAttribute('data-latex'),\n        {\n          focus: true,\n          feedback: true,\n          mode: 'math',\n          format: 'latex',\n          resetStyle: true,\n        },\n      ];\n    } else {\n      handlers = [\n        'typedText',\n        element.getAttribute('data-key') || element.textContent,\n        { focus: true, feedback: true, simulateKeystroke: true },\n      ];\n    }\n\n    if (chainedCommand) {\n      handlers = [chainedCommand, handlers];\n    }\n\n    if (element.getAttribute('data-alt-keys')) {\n      const altKeys = ALT_KEYS[element.getAttribute('data-alt-keys')];\n      if (altKeys) {\n        handlers = {\n          default: handlers,\n          pressAndHoldStart: [\n            'showAlternateKeys',\n            element.getAttribute('data-alt-keys'),\n            altKeys,\n          ],\n          pressAndHoldEnd: 'hideAlternateKeys',\n        };\n      } else {\n        console.warn(\n          'Unknown alt key set: \"' + element.getAttribute('data-alt-keys')\n        );\n      }\n    }\n\n    attachButtonHandlers(\n      (command) => keyboard.executeCommand(command),\n      element,\n      handlers\n    );\n  }\n}\n\n/**\n * Expand the shortcut tags (e.g. <row>) inside a layer.\n */\nfunction expandLayerMarkup(options: VirtualKeyboardOptions, layer): string {\n  const ROWS = {\n    // First row should be 10 key wide\n    // Second row should be 10 key wide\n    // Third row should be 8.5 key wide\n    // One row should have ^ (shift key) which is 1.5 key wide\n    // One row should have ~ (delete key) which is .5 or 1.5 key wide\n    qwerty: {\n      'lower-1': 'qwertyuiop',\n      'lower-2': ' asdfghjkl ',\n      'lower-3': '^zxcvbnm~',\n      'upper-1': 'QWERTYUIOP',\n      'upper-2': ' ASDFGHJKL ',\n      'upper-3': '^ZXCVBNM~',\n      'numpad-1': '789/',\n      'numpad-2': '456*',\n      'numpad-3': '123-',\n      'numpad-4': '0.=+',\n    },\n    azerty: {\n      'lower-1': 'azertyuiop',\n      'lower-2': 'qsdfghjklm',\n      'lower-3': '^ wxcvbn ~',\n      'upper-1': 'AZERTYUIOP',\n      'upper-2': 'QSDFGHJKLM',\n      'upper-3': '^ WXCVBN ~',\n    },\n    qwertz: {\n      'lower-1': 'qwertzuiop',\n      'lower-2': ' asdfghjkl ',\n      'lower-3': '^yxcvbnm~',\n      'upper-1': 'QWERTZUIOP',\n      'upper-2': ' ASDFGHJKL',\n      'upper-3': '^YXCVBNM~',\n    },\n    dvorak: {\n      'lower-1': '^  pyfgcrl ',\n      'lower-2': 'aoeuidhtns',\n      'lower-3': 'qjkxbmwvz~',\n      'upper-1': '^  PYFGCRL ',\n      'upper-2': 'AOEUIDHTNS',\n      'upper-3': 'QJKXBMWVZ~',\n    },\n    colemak: {\n      'lower-1': ' qwfpgjluy ',\n      'lower-2': 'arstdhneio',\n      'lower-3': '^zxcvbkm~',\n      'upper-1': ' QWFPGNLUY ',\n      'upper-2': 'ARSTDHNEIO',\n      'upper-3': '^ZXCVBKM~',\n    },\n  };\n  // Determine the layout of the virtual keyboard based on a\n  // detected physical keyboard layout, or the current locale\n  let layoutName = options.virtualKeyboardLayout;\n  if (layoutName === 'auto') {\n    const activeLayout = getActiveKeyboardLayout();\n    if (activeLayout) {\n      layoutName = activeLayout.virtualLayout;\n    }\n\n    if (!layoutName || layoutName === 'auto') {\n      layoutName =\n        ({\n          fr: 'azerty',\n          be: 'azerty',\n          al: 'qwertz',\n          ba: 'qwertz',\n          cz: 'qwertz',\n          de: 'qwertz',\n          hu: 'qwertz',\n          sk: 'qwertz',\n          ch: 'qwertz',\n        } as const)[l10nOptions.locale.slice(0, 2)] ?? 'qwerty';\n    }\n  }\n\n  const layout = ROWS[layoutName] ?? ROWS.qwerty;\n\n  let result = layer;\n  let row;\n\n  result = result.replace(\n    /<arrows\\/>/g,\n    `\n        <li class='action' data-command='[\"performWithFeedback\",\"moveToPreviousChar\"]'\n            data-shifted='<svg><use xlink:href=\"#svg-angle-double-left\" /></svg>'\n            data-shifted-command='[\"performWithFeedback\",\"extendToPreviousChar\"]'>\n            <svg><use xlink:href='#svg-arrow-left' /></svg>\n        </li>\n        <li class='action' data-command='[\"performWithFeedback\",\"moveToNextChar\"]'\n            data-shifted='<svg><use xlink:href=\"#svg-angle-double-right\" /></svg>'\n            data-shifted-command='[\"performWithFeedback\",\"extendToNextChar\"]'>\n            <svg><use xlink:href='#svg-arrow-right' /></svg>\n        </li>\n        <li class='action' data-command='[\"performWithFeedback\",\"moveToNextPlaceholder\"]'>\n        <svg><use xlink:href='#svg-tab' /></svg></li>`\n  );\n\n  let m: string[] = result.match(/(<row\\s+)(.*)((?:<\\/row|\\/)>)/);\n  while (m) {\n    row = '';\n    const attributesArray = m[2].match(/[a-zA-Z][a-zA-Z\\d-]*=(['\"])(.*?)\\1/g);\n    const attributes: Record<string, string> = {};\n    for (const attribute of attributesArray) {\n      const m2 = attribute.match(/([a-zA-Z][a-zA-Z\\d-]*)=(['\"])(.*?)\\2/);\n      attributes[m2[1]] = m2[3];\n    }\n\n    let keys = layout[attributes.name] as string;\n    if (!keys) keys = ROWS.qwerty[attributes.name];\n    if (!keys) {\n      console.warn('Unknown roman keyboard row:', attributes.name);\n    } else {\n      for (const c of keys) {\n        let cls: string = attributes.class ?? '';\n        if (cls) cls = ` ${cls}`;\n        if (c === '~') {\n          row += `<li class='action font-glyph bottom right `;\n          row +=\n            keys.length - (keys.match(/ /g) || []).length / 2 === 10\n              ? 'w10'\n              : 'w15';\n          row += `' data-shifted='<span class=\"warning\"><svg><use xlink:href=\"#svg-trash\" /></svg></span>'\n                        data-shifted-command='\"deleteAll\"'\n                        data-alt-keys='delete' data-command='[\"performWithFeedback\",\"deleteBackward\"]'\n                        >&#x232b;</li>`;\n        } else if (c === ' ') {\n          // Separator\n          row += \"<li class='separator w5'></li>\";\n        } else if (c === '^') {\n          // Shift key\n          row +=\n            `<li class='shift modifier font-glyph bottom left w15 layer-switch' data-layer='` +\n            attributes['shift-layer'] +\n            `'>&#x21e7;</li>`;\n        } else if (c === '/') {\n          row +=\n            \"<li class='keycap\" +\n            cls +\n            \"' data-alt-keys='/' data-insert='\\\\frac{#@}{#?}'>&divide;</li>\";\n        } else if (c === '*') {\n          row +=\n            \"<li class='keycap\" +\n            cls +\n            \"' data-alt-keys='*' data-insert='\\\\times '>&times;</li>\";\n        } else if (c === '-') {\n          row +=\n            \"<li class='keycap\" +\n            cls +\n            \"' data-alt-keys='-' data-key='-' data-alt-keys='-'>&#x2212;</li>\";\n        } else if (cls.includes('tt')) {\n          row +=\n            `<li class='keycap${cls}' data-alt-keys='${c}' ` +\n            `data-command='[\"typedText\",\"${c}\",{\"mode\":\"command\", \"focus\":true, \"feedback\":true}]'` +\n            `>${c}</li>`;\n        } else {\n          row +=\n            \"<li class='keycap\" +\n            cls +\n            \"' data-alt-keys='\" +\n            c +\n            \"'>\" +\n            c +\n            '</li>';\n        }\n      }\n    }\n\n    result = result.replace(new RegExp(m[1] + m[2] + m[3]), row);\n\n    m = result.match(/(<row\\s+)(.*)((?:<\\/row|\\/)>)/);\n  }\n\n  return result;\n}\n\n/**\n * Construct a virtual keyboard element based on the config options in the\n * mathfield and an optional theme.\n */\nexport function makeKeyboardElement(\n  keyboard: VirtualKeyboard,\n  theme: 'apple' | 'material' | ''\n): HTMLDivElement {\n  const svgIcons = `<svg xmlns=\"http://www.w3.org/2000/svg\" style=\"display: none;\">\n\n            <symbol id=\"svg-command\" viewBox=\"0 0 640 512\">\n                <path d=\"M34.495 36.465l211.051 211.05c4.686 4.686 4.686 12.284 0 16.971L34.495 475.535c-4.686 4.686-12.284 4.686-16.97 0l-7.071-7.07c-4.686-4.686-4.686-12.284 0-16.971L205.947 256 10.454 60.506c-4.686-4.686-4.686-12.284 0-16.971l7.071-7.07c4.686-4.687 12.284-4.687 16.97 0zM640 468v-10c0-6.627-5.373-12-12-12H300c-6.627 0-12 5.373-12 12v10c0 6.627 5.373 12 12 12h328c6.627 0 12-5.373 12-12z\"/>\n            </symbol>\n\n            <symbol id=\"svg-undo\" viewBox=\"0 0 512 512\">\n                <path d=\"M20 8h10c6.627 0 12 5.373 12 12v110.625C85.196 57.047 165.239 7.715 256.793 8.001 393.18 8.428 504.213 120.009 504 256.396 503.786 393.181 392.834 504 256 504c-63.926 0-122.202-24.187-166.178-63.908-5.113-4.618-5.354-12.561-.482-17.433l7.069-7.069c4.503-4.503 11.749-4.714 16.482-.454C150.782 449.238 200.935 470 256 470c117.744 0 214-95.331 214-214 0-117.744-95.331-214-214-214-82.862 0-154.737 47.077-190.289 116H180c6.627 0 12 5.373 12 12v10c0 6.627-5.373 12-12 12H20c-6.627 0-12-5.373-12-12V20c0-6.627 5.373-12 12-12z\"/>\n            </symbol>\n            <symbol id=\"svg-redo\" viewBox=\"0 0 512 512\">\n                <path d=\"M492 8h-10c-6.627 0-12 5.373-12 12v110.625C426.804 57.047 346.761 7.715 255.207 8.001 118.82 8.428 7.787 120.009 8 256.396 8.214 393.181 119.166 504 256 504c63.926 0 122.202-24.187 166.178-63.908 5.113-4.618 5.354-12.561.482-17.433l-7.069-7.069c-4.503-4.503-11.749-4.714-16.482-.454C361.218 449.238 311.065 470 256 470c-117.744 0-214-95.331-214-214 0-117.744 95.331-214 214-214 82.862 0 154.737 47.077 190.289 116H332c-6.627 0-12 5.373-12 12v10c0 6.627 5.373 12 12 12h160c6.627 0 12-5.373 12-12V20c0-6.627-5.373-12-12-12z\"/>\n            </symbol>\n            <symbol id=\"svg-arrow-left\" viewBox=\"0 0 192 512\">\n                <path d=\"M25.1 247.5l117.8-116c4.7-4.7 12.3-4.7 17 0l7.1 7.1c4.7 4.7 4.7 12.3 0 17L64.7 256l102.2 100.4c4.7 4.7 4.7 12.3 0 17l-7.1 7.1c-4.7 4.7-12.3 4.7-17 0L25 264.5c-4.6-4.7-4.6-12.3.1-17z\"/>\n            </symbol>\n            <symbol id=\"svg-arrow-right\" viewBox=\"0 0 192 512\">\n                    <path d=\"M166.9 264.5l-117.8 116c-4.7 4.7-12.3 4.7-17 0l-7.1-7.1c-4.7-4.7-4.7-12.3 0-17L127.3 256 25.1 155.6c-4.7-4.7-4.7-12.3 0-17l7.1-7.1c4.7-4.7 12.3-4.7 17 0l117.8 116c4.6 4.7 4.6 12.3-.1 17z\"/>\n            </symbol>\n            <symbol id=\"svg-tab\" viewBox=\"0 0 448 512\">\n                    <path d=\"M32 217.1c0-8.8 7.2-16 16-16h144v-93.9c0-7.1 8.6-10.7 13.6-5.7l143.5 143.1c6.3 6.3 6.3 16.4 0 22.7L205.6 410.4c-5 5-13.6 1.5-13.6-5.7v-93.9H48c-8.8 0-16-7.2-16-16v-77.7m-32 0v77.7c0 26.5 21.5 48 48 48h112v61.9c0 35.5 43 53.5 68.2 28.3l143.6-143c18.8-18.8 18.8-49.2 0-68L228.2 78.9c-25.1-25.1-68.2-7.3-68.2 28.3v61.9H48c-26.5 0-48 21.6-48 48zM436 64h-8c-6.6 0-12 5.4-12 12v360c0 6.6 5.4 12 12 12h8c6.6 0 12-5.4 12-12V76c0-6.6-5.4-12-12-12z\"/>\n            </symbol>\n            <symbol id=\"svg-copy\" viewBox=\"0 0 448 512\">\n                <path d=\"M433.941 65.941l-51.882-51.882A48 48 0 0 0 348.118 0H176c-26.51 0-48 21.49-48 48v48H48c-26.51 0-48 21.49-48 48v320c0 26.51 21.49 48 48 48h224c26.51 0 48-21.49 48-48v-48h80c26.51 0 48-21.49 48-48V99.882a48 48 0 0 0-14.059-33.941zM352 32.491a15.88 15.88 0 0 1 7.431 4.195l51.882 51.883A15.885 15.885 0 0 1 415.508 96H352V32.491zM288 464c0 8.822-7.178 16-16 16H48c-8.822 0-16-7.178-16-16V144c0-8.822 7.178-16 16-16h80v240c0 26.51 21.49 48 48 48h112v48zm128-96c0 8.822-7.178 16-16 16H176c-8.822 0-16-7.178-16-16V48c0-8.822 7.178-16 16-16h144v72c0 13.2 10.8 24 24 24h72v240z\"/>\n            </symbol>\n            <symbol id=\"svg-angle-double-right\" viewBox=\"0 0 320 512\">\n                <path d=\"M166.9 264.5l-117.8 116c-4.7 4.7-12.3 4.7-17 0l-7.1-7.1c-4.7-4.7-4.7-12.3 0-17L127.3 256 25.1 155.6c-4.7-4.7-4.7-12.3 0-17l7.1-7.1c4.7-4.7 12.3-4.7 17 0l117.8 116c4.6 4.7 4.6 12.3-.1 17zm128-17l-117.8-116c-4.7-4.7-12.3-4.7-17 0l-7.1 7.1c-4.7 4.7-4.7 12.3 0 17L255.3 256 153.1 356.4c-4.7 4.7-4.7 12.3 0 17l7.1 7.1c4.7 4.7 12.3 4.7 17 0l117.8-116c4.6-4.7 4.6-12.3-.1-17z\"/>\n            </symbol>\n            <symbol id=\"svg-angle-double-left\" viewBox=\"0 0 320 512\">\n                <path d=\"M153.1 247.5l117.8-116c4.7-4.7 12.3-4.7 17 0l7.1 7.1c4.7 4.7 4.7 12.3 0 17L192.7 256l102.2 100.4c4.7 4.7 4.7 12.3 0 17l-7.1 7.1c-4.7 4.7-12.3 4.7-17 0L153 264.5c-4.6-4.7-4.6-12.3.1-17zm-128 17l117.8 116c4.7 4.7 12.3 4.7 17 0l7.1-7.1c4.7-4.7 4.7-12.3 0-17L64.7 256l102.2-100.4c4.7-4.7 4.7-12.3 0-17l-7.1-7.1c-4.7-4.7-12.3-4.7-17 0L25 247.5c-4.6 4.7-4.6 12.3.1 17z\"/>\n            </symbol>\n            <symbol id=\"svg-trash\" viewBox=\"0 0 448 512\">\n                <path d=\"M336 64l-33.6-44.8C293.3 7.1 279.1 0 264 0h-80c-15.1 0-29.3 7.1-38.4 19.2L112 64H24C10.7 64 0 74.7 0 88v2c0 3.3 2.7 6 6 6h26v368c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V96h26c3.3 0 6-2.7 6-6v-2c0-13.3-10.7-24-24-24h-88zM184 32h80c5 0 9.8 2.4 12.8 6.4L296 64H152l19.2-25.6c3-4 7.8-6.4 12.8-6.4zm200 432c0 8.8-7.2 16-16 16H80c-8.8 0-16-7.2-16-16V96h320v368zm-176-44V156c0-6.6 5.4-12 12-12h8c6.6 0 12 5.4 12 12v264c0 6.6-5.4 12-12 12h-8c-6.6 0-12-5.4-12-12zm-80 0V156c0-6.6 5.4-12 12-12h8c6.6 0 12 5.4 12 12v264c0 6.6-5.4 12-12 12h-8c-6.6 0-12-5.4-12-12zm160 0V156c0-6.6 5.4-12 12-12h8c6.6 0 12 5.4 12 12v264c0 6.6-5.4 12-12 12h-8c-6.6 0-12-5.4-12-12z\"/>\n            </symbol>\n        </svg>\n        `;\n  // <symbol id=\"svg-wikipedia\" viewBox=\"0 0 640 512\">\n  //         <path d=\"M640 51.2l-.3 12.2c-28.1.8-45 15.8-55.8 40.3-25 57.8-103.3 240-155.3 358.6H415l-81.9-193.1c-32.5 63.6-68.3 130-99.2 193.1-.3.3-15 0-15-.3C172 352.3 122.8 243.4 75.8 133.4 64.4 106.7 26.4 63.4.2 63.7c0-3.1-.3-10-.3-14.2h161.9v13.9c-19.2 1.1-52.8 13.3-43.3 34.2 21.9 49.7 103.6 240.3 125.6 288.6 15-29.7 57.8-109.2 75.3-142.8-13.9-28.3-58.6-133.9-72.8-160-9.7-17.8-36.1-19.4-55.8-19.7V49.8l142.5.3v13.1c-19.4.6-38.1 7.8-29.4 26.1 18.9 40 30.6 68.1 48.1 104.7 5.6-10.8 34.7-69.4 48.1-100.8 8.9-20.6-3.9-28.6-38.6-29.4.3-3.6 0-10.3.3-13.6 44.4-.3 111.1-.3 123.1-.6v13.6c-22.5.8-45.8 12.8-58.1 31.7l-59.2 122.8c6.4 16.1 63.3 142.8 69.2 156.7L559.2 91.8c-8.6-23.1-36.4-28.1-47.2-28.3V49.6l127.8 1.1.2.5z\"/>\n  // </symbol>\n  // <symbol id=\"svg-link\" viewBox=\"0 0 512 512\">\n  //         <path d=\"M301.148 394.702l-79.2 79.19c-50.778 50.799-133.037 50.824-183.84 0-50.799-50.778-50.824-133.037 0-183.84l79.19-79.2a132.833 132.833 0 0 1 3.532-3.403c7.55-7.005 19.795-2.004 20.208 8.286.193 4.807.598 9.607 1.216 14.384.481 3.717-.746 7.447-3.397 10.096-16.48 16.469-75.142 75.128-75.3 75.286-36.738 36.759-36.731 96.188 0 132.94 36.759 36.738 96.188 36.731 132.94 0l79.2-79.2.36-.36c36.301-36.672 36.14-96.07-.37-132.58-8.214-8.214-17.577-14.58-27.585-19.109-4.566-2.066-7.426-6.667-7.134-11.67a62.197 62.197 0 0 1 2.826-15.259c2.103-6.601 9.531-9.961 15.919-7.28 15.073 6.324 29.187 15.62 41.435 27.868 50.688 50.689 50.679 133.17 0 183.851zm-90.296-93.554c12.248 12.248 26.362 21.544 41.435 27.868 6.388 2.68 13.816-.68 15.919-7.28a62.197 62.197 0 0 0 2.826-15.259c.292-5.003-2.569-9.604-7.134-11.67-10.008-4.528-19.371-10.894-27.585-19.109-36.51-36.51-36.671-95.908-.37-132.58l.36-.36 79.2-79.2c36.752-36.731 96.181-36.738 132.94 0 36.731 36.752 36.738 96.181 0 132.94-.157.157-58.819 58.817-75.3 75.286-2.651 2.65-3.878 6.379-3.397 10.096a163.156 163.156 0 0 1 1.216 14.384c.413 10.291 12.659 15.291 20.208 8.286a131.324 131.324 0 0 0 3.532-3.403l79.19-79.2c50.824-50.803 50.799-133.062 0-183.84-50.802-50.824-133.062-50.799-183.84 0l-79.2 79.19c-50.679 50.682-50.688 133.163 0 183.851z\"/>\n  // </symbol>\n  //     <symbol id=\"svg-external-link\" viewBox=\"0 0 448 512\">\n  //     <path d=\"M400 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V80c0-26.51-21.49-48-48-48zm16 400c0 8.822-7.178 16-16 16H48c-8.822 0-16-7.178-16-16V80c0-8.822 7.178-16 16-16h352c8.822 0 16 7.178 16 16v352zM99.515 374.828c-4.686-4.686-4.686-12.284 0-16.971l195.15-195.15-.707-.707-89.958.342c-6.627 0-12-5.373-12-12v-9.999c0-6.628 5.372-12 12-12L340 128c6.627 0 12 5.372 12 12l-.343 136c0 6.627-5.373 12-12 12h-9.999c-6.627 0-12-5.373-12-12l.342-89.958-.707-.707-195.15 195.15c-4.686 4.686-12.284 4.686-16.971 0l-5.657-5.657z\"/>\n  // </symbol>\n  // <symbol id=\"svg-external-link\" viewBox=\"0 0 512 512\">\n  //     <path d=\"M256 40c118.621 0 216 96.075 216 216 0 119.291-96.61 216-216 216-119.244 0-216-96.562-216-216 0-119.203 96.602-216 216-216m0-32C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm-36 344h12V232h-12c-6.627 0-12-5.373-12-12v-8c0-6.627 5.373-12 12-12h48c6.627 0 12 5.373 12 12v140h12c6.627 0 12 5.373 12 12v8c0 6.627-5.373 12-12 12h-72c-6.627 0-12-5.373-12-12v-8c0-6.627 5.373-12 12-12zm36-240c-17.673 0-32 14.327-32 32s14.327 32 32 32 32-14.327 32-32-14.327-32-32-32z\"/>\n  // </symbol>\n\n  let markup = svgIcons;\n\n  injectStylesheet(null, virtualKeyboardStylesheet);\n\n  void loadFonts(keyboard.options.fontsDirectory);\n  injectStylesheet(null, coreStylesheet);\n\n  // Auto-populate the ALT_KEYS table\n  ALT_KEYS_BASE['foreground-color'] = [];\n  for (const color of LINE_COLORS) {\n    ALT_KEYS_BASE['foreground-color'].push({\n      classes: 'small-button',\n      content:\n        '<span style=\"border-radius:50%;width:32px;height:32px; box-sizing: border-box; border: 3px solid ' +\n        color +\n        '\"></span>',\n      command: '[\"applyStyle\",{\"color\":\"' + color + '\"}]',\n    });\n  }\n\n  ALT_KEYS_BASE['background-color'] = [];\n  for (const color of AREA_COLORS) {\n    ALT_KEYS_BASE['background-color'].push({\n      classes: 'small-button',\n      content:\n        '<span style=\"border-radius:50%;width:32px;height:32px; background:' +\n        color +\n        '\"></span>',\n      command: '[\"applyStyle\",{\"backgroundColor\":\"' + color + '\"}]',\n    });\n  }\n\n  ALT_KEYS = { ...ALT_KEYS_BASE };\n  for (const key of Object.keys(ALT_KEYS)) {\n    ALT_KEYS[key] = ALT_KEYS[key].slice();\n  }\n\n  const UPPER_ALPHA = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';\n  const LOWER_ALPHA = 'abcdefghijklmnopqrstuvwxyz';\n  const DIGITS = '0123456789';\n  // Define the alternate set for uppercase keys\n  for (let i = 0; i < 26; i++) {\n    const key = UPPER_ALPHA[i];\n    if (!ALT_KEYS[key]) ALT_KEYS[key] = [];\n    ALT_KEYS[key].unshift({\n      latex: '\\\\mathbb{' + key + '}',\n      aside: 'blackboard',\n      insert: '\\\\mathbb{' + key + '}',\n    });\n    ALT_KEYS[key].unshift({\n      latex: '\\\\mathbf{' + key + '}',\n      aside: 'bold',\n      insert: '\\\\mathbf{' + key + '}',\n    });\n    ALT_KEYS[key].unshift({\n      latex: '\\\\mathsf{' + key + '}',\n      aside: 'sans',\n      insert: '\\\\mathsf{' + key + '}',\n    });\n    ALT_KEYS[key].unshift({\n      latex: '\\\\mathtt{' + key + '}',\n      aside: 'monospace',\n      insert: '\\\\mathtt{' + key + '}',\n    });\n    ALT_KEYS[key].unshift({\n      latex: '\\\\mathcal{' + key + '}',\n      aside: 'calligraphy',\n      insert: '\\\\mathcal{' + key + '}',\n    });\n    ALT_KEYS[key].unshift({\n      latex: '\\\\mathfrak{' + key + '}',\n      aside: 'fraktur',\n      insert: '\\\\mathfrak{' + key + '}',\n    });\n  }\n\n  // Define the alternate set for lowercase keys\n  for (let i = 0; i <= 26; i++) {\n    const key = LOWER_ALPHA[i];\n    if (!ALT_KEYS[key]) ALT_KEYS[key] = [];\n    ALT_KEYS[key].unshift({\n      latex: '\\\\mathsf{' + key + '}',\n      aside: 'sans',\n      insert: '\\\\mathsf{' + key + '}',\n    });\n    ALT_KEYS[key].unshift({\n      latex: '\\\\mathbf{' + key + '}',\n      aside: 'bold',\n      insert: '\\\\mathbf{' + key + '}',\n    });\n    ALT_KEYS[key].unshift({\n      latex: '\\\\mathtt{' + key + '}',\n      aside: 'monospace',\n      insert: '\\\\mathtt{' + key + '}',\n    });\n    ALT_KEYS[key].unshift({\n      latex: '\\\\mathfrak{' + key + '}',\n      aside: 'fraktur',\n      insert: '\\\\mathfrak{' + key + '}',\n    });\n  }\n\n  for (let i = 0; i < 10; i++) {\n    const key = DIGITS[i];\n    if (!ALT_KEYS[key]) ALT_KEYS[key] = [];\n    // The mathbb font does not appear to include digits,\n    // although it's supposed to.\n    // ALT_KEYS[key].push({\n    //         latex: '\\\\underset{\\\\textsf{\\\\footnotesize blackboard}}{\\\\mathbb{' + key + '}}',\n    //         insert: '\\\\mathbb{' + key + '}}'});\n    ALT_KEYS[key].unshift({\n      latex: '\\\\mathbf{' + key + '}',\n      aside: 'bold',\n      insert: '\\\\mathbf{' + key + '}',\n    });\n    ALT_KEYS[key].unshift({\n      latex: '\\\\mathsf{' + key + '}',\n      aside: 'sans',\n      insert: '\\\\mathsf{' + key + '}',\n    });\n    ALT_KEYS[key].unshift({\n      latex: '\\\\mathtt{' + key + '}',\n      aside: 'monospace',\n      insert: '\\\\mathtt{' + key + '}',\n    });\n    ALT_KEYS[key].unshift({\n      latex: '\\\\mathcal{' + key + '}',\n      aside: 'script',\n      insert: '\\\\mathcal{' + key + '}',\n    });\n    ALT_KEYS[key].unshift({\n      latex: '\\\\mathfrak{' + key + '}',\n      aside: 'fraktur',\n      insert: '\\\\mathfrak{' + key + '}',\n    });\n  }\n\n  let keyboardIDs = keyboard.options.virtualKeyboards;\n  if (!keyboardIDs) {\n    keyboardIDs = 'all';\n  }\n\n  keyboardIDs = keyboardIDs.replace(\n    /\\ball\\b/i,\n    'numeric functions symbols roman  greek'\n  );\n\n  const layers: Record<string, string | VirtualKeyboardLayer> = {\n    ...LAYERS,\n    ...(keyboard.options.customVirtualKeyboardLayers ?? {}),\n  };\n  const keyboards = {\n    ...KEYBOARDS,\n    ...(keyboard.options.customVirtualKeyboards ?? {}),\n  };\n\n  const keyboardList = keyboardIDs.replace(/\\s+/g, ' ').split(' ');\n  for (const keyboardName of keyboardList) {\n    if (!keyboards[keyboardName]) {\n      console.error('Unknown virtual keyboard \"' + keyboardName + '\"');\n      continue;\n    }\n\n    // Add the default layer to the list of layers,\n    // and make sure the list of layers is uniquified.\n    let keyboardLayers = keyboards[keyboardName].layers ?? [];\n    if (keyboards[keyboardName].layer) {\n      keyboardLayers.push(keyboards[keyboardName].layer);\n    }\n\n    keyboardLayers = [...new Set(keyboardLayers)];\n\n    for (const layerName of keyboardLayers) {\n      if (!layers[layerName]) {\n        console.error('Unknown virtual keyboard layer: \"', layerName, '\"');\n        break;\n      }\n\n      if (typeof layers[layerName] === 'object') {\n        const layer = layers[layerName] as VirtualKeyboardLayer;\n        // Process JSON layer to web element based layer.\n\n        let temporaryLayer = '';\n        if (layer.styles) {\n          temporaryLayer += `<style>${layer.styles}</style>`;\n        }\n\n        if (layer.backdrop) {\n          temporaryLayer += `<div class='${layer.backdrop}'>`;\n        }\n\n        if (layer.container) {\n          temporaryLayer += `<div class='${layer.container}'>`;\n        }\n\n        if (layer.rows) {\n          temporaryLayer += `<div class='rows'>`;\n          for (const row of layer.rows) {\n            temporaryLayer += `<ul>`;\n            for (const keycap of row) {\n              temporaryLayer += `<li`;\n              if (/separator/.test(keycap.class)) {\n                temporaryLayer += ` class=\"${keycap.class}\"`;\n              } else if (keycap.class) {\n                temporaryLayer += ` class=\"keycap ${keycap.class}\"`;\n              } else {\n                temporaryLayer += ` class=\"keycap\"`;\n              }\n\n              if (keycap.key) {\n                temporaryLayer += ` data-key=\"${keycap.key}\"`;\n              }\n\n              if (keycap.command) {\n                if (typeof keycap.command === 'string') {\n                  temporaryLayer += ` data-command='\"${keycap.command}\"'`;\n                } else {\n                  temporaryLayer += ` data-command='`;\n                  temporaryLayer += JSON.stringify(keycap.command);\n                  temporaryLayer += `'`;\n                }\n              }\n\n              if (keycap.insert) {\n                temporaryLayer += ` data-insert=\"${keycap.insert}\"`;\n              }\n\n              if (keycap.latex) {\n                temporaryLayer += ` data-latex=\"${keycap.latex}\"`;\n              }\n\n              if (keycap.aside) {\n                temporaryLayer += ` data-aside=\"${keycap.aside}\"`;\n              }\n\n              if (keycap.altKeys) {\n                temporaryLayer += ` data-alt-keys=\"${keycap.altKeys}\"`;\n              }\n\n              if (keycap.shifted) {\n                temporaryLayer += ` data-shifted=\"${keycap.shifted}\"`;\n              }\n\n              if (keycap.shiftedCommand) {\n                temporaryLayer += ` data-shifted-command=\"${keycap.shiftedCommand}\"`;\n              }\n\n              temporaryLayer += `>${keycap.label ? keycap.label : ''}</li>`;\n            }\n\n            temporaryLayer += `</ul>`;\n          }\n\n          temporaryLayer += `</div>`;\n        }\n\n        if (layer.container) {\n          temporaryLayer += '</div>';\n        }\n\n        if (layer.backdrop) {\n          temporaryLayer += '</div>';\n        }\n\n        layers[layerName] = temporaryLayer;\n      }\n\n      markup += `<div tabindex=\"-1\" class='keyboard-layer' data-layer='${layerName}'>`;\n      markup += makeKeyboardToolbar(\n        keyboard.options,\n        keyboardIDs,\n        keyboardName\n      );\n      const layerMarkup = layers[layerName];\n      // A layer can contain 'shortcuts' (i.e. <row> tags) that need to\n      // be expanded\n      markup += expandLayerMarkup(keyboard.options, layerMarkup);\n      markup += '</div>';\n    }\n  }\n\n  const result = document.createElement('div');\n  result.className = 'ML__keyboard';\n  if (theme) {\n    result.classList.add(theme);\n  } else if (keyboard.options.virtualKeyboardTheme) {\n    result.classList.add(keyboard.options.virtualKeyboardTheme);\n  }\n\n  result.innerHTML = keyboard.options.createHTML(markup);\n\n  // Attach the element handlers\n  makeKeycap(keyboard, [\n    ...result.querySelectorAll<HTMLElement>(\n      '.keycap, .action, .fnbutton, .bigfnbutton'\n    ),\n  ]);\n\n  const elementList = result.querySelectorAll<HTMLElement>('.layer-switch');\n  for (const element of elementList) {\n    if (element.classList.contains('shift')) {\n      // This is a potential press-and-hold layer switch\n      attachButtonHandlers(\n        (command) => keyboard.executeCommand(command),\n        element,\n        {\n          // When the modifier is initially pressed, we will shift the labels\n          // (if available)\n          pressed: ['shiftKeyboardLayer', 'shift'],\n\n          // If the key is released before a delay, we switch to the target layer\n          default: ['switchKeyboardLayer', element.getAttribute('data-layer')],\n\n          // If the key is released after a longer delay, we restore the\n          // shifted labels\n          pressAndHoldEnd: 'unshiftKeyboardLayer',\n        }\n      );\n    } else {\n      // This is a simple layer switch\n      attachButtonHandlers(\n        (command) => keyboard.executeCommand(command),\n        element,\n        {\n          default: ['switchKeyboardLayer', element.getAttribute('data-layer')],\n        }\n      );\n    }\n  }\n\n  // Select the first keyboard as the initial one.\n  const layerElements = result.querySelectorAll('.keyboard-layer');\n  for (const x of layerElements) {\n    x.addEventListener('mousedown', (evt) => {\n      evt.preventDefault();\n      evt.stopPropagation();\n    });\n    x.addEventListener(\n      'touchstart',\n      (evt) => {\n        evt.preventDefault();\n        evt.stopPropagation();\n      },\n      { passive: false }\n    );\n  }\n  console.assert(layerElements.length > 0, 'No virtual keyboards available');\n  layerElements[0]?.classList.add('is-visible');\n\n  return result;\n}\n\nexport function hideAlternateKeys(): boolean {\n  const altContainer = document.querySelector<HTMLElement>(\n    '#mathlive-alternate-keys-panel'\n  );\n  if (altContainer) {\n    altContainer.classList.remove('is-visible');\n    altContainer.innerHTML = '';\n    releaseSharedElement(altContainer);\n  }\n\n  return false;\n}\n\n/*\n * Restore the key labels and commands to the state before a modifier key\n * was pressed.\n *\n */\nexport function unshiftKeyboardLayer(keyboard: VirtualKeyboard): boolean {\n  hideAlternateKeys();\n\n  const keycaps = keyboard.element.querySelectorAll<HTMLElement>(\n    'div.keyboard-layer.is-visible .rows .keycap, div.keyboard-layer.is-visible .rows .action'\n  );\n  if (keycaps) {\n    for (const keycap of keycaps) {\n      const content = keycap.getAttribute('data-unshifted-content');\n      if (content) {\n        keycap.innerHTML = keyboard.options.createHTML(content);\n      }\n\n      const command = keycap.getAttribute('data-unshifted-command');\n      if (command) {\n        keycap.dataset.command = command;\n      }\n    }\n  }\n\n  return false;\n}\n\nexport function onUndoStateChanged(\n  keyboard: VirtualKeyboard,\n  canUndoState: boolean,\n  canRedoState: boolean\n): boolean {\n  const toolbar = keyboard.element?.querySelector('.keyboard-toolbar');\n  if (!toolbar) return false;\n\n  const undoButton = toolbar.querySelector('[data-command=\\'\"undo\"\\']');\n  const redoButton = toolbar.querySelector('[data-command=\\'\"redo\"\\']');\n\n  if (redoButton) {\n    if (canRedoState) {\n      redoButton.classList.remove('disabled');\n    } else {\n      redoButton.classList.add('disabled');\n    }\n  }\n\n  if (undoButton) {\n    if (canUndoState) {\n      undoButton.classList.remove('disabled');\n    } else {\n      undoButton.classList.add('disabled');\n    }\n  }\n\n  return false;\n}\n","import { isArray } from '../common/types';\n\nimport {\n  makeKeycap,\n  makeKeyboardElement,\n  hideAlternateKeys,\n  unshiftKeyboardLayer,\n  onUndoStateChanged,\n  VirtualKeyboard,\n} from './virtual-keyboard-utils';\nimport { getSharedElement, on } from '../editor-mathfield/utils';\nimport { register as registerCommand, SelectorPrivate } from './commands';\n\nexport { unshiftKeyboardLayer };\nexport { hideAlternateKeys };\n\nexport function showAlternateKeys(\n  keyboard: VirtualKeyboard,\n  altKeysetName: string,\n  altKeys: (string | any)[]\n): boolean {\n  const altContainer = getSharedElement(\n    'mathlive-alternate-keys-panel',\n    'ML__keyboard alternate-keys'\n  );\n  if (keyboard.element.classList.contains('material')) {\n    altContainer.classList.add('material');\n  }\n\n  if (altKeys.length >= 7) {\n    // Width 4\n    altContainer.style.width = '286px';\n  } else if (altKeys.length === 4 || altKeys.length === 2) {\n    // Width 2\n    altContainer.style.width = '146px';\n  } else if (altKeys.length === 1) {\n    // Width 1\n    altContainer.style.width = '86px';\n  } else {\n    // Width 3\n    altContainer.style.width = '146px';\n  }\n\n  // Reset container height\n  altContainer.style.height = 'auto';\n  let markup = '';\n  for (const altKey of altKeys) {\n    markup += '<li';\n    if (typeof altKey === 'string') {\n      markup += ' data-latex=\"' + altKey.replace(/\"/g, '&quot;') + '\"';\n    } else {\n      if (altKey.latex) {\n        markup += ' data-latex=\"' + altKey.latex.replace(/\"/g, '&quot;') + '\"';\n      }\n\n      if (altKey.content) {\n        markup +=\n          ' data-content=\"' + altKey.content.replace(/\"/g, '&quot;') + '\"';\n      }\n\n      if (altKey.insert) {\n        markup +=\n          ' data-insert=\"' + altKey.insert.replace(/\"/g, '&quot;') + '\"';\n      }\n\n      if (altKey.command) {\n        markup +=\n          \" data-command='\" + altKey.command.replace(/\"/g, '&quot;') + \"'\";\n      }\n\n      if (altKey.aside) {\n        markup += ' data-aside=\"' + altKey.aside.replace(/\"/g, '&quot;') + '\"';\n      }\n\n      if (altKey.classes) {\n        markup += ' data-classes=\"' + altKey.classes + '\"';\n      }\n    }\n\n    markup += '>';\n    markup += altKey.label || '';\n    markup += '</li>';\n  }\n\n  markup = '<ul>' + markup + '</ul>';\n  altContainer.innerHTML = keyboard.options.createHTML(markup);\n  makeKeycap(\n    keyboard,\n    [].slice.call(altContainer.querySelectorAll('li')),\n    'performAlternateKeys'\n  );\n  const keycapElement = keyboard?.element.querySelector(\n    'div.keyboard-layer.is-visible div.rows ul li[data-alt-keys=\"' +\n      altKeysetName +\n      '\"]'\n  );\n  const position = keycapElement.getBoundingClientRect();\n  if (position) {\n    if (position.top - altContainer.clientHeight < 0) {\n      // AltContainer.style.maxWidth = '320px';  // Up to six columns\n      altContainer.style.width = 'auto';\n      if (altKeys.length <= 6) {\n        altContainer.style.height = '56px'; // 1 row\n      } else if (altKeys.length <= 12) {\n        altContainer.style.height = '108px'; // 2 rows\n      } else if (altKeys.length <= 18) {\n        altContainer.style.height = '205px'; // 3 rows\n      } else {\n        altContainer.classList.add('compact');\n      }\n    }\n\n    const top =\n      (position.top - altContainer.clientHeight + 5).toString() + 'px';\n    const left =\n      Math.max(\n        0,\n        Math.min(\n          window.innerWidth - altContainer.offsetWidth,\n          (position.left + position.right - altContainer.offsetWidth) / 2\n        )\n      ) + 'px';\n    altContainer.style.transform = 'translate(' + left + ',' + top + ')';\n    altContainer.classList.add('is-visible');\n  }\n\n  return false;\n}\n\n/*\n * Alternate options are displayed when a key on the virtual keyboard is pressed\n * and held.\n *\n */\nregisterCommand(\n  {\n    showAlternateKeys,\n  },\n  { target: 'virtual-keyboard' }\n);\n\nexport function switchKeyboardLayer(\n  keyboard: VirtualKeyboard,\n  layer: string\n): boolean {\n  // TODO This check are really required?\n  if (keyboard.options.virtualKeyboardMode !== 'off') {\n    if (\n      layer !== 'lower-command' &&\n      layer !== 'upper-command' &&\n      layer !== 'symbols-command'\n    ) {\n      // If we switch to a non-command keyboard layer, first exit command mode.\n      keyboard.executeCommand('complete');\n    }\n\n    showVirtualKeyboard(keyboard);\n    // If the alternate keys panel was visible, hide it\n    hideAlternateKeys();\n    // If we were in a temporarily shifted state (shift-key held down)\n    // restore our state before switching to a new layer.\n    unshiftKeyboardLayer(keyboard);\n    const layers = keyboard?.element.querySelectorAll('.keyboard-layer');\n    // Search for the requested layer\n    let found = false;\n    for (const layer_ of layers) {\n      if ((layer_ as HTMLElement).dataset.layer === layer) {\n        found = true;\n        break;\n      }\n    }\n\n    // We did find the layer, switch to it.\n    // If we didn't find it, do nothing and keep the current layer\n    if (found) {\n      for (const layer_ of layers) {\n        if ((layer_ as HTMLElement).dataset.layer === layer) {\n          layer_.classList.add('is-visible');\n        } else {\n          layer_.classList.remove('is-visible');\n        }\n      }\n    }\n\n    keyboard.focusMathfield();\n  }\n\n  return true;\n}\n\nexport function shiftKeyboardLayer(keyboard: VirtualKeyboard): boolean {\n  const keycaps = keyboard?.element.querySelectorAll<HTMLElement>(\n    'div.keyboard-layer.is-visible .rows .keycap, div.keyboard-layer.is-visible .rows .action'\n  );\n  if (keycaps) {\n    for (const keycap of keycaps) {\n      let shiftedContent = keycap.getAttribute('data-shifted');\n      if (shiftedContent || /^[a-z]$/.test(keycap.innerHTML)) {\n        keycap.dataset.unshiftedContent = keycap.innerHTML;\n        if (!shiftedContent) {\n          shiftedContent = keycap.innerHTML.toUpperCase();\n        }\n\n        keycap.innerHTML = keyboard.options.createHTML(shiftedContent);\n        const command = keycap.getAttribute('data-command');\n        if (command) {\n          keycap.dataset.unshiftedCommand = command;\n          const shifteCommand = keycap.getAttribute('data-shifted-command');\n          if (shifteCommand) {\n            keycap.dataset.command = shifteCommand;\n          } else {\n            const commandObject = JSON.parse(command);\n            if (isArray(commandObject)) {\n              commandObject[1] = commandObject[1].toUpperCase();\n            }\n\n            keycap.dataset.command = JSON.stringify(commandObject);\n          }\n        }\n      }\n    }\n  }\n\n  return false;\n}\n\n/*\n * Temporarily change the labels and the command of the keys\n * (for example when a modifier key is held down.)\n */\nregisterCommand(\n  {\n    shiftKeyboardLayer,\n  },\n  { target: 'virtual-keyboard' }\n);\n\nexport function performAlternateKeys(\n  keyboard: VirtualKeyboard,\n  command: SelectorPrivate | [SelectorPrivate, ...any[]]\n): boolean {\n  hideAlternateKeys();\n  return keyboard.executeCommand(command);\n}\n\nexport function insertAndUnshiftKeyboardLayer(\n  keyboard: VirtualKeyboard,\n  c: string\n): boolean {\n  keyboard.executeCommand(['insert', c]);\n  unshiftKeyboardLayer(keyboard);\n  return true;\n}\n\nregisterCommand(\n  {\n    hideAlternateKeys: () => hideAlternateKeys(),\n\n    /*\n     * The command invoked when an alternate key is pressed.\n     * We need to hide the Alternate Keys panel, then perform the\n     * command.\n     */\n    performAlternateKeys,\n    switchKeyboardLayer: (keyboard: VirtualKeyboard, layer) =>\n      switchKeyboardLayer(keyboard, layer),\n    unshiftKeyboardLayer: (keyboard: VirtualKeyboard) =>\n      unshiftKeyboardLayer(keyboard),\n    insertAndUnshiftKeyboardLayer,\n  },\n  { target: 'virtual-keyboard' }\n);\n\nexport function toggleVirtualKeyboardAlt(keyboard: VirtualKeyboard): boolean {\n  let hadAltTheme = false;\n  if (keyboard?.element) {\n    hadAltTheme = keyboard?.element.classList.contains('material');\n    keyboard.dispose();\n  }\n\n  showVirtualKeyboard(keyboard, hadAltTheme ? '' : 'material');\n  return false;\n}\n\nexport function toggleVirtualKeyboardShift(keyboard: VirtualKeyboard): boolean {\n  keyboard.options.virtualKeyboardLayout = {\n    qwerty: 'azerty',\n\n    azerty: 'qwertz',\n    qwertz: 'dvorak',\n    dvorak: 'colemak',\n    colemak: 'qwerty',\n  }[keyboard.options.virtualKeyboardLayout];\n  const layer =\n    keyboard?.element.querySelector('div.keyboard-layer.is-visible').id ?? '';\n  if (keyboard) {\n    keyboard.dispose();\n  }\n\n  showVirtualKeyboard(keyboard);\n  if (layer) {\n    switchKeyboardLayer(keyboard, layer);\n  }\n\n  return false;\n}\n\nregisterCommand(\n  {\n    /* Toggle the virtual keyboard, but switch to the alternate theme if available */\n    toggleVirtualKeyboardAlt,\n    /** Toggle the virtual keyboard, but switch another keyboard layout */\n    toggleVirtualKeyboardShift,\n  },\n  { target: 'virtual-keyboard' }\n);\n\nexport function showVirtualKeyboard(\n  keyboard: VirtualKeyboard,\n  theme: 'apple' | 'material' | '' = ''\n): boolean {\n  keyboard.visible = false;\n  toggleVirtualKeyboard(keyboard, theme);\n  return false;\n}\n\nexport function hideVirtualKeyboard(keyboard: VirtualKeyboard): boolean {\n  keyboard.visible = true;\n  toggleVirtualKeyboard(keyboard);\n  return false;\n}\n\nfunction toggleVirtualKeyboard(\n  keyboard: VirtualKeyboard,\n  theme?: 'apple' | 'material' | ''\n): boolean {\n  keyboard.visible = !keyboard.visible;\n  if (keyboard.visible) {\n    keyboard.focusMathfield();\n    if (keyboard.element) {\n      keyboard.element.classList.add('is-visible');\n    } else {\n      // Construct the virtual keyboard\n      keyboard.element = makeKeyboardElement(keyboard, theme);\n      // Let's make sure that tapping on the keyboard focuses the field\n      on(keyboard.element, 'touchstart:passive mousedown', () =>\n        keyboard.focusMathfield()\n      );\n      keyboard.options.virtualKeyboardContainer.appendChild(keyboard.element);\n    }\n\n    // For the transition effect to work, the property has to be changed\n    // after the insertion in the DOM. Use setTimeout\n    window.setTimeout(() => {\n      keyboard?.element?.classList.add('is-visible');\n    }, 1);\n  } else if (keyboard.element) {\n    keyboard.element.classList.remove('is-visible');\n    keyboard.element.dispatchEvent(\n      new Event('virtual-keyboard-toggle', {\n        bubbles: true,\n        cancelable: false,\n      })\n    );\n    // Remove the element from the DOM\n    keyboard.element.remove();\n    keyboard.element = undefined;\n  }\n\n  keyboard.stateChanged();\n  return false;\n}\n\nregisterCommand(\n  {\n    toggleVirtualKeyboard: (keyboard: VirtualKeyboard, theme) =>\n      toggleVirtualKeyboard(keyboard, theme),\n    hideVirtualKeyboard: (keyboard: VirtualKeyboard) =>\n      hideVirtualKeyboard(keyboard),\n    showVirtualKeyboard: (keyboard: VirtualKeyboard, theme): boolean =>\n      showVirtualKeyboard(keyboard, theme),\n    onUndoStateChanged: (\n      keyboard: VirtualKeyboard,\n      canUndoState,\n      canRedoState\n    ) => onUndoStateChanged(keyboard, canUndoState, canRedoState),\n  },\n  { target: 'virtual-keyboard' }\n);\n","/* eslint-disable no-new */\nimport { Range, InsertOptions } from '../public/mathfield';\nimport { ModeEditor } from './mode-editor';\nimport { TextAtom } from '../core-atoms/text';\nimport { MathfieldPrivate } from './mathfield-private';\nimport { requestUpdate } from './render';\n\nimport { parseLatex } from '../core/core';\nimport { Atom } from '../core/atom-class';\nimport { ModelPrivate } from '../editor-model/model-private';\nimport { range } from '../editor-model/selection-utils';\nimport { applyStyleToUnstyledAtoms } from '../editor-model/styling';\nimport { contentDidChange } from '../editor-model/listeners';\n\nexport class TextModeEditor extends ModeEditor {\n  constructor() {\n    super('text');\n  }\n\n  onPaste(mathfield: MathfieldPrivate, ev: ClipboardEvent): boolean {\n    const text = ev.clipboardData.getData('text/plain');\n\n    if (text) {\n      if (this.insert(mathfield.model, text)) {\n        requestUpdate(mathfield);\n      }\n\n      ev.preventDefault();\n      ev.stopPropagation();\n      return true;\n    }\n\n    return false;\n  }\n\n  onCopy(mathfield: MathfieldPrivate, ev: ClipboardEvent): void {\n    const r: Range = mathfield.model.selectionIsCollapsed\n      ? [0, mathfield.model.lastOffset]\n      : range(mathfield.selection);\n    ev.clipboardData.setData(\n      'text/plain',\n      mathfield.model\n        .getAtoms(r)\n        .filter((x) => x instanceof TextAtom)\n        .map((x) => x.value)\n        .join('')\n    );\n    // Prevent the current document selection from being written to the clipboard.\n    ev.preventDefault();\n  }\n\n  insert(\n    model: ModelPrivate,\n    text: string,\n    options: InsertOptions = {}\n  ): boolean {\n    if (!options.insertionMode) options.insertionMode = 'replaceSelection';\n    if (!options.selectionMode) options.selectionMode = 'placeholder';\n    if (!options.format) options.format = 'auto';\n    options.macros = options.macros ?? model.options.macros;\n\n    const { suppressChangeNotifications } = model;\n    if (options.suppressChangeNotifications) {\n      model.suppressChangeNotifications = true;\n    }\n\n    const contentWasChanging = model.suppressChangeNotifications;\n    model.suppressChangeNotifications = true;\n\n    //\n    // Delete any selected items\n    //\n    if (\n      options.insertionMode === 'replaceSelection' &&\n      !model.selectionIsCollapsed\n    ) {\n      model.position = model.deleteAtoms(range(model.selection));\n    } else if (options.insertionMode === 'replaceAll') {\n      model.root.setChildren([], 'body');\n      model.position = 0;\n    } else if (options.insertionMode === 'insertBefore') {\n      model.collapseSelection('backward');\n    } else if (options.insertionMode === 'insertAfter') {\n      model.collapseSelection('forward');\n    }\n\n    const newAtoms = convertStringToAtoms(text);\n    // Some atoms may already have a style (for example if there was an\n    // argument, i.e. the selection, that this was applied to).\n    // So, don't apply style to atoms that are already styled, but *do*\n    // apply it to newly created atoms that have no style yet.\n    applyStyleToUnstyledAtoms(newAtoms, options.style);\n    if (!newAtoms) return false;\n\n    const cursor = model.at(model.position);\n    const lastNewAtom = cursor.parent.addChildrenAfter(newAtoms, cursor);\n\n    // Prepare to dispatch notifications\n    // (for selection changes, then content change)\n    model.suppressChangeNotifications = contentWasChanging;\n\n    if (options.selectionMode === 'before') {\n      // Do nothing: don't change the position.\n    } else if (options.selectionMode === 'item') {\n      model.setSelection(model.anchor, model.offsetOf(lastNewAtom));\n    } else if (lastNewAtom) {\n      model.position = model.offsetOf(lastNewAtom);\n    }\n\n    contentDidChange(model);\n\n    model.suppressChangeNotifications = suppressChangeNotifications;\n\n    return true;\n  }\n}\n\nfunction convertStringToAtoms(s: string): Atom[] {\n  // Map special TeX characters to alternatives\n  // Must do this one first, since other replacements include backslash\n  s = s.replace(/\\\\/g, '\\\\textbackslash ');\n\n  s = s.replace(/#/g, '\\\\#');\n  s = s.replace(/\\$/g, '\\\\$');\n  s = s.replace(/%/g, '\\\\%');\n  s = s.replace(/&/g, '\\\\&');\n  // S = s.replace(/:/g, '\\\\colon');     // text colon?\n  // s = s.replace(/\\[/g, '\\\\lbrack');\n  // s = s.replace(/]/g, '\\\\rbrack');\n  s = s.replace(/_/g, '\\\\_');\n  s = s.replace(/{/g, '\\\\textbraceleft ');\n  s = s.replace(/}/g, '\\\\textbraceright ');\n  s = s.replace(/\\^/g, '\\\\textasciicircum ');\n  s = s.replace(/~/g, '\\\\textasciitilde ');\n  s = s.replace(/£/g, '\\\\textsterling ');\n\n  return parseLatex(s, 'text');\n}\n\nnew TextModeEditor();\n","import { getCommandTarget, SelectorPrivate } from '../editor/commands';\nimport { ExecuteCommandFunction } from '../editor/commands-definitions';\nimport { VirtualKeyboard } from '../editor/virtual-keyboard-utils';\nimport { Selector } from '../public/commands';\nimport { VirtualKeyboardInterface } from '../public/mathfield';\nimport {\n  CoreOptions,\n  OriginValidator,\n  RemoteVirtualKeyboardOptions,\n  VirtualKeyboardOptions,\n} from '../public/options';\nimport { validateOrigin } from './utils';\n\nconst POST_MESSAGE_TYPE = 'ml#systemPostMessage';\n\ninterface RemoteKeyboardMessageData {\n  type: 'ml#systemPostMessage';\n  action: 'executeCommand' | 'focus' | 'blur' | 'updateState';\n  state?: {\n    visible: boolean;\n    height: number;\n  };\n  command?: Selector | [Selector, ...any[]];\n}\n\n/**\n * Must be used on frame with mathfield editor\n */\nexport class VirtualKeyboardDelegate implements VirtualKeyboardInterface {\n  visible: boolean;\n  height: number;\n  private readonly targetOrigin: string;\n  private readonly originValidator: OriginValidator;\n  private enabled: boolean;\n\n  private readonly _focus: () => void;\n  private readonly _blur: () => void;\n  private readonly _executeCommand: ExecuteCommandFunction;\n\n  /**\n   * @param targetOrigin only virtual keyboards in a frame (or document) with this\n   * origin will be able to receive messages.\n   * Specify a value other than '*' to improve security and prevent malicious\n   * sites from intercepting content.\n   */\n  constructor(options: {\n    targetOrigin: string;\n    focus: () => void;\n    blur: () => void;\n    executeCommand: ExecuteCommandFunction;\n    originValidator: OriginValidator;\n  }) {\n    this.targetOrigin = options.targetOrigin ?? window.origin;\n    this.originValidator = options.originValidator ?? 'same-origin';\n    this._focus = options.focus;\n    this._blur = options.blur;\n    this._executeCommand = options.executeCommand;\n    this.enable();\n  }\n\n  setOptions(_options: VirtualKeyboardOptions & CoreOptions): void {\n    // The associated mathfield is using a keyboard delegate, and no keyboard\n    // options should be set on it\n  }\n\n  public dispose(): void {\n    this.disable();\n  }\n\n  public executeCommand(\n    command: SelectorPrivate | [SelectorPrivate, ...any[]]\n  ): boolean {\n    if (getCommandTarget(command) === 'virtual-keyboard') {\n      this.sendMessage('executeCommand', { command });\n      return false;\n    }\n\n    return this._executeCommand(command);\n  }\n\n  public enable(): void {\n    if (!this.enabled) {\n      this.enabled = true;\n      window.addEventListener('message', this);\n    }\n  }\n\n  public disable(): void {\n    if (this.enabled) {\n      window.removeEventListener('message', this);\n      this.enabled = false;\n    }\n  }\n\n  focusMathfield(): void {}\n\n  blurMathfield(): void {}\n\n  stateChanged(): void {}\n\n  handleEvent(event: MessageEvent<RemoteKeyboardMessageData>): void {\n    if (\n      event.type === 'message' &&\n      event.data &&\n      event.data.type === POST_MESSAGE_TYPE\n    ) {\n      if (!validateOrigin(event.origin, this.originValidator)) {\n        throw new Error(\n          `Message from unknown origin (${event.origin}) cannot be handled`\n        );\n      }\n\n      const { action } = event.data;\n\n      if (action === 'executeCommand') {\n        this.executeCommand(event.data.command);\n      } else if (action === 'updateState') {\n        this.visible = event.data.state.visible;\n        this.height = event.data.state.height;\n      } else if (action === 'focus') {\n        this._focus();\n      } else if (action === 'blur') {\n        this._blur();\n      }\n    }\n  }\n\n  private sendMessage(action: string, payload: any = {}): boolean {\n    if (window.parent) {\n      window.parent.postMessage(\n        {\n          type: POST_MESSAGE_TYPE,\n          action,\n          ...payload,\n        },\n        this.targetOrigin\n      );\n\n      return true;\n    }\n\n    return false;\n  }\n}\n\n/**\n * Must be used on parent frame where virtual keyboard will be rendered\n */\nexport class RemoteVirtualKeyboard extends VirtualKeyboard {\n  options: RemoteVirtualKeyboardOptions;\n\n  private sourceFrame: Window;\n  private readonly canUndoState: boolean;\n  private readonly canRedoState: boolean;\n\n  constructor(options?: Partial<RemoteVirtualKeyboardOptions>) {\n    super({\n      ...RemoteVirtualKeyboard.defaultOptions,\n      ...(options ?? {}),\n    });\n\n    window.addEventListener('message', this);\n  }\n\n  static get defaultOptions(): RemoteVirtualKeyboardOptions {\n    return {\n      namespace: '',\n      createHTML: (s: string): any => s,\n      fontsDirectory: './fonts',\n      soundsDirectory: './sounds',\n      targetOrigin: window.origin,\n      originValidator: 'same-origin',\n\n      virtualKeyboards: 'all',\n      virtualKeyboardLayout: 'auto',\n      customVirtualKeyboardLayers: {},\n      customVirtualKeyboards: {},\n      virtualKeyboardTheme: /android|cros/i.test(navigator?.userAgent)\n        ? 'material'\n        : 'apple',\n      keypressVibration: true,\n      keypressSound: null,\n      plonkSound: null,\n      virtualKeyboardToolbar: 'default',\n\n      virtualKeyboardToggleGlyph: `<span style=\"width: 21px; margin-top: 4px;\"><svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 576 512\"><path d=\"M528 64H48C21.49 64 0 85.49 0 112v288c0 26.51 21.49 48 48 48h480c26.51 0 48-21.49 48-48V112c0-26.51-21.49-48-48-48zm16 336c0 8.823-7.177 16-16 16H48c-8.823 0-16-7.177-16-16V112c0-8.823 7.177-16 16-16h480c8.823 0 16 7.177 16 16v288zM168 268v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm-336 80v-24c0-6.627-5.373-12-12-12H84c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm384 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zM120 188v-24c0-6.627-5.373-12-12-12H84c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm-96 152v-8c0-6.627-5.373-12-12-12H180c-6.627 0-12 5.373-12 12v8c0 6.627 5.373 12 12 12h216c6.627 0 12-5.373 12-12z\"/></svg></span>`,\n      virtualKeyboardMode: 'auto',\n    };\n  }\n\n  handleEvent(event: MessageEvent<RemoteKeyboardMessageData>): void {\n    if (\n      event.type === 'message' &&\n      event.data &&\n      event.data.type === POST_MESSAGE_TYPE\n    ) {\n      if (!validateOrigin(event.origin, this.options.originValidator)) {\n        throw new Error(\n          `Can not handle message from unknown origin (${event.origin}).`\n        );\n      }\n\n      const { action } = event.data;\n      if (action === 'executeCommand') {\n        const { command } = event.data;\n        this.sourceFrame = event.source as Window;\n\n        this.executeCommand(command);\n      }\n    }\n  }\n\n  stateChanged(): void {\n    this.sendMessage('stateChanged', {\n      state: {\n        visible: this.visible,\n        height: this.element?.offsetHeight ?? 0,\n      },\n    });\n  }\n\n  public executeCommand(command: Selector | [Selector, ...any[]]): boolean {\n    const commandTarget = getCommandTarget(command);\n\n    // Virtual keyboard commands must be handled at local window\n    if (commandTarget === 'virtual-keyboard') {\n      return super.executeCommand(command);\n    }\n\n    this.sendMessage('executeCommand', { command });\n\n    return false;\n  }\n\n  /**\n   * @category Focus\n   */\n  public focus(): void {\n    this.sendMessage('focus');\n  }\n\n  /**\n   * @category Focus\n   */\n  public blur(): void {\n    this.sendMessage('blur');\n  }\n\n  public canUndo(): boolean {\n    return this.canUndoState;\n  }\n\n  public canRedo(): boolean {\n    return this.canRedoState;\n  }\n\n  public dispose(): void {\n    window.removeEventListener('message', this);\n  }\n\n  private sendMessage(action: string, payload: any = {}): void {\n    this.sourceFrame?.postMessage(\n      {\n        type: POST_MESSAGE_TYPE,\n        action,\n        ...payload,\n      },\n      this.options.targetOrigin\n    );\n  }\n}\n","import type { ParseMode, Style } from '../public/core';\nimport type { Keybinding, KeyboardLayoutName } from '../public/options';\nimport type {\n  Mathfield,\n  InsertOptions,\n  OutputFormat,\n  Offset,\n  Range,\n  Selection,\n  FindOptions,\n  ApplyStyleOptions,\n  ReplacementFunction,\n  VirtualKeyboardInterface,\n} from '../public/mathfield';\n\nimport { Atom } from '../core/atom-class';\n\nimport { loadFonts } from '../core/fonts';\nimport { Stylesheet, inject as injectStylesheet } from '../common/stylesheet';\n\nimport { deleteRange, getMode, isRange, ModelPrivate } from '../editor/model';\nimport { applyStyle } from '../editor-model/styling';\nimport { delegateKeyboardEvents, KeyboardDelegate } from '../editor/keyboard';\nimport { UndoRecord, UndoManager } from '../editor/undo';\nimport { updatePopoverPosition } from '../editor/popover';\nimport { localize as l10n } from '../editor/l10n';\nimport {\n  HAPTIC_FEEDBACK_DURATION,\n  SelectorPrivate,\n  perform,\n  getCommandTarget,\n} from '../editor/commands';\nimport { find, replace } from '../editor-model/find';\nimport { complete } from './autocomplete';\nimport { requestUpdate, render } from './render';\nimport {\n  MathfieldOptionsPrivate,\n  update as updateOptions,\n  getDefault as getDefaultOptions,\n  get as getOptions,\n  effectiveMode,\n} from '../editor/options';\nimport {\n  removeComposition,\n  updateComposition,\n} from '../editor-model/composition';\nimport { addRowAfter, addColumnAfter } from '../editor-model/array';\nimport { onTypedText, onKeystroke } from './keyboard-input';\n\nimport './commands';\nimport './styling';\n\nimport {\n  getCaretPoint,\n  getSelectionBounds,\n  getSharedElement,\n  releaseSharedElement,\n  isValidMathfield,\n  on,\n  off,\n  Rect,\n} from './utils';\n\nimport { attachButtonHandlers } from './buttons';\nimport { onPointerDown, offsetFromPoint } from './pointer-input';\nimport { normalizeKeybindings } from '../editor/keybindings';\nimport {\n  setKeyboardLayoutLocale,\n  getActiveKeyboardLayout,\n  DEFAULT_KEYBOARD_LAYOUT,\n} from '../editor/keyboard-layout';\n\nimport { VirtualKeyboard } from '../editor/virtual-keyboard';\n\n// @ts-ignore-error\nimport mathfieldStylesheet from '../../css/mathfield.less';\n// @ts-ignore-error\nimport coreStylesheet from '../../css/core.less';\n// @ts-ignore-error\nimport popoverStylesheet from '../../css/popover.less';\n// @ts-ignore-error\nimport keystrokeCaptionStylesheet from '../../css/keystroke-caption.less';\nimport { range } from '../editor-model/selection-utils';\nimport { LatexGroupAtom } from '../core-atoms/latex';\nimport { parseLatex } from '../core/parser';\nimport { ModeEditor } from './mode-editor';\nimport './mode-editor-math';\nimport { getLatexGroupBody } from './mode-editor-latex';\nimport './mode-editor-text';\n\nimport { PlaceholderAtom } from '../core-atoms/placeholder';\nimport { VirtualKeyboardDelegate } from './remote-virtual-keyboard';\n\nexport class MathfieldPrivate implements Mathfield {\n  model: ModelPrivate;\n  options: Required<MathfieldOptionsPrivate>;\n\n  dirty: boolean; // If true, need to be redrawn\n  smartModeSuppressed: boolean;\n\n  element: HTMLElement & {\n    mathfield?: MathfieldPrivate;\n  };\n\n  /** @deprecated */\n  readonly originalContent: string;\n\n  keyboardDelegate: KeyboardDelegate;\n  field: HTMLElement;\n  fieldContent: HTMLElement;\n  virtualKeyboardToggle: HTMLElement;\n  ariaLiveText: HTMLElement;\n  accessibleNode: HTMLElement;\n  popover: HTMLElement;\n\n  keystrokeCaptionVisible: boolean;\n  keystrokeCaption: HTMLElement;\n\n  virtualKeyboard: VirtualKeyboardInterface;\n\n  _keybindings: Keybinding[]; // Normalized keybindings (raw ones in config)\n  keyboardLayout: KeyboardLayoutName;\n\n  keystrokeBuffer: string;\n  keystrokeBufferStates: UndoRecord[];\n  keystrokeBufferResetTimer: ReturnType<typeof setTimeout>;\n\n  suggestionIndex: number;\n\n  mode: ParseMode;\n  style: Style;\n\n  keypressSound: HTMLAudioElement;\n  spacebarKeypressSound: HTMLAudioElement;\n  returnKeypressSound: HTMLAudioElement;\n  deleteKeypressSound: HTMLAudioElement;\n  plonkSound: HTMLAudioElement;\n\n  private readonly undoManager: UndoManager;\n\n  private blurred: boolean;\n  // The value of the mathfield when it is focussed.\n  // If this value is different when the field is blured\n  // the `onCommit` listener is triggered\n  private valueOnFocus: string;\n  private eventHandlingInProgress = '';\n  private readonly stylesheets: Stylesheet[] = [];\n  private resizeTimer: number; // Timer handle\n\n  _atomBoundsCache: Map<string, Rect>;\n\n  /**\n   * To create a mathfield, you would typically use {@linkcode makeMathField | MathLive.makeMathField()}\n   * instead of invoking directly this constructor.\n   *\n   *\n   * @param element - The DOM element that this mathfield is attached to.\n   * Note that `element.mathfield` is this object.\n   */\n  constructor(\n    element: HTMLElement & { mathfield?: MathfieldPrivate },\n    options: Partial<MathfieldOptionsPrivate>\n  ) {\n    // Setup default config options\n    this.options = updateOptions(getDefaultOptions(), {\n      plonkSound: 'plonk.wav',\n      keypressSound: {\n        spacebar: 'keypress-spacebar.wav',\n        return: 'keypress-return.wav',\n        delete: 'keypress-delete.wav',\n        default: 'keypress-standard.wav',\n      },\n      ...options,\n    });\n\n    // The virtual keyboard can be either attached to this mathfield\n    // or a delegate that mirrors a global virtual keyboard attached\n    // to the document. This is useful for example when using\n    // mathfield in iframes so that all the mathfields share the keyboard\n    // at the document level (rather than having one in each iframe)\n    this.virtualKeyboard = options.useSharedVirtualKeyboard\n      ? new VirtualKeyboardDelegate({\n          targetOrigin: this.options.sharedVirtualKeyboardTargetOrigin,\n          focus: () => this.focus(),\n          blur: () => this.blur(),\n          executeCommand: (command) => this.executeCommand(command),\n          originValidator: this.options.originValidator,\n        })\n      : new VirtualKeyboard(this.options, {\n          executeCommand: (command) => this.executeCommand(command),\n        });\n\n    this.plonkSound = this.options.plonkSound as HTMLAudioElement;\n    if (\n      typeof this.options.keypressSound !== 'string' &&\n      !(this.options.keypressSound instanceof HTMLAudioElement)\n    ) {\n      this.keypressSound = this.options.keypressSound\n        .default as HTMLAudioElement;\n      this.spacebarKeypressSound = this.options.keypressSound\n        .spacebar as HTMLAudioElement;\n      this.returnKeypressSound = this.options.keypressSound\n        .return as HTMLAudioElement;\n      this.deleteKeypressSound = this.options.keypressSound\n        .delete as HTMLAudioElement;\n    }\n\n    this.element = element;\n    element.mathfield = this;\n\n    // Save existing content\n    this.originalContent = element.innerHTML;\n    let elementText = this.element.textContent;\n    if (elementText) {\n      elementText = elementText.trim();\n    }\n\n    // Load the fonts, inject the core and mathfield stylesheets\n    void loadFonts(this.options.fontsDirectory, this.options.onError);\n    this.stylesheets.push(injectStylesheet(element, coreStylesheet));\n    this.stylesheets.push(injectStylesheet(element, mathfieldStylesheet));\n\n    // Additional elements used for UI.\n    // They are retrieved in order a bit later, so they need to be kept in sync\n    // 1.0/ The field, where the math equation will be displayed\n    // 1.1/ The virtual keyboard toggle\n    // 2/ The popover panel which displays info in command mode\n    // 3/ The keystroke caption panel (option+shift+K)\n    // 4/ The virtual keyboard\n    // 5.0/ The area to stick MathML for screen reading larger exprs (not used right now)\n    //      The for the area is that focus would bounce their and then back triggering the\n    //         screen reader to read it\n    // 5.1/ The aria-live region for announcements\n    let markup = '';\n    const isTouchDevice =\n      globalThis.window?.matchMedia?.('(any-pointer: coarse)').matches ?? false;\n    if (!this.options.substituteTextArea) {\n      // On Android, iOS or iPadOS don't use a `<textarea>`, which has the side\n      // effect of bringing up the OS virtual keyboard\n      markup += isTouchDevice\n        ? `<span class='ML__textarea'>\n                <span class='ML__textarea__textarea'\n                    tabindex=\"-1\" role=\"textbox\"\n                    style='display:inline-block;height:1px;width:1px' >\n                </span>\n            </span>`\n        : '<span class=\"ML__textarea\">' +\n          '<textarea class=\"ML__textarea__textarea\" autocapitalize=\"off\" autocomplete=\"off\" ' +\n          `autocorrect=\"off\" spellcheck=\"false\" aria-hidden=\"true\" tabindex=\"${\n            element.tabIndex ?? 0\n          }\">` +\n          '</textarea>' +\n          '</span>';\n    } else if (typeof this.options.substituteTextArea === 'string') {\n      markup += this.options.substituteTextArea;\n    } else {\n      // We don't really need this one, but we keep it here so that the\n      // indexes below remain the same whether a substituteTextArea is\n      // provided or not.\n      markup += '<span></span>';\n    }\n\n    markup +=\n      '<span class=\"ML__fieldcontainer\">' +\n      '<span class=\"ML__fieldcontainer__field\"></span>';\n\n    markup += `<div part='virtual-keyboard-toggle' class=\"ML__virtual-keyboard-toggle\" role=\"button\" data-ML__tooltip=\"${l10n(\n      'tooltip.toggle virtual keyboard'\n    )}\">`;\n    // Data-ML__tooltip='Toggle Virtual Keyboard'\n    markup += this.options.virtualKeyboardToggleGlyph\n      ? this.options.virtualKeyboardToggleGlyph\n      : `<span style=\"width: 21px; margin-top: 4px;\"><svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 576 512\"><path d=\"M528 64H48C21.49 64 0 85.49 0 112v288c0 26.51 21.49 48 48 48h480c26.51 0 48-21.49 48-48V112c0-26.51-21.49-48-48-48zm16 336c0 8.823-7.177 16-16 16H48c-8.823 0-16-7.177-16-16V112c0-8.823 7.177-16 16-16h480c8.823 0 16 7.177 16 16v288zM168 268v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm-336 80v-24c0-6.627-5.373-12-12-12H84c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm384 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zM120 188v-24c0-6.627-5.373-12-12-12H84c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm-96 152v-8c0-6.627-5.373-12-12-12H180c-6.627 0-12 5.373-12 12v8c0 6.627 5.373 12 12 12h216c6.627 0 12-5.373 12-12z\"/></svg></span>`;\n    markup += '</div>';\n\n    markup += '</span>';\n    markup +=\n      '<div class=\"ML__sr-only\">' +\n      '<span aria-live=\"assertive\" aria-atomic=\"true\"></span>' +\n      '<span></span>' +\n      '</div>';\n\n    this.element.innerHTML = this.options.createHTML(markup);\n    if (!this.element.children) {\n      console.error(\n        '%cMathlive: Something went wrong and the mathfield could not be created.%c\\n' +\n          'If you are using Vue, this may be because you are using the ' +\n          'runtime-only build of Vue. Make sure to include ' +\n          \"'runtimeCompiler: true' in your Vue configuration. There\" +\n          'may a warning from Vue in the log above.',\n\n        'color:red;font-family:system-ui;font-size:1.2rem;font-weight:bold',\n        'color:inherith;font-family:system-ui;font-size:inherit;font-weight:inherit'\n      );\n      return;\n    }\n\n    let iChild = 0; // Index of child -- used to make changes below easier\n    const textarea: HTMLElement =\n      typeof this.options.substituteTextArea === 'function'\n        ? this.options.substituteTextArea()\n        : (this.element.children[iChild++].firstElementChild as HTMLElement);\n    this.field = this.element.children[iChild].children[0] as HTMLElement;\n    // Listen to 'wheel' events to scroll (horizontally) the field when it overflows\n    this.field.addEventListener(\n      'wheel',\n      (ev) => {\n        ev.preventDefault();\n        ev.stopPropagation();\n        const wheelDelta = ev.deltaX === undefined ? ev.detail : -ev.deltaX;\n        if (Number.isFinite(wheelDelta)) {\n          this.field.scroll({\n            top: 0,\n            left: this.field.scrollLeft - wheelDelta * 5,\n          });\n        }\n      },\n      { passive: false }\n    );\n\n    // When fonts are done loading, re-render\n    // (the selection state may be out of date)\n    document.fonts.ready.then(() => {\n      render(this);\n    });\n\n    iChild++;\n\n    this.virtualKeyboardToggle = this.element.querySelector(\n      '.ML__virtual-keyboard-toggle'\n    );\n    if (this.options.virtualKeyboardMode === 'manual') {\n      this.virtualKeyboardToggle.classList.add('is-visible');\n    } else {\n      this.virtualKeyboardToggle.classList.remove('is-visible');\n    }\n    attachButtonHandlers(\n      (command) => this.executeCommand(command),\n      this.virtualKeyboardToggle,\n      {\n        default: 'toggleVirtualKeyboard',\n        alt: 'toggleVirtualKeyboardAlt',\n        shift: 'toggleVirtualKeyboardShift',\n      }\n    );\n    this.ariaLiveText = this.element.children[iChild]\n      .children[0] as HTMLElement;\n    this.accessibleNode = this.element.children[iChild++]\n      .children[1] as HTMLElement;\n    // Some panels are shared amongst instances of mathfield\n    // (there's a single instance in the document)\n    this.popover = getSharedElement('mathlive-popover-panel', 'ML__popover');\n    this.stylesheets.push(injectStylesheet(null, coreStylesheet));\n    this.stylesheets.push(injectStylesheet(null, popoverStylesheet));\n    this.keystrokeCaption = getSharedElement(\n      'mathlive-keystroke-caption-panel',\n      'ML__keystroke-caption'\n    );\n    this.stylesheets.push(injectStylesheet(null, keystrokeCaptionStylesheet));\n    // The keystroke caption panel and the command bar are\n    // initially hidden\n    this.keystrokeCaptionVisible = false;\n    this.keystrokeBuffer = '';\n    this.keystrokeBufferStates = [];\n    this.keystrokeBufferResetTimer = null;\n    // This index indicates which of the suggestions available to\n    // display in the popover panel\n    this.suggestionIndex = 0;\n    // The input mode (text, math, command)\n    // While model.getMode() represent the mode of the current selection,\n    // this.mode is the mode chosen by the user. It indicates the mode the\n    // next character typed will be interpreted in.\n    // It is often identical to getAnchorMode() since changing the selection\n    // changes the mode, but sometimes it is not, for example when a user\n    // enters a mode changing command.\n    this.mode = effectiveMode(this.options);\n    this.smartModeSuppressed = false;\n    // Current style (color, weight, italic, etc...):\n    // reflects the style to be applied on next insertion.\n    this.style = {};\n    // Focus/blur state\n    this.blurred = true;\n    on(this.element, 'focus', this);\n    on(this.element, 'blur', this);\n    // Capture clipboard events\n    // Delegate keyboard events\n    this.keyboardDelegate = delegateKeyboardEvents(\n      textarea as HTMLTextAreaElement,\n      {\n        typedText: (text: string): void => onTypedText(this, text),\n        cut: (_ev: ClipboardEvent) => {\n          // Ignore if in read-only mode\n          if (this.options.readOnly) {\n            this.model.announce('plonk');\n            return;\n          }\n\n          // Snapshot the undo state\n          this.snapshot();\n\n          // Clearing the selection will have the side effect of clearing the\n          // content of the textarea. However, the textarea value is what will\n          // be copied to the clipboard, so defer the clearing of the selection\n          // to later, after the cut operation has been handled.\n          setTimeout(() => {\n            deleteRange(this.model, range(this.model.selection));\n            requestUpdate(this);\n          }, 0);\n        },\n        copy: (ev: ClipboardEvent) =>\n          ModeEditor.onCopy(this.model.at(this.model.position).mode, this, ev),\n        paste: (ev: ClipboardEvent) => {\n          // Ignore if in read-only mode\n          if (this.options.readOnly) {\n            this.model.announce('plonk');\n            return;\n          }\n          ModeEditor.onPaste(this.model.at(this.model.position).mode, this, ev);\n        },\n        keystroke: (keystroke, event) => onKeystroke(this, keystroke, event),\n        focus: () => this.onFocus(),\n        blur: () => this.onBlur(),\n        compositionStart: (composition: string) =>\n          this.onCompositionStart(composition),\n        compositionUpdate: (composition: string) =>\n          this.onCompositionUpdate(composition),\n        compositionEnd: (composition: string) =>\n          this.onCompositionEnd(composition),\n      }\n    );\n\n    // Delegate mouse and touch events\n    if (window.PointerEvent) {\n      // Use modern pointer events if available\n      on(this.field, 'pointerdown', this);\n    } else {\n      on(this.field, 'touchstart:active mousedown', this);\n    }\n\n    // Request notification for when the window is resized (\n    // or the device switched from portrait to landscape) to adjust\n    // the UI (popover, etc...)\n    on(window, 'resize', this);\n\n    // Setup the model\n    this.model = new ModelPrivate(\n      {\n        mode: effectiveMode(this.options),\n        macros: this.options.macros,\n        removeExtraneousParentheses: this.options.removeExtraneousParentheses,\n      },\n      {\n        onContentDidChange: (_sender: ModelPrivate): void =>\n          this.options.onContentDidChange(this),\n        onSelectionDidChange: (_sender: ModelPrivate): void =>\n          this._onSelectionDidChange(),\n        onContentWillChange: (): void => this.options.onContentWillChange(this),\n        onSelectionWillChange: (): void =>\n          this.options.onSelectionWillChange(this),\n        onError: this.options.onError,\n      },\n      {\n        announce: (\n          _sender: Mathfield,\n          command: string,\n          previousPosition: number,\n          atoms: Atom[]\n        ): void =>\n          this.options.onAnnounce?.(this, command, previousPosition, atoms),\n        moveOut: (_sender, direction): boolean =>\n          this.options.onMoveOutOf(this, direction),\n        tabOut: (_sender, direction): boolean =>\n          this.options.onTabOutOf(this, direction),\n      },\n      this\n    );\n\n    // Prepare to manage undo/redo\n    this.undoManager = new UndoManager(this.model);\n\n    // Use the content of the element for the initial value of the mathfield\n    if (elementText) {\n      ModeEditor.insert('math', this.model, elementText, {\n        insertionMode: 'replaceAll',\n        selectionMode: 'after',\n        format: 'latex',\n        suppressChangeNotifications: true,\n        macros: this.options.macros,\n      });\n    }\n\n    // Now start recording potentially undoable actions\n    this.undoManager.startRecording();\n    this.undoManager.snapshot(this.options);\n\n    this.model.setListeners({\n      onContentDidChange: (_sender: ModelPrivate) =>\n        this.options.onContentDidChange(this),\n      onSelectionDidChange: (_sender: ModelPrivate) =>\n        this._onSelectionDidChange(),\n      onContentWillChange: () => this.options.onContentWillChange(this),\n      onSelectionWillChange: () => this.options.onSelectionWillChange(this),\n      onError: this.options.onError,\n    });\n    this.model.setHooks({\n      announce: (_sender: Mathfield, command, previousPosition, atoms) =>\n        this.options.onAnnounce?.(this, command, previousPosition, atoms),\n      moveOut: (_sender, direction) =>\n        this.options.onMoveOutOf(this, direction),\n      tabOut: (_sender, direction) => this.options.onTabOutOf(this, direction),\n    });\n\n    if (!this.options.locale.startsWith(getActiveKeyboardLayout().locale)) {\n      setKeyboardLayoutLocale(this.options.locale);\n    }\n\n    requestUpdate(this);\n  }\n\n  get keybindings(): Keybinding[] {\n    if (this._keybindings) return this._keybindings;\n    this._keybindings = normalizeKeybindings(\n      this.options.keybindings,\n      getActiveKeyboardLayout() ?? DEFAULT_KEYBOARD_LAYOUT,\n      (e) => {\n        if (typeof this.options.onError === 'function') {\n          this.options.onError({\n            code: 'invalid-keybinding',\n            arg: e.join('\\n'),\n          });\n        }\n\n        console.error(e.join('\\n'));\n      }\n    );\n    return this._keybindings;\n  }\n\n  /** @deprecated */\n  $setConfig(config: Partial<MathfieldOptionsPrivate>): void {\n    deprecated('$setConfig');\n    this.setOptions(config);\n  }\n\n  setOptions(config: Partial<MathfieldOptionsPrivate>): void {\n    this.options = updateOptions(this.options, config);\n    this.model.setListeners({\n      onContentDidChange: (_sender: ModelPrivate) =>\n        this.options.onContentDidChange(this),\n      onSelectionDidChange: (_sender: ModelPrivate) =>\n        this._onSelectionDidChange(),\n      onContentWillChange: () => this.options.onContentWillChange(this),\n      onSelectionWillChange: () => this.options.onSelectionWillChange(this),\n      onError: this.options.onError,\n    });\n    this.model.setHooks({\n      announce: (_sender: Mathfield, command, previousPosition, atoms) =>\n        this.options.onAnnounce?.(this, command, previousPosition, atoms),\n      moveOut: (_sender, direction) =>\n        this.options.onMoveOutOf(this, direction),\n      tabOut: (_sender, direction) => this.options.onTabOutOf(this, direction),\n    });\n\n    if (!this.options.locale.startsWith(getActiveKeyboardLayout().locale)) {\n      setKeyboardLayoutLocale(this.options.locale);\n    }\n\n    this._keybindings = undefined;\n\n    this.plonkSound = this.options.plonkSound as HTMLAudioElement;\n    if (\n      typeof this.options.keypressSound !== 'string' &&\n      !(this.options.keypressSound instanceof HTMLAudioElement)\n    ) {\n      this.keypressSound = this.options.keypressSound\n        .default as HTMLAudioElement;\n      this.spacebarKeypressSound = this.options.keypressSound\n        .spacebar as HTMLAudioElement;\n      this.returnKeypressSound = this.options.keypressSound\n        .return as HTMLAudioElement;\n      this.deleteKeypressSound = this.options.keypressSound\n        .delete as HTMLAudioElement;\n    }\n\n    if (this.options.readOnly) {\n      this.onBlur();\n    }\n\n    this.virtualKeyboard.setOptions(this.options);\n\n    if (this.options.virtualKeyboardMode === 'manual') {\n      this.virtualKeyboardToggle.classList.add('is-visible');\n    } else {\n      this.virtualKeyboardToggle.classList.remove('is-visible');\n    }\n\n    // Changing some config options (i.e. `macros`) may\n    // require the content to be reparsed and re-rendered\n    const content = Atom.toLatex(this.model.root, { expandMacro: false });\n    if (this.model.getValue() !== content) {\n      ModeEditor.insert('math', this.model, content, {\n        insertionMode: 'replaceAll',\n        selectionMode: 'after',\n        format: 'latex',\n        suppressChangeNotifications: true,\n        macros: this.options.macros,\n      });\n    }\n\n    requestUpdate(this);\n  }\n\n  /** @deprecated */\n  getConfig<K extends keyof MathfieldOptionsPrivate>(\n    keys: K[]\n  ): Pick<MathfieldOptionsPrivate, K>;\n  /** @deprecated */\n  getConfig<K extends keyof MathfieldOptionsPrivate>(\n    key: K\n  ): MathfieldOptionsPrivate[K];\n  /** @deprecated */\n  getConfig(): MathfieldOptionsPrivate;\n  /** @deprecated */\n  getConfig(\n    keys?: keyof MathfieldOptionsPrivate | (keyof MathfieldOptionsPrivate)[]\n  ): any | Partial<MathfieldOptionsPrivate> {\n    deprecated('getConfig');\n    return getOptions(this.options, keys);\n  }\n\n  getOptions<K extends keyof MathfieldOptionsPrivate>(\n    keys: K[]\n  ): Pick<MathfieldOptionsPrivate, K>;\n  getOptions(): MathfieldOptionsPrivate;\n  getOptions(\n    keys?: keyof MathfieldOptionsPrivate | (keyof MathfieldOptionsPrivate)[]\n  ): any | Partial<MathfieldOptionsPrivate> {\n    return getOptions(this.options, keys);\n  }\n\n  getOption<K extends keyof MathfieldOptionsPrivate>(\n    key: K\n  ): MathfieldOptionsPrivate[K] {\n    return getOptions(this.options, key);\n  }\n\n  /*\n   * HandleEvent is a function invoked when an event is registered with an\n   * object instead ( see `addEventListener()` in `on()`)\n   * The name is defined by `addEventListener()` and cannot be changed.\n   * This pattern is used to be able to release bound event handlers,\n   * (event handlers that need access to `this`) as the bind() function\n   * would create a new function that would have to be kept track off\n   * to be able to properly remove the event handler later.\n   */\n  handleEvent(evt: Event): void {\n    switch (evt.type) {\n      case 'focus':\n        if (!this.eventHandlingInProgress) {\n          this.eventHandlingInProgress = 'focus';\n          this.onFocus();\n          this.eventHandlingInProgress = '';\n        }\n\n        break;\n      case 'blur':\n        if (!this.eventHandlingInProgress) {\n          this.eventHandlingInProgress = 'blur';\n          this.onBlur();\n          this.eventHandlingInProgress = '';\n        }\n\n        break;\n      case 'touchstart':\n      case 'mousedown':\n        // IOS <=13 Safari and Firefox on Android\n        onPointerDown(this, evt as PointerEvent);\n        break;\n      case 'pointerdown':\n        onPointerDown(this, evt as PointerEvent);\n        break;\n      case 'resize': {\n        if (this.resizeTimer) {\n          window.cancelAnimationFrame(this.resizeTimer);\n        }\n\n        this.resizeTimer = window.requestAnimationFrame(\n          () => isValidMathfield(this) && this.onResize()\n        );\n        break;\n      }\n\n      default:\n        console.warn('Unexpected event type', evt.type);\n    }\n  }\n\n  /** @deprecated */\n  $revertToOriginalContent(): void {\n    deprecated('$revertToOriginalContent');\n    this.dispose();\n    this.element.innerHTML = this.options.createHTML(this.originalContent);\n  }\n\n  dispose(): void {\n    this.element.innerHTML = '$$' + this.getValue() + '$$';\n    delete this.element.mathfield;\n    delete this.accessibleNode;\n    delete this.ariaLiveText;\n    delete this.field;\n    delete this.fieldContent;\n    delete this.keyboardDelegate;\n    this.virtualKeyboardToggle.remove();\n    delete this.virtualKeyboardToggle;\n    releaseSharedElement(this.popover);\n    delete this.popover;\n    releaseSharedElement(this.keystrokeCaption);\n    delete this.keystrokeCaption;\n    if (this.virtualKeyboard) {\n      this.virtualKeyboard.dispose();\n      delete this.virtualKeyboard;\n    }\n\n    off(this.element, 'pointerdown', this);\n    off(this.element, 'touchstart:active mousedown', this);\n    off(this.element, 'focus', this);\n    off(this.element, 'blur', this);\n    off(window, 'resize', this);\n    delete this.element;\n    this.stylesheets.forEach((x) => x.release());\n  }\n\n  resetKeystrokeBuffer(options?: { defer: boolean }): void {\n    options = options ?? { defer: false };\n    if (options.defer) {\n      // If there is a timeout greater than 0, defer the reset\n      // If the timeout is 0, never do the reset: regardless of the amount\n      // of time between keystrokes, consider them as candidates for\n      // a shortcut\n      if (this.options.inlineShortcutTimeout > 0) {\n        // Set a timer to reset the shortcut buffer\n        this.keystrokeBufferResetTimer = setTimeout(() => {\n          this.resetKeystrokeBuffer();\n        }, this.options.inlineShortcutTimeout);\n      }\n\n      return;\n    }\n\n    this.keystrokeBuffer = '';\n    this.keystrokeBufferStates = [];\n    clearTimeout(this.keystrokeBufferResetTimer);\n  }\n\n  /** @deprecated */\n  $perform(\n    command: SelectorPrivate | [SelectorPrivate, ...unknown[]]\n  ): boolean {\n    deprecated('$perform');\n    return this.executeCommand(command);\n  }\n\n  executeCommand(\n    command: SelectorPrivate | [SelectorPrivate, ...unknown[]]\n  ): boolean {\n    if (getCommandTarget(command) === 'virtual-keyboard') {\n      return this.virtualKeyboard?.executeCommand(command);\n    }\n\n    return perform(this, command);\n  }\n\n  get lastOffset(): number {\n    return this.model.lastOffset;\n  }\n\n  get selection(): Selection {\n    return this.model.selection;\n  }\n\n  set selection(value: Selection) {\n    this.model.selection = value;\n  }\n\n  /** @deprecated */\n  $text(format: OutputFormat): string {\n    return this.getValue(format);\n  }\n\n  getValue(): string;\n  getValue(format: OutputFormat): string;\n  getValue(start: Offset, end: Offset, format?: OutputFormat): string;\n  getValue(range: Range, format?: OutputFormat): string;\n  getValue(selection: Selection, format?: OutputFormat): string;\n  getValue(\n    arg1?: Offset | OutputFormat | Range | Selection,\n    arg2?: Offset | OutputFormat,\n    arg3?: OutputFormat\n  ): string {\n    return this.model.getValue(arg1, arg2, arg3);\n  }\n\n  setValue(value: string, options?: InsertOptions): void {\n    options = options ?? { mode: 'math' };\n    if (options.insertionMode === undefined) {\n      options.insertionMode = 'replaceAll';\n    }\n\n    if (options.format === undefined || options.format === 'auto') {\n      options.format = 'latex';\n    }\n\n    let mode: ParseMode = 'math';\n    if (options.mode === undefined || options.mode === 'auto') {\n      mode = getMode(this.model, this.model.position);\n    }\n\n    if (ModeEditor.insert(mode, this.model, value, options)) {\n      this.undoManager.snapshot(this.options);\n      requestUpdate(this);\n    }\n  }\n\n  find(value: string | RegExp, options: FindOptions): Range[] {\n    return find(this.model, value, options);\n  }\n\n  replace(\n    searchValue: string | RegExp,\n    newValue: string | ReplacementFunction,\n    options?: FindOptions\n  ): void {\n    replace(this.model, searchValue, newValue, options);\n  }\n\n  /** @deprecated */\n  $selectedText(format: OutputFormat): string {\n    deprecated('$selectedText');\n\n    return this.getValue(this.model.selection, format);\n  }\n\n  /** @deprecated */\n  $selectionIsCollapsed(): boolean {\n    deprecated('$selectionIsCollapsed');\n    return this.model.selectionIsCollapsed;\n  }\n\n  /** @deprecated */\n  $selectionDepth(): number {\n    deprecated('$selectionDepth');\n    return this.model.at(this.model.position).treeDepth;\n  }\n\n  /**\n   * Checks if the selection starts at the beginning of the selection group.\n   *\n   * @deprecated\n   */\n  $selectionAtStart(): boolean {\n    deprecated('$selectionAtStart');\n    return false;\n  }\n\n  /** @deprecated */\n  $selectionAtEnd(): boolean {\n    deprecated('$selectionAtEnd');\n    return false;\n  }\n\n  /** @deprecated */\n  $latex(text?: string, options?: InsertOptions): string {\n    deprecated('$latex');\n    if (typeof text === 'string') {\n      const oldValue = Atom.toLatex(this.model.root, {\n        expandMacro: false,\n      });\n      if (text !== oldValue) {\n        options = options ?? { mode: 'math' };\n        ModeEditor.insert('math', this.model, text, {\n          insertionMode: 'replaceAll',\n          selectionMode: 'after',\n          format: 'latex',\n          mode: 'math',\n          suppressChangeNotifications: options.suppressChangeNotifications,\n          macros: this.options.macros,\n        });\n        this.undoManager.snapshot(this.options);\n        requestUpdate(this);\n      }\n\n      return text;\n    }\n\n    // Return the content as LaTeX\n    return Atom.toLatex(this.model.root, { expandMacro: false });\n  }\n\n  /** @deprecated */\n  $el(): HTMLElement {\n    deprecated('$el');\n    return this.element;\n  }\n\n  scrollIntoView(): void {\n    // If a render is pending, do it now to make sure we have correct layout\n    // and caret position\n    if (this.dirty) {\n      render(this);\n    }\n\n    const fieldBounds = this.field.getBoundingClientRect();\n    let caretPoint: number;\n    if (this.model.selectionIsCollapsed) {\n      caretPoint = getCaretPoint(this.field)?.x;\n    } else {\n      const selectionBounds = getSelectionBounds(this);\n      if (selectionBounds.length > 0) {\n        let maxRight = -Infinity;\n        for (const r of selectionBounds) {\n          if (r.right > maxRight) maxRight = r.right;\n        }\n        caretPoint = maxRight + fieldBounds.left - this.field.scrollLeft;\n      }\n    }\n\n    if (caretPoint !== undefined) {\n      const x = caretPoint - window.scrollX;\n      if (x < fieldBounds.left) {\n        this.field.scroll({\n          top: 0,\n          left: x - fieldBounds.left + this.field.scrollLeft - 20,\n          behavior: 'smooth',\n        });\n      } else if (x > fieldBounds.right) {\n        this.field.scroll({\n          top: 0,\n          left: x - fieldBounds.right + this.field.scrollLeft + 20,\n          behavior: 'smooth',\n        });\n      }\n    }\n  }\n\n  /** @deprecated */\n  $insert(s: string, options?: InsertOptions): boolean {\n    deprecated('$insert');\n    return this.insert(s, options);\n  }\n\n  insert(s: string, options?: InsertOptions): boolean {\n    if (typeof s === 'string' && s.length > 0) {\n      options = options ?? { mode: 'math' };\n      if (options.focus) {\n        this.focus();\n      }\n\n      if (options.feedback) {\n        if (this.options.keypressVibration && navigator?.vibrate) {\n          navigator.vibrate(HAPTIC_FEEDBACK_DURATION);\n        }\n\n        void this.keypressSound?.play();\n      }\n\n      if (s === '\\\\\\\\') {\n        // This string is interpreted as an \"insert row after\" command\n        addRowAfter(this.model);\n      } else if (s === '&') {\n        addColumnAfter(this.model);\n      } else {\n        const savedStyle = this.style;\n        ModeEditor.insert(this.mode, this.model, s, {\n          style: this.model.at(this.model.position).computedStyle,\n          ...options,\n        });\n        if (options.resetStyle) {\n          this.style = savedStyle;\n        }\n      }\n\n      this.undoManager.snapshot(this.options);\n      requestUpdate(this);\n      return true;\n    }\n\n    return false;\n  }\n\n  switchMode(mode: ParseMode, prefix = '', suffix = ''): void {\n    if (this.mode === mode) return;\n    const { model } = this;\n    model.deferNotifications(\n      { content: Boolean(suffix) || Boolean(prefix), selection: true },\n      (): boolean => {\n        let contentChanged = false;\n        this.resetKeystrokeBuffer();\n        // Suppress (temporarily) smart mode if switching to/from text or math\n        // This prevents switching to/from command mode from suppressing smart mode.\n        this.smartModeSuppressed =\n          /text|math/.test(this.mode) && /text|math/.test(mode);\n        if (prefix) {\n          const atoms = parseLatex(\n            prefix,\n            { math: 'text', text: 'math' }[mode],\n            null,\n            null\n          );\n          model.collapseSelection('forward');\n          const cursor = model.at(model.position);\n          model.position = model.offsetOf(\n            cursor.parent.addChildrenAfter(atoms, cursor)\n          );\n          contentChanged = true;\n        }\n\n        this.mode = mode;\n\n        if (mode === 'latex') {\n          const wasCollapsed = model.selectionIsCollapsed;\n          // We can have only a single latex group at a time.\n          // If a latex group is open, close it first\n          complete(this, 'accept');\n\n          // Switch to the command mode keyboard layer\n          if (this.virtualKeyboard.visible) {\n            this.executeCommand(['switchKeyboardLayer', 'latex-lower']);\n          }\n\n          // Insert a latex group atom\n          let latex: string;\n          let cursor = model.at(model.position);\n          if (wasCollapsed) {\n            latex = '\\\\';\n          } else {\n            const selRange = range(model.selection);\n            latex = Atom.toLatex(\n              model\n                .extractAtoms(selRange)\n                .filter((x) => !(x instanceof PlaceholderAtom)),\n              {\n                expandMacro: false,\n              }\n            );\n            cursor = model.at(selRange[0]);\n          }\n\n          const atom = new LatexGroupAtom(latex);\n          cursor.parent.addChildAfter(atom, cursor);\n          if (wasCollapsed) {\n            model.position = model.offsetOf(atom.lastChild);\n          } else {\n            model.setSelection(\n              model.offsetOf(atom.firstChild),\n              model.offsetOf(atom.lastChild)\n            );\n          }\n        } else {\n          // Remove any error indicator on the current command sequence (if there is one)\n          getLatexGroupBody(model).forEach((x) => {\n            x.isError = false;\n          });\n        }\n\n        if (suffix) {\n          const atoms = parseLatex(\n            suffix,\n            { math: 'text', text: 'math' }[mode],\n            null,\n            null\n          );\n          model.collapseSelection('forward');\n          const cursor = model.at(model.position);\n          model.position = model.offsetOf(\n            cursor.parent.addChildrenAfter(atoms, cursor)\n          );\n          contentChanged = true;\n        }\n\n        // Notify of mode change\n        if (typeof this.options.onModeChange === 'function') {\n          this.options.onModeChange(this, this.mode);\n        }\n\n        requestUpdate(this);\n        return contentChanged;\n      }\n    );\n  }\n\n  /** @deprecated */\n  $hasFocus(): boolean {\n    deprecated('$hasFocus');\n    return this.hasFocus();\n  }\n\n  hasFocus(): boolean {\n    return document.hasFocus() && this.keyboardDelegate.hasFocus();\n  }\n\n  focus(): void {\n    if (!this.hasFocus()) {\n      this.keyboardDelegate.focus();\n      this.model.announce('line');\n    }\n  }\n\n  blur(): void {\n    if (this.hasFocus()) {\n      this.keyboardDelegate.blur();\n    }\n  }\n\n  /** @deprecated */\n  $focus(): void {\n    deprecated('$focus');\n    return this.focus();\n  }\n\n  /** @deprecated */\n  $blur(): void {\n    deprecated('$blur');\n    return this.blur();\n  }\n\n  /** @deprecated */\n  $select(): void {\n    this.select();\n  }\n\n  select(): void {\n    this.model.selection = { ranges: [[0, this.model.lastOffset]] };\n  }\n\n  /** @deprecated */\n  $clearSelection(): void {\n    deprecated('$clearSelection');\n    deleteRange(this.model, range(this.model.selection));\n  }\n\n  applyStyle(style: Style, inOptions: Range | ApplyStyleOptions = {}): void {\n    const options: ApplyStyleOptions = {\n      operation: 'set',\n      suppressChangeNotifications: false,\n    };\n    if (isRange(inOptions)) {\n      options.range = inOptions;\n    } else {\n      options.range = inOptions.range;\n      options.suppressChangeNotifications =\n        inOptions.suppressChangeNotifications ?? false;\n    }\n\n    const operation = options.operation ?? 'set';\n    this.model.deferNotifications(\n      { content: !options.suppressChangeNotifications },\n      () => {\n        if (options.range === undefined) {\n          this.model.selection.ranges.forEach((range) =>\n            applyStyle(this.model, range, style, { operation })\n          );\n        } else {\n          applyStyle(this.model, options.range, style, { operation });\n        }\n      }\n    );\n    requestUpdate(this);\n  }\n\n  /** @deprecated */\n  $applyStyle(style: Style): void {\n    this.model.selection.ranges.forEach((range) =>\n      applyStyle(this.model, range, style, { operation: 'toggle' })\n    );\n  }\n\n  /** @deprecated */\n  $keystroke(keys: string, evt?: KeyboardEvent): boolean {\n    deprecated('$keystroke');\n    return onKeystroke(this, keys, evt);\n  }\n\n  /** @deprecated */\n  $typedText(text: string): void {\n    deprecated('$typedText');\n    onTypedText(this, text);\n  }\n\n  getCaretPoint(): { x: number; y: number } | null {\n    const caretOffset = getCaretPoint(this.field);\n    return caretOffset ? { x: caretOffset.x, y: caretOffset.y } : null;\n  }\n\n  setCaretPoint(x: number, y: number): boolean {\n    const newPosition = offsetFromPoint(this, x, y, { bias: 0 });\n    if (newPosition < 0) return false;\n    const previousPosition = this.model.position;\n    this.model.position = newPosition;\n    this.model.announce('move', previousPosition);\n    requestUpdate(this);\n    return true;\n  }\n\n  canUndo(): boolean {\n    return this.undoManager.canUndo();\n  }\n\n  canRedo(): boolean {\n    return this.undoManager.canRedo();\n  }\n\n  popUndoStack(): void {\n    this.undoManager.pop();\n  }\n\n  snapshot(): void {\n    this.undoManager.snapshot({\n      ...this.options,\n      onUndoStateDidChange: (mf, reason): void => {\n        this.virtualKeyboard.executeCommand([\n          'onUndoStateChanged',\n          this.canUndo(),\n          this.canRedo(),\n        ]);\n        this.options.onUndoStateDidChange(mf, reason);\n      },\n    });\n  }\n\n  snapshotAndCoalesce(): void {\n    this.undoManager.snapshotAndCoalesce({\n      ...this.options,\n      onUndoStateDidChange: (mf, reason): void => {\n        this.virtualKeyboard.executeCommand([\n          'onUndoStateChanged',\n          this.canUndo(),\n          this.canRedo(),\n        ]);\n        this.options.onUndoStateDidChange(mf, reason);\n      },\n    });\n  }\n\n  getUndoRecord(): UndoRecord {\n    return this.undoManager.save();\n  }\n\n  restoreToUndoRecord(s: UndoRecord): void {\n    this.undoManager.restore(s, {\n      ...this.options,\n      suppressChangeNotifications: true,\n    });\n  }\n\n  undo(): void {\n    return this.undoManager.undo({\n      ...this.options,\n      onUndoStateDidChange: (mf, reason): void => {\n        this.virtualKeyboard.executeCommand([\n          'onUndoStateChanged',\n          this.canUndo(),\n          this.canRedo(),\n        ]);\n        this.options.onUndoStateDidChange(mf, reason);\n      },\n    });\n  }\n\n  redo(): void {\n    return this.undoManager.redo({\n      ...this.options,\n      onUndoStateDidChange: (mf, reason): void => {\n        this.virtualKeyboard.executeCommand([\n          'onUndoStateChanged',\n          this.canUndo(),\n          this.canRedo(),\n        ]);\n        this.options.onUndoStateDidChange(mf, reason);\n      },\n    });\n  }\n\n  private _onSelectionDidChange(): void {\n    // Keep the content of the textarea in sync wiht the selection.\n    // This will allow cut/copy to work.\n    this.keyboardDelegate.setValue(\n      this.getValue(this.model.selection, 'latex-expanded')\n    );\n\n    // Adjust mode\n    {\n      const cursor = this.model.at(this.model.position);\n      const newMode = cursor.mode ?? effectiveMode(this.options);\n      if (this.mode !== newMode) {\n        if (this.mode === 'latex') {\n          complete(this, 'accept', { mode: newMode });\n          this.model.position = this.model.offsetOf(cursor);\n        } else {\n          this.switchMode(newMode);\n        }\n      }\n    }\n\n    // Invoke client listeners, if provided.\n    if (typeof this.options.onSelectionDidChange === 'function') {\n      this.options.onSelectionDidChange(this);\n    }\n  }\n\n  private onFocus(): void {\n    if (this.options.readOnly) return;\n    if (this.blurred) {\n      this.blurred = false;\n      this.keyboardDelegate.focus();\n\n      this.virtualKeyboard.enable();\n\n      if (this.options.virtualKeyboardMode === 'onfocus') {\n        this.executeCommand('showVirtualKeyboard');\n      }\n\n      updatePopoverPosition(this);\n      this.options.onFocus?.(this);\n\n      // Save the current value.\n      // It will be compared in `onBlur()` to see if the\n      // `onCommit` listener needs to be invoked. This\n      // mimic the `<input>` and `<textarea>` behavior\n      this.valueOnFocus = this.getValue();\n      requestUpdate(this);\n    }\n  }\n\n  private onBlur(): void {\n    if (!this.blurred) {\n      this.blurred = true;\n      this.ariaLiveText.textContent = '';\n\n      if (/onfocus|manual/.test(this.options.virtualKeyboardMode)) {\n        this.executeCommand('hideVirtualKeyboard');\n      }\n\n      complete(this, 'accept');\n      requestUpdate(this);\n      if (typeof this.options.onBlur === 'function') {\n        this.options.onBlur(this);\n      }\n\n      this.virtualKeyboard.disable();\n\n      if (\n        typeof this.options.onCommit === 'function' &&\n        this.getValue() !== this.valueOnFocus\n      ) {\n        this.options.onCommit(this);\n      }\n    }\n  }\n\n  private onCompositionStart(_composition: string): void {\n    // Clear the selection if there is one\n    this.model.position = this.model.deleteAtoms(range(this.model.selection));\n    requestAnimationFrame(() => {\n      render(this); // Recalculate the position of the caret\n      // Synchronize the location and style of textarea\n      // so that the IME candidate window can align with the composition\n      const caretPoint = getCaretPoint(this.field);\n      if (!caretPoint) return;\n      this.keyboardDelegate.moveTo(caretPoint.x, caretPoint.y);\n    });\n  }\n\n  private onCompositionUpdate(composition: string): void {\n    updateComposition(this.model, composition);\n    requestUpdate(this);\n  }\n\n  private onCompositionEnd(composition: string): void {\n    removeComposition(this.model);\n    onTypedText(this, composition, {\n      simulateKeystroke: true,\n    });\n  }\n\n  private onResize(): void {\n    this.element.classList.remove(\n      'ML__isNarrowWidth',\n      'ML__isWideWidth',\n      'ML__isExtendedWidth'\n    );\n    if (window.innerWidth >= 1024) {\n      this.element.classList.add('ML__isExtendedWidth');\n    } else if (window.innerWidth >= 768) {\n      this.element.classList.add('ML__isWideWidth');\n    } else {\n      this.element.classList.add('ML__isNarrowWidth');\n    }\n\n    updatePopoverPosition(this);\n  }\n}\n\nfunction deprecated(method: string) {\n  console.warn(`Method \"${method}\" is deprecated`);\n}\n","/* eslint no-console:0 */\nimport '../core/atom';\nimport { MACROS, MacroDictionary } from '../core-definitions/definitions';\nimport { AutoRenderOptions } from '../public/mathlive';\nimport { ErrorListener, ParserErrorCode } from '../public/core';\nimport { loadFonts } from '../core/fonts';\nimport { inject as injectStylesheet } from '../common/stylesheet';\n// @ts-ignore-error\nimport coreStylesheet from '../../css/core.less';\n\nexport type AutoRenderOptionsPrivate = AutoRenderOptions & {\n  /** A function that will convert any LaTeX found to\n   * HTML markup. This is only useful to override the default MathLive renderer\n   */\n  renderToMarkup?: (\n    text: string,\n    options: {\n      mathstyle?: 'displaystyle' | 'textstyle';\n      letterShapeStyle?: 'tex' | 'french' | 'iso' | 'upright' | 'auto';\n      macros?: MacroDictionary;\n      onError?: ErrorListener<ParserErrorCode>;\n      format?: string;\n    }\n  ) => string;\n\n  /**\n   * A function that will convert any LaTeX found to\n   * MathML markup.\n   */\n  renderToMathML?: (\n    text: string,\n    options: {\n      mathstyle?: string;\n      format?: string;\n      macros?: MacroDictionary;\n    }\n  ) => string;\n\n  /** A function that will convert any LaTeX found to\n   * speakable text markup. */\n  renderToSpeakableText?: (\n    text: string,\n    options: {\n      mathstyle?: string;\n      format?: string;\n      macros?: MacroDictionary;\n    }\n  ) => string;\n  ignoreClassPattern?: RegExp;\n  processClassPattern?: RegExp;\n  processScriptTypePattern?: RegExp;\n\n  mathstyle?: string;\n  format?: string;\n};\n\nfunction findEndOfMath(delimiter, text, startIndex: number): number {\n  // Adapted from\n  // https://github.com/Khan/perseus/blob/master/src/perseus-markdown.jsx\n  let index = startIndex;\n  let braceLevel = 0;\n\n  const delimLength: number = delimiter.length;\n\n  while (index < text.length) {\n    const character = text[index];\n\n    if (\n      braceLevel <= 0 &&\n      text.slice(index, index + delimLength) === delimiter\n    ) {\n      return index;\n    }\n\n    if (character === '\\\\') {\n      index++;\n    } else if (character === '{') {\n      braceLevel++;\n    } else if (character === '}') {\n      braceLevel--;\n    }\n\n    index++;\n  }\n\n  return -1;\n}\n\nfunction splitAtDelimiters(\n  startData,\n  leftDelim: string,\n  rightDelim: string,\n  mathstyle\n): {\n  type: string;\n  data: string;\n  rawData?: string;\n  mathstyle?: string;\n}[] {\n  const finalData = [];\n\n  for (const startDatum of startData) {\n    if (startDatum.type === 'text') {\n      const text = startDatum.data;\n\n      let lookingForLeft = true;\n      let currIndex = 0;\n      let nextIndex: number;\n\n      nextIndex = text.indexOf(leftDelim);\n      if (nextIndex !== -1) {\n        currIndex = nextIndex;\n        if (currIndex > 0) {\n          finalData.push({\n            type: 'text',\n            data: text.slice(0, currIndex),\n          });\n        }\n\n        lookingForLeft = false;\n      }\n\n      let done = false;\n      while (!done) {\n        if (lookingForLeft) {\n          nextIndex = text.indexOf(leftDelim, currIndex);\n          if (nextIndex === -1) {\n            done = true;\n            break;\n          }\n\n          if (currIndex !== nextIndex) {\n            finalData.push({\n              type: 'text',\n              data: text.slice(currIndex, nextIndex),\n            });\n          }\n\n          currIndex = nextIndex;\n        } else {\n          nextIndex = findEndOfMath(\n            rightDelim,\n            text,\n            currIndex + leftDelim.length\n          );\n          if (nextIndex === -1) {\n            done = true;\n            break;\n          }\n\n          finalData.push({\n            type: 'math',\n            data: text.slice(currIndex + leftDelim.length, nextIndex),\n            rawData: text.slice(currIndex, nextIndex + rightDelim.length),\n            mathstyle,\n          });\n\n          currIndex = nextIndex + rightDelim.length;\n        }\n\n        lookingForLeft = !lookingForLeft;\n      }\n\n      if (currIndex < text.length) {\n        finalData.push({\n          type: 'text',\n          data: text.slice(currIndex),\n        });\n      }\n    } else {\n      finalData.push(startDatum);\n    }\n  }\n\n  return finalData;\n}\n\nfunction splitWithDelimiters(\n  text: string,\n  delimiters: {\n    display: [openDelim: string, closeDelim: string][];\n    inline: [openDelim: string, closeDelim: string][];\n  }\n): {\n  type: string;\n  data: string;\n  rawData?: string;\n  mathstyle?: string;\n}[] {\n  let data = [{ type: 'text', data: text }];\n  if (delimiters.inline) {\n    delimiters.inline.forEach(([openDelim, closeDelim]) => {\n      data = splitAtDelimiters(data, openDelim, closeDelim, 'textstyle');\n    });\n  }\n\n  if (delimiters.display) {\n    delimiters.display.forEach(([openDelim, closeDelim]) => {\n      data = splitAtDelimiters(data, openDelim, closeDelim, 'displaystyle');\n    });\n  }\n  return data;\n}\n\nfunction createMathMLNode(\n  latex: string,\n  options: AutoRenderOptionsPrivate\n): HTMLElement {\n  // Create a node for AT (Assistive Technology, e.g. screen reader) to speak, etc.\n  // This node has a style that makes it be invisible to display but is seen by AT\n  const span = document.createElement('span');\n  try {\n    const html =\n      \"<math xmlns='http://www.w3.org/1998/Math/MathML'>\" +\n      options.renderToMathML(latex, options) +\n      '</math>';\n    span.innerHTML = options.createHTML ? options.createHTML(html) : html;\n  } catch (error: unknown) {\n    console.error(\"Could not convert '\" + latex + \"' to MathML with \", error);\n    span.textContent = latex;\n  }\n\n  span.className = 'ML__sr-only';\n  return span;\n}\n\nfunction createMarkupNode(\n  text: string,\n  options: AutoRenderOptionsPrivate,\n  mathstyle: 'displaystyle' | 'textstyle',\n  createNodeOnFailure: boolean\n): HTMLSpanElement | Text {\n  // Create a node for displaying math.\n  //   This is slightly ugly because in the case of failure to create the markup,\n  //   sometimes a text node is desired and sometimes not.\n  //   'createTextNodeOnFailure' controls this and null is returned when no node is created.\n  // This node is made invisible to AT (screen readers)\n  let span: HTMLSpanElement | Text = document.createElement('span');\n  span.setAttribute('aria-hidden', 'true');\n  if (options.preserveOriginalContent) {\n    span.setAttribute('data-' + options.namespace + 'original-content', text);\n    if (mathstyle) {\n      span.setAttribute(\n        'data-' + options.namespace + 'original-mathstyle',\n        mathstyle\n      );\n    }\n  }\n\n  try {\n    void loadFonts(options.fontsDirectory);\n    injectStylesheet(null, coreStylesheet);\n    const html = options.renderToMarkup(text, {\n      mathstyle: mathstyle ?? 'displaystyle',\n      format: 'html',\n      macros: options.macros,\n    });\n    span.innerHTML = options.createHTML ? options.createHTML(html) : html;\n  } catch (error: unknown) {\n    console.error(\"Could not parse'\" + text + \"' with \", error);\n    if (createNodeOnFailure) {\n      span = document.createTextNode(text);\n    } else {\n      return null;\n    }\n  }\n\n  return span;\n}\n\nfunction createAccessibleMarkupPair(\n  text: string,\n  mathstyle: 'displaystyle' | 'textstyle' | string,\n  options: AutoRenderOptionsPrivate,\n  createNodeOnFailure: boolean\n): Node {\n  // Create a math node (a span with an accessible component and a visual component)\n  // If there is an error in parsing the latex, 'createNodeOnFailure' controls whether\n  //   'null' is returned or an accessible node with the text used.\n  const markupNode = createMarkupNode(\n    text,\n    options,\n    mathstyle as 'displaystyle' | 'textstyle',\n    createNodeOnFailure\n  );\n\n  if (\n    markupNode &&\n    /\\b(mathml|speakable-text)\\b/i.test(options.renderAccessibleContent)\n  ) {\n    const fragment = document.createElement('span');\n    if (\n      /\\bmathml\\b/i.test(options.renderAccessibleContent) &&\n      options.renderToMathML\n    ) {\n      fragment.append(createMathMLNode(text, options));\n    }\n\n    if (\n      /\\bspeakable-text\\b/i.test(options.renderAccessibleContent) &&\n      options.renderToSpeakableText\n    ) {\n      const span = document.createElement('span');\n      const html = options.renderToSpeakableText(text, options);\n      span.innerHTML = options.createHTML ? options.createHTML(html) : html;\n      span.className = 'ML__sr-only';\n      fragment.append(span);\n    }\n\n    fragment.append(markupNode);\n    return fragment;\n  }\n\n  return markupNode;\n}\n\nfunction scanText(text: string, options: AutoRenderOptionsPrivate): Node {\n  // If the text starts with '\\begin'...\n  // (this is a MathJAX behavior)\n  let fragment: Node = null;\n  if (options.TeX.processEnvironments && /^\\s*\\\\begin/.test(text)) {\n    fragment = document.createDocumentFragment();\n    fragment.appendChild(\n      createAccessibleMarkupPair(text, undefined, options, true)\n    );\n  } else {\n    if (!text.trim()) return null;\n    const data = splitWithDelimiters(text, options.TeX.delimiters);\n    if (data.length === 1 && data[0].type === 'text') {\n      // This text contains no math. No need to continue processing\n      return null;\n    }\n\n    fragment = document.createDocumentFragment();\n\n    for (const datum of data) {\n      if (datum.type === 'text') {\n        fragment.appendChild(document.createTextNode(datum.data));\n      } else {\n        fragment.appendChild(\n          createAccessibleMarkupPair(datum.data, datum.mathstyle, options, true)\n        );\n      }\n    }\n  }\n\n  return fragment;\n}\n\nfunction scanElement(element, options: AutoRenderOptionsPrivate): void {\n  const originalContent = element.getAttribute(\n    'data-' + options.namespace + 'original-content'\n  );\n  if (originalContent) {\n    const mathstyle = element.getAttribute(\n      'data-' + options.namespace + 'mathstyle'\n    );\n    const span = createAccessibleMarkupPair(\n      originalContent,\n      mathstyle,\n      options,\n      false\n    );\n    if (span !== null) {\n      element.textContent = '';\n      element.append(span);\n    }\n\n    return;\n  }\n\n  if (element.childNodes.length === 1 && element.childNodes[0].nodeType === 3) {\n    // This is a node with textual content only. Perhaps an opportunity\n    // to simplify and avoid creating extra nested elements...\n    const text = element.childNodes[0].textContent;\n    if (options.TeX.processEnvironments && /^\\s*\\\\begin/.test(text)) {\n      element.textContent = '';\n      element.append(\n        createAccessibleMarkupPair(text, undefined, options, true)\n      );\n      return;\n    }\n\n    const data = splitWithDelimiters(text, options.TeX.delimiters);\n    if (data.length === 1 && data[0].type === 'math') {\n      // The entire content is a math expression: we can replace the content\n      // with the latex markup without creating additional wrappers.\n      element.textContent = '';\n      element.append(\n        createAccessibleMarkupPair(\n          data[0].data,\n          data[0].mathstyle,\n          options,\n          true\n        )\n      );\n      return;\n    }\n\n    if (data.length === 1 && data[0].type === 'text') {\n      // This element only contained text with no math. No need to\n      // do anything.\n      return;\n    }\n  }\n\n  // Iterate backward, as we will be replacing childNode with a documentfragment\n  // which may insert multiple nodes (one for the accessible markup, one for\n  // the formula)\n  for (let i = element.childNodes.length - 1; i > 0; i--) {\n    const childNode = element.childNodes[i];\n    if (childNode.nodeType === 3) {\n      // A text node\n      // Look for math mode delimiters inside the text\n      const frag = scanText(childNode.textContent, options);\n      if (frag) {\n        i += frag.childNodes.length - 1;\n        childNode.replaceWith(frag);\n      }\n    } else if (childNode.nodeType === 1) {\n      // An element node\n      const tag = childNode.nodeName.toLowerCase();\n      if (\n        tag === 'script' &&\n        options.processScriptTypePattern.test(childNode.type)\n      ) {\n        let style = 'displaystyle';\n        for (const l of childNode.type.split(';')) {\n          const v = l.split('=');\n          if (v[0].toLowerCase() === 'mode') {\n            style =\n              v[1].toLoweCase() === 'display' ? 'displaystyle' : 'textstyle';\n          }\n        }\n\n        const span = createAccessibleMarkupPair(\n          childNode.textContent,\n          style,\n          options,\n          true\n        );\n        childNode.parentNode.replaceChild(span, childNode);\n      } else if (tag !== 'script') {\n        // Element node\n        // console.assert(childNode.className !== 'formula');\n        const shouldRender =\n          options.processClassPattern.test(childNode.className) ||\n          !(\n            options.skipTags.includes(tag) ||\n            options.ignoreClassPattern.test(childNode.className)\n          );\n\n        if (shouldRender) {\n          if (\n            element.childNodes.length === 1 &&\n            element.childNodes[0].nodeType === 3\n          ) {\n            const formula = element.textContent;\n            element.textContent = '';\n            element.append(\n              createAccessibleMarkupPair(formula, 'displaystyle', options, true)\n            );\n          } else {\n            scanElement(childNode, options);\n          }\n        }\n      }\n    }\n    // Otherwise, it's something else, and ignore it.\n  }\n}\n\nconst defaultOptions: AutoRenderOptions = {\n  // Optional namespace for the `data-` attributes.\n  namespace: '',\n\n  // Name of tags whose content will not be scanned for math delimiters\n  skipTags: [\n    'noscript',\n    'style',\n    'textarea',\n    'pre',\n    'code',\n    'annotation',\n    'annotation-xml',\n  ],\n\n  // <script> tags of the following types will be processed. Others, ignored.\n  processScriptType: 'math/tex',\n\n  // Regex pattern of the class name of elements whose contents should not\n  // be processed\n  ignoreClass: 'tex2jax_ignore',\n\n  // Regex pattern of the class name of elements whose contents should\n  // be processed when they appear inside ones that are ignored.\n  processClass: 'tex2jax_process',\n\n  // Indicate whether to preserve or discard the original content of the\n  // elements being rendered in a 'data-original-content' attribute.\n  preserveOriginalContent: true,\n\n  // Indicate the format to use to render accessible content\n  renderAccessibleContent: 'mathml',\n\n  TeX: {\n    processEnvironments: true,\n    delimiters: {\n      inline: [['\\\\(', '\\\\)']],\n      display: [\n        ['$$', '$$'],\n        ['\\\\[', '\\\\]'],\n      ],\n    },\n  },\n};\n\nfunction renderMathInElement(\n  element: HTMLElement | string,\n  options: AutoRenderOptionsPrivate\n): void {\n  try {\n    options = { ...defaultOptions, ...options };\n    options.ignoreClassPattern = new RegExp(options.ignoreClass);\n    options.processClassPattern = new RegExp(options.processClass);\n    options.processScriptTypePattern = new RegExp(options.processScriptType);\n    options.macros = MACROS;\n\n    // Validate the namespace (used for `data-` attributes)\n    if (options.namespace) {\n      if (!/^[a-z]+-?$/.test(options.namespace)) {\n        throw new Error(\n          'options.namespace must be a string of lowercase characters only'\n        );\n      }\n\n      if (!options.namespace.endsWith('-')) {\n        options.namespace += '-';\n      }\n    }\n\n    scanElement(element, options);\n  } catch (error: unknown) {\n    if (error instanceof Error) {\n      console.error('renderMathInElement(): ' + error.message);\n    } else {\n      console.error(\n        'renderMathInElement(): Could not render math for element',\n        element\n      );\n    }\n  }\n}\n\nexport default {\n  renderMathInElement,\n};\n","/**\n * This module contains utilities to debug mathlive internal data structures.\n *\n * It is also used by the automated test suite.\n */\n\nimport { ParseMode } from '../public/core';\nimport { parseLatex } from '../core/parser';\nimport type { Span } from '../core/span';\nimport {\n  MACROS,\n  FUNCTIONS,\n  MATH_SYMBOLS,\n  TEXT_SYMBOLS,\n  ENVIRONMENTS,\n} from '../core-definitions/definitions';\nimport { INLINE_SHORTCUTS } from '../editor/shortcuts';\nimport { DEFAULT_KEYBINDINGS } from '../editor/keybindings-definitions';\nimport { getKeybindingMarkup } from '../editor/keybindings';\n\nimport { atomToAsciiMath } from '../editor/atom-to-ascii-math';\nimport { parseMathString } from '../editor/parse-math-string';\nimport { Atom } from '../core/atom';\n\nexport function latexToAsciiMath(\n  latex: string,\n  mode: ParseMode = 'math'\n): string {\n  const root = new Atom('root', { mode: 'math' });\n  root.body = parseLatex(latex, mode, null, null);\n  return atomToAsciiMath(root);\n}\n\nexport function asciiMathToLatex(ascii: string): string {\n  const [, result] = parseMathString(ascii, { format: 'ascii-math' });\n  return result;\n}\n\n/**\n *\n * @param symbol specify which span to consider.\n * If a string, a span whose body match the string\n * If a number, the nth span in the list\n * If an array, each element in the array indicate the nth child to traverse\n */\nfunction getSymbol(spans: Span[], symbol: string | number | number[]): Span {\n  if (!spans) return null;\n  let childSymbol = null;\n\n  if (Array.isArray(symbol)) {\n    childSymbol = symbol.slice(); // Clone the array\n    symbol = childSymbol.shift(); // Get the first element and remove it from the array\n  }\n\n  let result = null;\n  if (typeof symbol === 'number' && symbol < spans.length) {\n    if (childSymbol && childSymbol.length > 0) {\n      return getSymbol(spans[symbol].children, childSymbol);\n    }\n\n    return spans[symbol];\n  }\n\n  if (typeof symbol === 'string') {\n    for (const span of spans) {\n      // Does this span match the symbol we're looking for?\n      if (span.value === symbol) {\n        if (childSymbol && childSymbol.length > 0) {\n          return getSymbol(span.children, childSymbol);\n        }\n\n        return span;\n      }\n\n      // If not, try its children\n      result = getSymbol(span.children, symbol);\n      if (result) return result;\n    }\n\n    return result;\n  }\n\n  return null;\n}\n\nfunction getProp(\n  spans: Span[],\n  symbol: string | number | number[],\n  prop: string\n): Span {\n  const s = getSymbol(spans, symbol);\n  if (s) return s[prop];\n  return null;\n}\n\n/**\n * Return the type ('mbin', etc...) of a span\n */\nfunction getType(spans: Span[], symbol: string): string {\n  const s = getSymbol(spans, symbol);\n  if (s) return s.type;\n  return null;\n}\n\n// function getStyle(spans: Span[], symbol: string, prop: string): string {\n//   const s = getSymbol(spans, symbol);\n//   if (s?.style) return s.style[prop];\n//   return null;\n// }\n\n// function getClasses(spans: Span[], symbol: string): string {\n//   const s = getSymbol(spans, symbol);\n//   if (s) return s.classes ?? '';\n//   return null;\n// }\n\n// function hasClass(spans: Span[], symbol: string, cls: string): boolean {\n//   const classes = getClasses(spans, symbol);\n//   if (!classes) return false;\n//   const clsList = classes.split(' ');\n//   for (const element of clsList) {\n//     if (element === cls) return true;\n//   }\n\n//   return false;\n// }\n\n/// /////////////////////////////////////////////////////////////////////////////\n/// /////////////////////////////////////////////////////////////////////////////\n/// /////////////////////////////////////////////////////////////////////////////\n\n// function spanToString(span: Span, indent = ''): string {\n//   let result = '';\n//   if (Array.isArray(span)) {\n//     if (span.length === 0) {\n//       result += '[]\\n';\n//     } else {\n//       result += '[\\n';\n//       for (let i = 0; i < span.length; i++) {\n//         result += spanToString(span[i], `\\t ${indent}${i} ,`);\n//         result += i < span.length - 1 ? ',\\n' : '\\n';\n//       }\n\n//       result += indent + ']\\n';\n//     }\n//   } else {\n//     result = indent + '{\\n';\n//     if (span.type) {\n//       result += indent + 'type:\"' + span.type + '\",\\n';\n//     }\n\n//     if (span.value && span.value.length > 0) {\n//       result += indent + 'body:\"' + span.value + '\",\\n';\n//     }\n\n//     if (span.classes && span.classes.length > 0) {\n//       result += indent + 'classes:\"' + span.classes + '\",\\n';\n//     }\n\n//     if (span.style) {\n//       for (const s in span.style) {\n//         if (Object.prototype.hasOwnProperty.call(span.style, s)) {\n//           result += indent + s + ':\"';\n//           result += span.style[s] + '\",\\n';\n//         }\n//       }\n//     }\n\n//     if (span.children && span.children.length > 0) {\n//       result +=\n//         indent +\n//         'children:' +\n//         span.children.map((x) => spanToString(x, indent)).join('; ');\n//     }\n\n//     result += indent + '}';\n//   }\n\n//   return result;\n// }\n\n/// /////////////////////////////////////////////////////////////////////////////\n/// /////////////////////////////////////////////////////////////////////////////\n/// /////////////////////////////////////////////////////////////////////////////\n\n// function spanToMarkup(span: Span, indent = ''): string {\n//   // If (indent.length === 0) {\n//   //     result += '<table>';\n//   // }\n//   let result = '';\n//   if (Array.isArray(span)) {\n//     for (const element of span) {\n//       result += spanToMarkup(element, indent);\n//     }\n//   } else if (span) {\n//     result = '<br>' + indent;\n//     if (span.classes.includes('sz-set')) {\n//       result += 'FONTSIZE-ENSURER';\n//     } else {\n//       if (span.type) {\n//         result += '<span class=\"type\">' + span.type + '</span>';\n//       }\n\n//       if (span.value && span.value.length > 0) {\n//         result += '<span class=\"value\">' + span.value + '</span>';\n//       }\n\n//       if (span.classes && span.classes.length > 0) {\n//         result += '&nbsp;<span class=\"classes\">' + span.classes + '</span>';\n//       }\n\n//       if (span.isTight) {\n//         result += '&nbsp;<span class=\"stylevalue\"> tight </span>';\n//       }\n\n//       if (span.caret) {\n//         result += '&nbsp;<span class=\"stylevalue\"> caret </span>';\n//       }\n\n//       if (span.style) {\n//         for (const s in span.style) {\n//           if (Object.prototype.hasOwnProperty.call(span.style, s)) {\n//             result += '&nbsp;<span class=\"styleprop\">' + s + ':</span>';\n//             result +=\n//               '<span class=\"stylevalue\"> ' + span.style[s] + '</span>;&nbsp;';\n//           }\n//         }\n//       }\n\n//       if (span.children) {\n//         result += span.children\n//           .map((x) => spanToMarkup(x, indent + '▷'))\n//           .join('; ');\n//       }\n//     }\n//   }\n\n//   return result;\n// }\n\nconst MathliveDebug = {\n  // spanToMarkup,\n\n  // spanToString,\n\n  // hasClass,\n  // getClasses,\n  getProp,\n  // getStyle,\n  getType,\n\n  latexToAsciiMath,\n  asciiMathToLatex,\n  FUNCTIONS,\n  MATH_SYMBOLS,\n  TEXT_SYMBOLS,\n  ENVIRONMENTS,\n  MACROS,\n\n  INLINE_SHORTCUTS,\n  DEFAULT_KEYBINDINGS,\n\n  getKeybindingMarkup,\n};\n\n// Export the public interface for this module\nexport default MathliveDebug;\n","import { render } from '../editor-mathfield/render';\nimport { MathfieldOptions } from '../public/options';\n\ndeclare global {\n  interface Window {\n    AWS: any;\n    mathlive: any;\n  }\n}\n\nfunction removeHighlight(element: Element): void {\n  element.classList.remove('ML__highlight');\n  if (element.children) {\n    for (const child of element.children) {\n      removeHighlight(child);\n    }\n  }\n}\n\n/**\n * Highlights the span corresponding to the specified atomID.\n *\n * This is used for text-to-speech with synchronized highlighting (read aloud)\n *\n * @category Read Aloud\n * @param {string} atomID\n *\n */\nfunction highlightAtomID(element: HTMLElement, atomID?: string): void {\n  if (!atomID || element.dataset?.atomId === atomID) {\n    element.classList.add('ML__highlight');\n    if (element.children && element.children.length > 0) {\n      [...element.children].forEach((x) => {\n        if (x instanceof HTMLElement) {\n          highlightAtomID(x);\n        }\n      });\n    }\n  } else {\n    element.classList.remove('ML__highlight');\n    if (element.children && element.children.length > 0) {\n      [...element.children].forEach((x) => {\n        if (x instanceof HTMLElement) {\n          highlightAtomID(x, atomID);\n        }\n      });\n    }\n  }\n}\n\n/**\n * \"Read Aloud\" is an asynchronous operation that reads the\n * reading with synchronized highlighting\n *\n * @param element - The DOM element to highlight\n * @param text - The text to speak\n */\nexport function defaultReadAloudHook(\n  element: HTMLElement,\n  text: string,\n  config: Partial<MathfieldOptions>\n): void {\n  if (!window) {\n    return;\n  }\n\n  if (!config && window.mathlive) {\n    config = window.mathlive.config;\n  }\n\n  if (config.speechEngine !== 'amazon') {\n    console.warn('Use Amazon TTS Engine for synchronized highlighting');\n    if (config.speakHook) config.speakHook(text, config);\n    return;\n  }\n\n  if (!window.AWS) {\n    console.warn(\n      'AWS SDK not loaded. See https://www.npmjs.com/package/aws-sdk'\n    );\n    return;\n  }\n\n  const polly = new window.AWS.Polly({ apiVersion: '2016-06-10' });\n\n  const parameters = {\n    OutputFormat: 'json',\n    VoiceId: config.speechEngineVoice || 'Joanna',\n    Engine: 'standard', // The neural engine does not appear to support ssml marks\n    Text: text,\n    TextType: 'ssml',\n    SpeechMarkTypes: ['ssml'],\n  };\n\n  window.mathlive = window.mathlive ?? {};\n  window.mathlive.readAloudElement = element;\n\n  const statusHook =\n    config.onReadAloudStatus || window.mathlive.onReadAloudStatus;\n\n  // Request the mark points\n  polly.synthesizeSpeech(parameters, (err, data) => {\n    if (err) {\n      console.warn('polly.synthesizeSpeech() error:', err, err.stack);\n      return;\n    }\n\n    if (!data || !data.AudioStream) {\n      console.log('polly.synthesizeSpeech():', data);\n      return;\n    }\n\n    const response = new TextDecoder('utf-8').decode(\n      new Uint8Array(data.AudioStream)\n    );\n    window.mathlive.readAloudMarks = response\n      .split('\\n')\n      .map((x) => (x ? JSON.parse(x) : {}));\n    window.mathlive.readAloudTokens = [];\n    for (const mark of window.mathlive.readAloudMarks) {\n      if (mark.value) {\n        window.mathlive.readAloudTokens.push(mark.value);\n      }\n    }\n\n    window.mathlive.readAloudCurrentMark = '';\n\n    // Request the audio\n    parameters.OutputFormat = 'mp3';\n    parameters.SpeechMarkTypes = [];\n    polly.synthesizeSpeech(parameters, (err, data) => {\n      if (err) {\n        console.warn(\n          'polly.synthesizeSpeech(',\n          text,\n          ') error:',\n          err,\n          err.stack\n        );\n        return;\n      }\n\n      if (!data || !data.AudioStream) {\n        return;\n      }\n\n      const uInt8Array = new Uint8Array(data.AudioStream);\n      const blob = new Blob([uInt8Array.buffer], {\n        type: 'audio/mpeg',\n      });\n      const url = URL.createObjectURL(blob);\n\n      if (!window.mathlive.readAloudAudio) {\n        window.mathlive.readAloudAudio = new Audio();\n        window.mathlive.readAloudAudio.addEventListener('ended', () => {\n          const mathfield = window.mathlive.readAloudMathField;\n          if (statusHook) {\n            statusHook(mathfield, 'ended');\n          }\n\n          if (mathfield) {\n            render(mathfield);\n            window.mathlive.readAloudElement = null;\n            window.mathlive.readAloudMathField = null;\n            window.mathlive.readAloudTokens = [];\n            window.mathlive.readAloudMarks = [];\n            window.mathlive.readAloudCurrentMark = '';\n          } else {\n            removeHighlight(window.mathlive.readAloudElement);\n          }\n        });\n        window.mathlive.readAloudAudio.addEventListener('timeupdate', () => {\n          let value = '';\n          // The target, the atom we're looking for, is the one matching the current audio\n          // plus 100 ms. By anticipating it a little bit, it feels more natural, otherwise it\n          // feels like the highlighting is trailing the audio.\n          const target =\n            window.mathlive.readAloudAudio.currentTime * 1000 + 100;\n\n          // Find the smallest element which is bigger than the target time\n          for (const mark of window.mathlive.readAloudMarks) {\n            if (mark.time < target) {\n              value = mark.value;\n            }\n          }\n\n          if (window.mathlive.readAloudCurrentMark !== value) {\n            window.mathlive.readAloudCurrentToken = value;\n            if (value && value === window.mathlive.readAloudFinalToken) {\n              window.mathlive.readAloudAudio.pause();\n            } else {\n              window.mathlive.readAloudCurrentMark = value;\n              highlightAtomID(\n                window.mathlive.readAloudElement,\n                window.mathlive.readAloudCurrentMark\n              );\n            }\n          }\n        });\n      } else {\n        window.mathlive.readAloudAudio.pause();\n      }\n\n      window.mathlive.readAloudAudio.src = url;\n      if (statusHook) {\n        statusHook(window.mathlive.readAloudMathField, 'playing');\n      }\n\n      window.mathlive.readAloudAudio.play();\n    });\n  });\n}\n\n/**\n * Returns the status of a Read Aloud operation (reading with synchronized\n * highlighting).\n *\n * Possible values are:\n * - `\"ready\"`\n * - `\"playing\"`\n * - `\"paused\"`\n * - `\"unavailable\"`\n *\n * **See** {@linkcode speak}\n * @category Read Aloud\n */\nexport function readAloudStatus():\n  | 'ready'\n  | 'playing'\n  | 'paused'\n  | 'unavailable' {\n  if (!window) return 'unavailable';\n  window.mathlive = window.mathlive ?? {};\n\n  if (!window.mathlive.readAloudAudio) return 'ready';\n  if (window.mathlive.readAloudAudio.paused) return 'paused';\n  if (!window.mathlive.readAloudAudio.ended) return 'playing';\n\n  return 'ready';\n}\n\n/**\n * Pauses a read aloud operation if one is in progress.\n *\n * **See** {@linkcode speak}\n */\nexport function pauseReadAloud(): void {\n  if (!window) return;\n  window.mathlive = window.mathlive ?? {};\n  if (window.mathlive.readAloudAudio) {\n    if (window.mathlive.onReadAloudStatus) {\n      window.mathlive.onReadAloudStatus(\n        window.mathlive.readAloudMathField,\n        'paused'\n      );\n    }\n\n    window.mathlive.readAloudAudio.pause();\n  }\n}\n\n/**\n * Resumes a read aloud operation if one was paused.\n *\n * **See** {@linkcode speak}\n */\nexport function resumeReadAloud(): void {\n  if (!window) return;\n  window.mathlive = window.mathlive ?? {};\n  if (window.mathlive.readAloudAudio) {\n    if (window.mathlive.onReadAloudStatus) {\n      window.mathlive.onReadAloudStatus(\n        window.mathlive.readAloudMathField,\n        'playing'\n      );\n    }\n\n    window.mathlive.readAloudAudio.play();\n  }\n}\n\n/**\n * If a Read Aloud operation is in progress, read from a specified token\n *\n * **See** {@linkcode speak}\n *\n * @param count The number of tokens to read.\n */\nexport function playReadAloud(token: string, count: number): void {\n  if (!window) return;\n  window.mathlive = window.mathlive ?? {};\n  if (window.mathlive.readAloudAudio) {\n    let timeIndex = 0;\n    window.mathlive.readAloudFinalToken = null;\n    if (token) {\n      window.mathlive.readAloudMarks = window.mathlive.readAloudMarks || [];\n      for (const mark of window.mathlive.readAloudMarks) {\n        if (mark.value === token) {\n          timeIndex = mark.time / 1000;\n        }\n      }\n\n      let tokenIndex = window.mathlive.readAloudTokens.indexOf(token);\n      if (tokenIndex >= 0) {\n        tokenIndex += count;\n        if (tokenIndex < window.mathlive.readAloudTokens.length) {\n          window.mathlive.readAloudFinalToken = tokenIndex;\n        }\n      }\n    }\n\n    window.mathlive.readAloudAudio.currentTime = timeIndex;\n    if (window.mathlive.onReadAloudStatus) {\n      window.mathlive.onReadAloudStatus(\n        window.mathlive.readAloudMathField,\n        'playing'\n      );\n    }\n\n    window.mathlive.readAloudAudio.play();\n  }\n}\n","/// ^.*('\\\\.*').*\nimport { FUNCTIONS, MATH_SYMBOLS } from '../core-definitions/definitions';\n\n// Frequency of a symbol.\n// String constants corresponding to frequency values,\n// which are the number of results returned by latexsearch.com\n// When the precise number is known, it is provided. Otherwise,\n// the following constants are used to denote an estimate.\nexport const CRYPTIC = 0;\nexport const ARCANE = 200;\nexport const VERY_RARE = 'VERY_RARE';\nexport const RARE = 1200;\nexport const UNCOMMON = 2000;\nexport const COMMON = 3000;\nexport const SUPERCOMMON = 4000;\n\n/*\n * Set the metadata for the specified symbols\n *\n * metadata('Functions', ['\\\\sin', '\\\\cos'], COMMON, '$0{a}')\n *\n */\nfunction metadata(\n  category,\n  symbols,\n  frequency = COMMON,\n  template = '$0'\n): void {\n  for (const symbol of symbols) {\n    if (MATH_SYMBOLS[symbol]) {\n      MATH_SYMBOLS[symbol].frequency = frequency;\n      MATH_SYMBOLS[symbol].category = category;\n      MATH_SYMBOLS[symbol].template = template.replace(/\\$0/g, symbol);\n    }\n\n    if (FUNCTIONS[symbol]) {\n      // Make a copy of the entry, since it could be shared by multiple\n      // symbols\n      FUNCTIONS[symbol] = {\n        ...FUNCTIONS[symbol],\n        frequency,\n        category,\n        template: template.replace(/\\$0/g, symbol),\n      };\n    }\n  }\n}\n\nmetadata('Trigonometry', ['\\\\cos', '\\\\sin', '\\\\tan'], SUPERCOMMON);\n\nmetadata(\n  'Trigonometry',\n  [\n    '\\\\arcsin',\n    '\\\\arccos',\n    '\\\\arctan',\n    '\\\\arctg',\n    '\\\\arcctg',\n    '\\\\arcsec',\n    '\\\\arccsc',\n    '\\\\arsinh',\n    '\\\\arcosh',\n    '\\\\artanh',\n    '\\\\arcsech',\n    '\\\\arccsch',\n    '\\\\arg',\n    '\\\\ch',\n    '\\\\cosec',\n    '\\\\cosh',\n    '\\\\cot',\n    '\\\\cotg',\n    '\\\\coth',\n    '\\\\csc',\n    '\\\\ctg',\n    '\\\\cth',\n    '\\\\lg',\n    '\\\\lb',\n    '\\\\sec',\n    '\\\\sinh',\n    '\\\\sh',\n    '\\\\tanh',\n    '\\\\tg',\n    '\\\\th',\n  ],\n  UNCOMMON\n);\n\nmetadata('Functions', ['\\\\ln', '\\\\log', '\\\\exp', '\\\\lim'], SUPERCOMMON);\n\nmetadata(\n  'Functions',\n  ['\\\\dim', '\\\\ker', '\\\\deg', '\\\\det', '\\\\mod', '\\\\min', '\\\\max'],\n  COMMON\n);\nmetadata('Functions', ['\\\\hom'], RARE);\n\nmetadata('Decoration', ['\\\\rule'], ARCANE, '$0{2em}{1em}');\n\nmetadata(\n  'Decoration',\n  ['\\\\color', '\\\\textcolor'],\n  ARCANE,\n  '{$0{m0}A}{$0{m1}B}{$0{m2}C }{$0{m3}a}{$0{m4}b}{$0{m5}c}{$0{m6}8}'\n);\nmetadata(\n  'Decoration',\n  ['\\\\overline', '\\\\underline'],\n  COMMON,\n  '$0{\\\\placeholder{}}'\n);\nmetadata(\n  'Decoration',\n  ['\\\\enclose'],\n  RARE,\n  '\\\\enclose{updiagonalstrike,roundedbox}[1px solid red, mathbackground=\"#fbc0bd\"]{x=0}'\n);\nmetadata(\n  'Decoration',\n  ['\\\\fcolorbox'],\n  RARE,\n  '\\\\fcolorbox{#cd0030}{#ffd400}{\\\\unicode{\"2B1A}}'\n);\n\nmetadata(\n  'Decoration',\n  ['\\\\colorbox'],\n  RARE,\n  '\\\\colorbox{#fbc0bd}{\\\\unicode{\"2B1A}}'\n);\n\nmetadata(\n  'Decoration',\n  ['\\\\boxed', '\\\\cancel', '\\\\bcancel', '\\\\xcancel'],\n  RARE,\n  '$0{\\\\placeholder{}}'\n);\n\nmetadata(\n  'Decoration',\n  ['\\\\bbox'],\n  RARE,\n  '\\\\bbox[#ffd400, solid 2px #ffd400]{\\\\unicode{\"2B1A}}'\n);\n\nmetadata('Styling', ['\\\\mathbb'], SUPERCOMMON, '$0{Don Knuth}');\nmetadata(\n  'Styling',\n  [\n    '\\\\textbf',\n    '\\\\textup',\n    '\\\\textit',\n    '\\\\textrm',\n    '\\\\textsf',\n    '\\\\texttt',\n    '\\\\textnormal',\n    '\\\\textmd',\n    '\\\\textsl',\n    '\\\\textsc',\n\n    '\\\\mathsf',\n    '\\\\mathtt',\n    '\\\\mathrm',\n    '\\\\mathfrak',\n    '\\\\mathcal',\n    '\\\\mathscr',\n    '\\\\mathbf',\n    '\\\\mathmd',\n    '\\\\mathit',\n    '\\\\text',\n    '\\\\mbox',\n    '\\\\Bbb',\n    '\\\\bold',\n    '\\\\bm',\n    '\\\\boldsymbol',\n  ],\n  COMMON,\n  '$0{Don Knuth}'\n);\nmetadata(\n  'Styling',\n  [\n    '\\\\frak',\n    '\\\\tt',\n    '\\\\bf',\n    '\\\\it',\n    '\\\\rmfamily', // Note: In LaTeX, /rmfamily is a no-op in math mode\n    '\\\\sffamily',\n    '\\\\ttfamily',\n    '\\\\class',\n    '\\\\cssId',\n    '\\\\htmlData',\n  ],\n  RARE,\n  '{$0 Don Knuth}'\n);\nmetadata(\n  'Styling',\n  ['\\\\bfseries', '\\\\mdseries', '\\\\upshape', '\\\\slshape', '\\\\scshape'],\n  RARE,\n  '\\\\text{$0 Don Knuth}'\n);\n\nmetadata(\n  'Styling',\n  ['\\\\class', '\\\\cssId'],\n  RARE,\n  '$0{testIdentifier}{Don Knuth}'\n);\n\n// Note: In LaTeX, \\fontseries, \\fontfamily, \\fontshape are applicable to\n// text mode only\nmetadata('Styling', ['\\\\fontseries'], RARE, '\\\\text{$0{b}Don Knuth}');\nmetadata('Styling', ['\\\\fontfamily'], RARE, '\\\\text{$0{cmtt}Don Knuth}');\nmetadata('Styling', ['\\\\fontshape'], RARE, '\\\\text{$0{sc}Don Knuth}');\nmetadata('Styling', ['\\\\selectfont'], RARE, '\\\\text{$0}'); // No-op, but only valid in text mode\n\nmetadata('Styling', ['\\\\emph'], RARE, 'Don$0{Knuth}');\nmetadata('Styling', ['\\\\em'], RARE, 'Don{$0 Knuth}');\n\nmetadata(\n  'Layout',\n  [\n    '\\\\mathop',\n    '\\\\mathbin',\n    '\\\\mathrel',\n    '\\\\mathopen',\n    '\\\\mathclose',\n    '\\\\mathpunct',\n    '\\\\mathord',\n    '\\\\mathinner',\n    '\\\\operatorname',\n    '\\\\operatorname*',\n  ],\n  RARE,\n  'x=$0{arg}=0'\n);\nmetadata('Layout', ['\\\\middle'], RARE, '\\\\left\\\\{x$0|x>0\\\\right\\\\}');\nmetadata(\n  'Layout',\n  ['\\\\overset', '\\\\underset', '\\\\stackrel', '\\\\stackbin'],\n  RARE,\n  '$0{arg}{x=0}'\n);\n\nmetadata('Layout', ['\\\\rlap', '\\\\mathrlap'], RARE, '$0{/}0');\nmetadata('Layout', ['\\\\llap', '\\\\mathllap'], RARE, 'o$0{/}');\n\nmetadata(\n  'Fractions',\n  ['\\\\frac'],\n  SUPERCOMMON,\n  '$0{\\\\placeholder{}}{\\\\placeholder{}}'\n);\nmetadata(\n  'Fractions',\n  [\n    '\\\\binom',\n    '\\\\dfrac',\n    '\\\\tfrac',\n    '\\\\dbinom',\n    '\\\\tbinom',\n    '\\\\pdiff',\n    '\\\\cfrac',\n  ],\n  RARE,\n  '$0{\\\\placeholder{}}{\\\\placeholder{}}'\n);\nmetadata(\n  'Fractions',\n  ['\\\\over', '\\\\atop', '\\\\choose'],\n  RARE,\n  '\\\\unicode{\"2B1A} $0 \\\\unicode{\"2B1A}'\n);\nmetadata(\n  'Fractions',\n  ['\\\\overwithdelims', '\\\\atopwithdelims'],\n  RARE,\n  '{\\\\unicode{\"2B1A} $0{\\\\lbrace}{\\\\rbrace} \\\\unicode{\"2B1A}}'\n);\n\nmetadata(\n  'Extensible Operators',\n  ['\\\\sum', '\\\\prod', '\\\\bigcap', '\\\\bigcup', '\\\\int'],\n  SUPERCOMMON\n);\nmetadata(\n  'Extensible Operators',\n  ['\\\\bigoplus', '\\\\smallint', '\\\\iint', '\\\\oint'],\n  COMMON\n);\nmetadata(\n  'Extensible Operators',\n  [\n    '\\\\bigwedge',\n    '\\\\bigvee',\n    '\\\\coprod',\n\n    '\\\\bigsqcup',\n    '\\\\bigotimes',\n    '\\\\bigodot',\n    '\\\\biguplus',\n\n    '\\\\intop',\n    '\\\\sqcup',\n    '\\\\sqcap',\n    '\\\\uplus',\n    '\\\\wr',\n    '\\\\Cap',\n    '\\\\Cup',\n    '\\\\doublecap',\n    '\\\\doublecup',\n    '\\\\amalg',\n\n    '\\\\iiint',\n    '\\\\oiint',\n    '\\\\oiiint',\n    '\\\\intclockwise',\n    '\\\\varointclockwise',\n    '\\\\ointctrclockwise',\n    '\\\\intctrclockwise',\n  ],\n  RARE\n);\n\nmetadata('Accents', ['\\\\vec'], SUPERCOMMON);\nmetadata(\n  'Accents',\n  ['\\\\bar', '\\\\ddot', '\\\\acute', '\\\\tilde', '\\\\check'],\n  COMMON,\n  '$0{\\\\placeholder{}}'\n);\nmetadata('Accents', ['\\\\^', '\\\\`', \"\\\\'\"], RARE, '$0{e}');\nmetadata('Accents', ['\\\\c'], RARE, '$0{c}');\nmetadata('Accents', ['\\\\~'], RARE, '$0{n}');\nmetadata(\n  'Accents',\n  ['\\\\mathring', '\\\\hat', '\\\\dot', '\\\\breve', '\\\\grave'],\n  RARE,\n  '$0{\\\\placeholder{}}'\n);\n\nmetadata(\n  'Extensible Symbols',\n  [\n    '\\\\overrightarrow',\n    '\\\\overleftarrow',\n    '\\\\Overrightarrow',\n    '\\\\overleftharpoon',\n    '\\\\overrightharpoon',\n    '\\\\overleftrightarrow',\n    '\\\\overbrace',\n    '\\\\overlinesegment',\n    '\\\\overgroup',\n    '\\\\widehat',\n    '\\\\widecheck',\n    '\\\\widetilde',\n  ],\n  COMMON,\n  '$0{ABC}'\n);\n\nmetadata(\n  'Extensible Symbols',\n  [\n    '\\\\underrightarrow',\n    '\\\\underleftarrow',\n    '\\\\underleftrightarrow',\n    '\\\\underbrace',\n    '\\\\underlinesegment',\n    '\\\\undergroup',\n    '\\\\utilde',\n  ],\n  COMMON,\n  '$0{ABC}'\n);\n\nmetadata(\n  'Sizing',\n  [\n    '\\\\tiny',\n    '\\\\scriptsize',\n    '\\\\footnotesize',\n    '\\\\small',\n    '\\\\normalsize',\n    '\\\\large',\n    '\\\\Large',\n    '\\\\LARGE',\n    '\\\\huge',\n    '\\\\Huge',\n  ],\n  RARE,\n  '$0{x=0}'\n);\n\nmetadata('Sizing', ['\\\\big', '\\\\Big', '\\\\bigg', '\\\\Bigg'], RARE, '$0($0)');\nmetadata('Sizing', ['\\\\bigl', '\\\\Bigl', '\\\\biggl', '\\\\Biggl'], RARE, '$0(');\nmetadata('Sizing', ['\\\\bigr', '\\\\Bigr', '\\\\biggr', '\\\\Biggr'], RARE, '$0)');\nmetadata('Sizing', ['\\\\bigm', '\\\\Bigm', '\\\\biggm', '\\\\Biggm'], RARE, '$0|');\n\nmetadata(\n  'Letterlike Symbols',\n  [\n    '\\\\nabla',\n    '\\\\partial',\n    '\\\\N',\n    '\\\\R',\n    '\\\\Q',\n    '\\\\C',\n    '\\\\Z',\n    '\\\\exponentialE',\n    '\\\\forall',\n    '\\\\exists',\n    '\\\\nexists',\n  ],\n  SUPERCOMMON\n);\n\nmetadata(\n  'Letterlike Symbols',\n  [\n    '\\\\doubleStruckCapitalP',\n    '\\\\P',\n    '\\\\ell',\n    '\\\\hbar',\n    '\\\\hslash',\n    '\\\\imath',\n    '\\\\jmath',\n    '\\\\imaginaryI',\n    '\\\\imaginaryJ',\n    '\\\\differentialD',\n    '\\\\rd',\n    '\\\\capitalDifferentialD',\n    '\\\\doubleStruckCapitalN',\n    '\\\\doubleStruckCapitalR',\n    '\\\\doubleStruckCapitalQ',\n    '\\\\doubleStruckCapitalC',\n    '\\\\doubleStruckCapitalZ',\n    '\\\\rD',\n    '\\\\differencedelta',\n    '\\\\mid',\n    '@',\n    '\\\\Re',\n    '\\\\Im',\n    '\\\\$',\n    '\\\\%',\n    '\\\\And',\n    '\\\\degree',\n  ],\n  COMMON\n);\nmetadata(\n  'Letterlike Symbols',\n  [\n    '\\\\top',\n    '\\\\bot',\n    '\\\\scriptCapitalE',\n    '\\\\scriptCapitalH',\n    '\\\\scriptCapitalL',\n    '\\\\gothicCapitalC',\n    '\\\\gothicCapitalH',\n    '\\\\gothicCapitalI',\n    '\\\\gothicCapitalR',\n    '\\\\Bbbk',\n    '\\\\Finv',\n    '\\\\Game',\n    '\\\\wp',\n    '\\\\eth',\n    '\\\\mho',\n    '\\\\pounds',\n    '\\\\yen',\n    '\\\\euro',\n  ],\n  RARE\n);\n\nmetadata('Crosses', ['\\\\dagger', '\\\\dag'], SUPERCOMMON);\n\nmetadata(\n  'Crosses',\n  ['\\\\ddag', '\\\\ddagger', '\\\\maltese', '\\\\textdagger', '\\\\textdaggerdbl'],\n  RARE\n);\n\nmetadata(\n  'Various',\n  [\n    '\\\\checkmark',\n\n    '\\\\diagup',\n    '\\\\diagdown',\n\n    '\\\\angle',\n    '\\\\measuredangle',\n    '\\\\sphericalangle',\n\n    '\\\\prime',\n    '\\\\doubleprime',\n    '\\\\backprime',\n    '\\\\backdoubleprime',\n    '\\\\sharp',\n    '\\\\flat',\n    '\\\\natural',\n    '\\\\&',\n    '\\\\#',\n    '\\\\clubsuit',\n    '\\\\spadesuit',\n    '\\\\diamondsuit',\n    '\\\\heartsuit',\n    '\\\\backslash',\n    '\\\\infty',\n    '/',\n    '\\\\_',\n    '\\\\/',\n    '|',\n    \"'\",\n  ],\n  RARE\n);\n\nmetadata('Various', ['\\\\unicode'], RARE, '$0{\"2B1A}');\n\nmetadata(\n  'Arrows',\n  ['\\\\longrightarrow', '\\\\rightarrow', '\\\\Longrightarrow', '\\\\Rightarrow'],\n  SUPERCOMMON\n);\nmetadata(\n  'Arrows',\n  [\n    '\\\\longmapsto',\n    '\\\\mapsto',\n    '\\\\Longleftrightarrow',\n    '\\\\rightleftarrows',\n    '\\\\leftarrow',\n    '\\\\curvearrowleft',\n    '\\\\uparrow',\n    '\\\\downarrow',\n    '\\\\hookrightarrow',\n    '\\\\rightharpoonup',\n    '\\\\rightleftharpoons',\n  ],\n  COMMON\n);\nmetadata(\n  'Arrows',\n  [\n    '\\\\Leftarrow',\n    '\\\\longleftrightarrow',\n    '\\\\longleftarrow',\n    '\\\\Longleftarrow',\n\n    '\\\\searrow',\n    '\\\\nearrow',\n    '\\\\swarrow',\n    '\\\\nwarrow',\n\n    '\\\\Uparrow',\n    '\\\\Downarrow',\n    '\\\\updownarrow',\n    '\\\\Updownarrow',\n\n    '\\\\hookleftarrow',\n    '\\\\leftharpoonup',\n    '\\\\leftharpoondown',\n    '\\\\rightharpoondown',\n\n    '\\\\leftrightarrows',\n\n    '\\\\dashrightarrow',\n    '\\\\dashleftarrow',\n    '\\\\leftleftarrows',\n    '\\\\Lleftarrow',\n    '\\\\twoheadleftarrow',\n    '\\\\leftarrowtail',\n    '\\\\looparrowleft',\n    '\\\\leftrightharpoons',\n    '\\\\circlearrowleft',\n    '\\\\Lsh',\n    '\\\\upuparrows',\n    '\\\\downharpoonleft',\n    '\\\\multimap',\n    '\\\\leftrightsquigarrow',\n    '\\\\twoheadrightarrow',\n    '\\\\rightarrowtail',\n    '\\\\looparrowright',\n    '\\\\curvearrowright',\n    '\\\\circlearrowright',\n    '\\\\Rsh',\n    '\\\\downdownarrows',\n    '\\\\upharpoonright',\n    '\\\\downharpoonright',\n    '\\\\rightsquigarrow',\n    '\\\\leadsto',\n    '\\\\Rrightarrow',\n    '\\\\restriction',\n  ],\n  RARE\n);\nmetadata('Arrows', ['\\\\upharpoonleft', '\\\\rightrightarrows'], CRYPTIC);\n\n// AMS Negated Arrows\nmetadata(\n  'Negated Arrows',\n  [\n    '\\\\nrightarrow',\n    '\\\\nRightarrow',\n    '\\\\nleftrightarrow',\n    '\\\\nLeftrightarrow',\n    '\\\\nleftarrow',\n    '\\\\nLeftarrow',\n  ],\n  RARE\n);\n\nmetadata(\n  'Extensible Symbols',\n  [\n    '\\\\xrightarrow',\n    '\\\\xleftarrow',\n    '\\\\xRightarrow',\n    '\\\\xLeftarrow',\n    '\\\\xleftharpoonup',\n    '\\\\xleftharpoondown',\n    '\\\\xrightharpoonup',\n    '\\\\xrightharpoondown',\n    '\\\\xlongequal',\n    '\\\\xtwoheadleftarrow',\n    '\\\\xtwoheadrightarrow',\n    '\\\\xleftrightarrow',\n    '\\\\xLeftrightarrow',\n    '\\\\xrightleftharpoons',\n    '\\\\xleftrightharpoons',\n    '\\\\xhookleftarrow',\n    '\\\\xhookrightarrow',\n    '\\\\xmapsto',\n    '\\\\xtofrom',\n    '\\\\xrightleftarrows', // From mhchem.sty package\n    '\\\\xrightequilibrium', // From mhchem.sty package\n    '\\\\xleftequilibrium',\n  ],\n  RARE,\n  '$0[below]{above}=0'\n);\n\n// AMS Negated Binary Relations\nmetadata(\n  'Negated Relations',\n  [\n    '\\\\nless',\n    '\\\\nleqslant',\n    '\\\\lneq',\n    '\\\\lneqq',\n    '\\\\nleqq',\n\n    '\\\\unlhd',\n    '\\\\unrhd',\n\n    '\\\\lvertneqq',\n    '\\\\lnsim',\n    '\\\\lnapprox',\n    '\\\\nprec',\n    '\\\\npreceq',\n    '\\\\precnsim',\n    '\\\\precnapprox',\n    '\\\\nsim',\n    '\\\\nshortmid',\n    '\\\\nmid',\n    '\\\\nvdash',\n    '\\\\nvDash',\n    '\\\\ngtr',\n    '\\\\ngeqslant',\n    '\\\\ngeqq',\n    '\\\\gneq',\n    '\\\\gneqq',\n    '\\\\gvertneqq',\n    '\\\\gnsim',\n    '\\\\nsucc',\n    '\\\\succnsim',\n    '\\\\ncong',\n    '\\\\nshortparallel',\n    '\\\\nparallel',\n    '\\\\nVDash',\n    '\\\\nVdash',\n    '\\\\precneqq',\n    '\\\\succneqq',\n    '\\\\gnapprox',\n    '\\\\succnapprox',\n    '\\\\nsucceq',\n  ],\n  RARE\n);\n\n// AMS Hebrew\nmetadata('Hebrew', ['\\\\aleph', '\\\\beth', '\\\\daleth', '\\\\gimel'], RARE);\n\nmetadata(\n  'Fences',\n  [\n    '\\\\lbrace',\n    '\\\\rbrace',\n    '\\\\vert',\n    '\\\\Vert',\n    '\\\\{',\n    '\\\\}',\n    '(',\n    ')',\n    '[',\n    ']',\n  ],\n  SUPERCOMMON\n);\nmetadata(\n  'Fences',\n  [\n    '\\\\langle',\n    '\\\\rangle',\n    '\\\\lfloor',\n    '\\\\rfloor',\n    '\\\\lceil',\n    '\\\\rceil',\n    '\\\\mvert',\n    '\\\\|',\n    '\\\\mVert',\n  ],\n  COMMON\n);\nmetadata(\n  'Fences',\n  [\n    '\\\\lvert',\n    '\\\\rvert',\n    '\\\\lVert',\n    '\\\\rVert',\n    '\\\\lbrack',\n    '\\\\rbrack',\n    '\\\\ulcorner',\n    '\\\\urcorner',\n    '\\\\llcorner',\n    '\\\\lrcorner',\n    '\\\\lgroup',\n    '\\\\rgroup',\n    '\\\\lmoustache',\n    '\\\\rmoustache',\n  ],\n  RARE\n);\n\nmetadata(\n  'Relations',\n  ['=', '\\\\ne', '\\\\neq', '<', '>', '\\\\leqslant', '\\\\geqslant', '\\\\approx'],\n  SUPERCOMMON\n);\nmetadata(\n  'Relations',\n  [\n    '\\\\lt',\n    '\\\\gt',\n    '\\\\le',\n    '\\\\ge',\n    '\\\\leq',\n    '\\\\geq',\n    '\\\\gg',\n    '\\\\cong',\n    '\\\\equiv',\n    '\\\\prec',\n    '\\\\preceq',\n    '\\\\succ',\n    '\\\\perp',\n    '\\\\parallel',\n    '\\\\propto',\n    '\\\\smile',\n    '\\\\frown',\n    '\\\\sim',\n    '\\\\gtrsim',\n  ],\n  COMMON\n);\nmetadata(\n  'Relations',\n  [\n    '\\\\coloneq',\n    '\\\\succeq',\n\n    '\\\\approxeq',\n    '\\\\thickapprox',\n    '\\\\lessapprox',\n    '\\\\gtrapprox',\n    '\\\\precapprox',\n    '\\\\succapprox',\n\n    '\\\\thicksim',\n    '\\\\succsim',\n    '\\\\precsim',\n    '\\\\backsim',\n    '\\\\eqsim',\n    '\\\\backsimeq',\n    '\\\\simeq',\n    '\\\\lesssim',\n\n    '\\\\nleq',\n    '\\\\ngeq',\n\n    '\\\\smallsmile',\n    '\\\\smallfrown',\n    '\\\\bowtie',\n\n    '\\\\asymp',\n\n    '\\\\leqq',\n    '\\\\eqslantless',\n\n    '\\\\ll',\n\n    '\\\\lll',\n    '\\\\lessgtr',\n    '\\\\lesseqgtr',\n    '\\\\lesseqqgtr',\n    '\\\\risingdotseq',\n    '\\\\fallingdotseq',\n    '\\\\preccurlyeq',\n    '\\\\curlyeqprec',\n    '\\\\vDash',\n    '\\\\Vvdash',\n    '\\\\bumpeq',\n    '\\\\Bumpeq',\n    '\\\\geqq',\n    '\\\\eqslantgtr',\n    '\\\\ggg',\n    '\\\\gtrless',\n    '\\\\gtreqless',\n    '\\\\gtreqqless',\n\n    '\\\\succcurlyeq',\n    '\\\\curlyeqsucc',\n    '\\\\Vdash',\n    '\\\\shortmid',\n    '\\\\shortparallel',\n    '\\\\between',\n    '\\\\pitchfork',\n    '\\\\varpropto',\n    '\\\\backepsilon',\n    '\\\\llless',\n    '\\\\gggtr',\n    '\\\\lhd',\n    '\\\\rhd',\n    '\\\\Join',\n\n    '\\\\doteq',\n    '\\\\doteqdot',\n    '\\\\Doteq',\n    '\\\\eqcirc',\n    '\\\\circeq',\n    '\\\\lessdot',\n    '\\\\gtrdot',\n    '\\\\measeq',\n    '\\\\eqdef',\n    '\\\\questeq',\n  ],\n  RARE\n);\n\nmetadata(\n  'Logic',\n  ['\\\\leftrightarrow', '\\\\Leftrightarrow', '\\\\to'],\n  SUPERCOMMON\n);\nmetadata('Logic', ['\\\\models', '\\\\vdash'], COMMON);\nmetadata(\n  'Logic',\n  [\n    '\\\\therefore',\n    '\\\\because',\n    '\\\\implies',\n    '\\\\gets',\n    '\\\\dashv',\n    '\\\\impliedby',\n    '\\\\biconditional',\n    '\\\\roundimplies',\n  ],\n  RARE\n);\n\nmetadata('Operators', ['+', '-', '*', '\\\\cdot'], SUPERCOMMON);\nmetadata('Operators', ['\\\\sqrt'], SUPERCOMMON, '$0{\\\\placeholder{}}');\n\nmetadata('Operators', ['\\\\pm', '\\\\mp', '\\\\times', '\\\\div', '\\\\surd'], COMMON);\n\nmetadata(\n  'Operators',\n  [\n    '\\\\ltimes',\n    '\\\\rtimes',\n    '\\\\leftthreetimes',\n    '\\\\rightthreetimes',\n    '\\\\intercal',\n    '\\\\dotplus',\n    '\\\\centerdot',\n    '\\\\doublebarwedge',\n    '\\\\divideontimes',\n    '\\\\divides',\n  ],\n  RARE\n);\n\nmetadata('Logic', ['\\\\wedge', '\\\\vee', '\\\\neg'], SUPERCOMMON);\nmetadata('Logic', ['\\\\lnot'], COMMON);\nmetadata(\n  'Logic',\n  [\n    '\\\\land',\n    '\\\\lor',\n    '\\\\barwedge',\n    '\\\\veebar',\n    '\\\\nor',\n    '\\\\curlywedge',\n    '\\\\curlyvee',\n  ],\n  RARE\n);\n\nmetadata(\n  'Greek',\n  [\n    '\\\\alpha',\n    '\\\\beta',\n    '\\\\gamma',\n    '\\\\delta',\n    '\\\\epsilon',\n    '\\\\varepsilon',\n    '\\\\zeta',\n    '\\\\eta',\n    '\\\\theta',\n    '\\\\vartheta',\n    '\\\\iota',\n    '\\\\kappa',\n    '\\\\varkappa',\n    '\\\\lambda',\n    '\\\\mu',\n    '\\\\nu',\n    '\\\\xi',\n    '\\\\pi',\n    '\\\\varpi',\n    '\\\\rho',\n    '\\\\varrho',\n    '\\\\sigma',\n    '\\\\varsigma',\n    '\\\\tau',\n    '\\\\phi',\n    '\\\\varphi',\n    '\\\\upsilon',\n    '\\\\chi',\n    '\\\\psi',\n    '\\\\omega',\n    '\\\\Gamma',\n    '\\\\Delta',\n    '\\\\Theta',\n    '\\\\Lambda',\n    '\\\\Xi',\n    '\\\\Pi',\n    '\\\\Sigma',\n    '\\\\Upsilon',\n    '\\\\Phi',\n    '\\\\Psi',\n    '\\\\Omega',\n    '\\\\digamma',\n    '\\\\omicron',\n  ],\n  COMMON\n);\n\nmetadata(\n  'Sets',\n  [\n    '\\\\emptyset',\n    '\\\\varnothing',\n    '\\\\cap',\n    '\\\\cup',\n    '\\\\in',\n    '\\\\notin',\n    '\\\\subset',\n    '\\\\supset',\n    '\\\\subseteq',\n    '\\\\supseteq',\n    '\\\\sqsubseteq',\n  ],\n  SUPERCOMMON\n);\nmetadata(\n  'Sets',\n  [\n    '\\\\setminus',\n    '\\\\not',\n    '\\\\ni',\n    '\\\\sqsupseteq',\n    '\\\\nsupseteqq',\n    '\\\\supsetneq',\n    '\\\\varsupsetneq',\n    '\\\\supsetneqq',\n    '\\\\varsupsetneqq',\n  ],\n  COMMON\n);\nmetadata(\n  'Sets',\n  [\n    '\\\\smallsetminus',\n    '\\\\complement',\n\n    '\\\\owns',\n    '\\\\subsetneq',\n    '\\\\varsubsetneq',\n    '\\\\subsetneqq',\n    '\\\\varsubsetneqq',\n    '\\\\nsubset',\n    '\\\\nsupset',\n    '\\\\nsubseteq',\n    '\\\\nsupseteq',\n    '\\\\nsubseteqq',\n    '\\\\subseteqq',\n    '\\\\Subset',\n    '\\\\sqsubset',\n    '\\\\supseteqq',\n    '\\\\Supset',\n    '\\\\sqsupset',\n  ],\n  RARE\n);\n\nmetadata(\n  'Spacing',\n  ['\\\\space, \\\\quad', '\\\\qquad'],\n  COMMON,\n  '\\\\unicode{\"203A}$0\\\\unicode{\"2039}'\n);\nmetadata(\n  'Spacing',\n  ['\\\\!', '\\\\,', '\\\\:', '\\\\;', '\\\\enskip', '\\\\enspace'],\n  RARE,\n  '\\\\unicode{\"203A}$0\\\\unicode{\"2039}'\n);\nmetadata(\n  'Spacing',\n  ['\\\\hspace', '\\\\hspace*'],\n  RARE,\n  '\\\\unicode{\"203A}$0{1em}\\\\unicode{\"2039}'\n);\nmetadata(\n  'Punctuation',\n  [\n    '\\\\colon',\n    '\\\\cdotp',\n    '\\\\ldots',\n    '\\\\cdots',\n    '\\\\ddots',\n    '\\\\vdots',\n    '?',\n    '!',\n    ':',\n    '\"',\n    ',',\n    '.',\n    ';',\n  ],\n  COMMON\n);\nmetadata('Punctuation', ['\\\\mathellipsis', '\\\\ldotp', '\\\\Colon'], RARE);\n\nmetadata('Boxes', ['\\\\square', '\\\\Box'], COMMON);\nmetadata(\n  'Boxes',\n  ['\\\\blacksquare', '\\\\boxminus', '\\\\boxplus', '\\\\boxtimes', '\\\\boxdot'],\n  RARE\n);\n\nmetadata(\n  'Circles',\n  ['\\\\circ', '\\\\bullet', '\\\\circleddash', '\\\\oplus', '\\\\otimes'],\n  COMMON\n);\nmetadata(\n  'Circles',\n  [\n    '\\\\bigcirc',\n    '\\\\circledast',\n    '\\\\ominus',\n    '\\\\circledcirc',\n    '\\\\oslash',\n    '\\\\circledS',\n    '\\\\circledR',\n    '\\\\odot',\n  ],\n  RARE\n);\n\nmetadata('Triangles', ['\\\\triangle', '\\\\triangleq'], COMMON);\nmetadata(\n  'Triangles',\n  [\n    '\\\\bigtriangleup',\n    '\\\\vartriangle',\n    '\\\\triangledown',\n    '\\\\bigtriangledown',\n    '\\\\triangleleft',\n    '\\\\vartriangleleft',\n    '\\\\trianglelefteq',\n    '\\\\ntriangleleft',\n    '\\\\ntrianglelefteq',\n    '\\\\triangleright',\n    '\\\\vartriangleright',\n    '\\\\trianglerighteq',\n    '\\\\ntriangleright',\n    '\\\\ntrianglerighteq',\n    '\\\\blacktriangle',\n    '\\\\blacktriangledown',\n    '\\\\blacktriangleleft',\n    '\\\\blacktriangleright',\n  ],\n  RARE\n);\n\nmetadata('Shapes', ['\\\\ast', '\\\\star'], COMMON);\nmetadata(\n  'Shapes',\n  ['\\\\diamond', '\\\\Diamond', '\\\\lozenge', '\\\\blacklozenge', '\\\\bigstar'],\n  RARE\n);\n","import { MathfieldOptions } from './options';\nimport { Selector } from './commands';\nimport {\n  Mathfield,\n  InsertOptions,\n  OutputFormat,\n  Offset,\n  Range,\n  Selection,\n  FindOptions,\n  ReplacementFunction,\n} from './mathfield';\nimport { MathfieldErrorCode, ParseMode, ParserErrorCode, Style } from './core';\n\nimport {\n  get as getOptions,\n  getDefault as getDefaultOptions,\n  update as updateOptions,\n} from '../editor/options';\nimport { MathfieldPrivate } from '../editor-mathfield/mathfield-private';\nimport { isOffset, isRange, isSelection } from '../editor/model';\n\n//\n// Custom Events\n//\n\n/*\n    ## Event retargeting\n    Some events bubble up through the DOM tree, so that they are detectable by\n     any element on the page.\n\n    Bubbling events fired from within shadow DOM are retargeted so that, to any\n    listener external to your component, they appear to come from your component itself.\n\n    ## Custom Event Bubbling\n\n    By default, a bubbling custom event fired inside shadow DOM will stop\n    bubbling when it reaches the shadow root.\n\n    To make a custom event pass through shadow DOM boundaries, you must set\n    both the `composed` and `bubbles` flags to true.\n*/\n\n/**\n * The `math-error` custom event signals an error while parsing an expression.\n *\n * ```javascript\n * document.getElementById('mf').addEventListener('math-error', (ev) => {\n *  const err = ev.detail;\n *  console.warn(err.code + (err.arg ? ': ' + err.arg : '') +\n *         '\\n%c|  ' + err.before + '%c' + err.after +\n *         '\\n%c|  ' + String(' ').repeat(err.before.length) +\n *         '▲',\n *         'font-weight: bold',\n *         'font-weight: normal; color: rgba(160, 160, 160)',\n *         'font-weight: bold; color: hsl(4deg, 90%, 50%)'\n *     );\n * });\n * ```\n */\nexport type MathErrorEvent = {\n  code: ParserErrorCode | MathfieldErrorCode;\n  arg?: string;\n  latex?: string;\n  before?: string;\n  after?: string;\n};\n\n/**\n * The `keystroke` event is fired when a keystroke is about to be procesed.\n * The event is cancellable, which wills suprress further handling of the event.\n *\n */\nexport type KeystrokeEvent = {\n  /** A string descring the keystroke, for example `\"Alt-KeyU\". See [W3C UIEvents](https://www.w3.org/TR/uievents/#keys-keyvalues)\n   * for more information on the format of the descriptor.\n   *\n   */\n  keystroke: string;\n  /** The native keyboard event */\n  event?: KeyboardEvent;\n};\n\n/**\n * The `focus-out` event signals that the mathfield has lost focus through keyboard\n * navigation with arrow keys or the tab key.\n *\n * The event `detail.direction` property indicates the direction the cursor\n * was moving which can be useful to decide which element to focus next.\n *\n * The event is cancelable, which will prevent the field from losing focus.\n *\n * ```javascript\n * mfe.addEventListener('focus-out', (ev) => {\n *  console.log(\"Losing focus \", ev.detail.direction);\n * });\n * ```\n */\nexport type FocusOutEvent = {\n  direction: 'forward' | 'backward' | 'upward' | 'downward';\n};\n\ndeclare global {\n  /**\n   * Map the custom event names to types\n   * @internal\n   */\n  interface DocumentEventMap {\n    ['math-error']: CustomEvent<MathErrorEvent>;\n    ['keystroke']: CustomEvent<KeystrokeEvent>;\n    ['focus-out']: CustomEvent<FocusOutEvent>;\n  }\n}\n\nconst MATHFIELD_TEMPLATE = document.createElement('template');\nMATHFIELD_TEMPLATE.innerHTML = `<style>\n:host {\n    display: block;\n}\n:host([hidden]) {\n    display: none;\n}\n:host([disabled]) {\n    opacity:  .5;\n}\n:host(:focus), :host(:focus-within) {\n    outline: Highlight auto 1px;    /* For Firefox */\n    outline: -webkit-focus-ring-color auto 1px;\n}\n</style>\n<div></div><slot style=\"display:none\"></slot>`;\n\n//\n// Deferred State\n//\n// Methods such as `setOptions()` or `getOptions()` could be called before\n// the element has been connected (i.e. `mf = new MathfieldElement(); mf.setConfig()`...)\n// and therefore before the matfield instance has been created.\n// So we'll stash any deferred operations on options (and value) here, and\n// will apply them to the element when it gets connected to the DOM.\n//\nconst gDeferredState = new WeakMap<\n  MathfieldElement,\n  {\n    value: string;\n    selection: Selection;\n    options: Partial<MathfieldOptions>;\n  }\n>();\n\n/**\n * These attributes of the `<math-field>` element correspond to the\n * [MathfieldOptions] properties.\n */\nexport interface MathfieldElementAttributes {\n  // Allow for global aria attributes, data- attributes, micro-data attributes\n  // and global element attributes\n  [key: string]: unknown;\n  'default-mode': string;\n  'fonts-directory': string;\n  /**\n   * Scaling factor to be applied to horizontal spacing between elements of\n   * the formula. A value greater than 1.0 can be used to improve the\n   * legibility.\n   *\n   */\n  'horizontal-spacing-scale': string;\n  /**\n   * Maximum time, in milliseconds, between consecutive characters for them to be\n   * considered part of the same shortcut sequence.\n   *\n   * A value of 0 is the same as infinity: any consecutive character will be\n   * candidate for an inline shortcut, regardless of the interval between this\n   * character and the previous one.\n   *\n   * A value of 750 will indicate that the maximum interval between two\n   * characters to be considered part of the same inline shortcut sequence is\n   * 3/4 of a second.\n   *\n   * This is useful to enter \"+-\" as a sequence of two characters, while also\n   * supporting the \"±\" shortcut with the same sequence.\n   *\n   * The first result can be entered by pausing slightly between the first and\n   * second character if this option is set to a value of 250 or so.\n   *\n   * Note that some operations, such as clicking to change the selection, or\n   * losing the focus on the mathfield, will automatically timeout the\n   * shortcuts.\n   */\n  'inline-shortcut-timeout': string;\n  'keypress-vibration': boolean;\n  'letter-shape-style': string;\n  /**\n   * The locale (language + region) to use for string localization.\n   *\n   * If none is provided, the locale of the browser is used.\n   *\n   */\n  'locale': string;\n  /** When true, the user cannot edit the mathfield. */\n  'read-only': boolean;\n  'remove-extraneous-parentheses': boolean;\n  /**\n   * When `true` and an open fence is entered via `typedText()` it will\n   * generate a contextually appropriate markup, for example using\n   * `\\left...\\right` if applicable.\n   *\n   * When `false`, the literal value of the character will be inserted instead.\n   */\n  'smart-fence': boolean;\n  /**\n   * When true, during text input the field will switch automatically between\n   * 'math' and 'text' mode depending on what is typed and the context of the\n   * formula. If necessary, what was previously typed will be 'fixed' to\n   * account for the new info.\n   *\n   * For example, when typing \"if x >0\":\n   *\n   * | Type  | Interpretation |\n   * |---:|:---|\n   * | \"i\" | math mode, imaginary unit |\n   * | \"if\" | text mode, english word \"if\" |\n   * | \"if x\" | all in text mode, maybe the next word is xylophone? |\n   * | \"if x >\" | \"if\" stays in text mode, but now \"x >\" is in math mode |\n   * | \"if x > 0\" | \"if\" in text mode, \"x > 0\" in math mode |\n   *\n   * Smart Mode is off by default.\n   *\n   * Manually switching mode (by typing `alt/option+=`) will temporarily turn\n   * off smart mode.\n   *\n   *\n   * **Examples**\n   *\n   * -   slope = rise/run\n   * -   If x > 0, then f(x) = sin(x)\n   * -   x^2 + sin (x) when x > 0\n   * -   When x<0, x^{2n+1}<0\n   * -   Graph x^2 -x+3 =0 for 0<=x<=5\n   * -   Divide by x-3 and then add x^2-1 to both sides\n   * -   Given g(x) = 4x – 3, when does g(x)=0?\n   * -   Let D be the set {(x,y)|0<=x<=1 and 0<=y<=x}\n   * -   \\int\\_{the unit square} f(x,y) dx dy\n   * -   For all n in NN\n   *\n   */\n  'smart-mode': boolean;\n  /**\n   * When `true`, when a digit is entered in an empty superscript, the cursor\n   * leaps automatically out of the superscript. This makes entry of common\n   * polynomials easier and faster. If entering other characters (for example\n   * \"n+1\") the navigation out of the superscript must be done manually (by\n   * using the cursor keys or the spacebar to leap to the next insertion\n   * point).\n   *\n   * When `false`, the navigation out of the superscript must always be done\n   * manually.\n   *\n   */\n  'smart-superscript': boolean;\n  'speech-engine': string;\n  'speech-engine-rate': string;\n  'speech-engine-voice': string;\n  'text-to-speech-markup': string;\n  'text-to-speech-rules': string;\n  'virtual-keyboard-layout': string;\n  /**\n   * -   `'manual'`: pressing the virtual keyboard toggle button will show or hide\n   *     the virtual keyboard. If hidden, the virtual keyboard is not shown when\n   *     the field is focused until the toggle button is pressed.\n   * -   `'onfocus'`: the virtual keyboard will be displayed whenever the field is\n   *     focused and hidden when the field loses focus. In that case, the virtual\n   *     keyboard toggle button is not displayed.\n   * -   `'off'`: the virtual keyboard toggle button is not displayed, and the\n   *     virtual keyboard is never triggered.\n   *\n   * If the setting is empty, it will default to `'onfocus'` on touch-capable\n   * devices and to `'off'` otherwise.\n   *\n   */\n  'virtual-keyboard-mode': 'auto' | 'manual' | 'onfocus' | 'off';\n  /**\n   * The visual theme used for the virtual keyboard.\n   *\n   * If empty, the theme will switch automatically based on the device it's\n   * running on. The two supported themes are 'material' and 'apple' (the\n   * default).\n   */\n  'virtual-keyboard-theme': string;\n  /**\n   * A space separated list of the keyboards that should be available. The\n   * keyboard `'all'` is synonym with `'numeric'`, `'functions'``, `'symbols'``\n   * `'roman'` and `'greek'`,\n   *\n   * The keyboards will be displayed in the order indicated.\n   */\n  'virtual-keyboards':\n    | 'all'\n    | 'numeric'\n    | 'roman'\n    | 'greek'\n    | 'functions'\n    | 'symbols'\n    | 'latex'\n    | string;\n  /**\n   * When true, use a shared virtual keyboard for all the mathfield\n   * elements in the page, even across iframes.\n   *\n   * When setting this option to true, you must create the shared\n   * virtual keyboard in the the parent document:\n   *\n   * ```javascript\n   * import { makeSharedVirtualKeyboard } from 'mathlive';\n   *\n   *     makeSharedVirtualKeyboard({\n   *         virtualKeyboardToolbar: 'none',\n   *     });\n   * ```\n   *\n   * **Default**: `false`\n   */\n  'use-shared-virtual-keyboard': boolean;\n  /**\n   * Specify the `targetOrigin` parameter for\n   * [postMessage](https://developer.mozilla.org/en/docs/Web/API/Window/postMessage)\n   * to send control messages from child to parent frame to remote control\n   * of mathfield component.\n   *\n   * **Default**: `window.origin`\n   */\n  'shared-virtual-keyboard-target-origin': string;\n\n  /**\n   * The Latex string to insert when the spacebar is pressed (on the physical or\n   * virtual keyboard). Empty by default. Use `\\;` for a thick space, `\\:` for\n   * a medium space, `\\,` for a thin space.\n   */\n  'math-mode-space': string;\n}\n\n/**\n * The `MathfieldElement` class provides special properties and\n * methods to control the display and behavior of `<math-field>`\n * elements.\n *\n * It inherits many useful properties and methods from [[`HTMLElement`]] such\n * as `style`, `tabIndex`, `addEventListener()`, `getAttribute()`,  etc...\n *\n * To create a new `MathfieldElement`:\n *\n * ```javascript\n * // 1. Create a new MathfieldElement\n * const mfe = new MathfieldElement();\n * // 2. Attach it to the DOM\n * document.body.appendChild(mfe);\n * ```\n *\n * The `MathfieldElement` constructor has an optional argument of\n * [[`MathfieldOptions`]] to configure the element. The options can also\n * be modified later:\n *\n * ```javascript\n * // Setting options during construction\n * const mfe = new MathfieldElement({smartFence: false});\n * // Modifying options after construction\n * mfe.setOptions({smartFence: true});\n * ```\n *\n * ### CSS Variables\n *\n * To customize the appearance of the mathfield, declare the following CSS\n * variables (custom properties) in a ruleset that applied to the mathfield.\n * ```css\n * math-field {\n *  --hue: 10       // Set the highlight color and caret to a reddish hue\n * }\n * ```\n *\n * | CSS Variable | Usage |\n * |:---|:---|\n * | `--hue` | Hue of the highlight color and the caret |\n * | `--highlight` | Color of the selection |\n * | `--highlight-inactive` | Color of the selection, when the mathfield is not focused |\n * | `--caret` | Color of the caret/insertion point |\n * | `--primary` | Primary accent color, used for example in the virtual keyboard |\n * | `--text-font-family` | The font stack used in text mode |\n * | `--keyboard-zindex` | The z-index attribute of the virtual keyboard panel |\n *\n * ### CSS Parts\n *\n * To style the virtual keyboard toggle, use the `virtual-keyboard-toggle` CSS\n * part. To use it, define a CSS rule with a `::part()` selector\n * for example:\n * ```css\n * math-field::part(virtual-keyboard-toggle) {\n *  color: red;\n * }\n * ```\n *\n *\n * ### Attributes\n *\n * An attribute is a key-value pair set as part of the tag:\n *\n * ```html\n * <math-field locale=\"fr\"></math-field>\n * ```\n *\n * The supported attributes are listed in the table below with their correspnding\n * property.\n *\n * The property can be changed either directly on the\n * `MathfieldElement` object, or using `setOptions()` if it is prefixed with\n * `options.`, for example\n * ```javascript\n *  getElementById('mf').value = '\\\\sin x';\n *  getElementById('mf').setOptions({horizontalSpacingScale: 1.1});\n * ```\n *\n * The values of attributes and properties are reflected, which means you can change one or the\n * other, for example:\n * ```javascript\n * getElementById('mf').setAttribute('virtual-keyboard-mode',  'manual');\n * console.log(getElementById('mf').getOption('virtualKeyboardMode'));\n * // Result: \"manual\"\n * getElementById('mf').setOptions({virtualKeyboardMode: 'onfocus');\n * console.log(getElementById('mf').getAttribute('virtual-keyboard-mode');\n * // Result: 'onfocus'\n * ```\n *\n * An exception is the `value` property, which is not reflected on the `value`\n * attribute: the `value` attribute remains at its initial value.\n *\n *\n * | Attribute | Property |\n * |:---|:---|\n * | `disabled` | `disabled` |\n * | `default-mode` | `options.defaultMode` |\n * | `fonts-directory` | `options.fontsDirectory` |\n * | `sounds-directory` | `options.soundsDirectory` |\n * | `horizontal-spacing-scale` | `options.horizontalSpacingScale` |\n * | `inline-shortcut-timeout` | `options.inlineShortcutTimeout` |\n * | `keypress-vibration` | `options.keypressVibration` |\n * | `letter-shape-style` | `options.letterShapeStyle` |\n * | `locale` | `options.locale` |\n * | `math-mode-space` | `options.mathModeSpace` |\n * | `read-only` | `options.readOnly` |\n * | `remove-extraneous-parentheses` | `options.removeExtraneousParentheses` |\n * | `smart-fence` | `options.smartFence` |\n * | `smart-mode` | `options.smartMode` |\n * | `smart-superscript` | `options.superscript` |\n * | `speech-engine` | `options.speechEngine` |\n * | `speech-engine-rate` | `options.speechEngineRate` |\n * | `speech-engine-voice` | `options.speechEngineVoice` |\n * | `text-to-speech-markup` | `options.textToSpeechMarkup` |\n * | `text-to-speech-rules` | `options.textToSpeechRules` |\n * | `value` | value |\n * | `virtual-keyboard-layout` | `options.keyboardLayout` |\n * | `virtual-keyboard-mode` | `options.keyboardMode` |\n * | `virtual-keyboard-theme` | `options.keyboardTheme` |\n * | `virtual-keyboards` | `options.keyboards` |\n *\n * See [[`MathfieldOptions`]] for more details about these options.\n *\n * In addition, the following [global attributes](https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes)\n * can also be used:\n * - `class`\n * - `data-*`\n * - `hidden`\n * - `id`\n * - `item*`\n * - `style`\n * - `tabindex`\n *\n *\n * ### Events\n *\n * Listen to these events by using `addEventListener()`. For events with additional\n * arguments, the arguments are availble in `event.detail`.\n *\n * | Event Name  | Description |\n * |:---|:---|\n * | `input` | The value of the mathfield has been modified. This happens on almost every keystroke in the mathfield.  |\n * | `change` | The user has commited the value of the mathfield. This happens when the user presses **Return** or leaves the mathfield. |\n * | `selection-change` | The selection (or caret position) in the mathfield has changed |\n * | `mode-change` | The mode (`math`, `text`) of the mathfield has changed |\n * | `undo-state-change` |  The state of the undo stack has changed |\n * | `read-aloud-status-change` | The status of a read aloud operation has changed |\n * | `virtual-keyboard-toggle` | The visibility of the virtual keyboard panel has changed |\n * | `blur` | The mathfield is losing focus |\n * | `focus` | The mathfield is gaining focus |\n * | `focus-out` | The user is navigating out of the mathfield, typically using the keyboard<br> `detail: {direction: 'forward' | 'backward' | 'upward' | 'downward'}` **cancellable**|\n * | `math-error` | A parsing or configuration error happened <br> `detail: ErrorListener<ParserErrorCode | MathfieldErrorCode>` |\n * | `keystroke` | The user typed a keystroke with a physical keyboard <br> `detail: {keystroke: string, event: KeyboardEvent}` |\n * | `mount` | The element has been attached to the DOM |\n * | `unmount` | The element is about to be removed from the DOM |\n *\n */\nexport class MathfieldElement extends HTMLElement implements Mathfield {\n  /**\n   * Private lifecycle hooks\n   * @internal\n   */\n  static get optionsAttributes(): Record<\n    string,\n    'number' | 'boolean' | 'string'\n  > {\n    return {\n      'default-mode': 'string',\n      'fonts-directory': 'string',\n      'horizontal-spacing-scale': 'string',\n      'math-mode-space': 'string',\n      'inline-shortcut-timeout': 'string',\n      'keypress-vibration': 'boolean',\n      'letter-shape-style': 'string',\n      'locale': 'string',\n      'read-only': 'boolean',\n      'remove-extraneous-parentheses': 'boolean',\n      'smart-fence': 'boolean',\n      'smart-mode': 'boolean',\n      'smart-superscript': 'boolean',\n      'speech-engine': 'string',\n      'speech-engine-rate': 'string',\n      'speech-engine-voice': 'string',\n      'text-to-speech-markup': 'string',\n      'text-to-speech-rules': 'string',\n      'virtual-keyboard-layout': 'string',\n      'virtual-keyboard-mode': 'string',\n      'virtual-keyboard-theme': 'string',\n      'virtual-keyboards': 'string',\n      'use-shared-virtual-keyboard': 'boolean',\n      'shared-virtual-keyboard-target-origin': 'string',\n    };\n  }\n\n  /**\n   * Custom elements lifecycle hooks\n   * @internal\n   */\n  static get observedAttributes(): string[] {\n    return [...Object.keys(MathfieldElement.optionsAttributes), 'disabled'];\n  }\n\n  private _mathfield: MathfieldPrivate;\n  // The original text content of the slot\n  // Recored at construction to avoid reacting to it if a\n  // slotchange event gets fired as part of the construction\n  // (different browsers behave differently).\n  private _slotValue: string;\n\n  /**\n     * To create programmatically a new mahfield use:\n     * ```javascript\n    let mfe = new MathfieldElement();\n    // Set initial value and options\n    mfe.value = \"\\\\frac{\\\\sin(x)}{\\\\cos(x)}\";\n    // Options can be set either as an attribute (for simple options)...\n    mfe.setAttribute('virtual-keyboard-layout', 'dvorak');\n    // ... or using `setOptions()`\n    mfe.setOptions({\n        virtualKeyboardMode: 'manual',\n    });\n    // Attach the element to the DOM\n    document.body.appendChild(mfe);\n    * ```\n    */\n  constructor(options?: Partial<MathfieldOptions>) {\n    super();\n\n    this.attachShadow({ mode: 'open' });\n    this.shadowRoot.append(MATHFIELD_TEMPLATE.content.cloneNode(true));\n\n    // When the elements get focused (through tabbing for example)\n    // focus the mathfield\n    this.shadowRoot.host.addEventListener(\n      'focus',\n      (_event) => this._mathfield?.focus(),\n      true\n    );\n    this.shadowRoot.host.addEventListener(\n      'blur',\n      (_event) => this._mathfield?.blur(),\n      true\n    );\n\n    const slot = this.shadowRoot.querySelector<HTMLSlotElement>(\n      'slot:not([name])'\n    );\n    this._slotValue = slot\n      .assignedNodes()\n      .map((x) => (x.nodeType === 3 ? x.textContent : ''))\n      .join('')\n      .trim();\n    // Inline options (as a JSON structure in the markup)\n    try {\n      const json = slot\n        .assignedElements()\n        .filter(\n          (x) =>\n            x.tagName === 'SCRIPT' &&\n            (x as HTMLScriptElement).type === 'application/json'\n        )\n        .map((x) => x.textContent)\n        .join('');\n      if (json) {\n        this.setOptions(JSON.parse(json));\n      }\n    } catch (error: unknown) {\n      console.log(error);\n    }\n\n    // Record the (optional) configuration options, as a deferred state\n    if (options) {\n      this.setOptions(options);\n    }\n\n    // Check if there is a `value` attribute and set the initial value\n    // of the mathfield from it\n    if (this.hasAttribute('value')) {\n      this.value = this.getAttribute('value');\n    } else {\n      this.value =\n        slot\n          ?.assignedNodes()\n          .map((x) => (x.nodeType === 3 ? x.textContent : ''))\n          .join('')\n          .trim() ?? '';\n    }\n  }\n\n  get mode(): ParseMode {\n    return this._mathfield?.mode;\n  }\n\n  set mode(value: ParseMode) {\n    if (!this._mathfield) return;\n    this._mathfield.mode = value;\n  }\n\n  /**\n   *  @category Options\n   */\n  getOptions<K extends keyof MathfieldOptions>(\n    keys: K[]\n  ): Pick<MathfieldOptions, K>;\n  getOptions(): MathfieldOptions;\n  getOptions(\n    keys?: keyof MathfieldOptions | (keyof MathfieldOptions)[]\n  ): any | Partial<MathfieldOptions> {\n    if (this._mathfield) {\n      return getOptions(this._mathfield.options, keys);\n    }\n\n    if (!gDeferredState.has(this)) return null;\n    return getOptions(\n      updateOptions(getDefaultOptions(), gDeferredState.get(this).options),\n      keys\n    );\n  }\n\n  /**\n   *  @category Options\n   */\n  getOption<K extends keyof MathfieldOptions>(key: K): MathfieldOptions[K] {\n    return (this.getOptions([key]) as unknown) as MathfieldOptions[K];\n  }\n\n  /**\n   *  @category Options\n   */\n  setOptions(options: Partial<MathfieldOptions>): void {\n    if (this._mathfield) {\n      this._mathfield.setOptions(options);\n    } else if (gDeferredState.has(this)) {\n      gDeferredState.set(this, {\n        value: gDeferredState.get(this).value,\n        selection: { ranges: [[0, -1]] },\n        options: {\n          ...gDeferredState.get(this).options,\n          ...options,\n        },\n      });\n    } else {\n      gDeferredState.set(this, {\n        value: '',\n        selection: { ranges: [[0, 0]] },\n        options,\n      });\n    }\n\n    // Reflect options to attributes\n    reflectAttributes(this);\n  }\n\n  /**\n   * Execute a [[`Commands`|command]] defined by a selector.\n   * ```javascript\n   * mfe.executeCommand('add-column-after');\n   * mfe.executeCommand(['switch-mode', 'math']);\n   * ```\n   *\n   * @param command - A selector, or an array whose first element\n   * is a selector, and whose subsequent elements are arguments to the selector.\n   *\n   * Selectors can be passed either in camelCase or kebab-case.\n   *\n   * ```javascript\n   * // Both calls do the same thing\n   * mfe.executeCommand('selectAll');\n   * mfe.executeCommand('select-all');\n   * ```\n   */\n  executeCommand(command: Selector | [Selector, ...any[]]): boolean {\n    return this._mathfield?.executeCommand(command) ?? false;\n  }\n\n  /**\n   *  @category Accessing and changing the content\n   */\n  getValue(format?: OutputFormat): string;\n  getValue(start: Offset, end: Offset, format?: OutputFormat): string;\n  getValue(range: Range, format?: OutputFormat): string;\n  getValue(selection: Selection, format?: OutputFormat): string;\n  getValue(\n    arg1?: Offset | Range | Selection | OutputFormat,\n    arg2?: Offset | OutputFormat,\n    arg3?: OutputFormat\n  ): string {\n    if (this._mathfield) {\n      return this._mathfield.getValue(arg1 as any, arg2 as any, arg3);\n    }\n\n    if (gDeferredState.has(this)) {\n      let start: Offset;\n      let end: Offset;\n      let format: OutputFormat;\n      if (isSelection(arg1)) {\n        [start, end] = arg1.ranges[0];\n        format = arg2 as OutputFormat;\n      } else if (isRange(arg1)) {\n        [start, end] = arg1;\n        format = arg2 as OutputFormat;\n      } else if (isOffset(arg1) && isOffset(arg2)) {\n        start = arg1;\n        end = arg2;\n        format = arg3;\n      } else {\n        start = 0;\n        end = -1;\n        format = arg1 as OutputFormat;\n      }\n\n      if (format === 'latex' && start === 0 && end === -1) {\n        return gDeferredState.get(this).value;\n      }\n    }\n\n    return undefined;\n  }\n\n  /**\n   *  @category Accessing and changing the content\n   */\n  setValue(value?: string, options?: InsertOptions): void {\n    if (this._mathfield) {\n      this._mathfield.setValue(value, options);\n      return;\n    }\n\n    if (gDeferredState.has(this)) {\n      gDeferredState.set(this, {\n        value,\n        selection: { ranges: [[0, -1]], direction: 'forward' },\n        options: gDeferredState.get(this).options,\n      });\n      return;\n    }\n\n    gDeferredState.set(this, {\n      value,\n      selection: { ranges: [[0, -1]], direction: 'forward' },\n      options: getOptionsFromAttributes(this),\n    });\n  }\n\n  /**\n   * Return true if the mathfield is currently focused (responds to keyboard\n   * input).\n   *\n   * @category Focus\n   *\n   */\n  hasFocus(): boolean {\n    return this._mathfield?.hasFocus() ?? false;\n  }\n\n  /**\n   * Sets the focus to the mathfield (will respond to keyboard input).\n   *\n   * @category Focus\n   *\n   */\n  focus(): void {\n    super.focus();\n    // If (this._mathfield) {\n    //     // Don't call this._mathfield.focus(): it checks the focus state,\n    //     // but super.focus() just changed it...\n    //     this._mathfield.keyboardDelegate.focus();\n    //     this._mathfield.model.announce('line');\n    // }\n  }\n\n  /**\n   * Remove the focus from the mathfield (will no longer respond to keyboard\n   * input).\n   *\n   * @category Focus\n   *\n   */\n  blur(): void {\n    super.blur();\n    // If (this._mathfield) {\n    //     // Don't call this._mathfield.focs(): it checks the focus state,\n    //     // but super.blur() just changed it...\n    //     this._mathfield.keyboardDelegate.blur();\n    // }\n  }\n\n  /**\n   * Select the content of the mathfield.\n   * @category Selection\n   */\n  select(): void {\n    this._mathfield?.select();\n  }\n\n  /**\n   * Inserts a block of text at the current insertion point.\n   *\n   * This method can be called explicitly or invoked as a selector with\n   * `executeCommand(\"insert\")`.\n   *\n   * After the insertion, the selection will be set according to the\n   * `options.selectionMode`.\n   *\n   *  @category Accessing and changing the content\n   */\n  insert(s: string, options?: InsertOptions): boolean {\n    return this._mathfield?.insert(s, options) ?? false;\n  }\n\n  /**\n   * Updates the style (color, bold, italic, etc...) of the selection or sets\n   * the style to be applied to future input.\n   *\n   * If there is no selection and no range is specified, the style will\n   * apply to the next character typed.\n   *\n   * If a range is specified, the style is applied to the range, otherwise,\n   * if there is a selection, the style is applied to the selection.\n   *\n   * If the operation is 'toggle' and the range already has this style,\n   * remove it. If the range\n   * has the style partially applied (i.e. only some sections), remove it from\n   * those sections, and apply it to the entire range.\n   *\n   * If the operation is 'set', the style is applied to the range,\n   * whether it already has the style or not.\n   *\n   * The default operation is 'set'.\n   *\n   * @category Accessing and changing the content\n   */\n  applyStyle(\n    style: Style,\n    options?: Range | { range?: Range; operation?: 'set' | 'toggle' }\n  ): void {\n    return this._mathfield?.applyStyle(style, options);\n  }\n\n  /**\n   * The bottom location of the caret (insertion point) in viewport\n   * coordinates.\n   *\n   * See also [[`setCaretPoint`]]\n   * @category Selection\n   */\n  get caretPoint(): { x: number; y: number } {\n    return this._mathfield?.getCaretPoint() ?? null;\n  }\n\n  set caretPoint(point: { x: number; y: number }) {\n    this._mathfield?.setCaretPoint(point.x, point.y);\n  }\n\n  /**\n   * `x` and `y` are in viewport coordinates.\n   *\n   * Return true if the location of the point is a valid caret location.\n   *\n   * See also [[`caretPoint`]]\n   * @category Selection\n   */\n  setCaretPoint(x: number, y: number): boolean {\n    return this._mathfield?.setCaretPoint(x, y) ?? false;\n  }\n\n  /**\n   *  Return an array of ranges matching the argument.\n   *\n   * An array is always returned, but it has no element if there are no\n   * matching items.\n   */\n  find(pattern: string | RegExp, options?: FindOptions): Range[] {\n    return this._mathfield?.find(pattern, options) ?? [];\n  }\n\n  /**\n   * Replace the pattern items matching the **pattern** with the\n   * **replacement** value.\n   *\n   * If **replacement** is a function, the function is called\n   * for each match and the function return value will be\n   * used as the replacement.\n   */\n  replace(\n    pattern: string | RegExp,\n    replacement: string | ReplacementFunction,\n    options?: FindOptions\n  ): void {\n    this._mathfield?.replace(pattern, replacement, options);\n  }\n\n  /**\n   * Custom elements lifecycle hooks\n   * @internal\n   */\n  connectedCallback(): void {\n    if (!this.hasAttribute('role')) this.setAttribute('role', 'textbox');\n    // This.setAttribute('aria-multiline', 'false');\n    if (!this.hasAttribute('tabindex')) this.setAttribute('tabindex', '0');\n\n    this._mathfield = new MathfieldPrivate(\n      this.shadowRoot.querySelector(':host > div'),\n      {\n        onBlur: () => {\n          this.dispatchEvent(\n            new Event('blur', {\n              cancelable: false,\n              bubbles: false, // DOM 'focus' and 'blur' don't bubble\n            })\n          );\n        },\n        onContentDidChange: () => {\n          this.dispatchEvent(\n            new Event('input', {\n              cancelable: false,\n              bubbles: true,\n            })\n          );\n        },\n        onError: (err: {\n          code: ParserErrorCode | MathfieldErrorCode;\n          arg?: string;\n          latex?: string;\n          before?: string;\n          after?: string;\n        }) => {\n          this.dispatchEvent(\n            new CustomEvent<MathErrorEvent>('math-error', {\n              detail: {\n                code: err.code,\n                arg: err.arg,\n                latex: err.latex,\n                before: err.before,\n                after: err.after,\n              },\n              cancelable: false,\n              bubbles: true,\n            })\n          );\n        },\n        onFocus: () => {\n          this.dispatchEvent(\n            new Event('focus', {\n              cancelable: false,\n              bubbles: false, // DOM 'focus' and 'blur' don't bubble\n            })\n          );\n        },\n        onKeystroke: (\n          _sender: Mathfield,\n          keystroke: string,\n          ev: KeyboardEvent\n        ): boolean => {\n          return this.dispatchEvent(\n            new CustomEvent<KeystrokeEvent>('keystroke', {\n              detail: {\n                keystroke,\n                event: ev,\n              },\n              cancelable: true,\n              bubbles: true,\n            })\n          );\n        },\n        onModeChange: (_sender: Mathfield, _mode: ParseMode) => {\n          this.dispatchEvent(\n            new Event('mode-change', {\n              cancelable: false,\n              bubbles: true,\n            })\n          );\n        },\n        onCommit: (_sender: Mathfield) => {\n          // Match the DOM event sent by `<input>`, `<textarea>`, etc...\n          // Sent when the [Return] or [Enter] key is pressed, or on\n          // focus loss if the content has changed.\n          this.dispatchEvent(\n            new Event('change', {\n              cancelable: false,\n              bubbles: true,\n            })\n          );\n        },\n        onMoveOutOf: (\n          _sender: Mathfield,\n          direction: 'forward' | 'backward' | 'upward' | 'downward'\n        ): boolean => {\n          return this.dispatchEvent(\n            new CustomEvent<FocusOutEvent>('focus-out', {\n              detail: { direction },\n              cancelable: true,\n              bubbles: true,\n            })\n          );\n        },\n        onTabOutOf: (\n          _sender: Mathfield,\n          direction: 'forward' | 'backward'\n        ): boolean => {\n          return this.dispatchEvent(\n            new CustomEvent<FocusOutEvent>('focus-out', {\n              detail: { direction },\n              cancelable: true,\n              bubbles: true,\n            })\n          );\n        },\n        onReadAloudStatus: () => {\n          this.dispatchEvent(\n            new Event('read-aloud-status-change', {\n              cancelable: false,\n              bubbles: true,\n            })\n          );\n        },\n        onSelectionDidChange: () => {\n          this.dispatchEvent(\n            new Event('selection-change', {\n              cancelable: false,\n              bubbles: true,\n            })\n          );\n        },\n        onUndoStateDidChange: () => {\n          this.dispatchEvent(\n            new Event('undo-state-change', {\n              cancelable: false,\n              bubbles: true,\n            })\n          );\n        },\n        ...getOptionsFromAttributes(this),\n        ...(gDeferredState.has(this) ? gDeferredState.get(this).options : {}),\n      }\n    );\n\n    this.upgradeProperty('disabled');\n\n    // The mathfield creation could have failed\n    if (!this._mathfield || !this._mathfield.model) {\n      this._mathfield = null;\n      return;\n    }\n\n    // This._mathfield.field.parentElement.addEventListener(\n    //     'focus',\n    //     (_event) => this._mathfield.focus(),\n    //     true\n    // );\n    // this._mathfield.field.parentElement.addEventListener(\n    //     'blur',\n    //     (_event) => this._mathfield.blur(),\n    //     true\n    // );\n\n    if (gDeferredState.has(this)) {\n      this._mathfield.model.deferNotifications(\n        { content: false, selection: false },\n        () => {\n          this._mathfield.setValue(gDeferredState.get(this).value);\n          this._mathfield.selection = gDeferredState.get(this).selection;\n          gDeferredState.delete(this);\n        }\n      );\n    }\n\n    const slot = this.shadowRoot.querySelector<HTMLSlotElement>(\n      'slot:not([name])'\n    );\n    slot.addEventListener('slotchange', (event) => {\n      if (event.target !== slot) return;\n      const value = slot\n        .assignedNodes()\n        .map((x) => (x.nodeType === 3 ? x.textContent : ''))\n        .join('')\n        .trim();\n      if (value === this._slotValue) return;\n      if (!this._mathfield) {\n        this.value = value;\n      } else {\n        // Don't suppress notification changes. We need to know\n        // if the value has changed indirectly through slot manipulation\n        this._mathfield.setValue(value);\n      }\n    });\n\n    // Notify listeners that we're mounted and ready\n    this.dispatchEvent(\n      new Event('mount', {\n        cancelable: false,\n        bubbles: true,\n      })\n    );\n  }\n\n  /**\n   * Custom elements lifecycle hooks\n   * @internal\n   */\n  disconnectedCallback(): void {\n    // Notify listeners that we're about to be unmounted\n    this.dispatchEvent(\n      new Event('unmount', {\n        cancelable: false,\n        bubbles: true,\n      })\n    );\n\n    if (!this._mathfield) return;\n\n    // Save the state (in case the elements get reconnected later)\n    const options = {};\n    Object.keys(MathfieldElement.optionsAttributes).forEach((x) => {\n      options[toCamelCase(x)] = this._mathfield.getOption(\n        toCamelCase(x) as any\n      );\n    });\n    gDeferredState.set(this, {\n      value: this._mathfield.getValue(),\n      selection: this._mathfield.selection,\n      options,\n    });\n\n    // Dispose of the mathfield\n    this._mathfield.dispose();\n    this._mathfield = null;\n  }\n\n  /**\n   * Private lifecycle hooks\n   * @internal\n   */\n  upgradeProperty(prop: string): void {\n    if (this.hasOwnProperty(prop)) {\n      const value: unknown = this[prop];\n      // A property may have already been set on the object, before\n      // the element was connected: delete the property (after saving its value)\n      // and use the setter to (re-)set its value.\n      delete this[prop];\n      this[prop] = value;\n    }\n  }\n\n  /**\n   * Custom elements lifecycle hooks\n   * @internal\n   */\n  attributeChangedCallback(\n    name: string,\n    oldValue: unknown,\n    newValue: unknown\n  ): void {\n    if (oldValue === newValue) return;\n    const hasValue: boolean = newValue !== null;\n    switch (name) {\n      case 'disabled':\n        this.disabled = hasValue;\n        break;\n      default:\n    }\n  }\n\n  get disabled(): boolean {\n    return this.hasAttribute('disabled');\n  }\n\n  set disabled(value: boolean) {\n    const isDisabled = Boolean(value);\n    if (isDisabled) this.setAttribute('disabled', '');\n    else this.removeAttribute('disabled');\n\n    this.setAttribute('aria-disabled', isDisabled ? 'true' : 'false');\n    this.setOptions({ readOnly: isDisabled });\n  }\n\n  /**\n   * The content of the mathfield as a Latex expression.\n   * ```\n   * document.querySelector('mf').value = '\\\\frac{1}{\\\\pi}'\n   * ```\n   *  @category Accessing and changing the content\n   */\n  get value(): string {\n    return this.getValue();\n  }\n\n  /**\n   *  @category Accessing and changing the content\n   */\n  set value(value: string) {\n    this.setValue(value);\n  }\n\n  /**\n   * An array of ranges representing the selection.\n   *\n   * It is guaranteed there will be at least one element. If a discontinuous\n   * selection is present, the result will include more than one element.\n   *\n   * @category Selection\n   *\n   */\n  get selection(): Selection {\n    if (this._mathfield) {\n      return this._mathfield.selection;\n    }\n\n    if (gDeferredState.has(this)) {\n      return gDeferredState.get(this).selection;\n    }\n\n    return { ranges: [[0, 0]], direction: 'forward' };\n  }\n\n  /**\n   *\n   * @category Selection\n   */\n  set selection(value: Selection) {\n    if (this._mathfield) {\n      this._mathfield.selection = value;\n    }\n\n    if (gDeferredState.has(this)) {\n      gDeferredState.set(this, {\n        value: gDeferredState.get(this).value,\n        selection: value,\n        options: gDeferredState.get(this).options,\n      });\n      return;\n    }\n\n    gDeferredState.set(this, {\n      value: '',\n      selection: value,\n      options: getOptionsFromAttributes(this),\n    });\n  }\n\n  /**\n   * The position of the caret/insertion point, from 0 to `lastOffset`.\n   *\n   * @category Selection\n   *\n   */\n  get position(): Offset {\n    return this._mathfield.model.position;\n  }\n\n  /**\n   * @category Selection\n   */\n  set position(offset: Offset) {\n    this._mathfield.model.position = offset;\n  }\n\n  /**\n   * The last valid offset.\n   * @category Selection\n   */\n  get lastOffset(): Offset {\n    return this._mathfield?.lastOffset ?? -1;\n  }\n}\n\nfunction toCamelCase(s: string): string {\n  return s.toLowerCase().replace(/[^a-zA-Z\\d]+(.)/g, (m, c) => c.toUpperCase());\n}\n\nfunction reflectAttributes(element: MathfieldElement) {\n  const defaultOptions = getDefaultOptions();\n  const options = element.getOptions();\n  Object.keys(MathfieldElement.optionsAttributes).forEach((x) => {\n    const prop = toCamelCase(x);\n    if (defaultOptions[prop] !== options[prop]) {\n      if (MathfieldElement.optionsAttributes[x] === 'boolean') {\n        if (options[prop]) {\n          // Add attribute\n          element.setAttribute(x, '');\n        } else {\n          // Remove attribute\n          element.removeAttribute(x);\n        }\n      } else {\n        // Set attribute (as string)\n        element.setAttribute(x, options[prop].toString());\n      }\n    }\n  });\n}\n\n// Function toKebabCase(s: string): string {\n//     return s\n//         .match(\n//             /[A-Z]{2,}(?=[A-Z][a-z]+[0-9]*|\\b)|[A-Z]?[a-z]+[0-9]*|[A-Z]|[0-9]+/g\n//         )\n//         .map((x: string) => x.toLowerCase())\n//         .join('-');\n// }\n\nfunction getOptionsFromAttributes(\n  mfe: MathfieldElement\n): Partial<MathfieldOptions> {\n  const result = {};\n  const attribs = MathfieldElement.optionsAttributes;\n  Object.keys(attribs).forEach((x) => {\n    if (mfe.hasAttribute(x)) {\n      const value = mfe.getAttribute(x);\n      if (attribs[x] === 'boolean') {\n        result[toCamelCase(x)] = true;\n      } else if (attribs[x] === 'number') {\n        result[toCamelCase(x)] = Number.parseFloat(value);\n      } else {\n        result[toCamelCase(x)] = value;\n      }\n    } else if (attribs[x] === 'boolean') {\n      result[toCamelCase(x)] = false;\n    }\n  });\n  return result;\n}\n\nexport default MathfieldElement;\n\ndeclare global {\n  /** @internal */\n  interface Window {\n    MathfieldElement: typeof MathfieldElement;\n  }\n}\n\nif (!window.customElements?.get('math-field')) {\n  window.MathfieldElement = MathfieldElement;\n  window.customElements?.define('math-field', MathfieldElement);\n}\n","/* eslint-disable no-new */\nimport type { Mathfield } from './public/mathfield';\nimport type {\n  MathfieldOptions,\n  RemoteVirtualKeyboardOptions,\n  TextToSpeechOptions,\n} from './public/options';\nimport type {\n  ErrorListener,\n  ParserErrorCode,\n  MathfieldErrorCode,\n} from './public/core';\n\nimport { Atom } from './core/atom-class';\nimport { parseLatex } from './core/parser';\nimport { coalesce, makeStruts, Span } from './core/span';\nimport { MACROS, MacroDictionary } from './core-definitions/definitions';\nimport { MathfieldPrivate } from './editor-mathfield/mathfield-private';\nimport AutoRender, { AutoRenderOptionsPrivate } from './addons/auto-render';\nimport {\n  MathJsonLatexOptions,\n  MathJson,\n  atomtoMathJson,\n  jsonToLatex,\n} from './addons/math-json';\nimport MathLiveDebug, {\n  asciiMathToLatex,\n  latexToAsciiMath,\n} from './addons/debug';\nimport { MATHSTYLES } from './core/mathstyle';\nimport { defaultSpeakHook } from './editor/speech';\nimport {\n  defaultReadAloudHook,\n  readAloudStatus,\n  pauseReadAloud,\n  resumeReadAloud,\n  playReadAloud,\n} from './editor/speech-read-aloud';\nimport { atomToSpeakableText } from './editor/atom-to-speakable-text';\nimport { atomsToMathML } from './addons/math-ml';\n\nimport './addons/definitions-metadata';\n\nimport './editor/virtual-keyboard-commands';\nimport { RemoteVirtualKeyboard } from './editor-mathfield/remote-virtual-keyboard';\nimport { Context } from './core/context';\n\nexport { MathfieldElement } from './public/mathfield-element';\n\nexport function makeMathField(\n  element: HTMLElement,\n  options: Partial<MathfieldOptions> = {}\n): Mathfield {\n  options.speakHook = options.speakHook ?? defaultSpeakHook;\n  options.readAloudHook = options.readAloudHook ?? defaultReadAloudHook;\n  return new MathfieldPrivate(getElement(element), options);\n}\n\nexport function makeSharedVirtualKeyboard(\n  options: Partial<RemoteVirtualKeyboardOptions>\n): void {\n  new RemoteVirtualKeyboard(options);\n}\n\nexport function convertLatexToMarkup(\n  text: string,\n  options?: {\n    mathstyle?: 'displaystyle' | 'textstyle';\n    letterShapeStyle?: 'tex' | 'french' | 'iso' | 'upright' | 'auto';\n    macros?: MacroDictionary;\n    onError?: ErrorListener<ParserErrorCode>;\n    format?: string;\n  }\n): string {\n  options = options ?? {};\n  options.mathstyle = options.mathstyle ?? 'displaystyle';\n  options.letterShapeStyle = options.letterShapeStyle ?? 'auto';\n  options.macros = { ...MACROS, ...(options.macros ?? {}) };\n\n  //\n  // 1. Parse the formula and return a tree of atoms, e.g. 'genfrac'.\n  //\n\n  const root = new Atom('root', { mode: 'math' });\n  root.body = parseLatex(\n    text,\n    'math',\n    null,\n    options.macros,\n    false,\n    options.onError\n  );\n  //\n  // 2. Transform the math atoms into elementary spans\n  //    for example from genfrac to vlist.\n  //    Simplify by coalescing adjacent nodes\n  //    for example, from <span>1</span><span>2</span>\n  //    to <span>12</span>\n  //\n  const span = coalesce(\n    root.render(\n      new Context({\n        mathstyle: MATHSTYLES[options.mathstyle],\n        letterShapeStyle: options.letterShapeStyle,\n        renderPlaceholder: (_context: Context) => new Span(null),\n      })\n    )\n  );\n\n  //\n  // 4. Wrap the expression with struts\n  //\n  const wrapper = makeStruts(span, { classes: 'ML__mathlive' });\n\n  //\n  // 5. Generate markup\n  //\n\n  return wrapper.toMarkup({ hscale: 1 });\n}\n\nexport function convertLatexToMathMl(\n  latex: string,\n  options: Partial<{\n    macros: MacroDictionary;\n    onError: ErrorListener<ParserErrorCode>;\n    generateID: boolean;\n  }> = {}\n): string {\n  options.macros = { ...MACROS, ...(options.macros ?? {}) };\n\n  return atomsToMathML(\n    parseLatex(latex, 'math', [], options.macros, false, options.onError),\n    options\n  );\n}\n\n/** @deprecated */\nfunction latexToMathML(\n  latex: string,\n  options?: Partial<{\n    macros: MacroDictionary;\n    onError: ErrorListener<ParserErrorCode>;\n    generateID: boolean;\n  }>\n): string {\n  return convertLatexToMathMl(latex, options);\n}\n\n/** @deprecated Use MathJSON */\nfunction latexToAST(\n  latex: string,\n  options?: MathJsonLatexOptions & {\n    macros?: MacroDictionary;\n    onError?: ErrorListener<ParserErrorCode | string>;\n  }\n): MathJson {\n  options = options ?? {};\n  options.macros = { ...MACROS, ...(options.macros ?? {}) };\n\n  // Return parseLatex(latex, options);\n\n  return atomtoMathJson(\n    parseLatex(latex, 'math', null, options.macros, false, options.onError),\n    options\n  );\n}\n\n/** @deprecated Use MathJSON */\nexport function astToLatex(\n  expr: MathJson,\n  options: MathJsonLatexOptions\n): string {\n  return jsonToLatex(\n    typeof expr === 'string' ? JSON.parse(expr) : expr,\n    options\n  );\n  // Return emitLatex(expr, options);\n}\n\nexport function convertLatexToSpeakableText(\n  latex: string,\n  options: Partial<\n    TextToSpeechOptions & {\n      macros?: MacroDictionary;\n      onError?: ErrorListener<ParserErrorCode | MathfieldErrorCode>;\n    }\n  > = {}\n): string {\n  options.macros = options.macros ?? {};\n  Object.assign(options.macros, MACROS);\n\n  const atoms = parseLatex(\n    latex,\n    'math',\n    null,\n    options.macros,\n    false,\n    options.onError\n  );\n\n  return atomToSpeakableText(atoms, options as Required<TextToSpeechOptions>);\n}\n\n/** @deprecated */\nfunction latexToSpeakableText(\n  latex: string,\n  options?: Partial<\n    TextToSpeechOptions & {\n      macros?: MacroDictionary;\n      onError?: ErrorListener<ParserErrorCode | MathfieldErrorCode>;\n    }\n  >\n): string {\n  return convertLatexToSpeakableText(latex, options);\n}\n\nexport function renderMathInDocument(options: AutoRenderOptionsPrivate): void {\n  renderMathInElement(document.body, options);\n}\n\nfunction getElement(element: string | HTMLElement): HTMLElement {\n  if (typeof element === 'string') {\n    const result: HTMLElement = document.getElementById(element);\n    if (result === null) {\n      throw new Error(`The element with ID \"${element}\" could not be found.`);\n    }\n\n    return result;\n  }\n\n  return element;\n}\n\nexport function renderMathInElement(\n  element: HTMLElement,\n  options: AutoRenderOptionsPrivate\n): void {\n  options = options ?? {};\n  options.renderToMarkup = options.renderToMarkup ?? convertLatexToMarkup;\n  options.renderToMathML = options.renderToMathML ?? convertLatexToMathMl;\n  options.renderToSpeakableText =\n    options.renderToSpeakableText ?? convertLatexToSpeakableText;\n  options.macros = options.macros ?? MACROS;\n  AutoRender.renderMathInElement(getElement(element), options);\n}\n\nfunction validateNamespace(options): void {\n  if (typeof options.namespace === 'string') {\n    if (!/^[a-z]+-?$/.test(options.namespace)) {\n      throw new Error(\n        'options.namespace must be a string of lowercase characters only'\n      );\n    }\n\n    if (!options.namespace.endsWith('-')) {\n      options.namespace += '-';\n    }\n  }\n}\n\n/** @deprecated */\nfunction revertToOriginalContent(\n  element: string | HTMLElement,\n  options: AutoRenderOptionsPrivate\n): void {\n  deprecatedDefaultImport('revertToOriginalContent');\n  //  If (element instanceof MathfieldPrivate) {\n  //      element.$revertToOriginalContent();\n  //    } else {\n  // element is a pair: accessible span, math -- set it to the math part\n  element = getElement(element).children[1] as HTMLElement;\n  options = options ?? {};\n  validateNamespace(options);\n  const html = element.getAttribute(\n    'data-' + (options.namespace ?? '') + 'original-content'\n  );\n  element.innerHTML =\n    typeof options.createHTML === 'function' ? options.createHTML(html) : html;\n  //  }\n}\n\n/** @deprecated */\nfunction getOriginalContent(\n  element: string | HTMLElement,\n  options: AutoRenderOptionsPrivate\n): string {\n  deprecatedDefaultImport('getOriginalContent');\n  if (element instanceof MathfieldPrivate) {\n    return element.originalContent;\n  }\n\n  // Element is a pair: accessible span, math -- set it to the math part\n  element = getElement(element).children[1] as HTMLElement;\n  options = options ?? {};\n  validateNamespace(options);\n  return element.getAttribute(\n    'data-' + (options.namespace ?? '') + 'original-content'\n  );\n}\n\n// This SDK_VERSION variable will be replaced during the build process.\nconst version = '{{SDK_VERSION}}';\n\nfunction deprecated(method: string, remedy: string) {\n  console.warn(`\"${method}\" is deprecated. \n${remedy ?? ''}`);\n}\n\nfunction deprecatedDefaultImport(method: string) {\n  console.warn(`Using \"${method}\" as a default import is deprecated.\nInstead of\n    import Mathlive from 'mathlive';\n    ${method}(...);\nuse\n   import ${method} from 'mathlive;\n   ${method}(...)  \n`);\n}\n\nexport const debug = {\n  // getStyle: MathLiveDebug.getStyle,\n  getType: MathLiveDebug.getType,\n  // spanToString: MathLiveDebug.spanToString,\n  // hasClass: MathLiveDebug.hasClass,\n  latexToAsciiMath,\n  asciiMathToLatex,\n  FUNCTIONS: MathLiveDebug.FUNCTIONS,\n  MATH_SYMBOLS: MathLiveDebug.MATH_SYMBOLS,\n  TEXT_SYMBOLS: MathLiveDebug.TEXT_SYMBOLS,\n  ENVIRONMENTS: MathLiveDebug.ENVIRONMENTS,\n  MACROS: MathLiveDebug.MACROS,\n  DEFAULT_KEYBINDINGS: MathLiveDebug.DEFAULT_KEYBINDINGS,\n  getKeybindingMarkup: MathLiveDebug.getKeybindingMarkup,\n};\n\nexport default {\n  version: (): string => {\n    deprecatedDefaultImport('version');\n    return version;\n  },\n  latexToMarkup: (\n    text: string,\n    options?: {\n      mathstyle?: 'displaystyle' | 'textstyle';\n      letterShapeStyle?: 'tex' | 'french' | 'iso' | 'upright' | 'auto';\n      macros?: MacroDictionary;\n      onError?: ErrorListener<ParserErrorCode>;\n      format?: string;\n    }\n  ): string => {\n    deprecatedDefaultImport('latexToMarkup');\n    return convertLatexToMarkup(text, options);\n  },\n  latexToMathML: (\n    latex: string,\n    options?: Partial<{\n      macros: MacroDictionary;\n      onError: ErrorListener<ParserErrorCode>;\n      generateID: boolean;\n    }>\n  ): string => {\n    deprecatedDefaultImport('latexToMathML');\n    return latexToMathML(latex, options);\n  },\n  latexToSpeakableText: (\n    latex: string,\n    options: Partial<\n      TextToSpeechOptions & {\n        macros?: MacroDictionary;\n        onError?: ErrorListener<ParserErrorCode | MathfieldErrorCode>;\n      }\n    >\n  ): string => {\n    deprecatedDefaultImport('latexToSpeakableText');\n    return latexToSpeakableText(latex, options);\n  },\n  latexToAST: (\n    latex: string,\n    options?: MathJsonLatexOptions & {\n      macros?: MacroDictionary;\n      onError?: ErrorListener<ParserErrorCode | string>;\n    }\n  ): string => {\n    deprecated('latexToAST', 'Use MathJSON.');\n    return latexToAST(latex, options);\n  },\n  astToLatex: (expr: MathJson, options: MathJsonLatexOptions): string => {\n    deprecated('astToLatex', 'Use MathJSON.');\n    return astToLatex(expr, options);\n  },\n  makeMathField: (\n    element: HTMLElement,\n    options: Partial<MathfieldOptions>\n  ): Mathfield => {\n    deprecatedDefaultImport('makeMathField');\n    return makeMathField(element, options);\n  },\n  renderMathInDocument: (options?: AutoRenderOptionsPrivate): void => {\n    deprecatedDefaultImport('renderMathInDocument');\n    renderMathInDocument(options);\n  },\n  renderMathInElement: (\n    element: HTMLElement,\n    options: AutoRenderOptionsPrivate\n  ): void => {\n    deprecatedDefaultImport('renderMathInElement');\n    renderMathInElement(element, options);\n  },\n  revertToOriginalContent: (\n    element: string | HTMLElement,\n    options: AutoRenderOptionsPrivate\n  ): void => {\n    deprecatedDefaultImport('revertToOriginalContent');\n    revertToOriginalContent(element, options);\n  },\n  getOriginalContent: (\n    element: string | HTMLElement,\n    options: AutoRenderOptionsPrivate\n  ): void => {\n    deprecatedDefaultImport('getOriginalContent');\n    getOriginalContent(element, options);\n  },\n\n  readAloud: (\n    element: HTMLElement,\n    text: string,\n    config: Partial<MathfieldOptions>\n  ): void => {\n    deprecatedDefaultImport('readAloud');\n    return defaultReadAloudHook(element, text, config);\n  },\n  readAloudStatus: (): string => {\n    deprecatedDefaultImport('readAloudStatus');\n    return readAloudStatus();\n  },\n  pauseReadAloud: (): void => {\n    deprecatedDefaultImport('pauseReadAloud');\n    pauseReadAloud();\n  },\n  resumeReadAloud: (): void => {\n    deprecatedDefaultImport('resumeReadAloud');\n    resumeReadAloud();\n  },\n  playReadAloud: (token: string, count: number): void => {\n    deprecatedDefaultImport('playReadAloud');\n    playReadAloud(token, count);\n  },\n};\n"],"names":["toString","FONTMETRICS","spanHeight","spanDepth","skew","spanSkew","height","depth","isNumber","SPECIAL_OPERATORS","scanText","platform","register","latexToMarkup","registerCommand","applyStyle","convertStringToAtoms","applyStyleToModel","l10n","l10nOptions","injectStylesheet","virtualKeyboardStylesheet","coreStylesheet","updateOptions","getDefaultOptions","mathfieldStylesheet","popoverStylesheet","keystrokeCaptionStylesheet","deprecated","getOptions","renderMathInElement","MathLiveDebug"],"mappings":"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C,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,MAAM,EAAE,CAAC,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,MAAM,EAAE,CAAC,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,MAAM,EAAE,CAAC,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,MAAM,EAAE,CAAC,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,MAAM,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC;QAC7B,MAAM,EAAE,CAAC,MAAM,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC;QAC7B,MAAM,EAAE,CAAC,MAAM,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC;QAC7B,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,MAAM,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC;QAC7B,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,MAAM,EAAE,CAAC,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,MAAM,EAAE,CAAC,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,MAAM,EAAE,CAAC,CAAC,KAAK,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC;QAC7B,MAAM,EAAE,CAAC,CAAC,KAAK,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC;QAC7B,MAAM,EAAE,CAAC,CAAC,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,MAAM,EAAE,CAAC,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,MAAM,EAAE,CAAC,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,MAAM,EAAE,CAAC,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,MAAM,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC;QAC7B,MAAM,EAAE,CAAC,MAAM,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC;QAC7B,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,CAAC,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,MAAM,EAAE,CAAC,CAAC,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,MAAM,EAAE,CAAC,CAAC,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,MAAM,EAAE,CAAC,CAAC,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,MAAM,EAAE,MAAM,EAAE,CAAC,EAAE,CAAC,CAAC;QAC9B,MAAM,EAAE,CAAC,MAAM,EAAE,MAAM,EAAE,CAAC,EAAE,CAAC,CAAC;QAC9B,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,CAAC,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,MAAM,EAAE,CAAC,CAAC,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,OAAO,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC3B,OAAO,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC3B,OAAO,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,OAAO,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,OAAO,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,OAAO,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,OAAO,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,OAAO,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,OAAO,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,OAAO,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,OAAO,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,OAAO,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,OAAO,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,OAAO,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,OAAO,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,OAAO,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,OAAO,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,OAAO,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,OAAO,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,OAAO,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,OAAO,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,OAAO,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,OAAO,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,OAAO,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,OAAO,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,OAAO,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,OAAO,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,OAAO,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,OAAO,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,OAAO,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QACjC,OAAO,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,OAAO,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,OAAO,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,OAAO,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,OAAO,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,OAAO,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,OAAO,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,OAAO,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,OAAO,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,OAAO,EAAE,CAAC,OAAO,EAAE,OAA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I,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC/B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC/B,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,OAAO,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC3B,OAAO,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC3B,OAAO,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,OAAO,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,OAAO,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,OAAO,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC3B,OAAO,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC3B,OAAO,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;KAC5B;IACD,WAAW,EAAE;QACX,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,OAAO,EAAE,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC;QAC3B,IAAI,EAAE,CAAC,OAAO,EAAE,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC;QAC3B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,IAAI,EAAE,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,IAAI,EAAE,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC;QACrB,IAAI,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,IAAI,EAAE,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC/B,IAAI,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,IAAI,EAAE,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,IAAI,EAAE,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,IAAI,EAAE,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,IAAI,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QACjC,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QACrC,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QACrC,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,IAAI,EAAE,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,IAAI,EAAE,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,IAAI,EAAE,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,IAAI,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC5B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,OAAO,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,MAAM,EAAE,CAAC,IAAI,EAAE,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,MAAM,EAAE,CAAC,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,MAAM,EAAE,CAAC,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,MAAM,EAAE,CAAC,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,MAAM,EAAE,CAAC,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,MAAM,EAAE,CAAC,IAAI,EAAE,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,OAAO,EAAE,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC;QAC7B,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,IAAI,EAAE,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,IAAI,EAAE,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,MAAM,EAAE,CAAC,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,MAAM,EAAE,CAAC,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,MAAM,EAAE,CAAC,IAAI,EAAE,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,IAAI,EAAE,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,IAAI,EAAE,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QACtC,MAAM,EAAE,CAAC,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,MAAM,EAAE,CAAC,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,MAAM,EAAE,CAAC,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,MAAM,EAAE,CAAC,IAAI,EAAE,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,IAAI,EAAE,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,IAAI,EAAE,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,IAAI,EAAE,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,MAAM,EAAE,CAAC,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACjC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,CAAC,EAAE,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC;QACvB,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,O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CAAC,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QACrC,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QACrC,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,KAAK,EAAE,CAAC,CAAC;QAC7B,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QACrC,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,KAAK,EAAE,CAAC,CAAC;QAC7B,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QACrC,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,MAAM,EAAE,CAAC,CAAC;QAC9B,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;KACjC;IACD,aAAa,EAAE;QACb,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QACpC,IAAI,EAAE,CAAC,OAAO,EAAE,IAAI,EAAE,OAAO,EAAE,CAAC,CAAC;QACjC,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,IAAI,EAAE,IAAI,EAAE,OAAO,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,IAAI,EAAE,IAAI,EAAE,OAAO,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,IAAI,EAAE,OAAO,EAAE,CAAC,CAAC;QAC3B,IAAI,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QACpC,IAAI,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,IAAI,EAAE,IAAI,EAAE,OAAO,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QACpC,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QACpC,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CA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AE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QACrC,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QACrC,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,MAAM,EAAE,CAAC,CAAC;QAC9B,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QACrC,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QACrC,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QACrC,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QACrC,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,IAAI,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAClC,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,OAAO,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QACrC,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QACrC,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QACrC,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,OAAO,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,OAAO,CAAC;QACrC,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,MAAM,EAAE,CAAC,CAAC;QAC9B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,MAAM,EAAE,CAAC,CAAC;QAC/B,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;KAC3B;IACD,cAAc,EAAE;QACd,IAAI,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;QAClB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,OAAO,EAAE,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC;QAC3B,IAAI,EAAE,CAAC,OAAO,EAAE,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC;QAC3B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,IAAI,EAAE,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,IAAI,EAAE,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC;QACrB,IAAI,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,IAAI,EAAE,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,MAAM,EAAE,MAAM,EAAE,CAAC,EAAE,CAAC,CAAC;QAC5B,IAAI,EAAE,CAAC,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC/B,IAAI,EAAE,CAAC,MAAM,EAAE,MAAM,EAAE,CAAC,EAAE,CAAC,CAAC;QAC5B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,KAAK,EAAE,CAAC,CAAC;QAC5B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,IAAI,EAAE,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,IAAI,EAAE,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,IAAI,EAAE,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,IAAI,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QACjC,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QACrC,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QACrC,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,IAAI,EAAE,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,IAAI,EAAE,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,IAAI,EAAE,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,IAAI,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC5B,KAAK,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;QACnB,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,OAAO,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,O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,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,MAAM,EAAE,MAAM,EAAE,CAAC,EAAE,CAAC,CAAC;QAC9B,MAAM,EAAE,CAAC,MAAM,EAAE,MAAM,EAAE,CAAC,EAAE,CAAC,CAAC;QAC9B,MAAM,EAAE,CAAC,MAAM,EAAE,MAAM,EAAE,CAAC,EAAE,CAAC,CAAC;QAC9B,MAAM,EAAE,CAAC,MAAM,EAAE,MAAM,EAAE,CAAC,EAAE,CAAC,CAAC;QAC9B,MAAM,EAAE,CAAC,MAAM,EAAE,MAAM,EAAE,CAAC,EAAE,CAAC,CAAC;QAC9B,MAAM,EAAE,CAAC,MAAM,EAAE,MAAM,EAAE,CAAC,EAAE,CAAC,CAAC;QAC9B,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE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I,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QACrC,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QACrC,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,MAAM,EAAE,CAAC,CAAC;QACpC,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,MAAM,EAAE,CAAC,CAAC;QAC9B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QACrC,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QACrC,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QACrC,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QACrC,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QACrC,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QACrC,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QACrC,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QACrC,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QACrC,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,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AAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,OAAO,CAAC;QACrC,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,OAAO,CAAC;QAC/B,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,OAAO,CAAC;QACrC,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,OAAO,CAAC;QAC3C,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,OAAO,CAAC;QACrC,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,OAAO,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,OAAO,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,OAAO,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,OAAO,CAAC;QACrC,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,OAAO,CAAC;QACrC,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,OAAO,CAAC;QAC/B,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,OAAO,CAAC;QAC3C,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,OAAO,CAAC;QACrC,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,OAAO,CAAC;QACrC,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,OAAO,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,OAAO,CAAC;QACrC,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,OAAO,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,O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,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,OAAO,EAAE,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC;QAC3B,IAAI,EAAE,CAAC,OAAO,EAAE,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC;QAC3B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,IAAI,EAAE,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,IAAI,EAAE,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC;QACrB,IAAI,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,IAAI,EAAE,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC/B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,MAAM,EAAE,CAAC,CAAC;QAC7B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,IAAI,EAAE,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,IAAI,EAAE,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,IAAI,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QACjC,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QACrC,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QACrC,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,IAAI,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC5B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,OAAO,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,E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,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,KAAK,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAClC,IAAI,EAAE,CAAC,CAAC,IAAI,EAAE,IAAI,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC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C,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,KAAK,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC5B,IAAI,EAAE,CAAC,CAAC,IAAI,EAAE,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,KAAK,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC5B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,KAAK,EAAE,CAAC,CAAC;QAC5B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,IAAI,EAAE,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,IAAI,EAAE,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,IAAI,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QACjC,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QACrC,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QACrC,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,IAAI,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC5B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,OAAO,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QAChC,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,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EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC/B,IAAI,EAAE,CAAC,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC/B,IAAI,EAAE,CAAC,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC/B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC9B,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,OAAO,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACxB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;QACnB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,OAAO,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC/B,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QACzB,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1B,MAAM,EAAE,CAAC,CAAC,EAAE,OA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AClB,QAAQ,EAAE,QAAQ;;IAElB,GAAG,EAAE,GAAG;IACR,GAAG,EAAE,GAAG;IACR,GAAG,EAAE,GAAG;IACR,GAAG,EAAE,GAAG;IACR,GAAG,EAAE,GAAG;IACR,GAAG,EAAE,GAAG;IACR,GAAG,EAAE,GAAG;IACR,GAAG,EAAE,GAAG;;IAGR,GAAG,EAAE,GAAG;IACR,GAAG,EAAE,GAAG;IACR,GAAG,EAAE,GAAG;IACR,GAAG,EAAE,GAAG;IACR,GAAG,EAAE,GAAG;IACR,GAAG,EAAE,GAAG;IACR,GAAG,EAAE,GAAG;IACR,GAAG,EAAE,GAAG;IACR,GAAG,EAAE,GAAG;IACR,GAAG,EAAE,GAAG;IACR,GAAG,EAAE,GAAG;IACR,GAAG,EAAE,GAAG;IACR,GAAG,EAAE,GAAG;IACR,GAAG,EAAE,GAAG;IACR,GAAG,EAAE,GAAG;IACR,GAAG,EAAE,GAAG;IACR,GAAG,EAAE,GAAG;IACR,GAAG,EAAE,GAAG;IACR,GAAG,EAAE,GAAG;IACR,GAAG,EAAE,GAAG;IACR,GAAG,EAAE,GAAG;IACR,GAAG,EAAE,GAAG;IACR,GAAG,EAAE,GAAG;IACR,GAAG,EAAE,GAAG;IACR,GAAG,EAAE,GAAG;IACR,GAAG,EAAE,GAAG;IACR,GAAG,EAAE,GAAG;IACR,GAAG,EAAE,GAAG;IACR,GAAG,EAAE,GAAG;IACR,GAAG,EAAE,GAAG;IACR,GAAG,EAAE,GAAG;IACR,GAAG,EAAE,GAAG;IACR,GAAG,EAAE,GAAG;IACR,GAAG,EAAE,GAAG;IACR,GAAG,EAAE,GAAG;IACR,GAAG,EAAE,GAAG;IACR,GAAG,EAAE,GAAG;IACR,GAAG,EAAE,GAAG;IACR,GAAG,EAAE,GAAG;IACR,GAAG,EAAE,GAAG;IACR,GAAG,EAAE,GAAG;IACR,GAAG,EAAE,GAAG;IACR,GAAG,EAAE,GAAG;IACR,GAAG,EAAE,GAAG;IACR,GAAG,EAAE,GAAG;IACR,GAAG,EAAE,GAAG;IACR,GAAG,EAAE,GAAG;IACR,GAAG,EAAE,GAAG;IACR,GAAG,EAAE,GAAG;IACR,GAAG,EAAE,GAAG;IACR,GAAG,EAAE,GA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,GAAG,CAAC;YAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;YAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;YAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;YAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;YAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;YAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;YAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;YAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;YAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;YAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;YAC1B,MAAM,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;YAC5B,MAAM,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;YAC5B,MAAM,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;YAC5B,MAAM,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;YAC5B,MAAM,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;YAC5B,MAAM,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;YAC5B,MAAM,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;YAC5B,MAAM,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;YAC5B,MAAM,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;YAC5B,MAAM,EAAE,CAAC,GAAG,EAAE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E,EAAE,EAAE,CAAC;gBACxB,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,CAAC;gBACxB,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,CAAC;gBACxB,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;gBAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,CAAC;gBACxB,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,CAAC;gBACxB,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;gBAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,CAAC;gBACzB,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;gBAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;gBAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;gBAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;gBAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,CAAC;gBACzB,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;gBAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;gBAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;gBAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,CAAC;gBACxB,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;gBAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,CAAC;gBACxB,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;gBAC1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C,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;gBAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;gBAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;gBAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;gBAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;gBAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;gBAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;gBAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;gBAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;gBAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;gBAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;gBAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;gBAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;gBAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;gBAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;gBAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;gBAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;gBAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;gBAC1B,MAAM,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;gBAC5B,MAAM,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,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E,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC1B,MAAM,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC5B,MAAM,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC5B,MAAM,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC5B,MAAM,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC5B,MAAM,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC5B,MAAM,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC5B,MAAM,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC5B,MAAM,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC5B,MAAM,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC5B,MAAM,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC5B,KAAK,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC3B,KAAK,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC3B,KAAK,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC3B,WAAW,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QACjC,YAAY,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAClC,SAAS,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC/B,SAAS,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC/B,KAAK,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC3B,SAAS,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC/B,KAAK,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC3B,MAAM,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,IAAI,CAAC;QAC7B,KAAK,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC3B,YAAY,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAClC,cAAc,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QACpC,cAAc,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QACpC,SAAS,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC/B,aAAa,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QACnC,aAAa,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QACnC,WAAW,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;KAClC;CACF,CAAC,CAAC;AAEHA,UAAQ,CAAC;IACP,EAAE,EAAE,eAAe;IACnB,MAAM,EAAE,IAAI;IACZ,WAAW,EAAE,aAAa;IAC1B,QAAQ,EAAE,OAAO;IACjB,aAAa,EAAE,QAAQ;IACvB,KAAK,EAAE,CAAC;IACR,OAAO,EAAE;QACP,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,CAAC;QACzB,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC1B,MAAM,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC5B,MAAM,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC5B,MAAM,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC5B,MAAM,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC5B,MAAM,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC5B,MAAM,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC5B,MAAM,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC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,GAAG,EAAE,EAAE,EAAE,EAAE,CAAC;QACxB,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,CAAC;QACxB,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,CAAC;QACxB,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,CAAC;QACxB,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,CAAC;QACxB,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,CAAC;QACxB,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,CAAC;QACxB,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,CAAC;QACxB,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,CAAC;QACxB,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,CAAC;QACxB,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,CAAC;QACxB,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,CAAC;QACxB,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,CAAC;QACxB,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,CAAC;QACxB,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,CAAC;QACxB,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,CAAC;QACxB,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,CAAC;QACxB,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,CAAC;QACxB,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,CAAC;QACxB,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,CAAC;QACxB,IAAI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E,GAAG,EAAE,GAAG,CAAC;QAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC1B,MAAM,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC5B,MAAM,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC5B,MAAM,EAAE,CAA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EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC1B,MAAM,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC5B,MAAM,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC5B,MAAM,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC5B,MAAM,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC5B,MAAM,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC5B,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AG,EAAE,EAAE,EAAE,EAAE,CAAC;QACxB,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,CAAC;QACxB,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,CAAC;QACxB,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,CAAC;QACxB,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,CAAC;QACxB,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,CAAC;QACxB,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,CAAC;QACxB,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,CAAC;QACxB,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,CAAC;QACxB,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,CAAC;QACxB,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,CAAC;QACxB,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,CAAC;QACxB,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,CAAC;QACxB,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,CAAC;QACxB,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,CAAC;QACxB,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,CAAC;QACxB,MAAM,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,CAAC;QAC1B,MAAM,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,CAAC;QAC3B,MAAM,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,CAAC;QAC3B,MAAM,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,CAAC;QAC3B,MAAM,EA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,EAAE,EAAE,EAAE,CAAC;QACxB,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,CAAC;QACxB,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,CAAC;QACxB,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,CAAC;QACzB,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,CAAC;QACxB,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,CAAC;QACxB,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,CAAC;QACxB,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,CAAC;QACxB,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,CAAC;QACxB,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,CAAC;QACxB,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,CAAC;QACxB,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,CAAC;QACxB,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,CAAC;QACxB,MAAM,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,CAAC;QAC1B,MAAM,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,CAAC;QAC3B,MAAM,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,CAAC;QAC3B,MAAM,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,CAAC;QAC1B,MAAM,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,CAAC;QAC1B,MAAM,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,CAAC;QAC1B,MAAM,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,CAAC;QAC3B,MAAM,EAAE,CAAC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E,GAAG,CAAC;QAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC1B,MAAM,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC5B,MAAM,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC5B,MAAM,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC5B,MAAM,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC5B,MAAM,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC5B,MAAM,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC5B,MAAM,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,IAAI,CAAC;QAC7B,MAAM,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC5B,MAAM,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC5B,MAAM,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC5B,KAAK,EAAE,CAAC,GAAG,EAA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;QAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC1B,IAAI,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC1B,MAAM,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC5B,MAAM,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC5B,MAAM,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC5B,MAAM,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC5B,MAAM,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC5B,MAAM,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC5B,MAAM,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC5B,MAAM,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC5B,MAAM,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC5B,MAAM,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC5B,KAAK,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;QAC3B,KAAK,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE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"}