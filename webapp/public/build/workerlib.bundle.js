/*! Copyright ©2013-2018 Memba® Sarl. All rights reserved. - Version 0.3.8 dated 11-Sep-2018 */
!function(){var t="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global||this||{},e=t._,r=Array.prototype,s=Object.prototype,h="undefined"!=typeof Symbol?Symbol.prototype:null,i=r.push,o=r.slice,f=s.toString,u=s.hasOwnProperty,n=Array.isArray,a=Object.keys,c=Object.create,l=function(){},p=function(t){return t instanceof p?t:this instanceof p?void(this._wrapped=t):new p(t)};"undefined"==typeof exports||exports.nodeType?t._=p:("undefined"!=typeof module&&!module.nodeType&&module.exports&&(exports=module.exports=p),exports._=p),p.VERSION="1.9.1";var y,g=function(i,u,t){if(void 0===u)return i;switch(null==t?3:t){case 1:return function(t){return i.call(u,t)};case 3:return function(t,e,n){return i.call(u,t,e,n)};case 4:return function(t,e,n,r){return i.call(u,t,e,n,r)}}return function(){return i.apply(u,arguments)}},d=function(t,e,n){return p.iteratee!==y?p.iteratee(t,e):null==t?p.identity:p.isFunction(t)?g(t,e,n):p.isObject(t)&&!p.isArray(t)?p.matcher(t):p.property(t)};p.iteratee=y=function(t,e){return d(t,e,1/0)};var m=function(i,u){return u=null==u?i.length-1:+u,function(){for(var t=Math.max(arguments.length-u,0),e=Array(t),n=0;n<t;n++)e[n]=arguments[n+u];switch(u){case 0:return i.call(this,e);case 1:return i.call(this,arguments[0],e);case 2:return i.call(this,arguments[0],arguments[1],e)}var r=Array(u+1);for(n=0;n<u;n++)r[n]=arguments[n];return r[u]=e,i.apply(this,r)}},v=function(t){if(!p.isObject(t))return{};if(c)return c(t);l.prototype=t;var e=new l;return l.prototype=null,e},x=function(e){return function(t){return null==t?void 0:t[e]}},E=function(t,e){return null!=t&&u.call(t,e)},b=function(t,e){for(var n=e.length,r=0;r<n;r++){if(null==t)return;t=t[e[r]]}return n?t:void 0},_=Math.pow(2,53)-1,w=x("length"),A=function(t){var e=w(t);return"number"==typeof e&&0<=e&&e<=_};p.each=p.forEach=function(t,e,n){var r,i;if(e=g(e,n),A(t))for(r=0,i=t.length;r<i;r++)e(t[r],r,t);else{var u=p.keys(t);for(r=0,i=u.length;r<i;r++)e(t[u[r]],u[r],t)}return t},p.map=p.collect=function(t,e,n){e=d(e,n);for(var r=!A(t)&&p.keys(t),i=(r||t).length,u=Array(i),s=0;s<i;s++){var a=r?r[s]:s;u[s]=e(t[a],a,t)}return u};var F=function(o){return function(t,e,n,r){var i=3<=arguments.length;return function(t,e,n,r){var i=!A(t)&&p.keys(t),u=(i||t).length,s=0<o?0:u-1;for(r||(n=t[i?i[s]:s],s+=o);0<=s&&s<u;s+=o){var a=i?i[s]:s;n=e(n,t[a],a,t)}return n}(t,g(e,r,4),n,i)}};p.reduce=p.foldl=p.inject=F(1),p.reduceRight=p.foldr=F(-1),p.find=p.detect=function(t,e,n){var r=(A(t)?p.findIndex:p.findKey)(t,e,n);if(void 0!==r&&-1!==r)return t[r]},p.filter=p.select=function(t,r,e){var i=[];return r=d(r,e),p.each(t,function(t,e,n){r(t,e,n)&&i.push(t)}),i},p.reject=function(t,e,n){return p.filter(t,p.negate(d(e)),n)},p.every=p.all=function(t,e,n){e=d(e,n);for(var r=!A(t)&&p.keys(t),i=(r||t).length,u=0;u<i;u++){var s=r?r[u]:u;if(!e(t[s],s,t))return!1}return!0},p.some=p.any=function(t,e,n){e=d(e,n);for(var r=!A(t)&&p.keys(t),i=(r||t).length,u=0;u<i;u++){var s=r?r[u]:u;if(e(t[s],s,t))return!0}return!1},p.contains=p.includes=p.include=function(t,e,n,r){return A(t)||(t=p.values(t)),("number"!=typeof n||r)&&(n=0),0<=p.indexOf(t,e,n)},p.invoke=m(function(t,n,r){var i,u;return p.isFunction(n)?u=n:p.isArray(n)&&(i=n.slice(0,-1),n=n[n.length-1]),p.map(t,function(t){var e=u;if(!e){if(i&&i.length&&(t=b(t,i)),null==t)return;e=t[n]}return null==e?e:e.apply(t,r)})}),p.pluck=function(t,e){return p.map(t,p.property(e))},p.where=function(t,e){return p.filter(t,p.matcher(e))},p.findWhere=function(t,e){return p.find(t,p.matcher(e))},p.max=function(t,r,e){var n,i,u=-1/0,s=-1/0;if(null==r||"number"==typeof r&&"object"!=typeof t[0]&&null!=t)for(var a=0,o=(t=A(t)?t:p.values(t)).length;a<o;a++)null!=(n=t[a])&&u<n&&(u=n);else r=d(r,e),p.each(t,function(t,e,n){i=r(t,e,n),(s<i||i===-1/0&&u===-1/0)&&(u=t,s=i)});return u},p.min=function(t,r,e){var n,i,u=1/0,s=1/0;if(null==r||"number"==typeof r&&"object"!=typeof t[0]&&null!=t)for(var a=0,o=(t=A(t)?t:p.values(t)).length;a<o;a++)null!=(n=t[a])&&n<u&&(u=n);else r=d(r,e),p.each(t,function(t,e,n){((i=r(t,e,n))<s||i===1/0&&u===1/0)&&(u=t,s=i)});return u},p.shuffle=function(t){return p.sample(t,1/0)},p.sample=function(t,e,n){if(null==e||n)return A(t)||(t=p.values(t)),t[p.random(t.length-1)];var r=A(t)?p.clone(t):p.values(t),i=w(r);e=Math.max(Math.min(e,i),0);for(var u=i-1,s=0;s<e;s++){var a=p.random(s,u),o=r[s];r[s]=r[a],r[a]=o}return r.slice(0,e)},p.sortBy=function(t,r,e){var i=0;return r=d(r,e),p.pluck(p.map(t,function(t,e,n){return{value:t,index:i++,criteria:r(t,e,n)}}).sort(function(t,e){var n=t.criteria,r=e.criteria;if(n!==r){if(r<n||void 0===n)return 1;if(n<r||void 0===r)return-1}return t.index-e.index}),"value")};var D=function(s,e){return function(r,i,t){var u=e?[[],[]]:{};return i=d(i,t),p.each(r,function(t,e){var n=i(t,e,r);s(u,t,n)}),u}};p.groupBy=D(function(t,e,n){E(t,n)?t[n].push(e):t[n]=[e]}),p.indexBy=D(function(t,e,n){t[n]=e}),p.countBy=D(function(t,e,n){E(t,n)?t[n]++:t[n]=1});var k=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;p.toArray=function(t){return t?p.isArray(t)?o.call(t):p.isString(t)?t.match(k):A(t)?p.map(t,p.identity):p.values(t):[]},p.size=function(t){return null==t?0:A(t)?t.length:p.keys(t).length},p.partition=D(function(t,e,n){t[n?0:1].push(e)},!0),p.first=p.head=p.take=function(t,e,n){return null==t||t.length<1?null==e?void 0:[]:null==e||n?t[0]:p.initial(t,t.length-e)},p.initial=function(t,e,n){return o.call(t,0,Math.max(0,t.length-(null==e||n?1:e)))},p.last=function(t,e,n){return null==t||t.length<1?null==e?void 0:[]:null==e||n?t[t.length-1]:p.rest(t,Math.max(0,t.length-e))},p.rest=p.tail=p.drop=function(t,e,n){return o.call(t,null==e||n?1:e)},p.compact=function(t){return p.filter(t,Boolean)};var C=function(t,e,n,r){for(var i=(r=r||[]).length,u=0,s=w(t);u<s;u++){var a=t[u];if(A(a)&&(p.isArray(a)||p.isArguments(a)))if(e)for(var o=0,c=a.length;o<c;)r[i++]=a[o++];else C(a,e,n,r),i=r.length;else n||(r[i++]=a)}return r};p.flatten=function(t,e){return C(t,e,!1)},p.without=m(function(t,e){return p.difference(t,e)}),p.uniq=p.unique=function(t,e,n,r){p.isBoolean(e)||(r=n,n=e,e=!1),null!=n&&(n=d(n,r));for(var i=[],u=[],s=0,a=w(t);s<a;s++){var o=t[s],c=n?n(o,s,t):o;e&&!n?(s&&u===c||i.push(o),u=c):n?p.contains(u,c)||(u.push(c),i.push(o)):p.contains(i,o)||i.push(o)}return i},p.union=m(function(t){return p.uniq(C(t,!0,!0))}),p.intersection=function(t){for(var e=[],n=arguments.length,r=0,i=w(t);r<i;r++){var u=t[r];if(!p.contains(e,u)){var s;for(s=1;s<n&&p.contains(arguments[s],u);s++);s===n&&e.push(u)}}return e},p.difference=m(function(t,e){return e=C(e,!0,!0),p.filter(t,function(t){return!p.contains(e,t)})}),p.unzip=function(t){for(var e=t&&p.max(t,w).length||0,n=Array(e),r=0;r<e;r++)n[r]=p.pluck(t,r);return n},p.zip=m(p.unzip),p.object=function(t,e){for(var n={},r=0,i=w(t);r<i;r++)e?n[t[r]]=e[r]:n[t[r][0]]=t[r][1];return n};var S=function(u){return function(t,e,n){e=d(e,n);for(var r=w(t),i=0<u?0:r-1;0<=i&&i<r;i+=u)if(e(t[i],i,t))return i;return-1}};p.findIndex=S(1),p.findLastIndex=S(-1),p.sortedIndex=function(t,e,n,r){for(var i=(n=d(n,r,1))(e),u=0,s=w(t);u<s;){var a=Math.floor((u+s)/2);n(t[a])<i?u=a+1:s=a}return u};var M=function(u,s,a){return function(t,e,n){var r=0,i=w(t);if("number"==typeof n)0<u?r=0<=n?n:Math.max(n+i,r):i=0<=n?Math.min(n+1,i):n+i+1;else if(a&&n&&i)return t[n=a(t,e)]===e?n:-1;if(e!=e)return 0<=(n=s(o.call(t,r,i),p.isNaN))?n+r:-1;for(n=0<u?r:i-1;0<=n&&n<i;n+=u)if(t[n]===e)return n;return-1}};p.indexOf=M(1,p.findIndex,p.sortedIndex),p.lastIndexOf=M(-1,p.findLastIndex),p.range=function(t,e,n){null==e&&(e=t||0,t=0),n||(n=e<t?-1:1);for(var r=Math.max(Math.ceil((e-t)/n),0),i=Array(r),u=0;u<r;u++,t+=n)i[u]=t;return i},p.chunk=function(t,e){if(null==e||e<1)return[];for(var n=[],r=0,i=t.length;r<i;)n.push(o.call(t,r,r+=e));return n};var I=function(t,e,n,r,i){if(!(r instanceof e))return t.apply(n,i);var u=v(t.prototype),s=t.apply(u,i);return p.isObject(s)?s:u};p.bind=m(function(e,n,r){if(!p.isFunction(e))throw new TypeError("Bind must be called on a function");var i=m(function(t){return I(e,i,n,this,r.concat(t))});return i}),p.partial=m(function(i,u){var s=p.partial.placeholder,a=function(){for(var t=0,e=u.length,n=Array(e),r=0;r<e;r++)n[r]=u[r]===s?arguments[t++]:u[r];for(;t<arguments.length;)n.push(arguments[t++]);return I(i,a,this,this,n)};return a}),(p.partial.placeholder=p).bindAll=m(function(t,e){var n=(e=C(e,!1,!1)).length;if(n<1)throw new Error("bindAll must be passed function names");for(;n--;){var r=e[n];t[r]=p.bind(t[r],t)}}),p.memoize=function(r,i){var u=function(t){var e=u.cache,n=""+(i?i.apply(this,arguments):t);return E(e,n)||(e[n]=r.apply(this,arguments)),e[n]};return u.cache={},u},p.delay=m(function(t,e,n){return setTimeout(function(){return t.apply(null,n)},e)}),p.defer=p.partial(p.delay,p,1),p.throttle=function(n,r,i){var u,s,a,o,c=0;i||(i={});var l=function(){c=!1===i.leading?0:p.now(),u=null,o=n.apply(s,a),u||(s=a=null)},t=function(){var t=p.now();c||!1!==i.leading||(c=t);var e=r-(t-c);return s=this,a=arguments,e<=0||r<e?(u&&(clearTimeout(u),u=null),c=t,o=n.apply(s,a),u||(s=a=null)):u||!1===i.trailing||(u=setTimeout(l,e)),o};return t.cancel=function(){clearTimeout(u),c=0,u=s=a=null},t},p.debounce=function(n,r,i){var u,s,a=function(t,e){u=null,e&&(s=n.apply(t,e))},t=m(function(t){if(u&&clearTimeout(u),i){var e=!u;u=setTimeout(a,r),e&&(s=n.apply(this,t))}else u=p.delay(a,r,this,t);return s});return t.cancel=function(){clearTimeout(u),u=null},t},p.wrap=function(t,e){return p.partial(e,t)},p.negate=function(t){return function(){return!t.apply(this,arguments)}},p.compose=function(){var n=arguments,r=n.length-1;return function(){for(var t=r,e=n[r].apply(this,arguments);t--;)e=n[t].call(this,e);return e}},p.after=function(t,e){return function(){if(--t<1)return e.apply(this,arguments)}},p.before=function(t,e){var n;return function(){return 0<--t&&(n=e.apply(this,arguments)),t<=1&&(e=null),n}},p.once=p.partial(p.before,2),p.restArguments=m;var B=!{toString:null}.propertyIsEnumerable("toString"),O=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],N=function(t,e){var n=O.length,r=t.constructor,i=p.isFunction(r)&&r.prototype||s,u="constructor";for(E(t,u)&&!p.contains(e,u)&&e.push(u);n--;)(u=O[n])in t&&t[u]!==i[u]&&!p.contains(e,u)&&e.push(u)};p.keys=function(t){if(!p.isObject(t))return[];if(a)return a(t);var e=[];for(var n in t)E(t,n)&&e.push(n);return B&&N(t,e),e},p.allKeys=function(t){if(!p.isObject(t))return[];var e=[];for(var n in t)e.push(n);return B&&N(t,e),e},p.values=function(t){for(var e=p.keys(t),n=e.length,r=Array(n),i=0;i<n;i++)r[i]=t[e[i]];return r},p.mapObject=function(t,e,n){e=d(e,n);for(var r=p.keys(t),i=r.length,u={},s=0;s<i;s++){var a=r[s];u[a]=e(t[a],a,t)}return u},p.pairs=function(t){for(var e=p.keys(t),n=e.length,r=Array(n),i=0;i<n;i++)r[i]=[e[i],t[e[i]]];return r},p.invert=function(t){for(var e={},n=p.keys(t),r=0,i=n.length;r<i;r++)e[t[n[r]]]=n[r];return e},p.functions=p.methods=function(t){var e=[];for(var n in t)p.isFunction(t[n])&&e.push(n);return e.sort()};var T=function(o,c){return function(t){var e=arguments.length;if(c&&(t=Object(t)),e<2||null==t)return t;for(var n=1;n<e;n++)for(var r=arguments[n],i=o(r),u=i.length,s=0;s<u;s++){var a=i[s];c&&void 0!==t[a]||(t[a]=r[a])}return t}};p.extend=T(p.allKeys),p.extendOwn=p.assign=T(p.keys),p.findKey=function(t,e,n){e=d(e,n);for(var r,i=p.keys(t),u=0,s=i.length;u<s;u++)if(e(t[r=i[u]],r,t))return r};var P,q,R=function(t,e,n){return e in n};p.pick=m(function(t,e){var n={},r=e[0];if(null==t)return n;p.isFunction(r)?(1<e.length&&(r=g(r,e[1])),e=p.allKeys(t)):(r=R,e=C(e,!1,!1),t=Object(t));for(var i=0,u=e.length;i<u;i++){var s=e[i],a=t[s];r(a,s,t)&&(n[s]=a)}return n}),p.omit=m(function(t,n){var e,r=n[0];return p.isFunction(r)?(r=p.negate(r),1<n.length&&(e=n[1])):(n=p.map(C(n,!1,!1),String),r=function(t,e){return!p.contains(n,e)}),p.pick(t,r,e)}),p.defaults=T(p.allKeys,!0),p.create=function(t,e){var n=v(t);return e&&p.extendOwn(n,e),n},p.clone=function(t){return p.isObject(t)?p.isArray(t)?t.slice():p.extend({},t):t},p.tap=function(t,e){return e(t),t},p.isMatch=function(t,e){var n=p.keys(e),r=n.length;if(null==t)return!r;for(var i=Object(t),u=0;u<r;u++){var s=n[u];if(e[s]!==i[s]||!(s in i))return!1}return!0},P=function(t,e,n,r){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return!1;if(t!=t)return e!=e;var i=typeof t;return("function"===i||"object"===i||"object"==typeof e)&&q(t,e,n,r)},q=function(t,e,n,r){t instanceof p&&(t=t._wrapped),e instanceof p&&(e=e._wrapped);var i=f.call(t);if(i!==f.call(e))return!1;switch(i){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!=+t?+e!=+e:0==+t?1/+t==1/e:+t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object Symbol]":return h.valueOf.call(t)===h.valueOf.call(e)}var u="[object Array]"===i;if(!u){if("object"!=typeof t||"object"!=typeof e)return!1;var s=t.constructor,a=e.constructor;if(s!==a&&!(p.isFunction(s)&&s instanceof s&&p.isFunction(a)&&a instanceof a)&&"constructor"in t&&"constructor"in e)return!1}r=r||[];for(var o=(n=n||[]).length;o--;)if(n[o]===t)return r[o]===e;if(n.push(t),r.push(e),u){if((o=t.length)!==e.length)return!1;for(;o--;)if(!P(t[o],e[o],n,r))return!1}else{var c,l=p.keys(t);if(o=l.length,p.keys(e).length!==o)return!1;for(;o--;)if(c=l[o],!E(e,c)||!P(t[c],e[c],n,r))return!1}return n.pop(),r.pop(),!0},p.isEqual=function(t,e){return P(t,e)},p.isEmpty=function(t){return null==t||(A(t)&&(p.isArray(t)||p.isString(t)||p.isArguments(t))?0===t.length:0===p.keys(t).length)},p.isElement=function(t){return!(!t||1!==t.nodeType)},p.isArray=n||function(t){return"[object Array]"===f.call(t)},p.isObject=function(t){var e=typeof t;return"function"===e||"object"===e&&!!t},p.each(["Arguments","Function","String","Number","Date","RegExp","Error","Symbol","Map","WeakMap","Set","WeakSet"],function(e){p["is"+e]=function(t){return f.call(t)==="[object "+e+"]"}}),p.isArguments(arguments)||(p.isArguments=function(t){return E(t,"callee")});var j=t.document&&t.document.childNodes;"function"!=typeof/./&&"object"!=typeof Int8Array&&"function"!=typeof j&&(p.isFunction=function(t){return"function"==typeof t||!1}),p.isFinite=function(t){return!p.isSymbol(t)&&isFinite(t)&&!isNaN(parseFloat(t))},p.isNaN=function(t){return p.isNumber(t)&&isNaN(t)},p.isBoolean=function(t){return!0===t||!1===t||"[object Boolean]"===f.call(t)},p.isNull=function(t){return null===t},p.isUndefined=function(t){return void 0===t},p.has=function(t,e){if(!p.isArray(e))return E(t,e);for(var n=e.length,r=0;r<n;r++){var i=e[r];if(null==t||!u.call(t,i))return!1;t=t[i]}return!!n},p.noConflict=function(){return t._=e,this},p.identity=function(t){return t},p.constant=function(t){return function(){return t}},p.noop=function(){},p.property=function(e){return p.isArray(e)?function(t){return b(t,e)}:x(e)},p.propertyOf=function(e){return null==e?function(){}:function(t){return p.isArray(t)?b(e,t):e[t]}},p.matcher=p.matches=function(e){return e=p.extendOwn({},e),function(t){return p.isMatch(t,e)}},p.times=function(t,e,n){var r=Array(Math.max(0,t));e=g(e,n,1);for(var i=0;i<t;i++)r[i]=e(i);return r},p.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},p.now=Date.now||function(){return(new Date).getTime()};var G={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},L=p.invert(G),$=function(e){var n=function(t){return e[t]},t="(?:"+p.keys(e).join("|")+")",r=RegExp(t),i=RegExp(t,"g");return function(t){return t=null==t?"":""+t,r.test(t)?t.replace(i,n):t}};p.escape=$(G),p.unescape=$(L),p.result=function(t,e,n){p.isArray(e)||(e=[e]);var r=e.length;if(!r)return p.isFunction(n)?n.call(t):n;for(var i=0;i<r;i++){var u=null==t?void 0:t[e[i]];void 0===u&&(u=n,i=r),t=p.isFunction(u)?u.call(t):u}return t};var V=0;p.uniqueId=function(t){var e=++V+"";return t?t+e:e},p.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var z=/(.)^/,H={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},U=/\\|'|\r|\n|\u2028|\u2029/g,K=function(t){return"\\"+H[t]};p.template=function(u,t,e){!t&&e&&(t=e),t=p.defaults({},t,p.templateSettings);var n,r=RegExp([(t.escape||z).source,(t.interpolate||z).source,(t.evaluate||z).source].join("|")+"|$","g"),s=0,a="__p+='";u.replace(r,function(t,e,n,r,i){return a+=u.slice(s,i).replace(U,K),s=i+t.length,e?a+="'+\n((__t=("+e+"))==null?'':_.escape(__t))+\n'":n?a+="'+\n((__t=("+n+"))==null?'':__t)+\n'":r&&(a+="';\n"+r+"\n__p+='"),t}),a+="';\n",t.variable||(a="with(obj||{}){\n"+a+"}\n"),a="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{n=new Function(t.variable||"obj","_",a)}catch(t){throw t.source=a,t}var i=function(t){return n.call(this,t,p)},o=t.variable||"obj";return i.source="function("+o+"){\n"+a+"}",i},p.chain=function(t){var e=p(t);return e._chain=!0,e};var Z=function(t,e){return t._chain?p(e).chain():e};p.mixin=function(n){return p.each(p.functions(n),function(t){var e=p[t]=n[t];p.prototype[t]=function(){var t=[this._wrapped];return i.apply(t,arguments),Z(this,e.apply(p,t))}}),p},p.mixin(p),p.each(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var n=r[e];p.prototype[e]=function(){var t=this._wrapped;return n.apply(t,arguments),"shift"!==e&&"splice"!==e||0!==t.length||delete t[0],Z(this,t)}}),p.each(["concat","join","slice"],function(t){var e=r[t];p.prototype[t]=function(){return Z(this,e.apply(this._wrapped,arguments))}}),p.prototype.value=function(){return this._wrapped},p.prototype.valueOf=p.prototype.toJSON=p.prototype.value,p.prototype.toString=function(){return String(this._wrapped)},"function"==typeof define&&define.amd&&define("underscore",[],function(){return p})}(),function(t,I){var e,n,r,i;t.KAS={},e=t.KAS,n=function(){var t=function(t,e,n,r){for(n=n||{},r=t.length;r--;n[t[r]]=e);return n},e=[1,7],n=[1,17],r=[1,13],i=[1,14],u=[1,15],s=[1,32],a=[1,22],o=[1,23],c=[1,24],l=[1,25],h=[1,26],f=[1,33],p=[1,27],y=[1,28],g=[1,29],d=[1,30],m=[1,20],v=[1,36],x=[1,37],E=[5,6,8,10,33,35,41,43,45],b=[1,39],_=[1,40],w=[5,6,8,10,12,14,16,19,21,22,28,29,30,31,32,33,34,35,37,39,41,42,43,44,45,46],A=[10,16,19,21,22,28,29,30,31,32,34,37,39,42,43,44,46],F=[5,6,8,10,12,14,16,18,19,21,22,28,29,30,31,32,33,34,35,37,39,41,42,43,44,45,46],D={trace:function(){},yy:{},symbols_:{error:2,equation:3,expression:4,SIGN:5,EOF:6,additive:7,"+":8,multiplicative:9,"-":10,triglog:11,"*":12,negative:13,"/":14,trig:15,TRIG:16,trigfunc:17,"^":18,TRIGINV:19,logbase:20,ln:21,log:22,_:23,subscriptable:24,power:25,primitive:26,variable:27,VAR:28,CONST:29,INT:30,FLOAT:31,"{":32,"}":33,"(":34,")":35,function:36,FUNC:37,invocation:38,sqrt:39,"[":40,"]":41,abs:42,"|":43,"LEFT|":44,"RIGHT|":45,FRAC:46,$accept:0,$end:1},terminals_:{2:"error",5:"SIGN",6:"EOF",8:"+",10:"-",12:"*",14:"/",16:"TRIG",18:"^",19:"TRIGINV",21:"ln",22:"log",23:"_",28:"VAR",29:"CONST",30:"INT",31:"FLOAT",32:"{",33:"}",34:"(",35:")",37:"FUNC",39:"sqrt",40:"[",41:"]",42:"abs",43:"|",44:"LEFT|",45:"RIGHT|",46:"FRAC"},productions_:[0,[3,4],[3,2],[3,1],[4,1],[7,3],[7,3],[7,1],[9,2],[9,3],[9,3],[9,1],[13,2],[13,1],[15,1],[17,1],[17,3],[17,1],[20,1],[20,1],[20,3],[11,2],[11,2],[11,1],[25,3],[25,1],[27,1],[24,3],[24,1],[24,1],[24,1],[24,1],[24,3],[24,3],[36,1],[38,4],[38,4],[38,7],[38,4],[38,3],[38,3],[38,4],[26,1],[26,1],[26,7]],performAction:function(t,e,n,r,i,u,s){var a=u.length-1;switch(i){case 1:return new r.Eq(u[a-3],u[a-2],u[a-1]);case 2:return u[a-1];case 3:return new r.Add([]);case 4:case 7:case 11:case 13:case 15:case 20:case 23:case 25:case 42:case 43:this.$=u[a];break;case 5:this.$=r.Add.createOrAppend(u[a-2],u[a]);break;case 6:this.$=r.Add.createOrAppend(u[a-2],r.Mul.handleNegative(u[a],"subtract"));break;case 8:this.$=r.Mul.fold(r.Mul.createOrAppend(u[a-1],u[a]));break;case 9:this.$=r.Mul.fold(r.Mul.createOrAppend(u[a-2],u[a]));break;case 10:this.$=r.Mul.fold(r.Mul.handleDivide(u[a-2],u[a]));break;case 12:this.$=r.Mul.handleNegative(u[a]);break;case 14:case 17:this.$=[t];break;case 16:this.$=u[a-2].concat(u[a]);break;case 18:this.$=r.Log.natural();break;case 19:this.$=r.Log.common();break;case 21:this.$=r.Trig.create(u[a-1],u[a]);break;case 22:this.$=r.Log.create(u[a-1],u[a]);break;case 24:this.$=new r.Pow(u[a-2],u[a]);break;case 26:case 34:this.$=t;break;case 27:this.$=new r.Var(u[a-2],u[a]);break;case 28:this.$=new r.Var(u[a]);break;case 29:this.$=new r.Const(t.toLowerCase());break;case 30:this.$=r.Int.create(Number(t));break;case 31:this.$=r.Float.create(Number(t));break;case 32:this.$=u[a-1].completeParse();break;case 33:this.$=u[a-1].completeParse().addHint("parens");break;case 35:case 36:this.$=r.Pow.sqrt(u[a-1]);break;case 37:this.$=new r.Pow.nthroot(u[a-1],u[a-4]);break;case 38:case 39:case 40:this.$=new r.Abs(u[a-1]);break;case 41:this.$=new r.Func(u[a-3],u[a-1]);break;case 44:this.$=r.Mul.handleDivide(u[a-4],u[a-1])}},table:[{3:1,4:2,6:[1,3],7:4,9:5,10:e,11:8,13:6,15:12,16:n,17:9,19:r,20:10,21:i,22:u,24:18,25:11,26:16,27:21,28:s,29:a,30:o,31:c,32:l,34:h,36:31,37:f,38:19,39:p,42:y,43:g,44:d,46:m},{1:[3]},{5:[1,34],6:[1,35]},{1:[2,3]},t([5,6],[2,4],{8:v,10:x}),t(E,[2,7],{17:9,20:10,25:11,15:12,26:16,24:18,38:19,27:21,36:31,11:38,12:b,14:_,16:n,19:r,21:i,22:u,28:s,29:a,30:o,31:c,32:l,34:h,37:f,39:p,42:y,44:d,46:m}),t(w,[2,11]),{10:e,11:8,13:41,15:12,16:n,17:9,19:r,20:10,21:i,22:u,24:18,25:11,26:16,27:21,28:s,29:a,30:o,31:c,32:l,34:h,36:31,37:f,38:19,39:p,42:y,43:g,44:d,46:m},t(w,[2,13]),{10:e,11:8,13:42,15:12,16:n,17:9,19:r,20:10,21:i,22:u,24:18,25:11,26:16,27:21,28:s,29:a,30:o,31:c,32:l,34:h,36:31,37:f,38:19,39:p,42:y,43:g,44:d,46:m},{10:e,11:8,13:43,15:12,16:n,17:9,19:r,20:10,21:i,22:u,24:18,25:11,26:16,27:21,28:s,29:a,30:o,31:c,32:l,34:h,36:31,37:f,38:19,39:p,42:y,43:g,44:d,46:m},t(w,[2,23]),t(A,[2,15],{18:[1,44]}),t(A,[2,17]),t(A,[2,18]),t(A,[2,19],{23:[1,45]}),t(w,[2,25],{18:[1,46]}),t([10,16,18,19,21,22,28,29,30,31,32,34,37,39,42,43,44,46],[2,14]),t(F,[2,42]),t(F,[2,43]),{32:[1,47]},t(F,[2,28],{23:[1,48]}),t(F,[2,29]),t(F,[2,30]),t(F,[2,31]),{7:49,9:5,10:e,11:8,13:6,15:12,16:n,17:9,19:r,20:10,21:i,22:u,24:18,25:11,26:16,27:21,28:s,29:a,30:o,31:c,32:l,34:h,36:31,37:f,38:19,39:p,42:y,43:g,44:d,46:m},{7:50,9:5,10:e,11:8,13:6,15:12,16:n,17:9,19:r,20:10,21:i,22:u,24:18,25:11,26:16,27:21,28:s,29:a,30:o,31:c,32:l,34:h,36:31,37:f,38:19,39:p,42:y,43:g,44:d,46:m},{32:[1,52],34:[1,51],40:[1,53]},{34:[1,54]},{7:55,9:5,10:e,11:8,13:6,15:12,16:n,17:9,19:r,20:10,21:i,22:u,24:18,25:11,26:16,27:21,28:s,29:a,30:o,31:c,32:l,34:h,36:31,37:f,38:19,39:p,42:y,43:g,44:d,46:m},{7:56,9:5,10:e,11:8,13:6,15:12,16:n,17:9,19:r,20:10,21:i,22:u,24:18,25:11,26:16,27:21,28:s,29:a,30:o,31:c,32:l,34:h,36:31,37:f,38:19,39:p,42:y,43:g,44:d,46:m},{34:[1,57]},t([5,6,8,10,12,14,16,18,19,21,22,23,28,29,30,31,32,33,34,35,37,39,41,42,43,44,45,46],[2,26]),{34:[2,34]},{4:58,7:4,9:5,10:e,11:8,13:6,15:12,16:n,17:9,19:r,20:10,21:i,22:u,24:18,25:11,26:16,27:21,28:s,29:a,30:o,31:c,32:l,34:h,36:31,37:f,38:19,39:p,42:y,43:g,44:d,46:m},{1:[2,2]},{9:59,10:e,11:8,13:6,15:12,16:n,17:9,19:r,20:10,21:i,22:u,24:18,25:11,26:16,27:21,28:s,29:a,30:o,31:c,32:l,34:h,36:31,37:f,38:19,39:p,42:y,43:g,44:d,46:m},{9:60,10:e,11:8,13:6,15:12,16:n,17:9,19:r,20:10,21:i,22:u,24:18,25:11,26:16,27:21,28:s,29:a,30:o,31:c,32:l,34:h,36:31,37:f,38:19,39:p,42:y,43:g,44:d,46:m},t(w,[2,8]),{10:e,11:8,13:61,15:12,16:n,17:9,19:r,20:10,21:i,22:u,24:18,25:11,26:16,27:21,28:s,29:a,30:o,31:c,32:l,34:h,36:31,37:f,38:19,39:p,42:y,43:g,44:d,46:m},{10:e,11:8,13:62,15:12,16:n,17:9,19:r,20:10,21:i,22:u,24:18,25:11,26:16,27:21,28:s,29:a,30:o,31:c,32:l,34:h,36:31,37:f,38:19,39:p,42:y,43:g,44:d,46:m},t(w,[2,12]),t(w,[2,21]),t(w,[2,22]),{10:e,11:8,13:63,15:12,16:n,17:9,19:r,20:10,21:i,22:u,24:18,25:11,26:16,27:21,28:s,29:a,30:o,31:c,32:l,34:h,36:31,37:f,38:19,39:p,42:y,43:g,44:d,46:m},{24:64,27:21,28:s,29:a,30:o,31:c,32:l,34:h},{10:e,11:8,13:65,15:12,16:n,17:9,19:r,20:10,21:i,22:u,24:18,25:11,26:16,27:21,28:s,29:a,30:o,31:c,32:l,34:h,36:31,37:f,38:19,39:p,42:y,43:g,44:d,46:m},{7:66,9:5,10:e,11:8,13:6,15:12,16:n,17:9,19:r,20:10,21:i,22:u,24:18,25:11,26:16,27:21,28:s,29:a,30:o,31:c,32:l,34:h,36:31,37:f,38:19,39:p,42:y,43:g,44:d,46:m},{24:67,27:21,28:s,29:a,30:o,31:c,32:l,34:h},{8:v,10:x,33:[1,68]},{8:v,10:x,35:[1,69]},{7:70,9:5,10:e,11:8,13:6,15:12,16:n,17:9,19:r,20:10,21:i,22:u,24:18,25:11,26:16,27:21,28:s,29:a,30:o,31:c,32:l,34:h,36:31,37:f,38:19,39:p,42:y,43:g,44:d,46:m},{7:71,9:5,10:e,11:8,13:6,15:12,16:n,17:9,19:r,20:10,21:i,22:u,24:18,25:11,26:16,27:21,28:s,29:a,30:o,31:c,32:l,34:h,36:31,37:f,38:19,39:p,42:y,43:g,44:d,46:m},{7:72,9:5,10:e,11:8,13:6,15:12,16:n,17:9,19:r,20:10,21:i,22:u,24:18,25:11,26:16,27:21,28:s,29:a,30:o,31:c,32:l,34:h,36:31,37:f,38:19,39:p,42:y,43:g,44:d,46:m},{7:73,9:5,10:e,11:8,13:6,15:12,16:n,17:9,19:r,20:10,21:i,22:u,24:18,25:11,26:16,27:21,28:s,29:a,30:o,31:c,32:l,34:h,36:31,37:f,38:19,39:p,42:y,43:g,44:d,46:m},{8:v,10:x,43:[1,74]},{8:v,10:x,45:[1,75]},{7:76,9:5,10:e,11:8,13:6,15:12,16:n,17:9,19:r,20:10,21:i,22:u,24:18,25:11,26:16,27:21,28:s,29:a,30:o,31:c,32:l,34:h,36:31,37:f,38:19,39:p,42:y,43:g,44:d,46:m},{6:[1,77]},t(E,[2,5],{17:9,20:10,25:11,15:12,26:16,24:18,38:19,27:21,36:31,11:38,12:b,14:_,16:n,19:r,21:i,22:u,28:s,29:a,30:o,31:c,32:l,34:h,37:f,39:p,42:y,44:d,46:m}),t(E,[2,6],{17:9,20:10,25:11,15:12,26:16,24:18,38:19,27:21,36:31,11:38,12:b,14:_,16:n,19:r,21:i,22:u,28:s,29:a,30:o,31:c,32:l,34:h,37:f,39:p,42:y,44:d,46:m}),t(w,[2,9]),t(w,[2,10]),t(A,[2,16]),t(A,[2,20]),t(w,[2,24]),{8:v,10:x,33:[1,78]},t(F,[2,27]),t(F,[2,32]),t(F,[2,33]),{8:v,10:x,35:[1,79]},{8:v,10:x,33:[1,80]},{8:v,10:x,41:[1,81]},{8:v,10:x,35:[1,82]},t(F,[2,39]),t(F,[2,40]),{8:v,10:x,35:[1,83]},{1:[2,1]},{32:[1,84]},t(F,[2,35]),t(F,[2,36]),{32:[1,85]},t(F,[2,38]),t(F,[2,41]),{7:86,9:5,10:e,11:8,13:6,15:12,16:n,17:9,19:r,20:10,21:i,22:u,24:18,25:11,26:16,27:21,28:s,29:a,30:o,31:c,32:l,34:h,36:31,37:f,38:19,39:p,42:y,43:g,44:d,46:m},{7:87,9:5,10:e,11:8,13:6,15:12,16:n,17:9,19:r,20:10,21:i,22:u,24:18,25:11,26:16,27:21,28:s,29:a,30:o,31:c,32:l,34:h,36:31,37:f,38:19,39:p,42:y,43:g,44:d,46:m},{8:v,10:x,33:[1,88]},{8:v,10:x,33:[1,89]},t(F,[2,44]),t(F,[2,37])],defaultActions:{3:[2,3],33:[2,34],35:[2,2],77:[2,1]},parseError:function(t,e){if(!e.recoverable)throw new Error(t);this.trace(t)},parse:function(t){var e=this,n=[0],r=[null],i=[],u=this.table,s="",a=0,o=0,c=0,l=1,h=i.slice.call(arguments,1),f=Object.create(this.lexer),p={yy:{}};for(var y in this.yy)Object.prototype.hasOwnProperty.call(this.yy,y)&&(p.yy[y]=this.yy[y]);f.setInput(t,p.yy),p.yy.lexer=f,p.yy.parser=this,void 0===f.yylloc&&(f.yylloc={});var g=f.yylloc;i.push(g);var d=f.options&&f.options.ranges;"function"==typeof p.yy.parseError?this.parseError=p.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var m,v,x,E,b,_,w,A,F,D,k={};;){if(x=n[n.length-1],void 0===(E=this.defaultActions[x]?this.defaultActions[x]:(null==m&&(D=void 0,"number"!=typeof(D=f.lex()||l)&&(D=e.symbols_[D]||D),m=D),u[x]&&u[x][m]))||!E.length||!E[0]){var C="";for(_ in F=[],u[x])this.terminals_[_]&&2<_&&F.push("'"+this.terminals_[_]+"'");C=f.showPosition?"Parse error on line "+(a+1)+":\n"+f.showPosition()+"\nExpecting "+F.join(", ")+", got '"+(this.terminals_[m]||m)+"'":"Parse error on line "+(a+1)+": Unexpected "+(m==l?"end of input":"'"+(this.terminals_[m]||m)+"'"),this.parseError(C,{text:f.match,token:this.terminals_[m]||m,line:f.yylineno,loc:g,expected:F})}if(E[0]instanceof Array&&1<E.length)throw new Error("Parse Error: multiple actions possible at state: "+x+", token: "+m);switch(E[0]){case 1:n.push(m),r.push(f.yytext),i.push(f.yylloc),n.push(E[1]),m=null,v?(m=v,v=null):(o=f.yyleng,s=f.yytext,a=f.yylineno,g=f.yylloc,0<c&&c--);break;case 2:if(w=this.productions_[E[1]][1],k.$=r[r.length-w],k._$={first_line:i[i.length-(w||1)].first_line,last_line:i[i.length-1].last_line,first_column:i[i.length-(w||1)].first_column,last_column:i[i.length-1].last_column},d&&(k._$.range=[i[i.length-(w||1)].range[0],i[i.length-1].range[1]]),void 0!==(b=this.performAction.apply(k,[s,o,a,p.yy,E[1],r,i].concat(h))))return b;w&&(n=n.slice(0,-1*w*2),r=r.slice(0,-1*w),i=i.slice(0,-1*w)),n.push(this.productions_[E[1]][0]),r.push(k.$),i.push(k._$),A=u[n[n.length-2]][n[n.length-1]],n.push(A);break;case 3:return!0}}return!0}},k={EOF:1,parseError:function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)},setInput:function(t,e){return this.yy=e||this.yy||{},this._input=t,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];return this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t,t.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var e=t.length,n=t.split(/(?:\r\n?|\n)/g);this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e),this.offset-=e;var r=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);var i=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===r.length?this.yylloc.first_column:0)+r[r.length-n.length].length-n[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[i[0],i[0]+this.yyleng-e]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(20<t.length?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(20<t.length?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+e+"^"},test_match:function(t,e){var n,r,i;if(this.options.backtrack_lexer&&(i={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(i.yylloc.range=this.yylloc.range.slice(0))),(r=t[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=r.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:r?r[r.length-1].length-r[r.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],n=this.performAction.call(this,this.yy,this,e,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),n)return n;if(this._backtrack){for(var u in i)this[u]=i[u];return!1}return!1},next:function(){if(this.done)return this.EOF;var t,e,n,r;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var i=this._currentRules(),u=0;u<i.length;u++)if((n=this._input.match(this.rules[i[u]]))&&(!e||n[0].length>e[0].length)){if(e=n,r=u,this.options.backtrack_lexer){if(!1!==(t=this.test_match(n,i[u])))return t;if(this._backtrack){e=!1;continue}return!1}if(!this.options.flex)break}return e?!1!==(t=this.test_match(e,i[r]))&&t:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var t=this.next();return t||this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return 0<this.conditionStack.length-1?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(t){return 0<=(t=this.conditionStack.length-1-Math.abs(t||0))?this.conditionStack[t]:"INITIAL"},pushState:function(t){this.begin(t)},stateStackSize:function(){return this.conditionStack.length},options:{flex:!0},performAction:function(t,e,n,r){switch(n){case 0:case 1:case 2:break;case 3:return"INT";case 4:return"FLOAT";case 5:return"^";case 6:case 7:case 8:case 9:return"*";case 10:case 11:return"/";case 12:case 13:return"-";case 14:return"+";case 15:return"^";case 16:return"(";case 17:return")";case 18:return"(";case 19:return")";case 20:return"[";case 21:return"]";case 22:return"{";case 23:return"}";case 24:return"{";case 25:return"}";case 26:return"_";case 27:return"|";case 28:return"LEFT|";case 29:return"RIGHT|";case 30:return"!";case 31:return"SIGN";case 32:return e.yytext="<=","SIGN";case 33:return e.yytext=">=","SIGN";case 34:return e.yytext="<=","SIGN";case 35:return e.yytext=">=","SIGN";case 36:case 37:case 38:case 39:return e.yytext="<>","SIGN";case 40:return e.yytext="<=","SIGN";case 41:return e.yytext=">=","SIGN";case 42:case 43:return"FRAC";case 44:return"sqrt";case 45:return"abs";case 46:return"ln";case 47:return"log";case 48:case 49:case 50:case 51:return"TRIG";case 52:return e.yytext="sin","TRIG";case 53:return e.yytext="cos","TRIG";case 54:return e.yytext="tan","TRIG";case 55:return e.yytext="csc","TRIG";case 56:return e.yytext="sec","TRIG";case 57:return e.yytext="cot","TRIG";case 58:return e.yytext="arcsin","TRIG";case 59:return e.yytext="arccos","TRIG";case 60:return e.yytext="arctan","TRIG";case 61:return e.yytext="arccsc","TRIG";case 62:return e.yytext="arcsec","TRIG";case 63:return e.yytext="arccot","TRIG";case 64:case 65:return"TRIGINV";case 66:return e.yytext="sinh","TRIG";case 67:return e.yytext="cosh","TRIG";case 68:return e.yytext="tanh","TRIG";case 69:return e.yytext="csch","TRIG";case 70:return e.yytext="sech","TRIG";case 71:return e.yytext="tanh","TRIG";case 72:return"CONST";case 73:case 74:return e.yytext="pi","CONST";case 75:return"VAR";case 76:case 77:return e.yytext="theta","VAR";case 78:return"VAR";case 79:case 80:return e.yytext="phi","VAR";case 81:return t.symbolLexer(e.yytext);case 82:return"EOF";case 83:return"INVALID";case 84:console.log(e.yytext)}},rules:[/^(?:\s+)/,/^(?:\\space)/,/^(?:\\ )/,/^(?:[0-9]+\.?)/,/^(?:([0-9]+)?\.[0-9]+)/,/^(?:\*\*)/,/^(?:\*)/,/^(?:\\cdot|·)/,/^(?:\\times|×)/,/^(?:\\ast)/,/^(?:\/)/,/^(?:\\div|÷)/,/^(?:-)/,/^(?:−)/,/^(?:\+)/,/^(?:\^)/,/^(?:\()/,/^(?:\))/,/^(?:\\left\()/,/^(?:\\right\))/,/^(?:\[)/,/^(?:\])/,/^(?:\{)/,/^(?:\})/,/^(?:\\left\{)/,/^(?:\\right\})/,/^(?:_)/,/^(?:\|)/,/^(?:\\left\|)/,/^(?:\\right\|)/,/^(?:\!)/,/^(?:<=|>=|<>|<|>|=)/,/^(?:\\le)/,/^(?:\\ge)/,/^(?:\\leq)/,/^(?:\\geq)/,/^(?:=\/=)/,/^(?:\\ne)/,/^(?:\\neq)/,/^(?:≠)/,/^(?:≤)/,/^(?:≥)/,/^(?:\\frac)/,/^(?:\\dfrac)/,/^(?:sqrt|\\sqrt)/,/^(?:abs|\\abs)/,/^(?:ln|\\ln)/,/^(?:log|\\log)/,/^(?:sin|cos|tan)/,/^(?:csc|sec|cot)/,/^(?:sinh|cosh|tanh)/,/^(?:csch|sech|coth)/,/^(?:\\sin)/,/^(?:\\cos)/,/^(?:\\tan)/,/^(?:\\csc)/,/^(?:\\sec)/,/^(?:\\cot)/,/^(?:\\arcsin)/,/^(?:\\arccos)/,/^(?:\\arctan)/,/^(?:\\arccsc)/,/^(?:\\arcsec)/,/^(?:\\arccot)/,/^(?:arcsin|arccos|arctan)/,/^(?:arccsc|arcsec|arccot)/,/^(?:\\sinh)/,/^(?:\\cosh)/,/^(?:\\tanh)/,/^(?:\\csch)/,/^(?:\\sech)/,/^(?:\\coth)/,/^(?:pi)/,/^(?:π)/,/^(?:\\pi)/,/^(?:theta)/,/^(?:θ)/,/^(?:\\theta)/,/^(?:phi)/,/^(?:φ)/,/^(?:\\phi)/,/^(?:[a-zA-Z])/,/^(?:$)/,/^(?:.)/,/^(?:.)/],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84],inclusive:!0}}};function C(){this.yy={}}return D.lexer=k,new((C.prototype=D).Parser=C)}(),e.parser=n,r=t.KAS,i=function(){var t=function(t,e,n,r){for(n=n||{},r=t.length;r--;n[t[r]]=e);return n},e=[1,11],n=[1,9],r=[8,17],i=[6,11],u=[6,11,13,17],s={trace:function(){},yy:{},symbols_:{error:2,unitvalue:3,magnitude:4,unit:5,EOF:6,float:7,POW:8,int:9,multatoms:10,DIV:11,expatom:12,MUL:13,atom:14,"^":15,nat:16,ATOM:17,FLOAT:18,NAT:19,NEG:20,$accept:0,$end:1},terminals_:{2:"error",6:"EOF",8:"POW",11:"DIV",13:"MUL",15:"^",17:"ATOM",18:"FLOAT",19:"NAT",20:"NEG"},productions_:[0,[3,3],[3,2],[4,3],[4,1],[5,3],[5,1],[10,3],[10,2],[10,1],[12,3],[12,1],[14,1],[7,1],[7,1],[16,1],[9,2],[9,1]],performAction:function(t,e,n,r,i,u,s){var a=u.length-1;switch(i){case 1:return{type:"unitMagnitude",magnitude:u[a-2],unit:u[a-1]};case 2:return{type:"unitStandalone",unit:u[a-1]};case 3:this.$=u[a-2]+"e"+u[a];break;case 4:case 13:case 14:case 15:case 17:this.$=u[a];break;case 5:this.$={num:u[a-2],denom:u[a]};break;case 6:this.$={num:u[a],denom:null};break;case 7:this.$=[u[a-2]].concat(u[a]);break;case 8:this.$=[u[a-1]].concat(u[a]);break;case 9:this.$=[u[a]];break;case 10:this.$={name:u[a-2],pow:u[a]};break;case 11:this.$={name:u[a],pow:1};break;case 12:this.$=t;break;case 16:this.$="-"+u[a]}},table:[{3:1,4:2,5:3,7:4,10:5,12:8,14:10,16:7,17:e,18:[1,6],19:n},{1:[3]},{5:12,10:5,12:8,14:10,17:e},{6:[1,13]},{8:[1,14],17:[2,4]},{6:[2,6],11:[1,15]},t(r,[2,13]),t(r,[2,14]),t(i,[2,9],{12:8,14:10,10:17,13:[1,16],17:e}),t([6,8,11,13,17],[2,15]),t(u,[2,11],{15:[1,18]}),t([6,11,13,15,17],[2,12]),{6:[1,19]},{1:[2,2]},{9:20,19:[1,22],20:[1,21]},{10:23,12:8,14:10,17:e},{10:24,12:8,14:10,17:e},t(i,[2,8]),{16:25,19:n},{1:[2,1]},{17:[2,3]},{19:[1,26]},{17:[2,17]},{6:[2,5]},t(i,[2,7]),t(u,[2,10]),{17:[2,16]}],defaultActions:{13:[2,2],19:[2,1],20:[2,3],22:[2,17],23:[2,5],26:[2,16]},parseError:function(t,e){if(!e.recoverable)throw new Error(t);this.trace(t)},parse:function(t){var e=this,n=[0],r=[null],i=[],u=this.table,s="",a=0,o=0,c=0,l=1,h=i.slice.call(arguments,1),f=Object.create(this.lexer),p={yy:{}};for(var y in this.yy)Object.prototype.hasOwnProperty.call(this.yy,y)&&(p.yy[y]=this.yy[y]);f.setInput(t,p.yy),p.yy.lexer=f,p.yy.parser=this,void 0===f.yylloc&&(f.yylloc={});var g=f.yylloc;i.push(g);var d=f.options&&f.options.ranges;"function"==typeof p.yy.parseError?this.parseError=p.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var m,v,x,E,b,_,w,A,F,D,k={};;){if(x=n[n.length-1],void 0===(E=this.defaultActions[x]?this.defaultActions[x]:(null==m&&(D=void 0,"number"!=typeof(D=f.lex()||l)&&(D=e.symbols_[D]||D),m=D),u[x]&&u[x][m]))||!E.length||!E[0]){var C="";for(_ in F=[],u[x])this.terminals_[_]&&2<_&&F.push("'"+this.terminals_[_]+"'");C=f.showPosition?"Parse error on line "+(a+1)+":\n"+f.showPosition()+"\nExpecting "+F.join(", ")+", got '"+(this.terminals_[m]||m)+"'":"Parse error on line "+(a+1)+": Unexpected "+(m==l?"end of input":"'"+(this.terminals_[m]||m)+"'"),this.parseError(C,{text:f.match,token:this.terminals_[m]||m,line:f.yylineno,loc:g,expected:F})}if(E[0]instanceof Array&&1<E.length)throw new Error("Parse Error: multiple actions possible at state: "+x+", token: "+m);switch(E[0]){case 1:n.push(m),r.push(f.yytext),i.push(f.yylloc),n.push(E[1]),m=null,v?(m=v,v=null):(o=f.yyleng,s=f.yytext,a=f.yylineno,g=f.yylloc,0<c&&c--);break;case 2:if(w=this.productions_[E[1]][1],k.$=r[r.length-w],k._$={first_line:i[i.length-(w||1)].first_line,last_line:i[i.length-1].last_line,first_column:i[i.length-(w||1)].first_column,last_column:i[i.length-1].last_column},d&&(k._$.range=[i[i.length-(w||1)].range[0],i[i.length-1].range[1]]),void 0!==(b=this.performAction.apply(k,[s,o,a,p.yy,E[1],r,i].concat(h))))return b;w&&(n=n.slice(0,-1*w*2),r=r.slice(0,-1*w),i=i.slice(0,-1*w)),n.push(this.productions_[E[1]][0]),r.push(k.$),i.push(k._$),A=u[n[n.length-2]][n[n.length-1]],n.push(A);break;case 3:return!0}}return!0}},a={EOF:1,parseError:function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)},setInput:function(t,e){return this.yy=e||this.yy||{},this._input=t,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];return this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t,t.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var e=t.length,n=t.split(/(?:\r\n?|\n)/g);this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e),this.offset-=e;var r=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);var i=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===r.length?this.yylloc.first_column:0)+r[r.length-n.length].length-n[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[i[0],i[0]+this.yyleng-e]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(20<t.length?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(20<t.length?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+e+"^"},test_match:function(t,e){var n,r,i;if(this.options.backtrack_lexer&&(i={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(i.yylloc.range=this.yylloc.range.slice(0))),(r=t[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=r.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:r?r[r.length-1].length-r[r.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],n=this.performAction.call(this,this.yy,this,e,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),n)return n;if(this._backtrack){for(var u in i)this[u]=i[u];return!1}return!1},next:function(){if(this.done)return this.EOF;var t,e,n,r;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var i=this._currentRules(),u=0;u<i.length;u++)if((n=this._input.match(this.rules[i[u]]))&&(!e||n[0].length>e[0].length)){if(e=n,r=u,this.options.backtrack_lexer){if(!1!==(t=this.test_match(n,i[u])))return t;if(this._backtrack){e=!1;continue}return!1}if(!this.options.flex)break}return e?!1!==(t=this.test_match(e,i[r]))&&t:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var t=this.next();return t||this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return 0<this.conditionStack.length-1?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(t){return 0<=(t=this.conditionStack.length-1-Math.abs(t||0))?this.conditionStack[t]:"INITIAL"},pushState:function(t){this.begin(t)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(t,e,n,r){switch(n){case 0:return 11;case 1:return"(";case 2:return")";case 3:return 8;case 4:return 15;case 5:return 13;case 6:return 18;case 7:return 19;case 8:return 20;case 9:case 10:case 11:return 17;case 12:break;case 13:return 6}},rules:[/^(?:\/)/,/^(?:\()/,/^(?:\))/,/^(?:(\*|x|\u00d7|\u2219|\u22c5|\u00b7)\s*10\s*\^)/,/^(?:\^)/,/^(?:\*)/,/^(?:[0-9]+\.[0-9]+)/,/^(?:[0-9]+)/,/^(?:-)/,/^(?:\u00b0( ?)[cCfF])/,/^(?:fl\.? oz\.?)/,/^(?:[\u00b5]?([A-Za-z-]+|[\u2103\u2109\u212b]))/,/^(?:\s+)/,/^(?:$)/],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13],inclusive:!0}}};function o(){this.yy={}}return s.lexer=a,new((o.prototype=s).Parser=o)}(),r.unitParser=i,function(o){var t=function(){throw new Error("Abstract method - must override for expr: "+this.print())},n=function(t){throw new Error(t)},y=function(t){return t!=t};function u(){}function r(){}function p(){1===arguments.length?this.terms=arguments[0]:this.terms=_.toArray(arguments)}function g(){1===arguments.length?this.terms=arguments[0]:this.terms=_.toArray(arguments)}function d(t,e){this.base=t,this.exp=e}function m(t,e){this.base=t,this.power=e}function v(t,e){this.type=t,this.arg=e}function i(t){this.arg=t}function x(t,e,n){this.left=t,this.type=e,this.right=n}function e(){}function E(t,e){this.symbol=t,this.arg=e}function s(t,e){this.symbol=t,this.subscript=e}function a(t){this.symbol=t}function b(){}function f(t,e){var n=t,r=e;r<0&&(n=-n,r=-r),this.n=n,this.d=r}function w(t){this.n=t}function c(t){this.n=t}_.extend(u.prototype,{func:t,args:t,construct:function(t){var e=new this.func;return this.func.apply(e,t),e},recurse:function(e){var n=Array.prototype.slice.call(arguments,1),t=_.map(this.args(),function(t){return _.isString(t)?t:t[e].apply(t,n)});return this.construct(t)},eval:t,codegen:t,compile:function(){var e=this.codegen();try{return new Function("vars","return "+e+";")}catch(t){throw new Error("Function did not compile: "+e)}},print:t,tex:t,asTex:function(t){t=t||{},_.defaults(t,{display:!0,dynamic:!0,times:!1});var e=this.tex();return t.display&&(e="\\displaystyle "+e),t.dynamic&&(e=(e=e.replace(/\(/g,"\\left(")).replace(/\)/g,"\\right)")),t.times&&(e=e.replace(/\\cdot/g,"\\times")),e},name:function(){return this.func.name?this.func.name:this.func.toString().match(/^function\s*([^\s(]+)/)[1]},repr:function(){return this.name()+"("+_.map(this.args(),function(t){return _.isString(t)?t:t.repr()}).join(",")+")"},strip:function(){return this.recurse("strip")},normalize:function(){return this.recurse("normalize")},expand:function(){return this.recurse("expand")},factor:function(t){return this.recurse("factor",t)},collect:function(t){return this.recurse("collect",t)},equals:function(t){return this.normalize().print()===t.normalize().print()},simplify:function(t){t=_.extend({once:!1},t);var e=this.factor(t),n=e.collect(t);e.equals(n)&&(n=this.collect(t));var r=n.expand(t),i=r.collect(t);r.equals(i)&&(i=n.collect(t));var u=i;return t.once||this.equals(u)?u:u.simplify(t)},isSimplified:function(){return this.equals(this.simplify())},exprArgs:function(){return _.filter(this.args(),function(t){return t instanceof u})},getVars:function(t){return _.uniq(_.flatten(_.invoke(this.exprArgs(),"getVars",t))).sort()},getConsts:function(){return _.uniq(_.flatten(_.invoke(this.exprArgs(),"getConsts"))).sort()},getUnits:function(){return _.flatten(_.invoke(this.exprArgs(),"getUnits"))},is:function(t){return this instanceof t},has:function(e){return this instanceof e||_.any(this.exprArgs(),function(t){return t.has(e)})},raiseToThe:function(t){return new d(this,t)},isSubtract:function(){return!1},isDivide:function(){return!1},isRoot:function(){return!1},needsExplicitMul:function(){return this.args()[0].needsExplicitMul()},sameVars:function(t){var e=this.getVars(),n=t.getVars(),r=function(t,e){return!_.difference(t,e).length},i=function(t){return _.uniq(_.invoke(t,"toLowerCase")).sort()};return{equal:r(e,n),equalIgnoringCase:r(i(e),i(n))}},compare:function(t){if(t instanceof x)return!1;var e=_.union(this.getVars(!0),t.getVars(!0)),n=function(t,e){var n,r,i=(n=t,r=e,Math.abs(n)<1||Math.abs(r)<1?Math.abs(n-r):Math.abs(1-n/r));return t===e||y(t)&&y(e)||i<Math.pow(10,-9)};if(!e.length&&!this.has(A)&&!t.has(A))return n(this.eval(),t.eval());var r=this.collect(),i=t.collect(),u=this.getUnits(),s=t.getUnits();if(!_.isEqual(u,s))return!1;for(var a=0;a<12;a++){var o,c={},l=Math.pow(10,1+Math.floor(3*a/12)),h=a%2==0;if(_.each(e,function(t){var e,n;c[t]=h?(n=l-(e=-l),Math.random()*n+e):_.random(-l,l)}),r.has(E)||i.has(E)||r.has(A)||i.has(A)){var f=r.partialEval(c),p=i.partialEval(c);o=f.simplify().equals(p.simplify())}else{o=n(f=r.eval(c),p=i.eval(c))}if(!o)return!1}return!0},partialEval:function(t){return this instanceof A?this:this.has(E)?this instanceof E?new E(this.symbol,this.arg.partialEval(t)):this.recurse("partialEval",t):new c(this.eval(t).toFixed(9)).collect()},sameForm:function(t){return this.strip().equals(t.strip())},findGCD:function(t){return this.equals(t)?t:b.One},getDenominator:function(){return b.One},asMul:function(){return new g(b.One,this)},isPositive:t,isNegative:function(){return!1},asPositiveFactor:function(){return this.isPositive()?this:b.One},addHint:function(t){if(!t)return this;var e=this.construct(this.args());return e.hints=_.clone(this.hints),e.hints[t]=!0,e},hints:{parens:!1},asExpr:function(){return this},completeParse:function(){return this.recurse("completeParse")},abs:t,negate:function(){return new g(b.Neg,this)}}),r.prototype=new u,_.extend(r.prototype,{args:function(){return this.terms},normalize:function(){var t=_.sortBy(_.invoke(this.terms,"normalize"),function(t){return t.print()});return new this.func(t)},expand:function(){return this.recurse("expand").flatten()},partition:function(){var t=_.groupBy(this.terms,function(t){return t instanceof b}),e=t[!0]||[],n=t[!1]||[];return[new this.func(e),new this.func(n)]},flatten:function(){var e=this,t=_.reject(this.terms,function(t){return t.equals(e.identity)});if(0===t.length)return e.identity;if(1===t.length)return t[0];var n=_.groupBy(t,function(t){return t instanceof e.func}),r=n[!0]||[],i=(n[!1]||[]).concat(_.flatten(_.pluck(r,"terms"),!0));return new e.func(i)},identity:I,reduce:t,isPositive:function(){var t=_.invoke(this.terms,"collect");return _.all(_.invoke(t,"isPositive"))},replace:function(t,e){var n;n=t instanceof u?_.indexOf(this.terms,t):t;var r=[];_.isArray(e)?r=e:e&&(r=[e]);var i=this.terms.slice(0,n).concat(r).concat(this.terms.slice(n+1));return new this.func(i)},remove:function(t){return this.replace(t)},getDenominator:function(){return new g(_.invoke(this.terms,"getDenominator")).flatten()}}),p.prototype=new r,_.extend(p.prototype,{func:p,eval:function(n,r){return _.reduce(this.terms,function(t,e){return t+e.eval(n,r)},0)},codegen:function(){return _.map(this.terms,function(t){return"("+t.codegen()+")"}).join(" + ")||"0"},print:function(){return _.invoke(this.terms,"print").join("+")},tex:function(){var e="";return _.each(this.terms,function(t){!e||t.isSubtract()?e+=t.tex():e+="+"+t.tex()}),e},collect:function(n){var t=_.invoke(this.terms,"collect",n),r=[];_.each(t,function(t){if(t instanceof g){var e=t.partition();r.push([e[1].flatten(),e[0].reduce(n)])}else t instanceof b?r.push([b.One,t]):r.push([t,b.One])});var e=_.groupBy(r,function(t){return t[0].normalize().print()});return new p(_.compact(_.map(e,function(t){var e=t[0][0];return new g(new p(_.zip.apply(_,t)[1]).reduce(n),e).collect(n)}))).flatten()},factor:function(t){t=_.extend({keepNegative:!1},t);var n,e=_.invoke(this.terms,"collect");n=e[0]instanceof g?e[0].terms:[e[0]],_.each(_.rest(this.terms),function(e){n=_.map(n,function(t){return e.findGCD(t)})}),!t.keepNegative&&this.isNegative()&&n.push(b.Neg),n=new g(n).flatten().collect();var r=_.map(e,function(t){return g.handleDivide(t,n).simplify()});return r=new p(r).flatten(),g.createOrAppend(n,r).flatten()},reduce:function(n){return _.reduce(this.terms,function(t,e){return t.add(e,n)},this.identity)},needsExplicitMul:function(){return!1},isNegative:function(){var t=_.invoke(this.terms,"collect");return _.all(_.invoke(t,"isNegative"))},negate:function(){return new p(_.invoke(this.terms,"negate"))}}),g.prototype=new r,_.extend(g.prototype,{func:g,eval:function(n,r){return _.reduce(this.terms,function(t,e){return t*e.eval(n,r)},1)},codegen:function(){return _.map(this.terms,function(t){return"("+t.codegen()+")"}).join(" * ")||"0"},print:function(){return _.map(this.terms,function(t){return t instanceof p?"("+t.print()+")":t.print()}).join("*")},getUnits:function(){var t=_(this.terms).chain().map(function(t){return t.getUnits()}).flatten().value();return t.sort(function(t,e){return t.unit<e.unit}),t},tex:function(){for(var t,e=" \\cdot ",n=_.groupBy(this.terms,function(t){return t.isDivide()?"inverse":t instanceof b?"number":"other"}),i=n.inverse||[],r=n.number||[],u=n.other||[],s="",a=0;a<r.length;a++){if(r[a]instanceof f&&!(r[a]instanceof w)&&0<u.length&&0<i.length){var o=r.slice();o.splice(a,1);var c=o.concat(i).concat(u);return r[a].tex()+new g(c).tex()}}if(0===(r=_.compact(_.map(r,function(t){var e=t instanceof f&&!(t instanceof w),n=!t.hints.fraction||0<i.length;if(e&&n){i.push(new d(new w(t.d),b.Div));var r=new w(t.n);return r.hints=t.hints,_.any(t.hints)?r:null}return t}))).length&&1===u.length)t=u[0].tex();else{var l="";_.each(r,function(t){t.hints.subtract&&t.hints.entered?(s+="-",l+=(l?e:"")+t.abs().tex()):t instanceof w&&-1===t.n&&(t.hints.negate||t.hints.subtract)?s+="-":l+=(l?e:"")+t.tex()}),_.each(u,function(t){t.needsExplicitMul()?l+=(l?e:"")+t.tex():l+=t instanceof p?"("+t.tex()+")":t.tex()}),t=l||"1"}if(i.length){var h=new g(_.invoke(i,"asDivide")).flatten().tex();return s+"\\frac{"+t+"}{"+h+"}"}return s+t},strip:function(){return new g(_.map(this.terms,function(t){return t instanceof b?t.abs():t.strip()})).flatten()},expand:function(){var e=function(t){return t instanceof p},n=function(t){return t instanceof d&&t.exp.isNegative()},t=this.recurse("expand").flatten(),r=_.any(t.terms,e),i=_.any(t.terms,function(t){return n(t)&&e(t.base)});if(!r&&!i)return t;var u=_.groupBy(t.terms,n),s=u[!1]||[],a=u[!0]||[];if(r){var o=_.groupBy(s,e),c=o[!0]||[],l=o[!1]||[],h=_.reduce(c,function(t,n){return _.reduce(t,function(t,e){return t.concat(_.map(n.terms,function(t){return e.concat(t)}))},[])},[[]]);s=[new p(_.map(h,function(t){return new g(l.concat(t)).flatten()}))]}i&&(a=[new d(new g(_.invoke(a,"getDenominator")).flatten().expand(),b.Div)]);return new g(s.concat(a)).flatten()},factor:function(t){var e=this.recurse("factor",t).flatten();if(!(e instanceof g))return e;var n=_.groupBy(e.terms,function(t){return t instanceof f}),r=_.reduce(n[!0],function(t,e){return{n:t.n*e.n,d:t.d*e.d}},{n:1,d:1});return r=1===r.d?new w(r.n):new f(r.n,r.d),new g((n[!1]||[]).concat(r)).flatten()},collect:function(r){var t=this.recurse("collect",r).partition(),e=t[0].reduce(r);if(0===e.eval())return b.Zero;var n=t[1].flatten();if(!(n instanceof g))return new g(e,n).flatten();n=n.terms;var i=[];_.each(n,function(t){t instanceof d?i.push([t.base,t.exp]):i.push([t,b.One])});var u=_.groupBy(i,function(t){return t[0].normalize().print()}),s=_.compact(_.map(u,function(t){var e=t[0][0],n=new p(_.zip.apply(_,t)[1]).collect(r);return n instanceof b&&0===n.eval()?null:[e,n]})),a=(i=_.groupBy(s,function(t){return t[0]instanceof v&&t[0].isBasic()?"trig":t[0]instanceof m?"log":"expr"})).trig||[],o=i.log||[],c=i.expr||[];if(1<a.length){var l=_.groupBy(a,function(t){return t[0].arg.normalize().print()});a=[],_.each(l,function(t){var n=t[0][0].arg,e={sin:b.Zero,cos:b.Zero};_.each(t,function(t){e[t[0].type]=t[1]}),g.handleNegative(e.sin).collect(r).equals(e.cos)&&(e=e.cos.isNegative()?{tan:e.sin}:{cot:e.cos}),_.each(e,function(t,e){a.push([new v(e,n),t])})})}if(1<o.length){var h=_.groupBy(o,function(t){return t[0].base.normalize().print()});o=[],_.each(h,function(t){2===t.length&&g.handleNegative(t[0][1]).collect(r).equals(t[1][1])?t[0][1].isNegative()?o.push([new m(t[0][0].power,t[1][0].power),t[1][1]]):o.push([new m(t[1][0].power,t[0][0].power),t[0][1]]):o=o.concat(t)})}i=a.concat(o).concat(c);var f=_.map(i,function(t){return new d(t[0],t[1]).collect(r)});return new g([e].concat(f)).flatten()},isSubtract:function(){return _.any(this.terms,function(t){return t instanceof b&&t.hints.subtract})},factorIn:function(t){var e=this.partition()[0].terms;if(e.length&&_.all(e,function(t){return 0<t.n})){var n=e[0].negate();return n.hints=e[0].hints,this.replace(e[0],n.addHint(t))}return new g([b.negativeOne(t)].concat(this.terms))},factorOut:function(){var r=!1,t=_.compact(_.map(this.terms,function(t,e,n){return!r&&t instanceof b&&t.hints.divide?(r=!0,-1!==t.n?t.negate():null):t}));return 1===t.length?t[0]:new g(t)},reduce:function(n){return _.reduce(this.terms,function(t,e){return t.mul(e,n)},this.identity)},findGCD:function(t){return new g(_.invoke(this.terms,"findGCD",t)).flatten()},asMul:function(){return this},asPositiveFactor:function(){return this.isPositive()?this:new g(_.invoke(this.collect().terms,"asPositiveFactor")).flatten()},isNegative:function(){return _.any(_.invoke(this.collect().terms,"isNegative"))},fold:function(){return g.fold(this)},negate:function(){var t=function(t){return t instanceof b};if(_.any(this.terms,t)){var e=_.find(this.terms,t);return this.replace(e,e.negate())}return new g([b.Neg].concat(this.terms))}}),_.each([p,g],function(n){_.extend(n,{createOrAppend:function(t,e){return t instanceof n?new n(t.terms.concat(e)):new n(t,e)}})}),_.extend(g,{handleNegative:function(t,e){if(t instanceof b&&0<t.n){var n=t.negate();return n.hints=t.hints,n.addHint(e)}return t instanceof g?t.factorIn(e):new g(b.negativeOne(e),t)},handleDivide:function(t,e){if(e instanceof g){var n=g.handleDivide(t,e.terms[0]),r=new g(_.rest(e.terms)).flatten();return g.handleDivide(n,r)}var i=function(t){return t instanceof w};if(i(e)&&t instanceof g&&_.any(t.terms,i)){var u=t.terms.slice().reverse(),s=_.find(u,function(t){return t instanceof f});if(!i(s))return new g(t.terms.concat([new f(1,e.n).addHint("fraction")]));var a=new f(s.n,e.n);return a.hints=s.hints,s===u[0]&&(a=a.addHint("fraction")),s.n<0&&e.n<0?(a.d=-a.d,t.replace(s,[b.Neg,a])):t.replace(s,a)}var o=function(t,e){if(e instanceof w){if(t instanceof w)return t.n<0&&e.n<0?[b.Neg,new f(t.n,-e.n).addHint("fraction")]:[new f(t.n,e.n).addHint("fraction")];var n=new f(1,e.eval());return e.eval()<0?[t,n.addHint("negate")]:[t,n]}var r;if(e instanceof v&&e.exp){var i=e.exp;e.exp=I,e=new d(e,i)}return r=e instanceof d?new d(e.base,g.handleNegative(e.exp,"divide")):new d(e,b.Div),t instanceof w&&1===t.n?[r]:[t,r]};if(t instanceof g){var c=o(_.last(t.terms),e);return new g(_.initial(t.terms).concat(c))}return new g(c=o(t,e)).flatten()},fold:function(t){if(t instanceof g){var e=_.find(_.initial(t.terms),function(t){return(t instanceof v||t instanceof m)&&t.hints.open}),n=_.indexOf(t.terms,e);if(e){var r,i=_.last(t.terms);if(!(e.hints.parens||i.hints.parens||i.has(v)||i.has(m)))return r=e instanceof v?v.create([e.type,e.exp],g.createOrAppend(e.arg,i).fold()):m.create(e.base,g.createOrAppend(e.power,i).fold()),0===n?r:new g(t.terms.slice(0,n).concat(r)).fold();e.hints.open=!1}var u=t.partition()[0].terms,s=function(t){return 0<t.n},a=function(t){return-1===t.n&&t.hints.negate};if(1<u.length&&_.some(u,a)&&_.some(u,s)&&_.every(u,function(t){return s(t)||a(t)})){var o=_.indexOf(t.terms,_.find(t.terms,a)),c=_.indexOf(t.terms,_.find(t.terms,s));if(o<c)return t.replace(c,t.terms[c].negate()).remove(o)}}return t}}),d.prototype=new u,_.extend(d.prototype,{func:d,args:function(){return[this.base,this.exp]},eval:function(t,e){var n=this.base.eval(t,e),r=this.exp.eval(t,e);if(n<0){var i=this.exp.simplify();if(i instanceof c){var u=i.n,s=(u-u.toFixed()).toString().length-2,a=Math.pow(10,s);i=new f(u*a,a).simplify()}if(i instanceof f)if(Math.abs(i.d)%2==1)return(Math.abs(i.n)%2==1?-1:1)*Math.pow(-1*n,r)}return Math.pow(n,r)},getUnits:function(){return this.base.getUnits().map(function(t){return{unit:t.unit,pow:t.pow*this.exp.n}}.bind(this))},codegen:function(){return"Math.pow("+this.base.codegen()+", "+this.exp.codegen()+")"},print:function(){var t=this.base.print();return(this.base instanceof r||this.base instanceof d)&&(t="("+t+")"),t+"^("+this.exp.print()+")"},tex:function(){if(this.isDivide())return"\\frac{1}{"+this.asDivide().tex()+"}";if(this.isRoot())return 1!==this.exp.n&&n("Node marked with hint 'root' does not have exponent of form 1/x."),2===this.exp.d?"\\sqrt{"+this.base.tex()+"}":"\\sqrt["+this.exp.d+"]{"+this.base.tex()+"}";if(this.base instanceof v&&!this.base.isInverse()&&this.exp instanceof b&&this.exp.isSimple()&&0<=this.exp.eval()){var t=this.base.tex({split:!0});return t[0]+"^{"+this.exp.tex()+"}"+t[1]}var e=this.base.tex();return this.base instanceof r||this.base instanceof d||this.base instanceof b&&!this.base.isSimple()?e="("+e+")":(this.base instanceof v||this.base instanceof m)&&(e="["+e+"]"),e+"^{"+this.exp.tex()+"}"},needsExplicitMul:function(){return!this.isRoot()&&this.base.needsExplicitMul()},expand:function(){var e=this.recurse("expand");if(e.base instanceof g)return new g(_.map(e.base.terms,function(t){return new d(t,e.exp)})).expand();if(e.base instanceof p&&e.exp instanceof w&&1<e.exp.abs().eval()){for(var n=0<e.exp.eval(),t=e.exp.abs().eval(),r=function(t){return n?t:new d(t,b.Div)},i={1:e.base},u=2;u<=t;u*=2){var s=new g(i[u/2],i[u/2]);i[u]=s.expand().collect()}if(_.has(i,t))return r(i[t]);var a=_.map(t.toString(2).split(""),function(t,e,n){return Number(t)*Math.pow(2,n.length-e-1)});return a=_.without(a,0),r(s=new g(_.pick(i,a)).expand().collect())}return e.exp instanceof p?new g(_.map(e.exp.terms,function(t){return new d(e.base,t).expand()})).expand():e},factor:function(){var e=this.recurse("factor");return e.base instanceof g?new g(_.map(e.base.terms,function(t){return t instanceof w&&e.exp.equals(b.Div)?new f(1,t.n):new d(t,e.exp)})):e},collect:function(t){if(this.base instanceof d)return new d(this.base.base,i=g.createOrAppend(this.base.exp,this.exp)).collect(t);var e=this.recurse("collect",t),n=function(t){return t instanceof m&&t.base.equals(e.base)};if(e.exp instanceof b&&0===e.exp.eval())return b.One;if(e.exp instanceof b&&1===e.exp.eval())return e.base;if(n(e.exp))return e.exp.power;if(e.exp instanceof g&&_.any(e.exp.terms,n)){var r=_.find(e.exp.terms,n);return new d(r.power,i=e.exp.remove(r).flatten()).collect(t)}if(e.base instanceof b&&e.exp instanceof b){if(t&&t.preciseFloats){var i=e.exp.asRational();if(e.base.getDecimalPlaces()<new d(e.base,new f(1,i.d)).collect().getDecimalPlaces())return new d(new d(e.base,new w(i.n)).collect(),new f(1,i.d))}return e.base.raiseToThe(e.exp,t)}return e},isDivide:function(){var t=function(t){return t instanceof b&&t.hints.divide};return t(this.exp)||this.exp instanceof g&&_.any(this.exp.terms,t)},asDivide:function(){if(this.exp instanceof b){if(-1===this.exp.eval())return this.base;var t=this.exp.negate();return t.hints=_.clone(this.exp.hints),t.hints.divide=!1,new d(this.base,t)}if(this.exp instanceof g)return new d(this.base,this.exp.factorOut());n("called asDivide() on an Expr that wasn't a Num or Mul")},isRoot:function(){return this.exp instanceof f&&this.exp.hints.root},isSquaredTrig:function(){return this.base instanceof v&&!this.base.isInverse()&&this.exp instanceof b&&2===this.exp.eval()},getDenominator:function(){if(this.exp instanceof b&&-1===this.exp.eval())return g.createOrAppend(this.base,this.base.getDenominator()).flatten();if(this.exp.isNegative()){var t=new d(this.base,g.handleNegative(this.exp).collect());return g.createOrAppend(t,t.collect().getDenominator()).flatten()}return this.base instanceof b?new d(this.base.getDenominator(),this.exp).collect():b.One},findGCD:function(t){var e,n;if(n=t instanceof d?(e=t.base,t.exp):(e=t,b.One),this.base.equals(e)){if(this.exp.equals(n))return this;if(this.exp instanceof b&&n instanceof b)return new d(this.base,b.min(this.exp,n)).collect();if(this.exp instanceof b||n instanceof b)return b.One;var r=this.exp.asMul().partition(),i=n.asMul().partition();if(r[1].equals(i[1]))return new d(e,new g(b.min(r[0].reduce(),i[0].reduce()),r[1].flatten()).flatten()).collect()}return b.One},isPositive:function(){if(this.base.isPositive())return!0;var t=this.exp.simplify();return t instanceof w&&t.eval()%2==0},asPositiveFactor:function(){if(this.isPositive())return this;var t=this.exp.simplify();if(t instanceof w){var e=t.eval();if(2<e)return new d(this.base,new w(e-1));if(e<-2)return new d(this.base,new w(e+1))}return b.One}}),_.extend(d,{sqrt:function(t){return new d(t,b.Sqrt)},nthroot:function(t,e){return new d(t,g.fold(g.handleDivide(new w(1),e)).addHint("root"))}}),m.prototype=new u,_.extend(m.prototype,{func:m,args:function(){return[this.base,this.power]},eval:function(t,e){return Math.log(this.power.eval(t,e))/Math.log(this.base.eval(t,e))},codegen:function(){return"(Math.log("+this.power.codegen()+") / Math.log("+this.base.codegen()+"))"},print:function(){var t="("+this.power.print()+")";return this.isNatural()?"ln"+t:"log_("+this.base.print()+") "+t},tex:function(){var t="("+this.power.tex()+")";return this.isNatural()?"\\ln"+t:"\\log_{"+this.base.tex()+"}"+t},collect:function(t){var e=this.recurse("collect",t);return e.power instanceof b&&1===e.power.eval()?b.Zero:e.base.equals(e.power)?b.One:e.power instanceof d&&e.power.base.equals(e.base)?e.power.exp:e},expand:function(){var e=this.recurse("expand");return e.power instanceof g?new p(_.map(e.power.terms,function(t){return new m(e.base,t).expand()})):e.power instanceof d?new g(e.power.exp,new m(e.base,e.power.base).expand()).flatten():e.isNatural()?e:g.handleDivide(new m(a.e,e.power),new m(a.e,e.base))},hints:_.extend(m.prototype.hints,{open:!1}),isPositive:function(){var t=this.collect();return t.base instanceof b&&t.power instanceof b&&0<this.eval()},needsExplicitMul:function(){return!1},isNatural:function(){return this.base.equals(a.e)}}),_.extend(m,{natural:function(){return a.e},common:function(){return b.Ten},create:function(t,e){var n=new m(t,e);return e.hints.parens||(n=n.addHint("open")),n}}),v.prototype=new u,_.extend(v.prototype,{func:v,args:function(){return[this.type,this.arg]},functions:{sin:{eval:Math.sin,codegen:"Math.sin((",tex:"\\sin",expand:function(){return this}},cos:{eval:Math.cos,codegen:"Math.cos((",tex:"\\cos",expand:function(){return this}},tan:{eval:Math.tan,codegen:"Math.tan((",tex:"\\tan",expand:function(){return g.handleDivide(v.sin(this.arg),v.cos(this.arg))}},csc:{eval:function(t){return 1/Math.sin(t)},codegen:"(1/Math.sin(",tex:"\\csc",expand:function(){return g.handleDivide(b.One,v.sin(this.arg))}},sec:{eval:function(t){return 1/Math.cos(t)},codegen:"(1/Math.cos(",tex:"\\sec",expand:function(){return g.handleDivide(b.One,v.cos(this.arg))}},cot:{eval:function(t){return 1/Math.tan(t)},codegen:"(1/Math.tan(",tex:"\\cot",expand:function(){return g.handleDivide(v.cos(this.arg),v.sin(this.arg))}},arcsin:{eval:Math.asin,codegen:"Math.asin((",tex:"\\arcsin"},arccos:{eval:Math.acos,codegen:"Math.acos((",tex:"\\arccos"},arctan:{eval:Math.atan,codegen:"Math.atan((",tex:"\\arctan"},arccsc:{eval:function(t){return Math.asin(1/t)},codegen:"Math.asin(1/(",tex:"\\operatorname{arccsc}"},arcsec:{eval:function(t){return Math.acos(1/t)},codegen:"Math.acos(1/(",tex:"\\operatorname{arcsec}"},arccot:{eval:function(t){return Math.atan(1/t)},codegen:"Math.atan(1/(",tex:"\\operatorname{arccot}"},sinh:{eval:function(t){return(Math.exp(t)-Math.exp(-t))/2},codegen:function(t){return"((Math.exp("+t+") - Math.exp(-("+t+"))) / 2)"},tex:"\\sinh",expand:function(){return this}},cosh:{eval:function(t){return(Math.exp(t)+Math.exp(-t))/2},codegen:function(t){return"((Math.exp("+t+") + Math.exp(-("+t+"))) / 2)"},tex:"\\cosh",expand:function(){return this}},tanh:{eval:function(t){return(Math.exp(t)-Math.exp(-t))/(Math.exp(t)+Math.exp(-t))},codegen:function(t){return"((Math.exp("+t+") - Math.exp(-("+t+"))) / (Math.exp("+t+") + Math.exp(-("+t+"))))"},tex:"\\tanh",expand:function(){return g.handleDivide(v.sinh(this.arg),v.cosh(this.arg))}},csch:{eval:function(t){return 2/(Math.exp(t)-Math.exp(-t))},codegen:function(t){return"(2 / (Math.exp("+t+") - Math.exp(-("+t+"))))"},tex:"\\csch",expand:function(){return g.handleDivide(b.One,v.sinh(this.arg))}},sech:{eval:function(t){return 2/(Math.exp(t)+Math.exp(-t))},codegen:function(t){return"(2 / (Math.exp("+t+") + Math.exp(-("+t+"))))"},tex:"\\sech",expand:function(){return g.handleDivide(b.One,v.cosh(this.arg))}},coth:{eval:function(t){return(Math.exp(t)+Math.exp(-t))/(Math.exp(t)-Math.exp(-t))},codegen:function(t){return"((Math.exp("+t+") + Math.exp(-("+t+"))) / (Math.exp("+t+") - Math.exp(-("+t+"))))"},tex:"\\coth",expand:function(){return g.handleDivide(v.cosh(this.arg),v.sinh(this.arg))}}},isEven:function(){return _.contains(["cos","sec"],this.type)},isInverse:function(){return 0===this.type.indexOf("arc")},isBasic:function(){return _.contains(["sin","cos"],this.type)},eval:function(t,e){return(0,this.functions[this.type].eval)(this.arg.eval(t,e))},codegen:function(){var t=this.functions[this.type].codegen;if("function"==typeof t)return t(this.arg.codegen());if("string"==typeof t)return t+this.arg.codegen()+"))";throw new Error("codegen not implemented for "+this.type)},print:function(){return this.type+"("+this.arg.print()+")"},tex:function(t){var e=this.functions[this.type].tex,n="("+this.arg.tex()+")";return t&&t.split?[e,n]:e+n},hints:_.extend(v.prototype.hints,{open:!1}),isPositive:function(){return this.collect().arg instanceof b&&0<this.eval()},completeParse:function(){if(this.exp){var t=new d(this,this.exp);return this.exp=I,t}return this},needsExplicitMul:function(){return!1},expand:function(){var t=this.recurse("expand");if(t.isInverse())return t;var e=t.functions[t.type].expand;return _.bind(e,t)()},collect:function(t){var e,n=this.recurse("collect",t);return n.isInverse()||!n.arg.isNegative()?n:(e=n.arg instanceof b?n.arg.abs():g.handleDivide(n.arg,b.Neg).collect(t),n.isEven()?new v(n.type,e):new g(b.Neg,new v(n.type,e)))}}),_.extend(v,{create:function(t,e){var n=t[0],r=t[1];r&&r.equals(b.Neg)&&(n="arc"+n,r=I);var i=new v(n,e);return e.hints.parens||(i=i.addHint("open")),r&&(i.exp=r),i},sin:function(t){return new v("sin",t)},cos:function(t){return new v("cos",t)},sinh:function(t){return new v("sinh",t)},cosh:function(t){return new v("cosh",t)}}),i.prototype=new u,_.extend(i.prototype,{func:i,args:function(){return[this.arg]},eval:function(t,e){return Math.abs(this.arg.eval(t,e))},codegen:function(){return"Math.abs("+this.arg.codegen()+")"},print:function(){return"abs("+this.arg.print()+")"},tex:function(){return"\\left|"+this.arg.tex()+"\\right|"},collect:function(t){var e=this.recurse("collect",t);if(e.arg.isPositive())return e.arg;if(e.arg instanceof b)return e.arg.abs();if(e.arg instanceof g){var n=_.groupBy(e.arg.terms,function(t){return t.isPositive()?"positive":t instanceof b?"number":"other"}),r=n.positive.concat(_.invoke(n.number,"abs"));return n.other.length&&r.push(new i(new g(n.other).flatten())),new g(r).flatten()}return e},expand:function(){var t=this.recurse("expand");return t.arg instanceof g?new g(_.map(t.arg.terms,function(t){return new i(t)})):t},isPositive:function(){return!0}}),x.prototype=new u,_.extend(x.prototype,{func:x,args:function(){return[this.left,this.type,this.right]},needsExplicitMul:function(){return!1},print:function(){return this.left.print()+this.type+this.right.print()},signs:{"=":" = ","<":" < ",">":" > ","<>":" \\ne ","<=":" \\le ",">=":" \\ge "},tex:function(){return this.left.tex()+this.signs[this.type]+this.right.tex()},normalize:function(){var t=this.recurse("normalize");return _.contains([">",">="],t.type)?new x(t.right,t.type.replace(">","<"),t.left):t},asExpr:function(t){var e=function(t){return t instanceof b&&t.isSimple()&&0===t.eval()},n=[];this.left instanceof p?n=_.clone(this.left.terms):e(this.left)||(n=[this.left]),this.right instanceof p?n=n.concat(this.right.negate().terms):e(this.right)||n.push(this.right.negate());var r=!this.isEquality();n=_.invoke(n,"collect",{preciseFloats:!0});for(var i=0;i<n.length;i++){var u=n[i].getDenominator();r&&!u.isPositive()&&(u=u.asPositiveFactor()),u.equals(b.One)||(n=_.map(n,function(t){return g.createOrAppend(t,u).simplify({once:!0,preciseFloats:!0})}))}var s=new p(n).flatten();return t?s:this.divideThrough(s)},divideThrough:function(t){var e=!this.isEquality(),n=t.simplify({once:!0}),r=n.factor({keepNegative:e});if(!(r instanceof g))return t;var i=r.terms,u=_.groupBy(i,function(t){return t instanceof p}),s=u[!0]||[],a=u[!1]||[];if(s.length&&this.isEquality())return new g(s).flatten();var o=a;s.length||(o=_.reject(o,function(t){return!!t.getVars().length})),e&&(o=_.invoke(o,"asPositiveFactor")),o=_.reject(o,function(t){return t.equals(b.One)}),o=_.map(o,function(t){return new d(t,b.Div)});var c=new g(i.concat(o)).collect();return c.equals(r)?n:c},isEquality:function(){return _.contains(["=","<>"],this.type)},compare:function(t){if(!(t instanceof x))return!1;var e=this.normalize(),n=t.normalize();if(e.type!==n.type)return!1;var r=e.divideThrough(e.asExpr(!0).collect()),i=n.divideThrough(n.asExpr(!0).collect());return e.isEquality()?r.compare(i)||r.compare(g.handleNegative(i)):r.compare(i)},sameForm:function(t){var e=this.normalize(),n=t.normalize(),r=e.left.sameForm(n.left)&&e.right.sameForm(n.right);return e.isEquality()?r||e.left.sameForm(n.right)&&e.right.sameForm(n.left):r},isSimplified:function(){var t=this.asExpr(!0),e=this.divideThrough(t).simplify();return t.equals(e)&&this.left.isSimplified()&&this.right.isSimplified()}}),_.extend(x.prototype,{solveLinearEquationForVariable:function(t){var e=this.asExpr();if(!e.is(p)||2!==e.terms.length)throw new Error("Can only handle linear equations of the form a + bx (= 0)");var n,r,i;return r=(i=e.terms[0]).has(s)&&_.contains(i.getVars(),t.symbol)?(n=g.handleNegative(e.terms[1]),g.handleDivide(e.terms[0],t)):(n=g.handleNegative(e.terms[0]),g.handleDivide(e.terms[1],t)),g.handleDivide(n,r).simplify()}}),e.prototype=new u,_.extend(e.prototype,{needsExplicitMul:function(){return!1},findGCD:function(t){return t instanceof e||t instanceof b?this.equals(t)?this:b.One:t.findGCD(this)}}),E.prototype=new e,_.extend(E.prototype,{func:E,args:function(){return[this.symbol,this.arg]},print:function(){return this.symbol+"("+this.arg.print()+")"},tex:function(){return this.symbol+"("+this.arg.tex()+")"},eval:function(t,e){var n=this.arg,r=t[this.symbol],i=_.extend(_.clone(t),{x:n.eval(t,e)}),u=o.parse(r,e);return u.parsed?u.expr.eval(i,e):u},codegen:function(){return'vars["'+this.symbol+'"]('+this.arg.codegen()+")"},getUnits:function(){return this.arg.getUnits()},getVars:function(t){return t?this.arg.getVars():_.union(this.arg.getVars(),[this.symbol]).sort()},getConsts:function(){return this.arg.getConsts()}}),s.prototype=new e,_.extend(s.prototype,{func:s,args:function(){return[this.symbol,this.subscript]},exprArgs:function(){return[]},recurse:function(){return this},print:function(){var t="";return this.subscript&&(t="_("+this.subscript.print()+")"),this.symbol+t},prettyPrint:function(){var t=this.subscript;return t&&(t instanceof b||t instanceof e)?this.symbol+"_"+t.print():this.print()},tex:function(){var t="";return this.subscript&&(t="_{"+this.subscript.tex()+"}"),(1<this.symbol.length?"\\":"")+this.symbol+t},repr:function(){return"Var("+this.print()+")"},eval:function(t,e){return t[this.prettyPrint()]},codegen:function(){return'vars["'+this.prettyPrint()+'"]'},getVars:function(){return[this.prettyPrint()]},isPositive:function(){return!1}}),a.prototype=new e,_.extend(a.prototype,{func:a,args:function(){return[this.symbol]},recurse:function(){return this},eval:function(t,e){return"pi"===this.symbol?Math.PI:"e"===this.symbol?Math.E:void 0},codegen:function(){return"pi"===this.symbol?"Math.PI":"e"===this.symbol?"Math.E":void 0},print:function(){return this.symbol},tex:function(){return"pi"===this.symbol?"\\pi ":"e"===this.symbol?"e":void 0},isPositive:function(){return 0<this.eval()},abs:function(){return 0<this.eval()?this:g.handleNegative(this)},getConsts:function(){return[this.print()]}}),a.e=new a("e"),a.pi=new a("pi"),b.prototype=new u,_.extend(b.prototype,{repr:function(){return this.print()},strip:function(){return this.abs()},recurse:function(){return this},codegen:function(){return this.print()},add:t,mul:t,negate:t,isSubtract:function(){return this.hints.subtract},abs:t,needsExplicitMul:function(){return!0},findGCD:t,isPositive:function(){return 0<this.eval()},isNegative:function(){return this.eval()<0},asPositiveFactor:function(){return this.isPositive()?this:this.abs()},hints:_.extend(b.prototype.hints,{negate:!1,subtract:!1,divide:!1,root:!1,fraction:!1,entered:!1}),isSimple:t,getDecimalPlaces:function(){var t=(""+this.n).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return t?Math.max(0,(t[1]?t[1].length:0)-(t[2]?+t[2]:0)):0},asRational:t}),f.prototype=new b,_.extend(f.prototype,{func:f,args:function(){return[this.n,this.d]},eval:function(){return this.n/this.d},print:function(){return this.n.toString()+"/"+this.d.toString()},tex:function(){var t="\\frac{"+Math.abs(this.n).toString()+"}{"+this.d.toString()+"}";return this.n<0?"-"+t:t},add:function(t,e){return t instanceof f?new f(this.n*t.d+this.d*t.n,this.d*t.d).collect():t.add(this,e)},mul:function(t,e){return t instanceof f?new f(this.n*t.n,this.d*t.d).collect():t.mul(this,e)},collect:function(){var t=b.findGCD(this.n,this.d),e=this.n/t,n=this.d/t;return 1===n?new w(e):new f(e,n)},negate:function(){return new f(-this.n,this.d)},abs:function(){return new f(Math.abs(this.n),this.d)},findGCD:function(t){return t instanceof f?new f(b.findGCD(this.n*t.d,t.n*this.d),this.d*t.d).collect():t instanceof w?new f(b.findGCD(this.n,t.n),this.d):t.findGCD(this)},raiseToThe:function(t){if(t instanceof w){var e=0<t.eval(),n=t.abs().eval(),r=Math.pow(this.n,n),i=Math.pow(this.d,n);return e?new f(r,i).collect():new f(i,r).collect()}return new c(this.eval()).raiseToThe(t)},getDenominator:function(){return new w(this.d)},isSimple:function(){return!1},asRational:function(){return this}}),w.prototype=new f(0,1),_.extend(w.prototype,{func:w,args:function(){return[this.n]},print:function(){return this.n.toString()},tex:function(){return this.n.toString()},negate:function(){return new w(-this.n)},abs:function(){return new w(Math.abs(this.n))},isSimple:function(){return!0},findGCD:function(t){return t instanceof w?new w(b.findGCD(this.n,t.n)):t.findGCD(this)}}),_.extend(w,{create:function(t){return new w(t).addHint("entered")}}),c.prototype=new b,_.extend(c.prototype,{func:c,args:function(){return[this.n]},eval:function(){return this.n},print:function(){return this.n.toString()},tex:function(){return this.n.toString()},add:function(t,e){return e&&e.preciseFloats?c.toDecimalPlaces(this.n+t.eval(),Math.max(this.getDecimalPlaces(),t.getDecimalPlaces())):new c(this.n+t.eval()).collect()},mul:function(t,e){return e&&e.preciseFloats?c.toDecimalPlaces(this.n*t.eval(),this.getDecimalPlaces()+t.getDecimalPlaces()):new c(this.n*t.eval()).collect()},collect:function(){return this},negate:function(){return new c(-this.n)},abs:function(){return new c(Math.abs(this.n))},findGCD:function(t){return t instanceof b?new c(b.findGCD(this.eval(),t.eval())).collect():t.findGCD(this)},raiseToThe:function(t,e){return e&&e.preciseFloats&&t instanceof w&&1<t.n?c.toDecimalPlaces(new d(this,t).eval(),this.getDecimalPlaces()*t.n):new c(new d(this,t).eval()).collect()},asRational:function(){var t=this.n.toString().split(".");return 1===t.length?new f(this.n,1):new f(Number(t.join("")),Math.pow(10,t[1].length)).collect()},getDenominator:function(){return this.asRational().getDenominator()},isSimple:function(){return!0}}),_.extend(c,{create:function(t){return new c(t).addHint("entered")},toDecimalPlaces:function(t,e){return new c(+t.toFixed(Math.min(e,20))).collect()}}),_.extend(b,{negativeOne:function(t){return"subtract"===t?b.Sub:"divide"===t?b.Div:b.Neg},findGCD:function(t,e){var n;if(t=Math.abs(t),e=Math.abs(e),t!==Math.floor(t)||e!==Math.floor(e))return 1;for(;e;)n=t%e,t=e,e=n;return t},min:function(){return _.min(_.toArray(arguments),function(t){return t.eval()})},max:function(){return _.max(_.toArray(arguments),function(t){return t.eval()})}}),b.Neg=new w(-1).addHint("negate"),b.Sub=new w(-1).addHint("subtract"),b.Div=new w(-1).addHint("divide"),b.Sqrt=new f(1,2).addHint("root"),b.Zero=new w(0),b.One=new w(1),b.Ten=new w(10),p.prototype.identity=b.Zero,g.prototype.identity=b.One;var l=o.parser;function A(t){this.symbol=t}l.yy={Add:p,Mul:g,Pow:d,Log:m,Trig:v,Eq:x,Abs:i,Func:E,Const:a,Var:s,Int:w,Float:c,parseError:function(t,e){throw new Error(e.loc.first_column)},constants:["e"],symbolLexer:function(t){return _.contains(l.yy.constants,t)?"CONST":_.contains(l.yy.functions,t)?"FUNC":"VAR"}},o.parse=function(t,e){try{return e&&e.functions?l.yy.functions=_.without(e.functions,"i"):l.yy.functions=[],e&&e.decimal_separator&&(t=t.split(e.decimal_separator).join(".")),{parsed:!0,expr:l.parse(t).completeParse()}}catch(t){return{parsed:!1,error:t.message}}},A.prototype=new e;var h=function(e){if(_(F).has(e)||_(M).has(e))return new A(e);var t=_(_(D).keys()).find(function(t){return new RegExp("^"+t).test(e)});if(t){var n=e.replace(new RegExp("^"+t),"");if(_(F).has(n)||M[n]&&M[n].prefixes===k)return new g(D[t],new A(n));throw new Error(n+" does not allow prefixes")}return new A(e)};o.unitParse=function(t){try{var e=o.unitParser.parse(t),n=[];_(e.unit.num).each(function(t){n.push(new d(h(t.name),new w(t.pow)))}),_(e.unit.denom).each(function(t){n.push(new d(h(t.name),new w(-1*t.pow)))});var r=new g(n).flatten();return"unitMagnitude"!==e.type?{parsed:!0,unit:r,type:e.type}:{parsed:!0,unit:r,expr:new g([new c(+e.magnitude)].concat(n)),coefficient:e.magnitude,type:e.type}}catch(t){return{parsed:!1,error:t.message}}},_.extend(A.prototype,{func:A,args:function(){return[this.symbol]},recurse:function(){return this},eval:function(t,e){return 1},getUnits:function(){return[{unit:this.symbol,pow:1}]},codegen:function(){return"1"},print:function(){return this.symbol},tex:function(){return this.symbol},collect:function(t){if(_(F).has(this.symbol))return this;if(_(M).has(this.symbol))return M[this.symbol].conversion;throw new Error("could not understand unit: "+this.symbol)}});var F={m:new A("m"),g:new A("g"),s:new A("s"),A:new A("A"),K:new A("K"),mol:new A("mol"),cd:new A("cd")},D={a:new d(new w(10),new w(-18)),f:new d(new w(10),new w(-15)),p:new d(new w(10),new w(-12)),n:new d(new w(10),new w(-9)),u:new d(new w(10),new w(-6)),m:new d(new w(10),new w(-3)),c:new d(new w(10),new w(-2)),d:new d(new w(10),new w(-1)),da:new w(10),h:new d(new w(10),new w(2)),k:new d(new w(10),new w(3)),M:new d(new w(10),new w(6)),G:new d(new w(10),new w(9)),T:new d(new w(10),new w(12)),P:new d(new w(10),new w(15)),E:new d(new w(10),new w(18)),hella:new d(new w(10),new w(27))},k={},C={},S=function(t,e){var n=t.split("|"),r=n[0].trim(),i=n[1].trim(),u=b.One;""!==r&&(u=o.parse(r).expr);var s=i.split("/"),a=[u];return s[0]&&s[0].split(" ").filter(function(t){return""!==t}).map(function(t){a.push(new A(t))}),s[1]&&s[1].split(" ").filter(function(t){return""!==t}).map(function(t){a.push(new d(new A(t),b.Div))}),{conversion:new g(a),prefixes:e}},M={Da:S("1.6605388628 x 10^-24 | g",k),u:S("| Da",C),meter:S("| m",C),meters:S("| m",C),in:S("254 / 10000 | m",C),ft:S("3048  / 10000 | m",C),yd:S("9144  / 10000 | m",C),mi:S("1609344 / 1000 | m",C),ly:S("9.4607 x 10^15 | m",C),nmi:S("1852 | m",C),"Å":S("10^-10 | m",C),pc:S("3.0857 x 10^16 | m",C),min:S("60 | s",C),hr:S("3600 | s",C),sec:S("| s",C),day:S("86400 | s",C),wk:S("604800 | s",C),fortnight:S("14 | day",C),shake:S("10^-8 | s",C),olympiad:S("126200000 | s",C),"°C":S("1 | K",C),"°F":S("5/9 | K",C),"°R":S("5/9 | K",C),e:S("1.6021765314 x 10^-19 | C",C),c:S("299792458 | m / s",C),kn:S("514/1000 | m / s",C),kt:S("| kn",C),knot:S("| kn",C),J:S("| N m",k),BTU:S("1060 | J",C),cal:S("4184 / 1000 | J",k),eV:S("1.602176514 x 10^-19 | J",k),erg:S("10^−7 | J",k),W:S("| J / s",k),"H-e":S("80 | W",C),N:S("1000 | g m / s s",k),lb:S("4448221615 / 1000000000 | N",C),dyn:S("10^-5 | N",C),Pa:S("1 | N / m m m",k),bar:S("10^5 | Pa",k),"㏔":S("1/1000 | bar",C),"㍴":S("| bar",C),atm:S("101325 | Pa",C),Torr:S("1/760 | atm",C),mmHg:S("| Torr",C),ha:S("10^4 | m m",C),b:S("10^−28 | m m",k),barn:S("| b",k),acre:S("4046.87 | m m",C),skilodge:S("10^-31 | m m",C),outhouse:S("10^-34 | m m",C),shed:S("10^-52 | m m",C),L:S("1/1000 | m m m",k),gal:S("3785/1000 | L",k),cup:S("1/16 | gal",C),qt:S("1/4 | gal",C),quart:S("| qt",C),p:S("1/8 | gal",C),pt:S("| p",C),pint:S("| p",C),"fl oz":S("1/8 | cup",C),"fl. oz.":S("1/8 | cup",C),tbsp:S("1/16 | cup",C),tsp:S("1/3 | tbsp",C),rev:S("2 pi | rad",C),deg:S("180 pi | rad",C),"°":S("| deg",C),arcminute:S("1/60 | deg",C),arcsec:S("1/3600 | deg",C),Hu:S("1000 | dB",k),dozen:S("12 |",C),mol:S("6.0221412927 x 10^23 |",k),"%":S("1/100 |",C),percent:S("| %",C),ppm:S("1/1000000 |",C),V:S("1000 | g m m / s s C",k),C:S("| A s",k),ampere:S("| A",C),"Ω":S("| V / A",k),ohm:S("| Ω",C),F:S("| C / V",k),H:S("| ohm s",k),T:S("1000 | g / C s",k),Wb:S("1000 | g m m / C s",k),lm:S("pi x 10^4 | cd / m m",C),lx:S("| lm / m m",C),nit:S("| cd / m m",C),sb:S("10^4 | cd / m m",C),stilb:S("1 | sb",C),apostilb:S("1 / pi x 10^(-4) | sb",C),blondel:S("| apostilb",C),asb:S("| apostilb",C),la:S("| lm",C),Lb:S("| lm",C),sk:S("10^-7 | lm",C),skot:S("| sk",C),bril:S("10^-11 | lm",C),Hz:S("| / s",k)};o.Add=p,o.Mul=g,o.Pow=d,o.Log=m,o.Eq=x,o.Trig=v,o.Abs=i,o.Func=E,o.Var=s,o.Const=a,o.Unit=A,o.Rational=f,o.Int=w,o.Float=c,o.Zero=b.Zero,o.One=b.One}(t.KAS),t.KAS.compare=function(t,e,n){var r={form:!1,simplify:!1};n=n!==I?_.extend(r,n):r;var i=t.sameVars(e);if(i.equal)return t.compare(e)?n.form&&!t.sameForm(e)?{equal:!1,message:"Your answer is not in the correct form."}:n.simplify&&!t.isSimplified()?{equal:!1,message:"Your answer is not fully expanded and simplified."}:{equal:!0,message:null}:{equal:!1,message:null};var u=null;return i.equalIgnoringCase&&(u="Some of your variables are in the wrong case (upper vs. lower)."),{equal:!1,message:u}}}(this),function(i,e){"use strict";if(i.hasOwnProperty("ActiveXObject")&&(i.ActiveXObject=e),i.Blob=e,i.clearInterval=e,i.clearTimeout=e,i.eval=e,i.fetch&&(i.fetch=e),i.Function=e,i.importScripts=e,i.indexedDB)try{i.indexedDB=e}catch(t){i.indexedDB.open=e,i.indexedDB.deleteDatabase=e,i.indexedDB.cmp=e,i.indexedDB.webkitGetDatabaseNames=e}if(i.mozIndexedDB)try{i.mozIndexedDB=e}catch(t){i.mozIndexedDB.open=e,i.mozIndexedDB.deleteDatabase=e,i.mozIndexedDB.cmp=e}if(i.msIndexedDB)try{i.msIndexedDB=e}catch(t){i.msIndexedDB.open=e,i.msIndexedDB.deleteDatabase=e,i.msIndexedDB.cmp=e}if(i.requestFileSystem&&(i.requestFileSystem=e),i.requestFileSystemSync&&(i.requestFileSystemSync=e),i.resolveLocalFileSystemURL&&(i.resolveLocalFileSystemURL=e),i.resolveLocalFileSystemSyncURL&&(i.resolveLocalFileSystemSyncURL=e),i.setInterval=e,i.setTimeout=e,i.XMLHttpRequest=e,i.webkitIndexedDB)try{i.webkitIndexedDB=e}catch(t){i.webkitIndexedDB.open=e,i.webkitIndexedDB.deleteDatabase=e,i.webkitIndexedDB.cmp=e,i.webkitIndexedDB.webkitGetDatabaseNames=e}i.webkitRequestFileSystem&&(i.webkitRequestFileSystem=e),i.webkitRequestFileSystemSync&&(i.webkitRequestFileSystemSync=e),i.webkitResolveLocalFileSystemURL&&(i.webkitResolveLocalFileSystemURL=e),i.webkitResolveLocalFileSystemSyncURL&&(i.webkitResolveLocalFileSystemSyncURL=e),i.Worker&&(i.Worker=e),i.soundex=function(t){if(!(t=(t+"").toUpperCase()))return"";for(var e,n,r,i=[0,0,0,0],u={B:1,F:1,P:1,V:1,C:2,G:2,J:2,K:2,Q:2,S:2,X:2,Z:2,D:3,T:3,L:4,M:5,N:5,R:6},s=0,a=0;(n=t.charAt(s++))&&a<4;)(e=u[n])?e!==r&&(i[a++]=r=e):(a+=1===s,r=0);return i[0]=t.charAt(0),i.join("")},i.metaphone=function(t,e){var n=typeof t;if("undefined"===n||"object"===n&&null!==t)return null;if("number"===n&&(isNaN(t)?t="NAN":isFinite(t)||(t="INF")),e<0)return!1;e=Math.floor(+e)||0;var r="ABCDEFGHIJKLMNOPQRSTUVWXYZ",i="AEIOU",u=new RegExp("^[^"+r+"]+");if(!(t=(t="string"==typeof t?t:"").toUpperCase().replace(u,"")))return"";var s,a,o=function(t,e){return""!==e&&-1!==t.indexOf(e)},c=0,l=t.charAt(0),h=t.charAt(1),f=t.length,p="";switch(l){case"A":p+="E"===h?h:l,c+=1;break;case"G":case"K":case"P":"N"===h&&(p+=h,c+=2);break;case"W":"R"===h?(p+=h,c+=2):("H"===h||o(i,h))&&(p+="W",c+=2);break;case"X":p+="S",c+=1;break;case"E":case"I":case"O":case"U":p+=l,c++}for(;c<f&&(0===e||p.length<e);c+=1)if(l=t.charAt(c),h=t.charAt(c+1),a=t.charAt(c-1),s=t.charAt(c+2),l!==a||"C"===l)switch(l){case"B":"M"!==a&&(p+=l);break;case"C":o("EIY",h)?"I"===h&&"A"===s?p+="X":"S"!==a&&(p+="S"):"H"===h?(p+="X",c+=1):p+="K";break;case"D":"G"===h&&o("EIY",s)?(p+="J",c+=1):p+="T";break;case"G":"H"===h?o("BDH",t.charAt(c-3))||"H"===t.charAt(c-4)||(p+="F",c+=1):"N"===h?o(r,s)&&"NED"!==t.substr(c+1,3)&&(p+="K"):o("EIY",h)&&"G"!==a?p+="J":p+="K";break;case"H":o(i,h)&&!o("CGPST",a)&&(p+=l);break;case"K":"C"!==a&&(p+="K");break;case"P":p+="H"===h?"F":l;break;case"Q":p+="K";break;case"S":"I"===h&&o("AO",s)?p+="X":"H"===h?(p+="X",c+=1):p+="S";break;case"T":"I"===h&&o("AO",s)?p+="X":"H"===h?(p+="0",c+=1):"CH"!==t.substr(c+1,2)&&(p+="T");break;case"V":p+="F";break;case"W":case"Y":o(i,h)&&(p+=l);break;case"X":p+="KS";break;case"Z":p+="S";break;case"F":case"J":case"L":case"M":case"N":case"R":p+=l}return p},i.removeDiacritics=function(t){var e={A:/[\u0041\u24B6\uFF21\u00C0\u00C1\u00C2\u1EA6\u1EA4\u1EAA\u1EA8\u00C3\u0100\u0102\u1EB0\u1EAE\u1EB4\u1EB2\u0226\u01E0\u00C4\u01DE\u1EA2\u00C5\u01FA\u01CD\u0200\u0202\u1EA0\u1EAC\u1EB6\u1E00\u0104\u023A\u2C6F]/g,AA:/[\uA732]/g,AE:/[\u00C6\u01FC\u01E2]/g,AO:/[\uA734]/g,AU:/[\uA736]/g,AV:/[\uA738\uA73A]/g,AY:/[\uA73C]/g,B:/[\u0042\u24B7\uFF22\u1E02\u1E04\u1E06\u0243\u0182\u0181]/g,C:/[\u0043\u24B8\uFF23\u0106\u0108\u010A\u010C\u00C7\u1E08\u0187\u023B\uA73E]/g,D:/[\u0044\u24B9\uFF24\u1E0A\u010E\u1E0C\u1E10\u1E12\u1E0E\u0110\u018B\u018A\u0189\uA779]/g,DZ:/[\u01F1\u01C4]/g,Dz:/[\u01F2\u01C5]/g,E:/[\u0045\u24BA\uFF25\u00C8\u00C9\u00CA\u1EC0\u1EBE\u1EC4\u1EC2\u1EBC\u0112\u1E14\u1E16\u0114\u0116\u00CB\u1EBA\u011A\u0204\u0206\u1EB8\u1EC6\u0228\u1E1C\u0118\u1E18\u1E1A\u0190\u018E]/g,F:/[\u0046\u24BB\uFF26\u1E1E\u0191\uA77B]/g,G:/[\u0047\u24BC\uFF27\u01F4\u011C\u1E20\u011E\u0120\u01E6\u0122\u01E4\u0193\uA7A0\uA77D\uA77E]/g,H:/[\u0048\u24BD\uFF28\u0124\u1E22\u1E26\u021E\u1E24\u1E28\u1E2A\u0126\u2C67\u2C75\uA78D]/g,I:/[\u0049\u24BE\uFF29\u00CC\u00CD\u00CE\u0128\u012A\u012C\u0130\u00CF\u1E2E\u1EC8\u01CF\u0208\u020A\u1ECA\u012E\u1E2C\u0197]/g,J:/[\u004A\u24BF\uFF2A\u0134\u0248]/g,K:/[\u004B\u24C0\uFF2B\u1E30\u01E8\u1E32\u0136\u1E34\u0198\u2C69\uA740\uA742\uA744\uA7A2]/g,L:/[\u004C\u24C1\uFF2C\u013F\u0139\u013D\u1E36\u1E38\u013B\u1E3C\u1E3A\u0141\u023D\u2C62\u2C60\uA748\uA746\uA780]/g,LJ:/[\u01C7]/g,Lj:/[\u01C8]/g,M:/[\u004D\u24C2\uFF2D\u1E3E\u1E40\u1E42\u2C6E\u019C]/g,N:/[\u004E\u24C3\uFF2E\u01F8\u0143\u00D1\u1E44\u0147\u1E46\u0145\u1E4A\u1E48\u0220\u019D\uA790\uA7A4]/g,NJ:/[\u01CA]/g,Nj:/[\u01CB]/g,O:/[\u004F\u24C4\uFF2F\u00D2\u00D3\u00D4\u1ED2\u1ED0\u1ED6\u1ED4\u00D5\u1E4C\u022C\u1E4E\u014C\u1E50\u1E52\u014E\u022E\u0230\u00D6\u022A\u1ECE\u0150\u01D1\u020C\u020E\u01A0\u1EDC\u1EDA\u1EE0\u1EDE\u1EE2\u1ECC\u1ED8\u01EA\u01EC\u00D8\u01FE\u0186\u019F\uA74A\uA74C]/g,OI:/[\u01A2]/g,OO:/[\uA74E]/g,OU:/[\u0222]/g,P:/[\u0050\u24C5\uFF30\u1E54\u1E56\u01A4\u2C63\uA750\uA752\uA754]/g,Q:/[\u0051\u24C6\uFF31\uA756\uA758\u024A]/g,R:/[\u0052\u24C7\uFF32\u0154\u1E58\u0158\u0210\u0212\u1E5A\u1E5C\u0156\u1E5E\u024C\u2C64\uA75A\uA7A6\uA782]/g,S:/[\u0053\u24C8\uFF33\u1E9E\u015A\u1E64\u015C\u1E60\u0160\u1E66\u1E62\u1E68\u0218\u015E\u2C7E\uA7A8\uA784]/g,T:/[\u0054\u24C9\uFF34\u1E6A\u0164\u1E6C\u021A\u0162\u1E70\u1E6E\u0166\u01AC\u01AE\u023E\uA786]/g,TZ:/[\uA728]/g,U:/[\u0055\u24CA\uFF35\u00D9\u00DA\u00DB\u0168\u1E78\u016A\u1E7A\u016C\u00DC\u01DB\u01D7\u01D5\u01D9\u1EE6\u016E\u0170\u01D3\u0214\u0216\u01AF\u1EEA\u1EE8\u1EEE\u1EEC\u1EF0\u1EE4\u1E72\u0172\u1E76\u1E74\u0244]/g,V:/[\u0056\u24CB\uFF36\u1E7C\u1E7E\u01B2\uA75E\u0245]/g,VY:/[\uA760]/g,W:/[\u0057\u24CC\uFF37\u1E80\u1E82\u0174\u1E86\u1E84\u1E88\u2C72]/g,X:/[\u0058\u24CD\uFF38\u1E8A\u1E8C]/g,Y:/[\u0059\u24CE\uFF39\u1EF2\u00DD\u0176\u1EF8\u0232\u1E8E\u0178\u1EF6\u1EF4\u01B3\u024E\u1EFE]/g,Z:/[\u005A\u24CF\uFF3A\u0179\u1E90\u017B\u017D\u1E92\u1E94\u01B5\u0224\u2C7F\u2C6B\uA762]/g,a:/[\u0061\u24D0\uFF41\u1E9A\u00E0\u00E1\u00E2\u1EA7\u1EA5\u1EAB\u1EA9\u00E3\u0101\u0103\u1EB1\u1EAF\u1EB5\u1EB3\u0227\u01E1\u00E4\u01DF\u1EA3\u00E5\u01FB\u01CE\u0201\u0203\u1EA1\u1EAD\u1EB7\u1E01\u0105\u2C65\u0250]/g,aa:/[\uA733]/g,ae:/[\u00E6\u01FD\u01E3]/g,ao:/[\uA735]/g,au:/[\uA737]/g,av:/[\uA739\uA73B]/g,ay:/[\uA73D]/g,b:/[\u0062\u24D1\uFF42\u1E03\u1E05\u1E07\u0180\u0183\u0253]/g,c:/[\u0063\u24D2\uFF43\u0107\u0109\u010B\u010D\u00E7\u1E09\u0188\u023C\uA73F\u2184]/g,d:/[\u0064\u24D3\uFF44\u1E0B\u010F\u1E0D\u1E11\u1E13\u1E0F\u0111\u018C\u0256\u0257\uA77A]/g,dz:/[\u01F3\u01C6]/g,e:/[\u0065\u24D4\uFF45\u00E8\u00E9\u00EA\u1EC1\u1EBF\u1EC5\u1EC3\u1EBD\u0113\u1E15\u1E17\u0115\u0117\u00EB\u1EBB\u011B\u0205\u0207\u1EB9\u1EC7\u0229\u1E1D\u0119\u1E19\u1E1B\u0247\u025B\u01DD]/g,f:/[\u0066\u24D5\uFF46\u1E1F\u0192\uA77C]/g,g:/[\u0067\u24D6\uFF47\u01F5\u011D\u1E21\u011F\u0121\u01E7\u0123\u01E5\u0260\uA7A1\u1D79\uA77F]/g,h:/[\u0068\u24D7\uFF48\u0125\u1E23\u1E27\u021F\u1E25\u1E29\u1E2B\u1E96\u0127\u2C68\u2C76\u0265]/g,hv:/[\u0195]/g,i:/[\u0069\u24D8\uFF49\u00EC\u00ED\u00EE\u0129\u012B\u012D\u00EF\u1E2F\u1EC9\u01D0\u0209\u020B\u1ECB\u012F\u1E2D\u0268\u0131]/g,j:/[\u006A\u24D9\uFF4A\u0135\u01F0\u0249]/g,k:/[\u006B\u24DA\uFF4B\u1E31\u01E9\u1E33\u0137\u1E35\u0199\u2C6A\uA741\uA743\uA745\uA7A3]/g,l:/[\u006C\u24DB\uFF4C\u0140\u013A\u013E\u1E37\u1E39\u013C\u1E3D\u1E3B\u017F\u0142\u019A\u026B\u2C61\uA749\uA781\uA747]/g,lj:/[\u01C9]/g,m:/[\u006D\u24DC\uFF4D\u1E3F\u1E41\u1E43\u0271\u026F]/g,n:/[\u006E\u24DD\uFF4E\u01F9\u0144\u00F1\u1E45\u0148\u1E47\u0146\u1E4B\u1E49\u019E\u0272\u0149\uA791\uA7A5]/g,nj:/[\u01CC]/g,o:/[\u006F\u24DE\uFF4F\u00F2\u00F3\u00F4\u1ED3\u1ED1\u1ED7\u1ED5\u00F5\u1E4D\u022D\u1E4F\u014D\u1E51\u1E53\u014F\u022F\u0231\u00F6\u022B\u1ECF\u0151\u01D2\u020D\u020F\u01A1\u1EDD\u1EDB\u1EE1\u1EDF\u1EE3\u1ECD\u1ED9\u01EB\u01ED\u00F8\u01FF\u0254\uA74B\uA74D\u0275]/g,oi:/[\u01A3]/g,ou:/[\u0223]/g,oo:/[\uA74F]/g,p:/[\u0070\u24DF\uFF50\u1E55\u1E57\u01A5\u1D7D\uA751\uA753\uA755]/g,q:/[\u0071\u24E0\uFF51\u024B\uA757\uA759]/g,r:/[\u0072\u24E1\uFF52\u0155\u1E59\u0159\u0211\u0213\u1E5B\u1E5D\u0157\u1E5F\u024D\u027D\uA75B\uA7A7\uA783]/g,s:/[\u0073\u24E2\uFF53\u015B\u1E65\u015D\u1E61\u0161\u1E67\u1E63\u1E69\u0219\u015F\u023F\uA7A9\uA785\u1E9B]/g,ss:/[\u00DF]/g,t:/[\u0074\u24E3\uFF54\u1E6B\u1E97\u0165\u1E6D\u021B\u0163\u1E71\u1E6F\u0167\u01AD\u0288\u2C66\uA787]/g,tz:/[\uA729]/g,u:/[\u0075\u24E4\uFF55\u00F9\u00FA\u00FB\u0169\u1E79\u016B\u1E7B\u016D\u00FC\u01DC\u01D8\u01D6\u01DA\u1EE7\u016F\u0171\u01D4\u0215\u0217\u01B0\u1EEB\u1EE9\u1EEF\u1EED\u1EF1\u1EE5\u1E73\u0173\u1E77\u1E75\u0289]/g,v:/[\u0076\u24E5\uFF56\u1E7D\u1E7F\u028B\uA75F\u028C]/g,vy:/[\uA761]/g,w:/[\u0077\u24E6\uFF57\u1E81\u1E83\u0175\u1E87\u1E85\u1E98\u1E89\u2C73]/g,x:/[\u0078\u24E7\uFF58\u1E8B\u1E8D]/g,y:/[\u0079\u24E8\uFF59\u1EF3\u00FD\u0177\u1EF9\u0233\u1E8F\u00FF\u1EF7\u1E99\u1EF5\u01B4\u024F\u1EFF]/g,z:/[\u007A\u24E9\uFF5A\u017A\u1E91\u017C\u017E\u1E93\u1E95\u01B6\u0225\u0240\u2C6C\uA763]/g};for(var n in e)t=t.replace(e[n],n);return t},Array.prototype.equals=function(t){if(!t)return!1;if(this.length!==t.length)return!1;for(var e=0,n=this.length;e<n;e++)if(this[e]instanceof Array&&t[e]instanceof Array){if(!this[e].equals(t[e]))return!1}else if(this[e]!==t[e])return!1;return!0},Object.defineProperty(Array.prototype,"equals",{enumerable:!1}),i.Formula=function(e){if(!(this instanceof i.Formula))return new i.Formula(e);try{this._expression=e,this._ast=i.KAS.parse(e).expr}catch(t){var n=new Error("Error parsing `"+e+"`");throw n.originalError=t,n}},i.Formula.prototype.equals=function(e){var t,n=!1;try{t=i.KAS.parse(e).expr}catch(t){var r=new Error("Error parsing `"+e+"`");throw r.originalError=t,r}try{n=i.KAS.compare(this._ast,t).equal}catch(t){}return n}}(this);