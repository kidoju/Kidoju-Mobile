<!-- User view -->
<div id="user" data-role="view" data-layout="main-layout" data-title="User" data-transition="fade" data-model="app.viewModel" data-init="app.viewModel.onUserViewInit" data-show="app.viewModel.onUserViewShow">
    <div data-role="touch" data-enable-swipe="true" data-swipe="app.viewModel.onUserSwipe">
        <img data-bind="invisible: isSavedUser$, attr: { src: user.picture$, alt: user.fullName$ }" class="app-picture">
        <img data-bind="visible: isSavedUser$, attr: { src: user.mobilePicture$, alt: user.fullName$ }" class="app-picture">
        <form>
            <ul data-role="listview" data-style="inset" data-filterable="false">
                <li>
                    <label>
                        <span class="app-bold">First Name</span>
                        <div data-bind="text: user.firstName" class="app-field"></div>
                    </label>
                </li>
                <li>
                    <label>
                        <span class="app-bold">Last Name</span>
                        <div data-bind="text: user.lastName" class="app-field"></div>
                    </label>
                </li>
                <li data-bind="visible: isSavedUser$">
                    <label>
                        <span class="app-bold">Last Use</span>
                        <div data-bind="text: user.lastUse" data-format="g" class="app-field"></div>
                    </label>
                </li>
                <li data-bind="invisible: isNewUser$">
                    <label>
                        <span class="app-bold">PIN</span>
                        <!-- keep username to let browsers save your password -->
                        <input type="text" name="username" data-bind="value: user.sid" style="display: none;">
                        <input type="password" class="app-pin" autocomplete="off">
                    </label>
                </li>
                <li data-bind="invisible: isSavedUser$">
                    <label>
                        <span class="app-bold">New PIN</span>
                        <input type="password" class="app-pin" autocomplete="off">
                    </label>
                </li>
                <li data-bind="invisible: isSavedUser$">
                    <label>
                        <span class="app-bold">Confirm</span>
                        <input type="password" class="app-pin" autocomplete="off">
                    </label>
                </li>
            </ul>
        </form>
    </div>
    <div class="app-buttons">
        <a data-role="button" data-bind="invisible: isSavedUser$" class="km-large km-justified km-primary" data-click="app.viewModel.onUserSaveClick">Save</a>
        <a data-role="button" data-bind="visible: isSavedUser$" class="km-large km-justified km-primary" data-click="app.viewModel.onUserSignInClick">Signin</a>
        <a data-role="button" data-bind="visible: isSavedUser$" class="km-large km-justified"  data-click="app.viewModel.onUserNewClick">New User</a>
        <a data-role="button" data-bind="visible: isSavedUser$" class="km-large km-justified" data-click="app.viewModel.onUserChangePin">Change PIN</a>
    </div>
</div>
