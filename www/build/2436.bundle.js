/*! Copyright ©2013-2021 Memba® Sarl. All rights reserved. - Version 0.3.8 dated Wed Jun 23 2021 */
(self.webpackChunkMemba_SmartQuiz=self.webpackChunkMemba_SmartQuiz||[]).push([[2436],{81293:function(e,t,n){"use strict";n.d(t,{Z:function(){return me}});var i=n(86902),a=n.n(i),r=n(14310),o=n.n(r),l=n(20116),s=n.n(l),d=n(34074),c=n.n(d),u=n(39649),p=n.n(u),h=n(73609),f=n.n(h),g=(n(55031),n(52013)),m=n(52426),k=n(58957),b=n(77766),v=n.n(b),_=n(46121),w=n(25843),C=n.n(w),y=n(94473),S=n.n(y),x=(n(82525),n(35705),n(14844),n(5948),n(18381),n(13730),n(3850)),T=(n(13604),n(78129),window.kendo),H=T.culture,I=T.destroy,E=T.ui,D=E.plugin,M=E.Widget,R=new x.Z("widgets.unitinput"),A=/^([\d.,]*)\s*([^\d.,]+)$/,L=M.extend({init:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};M.fn.init.call(this,e,t),R.debug({method:"init",message:"widget initialized"}),this._render(),this.enable(!this.element.prop("disabled")&&this.options.enable),this.value(this.options.value)},events:[m.Z.CHANGE],options:{name:"UnitInput",decimals:0,default:0,enable:!0,format:"n0",value:"",max:100,min:0,nonUnits:[],step:1,units:[]},value:function(e){g.Z.nullableTypeOrUndef(m.Z.STRING,e,g.Z.format(g.Z.messages.nullableTypeOrUndef.default,"value",m.Z.STRING));var t,n=this.element;if(f().type(e)===m.Z.UNDEFINED)t=n.val();else if(n.val()!==e){var i=e.match(A);Array.isArray(i)&&3===i.length&&(n.val(e),this.numericTextBox.value(i[1]),this.dropDownList.value(i[2]),this.enable(this._enabled))}return t},_render:function(){var e,t=this.element,n=this.options;g.Z.ok(t.is(m.Z.INPUT),"Please use an input tag to instantiate a UnitInput widget."),t.wrap("<".concat(m.Z.SPAN,"/>")),this.wrapper=t.parent(),this.wrapper.addClass("kj-unitinput").css({width:t.css(m.Z.WIDTH)}),t.hide(),this.numericTextBox=f()("<".concat(m.Z.INPUT,">")).appendTo(this.wrapper).kendoNumericTextBox({change:this._onNumericTextBoxChange.bind(this),culture:H(),decimals:n.decimals,format:n.format,max:n.max,min:n.min,step:n.step}).data("kendoNumericTextBox"),this.dropDownList=f()("<".concat(m.Z.SELECT,"/>")).appendTo(this.wrapper).kendoDropDownList({change:this._onDropDownListChange.bind(this),dataSource:{data:v()(e=n.units).call(e,n.nonUnits)}}).data("kendoDropDownList")},_onDropDownListChange:function(){var e=this.dropDownList,t=this.element,n=this.numericTextBox,i=this.options,a=n.value(),r=e.value(),o=i.units.indexOf(r)>-1&&-1===i.nonUnits.indexOf(r);o&&f().type(a)===m.Z.NUMBER?t.val(a+r):o?(n.value(i.default),t.val(i.default+r)):(t.val(r),n.value("")),this.enable(this._enabled),this.trigger(m.Z.CHANGE)},_onNumericTextBoxChange:function(){this.element.val((this.numericTextBox.value()||"")+this.dropDownList.value()),this.trigger(m.Z.CHANGE)},enable:function(e){var t=this.options.nonUnits;this._enabled=f().type(e)===m.Z.UNDEFINED||!!e;var n=!Array.isArray(t)||-1===t.indexOf(this.dropDownList.value());this.numericTextBox.enable(this._enabled&&n),this.dropDownList.enable(this._enabled)},destroy:function(){this.numericTextBox.destroy(),this.numericTextBox=void 0,this.dropDownList.destroy(),this.dropDownList=void 0,M.fn.destroy.call(this),I(this.element),R.debug({method:"destroy",message:"widget destroyed"})}});Object.prototype.hasOwnProperty.call(window.kendo.ui,"UnitInput")||D(L);var F=window.kendo,P=F.attr,z=F.data.DataSource,q=F.destroy,B=F.ns,O=F.roleSelector,V=F.unbind,W=F.ui,N=W.DataBoundWidget,G=W.ComboBox,U=W.Grid,Z=W.plugin,j=new x.Z("widgets.styleeditor"),K=".kendoStyleEditor",$=".k-grid-toolbar",Q="table";function Y(e,t,n){var i;f()(v()(i='<input data-bind="value: '.concat(t.field,'" required data-required-msg="')).call(i,this.options.messages.validation.value,'">')).appendTo(e).kendoComboBox(n).data("kendoComboBox").element.attr("name","value"),f()('<span class="k-invalid-msg" data-for="value" />').appendTo(e)}function X(e,t,n){var i,a;f()(v()(i=v()(a="<input data-".concat(B,'bind="value: ')).call(a,t.field,'" required data-required-msg="')).call(i,this.options.messages.validation.value,'" style="width:100%;">')).appendTo(e).kendoUnitInput(n).data("kendoUnitInput").element.attr("name","value"),f()('<span class="k-invalid-msg" data-for="value" />').appendTo(e)}function J(e,t){return X.bind(this)(e,t,{units:["%","em","px","rem","vh","vw"],nonUnits:["auto","inherit","initial"]})}function ee(e,t){var n;f()(v()(n='<input data-bind="value: '.concat(t.field,'" required data-required-msg="')).call(n,this.options.messages.validation.value,'">')).appendTo(e).kendoColorPicker().data("kendoColorPicker").element.attr("name","value"),f()('<span class="k-invalid-msg" data-for="value" />').appendTo(e)}var te=[{name:"background-color",value:"#ffffff",editor:ee},{name:"border-color",value:"#000000",editor:ee},{name:"border-radius",value:"5px",editor:J},{name:"border-style",value:"solid",editor:function(e,t){return Y.bind(this)(e,t,{dataSource:["dashed","dotted","double","groove","hidden","inherit","initial","inset","none","outset","ridge","solid"]})}},{name:"border-width",value:"1px",editor:J},{name:"color",value:"#000000",editor:ee},{name:"font-family",value:"Times New Roman",editor:function(e,t){return Y.bind(this)(e,t,{dataSource:["Arial","Courier New","Georgia","Times New Roman","Trebuchet MS","Verdana"]})}},{name:"font-size",value:"20px",editor:J},{name:"font-style",value:"italic",editor:function(e,t){return Y.bind(this)(e,t,{dataSource:["inherit","initial","italic","normal","oblique"]})}},{name:"font-weight",value:"bold",editor:function(e,t){return Y.bind(this)(e,t,{dataSource:["100","200","300","400","500","600","700","800","900","bold","bolder","inherit","initial","lighter","normal"]})}},{name:"padding",value:"10px",editor:J},{name:"margin",value:"10px",editor:J},{name:"opacity",value:"1"},{name:"text-align",value:"center",editor:function(e,t){return Y.bind(this)(e,t,{dataSource:["center","inherit","initial","justify","left","right"]})}},{name:"text-decoration",value:"underline",editor:function(e,t){return Y.bind(this)(e,t,{dataSource:["inherit","initial","line-through","none","overline","underline"]})}},{name:"vertical-align",value:"middle",editor:function(e,t){return X.bind(this)(e,t,{units:["%","em","px","rem","vh","vw"],nonUnits:["baseline","bottom","inherit","initial","middle","sub","super","text-bottom","text-top","top"]})}}],ne=N.extend({init:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this;N.fn.init.call(n,e,t),j.debug({method:"init",message:"widget initialized"}),n._setDataSource(),n.value(n.options.value),n._layout(),n._setEventHandlers()},options:{name:"StyleEditor",height:400,value:"",messages:{columns:{name:"Name",value:"Value"},toolbar:{create:"New Style",destroy:"Delete"},validation:{name:"Name is required",value:"Value is required"}}},events:[m.Z.CHANGE],value:function(e){var t,n,i=e;if(f().type(i)===m.Z.NULL&&(i=m.Z.EMPTY),f().type(i)===m.Z.STRING){var a=this.value();if(n=[],(i=function(e){return g.Z.type(m.Z.STRING,e,g.Z.format(g.Z.messages.type.default),"value",m.Z.STRING),e.replace(/[\s]*([:;])[\s]*/g,"$1")+(e.length&&e.charAt(e.length-1)===m.Z.SEMICOLON?"":m.Z.SEMICOLON)}(i))!==a){var r=i.split(m.Z.SEMICOLON);for(t=0;t<r.length;t++){var o,l,s=r[t].split(m.Z.COLON);if(Array.isArray(s)&&2===s.length)n.push({name:C()(o=s[0]).call(o),value:C()(l=s[1]).call(l)})}this._dataSource.data(n),i=void 0}}else{if(f().type(i)!==m.Z.UNDEFINED)throw new TypeError("value is expected to be a string if not undefined");for(i=m.Z.EMPTY,n=this._dataSource.data(),t=0;t<n.length;t++){var d=n[t].name,c=n[t].value;f().type(d)===m.Z.STRING&&f().type(c)===m.Z.STRING&&(d=C()(d).call(d),c=C()(c).call(c),d.length&&c.length&&(i+=d+m.Z.COLON+c+m.Z.SEMICOLON))}}return i},_layout:function(){var e=this;e.wrapper=e.element,e._setGrid(),e.element.addClass("k-grid k-widget kj-styleeditor")},_setGrid:function(){var e=this,t=e.options;e.grid=e.element.kendoGrid({columns:[{field:"name",title:t.messages.columns.name,editor:e._cssNameEditor.bind(e),template:"#=name#"},{field:"value",title:t.messages.columns.value,editor:e._cssValueEditor.bind(e),template:"#=value#"}],dataBound:e._onDataBound.bind(e),dataSource:e._dataSource,editable:"incell",edit:e._onGridEdit.bind(e),height:t.height,resizable:!0,scrollable:!0,selectable:"row",sortable:!0,toolbar:[{name:"create",text:t.messages.toolbar.create},{name:"destroy",text:t.messages.toolbar.destroy}]}).data("kendoGrid")},_cssNameEditor:function(e,t){var n,i=this;f()(v()(n='<input data-bind="value: '.concat(t.field,'" required data-required-msg="')).call(n,i.options.messages.validation.name,'">')).appendTo(e).kendoComboBox({autoBind:!0,change:function(t){if(t&&t.sender instanceof G){var n=t.sender.dataItem(),a=i.element.data("kendoGrid"),r=e.parent().attr(P(m.Z.UID));if(a instanceof U&&"string"===f().type(r)&&f().type(n)!==m.Z.UNDEFINED)a.dataSource.getByUid(r).set("value",n.get("value"))}},dataSource:{data:te},dataTextField:"name",dataValueField:"name"}).data("kendoComboBox").element.attr("name","name"),f()('<span class="k-invalid-msg" data-for="name" />').appendTo(e)},_cssValueEditor:function(e,t){var n,i,a=e.closest("tr.k-state-selected").children().first().text(),r=s()(te).call(te,(function(e){return e.name===a}));Array.isArray(r)&&r.length&&r[0]&&f().isFunction(r[0].editor)?n=r[0].editor.bind(this)(e,t):(f()(v()(i='<input type="text" name="value" class="k-textbox" data-bind="value: '.concat(t.field,'" required data-required-msg="')).call(i,this.options.messages.validation.value,'">')).appendTo(e),f()('<span class="k-invalid-msg" data-for="value" />').appendTo(e));return n},_onDataBound:function(e){g.Z.isNonEmptyPlainObject(e,g.Z.format(g.Z.messages.isNonEmptyPlainObject.default,"e")),g.Z.instanceof(U,e.sender,g.Z.format(g.Z.messages.instanceof.default,"e.sender","kendo.ui.Grid"));var t,n=e.sender.dataSource.at(0);n&&""===n.name&&""===n.value&&e.sender.editCell(S()(t=e.sender.element).call(t,"td:eq(0)"))},_onGridEdit:function(e){if(g.Z.isNonEmptyPlainObject(e,g.Z.format(g.Z.messages.isNonEmptyPlainObject.default,"e")),g.Z.instanceof(U,e.sender,g.Z.format(g.Z.messages.instanceof.default,"e.sender","kendo.ui.Grid")),g.Z.instanceof(f(),e.container,g.Z.format(g.Z.messages.instanceof.default,"e.container","jQuery")),e.sender.select(e.container.closest("tr")),e.container.is("td:eq(0)")){var t,n=S()(t=e.container).call(t,O("combobox")).data("kendoComboBox");if(n instanceof G){for(var i=e.sender.dataSource.data(),a=[],r=0;r<te.length;r++){for(var o=!1,l=0;l<i.length;l++)if(te[r].name===i[l].name&&te[r].name!==n.value()){o=!0;break}o||a.push(te[r])}n.setDataSource(a),n.focus()}}},_setDataSource:function(){var e=this;e._dataSource=new z({autoSync:!0,change:function(){e.trigger(m.Z.CHANGE)},data:[],schema:{model:{id:"name",fields:{name:{type:"string",validation:{required:!0}},value:{type:"string",validation:{required:!0}}}}}})},refresh:function(){this.grid instanceof U&&this.grid.refresh()},_setEventHandlers:function(){var e=this,t=e.element;S()(t).call(t,$).on(m.Z.CLICK+K,".k-grid-delete",e._onDeleteClick.bind(e)),S()(t).call(t,Q).on(m.Z.KEYPRESS+K,m.Z.INPUT,e._onInputKeyPress.bind(e))},_onDeleteClick:function(e){g.Z.instanceof(f().Event,e,g.Z.format(g.Z.messages.instanceof.default,"e","jQuery.Event")),g.Z.instanceof(U,this.grid,g.Z.format(g.Z.messages.instanceof.default,"this.grid","kendo.ui.Grid")),e.preventDefault();var t=this.grid,n=t.select();if(n instanceof f()&&n.length){var i=n.attr(P(m.Z.UID)),a=t.dataSource.getByUid(i);t.dataSource.remove(a)}},_onInputKeyPress:function(e){g.Z.instanceof(f().Event,e,g.Z.messages.instanceof.default,"e","jQuery.Event");var t=f()(e.target);t.hasClass("k-input")&&t.parent().hasClass("k-dropdown-wrap")?45===e.which||e.which>96&&e.which<123||e.preventDefault():t.hasClass("k-textbox")&&t.parent().hasClass("k-edit-cell")&&(34!==e.which&&58!==e.which&&59!==e.which&&60!==e.which&&62!==e.which||e.preventDefault())},destroy:function(){var e=this,t=e.wrapper;S()(t).call(t,Q).off(m.Z.KEYPRESS+K),S()(t).call(t,$).off(m.Z.CLICK+K),e._dataSource.unbind(m.Z.CHANGE),V(t),e.grid=void 0,e._dataSource=void 0,N.fn.destroy.call(e),q(t)}});Object.prototype.hasOwnProperty.call(window.kendo.ui,"StyleEditor")||Z(ne);n(41587);function ie(e,t){var n=a()(e);if(o()){var i=o()(e);t&&(i=s()(i).call(i,(function(t){return c()(e,t).enumerable}))),n.push.apply(n,i)}return n}function ae(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ie(Object(n),!0).forEach((function(t){re(e,t,n[t])})):p()?Object.defineProperties(e,p()(n)):ie(Object(n)).forEach((function(t){Object.defineProperty(e,t,c()(n,t))}))}return e}function re(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var oe=window.kendo,le=oe.ns,se=oe.resize,de=oe.ui.BaseDialog;var ce=function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=f().Deferred(),a=de.getElement(n.cssClass);a.css({padding:0});var r=a.kendoBaseDialog(ae({title:(0,_.Z)("dialogs.styleeditor.title"),content:v()(e=v()(t="<div data-".concat(le,'role="styleeditor" data-')).call(t,le,'bind="value:value" data-')).call(e,le,'height="400"></div>'),data:{value:""},actions:[de.fn.options.messages.actions.ok,de.fn.options.messages.actions.cancel],width:860},n)).data("kendoBaseDialog");return r.one(m.Z.SHOW,(function(e){se(e.sender.element)})),r.bind(m.Z.CLICK,(function(e){i.resolve({action:e.action,data:e.sender.viewModel.toJSON()})})),r.open(),i.promise()},ue=n(26986);function pe(e,t){var n=a()(e);if(o()){var i=o()(e);t&&(i=s()(i).call(i,(function(t){return c()(e,t).enumerable}))),n.push.apply(n,i)}return n}function he(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pe(Object(n),!0).forEach((function(t){fe(e,t,n[t])})):p()?Object.defineProperties(e,p()(n)):pe(Object(n)).forEach((function(t){Object.defineProperty(e,t,c()(n,t))}))}return e}function fe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ge=window.kendo.ui.BaseDialog,me=ue.Z.extend({init:function(e,t){var n=this;ue.Z.fn.init.call(this,e),this.type=m.Z.STRING,this.defaultValue=this.defaultValue||(this.nullable?null:""),this.editor=function(e,i){f()("<".concat(m.Z.INPUT,">")).css({width:"100%"}).prop({readonly:!0}).attr(he(he(he({name:i.field},i.attributes),(0,k.DX)(m.Z.BIND,"value: ".concat(i.field))),t)).appendTo(e).kendoButtonBox({click:n.showDialog.bind(n,i)})}},showDialog:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};g.Z.isPlainObject(e,g.Z.format(g.Z.messages.isPlainObject.default,"options")),ce({title:e.title||this.title,data:{value:e.model.get(e.field)}}).then((function(t){t.action===ge.fn.options.messages.actions.ok.action&&e.model.set(e.field,t.data.value)}))}})},41894:function(e,t,n){"use strict";n.d(t,{aN:function(){return r},u8:function(){return o},pP:function(){return l},TZ:function(){return s},Ze:function(){return d},W0:function(){return c},bq:function(){return u},T:function(){return p}});n(73609),n(55031);var i=n(52426),a=n(70103);var r={required:!0,alt:function(e){return!e.is('[name="attributes.alt"]')}},o={required:!0,constant:function(e){return!!e}},l={required:!0,pattern:a.Z.RX_TEXT},s={score:function(e){return!!e}},d={solution:function(e){return!!e}},c={style:function(e){return!(e.is('[name="attributes.style"]')||e.is('[name="attributes.groupStyle"]')||e.is('[name="attributes.itemStyle"]')||e.is('[name="attributes.selectedStyle"]')||e.is('[name="attributes.highlightStyle"]'))||(e.val()===i.Z.EMPTY||a.Z.RX_STYLE.test(e.val()))}},u={required:!0,text:function(e){return!e.is('[name="attributes.text"]')||a.Z.RX_TEXT.test(e.val())}},p={validation:function(e){return!!e}}},12156:function(e,t,n){var i,a,r;n.amdD,a=[n(75673),n(3811),n(18101),n(45026)],void 0===(r="function"==typeof(i=function(){return function(e,t){var n=window.kendo,i=n.ui,a=e.proxy,r=e.extend,o=e.grep,l=e.map,s=e.inArray,d=n.data.Comparer,c="k-state-selected",u="asc",p="desc",h="change",f="init",g="open",m="select",k="stick",b="unstick",v="kendoPopup",_="kendoFilterMenu",w="kendoMenu",C="kendoExpansionPanel",y=".kendoColumnMenu",S=i.Widget;function x(e){return n.trim(e).replace(/&nbsp;/gi,"")}function T(e,t){var n,i,a,r={};for(n=0,i=e.length;n<i;n++)r[(a=e[n])[t]]=a;return r}function H(e){return this.columns.indexOf(e.title)>=0||this.columns.indexOf(e.field)>=0}function I(e){for(var t=[],n=0;n<e.length;n++)e[n].columns?t=t.concat(I(e[n].columns)):t.push(e[n]);return t}function E(e,t){return"["+n.attr(e)+"='"+(t||"").replace(/'/g,'"')+"']"}function D(e,t,n){e>0?t.insertAfter(n.children().eq(e-1)):n.prepend(t)}function M(e){for(var t,n={},i=0;i<e.length;i++)n[t=JSON.stringify(e[i])]?n[t].push(i):n[t]=[i];return n}function R(e,t){for(var i,a,r,o,l,s=n.attr("index"),d=n.attr("field"),c={},u=0;u<e.length;u++)a=t.eq(u),r=parseInt(a.attr(s),10),o=a.attr(d),l=a.attr("title"),c[i=o||l]?c[i].push(r):c[i]=[r];return c}var A=S.extend({init:function(t,i){var r,o=this;(i=i||{}).componentType=i.componentType||"classic",S.fn.init.call(o,t,i),t=o.element,i=o.options,o.owner=i.owner,o.dataSource=i.dataSource,o.field=t.attr(n.attr("field")),o.title=t.attr(n.attr("title")),(r=t.find(".k-header-column-menu"))[0]||(r=t.addClass("k-with-icon").prepend('<a class="k-header-column-menu" href="#" title="'+i.messages.settings+'" aria-label="'+i.messages.settings+'"><span class="k-icon k-i-more-vertical"></span></a>').find(".k-header-column-menu")),o.link=r.attr("tabindex",-1).on("click"+y,a(o._click,o)),o.wrapper=e('<div class="k-column-menu"/>'),o._refreshHandler=a(o.refresh,o),o.dataSource.bind(h,o._refreshHandler)},_init:function(){var e=this;e.pane=e.options.pane,e.pane&&(e._isMobile=!0),e._isMobile?e._createMobileMenu():e._createMenu(),e.owner._muteAngularRebind((function(){e._angularItems("compile")})),e._sort(),e._columns(),e._filter(),e._lockColumns(),e._stickyColumns(),e.trigger(f,{field:e.field,container:e.wrapper})},events:[f,g,"sort","filtering",k,b],options:{name:"ColumnMenu",messages:{sortAscending:"Sort Ascending",sortDescending:"Sort Descending",filter:"Filter",column:"Column",columns:"Columns",columnVisibility:"Column Visibility",clear:"Clear",cancel:"Cancel",done:"Done",settings:"Edit Column Settings",lock:"Lock Column",unlock:"Unlock Column",stick:"Stick Column",unstick:"Unstick Column",setColumnPosition:"Set Column Position",apply:"Apply",reset:"Reset"},filter:"",columns:!0,sortable:!0,filterable:!0,animations:{left:"slide"},encodeTitles:!1,componentType:"classic"},_createMenu:function(){var e,t,i=this,r=i.options,o=i._ownerColumns();i._hasGroups()&&(o=i._groupColumns(o),(e=i._flattenMenuCols(o)).length!==i.owner.columns.length&&i._syncMenuCols(e,i.owner.columns)),t=i._isModernComponentType()?n.template(L):n.template(F),i.wrapper.html(t({uid:n.guid(),ns:n.ns,messages:r.messages,sortable:r.sortable,filterable:r.filterable,columns:o,showColumns:r.columns,hasLockableColumns:r.hasLockableColumns,hasStickableColumns:r.hasStickableColumns,encodeTitles:r.encodeTitles,omitWrapAttribute:n.attr("omit-wrap")})),i.popup=i.wrapper[v]({anchor:i.link,copyAnchorStyles:!1,open:a(i._open,i),activate:a(i._activate,i),deactivate:a(i._deactivate,i),close:function(e){i.menu&&(i.menu._closing=e.sender.element),i.options.closeCallback&&i.options.closeCallback(i.element)}}).data(v),i._isModernComponentType()?(i.popup.element.addClass("k-grid-columnmenu-popup"),i._createExpanders()):i.menu=i.wrapper.children()[w]({orientation:"vertical",closeOnClick:!1,open:function(){i._updateMenuItems()}}).data(w)},_createExpanders:function(){var t=this,n=t.options,i={expanded:!1,headerClass:"k-columnmenu-item",useBareTemplate:!0};t.wrapper.find(".k-columns-item")[C](e.extend(!0,{},i,{title:'<span class="k-icon k-i-columns"></span><span>'+n.messages.columns+"</span>"})),t.wrapper.find(".k-column-menu-filter")[C](e.extend(!0,{},i,{title:'<span class="k-icon k-i-filter"></span><span>'+n.messages.filter+"</span>"})),t.wrapper.find(".k-column-menu-position")[C](e.extend(!0,{},i,{title:'<span class="k-icon k-i-set-column-position"></span><span>'+n.messages.setColumnPosition+"</span>"}))},_syncMenuCols:function(e,t){for(var n,i=t.length,a=e.map((function(e){return e.field})),r=0;r<i;r++)n=t[r],a.indexOf(n.field)<0&&(n.menu=!1)},_flattenMenuCols:function(e){for(var t=[],n=e.length,i=0;i<n;i++)e[i].columns?t=t.concat(this._flattenMenuCols(e[i].columns)):e[i].groupHeader||t.push(e[i]);return t},_groupColumns:function(e,t){var n,i,a,r,o,l=[],s=this.options.columns.groups,d=s.length;for(n=0;n<d;n++)i=s[n],a=H.bind(i),r={title:i.title,groupHeader:!0},o=e.filter(a),l.push(r),t?r.columns=o:l=l.concat(o);return l},_hasGroups:function(){return this.options.columns&&this.options.columns.groups&&this.options.columns.groups.length},_isModernComponentType:function(){return"modern"===this.options.componentType&&!this._isMobile},_deactivate:function(){this.menu&&(this.menu._closing=!1)},_createMobileMenu:function(){var e,t,i=this,a=i.options,r=i._ownerColumns();i._hasGroups()&&(e=i._groupColumns(r,!0),(t=i._flattenMenuCols(e)).length!==i.owner.columns.length&&i._syncMenuCols(t,i.owner.columns));var o=n.template(P)({ns:n.ns,field:i.field,title:i.title||i.field,messages:a.messages,sortable:a.sortable,filterable:a.filterable,columns:r,showColumns:a.columns,hasLockableColumns:a.hasLockableColumns,hasStickableColumns:a.hasStickableColumns,hasGroups:i._hasGroups(),groups:e});i.view=i.pane.append(o),i.view.state={columns:{}},i.wrapper=i.view.element.find(".k-column-menu"),i.menu=new z(i.wrapper.children(),{pane:i.pane,columnMenu:i}),i.menu.element.on("transitionend"+y,(function(e){e.stopPropagation()}));var l=i.view.wrapper&&i.view.wrapper[0]?i.view.wrapper:i.view.element;l.on("click",".k-header-done",(function(e){e.preventDefault(),i.menu._applyChanges(),i.menu._cancelChanges(!1),i.close()})),l.on("click",".k-header-cancel",(function(e){e.preventDefault(),i.menu._cancelChanges(!0),i.close()})),i.view.bind("showStart",(function(){var e=i.view||{columns:{}};i.options.hasLockableColumns&&i._updateLockedColumns(),i.options.hasStickableColumns&&i._updateStickyColumns(),e.element.find(".k-sort-asc.k-state-selected").length?e.state.initialSort="asc":e.element.find(".k-sort-desc.k-state-selected").length&&(e.state.initialSort="desc")}))},_angularItems:function(t){var i=this;i.angular(t,(function(){return{elements:i.wrapper.find(".k-columns-item input["+n.attr("field")+"]").map((function(){return e(this).closest("li")})),data:l(i._ownerColumns(),(function(e){return{column:e._originalObject}}))}}))},destroy:function(){var e=this;e._angularItems("cleanup"),S.fn.destroy.call(e),e.filterMenu&&e.filterMenu.destroy(),e._refreshHandler&&e.dataSource.unbind(h,e._refreshHandler),e.options.columns&&e.owner&&(e._updateColumnsMenuHandler&&(e.owner.unbind("columnShow",e._updateColumnsMenuHandler),e.owner.unbind("columnHide",e._updateColumnsMenuHandler)),e._updateColumnsLockedStateHandler&&(e.owner.unbind("columnLock",e._updateColumnsLockedStateHandler),e.owner.unbind("columnUnlock",e._updateColumnsLockedStateHandler))),e.menu&&(e.menu.element.off(y),e.menu.destroy()),e.wrapper.off(y),e.popup&&e.popup.destroy(),e.view&&e.view.purge(),e.link.off(y),e.owner=null,e.wrapper=null,e.element=null},close:function(){this.menu&&this.menu.close(),this.popup&&(this.popup.close(),this.popup.element.off("keydown"+y))},_click:function(e){var t=this;e.preventDefault(),e.stopPropagation();var n=this.options;n.filter&&this.element.is(!n.filter)||(this.popup||this.pane?t._updateMenuItems():this._init(),this._isMobile?this.pane.navigate(this.view,this.options.animations.left):this.popup.toggle())},_updateMenuItems:function(){var e=this;e.options.columns&&(e._setMenuItemsVisibility(),e.options.columns.sort||e.options.columns.groups?e._updateDataIndexes():e._reorderMenuItems())},_setMenuItemsVisibility:function(){this._eachRenderedMenuItem((function(e,t,n){!1===t.matchesMedia?n.hide():n.show()}))},_reorderMenuItems:function(){var e=this;e._eachRenderedMenuItem((function(e,t,n,i){n[0]&&n.index()!==e&&D(e,n,i)})),e._updateDataIndexes()},_updateDataIndexes:function(){var t=this,i=t._isMobile&&t.view?e(t.view.element).find(".k-columns-item").children("ul"):e(t.wrapper).find(".k-menu-group").first(),a=t._ownerColumns(!0).map((function(e){return e.title||e.field}));i.find("span."+(this._isMobile?"k-listgroup-form-field-wrapper":"k-menu-link")+" input").each((function(i){var r,o;t.options.columns.sort?(r=t._ownerColumns(),o=a.indexOf(r[i].title),e(this).attr(n.attr("index"),o)):e(this).attr(n.attr("index"),i)}))},_eachRenderedMenuItem:function(t){for(var n,i,a,r,l=this,s=o(I(l.owner.columns),(function(e){var t=!0,n=x(e.title||"");return!1!==e.menu&&(e.field||n.length)||(t=!1),t})).map((function(e){return{field:e.field,title:e.title,matchesMedia:e.matchesMedia}})),d=l._getRenderedList(),c=l._getRenderedListElements(d),u=R(c,d.find("input[type=checkbox]")),p=M(s),h=0;h<s.length;h++){i=(a=s[h]).field?a.field:a.title,n=e.inArray(h,p[JSON.stringify(a)]),r=e();for(var f=0;f<u[i].length;f++)r=r.add(c.eq(u[i][f]));t(h,a,r.find(E("field",i)).closest(l._isModernComponentType()?"label":"li").eq(n),d)}},_getRenderedList:function(){var t=this;return t._isModernComponentType()?e(t.wrapper).find(".k-columns-item"):t._isMobile&&t.view?e(t.view.element).find(".k-columns-item").children("ul"):e(t.wrapper).find(".k-menu-group").first()},_getRenderedListElements:function(e){return this._isModernComponentType()?e.find("label"):e.find("span."+(this._isMobile?"k-listgroup-form-field-wrapper":"k-menu-link"))},_open:function(){var t=this;e(".k-column-menu").not(t.wrapper).each((function(){e(this).data(v).close()})),t.popup.element.on("keydown"+y,(function(i){t._isModernComponentType()&&i.keyCode===n.keys.ENTER&&e(i.target).click(),i.keyCode==n.keys.ESC&&t.close()})),t.options.hasLockableColumns&&t._updateLockedColumns(),t.options.hasStickableColumns&&t._updateStickyColumns()},_activate:function(){this.menu?this.menu.element.focus():this.popup.element.find("[tabindex=0]:eq(0)").focus(),this.trigger(g,{field:this.field,container:this.wrapper})},_ownerColumns:function(e){var t,n=I(this.owner.columns),i=o(n,(function(e){var t=!0,n=x(e.title||"");return!1!==e.menu&&(e.field||n.length)||(t=!1),t})),a=this.options.columns.sort;return t=l(i,(function(e){return{originalField:e.field,field:e.field||e.title,title:e.title||e.field,hidden:e.hidden,matchesMedia:e.matchesMedia,index:s(e,n),locked:!!e.locked,_originalObject:e,uid:e.headerAttributes.id}})),a&&!e&&t.sort(d.create({field:"title",dir:a})),t},_sort:function(){var e=this;e.options.sortable&&(e.refresh(),e._isModernComponentType()?e.wrapper.on("click"+y,".k-sort-asc, .k-sort-desc",a(e._sortHandler,e)):e.menu.bind(m,a(e._sortHandler,e)))},_sortHandler:function(t){var n,i=this,a=t.item?e(t.item):e(t.target);a.hasClass("k-sort-asc")?n=u:a.hasClass("k-sort-desc")&&(n=p),n&&(i._getSortItemsContainer(a).find(".k-sort-"+(n==u?p:u)).removeClass(c),i._sortDataSource(a,n),i._isMobile||i.close())},_getSortItemsContainer:function(e){return this._isModernComponentType()?e.parents(".k-columnmenu-item-wrapper").first():e.parent()},_sortDataSource:function(e,n){var i,a,r=this,o=r.options.sortable,l=null===o.compare?t:o.compare,s=r.dataSource,d=s.sort()||[],u=e.hasClass(c)&&o&&!1!==o.allowUnsort;if(n=u?t:n,!r.trigger("sort",{sort:{field:r.field,dir:n,compare:l}})){if(u?e.removeClass(c):e.addClass(c),"multiple"===o.mode){for(i=0,a=d.length;i<a;i++)if(d[i].field===r.field){d.splice(i,1);break}d.push({field:r.field,dir:n,compare:l})}else d=[{field:r.field,dir:n,compare:l}];s.sort(d)}},_columns:function(){var t=this;t.options.columns&&(t._updateColumnsMenu(),t._updateColumnsMenuHandler=a(t._updateColumnsMenu,t),t.owner.bind(["columnHide","columnShow"],t._updateColumnsMenuHandler),t._updateColumnsLockedStateHandler=a(t._updateColumnsLockedState,t),t.owner.bind(["columnUnlock","columnLock"],t._updateColumnsLockedStateHandler),t._isModernComponentType()?(t.wrapper.on("click"+y,".k-columns-item .k-button:not(.k-primary)",(function(){t._updateColumnsMenu()})),t.wrapper.on("click"+y,".k-columns-item .k-button.k-primary",a(t._applyColumnVisibility,t)),t.wrapper.on("click"+y,".k-columns-item .k-checkbox",(function(){t._updateColumnsMenu(!0)}))):t.menu.bind(m,(function(i){var a,r,l=e(i.item),s=n.attr("uid"),d=0,c=o(I(t.owner.columns),(function(e){var t=!0,n=x(e.title||"");return!1!==e.menu&&(e.field||n.length)||(t=!1),t}));t._isMobile&&i.preventDefault(),l.parent().closest("li.k-columns-item")[0]&&((a=l.find(":checkbox")).attr("disabled")||(d=c.map((function(e){return e.headerAttributes.id})).indexOf(a.attr(s)),!0===(r=c[d]).hidden?t.owner.showColumn(r):t.owner.hideColumn(r)))})))},_applyColumnVisibility:function(){var t,i,a,r,l=this,s=n.attr("field"),d=n.attr("uid"),c=l.wrapper.find(".k-columns-item input["+s+"]"),u=o(I(this.owner.columns),(function(e){var t=!0,n=x(e.title||"");return!1!==e.menu&&(e.field||n.length)||(t=!1),t})),p=c.length;for(l.owner.unbind("columnShow",l._updateColumnsMenuHandler),l.owner.unbind("columnHide",l._updateColumnsMenuHandler),t=0;t<p;t++)a=e(c[t]),i=u.map((function(e){return e.headerAttributes.id})).indexOf(a.attr(d)),r=u[i],a.is(":checked")&&r.hidden?l.owner.showColumn(r):a.is(":not(:checked)")&&!r.hidden&&l.owner.hideColumn(r);l.popup.close(),l.owner.bind(["columnHide","columnShow"],l._updateColumnsMenuHandler)},_updateColumnsMenu:function(e){var t,i,a,r,l,s=this,d=n.attr("field"),c=n.attr("locked"),u=n.attr("uid"),p={},h=0,f=0;e=!0===e;var g=o(I(this.owner.columns),(function(e,t){var n=!0,i=x(e.title||"");return!1!==e.menu&&(e.field||i.length)||(n=!1),n&&(p[t]=h,h++),n})),m=o(this._ownerColumns(),(function(t){return e?s.wrapper.find("[role='menuitemcheckbox'] ["+u+"='"+t.uid+"']").prop("checked"):!t.hidden&&!1!==t.matchesMedia})),k=o(m,(function(e){return e.originalField})),b=o(k,(function(e){return!0===e.locked})).length,v=o(k,(function(e){return!0!==e.locked})).length,_=o(this.owner.columns,(function(e){return!1===e.menu})),w=o(_,(function(e){return e.hidden}));this.wrapper.find("[role='menuitemcheckbox']").attr("aria-checked",!1);var C,y=this.wrapper.find(".k-columns-item input["+d+"]").prop("disabled",!1);for(e||y.prop("checked",!1),t=0,i=y.length;t<i;t++)l="true"===(a=y.eq(t)).attr(c),r=!1,C=a.data("kendoSwitch"),f=g.map((function(e){return e.headerAttributes.id})).indexOf(a.attr(u)),r=e?a.prop("checked"):!g[f].hidden&&!1!==g[f].matchesMedia,a.prop("checked",r),C&&(C.enable(!0),C.check(r)),a.closest("[role='menuitemcheckbox']").attr("aria-checked",r),r&&(1==b&&l&&(a.prop("disabled",!0),C&&C.enable(!1)),0!==_.length&&_.length!==w.length||1!=v||l||(a.prop("disabled",!0),C&&C.enable(!1)))},_updateColumnsLockedState:function(){var e,t,i,a,r=n.attr("field"),o=n.attr("locked"),l=T(this._ownerColumns(),"field"),s=this.wrapper.find(".k-columns-item input[type=checkbox]");for(e=0,t=s.length;e<t;e++)(a=l[(i=s.eq(e)).attr(r)])&&i.attr(o,a.locked);this._updateColumnsMenu()},_filter:function(){var t=this,n=_,i=t.options;!1!==i.filterable&&(i.filterable.multi&&(n="kendoFilterMultiCheck",i.filterable.dataSource&&(i.filterable.checkSource=i.filterable.dataSource,delete i.filterable.dataSource)),t.filterMenu=t.wrapper.find(".k-filterable")[n](r(!0,{},{appendToElement:!0,dataSource:i.dataSource,values:i.values,field:t.field,title:t.title,change:function(e){t.trigger("filtering",{filter:e.filter,field:e.field})&&e.preventDefault()},componentType:t.options.componentType,cycleForm:!t._isModernComponentType()},i.filterable)).data(n),t._isMobile&&t.menu.bind(m,(function(n){e(n.item).hasClass("k-filter-item")&&t.pane.navigate(t.filterMenu.view,t.options.animations.left)})))},_lockColumns:function(){var e=this;e._isModernComponentType()?e.wrapper.on("click"+y,".k-lock, .k-unlock",a(e._lockableHandler,e)):e.menu.bind(m,a(e._lockableHandler,e))},_lockableHandler:function(t){var n=this,i=t.item?e(t.item):e(t.target);i.hasClass("k-lock")?(n.owner.lockColumn(n.field),n._isMobile||n.close()):i.hasClass("k-unlock")&&(n.owner.unlockColumn(n.field),n._isMobile||n.close())},_stickyColumns:function(){var e=this;e._isModernComponentType()?e.wrapper.on("click"+y,".k-stick, .k-unstick",a(e._stickableHandler,e)):e.menu.bind(m,a(e._stickableHandler,e))},_stickableHandler:function(t){var n=this,i=t.item?e(t.item):e(t.target),a=n.field,r=n.owner.columns,l=o(r,(function(e){return e.field==a||e.title==a}))[0];i.hasClass("k-stick")?(n.owner.stickColumn(n.field),n.trigger(k,{column:l}),n._isMobile||n.close()):i.hasClass("k-unstick")&&(n.owner.unstickColumn(n.field),n.trigger(b,{column:l}),n._isMobile||n.close())},_updateLockedColumns:function(){var e=this.field,t=this.owner.columns,n=o(t,(function(t){return t.field==e||t.title==e}))[0];if(n){var i=!0===n.locked,a=o(t,(function(e){return!e.hidden&&(e.locked&&i||!e.locked&&!i)})).length,r=!1===n.lockable,l=this.wrapper.find(".k-lock").removeClass("k-state-disabled"),s=this.wrapper.find(".k-unlock").removeClass("k-state-disabled");(i||1==a||r)&&l.addClass("k-state-disabled"),i&&1!=a&&!r||s.addClass("k-state-disabled"),this._updateColumnsLockedState()}},_updateStickyColumns:function(){var e=this.field,t=this.owner.columns,n=o(t,(function(t){return t.field==e||t.title==e}))[0];if(n){var i=!0===n.sticky,a=!0===n.stickable,r=!0===n.locked,l=o(t,(function(e){return!e.hidden&&(e.locked&&r||!e.locked&&!r)})).length,s=this.wrapper.find(".k-stick").removeClass("k-state-disabled"),d=this.wrapper.find(".k-unstick").removeClass("k-state-disabled");(i||!a||r&&1===l)&&s.addClass("k-state-disabled"),i&&a||d.addClass("k-state-disabled")}},refresh:function(){var e,t,n,i=this,a=i.options.dataSource.sort()||[],r=i.field;for(i.wrapper.find(".k-sort-asc, .k-sort-desc").removeClass(c),t=0,n=a.length;t<n;t++)r==(e=a[t]).field&&i.wrapper.find(".k-sort-"+e.dir).addClass(c);i.link[i._filterExist(i.dataSource.filter())?"addClass":"removeClass"]("k-state-active")},_filterExist:function(e){var t,n=!1;if(e){for(var i=0,a=(e=e.filters).length;i<a;i++)(t=e[i]).field==this.field?n=!0:t.filters&&(n=n||this._filterExist(t));return n}}}),L='#if(sortable){#<div class="k-columnmenu-item-wrapper"><div><div class="k-columnmenu-item k-sort-asc" tabindex="0"><span class="k-icon k-i-sort-asc-sm"></span>${messages.sortAscending}</div></div><div><div class="k-columnmenu-item k-sort-desc" tabindex="0"><span class="k-icon k-i-sort-desc-sm"></span>${messages.sortDescending}</div></div></div>#}##if(showColumns){#<div class="k-columnmenu-item-wrapper"><div><div class="k-columnmenu-item-content k-columns-item"><div class="k-column-list-wrapper"><div class="k-column-list" role="menu">#for (var idx = 0; idx < columns.length; idx++) {##if(columns[idx].groupHeader){#<span class="k-column-menu-group-header"><span class="k-column-menu-group-header-text">#=columns[idx].title#</span></span>#} else {#<label class="k-column-list-item" role="menuitemcheckbox" aria-checked="false" #=columns[idx].matchesMedia === false ? "style=\'display:none;\'" : ""#><input class="k-checkbox" type="checkbox" title="#=encodeTitles ? kendo.htmlEncode(columns[idx].title) : columns[idx].title#" data-#=ns#field="#=columns[idx].field.replace(/"/g,"&\\#34;")#" data-#=ns#index="#=columns[idx].index#" data-#=ns#locked="#=columns[idx].locked#" data-#=ns#uid="#=columns[idx].uid#"/><span class="k-checkbox-label"> #=encodeTitles ? kendo.htmlEncode(columns[idx].title) : columns[idx].title#</span></label>#}##}#</div></div><div class="k-columnmenu-actions"><button class="k-button" type="button">${messages.reset}</button><button class="k-button k-primary" type="button">${messages.apply}</button></div></div></div></div>#}##if(filterable){#<div class="k-columnmenu-item-wrapper"><div class="k-columnmenu-item-content k-column-menu-filter"><div class="k-filterable"></div></div></div>#}##if(hasLockableColumns || hasStickableColumns){#<div class="k-columnmenu-item-wrapper"><div class="k-column-menu-position">#if(hasLockableColumns){#<div class="k-columnmenu-item k-lock" tabindex="0"><span class="k-icon k-i-lock"></span>${messages.lock}</div><div class="k-columnmenu-item k-unlock" tabindex="0"><span class="k-icon k-i-unlock"></span>${messages.unlock}</div>#}##if(hasStickableColumns){#<div class="k-columnmenu-item k-stick" tabindex="0"><span class="k-icon k-i-stick"></span>${messages.stick}</div><div class="k-columnmenu-item k-unstick" tabindex="0"><span class="k-icon k-i-unstick"></span>${messages.unstick}</div>#}#</div></div>#}#',F='<ul id="#=uid#">#if(sortable){#<li class="k-item k-menu-item k-sort-asc"><span class="k-link k-menu-link"><span class="k-icon k-i-sort-asc-sm"></span>${messages.sortAscending}</span></li><li class="k-item k-menu-item k-sort-desc"><span class="k-link k-menu-link"><span class="k-icon k-i-sort-desc-sm"></span>${messages.sortDescending}</span></li>#if(showColumns || filterable){#<li class="k-separator k-menu-separator" role="presentation"></li>#}##}##if(showColumns){#<li class="k-item k-menu-item k-columns-item" aria-haspopup="true"><span class="k-link k-menu-link"><span class="k-icon k-i-columns"></span>${messages.columns}</span><ul>#for (var idx = 0; idx < columns.length; idx++) {##if(columns[idx].groupHeader){#<li class="k-column-menu-group-header" #=omitWrapAttribute#="true" ><span class="k-column-menu-group-header-text">#=columns[idx].title#</span></li>#} else {#<li role="menuitemcheckbox" aria-checked="false" #=columns[idx].matchesMedia === false ? "style=\'display:none;\'" : ""#><input type="checkbox" title="#=encodeTitles ? kendo.htmlEncode(columns[idx].title) : columns[idx].title#" data-#=ns#field="#=columns[idx].field.replace(/"/g,"&\\#34;")#" data-#=ns#index="#=columns[idx].index#" data-#=ns#locked="#=columns[idx].locked#" data-#=ns#uid="#=columns[idx].uid#"/>#=encodeTitles ? kendo.htmlEncode(columns[idx].title) : columns[idx].title#</li>#}##}#</ul></li>#if(filterable || hasLockableColumns || hasStickableColumns){#<li class="k-separator k-menu-separator" role="presentation"></li>#}##}##if(filterable){#<li class="k-item k-menu-item k-filter-item" aria-haspopup="true"><span class="k-link k-menu-link"><span class="k-icon k-i-filter"></span>${messages.filter}</span><ul><li><div class="k-filterable"></div></li></ul></li>#if(hasLockableColumns || hasStickableColumns){#<li class="k-separator k-menu-separator" role="presentation"></li>#}##}##if(hasLockableColumns || hasStickableColumns){#<li class="k-item k-menu-item k-position-item" aria-haspopup="true"><span class="k-link k-menu-link"><span class="k-icon k-i-set-column-position"></span>${messages.setColumnPosition}</span><ul>#if(hasLockableColumns){#<li class="k-item k-menu-item k-lock"><span class="k-link k-menu-link"><span class="k-icon k-i-lock"></span>${messages.lock}</span></li><li class="k-item k-menu-item k-unlock"><span class="k-link k-menu-link"><span class="k-icon k-i-unlock"></span>${messages.unlock}</span></li>#if(hasStickableColumns){#<li class="k-separator k-menu-separator" role="presentation"></li>#}##}##if(hasStickableColumns){#<li class="k-item k-menu-item k-stick"><span class="k-link k-menu-link"><span class="k-icon k-i-stick"></span>${messages.stick}</span></li><li class="k-item k-menu-item k-unstick"><span class="k-link k-menu-link"><span class="k-icon k-i-unstick"></span>${messages.unstick}</span></li>#}#</ul></li>#}#</ul>',P='<div data-#=ns#role="view" class="k-grid-column-menu"><div data-#=ns#role="header" class="k-header"><a href="\\#" class="k-header-cancel k-link" title="#=messages.cancel#" aria-label="#=messages.cancel#"><span class="k-icon k-i-arrow-chevron-left"></span></a>${messages.settings}<a href="\\#" class="k-header-done k-link" title="#=messages.done#" aria-label="#=messages.done#"><span class="k-icon k-i-check"></span></a></div><div class="k-column-menu"><ul class="k-reset"><li><span class="k-list-title">#=messages.column#: ${title}</span><ul class="k-listgroup k-listgroup-flush k-mb-4">#if(sortable){#<li id="#=kendo.guid()#" class="k-item k-listgroup-item k-sort-asc"><span class="k-link"><span class="k-icon k-i-sort-asc-sm"></span><span class="k-item-title">${messages.sortAscending}</span></span></li><li id="#=kendo.guid()#" class="k-item k-listgroup-item k-sort-desc"><span class="k-link"><span class="k-icon k-i-sort-desc-sm"></span><span class="k-item-title">${messages.sortDescending}</span></span></li>#}##if(hasLockableColumns){#<li id="#=kendo.guid()#" class="k-item k-listgroup-item k-lock"><span class="k-link"><span class="k-icon k-i-lock"></span><span class="k-item-title">${messages.lock}</span></span></li><li id="#=kendo.guid()#" class="k-item k-listgroup-item k-unlock"><span class="k-link"><span class="k-icon k-i-unlock"></span><span class="k-item-title">${messages.unlock}</span></span></li>#}##if(hasStickableColumns){#<li id="#=kendo.guid()#" class="k-item k-listgroup-item k-stick"><span class="k-link"><span class="k-icon k-i-stick"></span><span class="k-item-title">${messages.stick}</span></span></li><li id="#=kendo.guid()#" class="k-item k-listgroup-item k-unstick"><span class="k-link"><span class="k-icon k-i-unstick"></span><span class="k-item-title">${messages.unstick}</span></span></li>#}##if(filterable){#<li id="#=kendo.guid()#" class="k-item k-listgroup-item k-filter-item"><span class="k-link k-filterable"><span class="k-icon k-i-filter"></span><span class="k-item-title">${messages.filter}</span><span class="k-select"><span class="k-icon k-i-arrow-chevron-right"></span></span></span></li>#}#</ul></li>#if(showColumns){#<li class="k-columns-item"><span class="k-list-title">${messages.columnVisibility}</span>#if(hasGroups){##for (var i = 0; i < groups.length; i++) {#<span class="k-list-group-header k-pb-1">#:groups[i].title#</span><ul class="k-listgroup k-listgroup-flush k-mb-4">#for (var idx = 0; idx < groups[i].columns.length; idx++) {#<li id="#=kendo.guid()#" class="k-item k-listgroup-item"><span class="k-listgroup-form-row"><span class="k-listgroup-form-field-label k-item-title">#=groups[i].columns[idx].title#</span><span class="k-listgroup-form-field-wrapper"><input type="checkbox" title="#=groups[i].columns[idx].title#"  data-#=ns#field="#=groups[i].columns[idx].field.replace(/"/g,"&\\#34;")#" data-#=ns#index="#=groups[i].columns[idx].index#" data-#=ns#uid="#=groups[i].columns[idx].uid#" data-#=ns#locked="#=groups[i].columns[idx].locked#" /></span></span></li>#}#</ul>#}##} else {#<ul class="k-listgroup k-listgroup-flush k-mb-4">#for (var idx = 0; idx < columns.length; idx++) {#<li id="#=kendo.guid()#" class="k-item k-listgroup-item"><span class="k-listgroup-form-row"><span class="k-listgroup-form-field-label k-item-title">#=columns[idx].title#</span><span class="k-listgroup-form-field-wrapper"><input type="checkbox" title="#=columns[idx].title#"  data-#=ns#field="#=columns[idx].field.replace(/"/g,"&\\#34;")#" data-#=ns#index="#=columns[idx].index#" data-#=ns#uid="#=columns[idx].uid#" data-#=ns#locked="#=columns[idx].locked#" /></span></span></li>#}#</ul>#}#</li>#}#<li class="k-item k-clear-wrap"><ul class="k-listgroup k-listgroup-flush"><li class="k-listgroup-item"><span class="k-link k-label k-clear" title="#=messages.clear#" aria-label="#=messages.clear#">#=messages.clear#</span></li></ul></li></ul></div></div>',z=S.extend({init:function(e,t){var n=this;S.fn.init.call(n,e,t),n._createCheckBoxes(),n.element.on("click"+y,"li.k-item:not(.k-separator):not(.k-state-disabled):not(:has(.k-switch))","_click")},events:[m],_click:function(t){var n=this;if(e(t.target).is("[type=checkbox]")||t.preventDefault(),!e(t.target).hasClass("k-clear"))return e(t.target).hasClass("k-filterable")?(n._cancelChanges(!0),void n.trigger(m,{item:t.currentTarget})):void n._updateSelectedItems(t.currentTarget);n._cancelChanges(!0)},_updateSelectedItems:function(t){var n,i,a,r=this,o=e(t),l=r.options.columnMenu.view.state||{columns:{}},s=o.prop("id");o.hasClass("k-filter-item")||(l[s]?l[s]=!1:l[s]=!0,(o.hasClass("k-sort-asc")||o.hasClass("k-sort-desc"))&&(o.hasClass("k-sort-asc")?(n="asc",i=r.element.find(".k-sort-desc")):(n="desc",i=r.element.find(".k-sort-asc")),a=i.prop("id"),n!==l.initialSort||o.hasClass("k-state-selected")||(l[s]=!1),l[a]&&(l[a]=!1),i.removeClass(c)),o.hasClass(c)?o.removeClass(c):o.addClass(c))},_cancelChanges:function(e){var t=this,n=t.options.columnMenu,i=n.view,a=(i.state||{columns:{}}).columns;if(t.element.find("."+c).removeClass(c),n.refresh(),e){var r=[];for(var o in a)if(a.hasOwnProperty(o)&&!0===a[o]){var l=i.element.find("#"+o);r.push(l[0])}for(var s=r.length-1;s>=0;s--)t.trigger(m,{item:r[s]});n.options.hasLockableColumns&&n._updateLockedColumns(),n.options.hasStickableColumns&&n._updateStickyColumns()}t.options.columnMenu.view.state={columns:{}}},_applyChanges:function(){var e=this,t=e.options.columnMenu.view,n=t.state||{columns:{}};for(var i in n)if(n.hasOwnProperty(i)&&"initialSort"!==i&&"columns"!==i&&!0===n[i]){var a=t.element.find("#"+i);a.hasClass(c)?a.removeClass(c):a.addClass(c),e.trigger(m,{item:a[0]})}},_createCheckBoxes:function(){var e=this;e.element.find(".k-columns-item").find("[type='checkbox']").kendoSwitch({messages:{checked:"",unchecked:""},change:function(t){var n=t.sender.element.closest(".k-item"),i=e.options.columnMenu.view.state||{columns:{}},a=n.prop("id");i.columns[a]?i.columns[a]=!1:i.columns[a]=!0,e.trigger(m,{item:n})}})},_destroyCheckBoxes:function(){for(var e,t=this.element.find(".k-columns-item").find("[type='checkbox']"),n=0;n<t.length;n++)(e=t.eq(n).data("kendoSwitch"))&&e.destroy()},close:function(){this.options.pane.navigate("")},destroy:function(){var e=this;S.fn.destroy.call(e),e.element.off(y),e._destroyCheckBoxes()}});i.plugin(A)}(window.kendo.jQuery),window.kendo})?i.apply(t,a):i)||(e.exports=r)},99761:function(e,t,n){var i,a,r;n.amdD,a=[n(55031)],void 0===(r="function"==typeof(i=function(){return function(e,t){var n=window.kendo,i=n.ui,a=i.Widget,r="dir",o="asc",l="single",s="field",d="desc",c=".kendoColumnSorter",u=".k-link",p="aria-sort",h=e.proxy,f=a.extend({init:function(e,t){var n,i=this;a.fn.init.call(i,e,t),i._refreshHandler=h(i.refresh,i),i.dataSource=i.options.dataSource.bind("change",i._refreshHandler),i.directions=i.options.initialDirection===o?[o,d]:[d,o],(n=i.element.find(u))[0]||(n=i.element.wrapInner('<a class="k-link" href="#"/>').find(u)),i.link=n,i.element.on("click"+c,h(i._click,i))},options:{name:"ColumnSorter",mode:l,allowUnsort:!0,compare:null,filter:"",initialDirection:o,showIndexes:!1},events:["change"],destroy:function(){var e=this;a.fn.destroy.call(e),e.element.off(c),e.dataSource.unbind("change",e._refreshHandler),e._refreshHandler=e.element=e.link=e.dataSource=null},refresh:function(i){if(!i||"itemchange"!==i.action&&"sync"!==i.action){var a,l,c,u,h=this,f=h.dataSource.sort()||[],k=h.element,b=k.attr(n.attr(s)),v=(h.dataSource._sortFields||{})[b];k.removeAttr(n.attr(r)),k.removeAttr(p),v&&(a=v.dir,k.attr(n.attr(r),a),u=v.index),k.is("th")&&v&&(l=m(k))&&(c=k.attr(n.attr("index"))?g(k.closest("table")).index(k):k.parent().children(":visible").index(k),l.find("col:not(.k-group-col):not(.k-hierarchy-col)").eq(c).toggleClass("k-sorted",a!==t)),k.toggleClass("k-sorted",a!==t),k.find(".k-i-sort-asc-sm,.k-i-sort-desc-sm,.k-sort-order").remove(),a===o?(e('<span class="k-icon k-i-sort-asc-sm" />').appendTo(h.link),k.attr(p,"ascending")):a===d&&(e('<span class="k-icon k-i-sort-desc-sm" />').appendTo(h.link),k.attr(p,"descending")),h.options.showIndexes&&f.length>1&&u&&e('<span class="k-sort-order" />').html(u).appendTo(h.link)}},_toggleSortDirection:function(e){var n=this.directions;return e===n[n.length-1]&&this.options.allowUnsort?t:n[0]===e?n[1]:n[0]},_click:function(e){var i,a,o=this,d=o.element,c=d.attr(n.attr(s)),u=d.attr(n.attr(r)),p=o.options,h=null===o.options.compare?t:o.options.compare,f=o.dataSource.sort()||[];if(e.preventDefault(),(!p.filter||d.is(p.filter))&&(u=this._toggleSortDirection(u),!this.trigger("change",{sort:{field:c,dir:u,compare:h}}))){if(p.mode===l)f=[{field:c,dir:u,compare:h}];else if("multiple"===p.mode){for(i=0,a=f.length;i<a;i++)if(f[i].field===c){f.splice(i,1);break}f.push({field:c,dir:u,compare:h})}this.dataSource.options.endless&&(this.dataSource.options.endless=null,d.closest(".k-grid").getKendoGrid()._endlessPageSize=o.dataSource.options.pageSize,this.dataSource.pageSize(o.dataSource.options.pageSize)),this.dataSource.sort(f)}}});function g(i){var a=i.find("tr:not(.k-filter-row)"),r=n.attr("index"),o=a.find("th["+r+"]:visible");return o.sort((function(n,i){n=e(n),i=e(i);var a=n.attr(r),o=i.attr(r);return a===t&&(a=e(n).index()),o===t&&(o=e(i).index()),(a=parseInt(a,10))>(o=parseInt(o,10))?1:a<o?-1:0})),o}function m(e){var t=null;return e.is("th")&&((t=e.closest("table")).parent().hasClass("k-grid-header-wrap")?t=t.closest(".k-grid").find(".k-grid-content > table"):t.parent().hasClass("k-grid-header-locked")&&(t=t.closest(".k-grid").find(".k-grid-content-locked > table"))),t}i.plugin(f)}(window.kendo.jQuery),window.kendo})?i.apply(t,a):i)||(e.exports=r)},45026:function(e,t,n){var i,a,r;n.amdD,a=[n(55031)],void 0===(r="function"==typeof(i=function(){return function(e,t){var n=window.kendo,i=n.ui.Widget,a=n.ui,r=n.keys,o=e.extend,l=".kendoExpansionPanel",s="expand",d="collapse",c="complete",u="k-state-disabled",p="aria-disabled",h="aria-expanded",f="aria-hidden",g="k-expanded",m="k-expander-content",k="k-expander-content-wrapper",b=".k-expander-indicator",v="k-state-focus",_="click",w="keydown",C="height",y=e.proxy,S='<div #if(!useBareTemplate){# class="k-expander-header" #}#  data-#=ns#expander-header role="button" tabindex="0">#if(!useBareTemplate){#<div class="k-expander-title">#:title#</div>#} else {##=title##}#<span class="k-expander-spacer"></span>#if(!useBareTemplate){#<div class="k-expander-sub-title">#:subTitle#</div>#}#<span class="k-expander-indicator #:iconClass#"></span></div>',x=i.extend({init:function(t,a){var r=this,o=n.attr("expander-header");i.fn.init.call(r,t,a),a=e.extend(!0,{},a),r._wrapper(),r._animations(a),r.element.attr(f,!a.expanded),r.options.useBareTemplate||r.element.addClass(m),r.wrapper.on(_+l,"["+o+"]",y(r._click,r)).on("focusin"+l,y(r._focus,r)).on("focusout"+l,y(r._blur,r)).on(w+l,y(r._keydown,r)),r.toggle(r.options.expanded,!1),n.notify(r)},events:[s,d,c],options:{name:"ExpansionPanel",disabled:!1,expanded:!1,animation:{expand:{effects:"expand:vertical",duration:200},collapse:{duration:200}},height:null,toggleable:!0,expandIconClass:"k-icon k-i-arrow-chevron-down",collapseIconClass:"k-icon k-i-arrow-chevron-up",title:"",subTitle:"",headerClass:null,useBareTemplate:!1},_wrapper:function(){var t,i,a=this,r=a.element,o=r[0];t=r.wrap("<div class='k-widget k-expander"+(a.options.expanded?" "+g:"")+"'></div>").parent(),i=n.template(S)({title:a.options.title,subTitle:a.options.subTitle,iconClass:a.options.expanded?a.options.expandIconClass:a.options.collapseIconClass,useBareTemplate:a.options.useBareTemplate,ns:n.ns}),a.header=e(i),t.prepend(a.header),a._indicator=t.find(b),t[0].style.cssText=o.style.cssText,o.style.width="100%",a.wrapper=t.addClass(a.options.disabled?u:""),a.contentWrapper=a.element.wrap("<div></div>").parent().addClass(k),a.header.attr(p,a.options.disabled).attr(h,a.options.expanded),a.options.useBareTemplate||t.addClass(o.className),a.options.height&&a.wrapper.css(C,a.options.height),a.options.headerClass&&a.header.addClass(a.options.headerClass)},_animations:function(e){e&&"animation"in e&&!e.animation&&(e.animation={expand:{effects:{}},collapse:{hide:!0,effects:{}}})},_click:function(e){var t=this,n=t._indicator.hasClass(t.options.collapseIconClass),i=t.element;t.options.toggleable?t.trigger(n?d:s,{item:i[0]})||t.toggle():e.preventDefault()},toggle:function(e,n){var i=this,a=i.options.animation,r=a.expand,l=a.collapse&&"effects"in a.collapse,s=o({},a.expand,a.collapse),d=i.element,c=i.wrapper;e!==t?!1===n&&(s=null):e=!i._indicator.hasClass(i.options.collapseIconClass),l||(s=o(s,{reverse:!0})),e?r=o({complete:y(i._completeHandler,i)},r):(r=o(s,{hide:!0})).complete=y(i._completeHandler,i),e?(i._indicator.removeClass(this.options.expandIconClass),i._indicator.addClass(this.options.collapseIconClass),c.addClass(g)):(i._indicator.removeClass(this.options.collapseIconClass),i._indicator.addClass(this.options.expandIconClass),c.removeClass(g)),d.attr(f,!e),i.header.attr(h,e),i.contentWrapper.kendoStop(!0,!0).kendoAnimate(r)},_completeHandler:function(){this.trigger(c)},_keydown:function(t){var n=this,i=t.keyCode;i!=r.ENTER&&i!=r.SPACEBAR||!e(t.target).is("[data-expander-header]")||(n._click(t),t.preventDefault())},destroy:function(){var e=this;e.wrapper.off(l),i.fn.destroy.call(e)},enable:function(e){this.wrapper.toggleClass(u,!e),this.header.attr(p,!e)},_blur:function(){var e=this;e.header&&e.wrapper.removeClass(v)},_focus:function(){var e=this;e.wrapper&&e.wrapper.addClass(v)}});a.plugin(x)}(window.kendo.jQuery),window.kendo})?i.apply(t,a):i)||(e.exports=r)},3811:function(e,t,n){var i,a,r;n.amdD,a=[n(92757),n(78129),n(13604),n(1700)],void 0===(r="function"==typeof(i=function(){return function(e,t){var n=window.kendo,i=n.ui,a=e.proxy,r=n.support.browser.chrome?"disabled":"off",o="kendoPopup",l="init",s="open",d="refresh",c="change",u=".kendoFilterMenu",p="Is equal to",h="Is not equal to",f={number:"numerictextbox",date:"datepicker"},g={string:"text",number:"number",date:"date"},m=n.isFunction,k=i.Widget,b='<div class="k-filter-menu-container"><div class="k-filter-help-text">#=messages.info#</div><label><input type="radio" data-#=ns#bind="checked: filters[0].value" value="true" name="filters[0].value"/>#=messages.isTrue#</label><label><input type="radio" data-#=ns#bind="checked: filters[0].value" value="false" name="filters[0].value"/>#=messages.isFalse#</label><div class="k-action-buttons"><button type="submit" title="#=messages.filter#" class="k-button k-primary">#=messages.filter#</button><button type="reset" title="#=messages.clear#" class="k-button">#=messages.clear#</button></div></div>',v='#var inputId;#<div class="k-filter-menu-container"><div><ul class="k-radio-list k-reset"><li>#inputId = kendo.guid()#<input type="radio" class="k-radio" id="#=inputId#" data-#=ns#bind="checked: filters[0].value" value="true" name="filters[0].value" /><label class="k-radio-label" for="#=inputId#">#=messages.isTrue#</label></li><li>#inputId = kendo.guid()#<input type="radio" class="k-radio" id="#=inputId#" data-#=ns#bind="checked: filters[0].value" value="false" name="filters[0].value" /><label class="k-radio-label" for="#=inputId#">#=messages.isFalse#</label></li></ul><div class="k-columnmenu-actions"><button class="k-button" type="reset" title="#=messages.clear#">#=messages.clear#</button><button class="k-button k-primary" type="submit" title="#=messages.filter#">#=messages.filter#</button></div></div></div>',_='<div class="k-filter-menu-container"><div class="k-filter-help-text">#=messages.info#</div><label><input class="k-textbox" data-#=ns#bind="value: filters[0].value" name="filters[0].value"/></label><div class="k-action-buttons"><button type="submit" title="#=messages.filter#" class="k-button k-primary">#=messages.filter#</button><button type="reset" title="#=messages.clear#" class="k-button">#=messages.clear#</button></div></div>',w='<div class="k-filter-menu-container">#if(componentType === "classic") {#<div class="k-filter-help-text">#=messages.info#</div>#}#<select title="#=messages.operator#" data-#=ns#bind="value: filters[0].operator" data-#=ns#role="dropdownlist">#for(var op in operators){#<option value="#=op#">#=operators[op]#</option>#}#</select>#if(values){#<select title="#=messages.value#" data-#=ns#bind="value:filters[0].value" data-#=ns#text-field="text" data-#=ns#value-field="value" data-#=ns#source=\'#=kendo.stringify(values).replace(/\'/g,"&\\#39;")#\' data-#=ns#role="dropdownlist" data-#=ns#option-label="#=messages.selectValue#" data-#=ns#value-primitive="true"></select>#}else{#<input title="#=messages.value#" data-#=ns#bind="value:filters[0].value" class="k-textbox" type="text" #=role ? "data-" + ns + "role=\'" + role + "\'" : ""# />#}##if(extra){##if(componentType === "modern") {#<ul data-#=ns#role="buttongroup" data-bind="events: { select: onLogicChange }"><li data-#=ns#value="and">And</li><li data-#=ns#value="or">Or</li></ul>#} else {#<select title="#=messages.logic#" class="k-filter-and" data-#=ns#bind="value: logic" data-#=ns#role="dropdownlist"><option value="and">#=messages.and#</option><option value="or">#=messages.or#</option></select>#}#<select title="#=messages.additionalOperator#" data-#=ns#bind="value: filters[1].operator" data-#=ns#role="dropdownlist">#for(var op in operators){#<option value="#=op#">#=operators[op]#</option>#}#</select>#if(values){#<select title="#=messages.additionalValue#" data-#=ns#bind="value:filters[1].value" data-#=ns#text-field="text" data-#=ns#value-field="value" data-#=ns#source=\'#=kendo.stringify(values).replace(/\'/g,"&\\#39;")#\' data-#=ns#role="dropdownlist" data-#=ns#option-label="#=messages.selectValue#" data-#=ns#value-primitive="true"></select>#}else{#<input title="#=messages.additionalValue#" data-#=ns#bind="value: filters[1].value" class="k-textbox" type="text" #=role ? "data-" + ns + "role=\'" + role + "\'" : ""#/>#}##}#<div class="k-action-buttons"><button type="submit" title="#=messages.filter#" class="k-button k-primary">#=messages.filter#</button><button type="reset" title="#=messages.clear#" class="k-button">#=messages.clear#</button></div></div>',C='<div data-#=ns#role="view" class="k-grid-filter-menu"><div data-#=ns#role="header" class="k-header"><a href="\\#" class="k-header-cancel k-link" title="#=messages.cancel#" aria-label="#=messages.cancel#"><span class="k-icon k-i-arrow-chevron-left"></span></a>#=messages.filter# #=messages.into# #=title#<a href="\\#" class="k-header-done k-link" title="#=messages.done#" aria-label="#=messages.done#"><span class="k-icon k-i-check"></span></a></div><form title="#=messages.title#" class="k-filter-menu"><ul class="k-reset"><li><span class="k-list-title k-filter-help-text">#=messages.info#</span><ul class="k-listgroup k-listgroup-flush"><li class="k-item k-listgroup-item"><label class="k-listgroup-form-row k-label"><span class="k-listgroup-form-field-label k-filter-operator-text">#=messages.operator#</span><span class="k-listgroup-form-field-wrapper"><select id="operator_#=filterMenuGuid#" title="#=messages.operator#" class="k-filter-operator" data-#=ns#bind="value: filters[0].operator" autocomplete="'+r+'" >#for(var op in operators){#<option value="#=op#">#=operators[op]#</option>#}#</select></span></label></li><li class="k-item k-listgroup-item"><label class="k-listgroup-form-row k-label"><span class="k-listgroup-form-field-label k-filter-input-text">#=messages.value#</span><span class="k-listgroup-form-field-wrapper">#if(values){#<select id="value_#=filterMenuGuid#" title="#=messages.value#" data-#=ns#bind="value:filters[0].value" autocomplete="'+r+'" ><option value="">#=messages.selectValue#</option>#for(var val in values){#<option value="#=values[val].value#">#=values[val].text#</option>#}#</select>#}else{#<input id="value_#=filterMenuGuid#" title="#=messages.value#" data-#=ns#bind="value:filters[0].value" class="k-value-input" type="#=inputType#" autocomplete="'+r+'" />#}#</span></label></li></ul>#if(extra){#<ul class="k-listgroup k-listgroup-flush"><li class="k-item k-listgroup-item"><label class="k-listgroup-form-row k-label"><span class="k-listgroup-form-field-label k-filter-logic-and-text">#=messages.and#</span><span class="k-listgroup-form-field-wrapper"><input id="and_#=filterMenuGuid#" title="#=messages.and#" type="radio" name="logic"data-#=ns#bind="checked: logic" value="and" autocomplete="'+r+'" /></span></label></li><li class="k-item k-listgroup-item"><label class="k-listgroup-form-row k-label"><span class="k-listgroup-form-field-label k-filter-logic-or-text">#=messages.or#</span><span class="k-listgroup-form-field-wrapper"><input id="or_#=filterMenuGuid#" title="#=messages.or#" type="radio" name="logic" data-#=ns#bind="checked: logic" value="or" autocomplete="'+r+'" /></span></label></li></ul><ul class="k-listgroup k-listgroup-flush"><li class="k-item k-listgroup-item"><label class="k-listgroup-form-row k-label"><span class="k-listgroup-form-field-label k-filter-operator-text">#=messages.additionalOperator#</span><span class="k-listgroup-form-field-wrapper"><select id="additionalOperator_#=filterMenuGuid#" title="#=messages.additionalOperator#" class="k-filter-operator" data-#=ns#bind="value: filters[1].operator" autocomplete="'+r+'" >#for(var op in operators){#<option value="#=op#">#=operators[op]#</option>#}#</select></span></label></li><li class="k-item k-listgroup-item"><label class="k-listgroup-form-row k-label"><span class="k-listgroup-form-field-label k-filter-input-text">#=messages.additionalValue#</span><span class="k-listgroup-form-field-wrapper">#if(values){#<select id="additionalValue_#=filterMenuGuid#" title="#=messages.additionalValue#" data-#=ns#bind="value:filters[1].value" autocomplete="'+r+'" ><option value="">#=messages.selectValue#</option>#for(var val in values){#<option value="#=values[val].value#">#=values[val].text#</option>#}#</select>#}else{#<input id="additionalValue_#=filterMenuGuid#" title="#=messages.additionalValue#" data-#=ns#bind="value:filters[1].value" class="k-value-input" type="#=inputType#" autocomplete="'+r+'" />#}#</span></label></li></ul>#}#</li><li class="k-item k-clear-wrap"><span class="k-list-title">&nbsp;</span><ul class="k-listgroup k-listgroup-flush"><li class="k-listgroup-item"><span class="k-link k-label k-clear" title="#=messages.clear#" aria-label="#=messages.clear#">#=messages.clear#</span></li></ul></li></ul></form></div>',y='<div data-#=ns#role="view" class="k-grid-filter-menu"><div data-#=ns#role="header" class="k-header"><a href="\\#" class="k-header-cancel k-link" title="#=messages.cancel#" aria-label="#=messages.cancel#"><span class="k-icon k-i-arrow-chevron-left"></span></a>#=messages.filter# #=messages.into# #=title#<a href="\\#" class="k-header-done k-link" title="#=messages.done#" aria-label="#=messages.done#"><span class="k-icon k-i-check"></span></a></div><form title="#=messages.title#" class="k-filter-menu"><ul class="k-reset"><li><span class="k-list-title k-filter-help-text">#=messages.info#</span><ul class="k-listgroup k-listgroup-flush k-multicheck-bool-wrap"><li class="k-item k-listgroup-item"><label class="k-listgroup-form-row k-label"><span class="k-listgroup-form-field-label k-item-title">#=messages.isTrue#</span><span class="k-listgroup-form-field-wrapper"></span><input id="true_#=filterMenuGuid#" title="#=messages.isTrue#" type="radio" data-#=ns#bind="checked: filters[0].value" value="true" name="filters[0].value" autocomplete="'+r+'" /></span></label></li><li class="k-item k-listgroup-item"><label class="k-listgroup-form-row k-label"><span for="false_#=filterMenuGuid#" class="k-listgroup-form-field-label k-item-title">#=messages.isFalse#</span><span class="k-listgroup-form-field-wrapper"><input id="false_#=filterMenuGuid#" title="#=messages.isFalse#" type="radio" data-#=ns#bind="checked: filters[0].value" value="false" name="filters[0].value" autocomplete="'+r+'" /></span></label></li></ul></li><li class="k-item k-clear-wrap"><span class="k-list-title">&nbsp;</span><ul class="k-listgroup k-listgroup-flush"><li class="k-listgroup-item"><span class="k-link k-label k-clear" title="#=messages.clear#" aria-label="#=messages.clear#">#=messages.clear#</span></li></ul></li></ul></form></div>';function S(t,n){t.filters&&(t.filters=e.grep(t.filters,(function(e){return S(e,n),e.filters?e.filters.length:e.field!=n})))}function x(e){var t,n,i,a,r,o;if(e&&e.length)for(o=[],t=0,n=e.length;t<n;t++)r=""!==(i=e[t]).text?i.text||i.value||i:i.text,a=null==i.value?i.text||i:i.value,o[t]={text:r,value:a};return o}function T(t,n){return e.grep(t,(function(t){return t.filters?(t.filters=e.grep(t.filters,(function(e){return e.field!=n})),t.filters.length):t.field!=n}))}var H=k.extend({init:function(t,i){var r,o,l,s,d=this,p="string";for(o in(i=i||{}).componentType=i.componentType||"classic",k.fn.init.call(d,t,i),r=d.operators=i.operators||{},t=d.element,(i=d.options).appendToElement||((l=t.addClass("k-with-icon k-filterable").find(".k-grid-filter"))[0]||(l=t.prepend('<a class="k-grid-filter" href="#" title="'+i.messages.filter+'" aria-label="'+i.messages.filter+'"><span class="k-icon k-i-filter"></span></a>').find(".k-grid-filter")),l.attr("tabindex",-1).on("click"+u,a(d._click,d))),d.link=l||e(),d.dataSource=A.create(i.dataSource),d.field=i.field||t.attr(n.attr("field")),d.model=d.dataSource.reader.model,d._parse=function(e){return null!=e?e+"":e},d.model&&d.model.fields&&(s=d.model.fields[d.field])&&(p=s.type||"string",s.parse&&(d._parse=a(s.parse,s))),i.values&&(p="enums"),d.type=p,r=r[p]||i.operators[p])break;d._defaultFilter=function(){return{field:d.field,operator:o||"eq",value:""}},d._refreshHandler=a(d.refresh,d),d.dataSource.bind(c,d._refreshHandler),i.appendToElement?d._init():d.refresh()},_init:function(){var t,i=this,r=i.options.ui,o=m(r);i.pane=i.options.pane,i.pane&&(i._isMobile=!0),o||(t=r||f[i.type]),i._isMobile?i._createMobileForm(t):i._createForm(t),i.form.on("submit"+u,a(i._submit,i)).on("reset"+u,a(i._reset,i)),o&&i.form.find(".k-textbox").removeClass("k-textbox").each((function(){r(e(this))})),i.form.find("["+n.attr("role")+"=numerictextbox]").removeClass("k-textbox").end().find("["+n.attr("role")+"=datetimepicker]").removeClass("k-textbox").end().find("["+n.attr("role")+"=timepicker]").removeClass("k-textbox").end().find("["+n.attr("role")+"=datepicker]").removeClass("k-textbox"),i.refresh(),i.trigger(l,{field:i.field,container:i.form}),i.options.cycleForm&&n.cycleForm(i.form)},_createForm:function(t){var i=this,r=i.options,l=i.operators||{},s=i.type;l=l[s]||r.operators[s],i.form=e('<form title="'+i.options.messages.title+'" class="k-filter-menu"/>').html(n.template(i._getTemplate())({field:i.field,format:r.format,ns:n.ns,messages:r.messages,extra:r.extra,operators:l,type:s,role:t,values:x(r.values),componentType:i.options.componentType})),r.appendToElement?(i.element.append(i.form),i.popup=i.element.closest(".k-popup").data(o)):i.popup=i.form[o]({anchor:i.link,copyAnchorStyles:!1,open:a(i._open,i),activate:a(i._activate,i),close:function(){i.options.closeCallback&&i.options.closeCallback(i.element)}}).data(o),i.form.on("keydown"+u,a(i._keydown,i))},_getTemplate:function(){var e=this,t=m(e.options.ui);return"boolean"===e.type?t?_:"modern"===e.options.componentType?v:b:w},_createMobileForm:function(t){var i=this,a=i.options,r=i.operators||{},o=n.guid(),l=i.type;r=r[l]||a.operators[l],i.form=e("<div />").html(n.template("boolean"===l?y:C)({field:i.field,title:a.title||i.field,format:a.format,ns:n.ns,messages:a.messages,extra:a.extra,operators:r,filterMenuGuid:o,type:l,role:t,inputType:g[l],values:x(a.values)})),i.view=i.pane.append(i.form.html()),i.form=i.view.element.find("form"),i.view.element.on("click",".k-header-done",(function(e){i.form.submit(),e.preventDefault()})).on("click",".k-header-cancel",(function(e){i._closeForm(),e.preventDefault()})).on("click",".k-clear",(function(e){i._mobileClear(),e.preventDefault()})),i.view.bind("showStart",(function(){i.refresh()}))},refresh:function(){var e=this,t=e.dataSource.filter()||{filters:[],logic:"and"},i=[e._defaultFilter()],a=e._defaultFilter().operator;(e.options.extra||"isnull"!==a&&"isnullorempty"!==a&&"isnotnullorempty"!==a&&"isnotnull"!==a&&"isempty"!==a&&"isnotempty"!==a)&&i.push(e._defaultFilter()),e.filterModel=n.observable({logic:"and",filters:i}),e.form&&(n.bind(e.form.children().first(),e.filterModel),"modern"===e.options.componentType&&e.options.extra&&"boolean"!==e.type&&!e._isMobile&&(e.filterModel.bind("change",(function(){var t=n.attr("role"),i=e.form.find("["+t+"='buttongroup']").data("kendoButtonGroup"),a="and"===this.logic?0:1;i.select(i.element.children().eq(a))})),e.filterModel.set("onLogicChange",e._logicChangeHandler))),e._bind(t)?e.link.addClass("k-state-active"):e.link.removeClass("k-state-active")},_logicChangeHandler:function(e){var t=n.attr("value"),i=e.sender.current().attr(t);this.set("logic",i)},destroy:function(){var e=this;k.fn.destroy.call(e),e.form&&(n.unbind(e.form),n.destroy(e.form),e.form.unbind(u),e.popup&&(e.popup.destroy(),e.popup=null),e.form=null),e.view&&(e.view.purge(),e.view=null),e.link.unbind(u),e._refreshHandler&&(e.dataSource.unbind(c,e._refreshHandler),e.dataSource=null),e.element=e.link=e._refreshHandler=e.filterModel=null},_bind:function(e){var t,n,i,a,r=this,o=e.filters,l=!1,s=0,d=r.filterModel;for(t=0,n=o.length;t<n;t++)(a=o[t]).field==r.field?(d.set("logic",e.logic),(i=d.filters[s])||(d.filters.push({field:r.field}),i=d.filters[s]),i.set("value",r._parse(a.value)),i.set("operator",a.operator),s++,l=!0):a.filters&&(l=l||r._bind(a));return l},_stripFilters:function(t){return e.grep(t,(function(e){return""!==e.value&&null!=e.value||"isnull"===e.operator||"isnotnull"===e.operator||"isempty"===e.operator||"isnotempty"===e.operator||"isnullorempty"==e.operator||"isnotnullorempty"==e.operator}))},_merge:function(e){var t,n,i,a=this,r=e.logic||"and",o=this._stripFilters(e.filters),l=a.dataSource.filter()||{filters:[],logic:"and"};for(S(l,a.field),n=0,i=o.length;n<i;n++)(t=o[n]).value=a._parse(t.value);return o.length&&(l.filters.length?(e.filters=o,"and"!==l.logic&&(l.filters=[{logic:l.logic,filters:l.filters}],l.logic="and"),o.length>1?l.filters.push(e):l.filters.push(o[0])):(l.filters=o,l.logic=r)),l},filter:function(e){var t=this._stripFilters(e.filters);t.length&&this.trigger("change",{filter:{logic:e.logic,filters:t},field:this.field})||(e=this._merge(e)).filters.length&&this.dataSource.filter(e)},clear:function(e){var t=this;e=e||t.dataSource.filter()||{filters:[]},this.trigger("change",{filter:null,field:t.field})||t._removeFilter(e)},_mobileClear:function(){var t=this,n=t.view.element;if("boolean"===t.type){var i=n.find("[type='radio']:checked"),a=i.val();i.val(""),i.trigger("change"),i.val(a),i.prop("checked",!1)}else if(n.find("select").each((function(t,n){var i=e(n);i.val(i.find("option:first").val()),i.trigger("change")})),("string"===t.type||"date"===t.type||"number"===t.type)&&n.find(".k-value-input").each((function(t,n){var i=e(n);i.val(""),i.trigger("change")})),t.options.extra){var r=n.find("[name=logic]").first();r.prop("checked",!0),r.trigger("change")}},_removeFilter:function(t){var n=this;t.filters=e.grep(t.filters,(function(e){return e.filters?(e.filters=T(e.filters,n.field),e.filters.length):e.field!=n.field})),t.filters.length||(t=null),n.dataSource.filter(t)},_submit:function(t){t.preventDefault(),t.stopPropagation();var n=this.filterModel.toJSON(),i=e.grep(n.filters,(function(e){return""!==e.value&&null!==e.value}));if(this._checkForNullOrEmptyFilter(n)||i&&i.length)this.filter(n);else{var a=this.dataSource.filter();a&&(a.filters.push(n),n=a),this.clear(n)}this._closeForm()},_checkForNullOrEmptyFilter:function(e){if(!e||!e.filters||!e.filters.length)return!1;var t,n=!1,i=!1;return e.filters[0]&&(n="isnull"==(t=e.filters[0].operator)||"isnotnull"==t||"isnotempty"==t||"isempty"==t||"isnullorempty"==t||"isnotnullorempty"==t),e.filters[1]&&(i="isnull"==(t=e.filters[1].operator)||"isnotnull"==t||"isnotempty"==t||"isempty"==t||"isnullorempty"==t||"isnotnullorempty"==t),!this.options.extra&&n||this.options.extra&&(n||i)},_reset:function(){this.clear(),this.options.search&&this.container&&this.container.find("label").parent().show(),this._closeForm()},_closeForm:function(){this._isMobile?this.pane.navigate("",this.options.animations.right):this.popup.close()},_click:function(e){e.preventDefault(),e.stopPropagation(),this.popup||this.pane||this._init(),this._isMobile?this.pane.navigate(this.view,this.options.animations.left):this.popup.toggle()},_open:function(){var t;e(".k-filter-menu").not(this.form).each((function(){(t=e(this).data(o))&&t.close()}))},_activate:function(){this.form.find(":kendoFocusable:first").focus(),this.trigger(s,{field:this.field,container:this.form})},_keydown:function(e){e.keyCode==n.keys.ESC&&this.popup.close()},events:[l,"change",s],options:{name:"FilterMenu",extra:!0,appendToElement:!1,type:"string",operators:{string:{eq:p,neq:h,startswith:"Starts with",contains:"Contains",doesnotcontain:"Does not contain",endswith:"Ends with",isnull:"Is null",isnotnull:"Is not null",isempty:"Is empty",isnotempty:"Is not empty",isnullorempty:"Has no value",isnotnullorempty:"Has value"},number:{eq:p,neq:h,gte:"Is greater than or equal to",gt:"Is greater than",lte:"Is less than or equal to",lt:"Is less than",isnull:"Is null",isnotnull:"Is not null"},date:{eq:p,neq:h,gte:"Is after or equal to",gt:"Is after",lte:"Is before or equal to",lt:"Is before",isnull:"Is null",isnotnull:"Is not null"},enums:{eq:p,neq:h,isnull:"Is null",isnotnull:"Is not null"}},messages:{info:"Show items with value that:",title:"Show items with value that:",isTrue:"is true",isFalse:"is false",filter:"Filter",clear:"Clear",and:"And",or:"Or",selectValue:"-Select value-",operator:"Operator",value:"Value",additionalValue:"Additional value",additionalOperator:"Additional operator",logic:"Filters logic",cancel:"Cancel",done:"Done",into:"in"},animations:{left:"slide",right:"slide:right"},componentType:"classic",cycleForm:!0}}),I=".kendoFilterMultiCheck";function E(t,n){t.filters&&(t.filters=e.grep(t.filters,(function(e){return E(e,n),e.filters?e.filters.length:e.field==n&&"eq"==e.operator})))}function D(n){return"and"==n.logic&&n.filters.length>1?[]:n.filters?e.map(n.filters,(function(e){return D(e)})):n.value!==t?[n.value]:[]}function M(e,i){for(var a=n.getter(i,!0),r=[],o=0,l={};o<e.length;){var s=e[o++],d=a(s);d===t||l.hasOwnProperty(d)||(r.push(s),l[d]=!0)}return r}function R(e,t){return function(n){return M(e(n),t)}}var A=n.data.DataSource,L='<div data-#=ns#role="view" class="k-grid-filter-menu"><div data-#=ns#role="header" class="k-header"><a href="\\#" class="k-header-cancel k-link" title="#=messages.cancel#" aria-label="#=messages.cancel#"><span class="k-icon k-i-arrow-chevron-left"></span></a>#=messages.filter# #=messages.into# #=title#<a href="\\#" class="k-header-done k-link" title="#=messages.done#" aria-label="#=messages.done#"><span class="k-icon k-i-check"></span></a></div><form class="k-filter-menu"><ul class="k-reset">#if(search){#<li class="k-textbox k-space-right"><input class="k-input" placeholder="#=messages.search#" title="#=messages.search#" autocomplete="'+r+'"  /><span class="k-icon k-i-zoom"></span></li>#}#<li class="k-filter-tools"><span style="#=checkAll ? "" : "visibility: hidden;" #" class="k-label k-select-all" title="#=messages.checkAll#" aria-label="#=messages.checkAll#">#=messages.checkAll#</span><span class="k-label k-clear-all" title="#=messages.clearAll#" aria-label="#=messages.clearAll#">#=messages.clearAll#</span></li>#if(messages.selectedItemsFormat){#<li><div class="k-filter-selected-items"></div></li>#}#<li><ul class="k-multicheck-wrap k-listgroup k-listgroup-flush"></ul></li></ul></form></div>',F=k.extend({init:function(t,i){k.fn.init.call(this,t,i),i=this.options,this.element=e(t);var r=this.field=this.options.field||this.element.attr(n.attr("field")),o=i.checkSource;this._foreignKeyValues()?(this.checkSource=A.create(i.values),this.checkSource.fetch()):i.forceUnique?(delete(o=e.extend(!0,{},i.dataSource.options)).pageSize,this.checkSource=A.create(o),this.checkSource.reader.data=R(this.checkSource.reader.data,this.field)):this.checkSource=A.create(o),this.dataSource=i.dataSource,this.model=this.dataSource.reader.model,this._parse=function(e){return e+""},this.model&&this.model.fields&&(r=this.model.fields[this.field])&&("number"==r.type?this._parse=function(e){return"string"==typeof e&&("null"===e.toLowerCase()||this._foreignKeyValues()&&""===e)?null:parseFloat(e)}:r.parse&&(this._parse=a(r.parse,r)),this.type=r.type||"string"),i.appendToElement?this._init():this._createLink(),this._refreshHandler=a(this.refresh,this),this.dataSource.bind(c,this._refreshHandler)},_createLink:function(){var e=this.element,t=e.addClass("k-with-icon k-filterable").find(".k-grid-filter");t[0]||(t=e.prepend('<a class="k-grid-filter" href="#" title="'+this.options.messages.filter+'" aria-label="'+this.options.messages.filter+'"><span class="k-icon k-i-filter"></span></a>').find(".k-grid-filter")),this._link=t.attr("tabindex",-1).on("click"+u,a(this._click,this))},_init:function(){var e=this,t=this.options.forceUnique,n=this.options;this.pane=n.pane,this.pane&&(this._isMobile=!0),this._createForm(),this._foreignKeyValues()?this.refresh():t&&!this.checkSource.options.serverPaging&&this.dataSource.data().length?(this.checkSource.data(M(this.dataSource.data(),this.field)),this.refresh()):(this._attachProgress(),this.checkSource.fetch((function(){e.refresh.call(e)}))),this.options.forceUnique||(this.checkChangeHandler=function(){e.container.empty(),e.refresh()},this.checkSource.bind(c,this.checkChangeHandler)),this.form.on("keydown"+I,a(this._keydown,this)).on("submit"+I,a(this._filter,this)).on("reset"+I,a(this._reset,this)),this.trigger(l,{field:this.field,container:this.form})},_attachProgress:function(){var e=this;this._progressHandler=function(){i.progress(e.container,!0)},this._progressHideHandler=function(){i.progress(e.container,!1)},this.checkSource.bind("progress",this._progressHandler).bind("change",this._progressHideHandler)},_input:function(){var e=this;e._clearTypingTimeout(),e._typingTimeout=setTimeout((function(){e.search()}),100)},_clearSearch:function(){var e=this;e.searchTextBox.val(""),e.search()},_clearTypingTimeout:function(){this._typingTimeout&&(clearTimeout(this._typingTimeout),this._typingTimeout=null)},search:function(){var e=this.options.ignoreCase,t=this.searchTextBox[0].value,n=this.container.find("label");e&&(t=t.toLowerCase());var i=0;for(this.options.checkAll&&n.length&&(this._isMobile?this.view.element.find(".k-select-all")[0].style.visibility=t?"hidden":"":(n[0].parentNode.style.display=t?"none":"",i++));i<n.length;){var a=n[i],r=a.textContent||a.innerText;e&&(r=r.toLowerCase()),a.parentNode.style.display=r.indexOf(t)>=0?"":"none",i++}},_activate:function(){this.form.find(":kendoFocusable:first").focus(),this.trigger(s,{field:this.field,container:this.form})},_createForm:function(){var t=this.options,i="",r=this;if(this._isMobile||(i+="<div class='k-filter-menu-container'>",t.search&&(i+="<span class='k-searchbox'><span class='k-input-prefix'><span class='k-icon k-i-search'></span></span><input class='k-input' type='text' placeholder='"+t.messages.search+"' /><span class='k-input-suffix'><button type='button' class='k-button k-icon-button k-button-clear'><span class='k-icon k-i-close'></span></button></span></span>"),i+="<ul class='k-reset k-multicheck-wrap'></ul>",t.messages.selectedItemsFormat&&(i+="<div class='k-filter-selected-items'>"+n.format(t.messages.selectedItemsFormat,0)+"</div>"),i+="<div class='k-action-buttons'>",i+="<button type='submit' class='k-button k-primary'>"+t.messages.filter+"</button>",i+="<button type='reset' class='k-button'>"+t.messages.clear+"</button>",i+="</div>",i+="</div>",this.form=e('<form class="k-filter-menu"/>').html(i),this.container=this.form.find(".k-multicheck-wrap")),this._isMobile){r.form=e("<div />").html(n.template(L)({field:r.field,title:t.title||r.field,ns:n.ns,messages:t.messages,search:t.search,checkAll:t.checkAll})),r.view=r.pane.append(r.form.html()),r.form=r.view.element.find("form");var l=this.view.element;this.container=l.find(".k-multicheck-wrap"),l.on("click",".k-header-done",(function(e){r.form.submit(),e.preventDefault()})).on("click",".k-header-cancel",(function(e){r._closeForm(),e.preventDefault()})).on("click",".k-clear-all",(function(e){r._mobileCheckAll(!1),e.preventDefault()})).on("click",".k-select-all",(function(e){r._mobileCheckAll(!0),e.preventDefault()})),r.view.bind("showStart",(function(){r.refresh()}))}else t.appendToElement?(this.popup=this.element.closest(".k-popup").data(o),this.element.append(this.form)):r.popup=r.form.kendoPopup({anchor:r._link,copyAnchorStyles:!1,open:a(r._open,r),activate:a(r._activate,r),close:function(){r.options.closeCallback&&r.options.closeCallback(r.element)}}).data(o);t.search&&(this.searchTextBox=this.form.find(".k-textbox > input, .k-searchbox > input"),this.searchTextBox.on("input"+I,a(this._input,this)),this.clearSearchButton=this.form.find(".k-searchbox button"),this.clearSearchButton.on("click"+I,a(this._clearSearch,this)))},createCheckAllItem:function(){var t=this.options,i=n.template(t.itemTemplate({field:"all",mobile:this._isMobile})),r=e(i({all:t.messages.checkAll}));this.container.prepend(r),r.addClass("k-check-all-wrap"),this.checkBoxAll=r.find(":checkbox").eq(0).addClass("k-check-all"),this.checkAllHandler=a(this.checkAll,this),this.checkBoxAll.on(c+I,this.checkAllHandler)},updateCheckAllState:function(){if(this.options.messages.selectedItemsFormat&&this.form.find(".k-filter-selected-items").text(n.format(this.options.messages.selectedItemsFormat,this.container.find(":checked:not(.k-check-all)").length)),this.checkBoxAll){var e=this.container.find(":checkbox:not(.k-check-all)").length==this.container.find(":checked:not(.k-check-all)").length;this.checkBoxAll.prop("checked",e)}},createIsNullItem:function(){var t=this.options,i=n.template(t.itemTemplate({field:"isNull",mobile:this._isMobile,valueField:"value"})),a=e(i({isNull:t.messages.isNull,value:null}));this.container.append(a)},refresh:function(e){var t=this.options.forceUnique,n=this.dataSource,i=this.getFilterArray();this._link&&this._link.toggleClass("k-state-active",0!==i.length),this.form&&(e&&t&&e.sender===n&&!n.options.serverPaging&&("itemchange"==e.action||"add"==e.action||"remove"==e.action||n.options.autoSync&&"sync"===e.action)&&!this._foreignKeyValues()&&(this.checkSource.data(M(this.dataSource.data(),this.field)),this.container.empty()),this.container.is(":empty")&&this.createCheckBoxes(),this.checkValues(i),this.trigger(d))},getFilterArray:function(){var t=e.extend(!0,{},{filters:[],logic:"and"},this.dataSource.filter());return E(t,this.field),D(t)},createCheckBoxes:function(){var e,t=this.options,i={field:this.field,format:t.format,mobile:this._isMobile,type:this.type},r=P.bind(this);this.options.forceUnique?this._foreignKeyValues()?(e=this.checkSource.data(),i.valueField="value",i.field="text"):e=this.checkSource._isServerGrouped()?M(this.checkSource._flatData(this.checkSource.data()),this.field):this.checkSource.data():e=this.checkSource.view(),"boolean"===this.type&&(this.createIsNullItem(),e=e.filter(r));var o=n.template(t.itemTemplate(i)),l=n.render(o,e);this.container.on(c+I,":checkbox",a(this.updateCheckAllState,this)),this.container.prepend(l),t.checkAll&&!this._isMobile&&this.createCheckAllItem()},checkAll:function(){var e=this.checkBoxAll.is(":checked");this.container.find(":checkbox").prop("checked",e)},checkValues:function(t){var n=this;e(e.grep(this.container.find(":checkbox").prop("checked",!1),(function(i){var a=!1;if(!e(i).is(".k-check-all"))for(var r=n._parse(e(i).val()),o=0;o<t.length;o++)if(a="date"==n.type?t[o]&&r?t[o].getTime()==r.getTime():null===t[o]&&null===r:t[o]==r)return a}))).prop("checked",!0),this.updateCheckAllState()},_mobileCheckAll:function(t){this.container.find(":checkbox").each((function(n,i){var a=e(i);a.prop("checked",t),a.trigger("change")}))},_filter:function(t){t.preventDefault(),t.stopPropagation();var n={logic:"or"},i=this;n.filters=e.map(this.form.find(":checkbox:checked:not(.k-check-all)"),(function(t){return{value:e(t).val(),operator:"eq",field:i.field}})),this.trigger("change",{filter:n,field:i.field})||((n=this._merge(n)).filters.length?this.dataSource.filter(n):i._removeFilter(i.dataSource.filter()||{filters:[]}),this._closeForm())},_stripFilters:function(t){return e.grep(t,(function(e){return null!=e.value}))},_foreignKeyValues:function(){var e=this.options;return e.values&&!e.checkSource},destroy:function(){var e=this;k.fn.destroy.call(e),e.form&&(n.unbind(e.form),n.destroy(e.form),e.form.unbind(I),e.popup&&(e.popup.destroy(),e.popup=null),e.form=null,e.container&&(e.container.unbind(I),e.container=null),e.checkBoxAll&&e.checkBoxAll.unbind(I)),e.view&&(e.view.purge(),e.view=null),e._link&&e._link.unbind(u),e._refreshHandler&&(e.dataSource.unbind(c,e._refreshHandler),e.dataSource=null),e.checkChangeHandler&&e.checkSource.unbind(c,e.checkChangeHandler),e._progressHandler&&e.checkSource.unbind("progress",e._progressHandler),e._progressHideHandler&&e.checkSource.unbind("change",e._progressHideHandler),this._clearTypingTimeout(),this.searchTextBox&&(this.searchTextBox.unbind(I),this.searchTextBox=null),this.clearSearchButton&&(this.clearSearchButton.unbind(I),this.clearSearchButton=null),e.element=e.checkSource=e.container=e.checkBoxAll=e._link=e._refreshHandler=e.checkAllHandler=null},options:{name:"FilterMultiCheck",itemTemplate:function(e){var n=e.field,i=e.format,a=e.valueField,r=e.mobile,o="";return a===t&&(a=n),"date"==e.type&&(o=":yyyy-MM-ddTHH:mm:sszzz"),r?"<li class='k-item k-listgroup-item'><label class='k-label k-listgroup-form-row k-checkbox-label'><span class='k-listgroup-form-field-label k-item-title '>#:kendo.format('"+(i||"{0}")+"', "+n+")#</span><span class=\"k-listgroup-form-field-wrapper\"><input type='checkbox' class='k-checkbox' value='#:kendo.format('{0"+o+"}',"+a+")#'/></span></label></li>":"<li class='k-item'><label class='k-label k-checkbox-label'><input type='checkbox' class='k-checkbox' value='#:kendo.format('{0"+o+"}',"+a+")#'/><span>#:kendo.format('"+(i||"{0}")+"', "+n+")#</span></label></li>"},checkAll:!0,search:!1,ignoreCase:!0,appendToElement:!1,messages:{checkAll:"Select All",isNull:"is empty",clearAll:"Clear All",clear:"Clear",filter:"Filter",search:"Search",cancel:"Cancel",selectedItemsFormat:"{0} items selected",done:"Done",into:"in"},forceUnique:!0,animations:{left:"slide",right:"slide:right"}},events:[l,d,"change",s]});function P(e){return null!==e[this.field]}e.extend(F.fn,{_click:H.fn._click,_keydown:H.fn._keydown,_reset:H.fn._reset,_closeForm:H.fn._closeForm,_removeFilter:H.fn._removeFilter,clear:H.fn.clear,_merge:H.fn._merge}),i.plugin(H),i.plugin(F)}(window.kendo.jQuery),window.kendo})?i.apply(t,a):i)||(e.exports=r)},18381:function(e,t,n){var i,a,r;n.amdD,a=[n(55031)],void 0===(r="function"==typeof(i=function(){!function(e){window.kendo.util=window.kendo.util||{};var t=kendo.Class.extend({init:function(e){this._size=e,this._length=0,this._map={}},put:function(e,t){var n=this._map,i={key:e,value:t};n[e]=i,this._head?(this._tail.newer=i,i.older=this._tail,this._tail=i):this._head=this._tail=i,this._length>=this._size?(n[this._head.key]=null,this._head=this._head.newer,this._head.older=null):this._length++},get:function(e){var t=this._map[e];if(t)return t===this._head&&t!==this._tail&&(this._head=t.newer,this._head.older=null),t!==this._tail&&(t.older&&(t.older.newer=t.newer,t.newer.older=t.older),t.older=this._tail,t.newer=null,this._tail.newer=t,this._tail=t),t.value}}),n=/\r?\n|\r|\t/g,i=" ";function a(e){return String(e).replace(n,i)}function r(e){var t=[];for(var n in e)t.push(n+e[n]);return t.sort().join("")}function o(e){for(var t=2166136261,n=0;n<e.length;++n)t+=(t<<1)+(t<<4)+(t<<7)+(t<<8)+(t<<24),t^=e.charCodeAt(n);return t>>>0}function l(){return{width:0,height:0,baseline:0}}var s,d={baselineMarkerSize:1};"undefined"!=typeof document&&((s=document.createElement("div")).style.cssText="position: absolute !important; top: -4000px !important; width: auto !important; height: auto !important;padding: 0 !important; margin: 0 !important; border: 0 !important;line-height: normal !important; visibility: hidden !important; white-space: pre!important;");var c=kendo.Class.extend({init:function(n){this._cache=new t(1e3),this.options=e.extend({},d,n)},measure:function(e,t,n){if(void 0===n&&(n={}),null==e)return l();var i=o(e+r(t)),d=this._cache.get(i);if(d)return d;var c=l(),u=n.box||s,p=this._baselineMarker().cloneNode(!1);for(var h in t){var f=t[h];void 0!==f&&(u.style[h]=f)}var g=!1!==n.normalizeText?a(e):String(e);return u.textContent=g,u.appendChild(p),document.body.appendChild(u),g.length&&(c.width=u.offsetWidth-this.options.baselineMarkerSize,c.height=u.offsetHeight,c.baseline=p.offsetTop+this.options.baselineMarkerSize),c.width>0&&c.height>0&&this._cache.put(i,c),u.parentNode.removeChild(u),c},_baselineMarker:function(){var e=document.createElement("div");return e.style.cssText="display: inline-block; vertical-align: baseline;width: "+this.options.baselineMarkerSize+"px; height: "+this.options.baselineMarkerSize+"px;overflow: hidden;",e}});function u(e,t,n){return c.current.measure(e,t,n)}c.current=new c,kendo.deepExtend(kendo.util,{LRUCache:t,TextMetrics:c,measureText:u,objectKey:r,hashKey:o,normalizeText:a})}(window.kendo.jQuery)})?i.apply(t,a):i)||(e.exports=r),n.amdD,a=[n(82525),n(99761),n(3269),n(36723),n(3811),n(12156),n(67445),n(10924),n(76645),n(88045),n(1083),n(99057),n(35561),n(68998),n(56373),n(41621),n(83957),n(21683),n(56373),n(94179)],void 0===(r="function"==typeof(i=function(){return function(e,t){var n,i=window.kendo,a=i.ui,r=i.data.DataSource,o=i.data.ObservableObject,l=i.support.tbodyInnerHtml,s=i._activeElement,d=a.Widget,c=i._outerWidth,u=i._outerHeight,p=i.keys,h=e.isPlainObject,f=e.extend,g=e.map,m=e.grep,k=e.isArray,b=e.inArray,v=Array.prototype.push,_=e.proxy,w=i.isFunction,C=e.isEmptyObject,y=e.contains,S=Math,x=".",T="progress",H="error",I="k-hierarchy-cell",E=":not(.k-group-cell):not(["+i.attr("virtual")+"]):not(.k-hierarchy-cell:not(:has(.k-icon.k-i-collapse,.k-icon.k-i-expand))):visible",D="tbody>tr:not(.k-grouping-row):not(.k-detail-row):not(.k-group-footer) > td:not(.k-group-cell):not(.k-hierarchy-cell)",M="tr:not(.k-footer-template):visible",R=":not(.k-group-cell):not(.k-detail-cell):not(.k-hierarchy-cell):visible",A="tr:not(.k-grouping-row):not(.k-detail-row):not(.k-footer-template):not(.k-group-footer):visible",L="col:not(.k-group-col, .k-hierarchy-col)",F=A+":first",P=A+":last",z=M+":first>"+R+":first",q="th.k-header:not(.k-group-cell):not(.k-hierarchy-cell)",B=".k-grid.k-widget",O=".kendoGrid",V="k-grid-content-locked",W="k-group-cell",N="edit",G="beforeEdit",U="save",Z="remove",j="detailInit",K="filterMenuInit",$="columnMenuInit",Q="filterMenuOpen",Y="columnMenuOpen",X="cellClose",J="change",ee="columnHide",te="columnShow",ne="saveChanges",ie="dataBound",ae="detailExpand",re="detailCollapse",oe="itemchange",le="page",se="paging",de="scroll",ce="sync",ue="loadStart",pe="loadEnd",he="k-state-focused",fe=":kendoFocusable",ge="k-state-selected",me="k-checkbox",ke="input[data-role='checkbox']."+me,be="k-grid-norecords",ve="k-link",_e="k-icon",we="k-sort-order",Ce="k-sorted",ye="k-header-column-menu",Se="k-grid-filter",xe="k-grid-content-sticky",Te="k-grid-header-sticky",He="k-grid-footer-sticky",Ie="k-grid-no-left-border",Ee="resize",De="columnResize",Me="columnReorder",Re="columnLock",Ae="columnUnlock",Le="columnStick",Fe="columnUnstick",Pe="navigate",ze="click",qe="mousedown",Be="height",Oe="tabIndex",Ve="function",We="string",Ne="bottom",Ge="container-for",Ue="field",Ze="input",je="incell",Ke="inline",$e="uid",Qe=1,Ye="colSpan",Xe="overflow",Je="hidden",et="sort",tt="group-sort",nt="Are you sure you want to delete this record?",it="No records available.",at="Delete",rt="Cancel",ot="Collapse",lt="Expand",st="aria-label",dt=/(\}|\#)/gi,ct=/#/gi,ut="[\\x20\\t\\r\\n\\f]",pt=new RegExp("(\\s*left\\s*:\\s*\\d*px;?)*","ig"),ht=new RegExp("(\\s*right\\s*:\\s*\\d*px;?)*","ig"),ft=new RegExp("(^|"+ut+")(k-group-cell|k-hierarchy-cell)("+ut+"|$)"),gt=new RegExp("(^|"+ut+")(k-filter-row)("+ut+"|$)"),mt='# if (iconClass) {#<a role="button" class="k-button k-button-icontext #=className#" #=attr# href="\\#"><span class="#=iconClass#"></span>#=text#</a># } else { #<a role="button" class="k-button k-button-icontext #=className#" #=attr# href="\\#">#=text#</a># } #',kt='<input class="'+me+'" data-role="checkbox" aria-label="Select row" aria-checked="false" type="checkbox">',bt='<input class="'+me+'" data-role="checkbox" aria-label="Select all rows" aria-checked="false" type="checkbox">',vt=!1,_t=i.support.browser,wt=_t.msie&&11===_t.version,Ct=/Mac OS/.test(navigator.userAgent),yt={content:"k-content",widget:"k-widget",scrollContainer:"k-scroll-container"};a.Pager&&(n=a.Pager.extend({init:function(e,t){a.Pager.fn.init.call(this,e,f(!0,{},t)),this.dataSource.options.useRanges=!0,this.dataSource._omitPrefetch=!0},options:{name:"GroupsPager"},totalPages:function(){var e=this;return Math.ceil((e._collapsedTotal()||0)/(e.pageSize()||1))},_collapsedTotal:function(){var e=this.dataSource;return e&&e.groupsTotal(!0)||0}}));var St=d.extend({init:function(e,t){var n=this;d.fn.init.call(n,e,t),n._refreshHandler=_(n.refresh,n),n.setDataSource(t.dataSource),n.wrap()},setDataSource:function(e){var t=this;t.dataSource&&t.dataSource.unbind(J,t._refreshHandler),t.dataSource=e,t.dataSource.bind(J,t._refreshHandler),t.dataSource.options.useRanges=!0},options:{name:"VirtualScrollable",itemHeight:e.noop,prefetch:!0,maxScrollHeight:25e4},events:[se,le,de,ue,pe],destroy:function(){var e=this;d.fn.destroy.call(e),e.dataSource.unbind(J,e._refreshHandler),e.wrapper.add(e.verticalScrollbar).off(O),clearTimeout(e._timeout),e._scrollingTimeout&&clearTimeout(e._scrollingTimeout),e.drag&&(e.drag.destroy(),e.drag=null),e.wrapper=e.element=e.verticalScrollbar=null,e._refreshHandler=null},wrap:function(){var t,n=this,a=i.support.scrollbar()+1,r=n.element;r.css({width:"auto",overflow:"hidden"}).css(vt?"padding-left":"padding-right",a),n.content=r.children().first(),t=n.wrapper=n.content.wrap('<div class="k-virtual-scrollable-wrap"/>').parent().bind("DOMMouseScroll"+O+" mousewheel"+O,_(n._wheelScroll,n)),n._wrapper(),(i.support.kineticScrollNeeded||i.support.touch)&&(n.wrapper.css("touch-action","none"),n.drag=new i.UserEvents(n.wrapper,{global:!0,allowSelection:!0,start:function(e){e.sender.capture()},move:function(e){n.verticalScrollbar.scrollTop(n.verticalScrollbar.scrollTop()-e.y.delta),i.scrollLeft(t,i.scrollLeft(t)-e.x.delta),e.preventDefault()}})),n.verticalScrollbar=e('<div class="k-scrollbar k-scrollbar-vertical" />').css({width:a}).appendTo(r).bind("scroll"+O,_(n._scroll,n))},_wrapper:function(){var e=this;wt&&(e.wrapper.css({"overflow-y":de}),e.element.css(vt?"padding-left":"padding-right",0))},_wheelScroll:function(e){if(!e.ctrlKey){var t=this.verticalScrollbar,n=t.scrollTop(),a=i.wheelDeltaY(e);!a||a>0&&0===n||a<0&&n+t[0].clientHeight==t[0].scrollHeight||(e.preventDefault(),this.verticalScrollbar.scrollTop(n+-a))}},_scroll:function(e){var t=this,n=!t.options.prefetch,i=e.currentTarget.scrollTop,a=t.dataSource,r=t.itemHeight,o=a.skip()||0,l=t._rangeStart||o,s=t.element.innerHeight(),d=!!(t._scrollbarTop&&t._scrollbarTop>i),c=S.max(S.floor(i/r),0),u=d?S.ceil(s/r):S.floor(s/r),p=S.max(c+u,0);t._preventScroll?t._preventScroll=!1:(t._prevScrollTop=t._scrollTop,t._scrollTop=i-l*r,t._scrollbarTop=i,t._scrolling=n,t._fetch(c,p,d)||(t.wrapper[0].scrollTop=t._scrollTop),t.trigger(de),n&&(t._scrollingTimeout&&clearTimeout(t._scrollingTimeout),t._scrollingTimeout=setTimeout((function(){t._scrolling=!1,t._page(t._rangeStart,t.dataSource.take())}),100)))},scrollToTop:function(){this._scrollTo(0)},scrollToBottom:function(){var e=this.verticalScrollbar;this._scrollTo(e[0].scrollHeight-e.height())},_scrollWrapperToTop:function(){this.wrapper.scrollTop(0)},_scrollWrapperToBottom:function(){this.wrapper.scrollTop(this.wrapper[0].scrollHeight)},_scrollWrapperOnColumnResize:function(){var e=this,t=this.wrapper,n=t.scrollTop();t[0].scrollWidth>t[0].clientWidth?(!e._wrapperScrolled&&n||e._isScrolledToBottom())&&(t.scrollTop(n+i.support.scrollbar()),e._scrollTop=t.scrollTop(),e._wrapperScrolled=!0):e._wrapperScrolled&&(e._isWrapperScrolledToBottom()||(t.scrollTop(n-i.support.scrollbar()),e._scrollTop=t.scrollTop()),e._wrapperScrolled=!1)},_scrollTo:function(e){var t=this,n=t.verticalScrollbar;n.scrollTop()!==e&&(t._preventScroll=!0),t.wrapper.scrollTop(e),t._scrollTop=t.wrapper.scrollTop(),n.scrollTop(e),t._scrollbarTop=n.scrollTop()},_isScrolledToTop:function(){return 0===this.verticalScrollbar.scrollTop()},_isScrolledToBottom:function(){var e=this.verticalScrollbar,t=e.scrollTop();return t>0&&t>=parseInt(e[0].scrollHeight-e.height(),10)},_isWrapperScrolledToBottom:function(){var e=this.wrapper;return e.scrollTop()>=parseInt(e[0].scrollHeight-e.height(),10)},itemIndex:function(e){return(this._rangeStart||this.dataSource.skip()||0)+e},position:function(e){var t,n=this._rangeStart||this.dataSource.skip()||0,i=this.dataSource.pageSize();return(t=e>n?e-n:n-e-1)>i?i:t},scrollIntoView:function(e){var t=this.wrapper[0],n=t.clientHeight,i=this._isScrolledToBottom()?t.scrollTop:this._scrollTop||t.scrollTop,a=e[0].offsetTop,r=e[0].offsetHeight;i>a?this.verticalScrollbar[0].scrollTop-=n/2:a+r>=i+n&&(this.verticalScrollbar[0].scrollTop+=n/2)},_fetch:function(t,n,i){var a=this,r=a.dataSource,o=a.itemHeight,l=r.take(),s=a._rangeStart||r.skip()||0,d=S.floor(t/l)*l,c=!1,u=.33,p=a.verticalScrollbar,h=_t.webkit?1:0,f=r._isGroupPaged()?r.groupsTotal(!0):r.total();return t<s?(c=!0,s=S.max(0,n-l),a._scrollTop=p.scrollTop()-s*o,a._page(s,l)):n>=s+l&&!i?(c=!0,s=S.min(t,f-l),p.scrollTop()>=p[0].scrollHeight-p[0].offsetHeight-h?a._scrollTop=a.wrapper[0].scrollHeight-a.wrapper[0].offsetHeight:a.dataSource._isGroupPaged()&&t>=f-l?a._scrollTop=a.wrapper[0].scrollHeight-a.wrapper[0].offsetHeight-(a._scrollTop-a._prevScrollTop):a._scrollTop=o,a._page(s,l)):!a._fetching&&a.options.prefetch&&(t<d+l-l*u&&t>l&&r.prefetch(d-l,l,e.noop),n>d+l*u&&r.prefetch(d+l,l,e.noop)),c},fetching:function(){return this._fetching},_page:function(t,n,i){var a=this,r=!a.options.prefetch,o=a.dataSource,l=o._isGroupPaged();i=w(i)?i:e.noop,a.trigger(se,{skip:t,take:n})||(clearTimeout(a._timeout),a._fetching=!0,a._rangeStart=t,l&&o._groupRangeExists(t,t+n)||!l&&o.inRange(t,n)?(a.trigger(ue),o.range(t,n,(function(){a.trigger(pe),i(),a.trigger(le)}),"page")):(r||a.trigger(ue),a._timeout=setTimeout((function(){a._scrolling||(r&&a.trigger(ue),o.range(t,n,(function(){a.trigger(pe),i(),a.trigger(le)})))}),100)))},repaintScrollbar:function(e){var t,n,a,r=this,o="",l=r.options.maxScrollHeight,s=r.dataSource,d=i.support.kineticScrollNeeded?0:i.support.scrollbar(),c=r.wrapper[0],u=r._isScrolledToBottom();a=r.itemHeight=r.options.itemHeight()||0;var p=c.scrollWidth>c.offsetWidth?d:0;for(t=(s._isGroupPaged()?s.groupsTotal(!0):s.total())*a+p,n=0;n<S.floor(t/l);n++)o+='<div style="width:1px;height:'+l+'px"></div>';t%l&&(o+='<div style="width:1px;height:'+t%l+'px"></div>'),r.verticalScrollbar.html(o),!u||r._isScrolledToBottom()||r.dataSource._isGroupPaged()||r.scrollToBottom(),void 0!==r._scrollTop&&e&&(c.scrollTop=r._scrollTop,r._scrollWrapperOnColumnResize())},refresh:function(e){var t=this,n=t.dataSource,i=t._rangeStart,a=(e||{}).action,r=t._isScrolledToBottom()||!a||a!==oe&&a!==Z&&a!==ce;t.trigger(pe),clearTimeout(t._timeout),t.repaintScrollbar(r),t.drag&&t.drag.cancel(),void 0===i||t._fetching||((!a||a!==ce&&a!==oe&&"expandGroup"!==a)&&(t._rangeStart=n.skip()),1!==n.page()||a&&(a===ce||a===oe||"expandGroup"===a||"collapseGroup"===a)||(t.verticalScrollbar[0].scrollTop=0)),t._fetching=!1}});function xt(e,t){return"["+i.attr(e)+"="+t+"]"}function Tt(e){return new Array(e+1).join('<td class="k-group-cell">&nbsp;</td>')}function Ht(e){var t,n=" ";if(e){if(typeof e===We)return e;for(t in e)""!==e[t]&&(n+=t+'="'+e[t]+'"')}return n}var It={create:{text:"Add new record",className:"k-grid-add",iconClass:"k-icon k-i-plus"},cancel:{text:"Cancel changes",className:"k-grid-cancel-changes",iconClass:"k-icon k-i-cancel"},save:{text:"Save changes",className:"k-grid-save-changes",iconClass:"k-icon k-i-check"},destroy:{text:"Delete",className:"k-grid-delete",iconClass:"k-icon k-i-close"},edit:{text:"Edit",className:"k-grid-edit",iconClass:"k-icon k-i-edit"},update:{text:"Update",className:"k-primary k-grid-update",iconClass:"k-icon k-i-check"},canceledit:{text:"Cancel",className:"k-grid-cancel",iconClass:"k-icon k-i-cancel"},excel:{text:"Export to Excel",className:"k-grid-excel",iconClass:"k-icon k-i-file-excel"},pdf:{text:"Export to PDF",className:"k-grid-pdf",iconClass:"k-icon k-i-file-pdf"},search:{text:"Search...",className:"k-grid-search"}};function Et(t,n){e("th, th .k-grid-filter, th .k-link",t).add(document.body).css("cursor",n)}function Dt(t,n,i,a,r){var o=n;n=e(),r=r||1;for(var l=0;l<r;l++)n=n.add(t.eq(o+l));"number"==typeof i?n[a?"insertBefore":"insertAfter"](t.eq(i)):n.appendTo(i)}function Mt(t,n,i){return e(t).add(n).find(i)}function Rt(e,t,n){var i,a,r,o;for(i=0,a=(n=k(n)?n:[n]).length;i<a;i++)r=n[i],h(r)&&r.click&&(o=r.name||r.text,t.on(ze+O,"a.k-grid-"+(o||"").replace(/\s/g,""),{commandName:o},_(r.click,e)))}function At(e,t,n,a,r){return g(e,(function(e){var o;(e=typeof e===We?{field:e}:e).parentIds=r,Nt(e)&&!n||(e.attributes=Fn(e.attributes),e.footerAttributes=Fn(e.footerAttributes),e.headerAttributes=Fn(e.headerAttributes),o=!0);var l=i.guid();return a&&!e.locked&&(e.locked=a),e.headerAttributes=f({headers:r},e.headerAttributes),e.headerAttributes.id?l=e.headerAttributes.id:(e.headerAttributes=f({id:l},e.headerAttributes),e.uid=l),e.columns&&(e.columns=At(e.columns,t,o,e.locked,r?r+" "+l:l)),f({encoded:t,hidden:o,locked:a},e)}))}function Lt(e,t){var n=[];return Ft(e,t,n),n[n.length-1]}function Ft(e,t,n){n=n||[];for(var i=0;i<t.length;i++){if(e===t[i])return!0;if(t[i].columns){var a=n.length;if(n.push(t[i]),Ft(e,t[i].columns,n))return!0;n.splice(a,n.length-a)}}return!1}function Pt(e,t){zt(e,t,t)}function zt(e,t,n){var i=n?zn:Fn;e.hidden=!t,e.attributes=i(e.attributes),e.footerAttributes=i(e.footerAttributes),e.headerAttributes=i(e.headerAttributes)}function qt(e,t){Bt(e),zt(e,t,e._hideByMedia?e.matchesMedia:t)}function Bt(e){e.matchesMedia=Ot(e)}function Ot(e){return e&&(Zt(e.media)||!Zt(e.media)&&i.matchesMedia(e.media))}function Vt(){return"none"!==this.style.display}function Wt(t){return"none"!==e(t)[0].style.display}function Nt(e){return Gt([e]).length>0}function Gt(e){return m(e,(function(e){var t=!e.hidden&&!1!==e.matchesMedia;return t&&e.columns&&(t=Gt(e.columns).length>0),t}))}function Ut(e){for(var t,n=[],i=0;i<e.length;i++){if(!Zt((t=e[i]).media)){if(!Zt(t.minScreenWidth))throw new Error("Using 'media' and 'minScreenWidth' options at the same time is not supported.");n.push(t)}t.columns&&(n=n.concat(Ut(t.columns)))}return n}function Zt(e){return void 0===e}function jt(t){return e(t).map((function(){return this.toArray()}))}function Kt(e,t,n){var i=Jt(_n(t)),a=Jt(wn(t)),r=e.rowSpan;e.rowSpan=n?i>a?r-(i-a)||1:r+(a-i):i>a?r+(i-a):r-(a-i)||1}function $t(e,t){for(var n=0;n<e.length;n++)if(e[n].uid==t)return e[n]}function Qt(e,t){for(var n=0;n<e.length;n++)if(e[n].field==t)return e[n]}function Yt(t,n,i,a,r,o,l,s){var d=Jt(t),c=Jt([n]);if(d>c){var u=new Array(l+1).join('<th class="k-group-cell k-header" scope="col">&nbsp;</th>'),p=o.children(":not(.k-filter-row)");e(new Array(d-c+1).join("<tr>"+u+"</tr>")).insertAfter(p.last())}hn(o,d-c),en(i,a,r,o,s)}function Xt(t,n,a){var r;a=a||0;var o=n;n=En(n);for(var l={},s=t.find(">tr:not(.k-filter-row)"),d=function(){var t=e(this);return!t.hasClass("k-group-cell")&&!t.hasClass("k-hierarchy-cell")},c=0,u=n.length;c<u;c++)l[(r=tn(n[c],o)).row]||(l[r.row]=s.eq(r.row).find(".k-header").filter(d)),l[r.row].eq(r.cell).attr(i.attr("index"),a+c);return n.length}function Jt(e){for(var t=1,n=0,i=0;i<e.length;i++)if(e[i].columns){var a=Jt(e[i].columns);a>n&&(n=a)}return t+n}function en(t,n,i,a,r){var o,l=rn(t[0],n),s=i.find(">tr:not(.k-filter-row):eq("+l.row+")>th.k-header"),d=e(),c=l.cell;for(o=0;o<t.length;o++)d=d.add(s.eq(c+o));a.find(">tr:not(.k-filter-row)").eq(l.row)[r](d);var u=[];for(o=0;o<t.length;o++)t[o].columns&&(u=u.concat(t[o].columns));u.length&&en(u,n,i,a,r)}function tn(e,t,n,i){var a,r;for((i=i||{})[n=n||0]=i[n]||0,r=0;r<t.length;r++){if(t[r]==e){a={cell:i[n],row:n};break}if(t[r].columns&&(a=tn(e,t[r].columns,n+1,i)))break;i[n]++}return a}function nn(e,t,n,i){var a,r,o=!!n.locked;do{a=e[t],t+=i?1:-1,r=!!a.locked}while(a&&t>-1&&t<e.length&&a!=n&&!a.columns&&r===o);return a}function an(e,t,n,i,a){if(t.columns)return(t=t.columns)[i?0:t.length-1];var r,o=Lt(t,e);r=o?o.columns:e;var l=b(t,r);0===l&&i?l++:l==r.length-1&&!i||!n.locked&&!t.columns&&!i?l--:(l>0||0===l&&!i)&&l++,t=nn(r,l,n,b(n,r)>l);var s=b(t,a);return(!t.columns||s&&s!==r.length-1)&&t&&t!=n&&t.columns?an(e,t,n,i,a):null}function rn(e,t,n,i){var a,r;for((i=i||{})[n=n||0]=i[n]||0,r=0;r<t.length;r++){if(t[r]==e){a={cell:i[n],row:n};break}if(t[r].columns&&(a=rn(e,t[r].columns,n+1,i)))break;t[r].hidden||i[n]++}return a}function on(e){return sn(_n(e)).concat(sn(wn(e)))}function ln(e,t,n,i){var a=e[n],r=e[i],o=Lt(a,t);return t=o?o.columns:t,b(r,t)}function sn(e){for(var t=[],n=[],i=0;i<e.length;i++)t.push(e[i]),e[i].columns&&(n=n.concat(e[i].columns));return n.length&&(t=t.concat(sn(n))),t}function dn(e){for(var t,n=0,i=0;i<e.length;i++)(t=e[i]).columns?n+=dn(t.columns):t.hidden&&n++;return n}function cn(e){for(var t=0,n=0,i=e.length;n<i;n++)e[n].hidden||(t+=parseInt(e[n].width,10));return t}function un(e){for(var t,n=0,i=0,a=e.length;i<a;i++)(t=e[i].style.width)&&-1==t.indexOf("%")&&(n+=parseInt(t,10));return n}function pn(e,t){for(var n,i=e.find("tr:not(.k-filter-row) th:not(.k-group-cell,.k-hierarchy-cell)"),a=0;a<i.length;a++)(n=i[a].rowSpan)>1&&(i[a].rowSpan=n-t||1)}function hn(e,t){for(var n=e.find("tr:not(.k-filter-row) th:not(.k-group-cell,.k-hierarchy-cell)"),i=0;i<n.length;i++)n[i].rowSpan+=t}function fn(t){for(var n=t.find("tr:not(.k-filter-row)"),i=n.filter((function(){return!e(this).children().length})).remove().length,a=n.find("th:not(.k-group-cell,.k-hierarchy-cell)"),r=0;r<a.length;r++)a[r].rowSpan>1&&(a[r].rowSpan-=i);return n.length-i}function gn(e,t,n,i,a){var r,o,l,s=[];for(r=0,l=e.length;r<l;r++)(o=n[i]||[]).push(t.eq(a+r)),n[i]=o,e[r].columns&&(s=s.concat(e[r].columns));s.length&&gn(s,t,n,i+1,a+e.length)}function mn(e,t,n){e.css({left:t,right:n})}function kn(e,t,n){e[t]=e[t]||{},e[t][n]=e[t][n]||""}function bn(e,t,n,i){kn(e,t,n),""!==e[t][n]?e[t][n]+=" "+i:e[t][n]=i}function vn(e,t,n,i){kn(e,t,n),e[t][n]=e[t][n].replace(i,"")}function _n(e){return m(e,(function(e){return e.locked}))}function wn(e){return m(e,(function(e){return!e.locked}))}function Cn(e){return m(e,(function(e){return e.sticky&&!e.locked}))}function yn(e){return m(e,(function(e){return e.sticky&&!e.locked&&Nt(e)}))}function Sn(e){return m(e,(function(e){return!e.locked&&Nt(e)}))}function xn(e){return m(e,(function(e){return e.locked&&Nt(e)}))}function Tn(e){for(var t=[],n=0;n<e.length;n++)e[n].hidden||(e[n].columns?t=t.concat(Tn(e[n].columns)):t.push(e[n]));return t}function Hn(e){for(var t=[],n=0;n<e.length;n++)e[n].columns&&(t=t.concat(e[n].columns));return t}function In(e){var t=Hn(e);return t=t.filter((function(e){return!e.hidden}))}function En(e){for(var t=[],n=0;n<e.length;n++)e[n].columns?t=t.concat(En(e[n].columns)):t.push(e[n]);return t}function Dn(e){var t=[];e=En(e);for(var n=0;n<e.length;n++)"string"==typeof e[n]?t.push(e[n]):e[n].field&&t.push(e[n].field);return t}function Mn(n){var a=n.find(">tr:not(.k-filter-row)"),r=function(){var t=e(this);return!t.hasClass("k-group-cell")&&!t.hasClass("k-hierarchy-cell")},o=e();a.length>1&&(o=a.find("th").filter(r).filter((function(){return this.rowSpan>1}))),o=o.add(a.last().find("th").filter(r));var l=i.attr("index");return o.sort((function(n,i){n=e(n),i=e(i);var a=n.attr(l),r=i.attr(l);return a===t&&(a=e(n).index()),r===t&&(r=e(i).index()),(a=parseInt(a,10))>(r=parseInt(r,10))?1:a<r?-1:0})),o}function Rn(t){var n=t.closest("table"),i=e().add(t),a=t.closest("tr"),r=n.find("tr:not(.k-filter-row)"),o=r.index(a);if(o>0){for(var l=r.eq(o-1).find("th:not(.k-group-cell,.k-hierarchy-cell)").filter((function(){return!e(this).attr("rowspan")})),s=0,d=a.find("th:not(.k-group-cell,.k-hierarchy-cell)").index(t),c=t.prevAll(":not(.k-group-cell,.k-hierarchy-cell)").filter((function(){return this.colSpan>1})),u=0;u<c.length;u++)s+=c[u].colSpan||1;for(d+=Math.max(s-1,0),s=0,u=0;u<l.length;u++){var p=l.eq(u);if(p.attr("data-colspan")?s+=p[0].getAttribute("data-colspan"):s+=1,d>=u&&d<s){i=Rn(p).add(i);break}}}return i}function An(t){var n=t.closest("thead"),a=e().add(t),r=t.closest("tr"),o=n.find("tr:not(.k-filter-row)"),l=o.index(r)+t[0].rowSpan,s=i.attr("colspan");if(l<=o.length-1){var d,c=r.next(),u=t.prevAll(":not(.k-group-cell,.k-hierarchy-cell)");u=u.filter((function(){return!this.rowSpan||1===this.rowSpan}));var p=0;for(d=0;d<u.length;d++)p+=parseInt(u.eq(d).attr(s),10)||1;var h=c.find("th:not(.k-group-cell,.k-hierarchy-cell)"),f=parseInt(t.attr(s),10)||1;for(d=0;d<f;){c=h.eq(d+p),a=a.add(An(c));var g=parseInt(c.attr(s),10);g>1&&(f-=g-1),d++}}return a}function Ln(t,n,i,a){var r,o=t;return a&&t.empty(),l?t[0].innerHTML=i:((r=document.createElement("div")).innerHTML="<table><tbody>"+i+"</tbody></table>",t=r.firstChild.firstChild,n[0].replaceChild(t,o[0]),t=e(t)),t}function Fn(e){var t=(e=e||{}).style;return t?(t=t.replace(/display:[^;]*/i,"display:none")).match(/display:/i)||(t=t.replace(/(.*)?/i,"display:none;$1")):t="display:none",f({},e,{style:t})}function Pn(e){return-1!==((e=e||{}).style||"").indexOf("display:none")}function zn(e){var t=(e=e||{}).style;return t&&(e.style=t.replace(/(display\s*:\s*none\s*;?)*/gi,"")),e}function qn(t,n,a,r){var o,l=t.find(">colgroup"),s=g(n,(function(e){return(o=e.width)&&0!==parseInt(o,10)?i.format('<col style="width:{0}"/>',typeof o===We?o:o+"px"):"<col />"}));(a||l.find(".k-hierarchy-col").length)&&s.splice(0,0,'<col class="k-hierarchy-col" />'),l.length&&l.remove(),(l=e(new Array(r+1).join('<col class="k-group-col">')+s.join(""))).is("colgroup")||(l=e("<colgroup/>").append(l)),t.prepend(l)}function Bn(e,t){var n,i,a=0,r=e.find("th:not(.k-group-cell)");for(n=0,i=t.length;n<i;n++)t[n].locked&&(r.eq(n).insertBefore(r.eq(a)),r=e.find("th:not(.k-group-cell)"),a++)}function On(e){var t,n,i,a={};for(n=0,i=e.length;n<i;n++)a[(t=e[n]).value]=t.text;return a}function Vn(e,t,n,a){var r=n&&n.length&&h(n[0])&&"value"in n[0]?On(n)[e]:e;return r=null!=r?r:"",t?i.format(t,r):!1===a?r:i.htmlEncode(r)}function Wn(e,t,n){for(var i=0,a=e[i];a;){if((n||"none"!==a.style.display)&&!ft.test(a.className)&&--t<0){a.style.display=n?"":"none";break}a=e[++i]}}function Nn(t,n){for(var i,a,r=0,o=t.length;r<o;r+=1)(a=t.eq(r)).is(".k-grouping-row,.k-detail-row")?(i=a.children(":not(.k-group-cell):first,.k-detail-cell").last()).attr("colspan",parseInt(i.attr("colspan"),10)-1):(a.hasClass("k-grid-edit-row")&&(i=a.children(".k-edit-container")[0])&&((i=e(i)).attr("colspan",parseInt(i.attr("colspan"),10)-1),i.find("col").eq(n).remove(),a=i.find("tr:first")),Wn(a[0].cells,n,!1))}function Gn(e){for(var t,n=[],i=0;i<e.length&&"field"in(t=e[i])&&"value"in t&&"items"in t;i++)n.push(t),t.hasSubgroups&&(n=n.concat(Gn(t.items)));return n}function Un(e){for(var t,n=[],i=0;i<e.length&&"field"in(t=e[i])&&"value"in t&&"items"in t;i++)t.hasSubgroups&&(n=n.concat(Un(t.items))),n.push(t.aggregates);return n}function Zn(t,n){for(var i,a,r,o=0,l=t.length;o<l;o+=1)(a=t.eq(o)).is(".k-grouping-row,.k-detail-row")?(i=a.children(":not(.k-group-cell):first,.k-detail-cell").last()).attr("colspan",parseInt(i.attr("colspan"),10)+1):(a.hasClass("k-grid-edit-row")&&(i=a.children(".k-edit-container")[0])&&((i=e(i)).attr("colspan",parseInt(i.attr("colspan"),10)+1),qn(i.find(">form>table"),Gt(r),!1,0),a=i.find("tr:first")),Wn(a[0].cells,n,!0))}function jn(e,t,n){var i,a,r;for(n=n||1,a=0,r=e.length;a<r;a++)(i=e.eq(a).children().last()).attr("colspan",parseInt(i.attr("colspan"),10)+n),(i=t.eq(a).children().last()).attr("colspan",parseInt(i.attr("colspan"),10)-n)}function Kn(e){var t,n,i=0,a=e.find(">colgroup>col");for(t=0,n=a.length;t<n;t+=1)i+=parseInt(a[t].style.width,10);return i}var $n=i.ui.DataBoundWidget.extend({init:function(t,n,a){var r=this;n=k(n)?{dataSource:n}:n,d.fn.init.call(r,t,n),a&&(r._events=a),vt=i.support.isRtl(t),r._element(),r._aria(),r._columns(e.extend(!0,[],r.options.columns)),r._foreignKeyPromises?e.when.apply(null,r._foreignKeyPromises).then((function(){r._foreignKeyPromises=null,r._continueInit()})):r._continueInit()},_continueInit:function(){var t=this;t._dataSource(),t._stickyColumns(),t._tbody(),t._thead(),t._groupable(),t._toolbar(),t._pageable(),t._setContentHeight(),t._templates(),t._navigatable(),t._selectable(),t._clipboard(),t._details(),t._editable(),t._attachCustomCommandsEvent(),t._adaptiveColumns(),t._minScreenSupport(),t.options.autoBind?t.dataSource.fetch():(t._group=t._groups()>0,t._footer()),t.lockedContent&&(t.wrapper.addClass("k-grid-lockedcolumns"),t._resizeHandler=function(){t.resize()},e(window).on("resize"+O,t._resizeHandler)),i.notify(t)},events:[J,"dataBinding","cancel",ie,ae,re,j,K,Q,$,Y,N,G,U,Z,ne,X,De,Me,te,ee,Re,Ae,Le,Fe,Pe,"page","sort","filter","group","groupExpand","groupCollapse","kendoKeydown"],setDataSource:function(e){var t,n=this,a=n.options.scrollable;n.options.dataSource=e,n._dataSource(),n._pageable(),n._thead(),a&&(a.virtual?(t=n.content.find(">.k-virtual-scrollable-wrap"),i.scrollLeft(t,ri(t,vt))):(t=n.tbody,i.scrollLeft(n.content,ri(t,vt)))),n.options.groupable&&n._groupable(),n.virtualScrollable&&n.virtualScrollable.setDataSource(n.options.dataSource),n.options.navigatable&&n._navigatable(),n.options.selectable&&n._selectable(),n.options.autoBind?n.dataSource.fetch():n._footer()},options:{name:"Grid",columns:[],toolbar:null,autoBind:!0,filterable:!1,scrollable:!0,sortable:!1,selectable:!1,allowCopy:!1,navigatable:!1,pageable:!1,persistSelection:!1,editable:!1,encodeTitles:!1,groupable:!1,rowTemplate:"",altRowTemplate:"",search:!1,noRecords:!1,dataSource:{},height:null,resizable:!1,reorderable:!1,columnMenu:!1,detailTemplate:null,columnResizeHandleWidth:3,mobile:"",loaderType:"loadingPanel",messages:{editable:{cancelDelete:rt,confirmation:nt,confirmDelete:at},commands:{create:It.create.text,cancel:It.cancel.text,save:It.save.text,destroy:It.destroy.text,edit:It.edit.text,update:It.update.text,canceledit:It.canceledit.text,excel:It.excel.text,pdf:It.pdf.text,search:It.search.text},noRecords:it,expandCollapseColumnHeader:"",groupHeader:"Press ctrl + space to group",ungroupHeader:"Press ctrl + space to ungroup"},width:null},destroy:function(){var t,n=this;n._angularItems("cleanup"),n._destroyColumnAttachments(),d.fn.destroy.call(n),this._navigatableTables&&(this._navigatableTables.off(O),this._navigatableTables=null,this._headertables=null),n._resizeHandler&&e(window).off("resize"+O,n._resizeHandler),n.pager&&n.pager.element&&n.pager.destroy(),n.timer&&clearTimeout(n.timer),n._progressTimeOut&&clearTimeout(n._progressTimeOut),n._collapseGroupsTimeOut&&clearTimeout(n._collapseGroupsTimeOut),n._endlessFetchTimeOut&&clearTimeout(n._endlessFetchTimeOut),n.pager=null,n._destroyGroupable(),n.options.reorderable&&n.wrapper.data("kendoReorderable").destroy(),n.selectable&&n.selectable.element&&(n.selectable.destroy(),n.clearArea(),n._selectedIds=null,n.copyHandler&&(n.wrapper.off("keydown",n.copyHandler),n.unbind(n.copyHandler)),n.updateClipBoardState&&(n.unbind(n.updateClipBoardState),n.updateClipBoardState=null),n.clearAreaHandler&&n.wrapper.off("keyup",n.clearAreaHandler)),n.selectable=null,n.resizable&&(n.resizable.destroy(),n._resizeUserEvents&&(n._resizeHandleDocumentClickHandler&&e(document).off("click",n._resizeHandleDocumentClickHandler),n._resizeUserEvents.destroy(),n._resizeUserEvents=null),n.resizable=null),n._destroyVirtualScrollable(),n.editableUserEvents&&(n.editableUserEvents.destroy(),n.editableUserEvents=null),n._lockedContentUserEvents&&(n._lockedContentUserEvents.destroy(),n._lockedContentUserEvents=null),n._destroyEditable(),n.dataSource&&(n.dataSource.unbind(J,n._refreshHandler).unbind(T,n._progressHandler).unbind(H,n._errorHandler).unbind(et,n._clearSortClasses),n._refreshHandler=n._progressHandler=n._errorHandler=n._clearSortClasses=null),t=n.element.add(n.wrapper).add(n.table).add(n.thead).add(n.wrapper.find(">.k-grid-toolbar")),n.content&&(t=t.add(n.content).add(n.content.find(">.k-virtual-scrollable-wrap"))),n.lockedHeader&&n._removeLockedContainers(),n.pane&&n.pane.destroy(),n._isMobile&&(n.wrapper.off("transitionend"+O),n.wrapper.off("contextmenu"+O)),n.minScreenResizeHandler&&e(window).off("resize",n.minScreenResizeHandler),n._detachColumnMediaResizeHandler(),n._draggableInstance&&n._draggableInstance.element&&n._draggableInstance.destroy(),n._draggableInstance=null,t.off(O),i.destroy(n.wrapper),n.rowTemplate=n.altRowTemplate=n.lockedRowTemplate=n.lockedAltRowTemplate=n.detailTemplate=n.footerTemplate=n.groupFooterTemplate=n.lockedGroupFooterTemplate=n.noRecordsTemplate=null,n.scrollables=n.thead=n.tbody=n.element=n.table=n.content=n.footer=n.wrapper=n.lockedTable=n.lockedContent=n.lockedHeader=n.lockedFooter=n._groupableClickHandler=n._groupRows=n._setContentWidthHandler=null},getOptions:function(){this.options.dataSource=null;var n=f(!0,{},this.options);n.columns=i.deepExtend([],this.columns);var a=this.dataSource,r=a.options.data&&a._data;return a.options.data=null,n.dataSource=e.extend(!0,{},a.options),a.options.data=r,n.dataSource.data=r,n.dataSource.page=a.page(),n.dataSource.filter=e.extend(!0,{},a.filter()),n.dataSource.pageSize=a.pageSize(),n.dataSource.sort=a.sort(),n.dataSource.group=a.group(),n.dataSource.aggregate=a.aggregate(),n.dataSource.transport&&(n.dataSource.transport.dataSource=null),n.pageable&&n.pageable.pageSize&&(n.pageable.pageSize=a.pageSize()),n.$angular=t,n},setOptions:function(e){var t=this.getOptions();i.deepExtend(t,e),e.dataSource?e.dataSource.filter&&(t.dataSource.filter=e.dataSource.filter):t.dataSource=this.dataSource;var n=this.wrapper,a=this._events,r=this.element;if(this.destroy(),this.options=null,this._isMobile){var o=n.closest(i.roleSelector("pane")).parent();o.after(n),o.remove(),n.removeClass("k-grid-mobile")}n[0]!==r[0]&&(n.before(r),n.remove()),r.empty(),this.init(r,t,a),this._setEvents(t)},items:function(){return this.lockedContent?this._items(this.tbody).add(this._items(this.lockedTable.children("tbody"))):this._items(this.tbody)},_items:function(t,n){return t.children().filter((function(){var t=e(this);return!((n?t.hasClass("k-detail-row"):t.hasClass("k-grouping-row"))||t.hasClass("k-detail-row")||t.hasClass("k-group-footer"))}))},dataItems:function(){var e=i.ui.DataBoundWidget.fn.dataItems.call(this);if(this.lockedContent){for(var t=e.length,n=new Array(2*t),a=t;--a>=0;)n[a]=n[a+t]=e[a];e=n}return e},_destroyColumnAttachments:function(){var t=this;t.resizeHandle=null,t.thead&&(this.angular("cleanup",(function(){return{elements:t.thead.get()}})),t.thead.add(t.lockedHeader).find("th").each((function(){var t=e(this),n=t.data("kendoFilterMenu"),i=t.data("kendoColumnSorter"),a=t.data("kendoColumnMenu");n&&n.destroy(),i&&i.destroy(),a&&a.destroy()})))},_attachCustomCommandsEvent:function(){var e,t,n,i=this,a=En(i.columns||[]);for(t=0,n=a.length;t<n;t++)(e=a[t].command)&&Rt(i,i.wrapper,e)},_aria:function(){var e=this.element.attr("id")||"aria";e&&(this._cellId=e+"_active_cell")},_element:function(){var t=this,n=t.element;n.is("table")||(n=t.options.scrollable?t.element.find("> .k-grid-content > table"):t.element.children("table")).length||(n=e("<table />").appendTo(t.element)),t.table=n.attr("role",t._hasDetails()?"treegrid":"grid"),t._wrapper()},_createResizeHandle:function(t,n){var a,r,o,l,s,d,c,p=this,h=p.options.columnResizeHandleWidth,f=p.options.scrollable,g=p.resizeHandle,m=3*h/2,k=0;g&&p.lockedContent&&g.data("th")[0]!==n[0]&&(g.off(O).remove(),g=null),g||(g=p.resizeHandle=e('<div class="k-resize-handle"><div class="k-resize-handle-inner"></div></div>'),t.append(g)),s=i.scrollLeft(t),vt&&(_t.mozilla||_t.webkit&&_t.version>=85)&&(s*=-1),l=parseFloat(t.css("borderLeftWidth")),d=n.offset().left+s-parseFloat(n.css("marginLeft"))-(t.offset().left+l),vt?f&&(k=d<=s?m:0,(a=n.closest(".k-grid-header-wrap, .k-grid-header-locked"))[0].scrollWidth,a[0].offsetWidth,o=parseFloat(a.css("marginLeft")),r=_t.msie?2*i.scrollLeft(a)+l-o-k:0,d-=-k+(_t.mozilla?l-o-k:0)+r):d+=n[0].offsetWidth,c=n.offset().top-parseFloat(n.css("marginTop"))-(t.offset().top+parseFloat(t.css("borderTopWidth"))),g.css({top:c,left:d-m,height:u(n),width:3*h-k}).data("th",n).show(),g.off("dblclick"+O).on("dblclick"+O,(function(){p._autoFitLeafColumn(parseInt(n.attr(i.attr("index")),10))}))},_positionColumnResizeHandle:function(){var t=this,n=t.lockedHeader?t.lockedHeader.find("thead:first"):e();t.thead.add(n).on("mousemove"+O,"tr:not(.k-filter-row) > th",(function(n){var a=void 0!==n.buttons?n.buttons:n.which||n.button,r=e(this);r.hasClass("k-group-cell")||r.hasClass("k-hierarchy-cell")||void 0!==a&&0!==a||r[0].hasAttribute(i.attr(Ye))||t._createResizeHandle(r.closest("div"),r)}))},_resizeHandleDocumentClick:function(t){e(t.target).closest(".k-column-active").length||(e(document).off(t),this._resetResizeHandleHeader(),this._hideResizeHandle())},_resetResizeHandleHeader:function(){var t;this.resizeHandle&&(t=e(this.resizeHandle).data("th"))&&(t.find(x+ve).find(x+_e).show(),t.find(x+we).show(),t.find(x+ye).show(),t.find(x+Se).show())},_hideResizeHandle:function(){this.resizeHandle&&(this.resizeHandle.data("th").removeClass("k-column-active"),this.lockedContent&&!this._isMobile?(this.resizeHandle.off(O).remove(),this.resizeHandle=null):this.resizeHandle.hide())},_positionColumnResizeHandleTouch:function(){var t=this,n=t.lockedHeader?t.lockedHeader.find("thead:first"):e();t._resizeUserEvents=new i.UserEvents(n.add(t.thead),{filter:"th:not(.k-group-cell):not(.k-hierarchy-cell)",threshold:10,minHold:500,hold:function(n){var i=e(n.target);n.preventDefault(),t.resizeHandle&&(t.resizeHandle.data("th").removeClass("k-column-active"),t._resetResizeHandleHeader()),i.addClass("k-column-active"),i.find(x+ve).find(x+_e).hide(),i.find(x+we).hide(),i.find(x+ye).hide(),i.find(x+Se).hide(),t._createResizeHandle(i.closest("div"),i),t._resizeHandleDocumentClickHandler||(t._resizeHandleDocumentClickHandler=_(t._resizeHandleDocumentClick,t)),e(document).on("click",t._resizeHandleDocumentClickHandler)}})},resizeColumn:function(t,n){var a,r=this,o=!!t.locked,l=!!t.hidden,s=this.options,d=i.support.mobileOS?0:i.support.scrollbar(),u=b(t,o?xn(Tn(r.columns)):Sn(Tn(r.columns))),p=o?r.lockedTable:r.table,h=r.footer||e(),f=o?r.lockedHeader.find("table"):r.thead.closest("table"),g=t.minResizableWidth||10,m=c(o?p.find("tbody"):r.tbody);if(l)t.width=n>g?n:g;else{if(r.footer&&r.lockedContent&&(h=o?r.footer.children(".k-grid-footer-locked"):r.footer.children(".k-grid-footer-wrap")),a=s.scrollable?f.find("col:not(.k-group-col,.k-hierarchy-col):eq("+u+")").add(p.children("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col):eq("+u+")")).add(h.find("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col):eq("+u+")")):p.find("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col):eq("+u+")"),s.scrollable){var k=!1,v=r.wrapper.width()-d,_=n=n>g?n:g;o&&m-n+_>v&&((_=n+(v-m-2*d))<0&&(_=n),k=!0),_>10&&_>=g&&(a.css("width",_),m&&(_=k?v-2*d:m+(n-t.width),p.add(f).add(h).css("width",_),o||(r._footerWidth=_))),r._scrollVirtualWrapperOnColumnResize()}else n>10&&n>=g&&a.css("width",n);t.width=n,r._applyLockedContainersWidth(),r._syncLockedContentHeight(),r._syncLockedHeaderHeight(),r._updateStickyColumns()}},_resizable:function(){var t,n,r,o,l,s,d,p,h=this,f=h.options,g=this._isMobile,m=i.support.mobileOS?0:i.support.scrollbar();f.resizable&&(t=f.scrollable?h.wrapper.find(".k-grid-header-wrap:first"):h.wrapper,g?h._positionColumnResizeHandleTouch(t):h._positionColumnResizeHandle(t),h.resizable&&h.resizable.destroy(),h.resizable=new a.Resizable(t.add(h.lockedHeader),{handle:(f.scrollable?"":">")+".k-resize-handle",hint:function(t){return e('<div class="k-grid-resize-indicator" />').css({height:u(t.data("th"))+h.tbody.attr("clientHeight")})},start:function(t){p=e(t.currentTarget).data("th"),g&&h._hideResizeHandle();var i=p.closest("table"),a=e.inArray(p[0],Mn(p.closest("thead")).filter(":visible")),u=(s=i.parent().hasClass("k-grid-header-locked"))?h.lockedTable:h.table,m=h.footer||e();h.footer&&h.lockedContent&&(m=s?h.footer.children(".k-grid-footer-locked"):h.footer.children(".k-grid-footer-wrap")),Et(h.wrapper,"col-resize"),d=f.scrollable?i.find("col:not(.k-group-col):not(.k-hierarchy-col):eq("+a+")").add(u.children("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col):eq("+a+")")).add(m.find("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col):eq("+a+")")):u.children("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col):eq("+a+")");var k=e.map(h.columns,(function(e){return!e.hidden&&(s&&e.locked||!s&&!e.locked)?e:null}));n=t.x.location,r=c(p),o=En(k)[a].minResizableWidth||10,l=c(s?u.children("tbody"):h.tbody),_t.webkit&&h.wrapper.addClass("k-grid-column-resizing")},resize:function(t){var i=vt?-1:1,a=r+t.x.location*i-n*i;if(f.scrollable){var c;s&&h.lockedFooter?c=h.lockedFooter.children("table"):h.footer&&(c=h.footer.find(">.k-grid-footer-wrap>table")),c&&c[0]||(c=e());var u=p.closest("table"),g=s?h.lockedTable:h.table,k=!1,b=h.wrapper.width()-m,v=a;s&&l-r+v>b&&((v=r+(b-l-2*m))<0&&(v=a),k=!0),v>10&&v>=o&&(d.css("width",v),l&&(v=k?b-2*m:l+t.x.location*i-n*i,g.add(u).add(c).css("width",v),s||(h._footerWidth=v))),h._scrollVirtualWrapperOnColumnResize()}else a>10&&a>=o&&d.css("width",a)},resizeend:function(){var e,t,n=c(p);if(Et(h.wrapper,""),_t.webkit&&h.wrapper.removeClass("k-grid-column-resizing"),r!=n){t=h.lockedHeader?h.lockedHeader.find("thead:first tr:first").add(h.thead.find("tr:first")):p.parent();var a=p.attr(i.attr("index"));a||(a=t.find("th:not(.k-group-cell):not(.k-hierarchy-cell)").index(p)),(e=En(h.columns)[a]).width=n,h.trigger(De,{column:e,oldWidth:r,newWidth:n}),h._applyLockedContainersWidth(),h._syncLockedContentHeight(),h._syncLockedHeaderHeight(),h._updateStickyColumns()}h._resetResizeHandleHeader(),h._hideResizeHandle(),p=null}}))},_draggable:function(){var t=this;if(t.options.reorderable){t._draggableInstance&&t._draggableInstance.destroy();var n=t.wrapper.children(".k-grid-header");t._draggableInstance=t.wrapper.kendoDraggable({group:i.guid(),autoScroll:!0,filter:t.content?".k-grid-header:first "+q:"table:first>.k-grid-header "+q,dragstart:function(){n.children(".k-grid-header-wrap").unbind("scroll"+O+"scrolling").bind("scroll"+O+"scrolling",(function(e){t.virtualScrollable?i.scrollLeft(t.content.find(">.k-virtual-scrollable-wrap"),this.scrollLeft):i.scrollLeft(t.scrollables.not(e.currentTarget),this.scrollLeft)}))},dragend:function(){t._resetResizeHandleHeader(),n.children(".k-grid-header-wrap").unbind("scroll"+O+"scrolling")},drag:function(){t._hideResizeHandle()},hint:function(t){var n=t.attr(i.attr("title"));return n&&(n=i.htmlEncode(n)),e('<div class="k-header k-reorder-clue k-drag-clue" />').html(n||t.attr(i.attr("field"))||t.text()).prepend('<span class="k-icon k-drag-status k-i-cancel"></span>')}}).data("kendoDraggable")}},_reorderable:function(){var t=this;t.options.reorderable&&(t.wrapper.data("kendoReorderable")&&t.wrapper.data("kendoReorderable").destroy(),t.wrapper.kendoReorderable({draggable:t._draggableInstance,dragOverContainers:function(e,n){var i=on(t.columns);return!1!==i[e].lockable&&ln(i,t.columns,e,n)>-1},inSameContainer:function(n){return e(n.source).parent()[0]===e(n.target).parent()[0]&&ln(on(t.columns),t.columns,n.sourceIndex,n.targetIndex)>-1},change:function(e){var n=on(t.columns),i=n[e.oldIndex],a=ln(n,t.columns,e.oldIndex,e.newIndex);t.trigger(Me,{newIndex:a,oldIndex:b(i,n),column:i}),t.reorderColumn(a,i,"before"===e.position)}}))},_reorderHeader:function(e,t,n,i){for(var a,r,o=this,l=tn(e[0],o.columns),s=tn(t,o.columns),d=[],c=0;c<e.length;c++)e[c].columns&&(d=d.concat(e[c].columns));r=i?Mt(i,i,"tr:eq("+l.row+")>th.k-header:not(.k-group-cell,.k-hierarchy-cell)"):Mt(o.lockedHeader,o.thead,"tr:eq("+l.row+")>th.k-header:not(.k-group-cell,.k-hierarchy-cell)");var u=_n(e).length,p=_n([t]).length;d.length?(u>0&&0===p?(a="prepend",Yt(e,t,d,o.columns,o.lockedHeader.find("thead"),o.thead,this._groups(),a)):0===u&&p>0&&(a=0!==s.cell||!e[0].columns||t.columns||o._group?"append":"prepend",Yt(e,t,d,wn(o.columns),o.thead,o.lockedHeader.find("thead"),this._groups(),a)),(t.columns||l.cell-s.cell>1||s.cell-l.cell>1)&&(t=an(o.columns,t,e[0],n,o.columns))&&(u>0&&0===p?o._reorderHeader(d,t,n,o.thead):0===u&&p>0?o._reorderHeader(d,t,n,o.lockedHead):o._reorderHeader(d,t,n))):u!==p&&Kt(r[l.cell],o.columns,u),Dt(r,l.cell,s.cell,n,e.length)},_reorderContent:function(t,n,i){var a,r,o,l=this,s=e(),d=t[0],c=Gt(t),u=b(d,En(l.columns)),p=b(n,En(l.columns)),h=b(c[0],Tn(l.columns)),f=b(n,Tn(l.columns)),g=_n(l.columns).length,m=!!n.locked,k=l.footer||l.wrapper.find(".k-grid-footer");if(a=r=f,n.hidden){var v=m?_n(l.columns):wn(l.columns);Gt(v).length>0?(a=r=f=this._findClosestVisibleColumnIndex(v,p),o=Gt(v.slice(p)).length>0):m?(f=l.lockedTable.find("colgroup"),a=l.lockedHeader.find("colgroup"),r=e(l.lockedFooter).find(">table>colgroup")):(f=l.tbody.prev(),a=l.thead.prev(),r=k.find(".k-grid-footer-wrap").find(">table>colgroup"))}l._hasFilterRow()&&Dt(l.wrapper.find(".k-filter-row th:not(.k-group-cell,.k-hierarchy-cell)"),u,p,i,t.length),h>=0&&Dt(Mt(l.lockedHeader,l.thead.prev(),L),h,a,o||i,c.length),l.options.scrollable&&h>=0&&!l._hasVirtualColumns()&&Dt(Mt(l.lockedTable,l.tbody.prev(),L),h,f,o||i,c.length),k&&k.length&&(h>=0&&Dt(Mt(l.lockedFooter,k.find(".k-grid-footer-wrap"),">table>colgroup>col:not(.k-group-col,.k-hierarchy-col)"),h,r,o||i,c.length),Dt(k.find(".k-footer-template>td:not(.k-group-cell,.k-hierarchy-cell)"),u,p,i,t.length));var _=l.tbody.children(":not(.k-grouping-row,.k-detail-row)");l.lockedTable&&(g>p?g<=u&&jn(l.lockedTable.find(">tbody>tr.k-grouping-row"),l.table.find(">tbody>tr.k-grouping-row"),t.length):g>u&&jn(l.table.find(">tbody>tr.k-grouping-row"),l.lockedTable.find(">tbody>tr.k-grouping-row"),t.length),s=l.lockedTable.find(">tbody>tr:not(.k-grouping-row,.k-detail-row)"));for(var w=0,C=_.length;w<C;w+=1)Dt(Mt(s[w],_[w],">td:not(.k-group-cell,.k-hierarchy-cell)"),u,p,i,t.length)},_findClosestVisibleColumnIndex:function(e,t){var n=Gt(e.slice(t)).length>0?e.slice(t):e.slice(0,t+1).reverse(),i=Gt(n)[0];return b(i,Gt(this.columns))},_autoFitLeafColumn:function(e){this.autoFitColumn(En(this.columns)[e])},autoFitColumn:function(t){var n,a,r,o,l,s,d,u,p,f,g=this,k=g.options,v=g.columns,_=g.lockedHeader?Mn(g.lockedHeader.find(">table>thead")).filter(Vt).length:0,w="col:not(.k-group-col):not(.k-hierarchy-col)",C="td:visible:not(.k-group-cell):not(.k-hierarchy-cell)";if((t="number"==typeof t?v[t]:h(t)?m(sn(v),(function(e){return e===t}))[0]:m(sn(v),(function(e){return e.field===t}))[0])&&Nt(t)){s=t.minResizableWidth,n=b(t,En(v)),p=(a=(r=(o=t.locked)?g.lockedHeader.children("table"):g.thead.parent()).find("[data-index='"+n+"']")).find("a.k-header-column-menu, a.k-grid-filter");var y=o?g.lockedTable:g.table,S=g.footer||e();g.footer&&g.lockedContent&&(S=o?g.footer.children(".k-grid-footer-locked"):g.footer.children(".k-grid-footer-wrap"));var x=S.find("table").first();g.lockedHeader&&!o&&(n-=_);for(var T=0;T<v.length&&v[T]!==t;T++)v[T].hidden&&n--;k.scrollable?(l=r.find(w).eq(n).add(y.children("colgroup").find(w).eq(n)).add(x.find("colgroup").find(w).eq(n)),o||(d=y.parent(),u=i.scrollLeft(d))):l=y.children("colgroup").find(w).eq(n);var H=r.add(y).add(x);_t.safari&&a.css("white-space","initial");var I=c(a);l.width(""),H.css("table-layout","fixed"),l.width("auto"),H.addClass("k-autofitting"),H.css("table-layout",""),f=p.length?c(p)+c(a):c(a);var E=Math.ceil(Math.max(f,c(y.find("tr:not(.k-grouping-row)").eq(0).children(C).eq(n)),c(x.find("tr").eq(0).children(C).eq(n))))+1;if(s&&s>E&&(E=s),l.width(E),t.width=E,_t.safari&&a.css("white-space",""),k.scrollable){for(var D,M=r.find("col"),R=0,A=0,L=M.length;A<L;A+=1)if((D=M[A].style.width)&&-1==D.indexOf("%"))R+=parseInt(D,10);else{if(!M.eq(A).hasClass("k-group-col")){R=0;break}R+=parseInt(M.eq(A).width(),10)}R&&H.each((function(){this.style.width=R+"px"}))}H.removeClass("k-autofitting"),u&&i.scrollLeft(d,u),g.trigger(De,{column:t,oldWidth:I,newWidth:E}),g._applyLockedContainersWidth(),g._syncLockedContentHeight(),g._syncLockedHeaderHeight(),g._updateStickyColumns()}},reorderColumn:function(e,n,i){var a,r=this,o=Lt(n,r.columns),l=o?o.columns:r.columns,s=b(n,l),d=l[e],c=r.virtualScroll||{},u=!!d.locked,p=_n(r.columns).length,h=m(En(r.columns),(function(e){return e.groupHeaderColumnTemplate}));if(s!==e&&(n.locked||!u||1!=wn(r.columns).length)&&(!n.locked||u||1!=p)){r._hideResizeHandle(),i===t&&(i=e<s);var f=[n];r._reorderHeader(f,d,i),r.lockedHeader&&(fn(r.thead),fn(r.lockedHeader)),d.columns&&(d=(d=En(d.columns))[i?0:d.length-1]),n.columns&&(f=En(n.columns)),r._reorderContent(f,d,i),a=(a=!!n.locked)!=u,n.locked=u,l.splice(i?e:e+1,0,n),l.splice(s<e?s:s+1,1),r._updateLockedCols(),r._updateCols(),r._templates(),r._updateColumnCellIndex(),r._updateColumnSorters(),h.length>0&&r._renderGroupRows(),r._updateTablesWidth(),r._applyLockedContainersWidth(),r._syncLockedHeaderHeight(),r._syncLockedContentHeight(),r._updateFirstColumnClass(),r._updateStickyColumns(),c.columns&&r.refresh(),a&&(u?r.trigger(Re,{column:n}):r.trigger(Ae,{column:n}))}},_updateColumnCellIndex:function(){var e=0;this.lockedHeader&&(e=Xt(this.lockedHeader.find("thead"),_n(this.columns))),Xt(this.thead,wn(this.columns),e)},lockColumn:function(e){var t=this.columns;if((e="number"==typeof e?t[e]:m(t,(function(t){return t.field===e}))[0])&&!e.locked&&!e.hidden){e.sticky&&this.unstickColumn(t.indexOf(e));var n=_n(t).length-1;this.reorderColumn(n,e,!1)}},unlockColumn:function(e){var t=this.columns;if((e="number"==typeof e?t[e]:m(t,(function(t){return t.field===e}))[0])&&e.locked&&!e.hidden){var n=_n(t).length;this.reorderColumn(n,e,!0)}},stickColumn:function(e){var t=this.columns;!(e="number"==typeof e?t[e]:m(t,(function(t){return t.field===e}))[0])||e.sticky||e.hidden||e.locked&&(this.unlockColumn(t.indexOf(e)),e.locked)||(e.sticky=!0,this._updateStickyColumns())},unstickColumn:function(e){var t=this.columns;(e="number"==typeof e?t[e]:m(t,(function(t){return t.field===e}))[0])&&e.sticky&&!e.locked&&!e.hidden&&(this._removeStickyAttributes([e]),this._removeStickyStyles(Cn(t)),e.sticky=!1,this._updateStickyColumns(),0===this._anyStickyColumns()&&(this._templates(),this._hasFilterRow()&&this._updateStickyFilterCells()))},cellIndex:function(t){var n=0;return this.lockedTable&&!e.contains(this.lockedTable[0],t[0])&&(n=En(_n(this.columns)).length),e(t).parent().children("td:not(.k-group-cell,.k-hierarchy-cell)").index(t)+n},_modelForContainer:function(t){(t=e(t)).is("tr")||"popup"===this._editMode()||(t=t.closest("tr"));var n=t.attr(i.attr("uid"));return this.dataSource.getByUid(n)},_calculateColumnIndex:function(t){var n=this.cellIndex(t),i=0;return this._hasVirtualColumns()&&(i=(i=parseInt(e(t).closest("tr").find("td:first").attr("colspan"),10))>1?i-1:0),n+i},_editable:function(){var t=this,n=t.options.editable,a=function(){var n=s(),i=t._editContainer;i&&i[0]&&!e.contains(i[0],n)&&i[0]!==n&&!e(n).closest(".k-animation-container").length&&(t.editable.end()?t.closeCell():t._scrollVirtualWrapper())};n&&(this.wrapper.addClass("k-editable"),"incell"===t._editMode()?(t.table.add(t.lockedTable).on("mousedown"+O,M+">"+R,(function(n){var a=e(n.target);"incell"===t._editMode()&&a.hasClass("k-checkbox")&&a.prev().attr(i.attr("bind"))&&n.preventDefault()})),!1!==n.update&&(Ct&&t.wrapper.on(ze+O,".k-edit-cell > input[type='checkbox']",(function(t){e(t.target).focus()})).on(ze+O,".k-edit-cell",(function(t){e(t.target).is("input")||e(t.currentTarget).find("input[type='checkbox']").focus()})).on(qe+O,"tr:not(.k-grouping-row) > td",(function(n){var i=t._editContainer;i&&i[0]&&(e.contains(i[0],n.target)||i[0]===n.target)?t._mousedownOnEditCell=!0:t._mousedownOnEditCell=!1})),t.editableUserEvents=new i.UserEvents(t.wrapper,{filter:"tr:not(.k-grouping-row) > td",allowSelection:!0,tap:function(n){var i=e(n.target),a=t.lockedTable&&i.closest("table")[0]===t.lockedTable[0];t._mousedownOnEditCell=!1,i.hasClass("k-hierarchy-cell")||i.hasClass("k-detail-cell")||i.hasClass("k-group-cell")||i.hasClass("k-edit-cell")||i.has("a.k-grid-delete").length||i.has("button.k-grid-delete").length||i.closest("tbody")[0]!==t.tbody[0]&&!a||e(n.target).is(":input")||(t.editable?t.editable.end()?(e(s()).blur(),t.closeCell(),t.editCell(i)):t._scrollVirtualWrapper():t.editCell(i))}}),t.wrapper.on("focusin"+O,(function(){e.contains(this,s())||(clearTimeout(t.timer),t.timer=null)})).on("focusout"+O,(function(e){var n=!0;(Ct&&t._mousedownOnEditCell||t._virtualColScroll)&&(n=!1),t._mousedownOnEditCell=!1,n&&(t.timer=setTimeout((function(){a(e)}),1))})))):!1!==n.update&&(t.wrapper.on(ze+O,"tbody>tr:not(.k-detail-row,.k-grouping-row):visible a.k-grid-edit",(function(n){var i=e(this);t._belongsToGrid(i)&&(n.preventDefault(),t.editRow(i.closest("tr")))})),t._isVirtualInlineEditable()&&t.wrapper.on("focusout"+O,"tr:not(.k-grouping-row) > td",(function(){t.editable&&!t.editable.end()&&t._scrollVirtualWrapper()}))),!1!==n.destroy?t.wrapper.on(ze+O,"tbody>tr:not(.k-detail-row,.k-grouping-row):visible .k-grid-delete",(function(n){var i=e(this);t._belongsToGrid(i)&&(n.preventDefault(),n.stopPropagation(),t.removeRow(i.closest("tr")))})):t.wrapper.on(ze+O,"tbody>tr:not(.k-detail-row,.k-grouping-row):visible button.k-grid-delete",(function(n){t._belongsToGrid(e(this))&&(n.stopPropagation(),t._confirmation()||n.preventDefault())})))},editCell:function(t){t=e(t);var n=this,i=En(n.columns)[n._calculateColumnIndex(t)],a=n._modelForContainer(t);if(n.closeCell(),a&&ni(i,a)&&!i.command){if(n.trigger(G,{model:a}))return;n._attachModelChange(a),n._editContainer=t,n._shouldClearEditableState&&n._clearEditableState(),n.editable=t.addClass("k-edit-cell").kendoEditable({fields:{field:i.field,format:i.format,editor:i.editor,values:i.values},model:a,target:n,change:function(e){n.trigger(U,{values:e.values,container:t,model:a})&&e.preventDefault()},skipFocus:!(!n._isVirtualIncellEditable()&&!n._hasVirtualColumns()||!n._editableState)}).data("kendoEditable");var r=t.parent().addClass("k-grid-edit-row");n.lockedContent&&(Yn(r[0],n._relatedRow(r).addClass("k-grid-edit-row")[0]),n._syncLockedScroll()),n.trigger(N,{container:t,model:a})}},_adjustLockedHorizontalScrollBar:function(){var e=this.table,t=e.parent(),n=e[0].offsetWidth>t[0].clientWidth?i.support.scrollbar():0;this.lockedContent.height(t[0].offsetHeight-n)},_syncLockedScroll:function(){this.lockedContent[0].scrollTop=this.content[0].scrollTop,this.virtualScrollable&&(this.lockedContent[0].scrollTop=this.wrapper.find(".k-virtual-scrollable-wrap")[0].scrollTop)},_syncLockedContentHeight:function(){this.lockedTable&&(this.touchScroller||this._adjustLockedHorizontalScrollBar(),this._adjustRowsHeight(this.table,this.lockedTable))},_syncLockedHeaderHeight:function(){if(this.lockedHeader){var e=this.lockedHeader.children("table"),t=this.thead.parent();this._adjustRowsHeight(e,t),Qn(e,t)}},_syncLockedFooterHeight:function(){this.lockedFooter&&this.footer&&this.footer.length&&this._adjustRowsHeight(this.lockedFooter.children("table"),this.footer.find(".k-grid-footer-wrap > table"))},_destroyEditable:function(){var e=this,t=function(){if(e.editable){var t=e.editView?e.editView.element:e._editContainer;t&&(t.off(ze+O,"a.k-grid-cancel",e._editCancelClickHandler),t.off(ze+O,"a.k-grid-update",e._editUpdateClickHandler)),e._detachModelChange(),e.editable.destroy(),e.editable=null,e._editContainer=null,e._destroyEditView(),e._editableIsClosing=null}};e.editable&&("popup"!==e._editMode()||e._isMobile?t():e._editableIsClosing?e._editContainer.data("kendoWindow").bind("deactivate",t):(e._editableIsClosing=!0,e._editContainer.data("kendoWindow").bind("deactivate",t).close())),e._confirmDialog&&(e._confirmDialog.close(),e._confirmDialog.destroy(),e._confirmDialog=null)},_destroyEditView:function(){this.editView&&(this.editView.purge(),this.editView=null,this.pane.navigate(""))},_attachModelChange:function(e){var t=this;t._modelChangeHandler=function(e){t._modelChange({field:e.field,model:this})},e.bind("change",t._modelChangeHandler)},_detachModelChange:function(){var e=this,t=e._editContainer,n=e._modelForContainer(t);n&&n.unbind(J,e._modelChangeHandler)},closeCell:function(e){var t,n,i,r=this,o=r._editContainer;o&&(i=r._modelForContainer(o),e&&r.trigger("cancel",{container:o,model:i})||(r.trigger(X,{type:e?"cancel":"save",model:i,container:o}),o.removeClass("k-edit-cell"),t=En(r.columns)[r._calculateColumnIndex(o)],n=o.parent().removeClass("k-grid-edit-row"),r.lockedContent&&r._relatedRow(n).removeClass("k-grid-edit-row"),r._destroyEditable(),r._displayCell(o,t,i),r._shouldClearEditableState&&r._clearEditableState(),r.trigger("itemChange",{item:n,data:i,ns:a}),r.lockedContent&&Yn(n.css("height","")[0],r._relatedRow(n).css("height","")[0])))},_displayCell:function(e,t,n){var a=this,r={storage:{},count:0},o=f({},i.Template,a.options.templateSettings),l=i.template(a._cellTmpl(t,r),o);r.count>0&&(l=_(l,r.storage)),e.empty().html(l(n)),a.angular("compile",(function(){return{elements:e,data:[{dataItem:n}]}}))},removeRow:function(e){this._confirmation(e)&&this._removeRow(e)},_removeRow:function(t){var n,i,a,r=this,o=r._editMode();"incell"!==o&&r.cancelRow(),t=e(t),r.lockedContent&&(t=t.add(r._relatedRow(t))),t=t.hide(),r.dataSource._isGroupPaged()&&r._removeGroupIfEmpty(t),(n=r._modelForContainer(t))&&!r.trigger(Z,{row:t,model:n})?(a=r.dataSource.options.schema,r._selectedIds&&a&&a.model&&(i=n[w(r.dataSource.options.schema.model)?r.dataSource.options.schema.model.fn.idField:r.dataSource.options.schema.model.id],delete r._selectedIds[i]),r.dataSource.remove(n),"inline"!==o&&"popup"!==o||r.dataSource.sync()):"incell"===o&&r._destroyEditable()},_editMode:function(){var e="incell",t=this.options.editable;return!0!==t&&(e="string"==typeof t?t:t.mode||e),e},editRow:function(t){var n,a=this;t instanceof o?n=t:(t=e(t),n=a._modelForContainer(t));var r,l=a._editMode();a.cancelRow(),n&&(t=a.tbody.children("["+i.attr("uid")+"="+n.uid+"]"),a._attachModelChange(n),"popup"===l?a._createPopupEditor(n):"inline"===l?a._createInlineEditor(t,n):"incell"===l&&e(t).children(E).each((function(){var t=e(this),i=En(a.columns)[a._calculateColumnIndex(t)];if((n=a._modelForContainer(t))&&(!n.editable||n.editable(i.field))&&i.field&&!i.selectable)return a.editCell(t),!1})),(r=a.editView?a.editView.element:a._editContainer)&&(this._editCancelClickHandler||(this._editCancelClickHandler=_(this._editCancelClick,this)),r.on(ze+O,"a.k-grid-cancel",this._editCancelClickHandler),this._editUpdateClickHandler||(this._editUpdateClickHandler=_(this._editUpdateClick,this)),r.on(ze+O,"a.k-grid-update",this._editUpdateClickHandler)))},_editUpdateClick:function(e){e.preventDefault(),e.stopPropagation(),this.saveRow()},_editCancelClick:function(t){var n=this,i=n.options.navigatable,a=n.editable.options.model,r=n.editView?n.editView.element:n._editContainer;if(t.preventDefault(),t.stopPropagation(),!n.trigger("cancel",{container:r,model:a})){var o=n.items().index(e(n.current()).parent());n.cancelRow(),i&&(n._setCurrent(n.items().eq(o).children().filter(R).first()),Jn(n.table,!0))}},_createPopupEditor:function(t){var n,a,r,o,l,s,d,c,u,p,g,m,k=this,b="<div "+i.attr("uid")+'="'+t.uid+'" class="k-popup-edit-form"><'+(k._isMobile?'ul class="k-edit-form-container k-listgroup k-listgroup-flush">':'div class="k-edit-form-container">'),v=[],w=En(k.columns),C=i.guid(),y=k.options.editable,S=y.template,x=h(y)?y.window:{},T=f({},i.Template,k.options.templateSettings);if(!k.trigger(G,{model:t})){if(x=x||{},S)for(typeof S===We&&(S=i.unescape(S)),b+=i.template(S,T)(t),r=0,o=w.length;r<o;r++)(n=w[r]).command&&(p=Xn(n.command,"edit"))&&(a=p);else for(r=0,o=w.length;r<o;r++)(n=w[r]).selectable||(n.command?n.command&&(p=Xn(n.command,"edit"))&&(a=p):k._isMobile?(b+='<li class="k-item k-listgroup-item">',ni(n,t)?(v.push({field:n.field,title:n.title,format:n.format,editor:n.editor,values:n.values}),b+='<label class="k-label k-listgroup-form-row">',b+='<span class="k-item-title k-listgroup-form-field-label">'+(n.title&&(k.options.encodeTitles?fi(n.title,!0):n.title)||n.field||"")+"</span>",b+='<div class="k-listgroup-form-field-wrapper" id="'+n.field+"_"+C+'" '+i.attr("container-for")+'="'+n.field+'"></div>',b+="</label>"):(m={storage:{},count:0},l=i.template(k._cellTmpl(n,m),T),m.count>0&&(l=_(l,m.storage)),b+='<label class="k-label k-listgroup-form-row k-no-click">',b+='<span class="k-item-title k-listgroup-form-field-label">'+(n.title&&(k.options.encodeTitles?fi(n.title,!0):n.title)||n.field||"")+"</span>",b+='<span class="k-no-editor k-listgroup-form-field-wrapper">'+l(t)+"</span>",b+="</label>"),b+="</li>"):(b+='<div class="k-edit-label"><label for="'+n.field+'">'+(n.title&&(k.options.encodeTitles?fi(n.title):n.title)||n.field||"")+"</label></div>",ni(n,t)?(v.push({field:n.field,title:n.title,format:n.format,editor:n.editor,values:n.values}),b+="<div "+i.attr("container-for")+'="'+n.field+'" class="k-edit-field"></div>'):(m={storage:{},count:0},l=i.template(k._cellTmpl(n,m),T),m.count>0&&(l=_(l,m.storage)),b+='<div class="k-edit-field k-no-editor">'+l(t)+"</div>")));var H;a&&h(a)&&(h(a.text)&&(s=a.text.update,d=a.text.cancel),h(a.iconClass)&&(c=a.iconClass.update,u=a.iconClass.cancel),a.attr&&(g=a.attr)),k._isMobile?(b+="</ul></div>",k.editView=k.pane.append("<div data-"+i.ns+'role="view" class="k-grid-edit-form"><div data-'+i.ns+'role="header" class="k-header"><a href="\\#" class="k-header-cancel k-link k-grid-cancel" title="#=messages.cancel#" aria-label="#=messages.cancel#"><span class="k-icon k-i-arrow-chevron-left"></span></a>'+(k.options.messages.commands.edit||"Edit")+'<a href="\\#" class="k-header-done k-link k-grid-update" title="#=messages.done#" aria-label="#=messages.done#"><span class="k-icon k-i-check"></span></a></div><div data-'+i.ns+'role="content" class="'+yt.content+'">'+b+"</div></div>"),H=k._editContainer=k.editView.element.find(".k-popup-edit-form")):(b+='<div class="k-edit-buttons k-state-default">',b+=k._createButton({name:"update",text:s,attr:g,iconClass:c})+k._createButton({name:"canceledit",text:d,attr:g,iconClass:u}),b+="</div></div></div>",H=k._editContainer=e(b).appendTo(k.wrapper).eq(0).kendoWindow(f({modal:!0,resizable:!1,draggable:!0,title:k.options.messages.commands.edit||"Edit",visible:!1,close:function(n){if(n.userTriggered){if(n.sender.element.focus(),k.trigger("cancel",{container:H,model:t}))return void n.preventDefault();var i=k.items().index(e(k.current()).parent());k._editableIsClosing=!0,k.cancelRow(),k.options.navigatable&&(k._setCurrent(k.items().eq(i).children().filter(R).first()),Jn(k.table,!0))}}},x))),k.editable=k._editContainer.kendoEditable({fields:v,model:t,clearContainer:!1,target:k}).data("kendoEditable"),k._openPopUpEditor(),k.trigger(N,{container:H,model:t})}},_openPopUpEditor:function(){var e=this,t=e._editContainer?e._editContainer.data("kendoWindow"):null,n=(e.options.editable||{}).window||{};this._isMobile?this.pane.navigate(this.editView,this._editAnimation):t&&(n.position||t.center(),t.open())},_createInlineEditor:function(t,n){var a,r,o,l=this,s=[];l.trigger(G,{model:n})||(l.lockedContent&&(t=t.add(l._relatedRow(t))),t.children(":not(.k-group-cell,.k-hierarchy-cell)").each((function(){if(r=e(this),!(a=En(l.columns)[l._calculateColumnIndex(r)]).command&&ni(a,n))s.push({field:a.field,title:a.title,format:a.format,editor:a.editor,values:a.values}),r.attr(i.attr("container-for"),a.field),r.empty();else if(a.command){var t,d,c,u,p;(o=Xn(a.command,"edit"))&&(r.empty(),h(o)&&(h(o.text)&&(t=o.text.update,d=o.text.cancel),h(o.iconClass)&&(c=o.iconClass.update,u=o.iconClass.cancel),o.attr&&(p=o.attr)),e(l._createButton({name:"update",text:t,attr:p,iconClass:c})+l._createButton({name:"canceledit",text:d,attr:p,iconClass:u})).appendTo(r))}})),l._editContainer=t,l._editContainer.addClass("k-grid-edit-row"),l._shouldClearEditableState&&l._clearEditableState(),l.editable=new i.ui.Editable(l._editContainer,{target:l,fields:s,model:n,skipFocus:l._isVirtualInlineEditable()&&l._editableState&&!!l._editableState.field||l._hasVirtualColumns(),clearContainer:!1}),t.length>1&&(Yn(t[0],t[1]),l._applyLockedContainersWidth()),l.trigger(N,{container:t,model:n}))},cancelRow:function(e){var t,n=this,a=n._editContainer;if(a){if(!(t=n._modelForContainer(a))||e&&n.trigger("cancel",{container:a,model:t}))return;n._destroyEditable(),n.dataSource.cancelChanges(t),n._clearEditableState(),"popup"!==n._editMode()?n._displayRow(a):n._displayRow(n.tbody.find("["+i.attr("uid")+"="+t.uid+"]"))}},saveRow:function(){var t,n=this,i=this._editContainer,a=this._modelForContainer(i),r=e.Deferred();return i&&this.editable?!(t=n.editable&&n.editable.end())||this.trigger(U,{container:i,model:a})?(t||n._scrollVirtualWrapper(),r.reject().promise()):(n._clearEditableState(),this.dataSource.sync()):r.resolve().promise()},_displayRow:function(t){var n,i,r,o=this,l=o._modelForContainer(t),s=t.hasClass("k-state-selected"),d=t.hasClass("k-alt");if(l){o.lockedContent&&(n=e((d?o.lockedAltRowTemplate:o.lockedRowTemplate)(l)),o._relatedRow(t.last()).replaceWith(n)),o.angular("cleanup",(function(){return{elements:t.get()}})),i=e((d?o.altRowTemplate:o.rowTemplate)(l)),t.is(":visible")||i.hide(),t.replaceWith(i),o.trigger("itemChange",{item:i,data:l,ns:a}),n&&n.length&&o.trigger("itemChange",{item:n,data:l,ns:a});var c=i,u=[{dataItem:l}];n&&n.length&&(c=i.add(n),u.push({dataItem:l})),o.angular("compile",(function(){return{elements:c.get(),data:u}})),s&&(o.options.selectable||o._checkBoxSelection)&&o.select(i.add(n)),n&&Yn(i[0],n[0]),(r=i.next()).hasClass("k-detail-row")&&r.is(":visible")&&i.find(".k-hierarchy-cell .k-icon").removeClass("k-i-expand").addClass("k-i-collapse")}},_showMessage:function(t,n){var a=this;return a._isMobile?((a._confirmDialog=new i.ui.Confirm(e("<div />").appendTo(document.body),{modal:{preventScroll:!0},closable:!1,title:!1,content:t.title,messages:{okText:t.confirmDelete,cancel:t.cancelDelete},open:function(){a.content&&(a.content.data(Xe,a.content.css(Xe)),a.content.css(Xe,Je))},close:function(){a.content&&a.content.css(Xe,a.content.data(Xe))}})).result.done((function(){a._removeRow(n)})).fail((function(){var e=a._confirmDialog;e&&(e.close(),e.destroy())})),!1):window.confirm(t.title)},_confirmation:function(e){var t=this,n=t.options.editable,i=!0===n||typeof n===We?t.options.messages.editable.confirmation:n.confirmation;return h(n)&&typeof n.mode===We&&typeof i!==Ve&&typeof i!==We&&!1!==i&&(i=t.options.messages.editable.confirmation),!1===i||null==i||(typeof i===Ve&&(i=i(t._modelForContainer(e))),t._showMessage({confirmDelete:n.confirmDelete||t.options.messages.editable.confirmDelete,cancelDelete:n.cancelDelete||t.options.messages.editable.cancelDelete,title:!0===i?t.options.messages.editable.confirmation:i},e))},cancelChanges:function(){var e=this;e.dataSource.cancelChanges(),e._isVirtualEditable()&&e._virtualPageToTop((function(){e.virtualScrollable.scrollToTop()}))},saveChanges:function(){var e=this,t=e.editable&&e.editable.end();!t&&e.editable||e.trigger(ne)?t||e._scrollVirtualWrapper():e.dataSource.sync()},addRow:function(){var e,t,n=this,i=n.dataSource,a=n._editMode(),r=n.options.editable.createAt||"",o=i.pageSize(),l=i.view()||[],s=r.toLowerCase()===Ne,d=n._isVirtualEditable();n.editable&&n.editable.end()||!n.editable?("incell"!=a&&n.cancelRow(),e=i.indexOf(l[0]),s&&(e+=l.length,o&&!i.options.serverPaging&&o<=l.length&&(e-=1)),e<0&&(e=i.page()>i.totalPages()?(i.page()-1)*o:0),n.options.navigatable&&"incell"==a&&n._removeCurrent(),d?n._virtualAddRow():(t=i.insert(e,{}),n._editModel(t))):n._scrollVirtualWrapper()},_editModel:function(e){var t=this,n=t.options.editable.createAt||"",a=t._editMode();if(e){var r=e.uid,o=(t.lockedContent?t.lockedTable:t.table).find("tr["+i.attr("uid")+"="+r+"]"),l=o.children("td:not(.k-group-cell,.k-hierarchy-cell)").eq(t._firstEditableColumnIndex(o));"inline"===a&&o.length?t.editRow(o):"popup"===a?t.editRow(e):l.length&&t.editCell(l),"bottom"==n.toLowerCase()&&t.lockedContent&&(t.lockedContent[0].scrollTop=t.content[0].scrollTop=t.table[0].offsetHeight)}},_virtualAddRow:function(){var e=this,t=(e.options.editable.createAt||"").toLowerCase()===Ne;e._clearEditableState(),t?e._virtualAddRowAtBottom():e._virtualAddRowAtTop()},_virtualAddRowAtTop:function(){var e,t=this,n=t.dataSource,i=t.virtualScrollable;1===n.page()?(e=n.insert(0,{}),t._editModel(e),i.scrollToTop()):t._virtualPageToTop((function(){e=n.insert(0,{}),t._editModel(e),i.scrollToTop()}))},_virtualAddRowAtBottom:function(){var e,t=this,n=t.dataSource,i=t.virtualScrollable,a=n.total();n.at(a-1)instanceof o?(e=n.insert(a,{}),t._virtualPageToBottom((function(){t._editModel(e),i.scrollToBottom()}))):t._virtualPageToBottom((function(){e=n.insert(a,{}),t._editModel(e),i.scrollToBottom()}))},_virtualPageToTop:function(e){var t=this;t._virtualPage(0,t.dataSource.take(),(function(){e()}))},_virtualPageToBottom:function(e){var t=this,n=t.dataSource,i=n.take(),a=n.total(),r=a>i?a-i:0;t._virtualPage(r,i,(function(){e()}))},_virtualPage:function(e,t,n){var i=this;i._isVirtualEditable()&&(i.virtualScrollable._preventScroll=!0,i.virtualScrollable._page(e,t,n))},_firstEditableColumnIndex:function(e){var t,n,i,a=this,r=En(a.columns),o=a._modelForContainer(e);for(n=0,i=r.length;n<i;n++)if(t=r[n],o&&(!o.editable||o.editable(t.field))&&!t.command&&t.field&&!0!==t.hidden)return n;return-1},_toolbar:function(){var t,n=this,a=n.wrapper,r=n.options.toolbar,o=n.options.editable;r&&((t=n.wrapper.find(".k-grid-toolbar")).length||(w(r)||(r=typeof r===We?r:n._toolbarTmpl(r).replace(ct,"\\#"),r=_(i.template(r),n)),t=e('<div class="k-toolbar k-grid-toolbar" />').html(r({})).prependTo(a),n.angular("compile",(function(){return{elements:t.get()}}))),o&&!1!==o.create&&t.on(ze+O,".k-grid-add",(function(e){e.preventDefault(),n.addRow()})).on(ze+O,".k-grid-cancel-changes",(function(e){e.preventDefault(),n.cancelChanges()})).on(ze+O,".k-grid-save-changes",(function(e){e.preventDefault(),n.saveChanges()})),t.on(ze+O,".k-grid-excel",(function(e){e.preventDefault(),n.saveAsExcel()})),t.on(ze+O,".k-grid-pdf",(function(e){e.preventDefault(),n.saveAsPDF()})),t.on(Ze+O,".k-grid-search input",(function(e){var t=e.currentTarget;clearTimeout(n._searchTimeOut),n._searchTimeOut=setTimeout((function(){n._searchTimeOut=null;var e=n.options,i=e.search?e.search.fields:null,a={filters:[],logic:"or"},r=t.value;if(i||(i=Dn(e.columns)),n.dataSource.options.endless&&(n.dataSource.options.endless=null,n._endlessPageSize=n.dataSource.options.pageSize),r)for(var o=0;o<i.length;o++)a.filters.push({field:i[o],operator:"contains",value:r});else a={};n.dataSource.filter(a)}),300)})))},_toolbarTmpl:function(e){var t,n,i=this,a="",r="",o=i.options.messages.commands;if(k(e))for(t=0,n=e.length;t<n;t++)"search"===("string"==typeof e[t]?e[t].toLowerCase():(e[t].name||"").toLowerCase())?("string"!=typeof e[t]&&(r=e[t].text),a+="<span class='k-textbox k-grid-search k-display-flex'>",a+="<input autocomplete='off' placeholder='"+(r=r||o.search)+"' title='"+r+"' class='k-input' />",a+="<span class='k-input-icon'><span class='k-icon k-i-search'></span></span>",a+="</span>"):a+=i._createButton(e[t]);return a},_createButton:function(e){var n,a=e.template||mt,r=typeof e===We?e:e.name||e.text,o={className:It[r]?It[r].className:"k-grid-"+(r||"").replace(/\s/g,""),text:r,attr:"",iconClass:""},l=this.options.messages.commands;if(!(r||h(e)&&e.template))throw new Error("Custom commands should have name specified");return h(e)?((e=f(!0,{},e)).className&&b(o.className,e.className.split(" "))<0?e.className+=" "+o.className:e.className===t&&(e.className=o.className),"edit"===r&&((e=f(!0,{},e)).text=h(e.text)?e.text.edit:e.text,e.iconClass=h(e.iconClass)?e.iconClass.edit:e.iconClass),e.attr&&(h(e.attr)&&(e.attr=Ht(e.attr)),typeof e.attr===We&&(n=e.attr.match(/class="(.+?)"/))&&b(n[1],e.className.split(" "))<0&&(e.className+=" "+n[1])),o=f(!0,o,It[r],{text:l[r]},e)):o=f(!0,o,It[r],{text:l[r]}),i.template(a)(o)},_hasFooters:function(){return!!this.footerTemplate||!!this.groupFooterTemplate||this.footer&&this.footer.length>0||this.wrapper.find(".k-grid-footer").length>0},_groupable:function(){var t=this;t._groupableClickHandler?t.table.add(t.lockedTable).off(ze+O,t._groupableClickHandler):t._groupableClickHandler=function(n){var i=e(this),a=i.closest("tr"),r=t._groupRows?t._groupRows[t.wrapper.find(".k-grouping-row").index(a)]:{};i.hasClass("k-i-collapse")?t.trigger("groupCollapse",{group:r,element:a})||t.collapseGroup(a):t.trigger("groupExpand",{group:r,element:a})||t.expandGroup(a),n.preventDefault(),n.stopPropagation()},t._isLocked()?t.lockedTable.on(ze+O,".k-grouping-row .k-i-expand, .k-grouping-row .k-i-collapse",t._groupableClickHandler):t.table.on(ze+O,".k-grouping-row .k-i-expand, .k-grouping-row .k-i-collapse",t._groupableClickHandler),t._attachGroupable()},_attachGroupable:function(){var t=this,n=t.wrapper,r=t.options.groupable,o=q+"["+i.attr("field")+"]",l=t.content?".k-grid-header:first "+o:"table:first>.k-grid-header "+o;r&&!1!==r.enabled&&(n.has("div.k-grouping-header")[0]||e("<div>&nbsp;</div>").addClass("k-grouping-header").prependTo(n),t.groupable&&t._destroyGroupable(),_t.chrome&&(n.find("div.k-grouping-header").css("touch-action","none"),n.find(l).css("touch-action","none")),t.groupable=new a.Groupable(n,f({},r,{draggable:t._draggableInstance,groupContainer:">div.k-grouping-header",dataSource:t.dataSource,draggableElements:l,filter:l,allowDrag:t.options.reorderable,change:function(e){t.trigger("group",{groups:e.groups})?e.preventDefault():(t._clearEditableState(),t.dataSource.options.endless&&(t.dataSource.options.endless=null,t._endlessPageSize=t.dataSource.options.pageSize,t.dataSource._skip=0,t.dataSource._pageSize=t.dataSource._take=t._endlessPageSize,t.dataSource._page=1))}})),t._addGroupableOptionsToHeader())},_addGroupableOptionsToHeader:function(){var e,t,n,a=this,r=sn(a.columns),o={},l=a._headerCells();for(n=0;n<r.length;n++)r[n].field,o[r[n].field]=r[n];for(n=0;n<l.length;n++)(t=o[(e=l.eq(n)).attr(i.attr(Ue))])&&t.groupable&&t.groupable.sort&&e.data(tt,t.groupable.sort)},_destroyGroupable:function(){var e=this;e.groupable&&e.groupable.element&&e.groupable.element.kendoGroupable("destroy"),e.groupable=null,e._removeGroupableOptionsFromHeader()},_removeGroupableOptionsFromHeader:function(){for(var e=this._headerCells(),t=0;t<e.length;t++)e.eq(t).removeData(tt)},_continuousItems:function(t,n){if(this.lockedContent){for(var i=this,a=i.table.add(i.lockedTable),r=e(t,a[0]),o=e(t,a[1]),l=n?_n(i.columns).length:1,s=n?i.columns.length-l:1,d=[],c=0;c<r.length;c+=l)v.apply(d,r.slice(c,c+l)),v.apply(d,o.splice(0,s));return d}},_selectable:function(){var t,n,a=this,r=[],o=a._isLocked(),l=a.options.selectable;if(l){a.selectable&&a.selectable.destroy(),a._selectedIds={},l=i.ui.Selectable.parseOptions(l),t=l.multiple,n=l.cell,a._hasDetails()&&(r[r.length]=".k-detail-row"),(a.options.groupable||a._hasFooters()||a._groups())&&(r[r.length]=".k-grouping-row,.k-group-footer"),""!==(r=r.join(","))&&(r=":not("+r+")");var s=a.table;o&&(s=s.add(a.lockedTable));var d=">"+(n?D:"tbody>tr"+r);a.selectable=new i.ui.Selectable(s,{filter:d,aria:!0,multiple:t,change:function(){var e;n||a._persistSelectedRows(),a._checkBoxSelection&&(e=a.selectable.value(),a._uncheckCheckBoxes(),a._checkRows(e),e.length&&e.length===a.items().length?a._toggleHeaderCheckState(!0):a._toggleHeaderCheckState(!1)),a.trigger(J)},useAllItems:o&&t&&n,relatedTarget:function(t){if(!n&&o){for(var i,r=e(),l=0,s=t.length;l<s;l++)i=a._relatedRow(t[l]),b(i[0],t)<0&&(r=r.add(i));return r}},continuousItems:function(){return a._continuousItems(d,n)},ignoreOverlapped:a.options.selectable&&a.options.selectable.ignoreOverlapped,addIdToRanges:!0}),a.options.navigatable&&s.on("keydown"+O,(function(i){var r=a.current(),l=i.target;if(r)if(i.keyCode===p.SPACEBAR&&!i.shiftKey&&e.inArray(l,s)>-1&&!r.is(".k-edit-cell,.k-header")&&r.parent().is(":not(.k-grouping-row,.k-detail-row,.k-group-footer)")){if(i.preventDefault(),i.stopPropagation(),r=n?r:r.parent(),o&&!n&&(r=r.add(a._relatedRow(r))),t)if(i.ctrlKey){if(r.hasClass(ge))return void a._deselectCheckRows(r)}else a.selectable.clear();else a.selectable.clear();n||(a.selectable._lastActive=r),a.selectable.value(r)}else!n&&(e(l).is("td")||e(l).is("table")&&b(l,this._navigatableTables))&&(i.shiftKey&&i.keyCode==p.LEFT||i.shiftKey&&i.keyCode==p.RIGHT||i.shiftKey&&i.keyCode==p.UP||i.shiftKey&&i.keyCode==p.DOWN||i.keyCode===p.SPACEBAR&&i.shiftKey)&&(i.preventDefault(),i.stopPropagation(),r=r.parent(),o&&(r=r.add(a._relatedRow(r))),t?(a.selectable._lastActive||(a.selectable._lastActive=r),a.selectable.selectRange(a.selectable._firstSelectee(),r)):(a.selectable.clear(),a.selectable.value(r)))}))}},_clipboard:function(){var e=this.options;if(e.selectable&&e.allowCopy){var t=this;e.navigatable||t.table.add(t.lockedTable).attr("tabindex",0).on("mousedown"+O+" keydown"+O,".k-detail-cell",(function(e){e.target!==e.currentTarget&&e.stopImmediatePropagation()})).on("mousedown"+O,M+">"+R,_(ai,t)),t.copyHandler=_(t.copySelection,t),t.updateClipBoardState=function(){t.areaClipBoard&&t.areaClipBoard.val(t.getTSV()).focus().select()},t.bind("change",t.updateClipBoardState),t.wrapper.on("keydown",t.copyHandler),t.clearAreaHandler=_(t.clearArea,t),t.wrapper.on("keyup",t.clearAreaHandler)}},copySelectionToClipboard:function(e){this._createAreaClipBoard(),this.areaClipBoard.val(this.getTSV(e)).focus().select(),document.execCommand("copy")},copySelection:function(t){t instanceof jQuery.Event&&!t.ctrlKey&&!t.metaKey||e(t.target).is("input:visible,textarea:visible")||window.getSelection&&window.getSelection().toString()||document.selection&&document.selection.createRange().text||(this._createAreaClipBoard(),this.areaClipBoard.val(this.getTSV()).focus().select())},_createAreaClipBoard:function(){this.areaClipBoard||(this.areaClipBoard=e("<textarea />").css({position:"fixed",top:"50%",left:"50%",opacity:0,width:0,height:0}).appendTo(this.wrapper))},getTSV:function(t){var n=this,i=n.select(),a="\t",r=n.options.allowCopy,o=!0,l=n._isLocked()&&_n(n.columns).length;e.isPlainObject(r)&&r.delimeter&&(a=r.delimeter);var s="";if(i.length){i.eq(0).is("tr")&&(i=i.find("td:not(.k-group-cell)")),o&&i.filter(":visible");var d,c=[],u=this.columns.length,p=n._isLocked()&&_n(n.columns).length,h=!0,f=[],g=Tn(this.columns);e.each(i,(function(t,i){i=e(i),d=n._getCellField(i,l);var a=i.closest("tr").index(),r=i.index();o&&(r-=i.prevAll(":hidden").length),p&&h&&(h=e.contains(n.lockedTable[0],i[0])),n._groups()&&h&&(r-=n._groups()),r=h?r:r+p,d&&(f[r]=d),u>r&&(u=r);var s=i.text();c[a]||(c[a]=[]),c[a][r]=s}));var m=c.length;c=e.each(c,(function(e,t){t&&(c[e]=t.slice(u),m>e&&(m=e))})),t&&f.length&&c.splice(m,0,f.map((function(e){return gi(e,g)}))),e.each(c.slice(m),(function(e,t){s+=t?t.join(a)+"\r\n":"\r\n"}))}return s},clearArea:function(t){this.areaClipBoard&&t&&t.target===this.areaClipBoard[0]&&Jn(this.options.navigatable?e(this.current()).closest("table"):this.table,!0),this.areaClipBoard&&(this.areaClipBoard.remove(),this.areaClipBoard=null)},_adaptiveColumns:function(){var e=this;e._anyColumnHasMediaQuery()&&(e._setColumnsMediaVisibility(e.columns),e._attachColumnMediaResizeHandler())},_anyColumnHasMediaQuery:function(){return this._columnsWithMediaQuery().length},_columnsWithMediaQuery:function(){return Ut(this.columns)},_attachColumnMediaResizeHandler:function(){var t=this;t._detachColumnMediaResizeHandler(),t._columnMediaResizeHandler=_(t._onColumnMediaResize,t),e(window).on(Ee+O,t._columnMediaResizeHandler)},_detachColumnMediaResizeHandler:function(){var t=this;t._columnMediaResizeHandler&&e(window).off(Ee+O,t._columnMediaResizeHandler)},_onColumnMediaResize:function(){var e=this;e._setColumnsMediaVisibility(e.columns),e._setContentMediaWidth()},_setColumnsMediaVisibility:function(e){for(var t=e||[],n=0;n<t.length;n++)this._setColumnMediaVisibility(t[n])},_setColumnMediaVisibility:function(e){var t=this;Zt(e.media)?t._setColumnsMediaVisibility(e.columns):Ot(e)?(t._showColumnByMedia(e),e.hidden||t._setColumnsMediaVisibility(e.columns)):t._hideColumnByMedia(e)},_showColumnByMedia:function(e){e.hidden||this.showColumn(e),Bt(e)},_hideColumnByMedia:function(e){var t=e.hidden;t||(e._hideByMedia=!0,this.hideColumn(e),e._hideByMedia=!1,e.hidden=t),Bt(e)},_setContentMediaWidth:function(){var t,n=this,i=n.options,a=n._isLocked();if(i.scrollable&&i.resizable){a&&n.lockedFooter?t=n.lockedFooter.children("table"):n.footer&&(t=n.footer.find(">.k-grid-footer-wrap>table")),t&&t[0]||(t=e());var r=a?n.wrapper.find(".k-grid-header-locked").find("table"):n.wrapper.find(".k-grid-header").find("table"),o=a?n.lockedTable:n.table,l=r.find("th"),s=r.find("colgroup"),d=l.length,u=l.filter(Vt).length,p=l.length-u,h=0;if(""!==r[0].style.width&&parseFloat(r[0].style.width)!==h){for(var f=r.css("width"),g=0;g<d;g++)if(Wt(l[g])){var m,k=Math.max(g,g-p),b=s.children()[k],v=b?b.style.width:"";""!==v?m=parseFloat(v):(r.css("width","auto"),m=c(l.eq(g)),r.css("width",f)),h+=m}o.css("width",h-1),r.css("width",h),t.css("width",h),n._updateStickyColumns()}}},_minScreenSupport:function(){this.hideMinScreenCols()&&(this.minScreenResizeHandler=_(this.hideMinScreenCols,this),e(window).on("resize",this.minScreenResizeHandler))},hideMinScreenCols:function(){var e=this.columns,t=window.innerWidth>0?window.innerWidth:screen.width;return this._iterateMinScreenCols(e,t)},_iterateMinScreenCols:function(e,n){for(var i=!1,a=0;a<e.length;a++){var r=e[a],o=r.minScreenWidth;o!==t&&null!==o&&(i=!0,o>n?this.hideColumn(r):this.showColumn(r)),!r.hidden&&r.columns&&(i=this._iterateMinScreenCols(r.columns,n)||i)}return i},_stickyColumns:function(){var e=this;e._anyStickyColumns()&&e._setStickyColumns(!1)},_updateStickyColumns:function(){var e=this,t=m(En(e.columns),(function(e){return e.groupHeaderColumnTemplate}));e._anyStickyColumns()&&(e._setStickyColumns(!0),e._templates(),t.length>0&&e._renderGroupRows(),e._hasFilterRow()&&e._updateStickyFilterCells())},_updateStickyFilterCells:function(){var t=this,n=t.thead.find(".k-filter-row").find("th:not(.k-group-cell,.k-hierarchy-cell)"),i=En(t.columns);n.length&&n.each((function(){var t,n,a=e(this),r=a.find("span").first().getKendoFilterCell();r&&(t=$t(i,r.options.column.uid),n=a.attr("style")||"",t.sticky?(a.attr("style",n+t.stickyStyle),a.addClass(Te)):(n=(n=n.replace(pt,"")).replace(ht,""),a.attr("style",n),a.removeClass(Te)))}))},_anyStickyColumns:function(){return Cn(this.columns).length},_setStickyColumns:function(e){var t=this,n=Cn(t.columns),i=yn(t.columns),a=t._calculateStickyWidths(i);t._removeStickyAttributes(n),t._setStickyClassAttributes(n),t._setStickyStyleAttributes(i,a,e),e&&t._setStickyStyles(i,a)},_calculateStickyWidths:function(e,t,n){var i,a,r,o,l=this,s=vt?"right":"left",d=vt?"left":"right",c={left:new Array(e.length).fill(t||0),right:new Array(e.length).fill(n||0)};for(i=0;i<e.length-1;i++)a=e[i],r=l._sumColumnWidth(a)+c[s][i],c[s][i+1]=r;for(i=e.length-1;i>0;i--)a=e[i],o=l._sumColumnWidth(a)+c[d][i],c[d][i-1]=o;return c},_setStickyClassAttributes:function(e,t){var n,i,a=this;for(n=0;n<e.length;n++)(i=e[n]).columns&&(!t&&n&&(t=n),a._setStickyClassAttributes(Hn([i]),t)),t&&bn(i,"headerAttributes","class",Ie),bn(i,"attributes","class",xe),bn(i,"headerAttributes","class",Te),bn(i,"footerAttributes","class",He)},_setStickyStyleAttributes:function(e,t,n){var i,a,r,o,l,s,d,c=this;for(i=0;i<e.length;i++)a=e[i],l="left: "+(r=t.left[i])+"px; right: "+(o=t.right[i])+"px;",a.columns&&(s=In([a]),d=c._calculateStickyWidths(s,r,o),c._setStickyStyleAttributes(s,d,n),n&&c._setStickyStyles(s,d)),bn(a,"attributes","style",l),bn(a,"headerAttributes","style",l),bn(a,"footerAttributes","style",l),a.stickyStyle=l},_removeStickyAttributes:function(e){var t,n,i=this,a=new RegExp("(\\s*"+xe+")*","ig"),r=new RegExp("(\\s*"+Te+")*","ig"),o=new RegExp("(\\s*"+He+")*","ig"),l=new RegExp("(\\s*"+Ie+")*","ig");for(t=0;t<e.length;t++)(n=e[t]).columns&&i._removeStickyAttributes(Hn([n])),vn(n,"attributes","class",a),vn(n,"attributes","style",pt),vn(n,"attributes","style",ht),vn(n,"headerAttributes","class",r),vn(n,"headerAttributes","class",l),vn(n,"headerAttributes","style",pt),vn(n,"headerAttributes","style",ht),vn(n,"footerAttributes","class",o),vn(n,"footerAttributes","style",pt),vn(n,"footerAttributes","style",ht)},_setStickyStyles:function(t,n){var i,a,r,o,l,s,d,c,u,p,h,f=this,g=En(wn(f.columns)),m=f.tbody.children(":not(.k-detail-row)");for(i=0;i<t.length;i++)if(o=t[i],s=n.left[i],d=n.right[i],l=g.indexOf(o),(c=f._getColumnHeader(o)).addClass(Te),o.headerAttributes.class&&-1!==o.headerAttributes.class.indexOf(Ie)&&c.addClass(Ie),mn(c,s,d),!o.columns)for(f.footer&&((u=f.footer.find(".k-grid-footer-wrap tr.k-footer-template").children().filter(":not(.k-group-cell,.k-hierarchy-cell)").eq(l)).addClass(He),mn(u,s,d)),a=0;a<m.length;a++)(r=e(m[a])).hasClass("k-grouping-row")?((p=r.find("."+o.groupHeaderColumnTemplateClass)).addClass(xe),mn(p,s,d)):((h=r.children().filter(":not(.k-group-cell,.k-hierarchy-cell)").eq(l)).addClass(xe),mn(h,s,d))},_removeStickyStyles:function(t){var n,i,a,r,o,l,s,d,c,u=this,p=En(wn(u.columns)),h=u.tbody.children(":not(.k-detail-row)");for(n=0;n<t.length;n++)if(r=t[n],o=p.indexOf(r),(l=u._getColumnHeader(r)).removeClass(Te),l.removeClass(Ie),mn(l,"",""),r.columns)u._removeStickyStyles(r.columns);else for(r.footerTemplate&&u.footer&&((s=u.footer.find(".k-grid-footer-wrap tr.k-footer-template").children().filter(":not(.k-group-cell,.k-hierarchy-cell)").eq(o)).removeClass(He),mn(s,"","")),i=0;i<h.length;i++)(a=e(h[i])).hasClass("k-grouping-row")?((d=a.find("."+r.groupHeaderColumnTemplateClass)).removeClass(xe),mn(d,"","")):((c=a.children().filter(":not(.k-group-cell,.k-hierarchy-cell)").eq(o)).removeClass(xe),mn(c,"",""))},_getColumnHeader:function(t){var n=this;return e("#"+t.headerAttributes.id).length?e("#"+t.headerAttributes.id):e("#"+n._cellId)},_sumColumnWidth:function(e){var t=this;return e.columns?t._sumCurrentWidths(En([e])):t._sumCurrentWidths([e])},_sumCurrentWidths:function(e){var t,n,i,a=this,r=0,o=0,l=e.length;for(i=0;i<l;i++)t=e[i],n=a._getColumnHeader(t),!t.hidden&&Ot(t)&&(r+=(o=n.is(":visible")?n.outerWidth():t.width)?parseInt(o,10):0);return r},_belongsToGrid:function(e){return this.wrapper[0]===e.closest(B)[0]},getSelectedData:function(){for(var e=this,t=e.selectable.selectedRanges(),n=Object.keys(t),i=e.selectable.selectedSingleItems(),a=[],r=Tn(e.columns),o=0;o<n.length;o++)a=a.concat(e._mapSelectionToData(t[n[o]],r));return i.length&&(a=a.concat(e._mapSelectionToData(i,r))),a},exportSelectedToExcel:function(e){if(!i.excel||!i.ooxml)throw new Error("The excel export functionality depends on both kendo.excel.js and kendo.ooxml.js scripts, please make sure they are included.");var t,n=this,a=this.options.excel||{},r=Tn(n.columns),o=new i.excel.ExcelExporter({}),l=function(){return{autoWidth:!0}},s={sheets:[{columns:Array.apply(0,Array(r.length)).map(l),rows:[],freezePane:{},filter:!1}]},d=n.selectable.selectedRanges(),c=Object.keys(d),u=n.selectable.selectedSingleItems(),p=[],h=n._isLocked()&&_n(n.columns).length,f=mi.bind(n);for(t=0;t<c.length;t++)p=p.concat(n._mapSelectionToData(d[c[t]],r,ki));if(p.length&&n._addRangeSelectionRows(s,o,p,e),(p=u.length?n._mapSelectionToData(u,r,ki):[]).length&&(h&&(p=p.sort(f)),n._addSingleSelectionRows(s,o,p,e)),s.sheets[0].rows.length){var g=new i.ooxml.Workbook(s);g.options||(g.options={}),g.options.skipCustomHeight=!0,g.toDataURLAsync().then((function(e){i.saveAs({dataURI:e,fileName:s.fileName||a.fileName,proxyURL:a.proxyURL,forceProxy:a.forceProxy})}))}},_addSingleSelectionRows:function(e,t,n,i){var a,r=0,o=Tn(this.columns);for(r=0;r<n.length;r++)a=n[r],t.data=[a],this._setExporterColumns(t,o,a),this._createExportRows(e,t,i)},_addRangeSelectionRows:function(e,t,n,i){var a=Tn(this.columns);t.data=n,this._setExporterColumns(t,a,n[0]),this._createExportRows(e,t,i)},_createExportRows:function(e,t,n){e.sheets[0].rows=e.sheets[0].rows.concat(n?t._rows():t._dataRows(t.data,0))},_setExporterColumns:function(t,n,i){t.columns=t.options.columns=e.map(n.filter((function(e){return Object.keys(i).indexOf(e.field)>=0})),t._prepareColumn)},_mapSelectionToData:function(t,n,i){for(var a,r,o,l,s,d=this,c="TR"===t[0][0].nodeName,u={},p=function(e){var t={};if(e.field&&(!i||i(e)))return t[e.field]=a[e.field],t},h=d._isLocked()&&_n(d.columns).length,f=0;f<t.length;f++)if(r=t[f],a=d.dataItem(c?r:r.parent()),c)u[a.uid]=e.extend.apply(null,n.map(p));else{if(!(l=d._getCellField(r,h)))continue;if((o=u[a.uid])||(o=u[a.uid]={}),!(s=Qt(n,l))||i&&!i(s))continue;o[l]=a[l]}return Object.keys(u).map((function(e){return u[e].uid=e,u[e]}))},_getCellField:function(t,n){var a=this,r=n&&e.contains(a.lockedTable[0],t[0]),o=i.attr("field");return n?a.element.find(".k-grid-header-"+(r?"locked":"wrap")+" th").eq(t.index()).attr(o):a.thead.find("th").eq(t.index()).attr(o)},_relatedRow:function(t){var n=this.lockedTable;if(t=e(t),!n)return t;var i=t.closest(this.table.add(this.lockedTable)),a=i.find(">tbody>tr").index(t);return(i=i[0]===this.table[0]?n:this.table).find(">tbody>tr").eq(a)},_relatedCell:function(t){var n=this.lockedTable;if(t=e(t),!n)return t;var i=t.closest(this.table.add(this.lockedTable)),a=i.find(">tbody>tr>td").index(t);return(i=i[0]===this.table[0]?n:this.table).find(">tbody>tr>td").index(a)},clearSelection:function(){var e=this;e.selectable&&!e._checkBoxSelection&&e.selectable.clear(),e._checkBoxSelection?e._deselectCheckRows(e.select()):(e.options.persistSelection?e._persistSelectedRows():e._selectedIds={},e.trigger(J))},select:function(e){var t=this,n=t.selectable,a=i.ui.Selectable.parseOptions(this.options.selectable).cell;return(e=t.table.add(t.lockedTable).find(e)).length?(n&&!n.options.multiple&&(n.clear(),e=e.first()),t._isLocked()&&(e=e.add(e.map((function(){return a?t._relatedCell(this):t._relatedRow(this)})))),void(n&&!t._checkBoxSelection?n.value(e):(t._checkRows(e),t.select().length===t.items().length&&t._toggleHeaderCheckState(!0),a||t._persistSelectedRows(),t.trigger(J)))):n?n.value():t.items().filter("."+ge)},_toggleHeaderCheckState:function(e){var t=this;e?t.thead.add(t.lockedHeader).find("tr "+ke).prop("checked",!0).attr("aria-checked",!0).attr("aria-label","Deselect all rows"):t.thead.add(t.lockedHeader).find("tr "+ke).prop("checked",!1).attr("aria-checked",!1).attr("aria-label","Select all rows")},_uncheckCheckBoxes:function(){var e=this;e.table.add(e.lockedTable).find("tbody "+ke).attr("aria-checked",!1).prop("checked",!1).attr("aria-label","Select row")},_deselectCheckRows:function(t){var n=this;t=n.table.add(n.lockedTable).find(t),n._isLocked()&&(t=t.add(t.map((function(){return n._relatedRow(this)})))),t.each((function(){e(this).removeClass(ge).find(ke).attr("aria-checked",!1).prop("checked",!1).attr("aria-label","Select row")})),n._toggleHeaderCheckState(!1),n._persistSelectedRows(),n.trigger(J)},_checkRows:function(t){t.each((function(){e(this).addClass(ge).find(ke).prop("checked",!0).attr("aria-label","Deselect row").attr("aria-checked",!0)}))},_persistSelectedRows:function(){var e,t,n,i=this,a=i.items(),r=i.dataSource.options.schema,o={};if(r&&r.model&&i._data&&(n=w(r.model)?r.model.fn.idField:r.model.id)){i.select().each((function(){t=i.dataItem(this),o[t[n]]=!0}));for(var l=0;l<a.length;l++)e=(t=i.dataItem(a[l]))[n],o[e]?i._selectedIds[e]=!0:delete i._selectedIds[e]}},selectedKeyNames:function(){var e=this,t=[];for(var n in e._selectedIds)t.push(n);return t.sort(),t},_updateCurrentAttr:function(t,n){var i,a,r=e(t).data("headerId");e(t).removeClass(he).closest("table").removeAttr("aria-activedescendant"),r?(r=r.replace(this._cellId,""),e(t).attr("id",r)):e(t).removeAttr("id"),(i=n.attr("id"))!=this._cellId&&n.data("headerId",i),n.is("th")?a=i:n.attr("id",this._cellId),n.addClass(he).closest("table").attr("aria-activedescendant",a||this._cellId),this._current=n},_scrollCurrent:function(){var t=this._current,n=this.options.scrollable;if(t&&n){var i=t.parent(),a=i.closest("table").parent(),r=a.is(".k-grid-content-locked,.k-grid-header-locked"),o=a.is(".k-grid-content-locked,.k-grid-content,.k-virtual-scrollable-wrap"),l=e(this.content).find(">.k-virtual-scrollable-wrap").addBack().last()[0];if(o)if(this.virtualScroll){var s=Math.max(b(i[0],this._items(i.parent())),0);this.virtualScroll.rows?(this._rowVirtualIndex=this.virtualScrollable.itemIndex(s),this.virtualScrollable.scrollIntoView(i)):(this._rowVirtualIndex=s,this._scrollTo(this._relatedRow(i)[0],l))}else this._scrollTo(this._relatedRow(i)[0],l);this.lockedContent&&(this.lockedContent[0].scrollTop=l.scrollTop),r||this._scrollTo(t[0],l)}},current:function(e){return this._setCurrent(e,!0)},_setCurrent:function(t,n,i){var a=this._current;if((t=e(t)).length&&(!a||a[0]!==t[0])){var r=t.parent(),o=r.children(E),l=parseInt(r.children().first().attr("colspan"),10);this._hasVirtualColumns()&&(this._virtualCellIndex=(l>1?l:0)+o.index(t)),this._updateCurrentAttr(a,t),i||this._scrollCurrent(),n||this.trigger(Pe,{element:t})}return t&&t.length&&(this._lastCellIndex=t.parent().children(E).index(t)),this._current},_removeCurrent:function(){this._current&&(this._current.removeClass(he),this._current=null)},_scrollTo:function(t,n){var a=t.tagName.toLowerCase(),r="td"===a||"th"===a,o=e(t).closest("table")[0],l=t[r?"offsetWidth":"offsetHeight"],s=n[r?"scrollLeft":"scrollTop"],d=n[r?"clientWidth":"clientHeight"],c="relative"===e(t).css("position")&&vt&&r?Math.abs(o.offsetLeft-t.offsetLeft):t[r?"offsetLeft":"offsetTop"],u=c+l,p=0,h=0,f=0;vt&&r&&(_t.msie||_t.edge?h=o.offsetLeft:(_t.mozilla||_t.webkit&&_t.version>85)&&(f=o.offsetLeft-i.support.scrollbar())),p=(s=Math.abs(s+h-f))>c?c:u>s+d?l<=d?u-d:c:s,p=Math.abs(p+h)+f,n[r?"scrollLeft":"scrollTop"]=p},_navigatable:function(){var t=this;if(t.options.navigatable){var n=t.table.add(t.lockedTable),a=t.thead.parent().add(e(">table",t.lockedHeader)),r=n;t.options.scrollable&&(r=r.add(a),a.attr(Oe,-1)),this._navigatableTables=r,this._headertables=a,r.off("mousedown"+O+" focus"+O+" focusout"+O+" keydown"+O),a.on("keydown"+O,_(t._openHeaderMenu,t)).find("a.k-link").attr("tabIndex",-1),n.attr(Oe,S.max(n.attr(Oe)||0,0)).on("keydown"+O,".k-detail-cell",(function(e){e.target!==e.currentTarget&&e.stopImmediatePropagation()})),r.on(i.support.touch?"touchstart"+O:"mousedown"+O,M+">"+R,_(ai,t)).on("focus"+O,_(t._tableFocus,t)).on("focusout"+O,_(t._tableBlur,t)).on("keydown"+O,t,_(t._tableKeyDown,t))}},_openHeaderMenu:function(e){e.altKey&&e.keyCode==p.DOWN&&(this.current().find(".k-grid-filter, .k-header-column-menu").click(),e.stopImmediatePropagation())},_setTabIndex:function(e){this._navigatableTables.attr(Oe,-1),e.attr(Oe,0)},_tableFocus:function(t){var n=this.current(),i=e(t.currentTarget);n&&n.is(":visible")?n.addClass(he):this._virtualColScroll?this._setCurrent(i.find(z),!0,!0):this._setCurrent(i.find(z)),this._setTabIndex(i)},_tableBlur:function(){var e=this.current();e&&e.removeClass(he)},_findCellIndex:function(e,t,n){var i,a;if(n)for(a=t;a>=0&&(i=a,e[a].hidden);a--);else for(a=t;a<e.length&&(i=a,e[a].hidden);a++);return i},_scrollToColumn:function(e,n){if(this._virtualCellIndex===t)return!1;var a=this,r=a._virtualCellIndex,o=En(wn(a.columns)),l=0;e==(vt?p.LEFT:p.RIGHT)&&r!==o.length-1?r=a._findCellIndex(o,r+1):e==(vt?p.RIGHT:p.LEFT)&&r?r=a._findCellIndex(o,r-1,!0):e==p.HOME?r=a._findCellIndex(o,0):e==p.END&&(r=a._findCellIndex(o,o.length-1,!0));for(var s=0;s<r;s++)l+=o[s].width;return a._virtualCellIndex=r,n&&(n.preventDefault(),n.stopPropagation()),i.scrollLeft(a.content,l),!0},_tableKeyDown:function(t){var n=this.current(),i=this.virtualScroll||{},a=this.virtualScrollable&&this.virtualScrollable.fetching(),r=e(t.target),o=!t.isDefaultPrevented()&&!r.is(":button,a,:input,a>.k-icon");if(a)t.preventDefault();else if((!i.columns||n&&document.body.contains(n[0])||!this._scrollToColumn(t.keyCode,t))&&(n||(n=e(this.lockedTable).add(this.options.scrollable?this.table:this.tbody).find(z).first()),n.length)){var l=!1;o&&t.keyCode==p.UP&&(l=this._moveUp(n,t.shiftKey)),o&&t.keyCode==p.DOWN&&(l=this._moveDown(n,t.shiftKey)),o&&t.keyCode==(vt?p.LEFT:p.RIGHT)&&(l=this._moveRight(n,t.altKey,t.shiftKey,t.ctrlKey,t.currentTarget)),o&&t.keyCode==(vt?p.RIGHT:p.LEFT)&&(l=this._moveLeft(n,t.altKey,t.shiftKey,t.ctrlKey,t.currentTarget)),o&&t.keyCode==p.PAGEDOWN&&(l=this._handlePageDown()),o&&t.keyCode==p.PAGEUP&&(l=this._handlePageUp()),o&&t.keyCode==p.HOME&&(l=this._handleHome(n,t.ctrlKey)),o&&t.keyCode==p.END&&(l=this._handleEnd(n,t.ctrlKey)),o&&t.keyCode==p.SPACEBAR&&(l=this._handleSpaceKey(n,t.ctrlKey)),t.keyCode!=p.ENTER&&t.keyCode!=p.F2||(l=this._handleEnterKey(n,t.currentTarget,r)),t.keyCode==p.ESC&&(l=this._handleEscKey(n,t.currentTarget)),t.keyCode==p.TAB&&(l=this._handleTabKey(n,t.currentTarget,t.shiftKey,r)),l&&(t.preventDefault(),t.stopPropagation())}},_moveLeft:function(t,n,i,a,r){var o,l,s=t.parent(),d=s.parent();return n?this.collapseRow(s):a&&t.is(".k-header")&&this.options.reorderable?this._moveColumn(t,!0):(l=d.find(M).index(s),(o=this._prevHorizontalCell(d,t,l))[0]||(i?this.lockedTable?(o=this._relatedRow(s),e.contains(this.lockedTable[0],s[0])&&(o=o.prevAll(A+":first")),o=o.children(E+":last")):o=this._tabNext(t,r,!0):(d=this._horizontalContainer(d),(o=this._prevHorizontalCell(d,t,l))[0]!==t[0]&&Jn(d.parent(),!0))),this._setCurrent(o)),!0},_moveRight:function(t,n,i,a,r){var o,l,s=t.parent(),d=s.parent();return n?this.expandRow(s):a&&t.is(".k-header")&&this.options.reorderable?this._moveColumn(t,!1):(l=d.find(M).index(s),(o=this._nextHorizontalCell(d,t,l))[0]||(i?this.lockedTable?(o=this._relatedRow(s),e.contains(this.table[0],s[0])&&(o=o.nextAll(A+":first")),o=o.children(E+":first")):o=this._tabNext(t,r,!1):(d=this._horizontalContainer(d,!0),(o=this._nextHorizontalCell(d,t,l))[0]!==t[0]&&Jn(d.parent(),!0))),this._setCurrent(o)),!0},_moveUp:function(e,t){var n,i=e.parent().parent();t?(n=(n=e.parent()).prevAll(A+":first"),n=e.parent().is(A)?n.children().eq(e.index()):n.children(E+":last")):(n=this._prevVerticalCell(i,e))[0]||(this._lastCellIndex=0,i=this._verticalContainer(i,!0),(n=this._prevVerticalCell(i,e))[0]&&Jn(i.parent(),!0));var a=this._lastCellIndex||0;return this._setCurrent(n),this._lastCellIndex=a,!0},_moveDown:function(e,t){var n,i=e.parent().parent();t?(n=(n=e.parent()).nextAll(A+":first"),n=e.parent().is(A)?n.children().eq(e.index()):n.children(E+":first")):(n=this._nextVerticalCell(i,e))[0]||(this._lastCellIndex=0,i=this._verticalContainer(i),(n=this._nextVerticalCell(i,e))[0]&&Jn(i.parent(),!0));var a=this._lastCellIndex||0;return this._setCurrent(n),this._lastCellIndex=a,!0},_moveColumn:function(t,n){var i=this.wrapper.data().kendoReorderable.element.find(this._draggableInstance.options.filter+":visible"),a=Gt(on(this.columns)),r=i.index(e(t)),o=n?-1:1,l=a[r],s=ln(a,this.columns,r,r+o);s>=0&&(this.reorderColumn(s,l,n),this.trigger(Me,{newIndex:s,oldIndex:r,column:l}))},_handleHome:function(e,t){var n,a=e.parent(),r=a.parent(),o=this.lockedTable&&this.lockedTable.children("tbody")[0]===r[0],l=r[0]===this.tbody[0];return this._hasVirtualColumns()?(this._scrollToColumn(i.keys.HOME),!0):(t?n=this.lockedTable?this.lockedTable.find(F+">"+R+":first"):this.table.find(F+">"+R+":first"):(l||o)&&(l&&this.lockedTable&&(a=this._relatedRow(a)),n=a.children(E+":first")),n&&n.length?(this._setCurrent(n),!0):void 0)},_handleEnd:function(e,t){var n,a=e.parent(),r=a.parent(),o=this.lockedTable&&this.lockedTable.children("tbody")[0]===r[0],l=r[0]===this.tbody[0];return this._hasVirtualColumns()?(this._scrollToColumn(i.keys.END),!0):(t?n=this.table.find(P+">"+R+":last"):(l||o)&&(!l&&this.lockedTable&&(a=this._relatedRow(a)),n=a.children(E+":last")),n&&n.length?(this._setCurrent(n),!0):void 0)},_handlePageDown:function(){return!!this.options.pageable&&(this.dataSource.page(this.dataSource.page()+1),!0)},_handlePageUp:function(){return!!this.options.pageable&&(this.dataSource.page(this.dataSource.page()-1),!0)},_handleTabKey:function(t,n,i,a){var r;return!(!this.options.editable||"incell"!=this._editMode()||t.is("th")||(this.options.scrollable?this._headertables.filter(n).length:this.thead.filter(a).length)||((r=e(s()).closest(".k-edit-cell"))[0]&&r[0]!==t[0]&&(t=r),(r=this._tabNext(t,n,i))[0]===t[0]||!r.length||(this._handleEditing(t,r,r.closest("table")),0)))},_handleEscKey:function(t,n){var i=s(),a="incell"==this._editMode();if(!si(t))return!!t.has(i).length&&(Jn(n,!0),!0);if(a)this.closeCell(!0);else{var r=e(t).parent().index();i&&i.blur(),this.cancelRow(!0),r>=0&&this._setCurrent(this.items().eq(r).children(R).first())}return Jn(n,!0),!0},_toggleCurrent:function(e,t,n){var i=e.parent();return!e.is(".k-command-cell")&&(i.is(".k-grouping-row")||!(t||!n))&&(i.find(".k-icon:first").click(),!0)},_handleSpaceKey:function(t,n){var a=this;if(n&&a.groupable&&t.hasClass("k-header")){var r=a.groupable.descriptors(),o=t.attr(i.attr("field")),l=a.groupable.aggregates(),s=t.attr(i.attr("title"))||o;return a.groupable._canDrag(t)?(r.push({field:o,dir:"asc",aggregates:l||[]}),s+=" "+a.options.messages.ungroupHeader):(r=e.grep(r,(function(e){return e.field!==o})),s+=" "+a.options.messages.groupHeader),t.attr("aria-label",s),a.dataSource.group(r),!0}},_handleEnterKey:function(t,n,i){var a,r=this.options.editable&&!1!==this.options.editable.update,o=i.closest("[role=gridcell]"),l=this._hasDetails();if(i.is("table")||e.contains(t[0],i[0])||(t=o),t.is("th"))return(a=t.find(".k-link")).length?a.click():t.find(ke).focus(),!0;if(this._toggleCurrent(t,r,l))return!0;var s=t.find(":kendoFocusable:first");return s[0]&&!t.hasClass("k-edit-cell")&&t.hasClass("k-state-focused")?(s.focus(),!0):!(!r||i.is(":button,.k-button,textarea")||(o[0]||(o=t),this._handleEditing(o,!1,n),0))},_nextHorizontalCell:function(e,t,n){var i=t.nextAll(E);if(!i.length){var a=e.find(M);if(-1==a.index(t.parent())){if(t.hasClass("k-header")){var r=[];return gn([_n(this.columns)[0]],An(a.eq(0).children(":visible").first()),r,0,0),r[n]?r[n][0]:t}return t.parent().hasClass("k-filter-row")?a.last().children(E).first():a.eq(n).children(E).first()}}return i.first()},_prevHorizontalCell:function(e,t,n){var i=t.prevAll(E);if(!i.length){var a=e.find(M);if(-1==a.index(t.parent())){if(t.hasClass("k-header")){var r=[],o=_n(this.columns);return gn([o[o.length-1]],An(a.eq(0).children().last()),r,0,0),r[n]?r[n][0]:t}return t.parent().hasClass("k-filter-row")?a.last().children(E).last():a.eq(n).children(E).last()}}return i.first()},_currentDataIndex:function(e,n){var i=n.attr("data-index");if(!i)return t;var a=_n(this.columns).length;return a&&!e.closest("div").hasClass("k-grid-content-locked")[0]?i-a:i},_prevVerticalCell:function(t,n){var i,a=n.parent(),r=t.children(M),o=r.index(a),l=this._currentDataIndex(t,n);if(l||n.hasClass("k-header"))return(i=Rn(n)).eq(i.length-2);if(l=Math.max(a.children(E).index(n),this._lastCellIndex||0),a.hasClass("k-filter-row"))return Mn(t).filter(Vt).eq(l);if(-1==o){if(this._hasVirtualColumns()&&(l=this._virtualCellIndex),!(a=t.find("tr.k-filter-row:visible"))[0])return(this._hasDetails()||n.parent().find(".k-hierarchy-cell").length)&&l&&l--,Mn(t).filter(Vt).eq(l)}else a=0===o?e():r.eq(o-1);return(i=a.children(E)).length>l?i.eq(l):i.eq(0)},_nextVerticalCell:function(e,n){var i,a,r=n.parent(),o=e.children(M),l=o.index(r),s=this._currentDataIndex(e,n),d=this.virtualScroll||{};if(-1!=l&&s===t&&n.hasClass("k-header"))return An(n).eq(1);s=s?parseInt(s,10):r.children(E).index(n),s=Math.max(s,this._lastCellIndex||0),-1==l?(r=o.eq(0),d.columns&&(a=parseInt(r.children().first().attr("colspan"),10),s=this._virtualCellIndex-(a>1?a:0)),(this._hasDetails()||r.find(".k-hierarchy-cell").length)&&s++):r=o.eq(l+n[0].rowSpan);var c=s;if(this._currentDataIndex(e,n)!==t)for(var u=r.children(":not(.k-group-cell):not(.k-hierarchy-cell)"),p=u.filter(":hidden"),h=0,f=p.length;h<f;h++)u.index(p[h])<s&&c--;return s=c,(i=r.children(E)).length>s?i.eq(s):i.eq(0)},_verticalContainer:function(e,t){var n=e.parent(),i=this._navigatableTables.length,a=Math.floor(i/2),r=b(n[0],this._navigatableTables);return t&&(a*=-1),((r+=a)>=0||r<i)&&(n=this._navigatableTables.eq(r)),n.find(t?">thead":">tbody")},_horizontalContainer:function(e,t){var n=this._navigatableTables.length;if(n<=2)return e;var i=e.parent(),a=b(i[0],this._navigatableTables);return a+=t?1:-1,!t||2!=a&&a!=n?!t&&(1==a||a<0)?e:this._navigatableTables.eq(a).find("thead, tbody"):e},_tabNext:function(e,t,n){var i=!0,a=n?e.prevAll(E+":first"):e.nextAll(":visible:first");if(!a.length){if(a=e.parent(),this.lockedTable&&(i=n&&t==this.lockedTable[0]||!n&&t==this.table[0],a=this._relatedRow(a)),i){if(this._hasVirtualColumns())return e;a=a[n?"prevAll":"nextAll"]("tr:not(.k-grouping-row):not(.k-detail-row):visible:first")}a=a.children(E+(n?":last":":first"))}return a},_handleEditing:function(t,n,i){var a,r,o=this,l=e(s()),d=o._editMode(),c=_t.msie,u=o._editContainer,p=o.options.editable&&!1!==o.options.editable.update;if(i=e(i),r="incell"==d?t.hasClass("k-edit-cell"):t.parent().hasClass("k-grid-edit-row"),o.editable){if(e.contains(u[0],l[0])&&(l.blur(),c&&l.blur()),!o.editable)return void Jn(i);if(!o.editable.end())return"incell"==d?o._setCurrent(u):o._setCurrent(u.children().filter(E).first()),void((a=u.find(":kendoFocusable:first")[0])&&a.focus());"incell"==d?o.closeCell():(o.saveRow(),r=!0)}n&&o._setCurrent(n),Jn(i,!0),p&&(!r&&!n||n)&&(d===je?e(o.current()).hasClass(I)||o.editCell(o.current()):o.editRow(o.current().parent()))},_wrapper:function(){var e=this,t=e.table,n=e.options.height,i=e.options.width,a=e.element;a.is("div")||(a=a.wrap("<div/>").parent()),e.wrapper=a.addClass("k-grid k-widget k-grid-display-block"),n&&(e.wrapper.css(Be,n),t.css(Be,"auto")),i&&e.wrapper.css("width",i),e._initMobile()},_initMobile:function(){var e=this.options,t=this;if(this._isMobile=!0===e.mobile&&i.support.mobileOS||"phone"===e.mobile||"tablet"===e.mobile,this._isMobile){var n=this.wrapper.addClass("k-grid-mobile").wrap("<div data-"+i.ns+'stretch="true" data-'+i.ns+'role="view" data-'+i.ns+'init-widgets="false"></div>').parent();this.pane=this._createPane(n),this.view=this.pane.view(),e.height?this.pane.element.parent().css(Be,e.height):this.pane.element.parent().css(Be,this.wrapper[0].style.height),this._editAnimation="slide",t.wrapper.on("transitionend"+O,(function(e){e.stopPropagation()})),t.wrapper.on("contextmenu"+O,"th a",(function(e){return e.preventDefault(),!1})),this.view.bind("showStart",(function(){t._isLocked()&&(t._updateTablesWidth(),t._applyLockedContainersWidth(),t._syncLockedContentHeight(),t._syncLockedHeaderHeight(),t._syncLockedFooterHeight())}))}},_createPane:function(e){return i.Pane.wrap(e,{viewEngine:{viewOptions:{renderOnInit:!0,wrap:!1,wrapInSections:!0,detachOnHide:!1,detachOnDestroy:!1}}})},_tbody:function(){var t,n=this,i=n.table;(t=i.find(">tbody")).length||(t=e("<tbody/>").appendTo(i)),n.tbody=t.attr("role","rowgroup")},_scrollable:function(){var t,n,a,r=this,o=r.options.scrollable,l=!0!==o&&o.virtual?oi(o.virtual):null,s=!i.support.kineticScrollNeeded||l&&l.rows?i.support.scrollbar():0;if(o){(t=r.wrapper.children(".k-grid-header"))[0]||(t=e('<div class="k-grid-header" />').insertBefore(r.table)),t.css(vt?"padding-left":"padding-right",o.virtual?s+1:s),(n=e('<table role="grid" />')).width(r.table[0].style.width),n.append(r.thead),t.empty().append(e('<div class="k-grid-header-wrap k-auto-scrollable" />').append(n)),r.content=r.table.parent(),r.virtualScroll=l,r.content.is(".k-virtual-scrollable-wrap, "+x+yt.scrollContainer)&&(r.content=r.content.parent()),r.content.is(".k-grid-content, .k-virtual-scrollable-wrap")||(r.content=r.table.wrap('<div class="k-grid-content k-auto-scrollable" />').parent()),l&&l.rows&&!r.virtualScrollable&&r._createVirtualScrollable(),l&&l.columns&&r.table.css({width:cn(Tn(Sn(r.columns)))}),a=t.children(".k-grid-header-wrap"),r.scrollables=a.add(r.content);var d=r.wrapper.find(".k-grid-footer");if(d.length&&(r.scrollables=r.scrollables.add(d.children(".k-grid-footer-wrap"))),a.unbind("scroll"+O).bind("scroll"+O,(function(e){r._scrollLeft!==this.scrollLeft&&i.scrollLeft(r.scrollables.not(e.currentTarget),this.scrollLeft)})),l&&l.rows)r.content.find(">.k-virtual-scrollable-wrap").unbind("scroll"+O).bind("scroll"+O,(function(){var e=this.scrollLeft!=r._scrollLeft;r._scrollLeft=this.scrollLeft,i.scrollLeft(r.scrollables,this.scrollLeft),r.lockedContent&&(r.lockedContent[0].scrollTop=this.scrollTop),l.columns&&e&&r.refresh()}));else{var c=o.endless,u=r.dataSource.options.pageSize;c&&(r._endlessPageSize=u),r.content.unbind("scroll"+O).bind("scroll"+O,(function(e){var t=this.scrollLeft!=r._scrollLeft;r._scrollLeft=this.scrollLeft,i.scrollLeft(r.scrollables.not(e.currentTarget),r._scrollLeft),r.lockedContent&&e.currentTarget==r.content[0]&&(r.lockedContent[0].scrollTop=this.scrollTop),c&&this.scrollTop+this.clientHeight-this.scrollHeight>=-10&&!r._endlessFetchInProgress&&r._endlessPageSize<r.dataSource.total()&&(r._skipRerenderItemsCount=r._endlessPageSize,r._endlessPageSize=r._endlessPageSize+u,r.dataSource.options.endless=!0,r._endlessFetchInProgress=!0,r.dataSource.pageSize(r._endlessPageSize)),l&&l.columns&&t&&(r._virtualColScroll=!0,r._cacheEditableState(),r.refresh(),r._restoreEditableState(),r._virtualColScroll=!1)}));var p=r.content.data("kendoTouchScroller");p&&p.destroy(),(p=i.touchScroller(r.content))&&p.movable&&(r.touchScroller=p,p.movable.bind("change",(function(e){i.scrollLeft(r.scrollables,-e.sender.x),r.lockedContent&&r.lockedContent.scrollTop(-e.sender.y)})),r.one(ie,(function(e){e.sender.wrapper.addClass("k-grid-backface")})))}}},_createVirtualScrollable:function(){var e=this;e.virtualScrollable&&e.virtualScrollable.destroy(),e.virtualScrollable=new St(e.content,{dataSource:e.dataSource,itemHeight:function(){return e._averageRowHeight()},page:function(){e._restoreEditableState()},scroll:function(){e._focusEditable()},loadStart:function(){e._progress(!0)},loadEnd:function(){e._progress(!1)}}),e.virtualScrollable.bind(se,_(e._onVirtualPaging,e))},_onVirtualPaging:function(){var e=this;e._cacheEditableState(),e._isVirtualIncellEditable()&&(e._shouldClearEditableState=!1,e.closeCell(),e._shouldClearEditableState=!0)},_isVirtualEditable:function(){return this._isVirtualIncellEditable()||this._isVirtualInlineEditable()||this._isVirtualPopupEditable()},_isVirtualInlineEditable:function(){return this.virtualScrollable&&this._editMode()===Ke},_isVirtualIncellEditable:function(){return this.virtualScrollable&&this._editMode()===je},_isVirtualPopupEditable:function(){return this.virtualScrollable&&"popup"===this._editMode()},_hasVirtualColumns:function(){return!!(this.virtualScroll||{}).columns},_scrollVirtualWrapper:function(){var e=this,t=e.virtualScrollable;(e._isVirtualInlineEditable()||e._isVirtualIncellEditable())&&(t._isScrolledToBottom()?t._scrollWrapperToBottom():t._isScrolledToTop()&&t._scrollWrapperToTop())},_scrollVirtualWrapperOnColumnResize:function(){var e=this.virtualScrollable;e&&e._scrollWrapperOnColumnResize()},_restoreEditableState:function(){var t,n,i=this,a=i._editableState||{},r=a.model,o=i.dataSource,l=i._isVirtualInlineEditable(),s=i._isVirtualIncellEditable(),d=i._hasVirtualColumns();(l||s||d)&&r&&o._getByUid(r.uid,o.view())&&(i._editMode()===Ke?(i._shouldClearEditableState=!1,i.editRow(r),d||i._focusEditable()):i._editMode()===je&&(t=i.tbody.children(xt($e,r.uid)),(n=e(t).children(xt(Ue,a.field)))[0]&&(i._shouldClearEditableState=!1,i.editCell(n),d||i._focusEditable()))),i._shouldClearEditableState=!0},_focusEditable:function(){var e=this,t=(e._editableState||{}).field,n=e._editContainer;n&&n.length&&!y(n[0],s())&&e._canFocusEditable()&&(e._isVirtualInlineEditable()||e._hasVirtualColumns()?n.find(xt(Ge,t)).find(fe).eq(0).focus():(e._isVirtualIncellEditable()||e._hasVirtualColumns())&&n.find(fe).eq(0).focus())},_canFocusEditable:function(){var e=this;return(e._isVirtualIncellEditable()||e._isVirtualInlineEditable()||e._hasVirtualColumns())&&(li((e.virtualScrollable||{}).wrapper,e._editContainer)||li(e.content,e._editContainer))},_cacheEditableState:function(){var t,n,a=this,r=a._editContainer,o=r?a._modelForContainer(r):null,l=a._isVirtualInlineEditable(),d=a._isVirtualIncellEditable(),c=a._hasVirtualColumns();(l||d||c)&&o&&(a._clearEditableState(),t=e(s()),r&&t[0]&&y(r[0],t[0])&&(t.change(),(n=i.widgetInstance(t,i.ui))&&w(n.value)&&t.is(Ze)&&(n.value(t.val()),n.trigger(J))),a._editMode()===Ke?a._editableState={model:o,field:t.closest("["+i.attr(Ge)+"]").attr(i.attr(Ge))}:a._editMode()===je&&(a._editableState={model:o,field:r.attr(i.attr(Ue))}))},_clearSortClasses:function(){var e=this,t=e.content||e.table,n=e.lockedContent;t&&t.find(L).removeClass(Ce),n&&n.find(L).removeClass(Ce)},_clearEditableState:function(){var e=this;(e.virtualScrollable||e.virtualScroll&&e._hasVirtualColumns())&&(e._editableState=null)},_destroyVirtualScrollable:function(){var e=this;e._clearEditableState(),e.virtualScrollable&&e.virtualScrollable.element&&e.virtualScrollable.destroy(),e.virtualScrollable=null},_renderNoRecordsContent:function(){var t=this;if(t.options.noRecords){var n=t.table.parent().children("."+be);n.length&&(t.angular("cleanup",(function(){return{elements:n.get()}})),n.remove()),t.dataSource&&t.dataSource.view().length||(n=e(t.noRecordsTemplate({})).insertAfter(t.table),t.angular("compile",(function(){return{elements:n.get(),data:[{}]}})))}},_setContentWidth:function(t){var n,a=this,r="k-grid-content-expander",o='<div class="'+r+'"></div>',l=a.resizable;a.options.scrollable&&a.wrapper.is(":visible")&&(n=a.table.parent().children("."+r),a._setContentWidthHandler=_(a._setContentWidth,a),a.dataSource&&a.dataSource.view().length?n[0]&&(n.remove(),l&&l.unbind("resize",a._setContentWidthHandler)):(n[0]||(n=e(o).appendTo(a.table.parent()),l&&l.bind("resize",a._setContentWidthHandler)),a.thead&&(n.width(a.thead.width()),isNaN(parseFloat(t,10))||i.scrollLeft(a.content,t))),a._applyLockedContainersWidth(),a._syncLockedContentHeight(),a.lockedHeader&&0===a.table[0].clientWidth&&(a.table[0].style.width="1px"))},_applyLockedContainersWidth:function(){if(this.options.scrollable&&this.lockedHeader){var e,t=this.thead.parent(),n=t.parent(),a=this.wrapper[0].clientWidth,r=this._groups(),o=i.support.scrollbar(),l=this.lockedHeader.find(">table>colgroup>col:not(.k-group-col, .k-hierarchy-col)"),s=t.find(">colgroup>col:not(.k-group-col, .k-hierarchy-col)"),d=un(l),u=un(s);r>0&&(d+=c(this.lockedHeader.find(".k-group-cell:first"))*r),d>=a&&(d=a-3*o),this.lockedHeader.add(this.lockedContent).width(d),n[0].style.width=n.parent().width()-d-2+"px",t.add(this.table).width(u),this.virtualScrollable&&!wt&&(a-=o),this.content[0].style.width=a-d-1+"px",this.lockedFooter&&this.lockedFooter.length&&(this.lockedFooter.width(d),(e=this.footer.find(".k-grid-footer-wrap"))[0].style.width=n[0].clientWidth+"px",e.children().first().width(u))}},_setContentHeight:function(){var e,t,n,a=this,r=a.options,o=a.wrapper.children(".k-grid-header"),l=i.support.scrollbar(),s=(r.scrollable||{}).height;r.scrollable&&a.wrapper.is(":visible")&&(s&&""===a.content[0].style.height&&(a.content[0].style.height=s),e=a.wrapper.innerHeight(),e-=u(o),a.pager&&a.pager.element.is(":visible")&&(e-=u(a.pager.element)),r.groupable&&(e-=u(a.wrapper.children(".k-grouping-header"))),r.toolbar&&(e-=u(a.wrapper.children(".k-grid-toolbar"))),a.footerTemplate&&(e-=u(a.wrapper.children(".k-grid-footer"))),((t=a.wrapper)[0].style.height||(n=t.height(),t.height("auto"),n!=t.height()?(t.height(""),1):(t.height(""),0)))&&(e>2*l?(a.lockedContent&&(l=a.table[0].offsetWidth>a.table.parent()[0].clientWidth?l:0,a.lockedContent.height(e-l)),a.content.height(e)):a.content.height(2*l+1)))},_averageRowHeight:function(){var e=this,t=e._items(e.tbody,!0).length,n=e._rowHeight;if(0===t)return n;e._rowHeight||(e._rowHeight=n=u(e.table)/t,e._sum=n,e._measures=1);var i=u(e.table)/t;return n!==i&&(e._measures++,e._sum+=i,e._rowHeight=e._sum/e._measures),n},_dataSource:function(){var e,n=this,i=n.options,a=i.dataSource;a=k(a)?{data:a}:a,h(a)&&(f(a,{table:n.table,fields:n.columns}),e=i.pageable,h(e)&&e.pageSize!==t&&(a.pageSize=e.pageSize)),n.dataSource&&n._refreshHandler?n.dataSource.unbind(J,n._refreshHandler).unbind(T,n._progressHandler).unbind(H,n._errorHandler).unbind(et,n._sortHandler):(n._refreshHandler=_(n.refresh,n),n._progressHandler=_(n._requestStart,n),n._errorHandler=_(n._error,n),n._sortHandler=_(n._clearSortClasses,n)),n.dataSource=r.create(a).bind(J,n._refreshHandler).bind(T,n._progressHandler).bind(H,n._errorHandler).bind(et,n._sortHandler)},_error:function(){this._progress(!1)},_requestStart:function(){this._progress(!0)},_modelChange:function(t){var n,r,o,l,s,d,c,u,p,h=this,f=h.tbody,g=t.model,m=h.tbody.find("tr["+i.attr("uid")+"="+g.uid+"]"),k=m.hasClass("k-alt"),b=h._items(f).index(m),v=h.lockedContent;if(v&&(n=h._relatedRow(m)),m.add(n).children(".k-edit-cell").length&&!h.options.rowTemplate)m.add(n).children(":not(.k-group-cell,.k-hierarchy-cell)").each((function(){r=e(this),(o=En(h.columns)[h._calculateColumnIndex(r)]).field===t.field&&(r.hasClass("k-edit-cell")?r.addClass("k-dirty-cell"):h._displayCell(r,o,g))}));else if(!m.hasClass("k-grid-edit-row")){d=e().add(m),v&&(l=(k?h.lockedAltRowTemplate:h.lockedRowTemplate)(g),d=d.add(n),n.replaceWith(l)),h.angular("cleanup",(function(){return{elements:d.get()}})),l=(k?h.altRowTemplate:h.rowTemplate)(g),m.replaceWith(l),l=h._items(f).eq(b);var _=[{dataItem:g}];for(v&&(m=m.add(n),n=h._relatedRow(l)[0],Yn(l[0],n),l=l.add(n),_.push({dataItem:g})),h.angular("compile",(function(){return{elements:l.get(),data:_}})),((s=h.options.selectable)||h._checkBoxSelection)&&m.hasClass("k-state-selected")&&h.select(l),u=d.children(":not(.k-group-cell,.k-hierarchy-cell)"),c=l.children(":not(.k-group-cell,.k-hierarchy-cell)"),b=0,p=h.columns.length;b<p;b++)o=h.columns[b],r=c.eq(b),s&&u.eq(b).hasClass("k-state-selected")&&r.addClass("k-state-selected");h.trigger("itemChange",{item:l,data:g,ns:a})}},_pageable:function(){var t,a=this,r=a.options.pageable;r&&((t=a.wrapper.children("div.k-grid-pager")).length||(t=e('<div class="k-pager-wrap k-grid-pager"/>')),"top"===r.position?t.prependTo(a.wrapper).addClass("k-grid-pager-top"):t.appendTo(a.wrapper),a.pager&&a.pager.destroy(),"object"==typeof r&&r instanceof i.ui.Pager?a.pager=r:a.dataSource._groupPaging?a.pager=new n(t,f({},r,{dataSource:a.dataSource})):a.pager=new i.ui.Pager(t,f({},r,{dataSource:a.dataSource})),a.pager.bind("pageChange",(function(e){a.trigger("page",{page:e.index})&&e.preventDefault()})),a._togglePagerVisibility())},_footer:function(){var t,n=this,a=n.dataSource.aggregates(),r="",o=n.footerTemplate,l=n.options,s=n.footer||n.wrapper.find(".k-grid-footer");if(o){if(r=e(n._wrapFooter(o(a))),s.length){var d=r;n.angular("cleanup",(function(){return{elements:s.get()}})),s.replaceWith(d),s=n.footer=d}else s=l.scrollable?n.footer=l.pageable&&"top"!==l.pageable.position?r.insertBefore(n.wrapper.children("div.k-grid-pager")):r.appendTo(n.wrapper):n.footer=r.insertBefore(n.tbody);n.angular("compile",(function(){return{elements:s.find("td:not(.k-group-cell, .k-hierarchy-cell)").get(),data:g(n.columns,(function(e){return{column:e,aggregate:a[e.field]}}))}}))}else s&&!n.footer&&(n.footer=s);if(s.length&&(l.scrollable&&(t=s.attr("tabindex",-1).children(".k-grid-footer-wrap"),n.scrollables=e(n.scrollables.filter((function(){return!e(this).is(".k-grid-footer-wrap")})).toArray()).add(t)),n._footerWidth&&s.find("table").css("width",n._footerWidth),t)){var c=i.scrollLeft(n.content);!0!==l.scrollable&&n.virtualScroll&&n.virtualScroll.rows&&(c=i.scrollLeft(n.wrapper.find(".k-virtual-scrollable-wrap"))),i.scrollLeft(t,c)}n.lockedContent&&(n._appendLockedColumnFooter(),n._applyLockedContainersWidth(),n._syncLockedFooterHeight())},_wrapFooter:function(t){var n=this,a="",r=i.support.mobileOS?0:i.support.scrollbar();return n.options.scrollable?(a=e('<div class="k-grid-footer"><div class="k-grid-footer-wrap"><table><tbody>'+t+"</tbody></table></div></div>"),n._appendCols(a.find("table")),a.css(vt?"padding-left":"padding-right",r),a):'<tfoot class="k-grid-footer">'+t+"</tfoot>"},_columnMenu:function(){var e,n,a,r,o,l,s=this,d=En(s.columns),c=s.options,u=c.columnMenu,p=m(s.columns,(function(e){return e.columns!==t})).length>0,h=m(s.columns,(function(e){return!1!==e.lockable})).length>0,g=m(s.columns,(function(e){return!0===e.stickable})).length>0,k=this._isMobile,b=function(e){s.trigger($,{field:e.field,container:e.container})},v=function(e){s.trigger(Y,{field:e.field,container:e.container})},_=function(e){Jn(e.closest("table"),!0)},w=function(e){s.trigger(Le,{column:e.column})},C=function(e){s.trigger(Fe,{column:e.column})},y=function(e){s.trigger("sort",{sort:e.sort})?e.preventDefault():(s._clearEditableState(),s.dataSource.options.endless&&(s.dataSource.options.endless=null,s._endlessPageSize=s.dataSource.options.pageSize,s.dataSource.pageSize(s.dataSource.options.pageSize)))},S=function(e){s.trigger("filter",{filter:e.filter,field:e.field})?e.preventDefault():(s._clearEditableState(),s.dataSource.options.endless&&(s.dataSource.options.endless=null,s._endlessPageSize=s.dataSource.options.pageSize,s.dataSource.pageSize(s.dataSource.options.pageSize)))},x=c.$angular;if(u){"boolean"==typeof u&&(u={}),s._setColumnsMediaVisibility(d);for(var T=0,H=(l=Mn(s.thead)).length;T<H;T++){n=d[T];var I=l.eq(T);n.command||!n.field&&!I.attr("data-"+i.ns+"field")||((e=I.data("kendoColumnMenu"))&&e.destroy(),r=!1!==n.sortable&&!1!==u.sortable&&!1!==c.sortable&&f({},c.sortable,{compare:(n.sortable||{}).compare}),o=!(!c.filterable||!1===n.filterable||!1===u.filterable)&&f({pane:s.pane},c.filterable,n.filterable),n.filterable&&n.filterable.dataSource&&(o.forceUnique=!1,o.checkSource=n.filterable.dataSource),o&&(o.format=n.format),a={dataSource:s.dataSource,values:n.values,columns:u.columns,sortable:r,filterable:o,messages:u.messages,owner:s,closeCallback:_,init:b,open:v,stick:w,unstick:C,pane:s.pane,sort:y,filtering:S,filter:k?":not(.k-column-active)":"",hasLockableColumns:_n(d).length>0&&h&&!p,hasStickableColumns:g&&!p,encodeTitles:s.options.encodeTitles,componentType:u.componentType},x&&(a.$angular=x),I.kendoColumnMenu(a))}}},_headerCells:function(){return e(this.thead).find("th").filter((function(){var t=e(this);return!t.hasClass("k-group-cell")&&!t.hasClass("k-hierarchy-cell")}))},_filterable:function(){var e,t,n,a=this,r=En(a.columns),o=function(e){a.trigger(K,{field:e.field,container:e.container})},l=function(e){Jn(e.closest("table"),!0)},s=function(e){a.trigger("filter",{filter:e.filter,field:e.field})?e.preventDefault():(a._clearEditableState(),a.dataSource.options.endless&&(a.dataSource.options.endless=null,a._endlessPageSize=a.dataSource.options.pageSize,a.dataSource.pageSize(a.dataSource.options.pageSize)))},d=function(e){a.trigger(Q,{field:e.field,container:e.container})},c=a.options.filterable;if(c&&typeof c.mode==We&&-1==c.mode.indexOf("menu")&&(c=!1),c&&!a.options.columnMenu)for(var u=0,p=(t=Mn(a.thead)).length;u<p;u++)if(n=t.eq(u),!1!==r[u].filterable&&!r[u].command&&(r[u].field||n.attr("data-"+i.ns+"field"))){(e=n.data("kendoFilterMenu"))&&e.destroy(),(e=n.data("kendoFilterMultiCheck"))&&e.destroy();var h=r[u].filterable,g=f({},c,h,{dataSource:a.dataSource,values:r[u].values,format:r[u].format,closeCallback:l,title:r[u].title||r[u].field,init:o,open:d,pane:a.pane,change:s});h&&h.messages&&(g.messages=f(!0,{},c.messages,h.messages)),h&&h.dataSource&&(g.forceUnique=!1,g.checkSource=h.dataSource),h&&h.multi?n.kendoFilterMultiCheck(g):n.kendoFilterMenu(g)}},_filterRow:function(){var t=this;if(t._hasFilterRow()){var n,a=t.options.$angular,o=En(t.columns),l=t.options.filterable,s=t.thead.find(".k-filter-row"),d=function(e){t.trigger("filter",{filter:e.filter,field:e.field})?e.preventDefault():(t._clearEditableState(),t.dataSource.options.endless&&(t.dataSource.options.endless=null,t._endlessPageSize=t.dataSource.options.pageSize,t.dataSource.pageSize(t.dataSource.options.pageSize)))};this._updateHeader(this.dataSource.group().length);for(var c=0;c<o.length;c++){var u,p=o[c],h=t.options.filterable.operators,g=!1,m=e("<th/>"),k=p.field;if(p.hidden&&m.hide(),s.append(m),k&&!1!==p.filterable){var b=p.filterable&&p.filterable.cell||{};(u=t.options.dataSource)instanceof r&&(u=t.options.dataSource.options);var v=f(!0,{},l.messages);if(p.filterable&&f(!0,v,p.filterable.messages),!1===b.enabled){m.html("&nbsp;");continue}b.dataSource&&(u=b.dataSource,g=!0),p.filterable&&p.filterable.operators&&(h=p.filterable.operators),n={column:p,dataSource:t.dataSource,suggestDataSource:u,customDataSource:g,field:k,messages:v,values:p.values,template:b.template,delay:b.delay,inputWidth:b.inputWidth,suggestionOperator:b.suggestionOperator,minLength:b.minLength,dataTextField:b.dataTextField,operator:b.operator,operators:h,showOperators:b.showOperators,change:d},a&&(n.$angular=a),e("<span/>").attr(i.attr("field"),k).appendTo(m).kendoFilterCell(n)}else m.html("&nbsp;")}}},_sortable:function(){var e,t,n,a=this,r=En(a.columns),o=a.options.sortable,l=function(e){a.trigger("sort",{sort:e.sort})?e.preventDefault():a._clearEditableState()};if(o){for(var s=Mn(a.thead),d=0,c=s.length;d<c;d++)!1!==(e=r[d]).sortable&&!e.command&&e.field&&((t=(n=s.eq(d)).data("kendoColumnSorter"))&&t.destroy(),n.attr("data-"+i.ns+"field",e.field).kendoColumnSorter(f({},o,e.sortable,{dataSource:a.dataSource,aria:!0,filter:":not(.k-column-active)",change:l})));s=null}},_columns:function(t){var n,a,r=this,o=r.table,l=o.find("col"),s=r.element.find("thead tr"),d=r.options.dataSource;if(t=t.length?t:g(o.find("th:not(.k-group-cell):not(.k-hierarchy-cell)"),(function(t,n){var a=(t=e(t)).attr(i.attr("sortable")),r=t.attr(i.attr("filterable")),o=t.attr(i.attr("type")),s=t.attr(i.attr("groupable")),d=t.attr(i.attr("field")),c=t.attr(i.attr("title")),u=t.attr(i.attr("menu"));return d||(d=t.text().replace(/\s|[^A-z0-9]/g,"")),{field:d,type:o,title:c,sortable:"false"!==a,filterable:"false"!==r,groupable:"false"!==s,menu:"false"!==u,template:t.attr(i.attr("template")),width:l.eq(n).css("width")}})),n=!(r.table.find("tbody tr").length>0&&(!d||!d.transport)),r.options.scrollable){var c=t;if(a=_n(t),t=wn(t),a.length>0&&0===t.length)throw new Error("There should be at least one non locked column");Bn(r.element.find("tr:has(th):first"),c),t=a.concat(t)}s.length&&t.length&&r._updateColumnIDs(t,s.first()),r.columns=At(t,n),e.grep(En(r.columns),(function(e){return e.selectable})).length&&(r._selectedIds={},r._checkBoxSelection=!0,r.wrapper.on(ze+O,"tbody > tr "+ke,_(r._checkboxClick,r)),r.wrapper.on(ze+O,"thead > tr "+ke,_(r._headerCheckboxClick,r))),r._foreignKeyBindings(r.columns)},_foreignKeyBindings:function(e){for(var t,n=this,i=e.length,a=0;a<i;a++)(t=e[a]).dataSource&&n._fetchForeignKeyValues(t)},_fetchForeignKeyValues:function(t){var n=this,i=e.Deferred();n._hasBoundForeignKey=!0,t.dataSource=r.create(t.dataSource),n._foreignKeyPromises||(n._foreignKeyPromises=[]),n._foreignKeyPromises.push(i),t.dataSource.fetch().then((function(){var e=t.dataSource.data();t.values=e.map((function(e){return{value:e[t.dataValueField],text:e[t.dataTextField]}})),i.resolve()}))},_updateColumnIDs:function(e,t){if(e.length){for(var n,i=t.find("th:not(.k-group-cell):not(.k-hierarchy-cell)"),a=0;a<e.length;a++)(n=i.eq(a).attr("id"))&&(e[a].headerAttributes=f(e[a].headerAttributes,{id:n}));this._updateColumnIDs(Hn(e),t.next())}},_headerCheckboxClick:function(t){var n=this,i=e(t.target),a=i.prop("checked");n._belongsToGrid(i)&&(a?n.select(n.items()):n.clearSelection())},_checkboxClick:function(t){var n=this,i=e(t.target).closest("tr"),a=!i.hasClass(ge);n._belongsToGrid(i)&&(a?n.select(i):n._deselectCheckRows(i))},_groups:function(){var e=this.dataSource.group();return e?e.length:0},_tmpl:function(e,t,n,a){var r,o,l,s=this,d=f({},i.Template,s.options.templateSettings),c=d.paramName,u=t.length,p={storage:{},count:0},h=s._hasDetails(),g=[],m=s._groups(),k=s.options.navigatable,b=i.attr("field"),v="";if(!e){for(e="<tr",n&&g.push("k-alt"),g.push("k-master-row"),g.length&&(e+=' class="'+g.join(" ")+'"'),u&&(e+=" "+i.attr("uid")+'="#='+i.expr("uid",d.paramName)+'#"'),e+=" role='row'>",m>0&&!a&&(e+=Tt(m)),h&&(e+='<td class="k-hierarchy-cell" aria-expanded="false"><a class="k-icon k-i-expand" href="\\#" '+st+'="'+lt+'" tabindex="-1"></a></td>'),r=0;r<u;r++)(o=t[r]).template,l=o.field,s._editMode()===je&&l&&(o.attributes=o.attributes||{},s.virtualScroll&&(o.attributes[b]=l),v=s._dirtyCellTemplate(l,c),o.attributes.class=o.attributes.class||"",o.attributes.class.indexOf(v)<0&&(o.attributes.class+=v)),o.colSpan&&o.colSpan>0&&Pn(o.attributes)?o.attributes=zn(o.attributes):!o.colSpan&&o.hidden&&(o.attributes=Fn(o.attributes)),o.command&&(o.attributes=o.attributes||{},void 0!==o.attributes.class?o.attributes.class+=" k-command-cell":o.attributes.class="k-command-cell"),e+="<td"+Ht(o.attributes),k&&(e+=" aria-describedby='"+o.headerAttributes.id+"'"),o.colSpan&&(o.colSpan>1&&(e+=" "+i.attr("virtual")),e+=" colSpan='"+o.colSpan+"'"),e+=" role='gridcell'>",e+=s._cellTmpl(o,p),e+="</td>";e+="</tr>"}return e=i.template(e,d),p.count>0?_(e,p.storage):e},_dirtyCellTemplate:function(e,t){return e&&t?"#= "+t+" && "+t+".dirty && "+t+".dirtyFields && "+("["===e.charAt(0)?i.expr(e,t+".dirtyFields"):t+".dirtyFields['"+e+"']")+" ? ' k-dirty-cell' : '' #":""},_headerCellText:function(e){var t=this,n=f({},i.Template,t.options.templateSettings),a=e.headerTemplate,r=typeof a,o=e.title&&(t.options.encodeTitles?fi(e.title):e.title)||e.field||"";return r===Ve?o=i.template(a,n)({}):r===We&&(o=a),o},_cellTmpl:function(e,t){var n,a,r=this,o=f({},i.Template,r.options.templateSettings),l=e.template,s=o.paramName,d=e.field,c="",u=e.format,p=typeof l,g=e.values;if(e.command){if(k(e.command)){for(n=0,a=e.command.length;n<a;n++)e.command[n].visible?c+=i.format("#= {0}(data)? '{1}':'' #",e.command[n].visible,r._createButton(e.command[n]).replace(ct,"\\#").replace(/'/gi,"\\'")):c+=r._createButton(e.command[n]).replace(ct,"\\#");return c}return r._createButton(e.command).replace(ct,"\\#")}return e.selectable?kt:(c+=r._dirtyIndicatorTemplate(d,s),p===Ve?(t.storage["tmpl"+t.count]=l,c+="#=this.tmpl"+t.count+"("+s+")#",t.count++):p===We?c+=l:g&&g.length&&h(g[0])&&"value"in g[0]&&d?(c+="#var v ="+i.stringify(On(g)).replace(ct,"\\#")+"#",c+="#var f = v[",o.useWithBlock||(c+=s+"."),c+=d+"]#",c+="${f != null ? f : ''}"):(c+=e.encoded?"#:":"#=",u&&(c+='kendo.format("'+u.replace(dt,"\\$1")+'",'),c+=d?(d=i.expr(d,s))+"==null?'':"+d:"''",u&&(c+=")"),c+="#"),c)},_dirtyIndicatorTemplate:function(e,t){return e&&t?"#= "+t+" && "+t+".dirty && "+t+".dirtyFields && "+("["===e.charAt(0)?i.expr(e,t+".dirtyFields"):t+".dirtyFields['"+e+"']")+" ? '<span class=\"k-dirty\"></span>' : '' #":""},_virtualCols:function(t){var n,a=this,r=e.map(t,(function(e){return e.hidden?0:parseInt(e.width,10)})),o=a.virtualScrollable?i.scrollLeft(a.content.find(">.k-virtual-scrollable-wrap")):i.scrollLeft(a.content),l=c(a.content),s=cn(t),d=[],u=0,p=0,h=0,f=0,g=0;for(f=0;f<t.length;f++){if(n=f<r.length-1?r[f+1]:0,!(g+r[f]+2*n<o)){u=1+h;break}r[f]&&h++,g+=r[f]}h=0,g=0;for(var m=t.length-1;m>=0;m--){if(!(g+3*r[m]<s-l-o)){p=1+h;for(var k=f;k<=m;k++)t[k].locked||(d.push(t[k]),t[k].colSpan&&delete t[k].colSpan);d[0].colSpan=u,d[d.length-1].colSpan=p;break}r[m]&&h++,g+=r[m]}return d[0].hidden&&d[0].colSpan--,a.virtualCols=d,d},_templates:function(){var t=this,n=t.options,i=t.dataSource,a=i.group(),r=t.footer||t.wrapper.find(".k-grid-footer"),o=i.aggregate(),l=En(t.columns),s=En(_n(t.columns)),d=n.scrollable?En(wn(t.columns)):l,c=(t.virtualScroll||{}).columns?t._virtualCols(d):d,u=m(Gt(s),(function(e,t){return e.groupHeaderColumnTemplate&&0!==t})),p=m(Gt(c),(function(e){return e.groupHeaderColumnTemplate}));if(n.scrollable&&s.length){if(n.rowTemplate||n.altRowTemplate)throw new Error("Having both row template and locked columns is not supported");t.rowTemplate=t._tmpl(n.rowTemplate,c,!1,!0),t.altRowTemplate=t._tmpl(n.altRowTemplate||n.rowTemplate,c,!0,!0),t.lockedRowTemplate=t._tmpl(n.rowTemplate,s),t.lockedAltRowTemplate=t._tmpl(n.altRowTemplate||n.rowTemplate,s,!0)}else t.rowTemplate=t._tmpl(n.rowTemplate,c),t.altRowTemplate=t._tmpl(n.altRowTemplate||n.rowTemplate,c,!0);t._hasDetails()&&(t.detailTemplate=t._detailTmpl(n.detailTemplate||"")),(t._group&&!C(o)||!C(o)&&!r.length||m(l,(function(e){return e.footerTemplate})).length)&&(t.footerTemplate=t._footerTmpl(l,o,"footerTemplate","k-footer-template")),a&&m(l,(function(e){return e.groupFooterTemplate})).length&&(o=e.map(a,(function(e){return e.aggregates})),t.groupFooterTemplate=t._footerTmpl(c,o,"groupFooterTemplate","k-group-footer",s.length),n.scrollable&&s.length&&(t.lockedGroupFooterTemplate=t._footerTmpl(s,o,"groupFooterTemplate","k-group-footer"))),a&&(u.length||p.length)?(o=e.map(a,(function(e){return e.aggregates})),t.groupHeaderColumnTemplate=t._groupHeaderTmpl(Gt(c),o,"groupHeaderColumnTemplate","k-grouping-row",s.length,p),n.scrollable&&s.length&&(t.lockedGroupHeaderColumnTemplate=t._groupHeaderTmpl(Gt(s),o,"groupHeaderColumnTemplate","k-grouping-row",0,u))):(t.groupHeaderColumnTemplate=null,t.lockedGroupHeaderColumnTemplate=null),t.options.noRecords&&(t.noRecordsTemplate=t._noRecordsTmpl())},_noRecordsTmpl:function(){var t,n,a,r='<div class="{0}">{1}</div>',o='<div class="k-grid-norecords-template"{1}>{0}</div>',l=this.options.scrollable&&!this.wrapper[0].style.height?' style="margin:0 auto;position:static;"':"",s={storage:{},count:0},d=e.extend({},i.Template,this.options.templateSettings),c=d.paramName,u="";return"function"==(n=typeof(t=this.options.noRecords.template?this.options.noRecords.template:i.format(o,this.options.messages.noRecords,l)))?(s.storage["tmpl"+s.count]=t,u+="#=this.tmpl"+s.count+"("+c+")#",s.count++):"string"===n&&(u+=t),a=i.template(i.format(r,be,u),d),s.count>0&&(a=e.proxy(a,s.storage)),a},_footerTmpl:function(e,t,n,a,r){var o,l,s,d,c,u=this,p=f({},i.Template,u.options.templateSettings),h=p.paramName,g="",m={},k=0,b={},v=u._groups(),w=u.dataSource._emptyAggregates(t);for(g+='<tr class="'+a+'">',v>0&&!r&&(g+=Tt(v)),u._hasDetails()&&(g+='<td class="k-hierarchy-cell">&nbsp;</td>'),o=0,l=e.length;o<l;o++)d=typeof(s=(c=e[o])[n]),g+="<td"+Ht(c.footerAttributes)+">",s?(d!==Ve&&(b=w[c.field]?f({},p,{paramName:h+"['"+c.field+"']"}):{},s=i.template(s,b)),m["tmpl"+k]=s,g+="#=this.tmpl"+k+"("+h+")#",k++):g+="&nbsp;",g+="</td>";return g+="</tr>",g=i.template(g,p),k>0?_(g,m):g},_groupHeaderTmpl:function(e,t,n,a,r,o){var l,s,d,c,u,p,h=this,g=f({},i.Template,h.options.templateSettings),m=g.paramName,k="",v={},w=0,C={},y=h.dataSource._emptyAggregates(t),S=o.length?b(o[0],e):-1;if(k+='<tr role="row" class="'+a+'">',r||(k+='# for (var i = 0; i < data.groupCells; i++) { #<td class="k-group-cell">&nbsp;</td># } #'),h._hasDetails()&&(k+='<td class="k-hierarchy-cell">&nbsp;</td>'),!(S<0)){if(S<Qe&&o.length<=1&&!r)return k+=r?"":di(e.length),i.template(k,g);for(S<Qe?(S=r?0:1,k+=r?"":di(S)):k+=r?ci(S):di(S),l=S,s=e.length;l<s;l++)c=typeof(d=(u=e[l])[n]),u.sticky?((p=u.groupHeaderColumnTemplateClass||"")||(p=u.groupHeaderColumnTemplateClass="group-header-column-template-"+i.guid()),k+="<td class='"+xe+" "+p+"' style='"+(u.stickyStyle||"")+"'>"):k+="<td>",d?(c!==Ve&&(C=y[u.field]?f({},g,{paramName:m+"['"+u.field+"']"}):{},d=i.template(d,C)),v["tmpl"+w]=d,k+="#=this.tmpl"+w+"("+m+")#",w++):k+="&nbsp;",k+="</td>";return k+="</tr>",k=i.template(k,g),w>0?_(k,v):k}k+=r?"":di(e.length)},_detailTmpl:function(e){var t=this,n="",a=f({},i.Template,t.options.templateSettings),r=a.paramName,o={},l=0,s=t._groups(),d=Gt(En(t.columns)).length,c=typeof e;return n+='<tr class="k-detail-row">',s>0&&(n+=Tt(s)),n+='<td class="k-hierarchy-cell"></td><td class="k-detail-cell"'+(d?' colspan="'+d+'"':"")+">",c===Ve?(o["tmpl"+l]=e,n+="#=this.tmpl"+l+"("+r+")#",l++):n+=e,n+="</td></tr>",n=i.template(n,a),l>0?_(n,o):n},_hasDetails:function(){var e=this;return null!==e.options.detailTemplate||(e._events[j]||[]).length},_hasFilterRow:function(){var t=this.options.filterable,n=t&&typeof t.mode==We&&-1!=t.mode.indexOf("row"),i=this.columns,a=e.grep(i,(function(e){return!1===e.filterable}));return i.length&&a.length==i.length&&(n=!1),n},_details:function(){var t=this;if(t.options.scrollable&&t._hasDetails()&&_n(t.columns).length)throw new Error("Having both detail template and locked columns is not supported");t.table.on(ze+O,".k-hierarchy-cell .k-i-expand, .k-hierarchy-cell .k-i-collapse",(function(n){var i=e(this);return t._toggleDetails(i),n.preventDefault(),!1}))},_toggleDetails:function(t,n){var i,a,r=this,o=t.closest("td.k-hierarchy-cell"),l=t.hasClass("k-i-expand"),s=t.closest("tr.k-master-row"),d=r.detailTemplate,c=r._hasDetails(),u=l?ot:lt,p=!!l;t.toggleClass("k-i-expand",!l).toggleClass("k-i-collapse",l).attr(st,u),o.attr("aria-expanded",p),i=s.next(),c&&!i.hasClass("k-detail-row")&&(a=r.dataItem(s),i=e(d(a)).addClass(s.hasClass("k-alt")?"k-alt":"").insertAfter(s),r.angular("compile",(function(){return{elements:i.get(),data:[{dataItem:a}]}})),r.trigger(j,{masterRow:s,detailRow:i,data:a,detailCell:i.find(".k-detail-cell")})),r.trigger(l?ae:re,{masterRow:s,detailRow:i}),n?hi(i,l):i.toggle(l)},dataItem:function(t){if(!(t=e(t)[0]))return null;var n,i,a=this.tbody.children(),r=/k-grouping-row|k-detail-row|k-group-footer/,o=t.sectionRowIndex;for(i=o,n=0;n<o;n++)r.test(a[n].className)&&i--;return this._data[i]},expandRow:function(t,n){var i=e(t).find("> td .k-i-expand");i.length&&this._toggleDetails(i,n)},collapseRow:function(t,n){var i=e(t).find("> td .k-i-collapse");i.length&&this._toggleDetails(i,n)},_createHeaderCells:function(e,n){var a,r,o,l,s,d,c=this,u="",p=c.options.messages,h=En(c.columns),f=c.dataSource.group();for(a=0,l=e.length;a<l;a++){r=e[a].column||e[a],o=c._headerCellText(r),s=r.title,d="";var g=b(r,h);r.selectable?(u+="<th scope='col'"+Ht(r.headerAttributes),n&&!e[a].colSpan&&(u+=" rowspan='"+n+"'"),g>-1&&(u+=i.attr("index")+"='"+g+"'"),u+=">"+(o=r.headerTemplate?o:i.template(bt)({}))+"</th>"):r.command?(u+="<th scope='col'"+Ht(r.headerAttributes),n&&!e[a].colSpan&&(u+=" rowspan='"+n+"'"),g>-1&&(u+=i.attr("index")+"='"+g+"'"),u+=">"+o+"</th>"):(r.field&&(d=i.attr("field")+"='"+r.field+"' "),u+="<th scope='col' role='columnheader' "+d,u+=" aria-haspopup='true'",n&&!e[a].colSpan&&(u+=" rowspan='"+n+"'"),e[a].colSpan>1?(u+='colspan="'+(e[a].colSpan-dn(r.columns))+'" ',u+=i.attr("colspan")+"='"+e[a].colSpan+"'"):1===e[a].colSpan&&(u+=i.attr("colspan")+"='"+e[a].colSpan+"'"),s&&(s=s&&(c.options.encodeTitles?fi(s,!0):s),u+=i.attr("title")+'="'+s+'" '),r.groupable!==t&&(u+=i.attr("groupable")+"='"+r.groupable+"' "),ei(c,r)&&(u+="aria-label='"+(s||r.field)+" ",u+=ti(f,r.field)?p.ungroupHeader:p.groupHeader,u+="' "),r.aggregates&&r.aggregates.length&&(u+=i.attr("aggregates")+"='"+r.aggregates+"'"),g>-1&&(u+=i.attr("index")+"='"+g+"'"),u+=Ht(r.headerAttributes),u+=">"+o+"</th>")}return u},_appendLockedColumnContent:function(){var t,n,i,a,r,o=this.columns,l=this.table.find("colgroup"),s=l.find(L),d=e(),c=0,u=0;for(t=0,n=o.length;t<n;t++)if(o[t].locked)if(Nt(o[t])){for(a=1,o[t].columns&&(a=En(o[t].columns).length-dn(o[t].columns)),a=a||1,r=0;r<a;r++)d=d.add(s.eq(t+u+r-c));u+=a-1}else c++;i=e('<div class="k-grid-content-locked"><table><colgroup></colgroup><tbody></tbody></table></div>'),l.detach(),i.find("colgroup").append(d),l.insertBefore(this.table.find("tbody")),this.lockedContent=i.insertBefore(this.content),this.lockedTable=i.children("table")},_appendLockedColumnFooter:function(){var t,n,i=this,a=i.footer,r=a.find(".k-footer-template>td"),o=a.find(".k-grid-footer-wrap>table>colgroup>col"),l=e('<div class="k-grid-footer-locked"><table><colgroup></colgroup><tbody><tr class="k-footer-template"></tr></tbody></table></div>'),s=i._groups(),d=e(),c=e();for(d=d.add(r.filter(".k-group-cell")),t=0,n=En(_n(i.columns)).length;t<n;t++)d=d.add(r.eq(t+s));for(c=c.add(o.filter(".k-group-col")),t=0,n=Gt(En(xn(i.columns))).length;t<n;t++)c=c.add(o.eq(t+s));d.appendTo(l.find("tr")),c.appendTo(l.find("colgroup")),i.lockedFooter=l.prependTo(a)},_appendLockedColumnHeader:function(t){var n,i,a,r,o,l,s,d,c,u=this,p=this.columns,h=[],f=0,g=e(),m=u._hasFilterRow(),k=0,b=e(),v=0,_=e();r=u.thead.prev().find(L),s=u.thead.find("tr:first .k-header:not(.k-group-cell,.k-hierarchy-cell)"),d=u.thead.find(".k-filter-row").find("th:not(.k-group-cell,.k-hierarchy-cell)");var w=0;for(n=0,a=p.length;n<a;n++){if(p[n].locked){if(c=s.eq(n),v=En(p[n].columns||[]).length,Nt(p[n])){var C=null;p[n].columns&&(C=v-dn(p[n].columns)),C=C||1;for(var y=0;y<C;y++)g=g.add(r.eq(n+w+y-f));w+=C-1}gn([p[n]],An(c),h,0,0),v=v||1;for(var S=0;S<v;S++)b=b.add(d.eq(k+S));k+=v}p[n].columns&&(f+=dn(p[n].columns)),Nt(p[n])||f++}if(h.length){for(i='<div class="k-grid-header-locked" style="width:1px"><table><colgroup></colgroup><thead>',i+=new Array(h.length+1).join("<tr></tr>"),(r=(l=e(i+=(m?'<tr class="k-filter-row"></tr>':"")+"</thead></table></div>")).find("colgroup")).append(u.thead.prev().find("col.k-group-col").add(g)),o=l.find("thead tr:not(.k-filter-row)"),n=0,a=h.length;n<a;n++)_=jt(h[n]),o.eq(n).append(u.thead.find("tr:eq("+n+") .k-group-cell").add(_));var x=fn(this.thead);return h.length<x&&pn(l,x-h.length),l.find(".k-filter-row").append(u.thead.find(".k-filter-row .k-group-cell").add(b)),this.lockedHeader=l.prependTo(t),this.thead.find(".k-group-cell").remove(),!0}return!1},_removeLockedContainers:function(){var e=this.lockedHeader.add(this.lockedContent).add(this.lockedFooter);i.destroy(e),e.off(O).remove(),this.lockedHeader=this.lockedContent=this.lockedFooter=null,this.selectable=null},_thead:function(){var t,n,a,r=this,o=r.columns,l=r._hasDetails()&&o.length,s=r._hasFilterRow(),d="",c=r.table.find(">thead"),u=r.element.find("thead:first").length>0,p=r.options.messages.expandCollapseColumnHeader;if(c.length||(c=e("<thead/>").insertBefore(r.tbody)),r.lockedHeader&&r.thead?((n=r.thead.find("tr:has(th):not(.k-filter-row)").html("")).remove(),n=e(),r._removeLockedContainers()):n=u?r.element.find("thead:first tr:has(th):not(.k-filter-row)"):r.element.find("tr:has(th):first"),n.length){for(t=0;t<o.length;t++){var h=b(o[t],En(o)),f=Mn(n.parent()).filter("th:not(.k-group-cell):not(.k-hierarchy-cell)").eq(h);o[t].hidden&&h>=0&&(f[0].style.display="none")}r._updateHeadersAttr(Hn(o))}else if(!(n=c.children().first()).length){var m=[{rowSpan:1,cells:[],index:0}];for(r._prepareColumns(m,o),t=0;t<m.length;t++)d+="<tr>",l&&(d+='<th class="k-hierarchy-cell" scope="col">'+p+"</th>"),d+=r._createHeaderCells(m[t].cells,m[t].rowSpan),d+="</tr>";n=e(d)}if(s){var k=e("<tr/>");k.addClass("k-filter-row"),(l||n.find(".k-hierarchy-cell").length)&&k.prepend('<th class="k-hierarchy-cell" scope="col">&nbsp;</th>');var v=(r.thead||c).find(".k-filter-row");v.length&&(i.destroy(v),v.remove()),c.append(k)}n.children().length?l&&!n.find(".k-hierarchy-cell")[0]&&n.prepend('<th class="k-hierarchy-cell" scope="col">'+(p||"&nbsp;")+"</th>"):(d="",l&&(d+='<th class="k-hierarchy-cell" scope="col">&nbsp;</th>'),d+=r._createHeaderCells(o),n.html(d)),n.attr("role","row").find("th").addClass("k-header"),r.options.scrollable||c.addClass("k-grid-header"),n.find("script").remove().end().prependTo(c),r.thead&&r._destroyColumnAttachments(),this.angular("cleanup",(function(){return{elements:c.find("th"+R).get()}})),this.angular("compile",(function(){return{elements:c.find(q).get(),data:g(o,(function(e){return{column:e}}))}})),r.thead=c.attr("role","rowgroup"),r._sortable(),r._filterable(),r._filterRow(),r._scrollable(),r._columnMenu();var w=this.options.scrollable&&_n(this.columns).length;w&&(a=r._appendLockedColumnHeader(r.thead.closest(".k-grid-header")),r._appendLockedColumnContent(),r.lockedContent.bind("DOMMouseScroll"+O+" mousewheel"+O,_(r._wheelScroll,r)),i.support.touch&&(r._lockedContentUserEvents=new i.UserEvents(r.lockedContent,{move:function(e){r.content.scrollTop(r.content.scrollTop()+-e.y.delta),e.preventDefault()}})),r._updateLockedCols()),r._updateCols(),r._updateColumnCellIndex(),r._updateFirstColumnClass(),r._resizable(),r._draggable(),r._reorderable(),r._updateHeader(r._groups()),r._updateStickyColumns(),w&&(a&&r._syncLockedHeaderHeight(),r._applyLockedContainersWidth()),r.groupable&&r._attachGroupable()},_retrieveFirstColumn:function(t,n){var i=e();if(n.length&&t[0]){for(var a=t[0];a.columns&&a.columns.length;)a=a.columns[0],n=n.filter(":not(:first())");i=i.add(n)}return i},_updateFirstColumnClass:function(){var t=this,n=t.columns||[];if(!(t._hasDetails()&&n.length||t._groups())){var i=t.thead.find(">tr:not(.k-filter-row):not(:first)");n=wn(n);var a=t._retrieveFirstColumn(n,i);t._isLocked()&&(i=t.lockedHeader.find("thead>tr:not(.k-filter-row):not(:first)"),n=_n(t.columns),a=a.add(t._retrieveFirstColumn(n,i))),a.each((function(){var t=e(this).find("th");t.removeClass("k-first"),t.eq(0).addClass("k-first")}))}},_prepareColumns:function(e,t,n,i){for(var a=i||e[e.length-1],r=e[a.index+1],o=0,l=0;l<t.length;l++){var s={column:t[l],colSpan:0};a.cells.push(s),t[l].columns&&t[l].columns.length&&(r||(r={rowSpan:0,cells:[],index:e.length},e.push(r)),s.colSpan=t[l].columns.length,this._prepareColumns(e,t[l].columns,s,r),o+=s.colSpan-1,a.rowSpan=e.length-a.index)}n&&(n.colSpan+=o)},_wheelScroll:function(e){if(!e.ctrlKey){var t=this.content;this.virtualScroll&&this.virtualScroll.rows&&(t=this.virtualScrollable.verticalScrollbar);var n=t.scrollTop(),a=i.wheelDeltaY(e);a&&(t[0].scrollHeight>t[0].clientHeight&&(t[0].scrollTop<t[0].scrollHeight-t[0].clientHeight&&a<0||t[0].scrollTop>0&&a>0)&&e.preventDefault(),t.scrollTop(n+-a))}},_isLocked:function(){return null!=this.lockedHeader},_updateHeaderCols:function(){var e=this.thead.parent().add(this.table);this._isLocked()?qn(e,Tn(Sn(this.columns)),this._hasDetails(),0):qn(e,Tn(Gt(this.columns)),this._hasDetails(),0)},_updateColumnSorters:function(){var e,t,n=this,i=Mn(n.thead),a=En(n.columns);if(n.options.sortable)for(var r=0,o=i.length;r<o;r++)!1!==(e=a[r]).sortable&&!e.command&&e.field&&(t=i.eq(r).data("kendoColumnSorter"))&&t.refresh()},_updateHeadersAttr:function(e){if(e.length){for(var t=this,n=0;n<e.length;n++)e[n].headerAttributes&&t.element.find("[id='"+e[n].headerAttributes.id+"']").attr("headers",e[n].headerAttributes.headers);t._updateHeadersAttr(Hn(e))}},_updateCols:function(e){e=e||this.thead.parent().add(this.table),this._appendCols(e,this._isLocked())},_updateLockedCols:function(e){this._isLocked()&&qn(e=e||this.lockedHeader.find("table").add(this.lockedTable),Tn(xn(this.columns)),this._hasDetails(),this._groups())},_appendCols:function(e,t){t?qn(e,Tn(Sn(this.columns)),this._hasDetails(),0):qn(e,Tn(Gt(this.columns)),this._hasDetails(),this._groups())},_autoColumns:function(e){if(e&&e.toJSON){var t,n,a=this;for(t in e=e.toJSON(),n=!(a.table.find("tbody tr").length>0&&(!a.dataSource||!a.dataSource.transport)),e)a.columns.push({field:t,encoded:n,headerAttributes:{id:i.guid()}});a._thead(),a._templates()}},_rowsHtml:function(e,t){var n,i,a=this,r="",o=t.rowTemplate,l=t.altRowTemplate;for(n=0,i=e.length;n<i;n++)a._skipRerenderItemsCount>0?a._skipRerenderItemsCount--:r+=n%2?l(e[n]):o(e[n]),a._data.push(e[n]);return r},_groupData:function(e,t,n){var i=this._groupAggregatesDefaultObject||{},a=e.items,r=f({},i,e.aggregates),o=f({},{field:e.field,value:e.value,items:a,aggregates:r},e.aggregates[n?n.field:e.field]),l={};if(!t)for(var s in r)l[s]=f({},r[s],{group:{field:e.field,value:e.value,items:a}});return f({},l,o)},_removeGroupIfEmpty:function(e){for(var t,n,i=this.dataSource._group.length,a=0;a<i;a++)t=+(e=e.prev()).attr("data-group-item-count"),n=+e.attr("data-sub-group-count"),1!=t&&1!=n||e.hide()},_groupRowHtml:function(e,t,n,a,r,o,l){var s,d,c,u=this,p="",h=e.field,g=m(En(u.columns),(function(e){return e.field==h}))[0]||{},k=Gt(u.columns)[0],v=k?k.groupHeaderColumnTemplate:null,_=g.groupHeaderTemplate?g.groupHeaderTemplate:v,w=(g.title&&(u.options.encodeTitles?fi(g.title,!0):g.title)||h)+": "+Vn(e.value,g.format,g.values,g.encoded),C=e.currentItems||e.items,y=u._groups(),S=r.groupFooterTemplate,x=r.groupHeaderColumnTemplate,T=!u.dataSource._isGroupPaged()||u.dataSource._groupsState[e.uid];if(u.options.editable&&e.items&&e.items[0]&&e.items[0].isNew&&e.items[0].isNew()&&(T=!0),(r.groupFooterTemplate||r.groupHeaderColumnTemplate||g.groupHeaderTemplate)&&(c=u._groupData(e,!1,!(g.groupHeaderTemplate||!Gt(u.columns)[0].groupHeaderColumnTemplate)&&Gt(u.columns)[0])),_&&!o&&(w=typeof _===Ve?_(c):i.template(_)(c)),u._skipRerenderItemsCount?a(t,n,w,T,e.uid,u.dataSource._isGroupPaged()):x?e.excludeHeader?e.excludeHeader=!1:p+=x(f({},c,{groupCells:n,colspan:y-n,text:w})):e.excludeHeader?e.excludeHeader=!1:p+=a(t,n,w,T,e.uid,u.dataSource._isGroupPaged()),T)if(e.hasSubgroups)for(s=0,d=C.length;s<d;s++)p+=u._groupRowHtml(C[s],o?t:t-1,n+1,a,r,o,l&&s===C.length-1);else p+=u._rowsHtml(C,r);return S&&(l?b(e.value,u._skippedGroups)||u._skippedGroups.push(e.value):(u._skippedGroups.length&&u._skippedGroups[0]===e.value&&u._skippedGroups.shift(),u._skipRerenderItemsCount||(p+=S(c)))),p},collapseGroup:function(t){var n,i,a,r,o,l=this,s=t,d=this.options.groupable.showFooter?0:1,c=e();if(n=(t=e(t)).find(".k-group-cell").length,this.dataSource._isGroupPaged()){var u,p=t.attr("data-group-uid"),h=l.dataSource._getGroupByUid(p),f=l.dataSource._calculateGroupsTotal([h],!0);return l.dataSource._groupsState[p]=!1,u=l.dataSource._calculateGroupsTotal([h],!0),l.dataSource._serverGroupsTotal-=f-u,l._progress(!0),void l.dataSource.range(l.dataSource._currentRangeStart,l.dataSource.take(),(function(){l._progress(!1)}),"collapseGroup")}this._isLocked()&&(t.closest("div").hasClass("k-grid-content-locked")?c=this.tbody.children("tr:eq("+t.index()+")").nextAll("tr"):(c=t.nextAll("tr"),t=this.lockedTable.find(">tbody>tr:eq("+t.index()+")"))),t.find(".k-i-collapse").addClass("k-i-expand").removeClass("k-i-collapse"),t.find("td[aria-expanded='true']:first").attr("aria-expanded",!1).find("a").attr(st,lt);var g=[];for(a=0,r=(t=t.nextAll("tr")).length;a<r&&(i=(o=t.eq(a)).find(".k-group-cell").length,o.hasClass("k-grouping-row")?d++:o.hasClass("k-group-footer")&&d--,!(i<=n||o.hasClass("k-group-footer")&&d<0));a++)c.length&&g.push(c[a]),g.push(o[0]);e(g).hide(),this.options.scrollable.endless&&this.content&&(clearTimeout(l._collapseGroupsTimeOut),l._collapseGroupsTimeOut=setTimeout((function(){l.content.scroll(),l._groupToCollapse=s})))},expandGroup:function(t){t=e(t);var n,i,a,r,o,l=this,s=l.options.groupable.showFooter,d=e(),c=[],u=1;if(n=t.find(".k-group-cell").length,this.dataSource._isGroupPaged()){var p,h=t.attr("data-group-uid"),f=l.dataSource._getGroupByUid(h),g=l.dataSource._calculateGroupsTotal([f],!0);return l.dataSource._groupsState[h]=!0,f.items&&f.items.length&&(p=l.dataSource._calculateGroupsTotal([f],!0),l.dataSource._serverGroupsTotal+=p-g),l._progress(!0),void l.dataSource.range(l.dataSource._currentRangeStart,l.dataSource.take(),(function(){l._progress(!1)}),"expandGroup")}for(this._isLocked()&&(t.closest("div").hasClass("k-grid-content-locked")?d=this.tbody.children("tr:eq("+t.index()+")").nextAll("tr"):(d=t.nextAll("tr"),t=this.lockedTable.find(">tbody>tr:eq("+t.index()+")"))),t.find(".k-i-expand").addClass("k-i-collapse").removeClass("k-i-expand"),t.find("td[aria-expanded='false']:first").attr("aria-expanded",!0).find("a").attr(st,ot),r=0,o=(t=t.nextAll("tr")).length;r<o&&!((a=(i=t.eq(r)).find(".k-group-cell").length)<=n);r++)if(a!=n+1||i.hasClass("k-detail-row")||(i.show(),d.eq(r).show(),i.hasClass("k-grouping-row")&&i.find(".k-icon").hasClass("k-i-collapse")&&l.expandGroup(i),i.hasClass("k-master-row")&&i.find(".k-icon").hasClass("k-i-collapse")&&(i.next().show(),d.eq(r+1).show())),i.hasClass("k-grouping-row")&&(s&&c.push(i.is(":visible")),u++),i.hasClass("k-group-footer")){if(s){var m=c.pop();i.toggle(m),d.eq(r).toggle(m)}1==u?(i.show(),d.eq(r).show()):u--}0===n&&l.options.scrollable.endless&&this._isLocked()&&l._syncLockedContentHeight()},_updateHeader:function(t){var n=this,i=n._isLocked()?n.lockedHeader.find("thead"):n.thead,a=i.find("tr.k-filter-row").find("th.k-group-cell").length,r=i.find("tr:first").find("th.k-group-cell").length,o=i.children("tr:not(:first)").filter((function(){return!e(this).children(":visible").length}));t>r?(e(new Array(t-r+1).join('<th class="k-group-cell k-header" scope="col">'+n.options.messages.expandCollapseColumnHeader+"</th>")).prependTo(i.children("tr:not(.k-filter-row)")),n.element.is(":visible")&&o.find("th.k-group-cell").hide()):t<r&&i.find("tr").each((function(){e(this).find("th.k-group-cell").filter(":eq("+t+"),:gt("+t+")").remove()})),t>a&&e(new Array(t-a+1).join('<th class="k-group-cell k-header" scope="col">&nbsp;</th>')).prependTo(i.find(".k-filter-row"))},_firstDataItem:function(e,t){return e&&t&&(e=e.hasSubgroups?this._firstDataItem(e.items[0],t):e.items[0]),e},_updateTablesWidth:function(){var t,n=this;n._isLocked()&&(t=e(">.k-grid-footer>.k-grid-footer-wrap>table",n.wrapper).add(n.thead.parent()).add(n.table),n._footerWidth=Kn(t.eq(0)),t.width(n._footerWidth),(t=e(">.k-grid-footer>.k-grid-footer-locked>table",n.wrapper).add(n.lockedHeader.find(">table")).add(n.lockedTable)).width(Kn(t.eq(0))))},hideColumn:function(t){var n,i,a,r,o,l,s,d,u=this,p=0,f=u.footer||u.wrapper.find(".k-grid-footer"),g=u.virtualScroll||{},k=u.columns,v=u.lockedHeader?Mn(u.lockedHeader.find(">table>thead")).filter(Vt).length:0,_=m(En(u.columns),(function(e){return e.groupHeaderColumnTemplate}));if((t="number"==typeof t?k[t]:h(t)?m(sn(k),(function(e){return e===t}))[0]:m(sn(k),(function(e){return e.field===t}))[0])&&Nt(t)){var w=u._columnVisibilitySetter(t);if(t.columns&&t.columns.length){for(o=rn(t,k),w(t,!1),Wn(Mt(e(">table>thead",u.lockedHeader),u.thead,">tr:eq("+o.row+")>th"),o.cell,!1),i=0;i<t.columns.length;i++)this.hideColumn(t.columns[i]);u.trigger(ee,{column:t})}else{d=b(t,Gt(En(k))),w(t,!1),u._setParentsVisibility(t,!1),u._templates(),u._updateCols(),u._updateLockedCols();var C=u.thead;if(l=d,u.lockedHeader&&v>d?C=u.lockedHeader.find(">table>thead"):l-=v,Mn(C).filter(Vt).eq(l)[0].style.display="none",Wn(Mt(e(">table>thead",u.lockedHeader),u.thead,">tr.k-filter-row>th"),d,!1),f[0]&&(u._updateCols(f.find(">.k-grid-footer-wrap>table")),u._updateLockedCols(f.find(">.k-grid-footer-locked>table")),Wn(f.find(".k-footer-template>td"),d,!1)),g.columns&&!t.locked)return u._updateContentWidth(),void u.trigger(ee,{column:t});if(u.lockedTable&&v>d?Nn(u.lockedTable.find(">tbody>tr"),d):Nn(u.tbody.children(),d-v),u.lockedTable)u._updateTablesWidth(),u._applyLockedContainersWidth(),u._syncLockedContentHeight(),u._syncLockedHeaderHeight(),u._syncLockedFooterHeight();else{for(i=0,s=(a=u.thead.prev().find("col")).length;i<s;i+=1)if(r=a[i].style.width,a[i].className.indexOf("k-hierarchy-col")>-1)p+=c(a[i]);else if(a[i].className.indexOf("k-group-col")>-1)p+=c(a[i]);else{if(!r||-1!=r.indexOf("%")){p=0;break}p+=parseInt(r,10)}n=e(">.k-grid-header table:first,>.k-grid-footer table:first",u.wrapper).add(u.table),u._footerWidth=null,p&&(n.each((function(){this.style.width=p+"px"})),u._footerWidth=p,u._setContentWidth())}u._updateFirstColumnClass(),u._updateStickyColumns(),_.length>0&&u._renderGroupRows(),u.trigger(ee,{column:t})}}},_setParentsVisibility:function(t,n){var a,r,o,l,s,d=this,c=d.columns,u=[],p=d._columnVisibilitySetter(t),h=n?function(e){return Gt(e.columns).length&&e.hidden}:function(e){return!Gt(e.columns).length&&!e.hidden};if(Ft(t,c,u)&&u.length)for(a=u.length-1;a>=0;a--)o=tn(r=u[a],c),l=Mt(e(">table>thead",this.lockedHeader),this.thead,">tr:eq("+o.row+")>th:not(.k-group-cell):not(.k-hierarchy-cell)").eq(o.cell),h(r)&&(p(r,n),l[0].style.display=n?"":"none"),l.filter("["+i.attr("colspan")+"]").length&&(s=parseInt(l.attr(i.attr("colspan")),10),l[0].colSpan=s-dn(r.columns)||1)},_updateContentWidth:function(){var e=this;e.table.add(e.thead.parent()).css({width:cn(Tn(Sn(e.columns)))}),e.refresh()},showColumn:function(t){var n,i,a,r,o,l,s,d,u,p,f,g=this,k=g.columns,v=g.virtualScroll||{},_=g.footer||g.wrapper.find(".k-grid-footer"),w=g.lockedHeader?Mn(g.lockedHeader.find(">table>thead")).length:0,C=m(En(g.columns),(function(e){return e.groupHeaderColumnTemplate}));if("number"==typeof t?(u=t,t=k[t]):h(t)?e.each(sn(k),(function(e,n){if(n===t)return t=n,u=e,!1})):e.each(sn(k),(function(e,n){if(n.field===t)return t=n,u=e,!1})),t&&!Nt(t)){var y=g._columnVisibilitySetter(t);if(t.columns&&t.columns.length){for(l=tn(t,k),p=sn(g.options.columns)[u],y(t,!0),Wn(Mt(e(">table>thead",g.lockedHeader),g.thead,">tr:eq("+l.row+")>th"),l.cell,!0),n=0;n<t.columns.length;n++)p.columns[n].hidden||this.showColumn(t.columns[n]);g.trigger(te,{column:t})}else{f=b(t,En(k)),y(t,!0),g._setParentsVisibility(t,!0),g._templates(),g._updateCols(),g._updateLockedCols();var S=g.thead;if(o=f,g.lockedHeader&&w>f?S=g.lockedHeader.find(">table>thead"):o-=w,Mn(S).eq(o)[0].style.display="",Wn(Mt(e(">table>thead",g.lockedHeader),g.thead,">tr.k-filter-row>th"),f,!0),_[0]&&(g._updateCols(_.find(">.k-grid-footer-wrap>table")),g._updateLockedCols(_.find(">.k-grid-footer-locked>table")),Wn(_.find(".k-footer-template>td"),f,!0)),v.columns&&!t.locked)return g._updateContentWidth(),void g.trigger(te,{column:t});if(g.lockedTable&&w>f?Zn(g.lockedTable.find(">tbody>tr"),f):Zn(g.tbody.children(),f-w),g.lockedTable)g._updateTablesWidth(),g._applyLockedContainersWidth(),g._syncLockedContentHeight(),g._syncLockedHeaderHeight();else if(a=e(">.k-grid-header table:first,>.k-grid-footer table:first",g.wrapper).add(g.table),t.width){for(r=0,n=0,i=(d=g.thead.prev().find("col")).length;n<i;n+=1)if(s=d[n].style.width,d[n].className.indexOf("k-hierarchy-col")>-1)r+=c(d[n]);else if(d[n].className.indexOf("k-group-col")>-1)r+=c(d[n]);else{if(s.indexOf("%")>-1){r=0;break}r+=parseInt(s,10)}g._footerWidth=null,r&&(a.each((function(){this.style.width=r+"px"})),g._footerWidth=r,g._setContentWidth())}else a.width("");g._updateFirstColumnClass(),g._updateStickyColumns(),C.length>0&&g._renderGroupRows(),g.trigger(te,{column:t})}}},_columnVisibilitySetter:function(e){return Zt((e||{}).media)?Pt:qt},_buildSkeleton:function(){var e,t=this.virtualCols?this.virtualCols:Tn(this.columns),n=this.dataSource.pageSize()||this.dataSource.total(),i="";this._hasVirtualColumns()&&(e=parseInt(this.content.find("tr:first td:first").attr("colspan"),10));for(var a=0;a<n;a++){i+="<tr>";for(var r=0;r<t.length;r++)i+=e&&!r?"<td colspan='"+e+"'><span class='k-skeleton k-skeleton-text k-skeleton-pulse'></span></td>":"<td><span class='k-skeleton k-skeleton-text k-skeleton-pulse'></span></td>";i+="</tr>"}return i},_progress:function(e){var t,n=this.element,a=this.options.scrollable&&this.options.scrollable.endless,r=this.options.loaderType;this.options.scrollable&&this.options.scrollable.virtual?n=this.content:this._editContainer&&"popup"===this._editMode()?n=this._editContainer:this.lockedContent||a?n=this.wrapper:this.element.is("table")?n=this.element.parent():this.content&&this.content.length&&(n=this.content),"skeleton"==r?e?(t=this._buildSkeleton(),n.find("tbody").empty().append(t)):n.find(".k-skeleton").closest("tbody").empty():a&&e?i.ui.progress(n,e,{height:this.content.height(),top:this.content[0].offsetTop,opacity:!0}):i.ui.progress(n,e)},_resize:function(e,t){this._syncLockedContentHeight(),this._syncLockedHeaderHeight(),this.content&&(this._setContentWidth(),this._setContentHeight()),this.lockedTable&&this._syncLockedScroll(),this.virtualScrollable&&(t||this._rowHeight)&&(t&&(this._rowHeight=null),this.virtualScrollable.repaintScrollbar()),this.pager&&this.pager.element&&this.pager.resize(t),this._anyStickyColumns()&&this._updateStickyColumns(!1)},_isActiveInTable:function(){var t=s();return!!t&&(this.table[0]===t||e.contains(this.table[0],t)||this._isLocked()&&(this.lockedTable[0]===t||e.contains(this.lockedTable[0],t)))},refresh:function(t){var n,a,r,o=this,l=o.dataSource.view(),s=o.options.navigatable,d=o.virtualScroll||{},c=e(o.current()),u=!1,p=(o.dataSource.group()||[]).length,h=p+Tn(Gt(o.columns)).length;t&&"itemchange"===t.action&&(o.editable||o.options.scrollable.endless)&&("popup"!=this._editMode()||"popup"===this._editMode()&&!o._editableIsClosing)||(d.columns&&o._templates(),t&&"remove"===t.action&&o.editable&&o.editable.options.model&&b(o.editable.options.model,t.items)>-1&&o.editable.options.model.unbind(J,o._modelChangeHandler),t=t||{},o.trigger("dataBinding",{action:t.action||"rebind",index:t.index,items:t.items})||(t.action===ce&&o._isVirtualEditable()&&(o._destroyEditable(),o._clearEditableState()),o._angularItems("cleanup"),o._endlessFetchInProgress||(s&&(o._isActiveInTable()||o._editContainer&&o._editContainer.data("kendoWindow"))&&(n=(u=c.is("th"))?c.parent().children(":not(.k-group-cell)").index(c[0]):Math.max(o.cellIndex(c),0)),o._destroyEditable()),o.options.scrollable&&o.options.scrollable.endless?(clearTimeout(o._progressTimeOut),o._progressTimeOut=setTimeout((function(){o._endlessFetchInProgress||o._progress(!1)}),100)):o._progress(!1),o._hideResizeHandle(),o._data=[],o.columns.length||(o._autoColumns(o._firstDataItem(l[0],p)),h=p+o.columns.length),o._group=p>0||o._group,o._group&&(o._templates(),o._updateCols(),o._updateLockedCols(),o._virtualColScroll||o._updateHeader(p),o._group=p>0,o._groupRows=Gn(l)),o.content&&(a=i.scrollLeft(o.content)),r=o._skipRerenderItemsCount,o._renderContent(l,h,p),o.options.scrollable&&o.options.scrollable.endless&&this.lockedContent&&(o._skipRerenderItemsCount=r),o._renderLockedContent(l,h,p),o._virtualColScroll||(o._footer(),o._renderNoRecordsContent(),o._togglePagerVisibility(),o._setContentHeight(),o._setContentWidth(o.content&&a)),o.lockedTable&&(d.rows?o.content.find(">.k-virtual-scrollable-wrap").trigger("scroll"):o.touchScroller?o.touchScroller.movable.trigger("change"):(o.wrapper.one("scroll",(function(e){e.stopPropagation()})),o.content.trigger("scroll"))),o._endlessFetchInProgress||o._restoreCurrent(n,u),o.touchScroller&&o.touchScroller.contentResized(),o.selectable&&o.selectable.resetTouchEvents(),o._muteAngularRebind((function(){o._angularItems("compile")})),o._checkBoxSelection&&o._toggleHeaderCheckState(!1),o.options.persistSelection&&(o.selectable&&!i.ui.Selectable.parseOptions(o.options.selectable).cell||o._checkBoxSelection)&&(o.items().length||o.dataSource._isGroupPaged())&&o._restoreSelection(),o.trigger(ie)))},_restoreCurrent:function(n,i){if(!(n===t||n<0)){if(this._removeCurrent(),i)this._setCurrent(this.thead.find("th:not(.k-group-cell)").eq(n));else{var a=0,r=this.virtualScroll||{};this._rowVirtualIndex?a=r.rows?this.virtualScrollable.position(this._rowVirtualIndex):this._rowVirtualIndex:n=0;var o,l=e();this.lockedTable&&(l=this.lockedTable.find(">tbody>tr").eq(a)),l=l.add(this.tbody.children().eq(a)),this._hasVirtualColumns()&&(o=parseInt(l.find("td:first").attr("colspan"),10),n=this._virtualCellIndex-(o>1?o-1:0));var s=l.find(">td:not(.k-group-cell):not(.k-hierarchy-cell)").eq(n);if(!s.length||n<0)return;this._hasVirtualColumns()?this._setCurrent(s,!0,!0):this._setCurrent(s)}this._current&&Jn(this._current.closest("table")[0],!0)}},_restoreSelection:function(){var e,t=this,n=t.items(),i=w(t.dataSource.options.schema.model)?t.dataSource.options.schema.model.fn.idField:t.dataSource.options.schema.model.id;e=m(n,(function(e){var n=t.dataItem(e)[i];if(t._selectedIds[n])return e})),t.select(e)},_angularItems:function(e){i.ui.DataBoundWidget.fn._angularItems.call(this,e),"cleanup"!==e||this.dataSource&&this.dataSource.options.endless||this._cleanupDetailItems(),this._angularGroupItems(e),this._angularGroupFooterItems(e)},_cleanupDetailItems:function(){var e=this;e._hasDetails()&&(e.angular("cleanup",(function(){return{elements:e.tbody.children(".k-detail-row")}})),e.tbody.find(".k-detail-cell").empty())},_angularGroupItems:function(t){var n=this,i=n.tbody;n.lockedContent&&(i=n.lockedTable.find("tbody")),n._group&&n.angular(t,(function(){return{elements:i.children(".k-grouping-row"),data:e.map(Gn(n.dataSource.view()),(function(e){return{dataItem:e}}))}}))},_angularGroupFooterItems:function(t){var n=this,i=n.tbody;n.lockedContent&&(i=n.element),n._group&&n.groupFooterTemplate&&n.angular(t,(function(){return{elements:i.find(".k-group-footer"),data:e.map(Un(n.dataSource.view()),(function(e){return{dataItem:e}}))}}))},_renderContent:function(e,t,n){var i,a,r,o,l=this,s="",d=null!=l.lockedContent,c=null,u=l.options.scrollable,p={rowTemplate:l.rowTemplate,altRowTemplate:l.altRowTemplate,groupFooterTemplate:l.groupFooterTemplate,groupHeaderColumnTemplate:l.groupHeaderColumnTemplate};if(u&&u.endless&&!l.dataSource.options.endless&&(l._skipRerenderItemsCount=0,l.content&&(l.content[0].scrollTop=0)),c=l._skipRerenderItemsCount>0,t=d?t-Tn(xn(l.columns)).length:t,n>0)for(t=d?t-n:t,l.detailTemplate&&t++,l.groupFooterTemplate&&(l._groupAggregatesDefaultObject=l.dataSource.aggregates()),l.options.scrollable.endless&&(o=l.dataSource.flatView().length),i=0,a=e.length;i<a;i++)l._skippedGroups||(l._skippedGroups=[]),r=o&&i===e.length-1&&o!==l.dataSource.total(),s+=l._groupRowHtml(e[i],t,0,d?pi:ui,p,d,r);else s+=l._rowsHtml(e,p);c?(l.tbody.append(s),clearTimeout(l._endlessFetchTimeOut),l._endlessFetchTimeOut=setTimeout((function(){l._groupToCollapse&&(l.collapseGroup(l._groupToCollapse),l._groupToCollapse=null)})),l._endlessFetchInProgress=null):l.tbody=Ln(l.tbody,l.table,s,this.options.$angular)},_renderGroupRows:function(){var t,n,a,r,o,l,s,d,c,u,p,h,g,k,b,v,_,w=this,C=w._groupRows,y=w.wrapper.find(".k-grouping-row"),S=w._groups(),x=null!=w.lockedContent;y.each((function(y,T){k=e(T),u=k.closest("table").parent(),p=u.is("."+V),n=Tn(Gt(p?_n(w.columns):wn(w.columns))),b=k.find("."+W).length,x?(t=p?ui:pi,a=p?n.length+S-b:n.length):(t=ui,a=n.length+S-b),r=y>=C.length?C[y-C.length]:C[y],o=r.field,l=m(En(w.columns),(function(e){return e.field==o}))[0]||{},_=!(l.groupHeaderTemplate||!Gt(w.columns)[0].groupHeaderColumnTemplate)&&Gt(w.columns)[0],s=l.groupHeaderTemplate?l.groupHeaderTemplate:Gt(w.columns)[0].groupHeaderColumnTemplate,d=(l.title&&(w.options.encodeTitles?fi(l.title,!0):l.title)||o)+": "+Vn(r.value,l.format,l.values,l.encoded),S=S,c=w._groupData(r,!1,_),v=p?w.lockedGroupHeaderColumnTemplate:w.groupHeaderColumnTemplate,s&&(d=typeof s===Ve?s(c):i.template(s)(c)),h=k.prev().length?k.prev():k.parent(),g=e(v?v(f({},c,{groupCells:b,colspan:S-b,text:d})):t(a,b,d)),h.is("tbody")?h.prepend(g):h.after(g),k.remove()}))},_renderLockedContent:function(e,t,n){var i,a,r="",o=null,l={rowTemplate:this.lockedRowTemplate,altRowTemplate:this.lockedAltRowTemplate,groupFooterTemplate:this.lockedGroupFooterTemplate,groupHeaderColumnTemplate:this.lockedGroupHeaderColumnTemplate};if(this.lockedContent){var s=this.lockedTable;if(o=this._skipRerenderItemsCount>0,n>0)for(t-=Gt(En(wn(this.columns))).length,i=0,a=e.length;i<a;i++)r+=this._groupRowHtml(e[i],t,0,ui,l,!1,this.options.scrollable.endless&&i===e.length-1);else r=this._rowsHtml(e,l);o?s.children("tbody").append(r):Ln(s.children("tbody"),s,r,this.options.$angular),this._syncLockedContentHeight()}},_togglePagerVisibility:function(){!1===this.options.pageable.alwaysVisible&&this.wrapper.find(".k-grid-pager").toggle(this.dataSource.total()>=this.dataSource.pageSize())},_adjustRowsHeight:function(e,t){var n,i=e[0].rows,a=i.length,r=t[0].rows,o=e.add(t),l=o.length,s=[];for(n=0;n<a&&r[n];n++)i[n].style.height&&(i[n].style.height=r[n].style.height="");for(n=0;n<a&&r[n];n++){var d=i[n].offsetHeight,c=r[n].offsetHeight,u=0;d>c?u=d:d<c&&(u=c),s.push(u)}for(n=0;n<l;n++)o[n].style.display="none";for(n=0;n<a;n++)s[n]&&(i[n].style.height=r[n].style.height=s[n]+1+"px");for(n=0;n<l;n++)o[n].style.display=""}});function Qn(e,t){if(e=e[0],t=t[0],e.rows.length!==t.rows.length){var n,i,a=e.offsetHeight,r=t.offsetHeight;a>r?(n=t.rows[t.rows.length-1],gt.test(n.className)&&(n=t.rows[t.rows.length-2]),i=a-r):(n=e.rows[e.rows.length-1],gt.test(n.className)&&(n=e.rows[e.rows.length-2]),i=r-a),n.style.height=n.offsetHeight+i+"px"}}function Yn(e,t){var n,i=e.offsetHeight,a=t.offsetHeight;i>a?n=i+"px":i<a&&(n=a+"px"),n&&(e.style.height=t.style.height=n)}function Xn(e,t){var n,i,a;if(typeof e===We&&e===t)return e;if(h(e)&&e.name===t)return e;if(k(e))for(n=0,i=e.length;n<i;n++)if(typeof(a=e[n])===We&&a===t||a.name===t)return a;return null}function Jn(t,n){if(!0===n){t=e(t);var a=i.scrollLeft(t.parent());i.focusElement(t),i.scrollLeft(t.parent(),a)}else e(t).one("focusin",(function(e){e.preventDefault()})).focus()}function ei(e,n){return e.options.groupable&&(n.groupable||n.groupable===t)}function ti(t,n){return!!e.grep(t,(function(e){return e.field===n})).length}function ni(e,t){return!(!e.field||e.selectable||t.editable&&!t.editable(e.field)||e.editable&&!e.editable(t))}function ii(t){return e(t).is(":button,a,:input,a>.k-icon,textarea,span.k-select,span.k-icon,span.k-link,label.k-checkbox-label,.k-input,.k-multiselect-wrap,.k-picker-wrap,.k-picker-wrap>.k-selected-color,.k-tool-icon,.k-dropdown")}function ai(t){var n=e(t.currentTarget),a=n.is("th"),r=this.table.add(this.lockedTable),o=this.thead.parent().add(e(">table",this.lockedHeader)),l=ii(t.target),s=e(t.target).is(".k-checkbox"),d=e(t.target),c=n.closest("table")[0];l&&n.find(i.roleSelector("filtercell")).length?this._setCurrent(n):c!==r[0]&&c!==r[1]&&c!==o[0]&&c!==o[1]||d.is("a.k-i-expand, a.k-i-collapse")||(this.options.navigatable&&this._setCurrent(n,!1,s),!a&&l||setTimeout((function(){e(i._activeElement()).hasClass("k-widget")||!e(i._activeElement()).is(ke)&&ii(i._activeElement())&&e.contains(c,i._activeElement())||Jn(c,!0)})),a&&!i.support.touch&&t.preventDefault())}function ri(e,t){if(!t)return 0;var n=0;return i.support.browser.webkit&&(n=e.width()),n}function oi(e){var t;return"string"==typeof e?"true"===(t=e.toLowerCase())?{rows:!0}:{rows:t.indexOf("rows")>-1,columns:t.indexOf("columns")>-1}:!0===e?{rows:!0}:void 0}function li(t,n){var i,a;return!!t&&!!((n=e(n))[0]&&y(t[0],n[0])&&(i=n.offset().top-t.offset().top,a=n.outerHeight()/2,(i>=0||S.abs(i)<=a)&&S.floor(i+a)<=t.height()))}function si(e){return e&&(e.hasClass("k-edit-cell")||e.parent().hasClass("k-grid-edit-row"))}function di(e){return'<td colspan="#=data.colspan +'+e+'#"><p class="k-reset"><a class="k-icon k-i-collapse" href="\\#" tabindex="-1" '+st+'="'+ot+'"></a>#=data.text#</p></td>'}function ci(e){return'<td colspan="'+e+'"><p class="k-reset">&nbsp;</p></td>'}function ui(e,t,n,i,a,r){return'<tr role="row"'+(r?'data-group-uid="'+a+'"':"")+'class="k-grouping-row">'+Tt(t)+'<td colspan="'+e+'" aria-expanded="'+!!i+'"><p class="k-reset"><a class="k-icon '+(i?"k-i-collapse":"k-i-expand")+'" href="#" tabindex="-1" '+st+'="'+(i?ot:lt)+'"></a>'+n+"</p></td></tr>"}function pi(e){return'<tr role="row" class="k-grouping-row"><td colspan="'+e+'" aria-expanded="true"><p class="k-reset">&nbsp;</p></td></tr>'}function hi(t,n){(t=e(t)[0]).style.display=n?"":"none"}function fi(e,t){var n=/</g,i=/"/g,a=/'/g,r=/>/g;return(""+e).replace(/&/g,"&amp;").replace(n,"&lt;").replace(r,"&gt;").replace(i,(function(e){return t?"\\"+e:"&quot;"})).replace(a,"&#39;")}function gi(e,t){return t.filter((function(t){return t.field===e}))[0].title||e}function mi(e,t){return this.dataSource.indexOf(this.dataSource.getByUid(e.uid))-this.dataSource.indexOf(this.dataSource.getByUid(t.uid))}function ki(e){return!(!1===e.exportable||e.exportable&&!1===e.exportable.excel)}i.ExcelMixin&&i.ExcelMixin.extend($n.prototype),i.PDFMixin&&(i.PDFMixin.extend($n.prototype),$n.prototype._drawPDF_autoPageBreak=function(n){var a,r=this,o=new e.Deferred,l=r.dataSource,s=r.options.pdf.allPages,d=r.wrapper.find('table[role$="grid"] > tbody').first(),c=e("<div>").css({position:"absolute",left:-1e4,top:-1e4});r.toggleUnexportableColumns(r.columns),(a=r.wrapper.clone().css({height:"auto",width:"auto"}).appendTo(c)).find(".k-grid-content").css({height:"auto",width:"auto",overflow:"visible"}),a.find('table[role$="grid"], .k-grid-footer table').css({height:"auto",width:"100%",overflow:"visible"}),a.find(".k-grid-pager, .k-grid-toolbar, .k-grouping-header").remove(),a.find(".k-grid-header, .k-grid-footer, .k-auto-scrollable").css({paddingRight:0}),this._initPDFProgress(n);var u=a.find('table[role$="grid"] > tbody').first().empty(),p=l.page();function h(){s&&p!==t?(l.one("change",f),l.page(p)):(r.refresh(),f())}function f(){c.appendTo(document.body);var t=e.extend({},r.options.pdf,{_destructive:!0,progress:function(e){n.notify({page:e.page,pageNumber:e.pageNum,progress:.5+e.pageNum/e.totalPages/2,totalPages:e.totalPages})}});i.drawing.drawDOM(a,t).always((function(){c.remove()})).then((function(e){o.resolve(e),r.toggleUnexportableColumns(r.columns,!0)})).fail((function(e){o.reject(e)}))}function g(){var e=l.page(),t=s?l.totalPages():1;u.append(d.children("tr:not(.k-detail-row)")),e<t?l.page(e+1):(l.unbind("change",g),h())}return s?(l.bind("change",g),l.page(1)):g(),o.promise()},$n.prototype.toggleUnexportableColumns=function(e,t){for(var n,i,a,r,o=e.length,l=0;l<o;l++)i=(n=e[l]).exportable,t?n._toggledDuringExport?(n._toggledDuringExport=!1,n.hidden?this.showColumn(n):this.hideColumn(n)):n.columns&&this.toggleUnexportableColumns(n.columns,t):("object"==typeof n.exportable&&(i=n.exportable.pdf),a=!n.hidden&&!1!==i,r=n.hidden&&!0===i,(i=a||r)||n.hidden?i&&n.hidden?(n._toggledDuringExport=!0,this.showColumn(n)):i&&n.columns&&this.toggleUnexportableColumns(n.columns):(n._toggledDuringExport=!0,this.hideColumn(n)))},$n.prototype._drawPDF=function(n){var a=this;if(a.options.pdf.paperSize&&"auto"!=a.options.pdf.paperSize)return a._drawPDF_autoPageBreak(n);var r=new e.Deferred,o=a.dataSource,l=a.options.pdf.allPages;this._initPDFProgress(n);var s=new i.drawing.Group,d=o.page();function c(){l&&d!==t?(o.unbind("change",u),o.one("change",(function(){r.resolve(s)})),o.page(d)):r.resolve(s)}function u(){a.toggleUnexportableColumns(a.columns),a._drawPDFShadow({width:a.wrapper.width()},{avoidLinks:a.options.pdf.avoidLinks}).done((function(e){var t=o.page(),i=l?o.totalPages():1,r={page:e,pageNumber:t,progress:t/i,totalPages:i};a.toggleUnexportableColumns(a.columns,!0),n.notify(r),s.append(r.page),t<i?o.page(t+1):c()})).fail((function(e){r.reject(e)}))}return l?(o.bind("change",u),o.page(1)):u(),r.promise()},$n.prototype._initPDFProgress=function(t){var n=e("<div class='k-loading-pdf-mask'><div class='k-loading-color'></div></div>");n.prepend(this.wrapper.clone().css({position:"absolute",top:0,left:0})),this.wrapper.append(n);var a=e("<div class='k-loading-pdf-progress'>").appendTo(n).kendoProgressBar({type:"chunk",chunkCount:10,min:0,max:1,value:0}).data("kendoProgressBar");t.progress((function(e){a.value(e.progress)})).always((function(){i.destroy(n),n.remove()}))}),a.plugin($n),a.plugin(St)}(window.kendo.jQuery),window.kendo})?i.apply(t,a):i)||(e.exports=r)},67445:function(e,t,n){var i,a,r;n.amdD,a=[n(55031),n(71231)],void 0===(r="function"==typeof(i=function(){return function(e,t){var n=window.kendo,i=n.ui.Widget,a=n._outerWidth,r=n.attr,o=e.extend,l=e.each,s=e.proxy,d=!1,c="dir",u="field",p="title",h="asc",f="desc",g="group-sort",m=".kendoGroupable",k="change",b=n.template('<div class="k-group-indicator" data-#=data.ns#field="${data.field}" data-#=data.ns#title="${data.title || ""}" data-#=data.ns#dir="${data.dir || "asc"}"><a href="\\#" class="k-link"><span class="k-icon k-i-sort-${(data.dir || "asc") == "asc" ? "asc-sm" : "desc-sm"}" title="(sorted ${(data.dir || "asc") == "asc" ? "ascending": "descending"})"></span>${data.title ? data.title: data.field}</a><a href="\\#" data-role="button" aria-label="Remove grouping by ${data.title || data.field} field" class="k-button k-button-icon k-flat"><span class="k-icon k-i-close"></span></a></div>',{useWithBlock:!1}),v=function(t){var i=t.attr(n.attr("title"));return i&&(i=n.htmlEncode(i)),e('<div class="k-header k-group-clue k-drag-clue" />').html(i||t.attr(n.attr("field"))).prepend('<span class="k-icon k-drag-status k-i-cancel"></span>')},_=e('<div class="k-grouping-dropclue"/>'),w=i.extend({init:function(t,l){var u,p,b=this,w=n.guid(),C=s(b._intializePositions,b),y=b._dropCuePositions=[];i.fn.init.call(b,t,l),d=n.support.isRtl(t),p=d?"right":"left",b.draggable=u=b.options.draggable||new n.ui.Draggable(b.element,{filter:b.options.draggableElements,hint:v,group:w}),b.groupContainer=e(b.options.groupContainer,b.element).kendoDropTarget({group:u.options.group,dragenter:function(e){b._canDrag(e.draggable.currentTarget)&&(e.draggable.hint.find(".k-drag-status").removeClass("k-i-cancel").addClass("k-i-plus"),_.css(p,0).appendTo(b.groupContainer))},dragleave:function(e){e.draggable.hint.find(".k-drag-status").removeClass("k-i-plus").addClass("k-i-cancel"),_.remove()},drop:function(t){var i,a=t.draggable.currentTarget,r=a.attr(n.attr("field")),l=a.attr(n.attr("title")),s=b.indicator(r),c=b._dropCuePositions,u=c[c.length-1],p=o({},b.options.sort,a.data(g)),h=p.dir;(a.hasClass("k-group-indicator")||b._canDrag(a))&&(u?(i=b._dropCuePosition(n.getOffset(_).left+parseInt(u.element.css("marginLeft"),10)*(d?-1:1)+parseInt(u.element.css("marginRight"),10)))&&b._canDrop(e(s),i.element,i.left)&&(i.before?i.element.before(s||b.buildIndicator(r,l,h)):i.element.after(s||b.buildIndicator(r,l,h)),b._setIndicatorSortOptions(r,p),b._change()):(b.groupContainer.empty(),b.groupContainer.append(b.buildIndicator(r,l,h)),b._setIndicatorSortOptions(r,p),b._change()))}}).kendoDraggable({filter:"div.k-group-indicator",hint:v,group:u.options.group,dragcancel:s(b._dragCancel,b),dragstart:function(e){var t=e.currentTarget,n=parseInt(t.css("marginLeft"),10),i=t.position(),r=d?i.left-n:i.left+a(t);C(),_.css("left",r).appendTo(b.groupContainer),this.hint.find(".k-drag-status").removeClass("k-i-cancel").addClass("k-i-plus")},dragend:function(){b._dragEnd(this)},drag:s(b._drag,b)}).on("click"+m,".k-button",(function(t){t.preventDefault(),b._removeIndicator(e(this).parent())})).on("click"+m,".k-link",(function(t){var n=e(this).parent(),i=n.attr(r(c))===h?f:h;n.attr(r(c),i),b._change(),t.preventDefault()})),u.bind(["dragend","dragcancel","dragstart","drag"],{dragend:function(){b._dragEnd(this)},dragcancel:s(b._dragCancel,b),dragstart:function(e){var t;b.options.allowDrag||b._canDrag(e.currentTarget)?(C(),y.length&&(t=y[y.length-1].element,parseInt(t.css("marginRight"),10),t.position().left,a(t))):e.preventDefault()},drag:s(b._drag,b)}),b.dataSource=b.options.dataSource,b.dataSource&&b._refreshHandler?b.dataSource.unbind(k,b._refreshHandler):b._refreshHandler=s(b.refresh,b),b.dataSource&&(b.dataSource.bind("change",b._refreshHandler),b.refresh())},refresh:function(){var t,n=this,i=n.dataSource.group()||[],a=r(u),s=r(p);n.groupContainer&&(n.groupContainer.empty(),l(i,(function(i,r){var l=r.field,d=r.dir,c=n.element.find(n.options.filter).filter((function(){return e(this).attr(a)===l}));t=n.buildIndicator(l,c.attr(s),d),n.groupContainer.append(t),n._setIndicatorSortOptions(l,o({},n.options.sort,{dir:d,compare:r.compare}))}))),n._invalidateGroupContainer()},destroy:function(){var e=this;i.fn.destroy.call(e),e.groupContainer.off(m),e.groupContainer.data("kendoDropTarget")&&e.groupContainer.data("kendoDropTarget").destroy(),e.groupContainer.data("kendoDraggable")&&e.groupContainer.data("kendoDraggable").destroy(),e.options.draggable||e.draggable.destroy(),e.dataSource&&e._refreshHandler&&(e.dataSource.unbind("change",e._refreshHandler),e._refreshHandler=null),e.groupContainer=e.element=e.draggable=null},events:["change"],options:{name:"Groupable",filter:"th",draggableElements:"th",messages:{empty:"Drag a column header and drop it here to group by that column"},sort:{dir:h,compare:null}},indicator:function(t){var i=e(".k-group-indicator",this.groupContainer);return e.grep(i,(function(i){return e(i).attr(n.attr("field"))===t}))[0]},buildIndicator:function(e,t,i){var a=this;return b({ns:n.ns,field:e.replace(/"/g,"'"),title:t,dir:i||(a.options.sort||{}).dir||h})},_setIndicatorSortOptions:function(t,n){e(this.indicator(t)).data(g,n)},aggregates:function(){var t,i,a,r=this;return r.element.find(r.options.filter).map((function(){var r=e(this),o=r.attr(n.attr("aggregates")),l=r.attr(n.attr("field"));if(o&&""!==o)for(t=o.split(","),o=[],i=0,a=t.length;i<a;i++)o.push({field:l,aggregate:t[i]});return o})).toArray()},descriptors:function(){var t,i=this,a=e(".k-group-indicator",i.groupContainer),r=i.aggregates();return e.map(a,(function(a){a=e(a),t=a.attr(n.attr("field"));var o=i.options.sort||{},l=a.data(g)||{};return{field:t,dir:a.attr(n.attr("dir")),aggregates:r||[],compare:l.compare||o.compare}}))},_removeIndicator:function(e){var t=this;e.off(),e.removeData(),e.remove(),t._invalidateGroupContainer(),t._change()},_change:function(){var e=this;if(e.dataSource){var t=e.descriptors();if(e.trigger("change",{groups:t}))return void e.refresh();e.dataSource.group(t)}},_dropCuePosition:function(t){var n=this._dropCuePositions;if(_.is(":visible")&&0!==n.length){t=Math.ceil(t);var i=n[n.length-1],r=i.left,o=i.right,l=parseInt(i.element.css("marginLeft"),10),s=parseInt(i.element.css("marginRight"),10);return t>=o&&!d||t<r&&d?t={left:i.element.position().left+(d?-l:a(i.element)+s),element:i.element,before:!1}:(t=e.grep(n,(function(e){return e.left<=t&&t<=e.right||d&&t>e.right}))[0])&&(t={left:d?t.element.position().left+a(t.element)+s:t.element.position().left-l,element:t.element,before:!0}),t}},_drag:function(e){var t=this._dropCuePosition(e.x.location);t&&_.css({left:t.left,right:"auto"})},_canDrag:function(e){var t=e.attr(n.attr("field"));return"false"!=e.attr(n.attr("groupable"))&&t&&(e.hasClass("k-group-indicator")||!this.indicator(t))},_canDrop:function(e,t,n){var i=e.next();return e[0]!==t[0]&&(!i[0]||t[0]!==i[0]||!d&&n>i.position().left||d&&n<i.position().left)},_dragEnd:function(t){var i=this,a=t.currentTarget.attr(n.attr("field")),r=i.indicator(a);t!==i.options.draggable&&!t.dropped&&r&&i._removeIndicator(e(r)),i._dragCancel()},_dragCancel:function(){_.remove(),this._dropCuePositions=[]},_intializePositions:function(){var t,i=this,r=e(".k-group-indicator",i.groupContainer);i._dropCuePositions=e.map(r,(function(i){return i=e(i),t=n.getOffset(i).left,{left:parseInt(t,10),right:parseInt(t+a(i),10),element:i}}))},_invalidateGroupContainer:function(){var e=this.groupContainer;e&&e.is(":empty")&&e.html(this.options.messages.empty)}});n.ui.plugin(w)}(window.kendo.jQuery),window.kendo})?i.apply(t,a):i)||(e.exports=r)},56373:function(e,t,n){var i,a,r;n.amdD,a=[n(88905)],void 0===(r="function"==typeof(i=function(){return function(e,t){var n=window.kendo,i=n.roleSelector,a=n.ui,r=a.Widget,o=n.ViewEngine,l=n.View,s=e.extend,d="navigate",c="viewShow",u="sameViewRequested",p=n.support.mobileOS,h=p.ios&&!p.appMode&&p.flatVersion>=700,f="#:back",g=".",m={pane:"k-pane",paneWrapper:"k-pane-wrapper",collapsiblePane:"k-collapsible-pane",vertical:"k-vertical"},k=r.extend({init:function(e,t){var i=this;r.fn.init.call(i,e,t),t=i.options,(e=i.element).addClass(m.pane),i.options.collapsible&&e.addClass(m.collapsiblePane),this.history=[],this.historyCallback=function(e,t,n){var a=i.transition;return i.transition=null,h&&n&&(a="none"),i.viewEngine.showView(e,a,t)},this._historyNavigate=function(e){if(e===f){if(1===i.history.length)return;i.history.pop(),e=i.history[i.history.length-1]}else e instanceof l&&(e=""),i.history.push(e);i.historyCallback(e,n.parseQueryStringParams(e))},this._historyReplace=function(e){var t=n.parseQueryStringParams(e);i.history[i.history.length-1]=e,i.historyCallback(e,t)},i.viewEngine=new o(s({},{container:e,transition:t.transition,modelScope:t.modelScope,rootNeeded:!t.initial,serverNavigation:t.serverNavigation,remoteViewURLPrefix:t.root||"",layout:t.layout,$angular:t.$angular,showStart:function(){i.closeActiveDialogs()},after:function(){},viewShow:function(e){i.trigger(c,e)},loadStart:function(){},loadComplete:function(){},sameViewRequested:function(){i.trigger(u)},viewTypeDetermined:function(e){e.remote&&i.options.serverNavigation||i.trigger(d,{url:e.url})}},this.options.viewEngine)),this._setPortraitWidth(),n.onResize((function(){i._setPortraitWidth()}))},closeActiveDialogs:function(){this.element.find(i("actionsheet popover modalview")).filter(":visible").each((function(){n.widgetInstance(e(this),a).close()}))},navigateToInitial:function(){var e=this.options.initial;return e&&this.navigate(e),e},options:{name:"Pane",portraitWidth:"",transition:"",layout:"",collapsible:!1,initial:null,modelScope:window},events:[d,c,u],append:function(e){return this.viewEngine.append(e)},destroy:function(){var e=this;r.fn.destroy.call(e),e.viewEngine&&e.viewEngine.destroy()},navigate:function(e,t){e instanceof l&&(e=e.id),this.transition=t,this._historyNavigate(e)},replace:function(e,t){e instanceof l&&(e=e.id),this.transition=t,this._historyReplace(e)},view:function(){return this.viewEngine.view()},_setPortraitWidth:function(){var e,t=this.options.portraitWidth;t&&(e=n.mobile.application.element.is(g+m.vertical)?t:"auto",this.element.css("width",e))}});k.wrap=function(e,t){e.is(i("view"))||(e=e.wrap("<div data-"+n.ns+'role="view" data-stretch="true"></div>').parent());var a=e.wrap('<div class="'+m.paneWrapper+' k-widget"><div></div></div>').parent(),r=new k(a,t);return r.navigate(""),r},n.Pane=k}(window.kendo.jQuery),window.kendo})?i.apply(t,a):i)||(e.exports=r)},1083:function(e,t,n){var i,a,r;n.amdD,a=[n(55031),n(71231)],void 0===(r="function"==typeof(i=function(){return function(e,t){var n=window.kendo,i=n._outerWidth,a=n._outerHeight,r=n.getOffset,o=n.ui.Widget,l="change",s="k-reorderable";function d(t,n){t=e(t),n?t.find(".k-drag-status").removeClass("k-i-plus").addClass("k-i-cancel"):t.find(".k-drag-status").removeClass("k-i-cancel").addClass("k-i-plus")}var c=o.extend({init:function(t,c){var u,p=this,h=n.guid()+"-reorderable";o.fn.init.call(p,t,c),t=p.element.addClass(s),c=p.options,p.draggable=u=c.draggable||new n.ui.Draggable(t,{group:h,autoScroll:!0,filter:c.filter,hint:c.hint}),p.reorderDropCue=e('<div class="k-reorder-cue"></div></div>'),t.find(u.options.filter).kendoDropTarget({group:u.options.group,dragenter:function(e){if(p._draggable){var t,n=this.element,o=!p._dropTargetAllowed(n)||p._isLastDraggable();if(d(e.draggable.hint,o),!o){var l=(t=r(n)).left;c.inSameContainer&&!c.inSameContainer({source:n,target:p._draggable,sourceIndex:p._index(n),targetIndex:p._index(p._draggable)})?p._dropTarget=n:p._index(n)>p._index(p._draggable)&&(l+=i(n)),p.reorderDropCue.css({height:a(n),top:t.top,left:l}).appendTo(document.body)}}},dragleave:function(e){d(e.draggable.hint,!0),p.reorderDropCue.remove(),p._dropTarget=null},drop:function(){if(p._dropTarget=null,p._draggable){var e=this.element,t=p._draggable;p._dropTargetAllowed(e)&&!p._isLastDraggable()&&p.trigger(l,{element:p._draggable,target:e,oldIndex:p._index(t),newIndex:p._index(e),position:r(p.reorderDropCue).left>r(e).left?"after":"before"})}}}),u.bind(["dragcancel","dragend","dragstart","drag"],{dragcancel:function(){p.reorderDropCue.remove(),p._draggable=null,p._elements=null},dragend:function(){p.reorderDropCue.remove(),p._draggable=null,p._elements=null},dragstart:function(e){p._draggable=e.currentTarget,p._elements=p.element.find(p.draggable.options.filter)},drag:function(e){if(p._dropTarget&&!this.hint.find(".k-drag-status").hasClass("k-i-cancel")){var t=r(p._dropTarget).left,n=i(p._dropTarget);e.pageX>t+n/2?p.reorderDropCue.css({left:t+n}):p.reorderDropCue.css({left:t})}}})},options:{name:"Reorderable",filter:"*"},events:[l],_isLastDraggable:function(){var e,t=this.options.inSameContainer,n=this._draggable[0],i=this._elements.get(),a=!1;if(!t)return!1;for(;!a&&i.length>0;)a=n!==(e=i.pop())&&t({source:n,target:e,sourceIndex:this._index(n),targetIndex:this._index(e)});return!a},_dropTargetAllowed:function(e){var t=this.options.inSameContainer,n=this.options.dragOverContainers,i=this._draggable;return i[0]!==e[0]&&(!t||!n||!!t({source:i,target:e,sourceIndex:this._index(i),targetIndex:this._index(e)})||n(this._index(i),this._index(e)))},_index:function(e){return this._elements.index(e)},destroy:function(){var t=this;o.fn.destroy.call(t),t.element.find(t.draggable.options.filter).each((function(){var t=e(this);t.data("kendoDropTarget")&&t.data("kendoDropTarget").destroy()})),t.draggable&&(t.draggable.destroy(),t.draggable.element=t.draggable=null),t.elements=t.reorderDropCue=t._elements=t._draggable=null}});n.ui.plugin(c)}(window.kendo.jQuery),window.kendo})?i.apply(t,a):i)||(e.exports=r)},99057:function(e,t,n){var i,a,r;n.amdD,a=[n(55031),n(71231)],void 0===(r="function"==typeof(i=function(){return function(e,t){var n=window.kendo,i=n.ui,a=i.Widget,r=e.proxy,o=n.isFunction,l=e.extend,s="horizontal",d="vertical",c="start",u="resize",p="resizeend",h=a.extend({init:function(e,t){var n=this;a.fn.init.call(n,e,t),n.orientation=n.options.orientation.toLowerCase()!=d?s:d,n._positionMouse=n.orientation==s?"x":"y",n._position=n.orientation==s?"left":"top",n._sizingDom=n.orientation==s?"outerWidth":"outerHeight",n.draggable=new i.Draggable(t.draggableElement||e,{distance:1,filter:t.handle,drag:r(n._resize,n),dragcancel:r(n._cancel,n),dragstart:r(n._start,n),dragend:r(n._stop,n)}),n.userEvents=n.draggable.userEvents},events:[u,p,c],options:{name:"Resizable",orientation:s},resize:function(){},_max:function(e){var n=this,i=n.hint?n.hint[n._sizingDom]():0,a=n.options.max;return o(a)?a(e):a!==t?n._initialElementPosition+a-i:a},_min:function(e){var n=this,i=n.options.min;return o(i)?i(e):i!==t?n._initialElementPosition+i:i},_start:function(t){var n=this,i=n.options.hint,a=e(t.currentTarget);n._initialElementPosition=a.position()[n._position],n._initialMousePosition=t[n._positionMouse].startLocation,i&&(n.hint=o(i)?e(i(a)):i,n.hint.css({position:"absolute"}).css(n._position,n._initialElementPosition).appendTo(n.element)),n.trigger(c,t),n._maxPosition=n._max(t),n._minPosition=n._min(t),e(document.body).css("cursor",a.css("cursor"))},_resize:function(e){var n,i=this,a=i._maxPosition,r=i._minPosition,o=i._initialElementPosition+(e[i._positionMouse].location-i._initialMousePosition);n=r!==t?Math.max(r,o):o,i.position=n=a!==t?Math.min(a,n):n,i.hint&&i.hint.toggleClass(i.options.invalidClass||"",n==a||n==r).css(i._position,n),i.resizing=!0,i.trigger(u,l(e,{position:n}))},_stop:function(t){var n=this;n.hint&&n.hint.remove(),n.resizing=!1,n.trigger(p,l(t,{position:n.position})),e(document.body).css("cursor","")},_cancel:function(e){var n=this;n.hint&&(n.position=t,n.hint.css(n._position,n._initialElementPosition),n._stop(e))},destroy:function(){var e=this;a.fn.destroy.call(e),e.draggable&&e.draggable.destroy()},press:function(e){if(e){var t=e.position(),n=this;n.userEvents.press(t.left,t.top,e[0]),n.targetPosition=t,n.target=e}},move:function(e){var n=this,i=n._position,a=n.targetPosition,r=n.position;r===t&&(r=a[i]),a[i]=r+e,n.userEvents.move(a.left,a.top)},end:function(){this.userEvents.end(),this.target=this.position=t}});n.ui.plugin(h)}(window.kendo.jQuery),window.kendo})?i.apply(t,a):i)||(e.exports=r)}}]);